import{r as N,u as q,j as e,a1 as _,Q as S}from"./index-0ca76035.js";import{M as y,N as k}from"./institute-staff-student-api-7114d611.js";const p="_complaintDetails_csqo4_1",A="_detailsheader_csqo4_7",L="_item_csqo4_13",f="_datetime_csqo4_22",g="_detailsbody_csqo4_51",E="_footer_csqo4_58",Q="_solvedbtn_csqo4_77",t={complaintDetails:p,detailsheader:A,item:L,datetime:f,detailsbody:g,footer:E,solvedbtn:Q};function H({onComplaintId:c,setShowDetails:h,setRefetchStatus:m}){var i,o,r,l;const[v]=y(),[x,d]=N.useState(!1),{staffComplaintDetail:s,staffComplaintDetailRefetch:j}=k({cid:c==null?void 0:c.cid,skip:!(c!=null&&c.cid)}),u=()=>{var n;d(a=>!a),v({cid:(n=s==null?void 0:s.complaint)==null?void 0:n._id,complaintStatus:{status:"Solved"}}).then(()=>{j(),h(!1),m({solved:!0,unsolved:!0}),d(a=>!a)}).catch({})},{t:b}=q();return e.jsxs("div",{className:t.complaintDetails,children:[e.jsx("div",{className:t.detailsheader,children:e.jsxs("div",{className:t.item,children:[e.jsx("img",{src:"/images/complainIconDark.svg",alt:""}),e.jsxs("div",{children:[e.jsx("h6",{children:c==null?void 0:c.name}),e.jsxs("div",{className:t.datetime,children:[e.jsx("p",{children:_((i=s==null?void 0:s.complaint)==null?void 0:i.createdAt).format("LL")}),e.jsx("p",{children:_((o=s==null?void 0:s.complaint)==null?void 0:o.createdAt).format("LT")})]})]})]})}),e.jsx("div",{className:t.detailsbody,children:e.jsx("p",{children:(r=s==null?void 0:s.complaint)==null?void 0:r.complaintContent})}),e.jsx("div",{className:t.footer,children:((l=s==null?void 0:s.complaint)==null?void 0:l.complaintStatus)==="Unsolved"&&e.jsx("div",{className:t.solvedbtn,onClick:u,children:b("Solved")})}),x&&e.jsx(S,{})]})}export{H as default};
