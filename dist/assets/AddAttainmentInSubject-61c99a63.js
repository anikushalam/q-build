import{u as b,r as i,j as s}from"./index-0ca76035.js";import{s as u}from"./SeatingArrangement.module-3f4ae6aa.js";import{B as J}from"./BorderBottom-1dc6f53e.js";import{J as T}from"./JoinFormInputView-2b5b0bdd.js";import{J as E}from"./JoinFormInput-82706177.js";import{H as w}from"./subject-api-d07de19e.js";const H=({onBack:N,stationaryPoint:h,smid:_,subjectName:C,onGrabAttainment:S,createdBy:r})=>{var p;const{t:l}=b(),[m,f]=i.useState([]),[M,g]=i.useState(""),[o,j]=i.useState({totalMarks:""}),{getAllCopoAttainment:n,getAllCopoAttainmentRefetch:x}=w({data:{smid:_,flow:"MARKING_COPO"},skip:!_});i.useEffect(()=>{_&&x()},[_,x]),i.useEffect(()=>{if(n!=null&&n.attainment){let e=[];for(let t of n==null?void 0:n.attainment)e.push({attainmentId:t==null?void 0:t._id,attainment_name:t==null?void 0:t.attainment_name,marks:""});f(e)}},[n==null?void 0:n.attainment]);const I=(e,t)=>{var d;const a=[...m];for(let c=0;c<(a==null?void 0:a.length);c++)((d=a[c])==null?void 0:d.attainmentId)===t&&(a[c].marks=+e.target.value);f(a)},k=()=>{let e=m,t=[];for(let a of e)a!=null&&a.marks&&t.push(a);r==="SUBJECT_ASSIGNMENT"?o!=null&&o.totalMarks?S({copo_list:t,assignment_total_mark:o.totalMarks}):g({totalMarks:"* required"}):S(t)},v=e=>{j(t=>({...t,totalMarks:+e.target.value}))};return s.jsxs("div",{className:u.seating_modal,style:r==="SUBJECT_ASSIGNMENT"?{width:"100%",maxWidth:"100%",maxHeight:"100%"}:{color:"inherit"},children:[r==="SUBJECT_ASSIGNMENT"?null:s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:u.seating_modal_title_left,style:{position:"relative"},children:[s.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:N,alt:"back"}),s.jsx("h6",{children:l("copo_details")}),s.jsx("button",{className:u.next_btn,title:"Next",onClick:k,children:l("next")})]}),s.jsx(J,{customStyle:{width:"100%",marginTop:"0.5rem",marginBottom:"0.5rem"}})]}),r==="SUBJECT_TEACHER"||r==="SUBJECT_ASSIGNMENT"?null:s.jsx(T,{labelText:l("subject_exam"),value:C}),r==="SUBJECT_ASSIGNMENT"?s.jsx(E,{labelText:l("marks"),placeholder:l("enter_the_marks"),name:"totalMarks",value:o==null?void 0:o.totalMarks,type:"number",onChange:v,errorShow:M.totalMarks}):s.jsx(T,{labelText:`${l("marks")} : `,value:(p=h==null?void 0:h.showSubject)==null?void 0:p.totalMarks}),m==null?void 0:m.map((e,t)=>s.jsx(E,{labelText:e.attainment_name,placeholder:l("enter_the_marks"),name:e.attainmentId,value:e.marks,type:"number",onChange:a=>I(a,e.attainmentId)},t)),r==="SUBJECT_ASSIGNMENT"?s.jsx("div",{className:`${u.assignment_btn} ${u.assignment_btn_active}`,onClick:k,children:l("create_assignment")}):null]})};export{H as A};
