import{j as e,u as ts,r,Q as os,d as cs,c as ns,k as rs,w as ms,s as ls,x as ds,e as _s}from"./index-731451a5.js";import{t as ps}from"./institute-staff-student-api-7f4890fe.js";import{S as us}from"./StudentProfileLoginDetails-c5fc54ba.js";import{S as hs}from"./StaffProfileAbout-ce127bc9.js";import xs from"./StaffAttendence-3278e77c.js";import fs from"./Payroll-4c5d36c1.js";import{C as es}from"./CustomSuspenseGif-5a30d901.js";import{s as m,B as T}from"./BorderBottom-47800983.js";import{U as gs}from"./UniversalTab-d4f2174c.js";import{S as js}from"./StaffHeader-8b393c01.js";import{s as h}from"./JoinForm.module-212f9bb3.js";import{aC as vs}from"./department-api-a4f0b4b7.js";import{P as bs}from"./PopupWrapper-ffbaef7a.js";import{s as N}from"./FeesStructure.module-7a88fbbc.js";import{J as y}from"./JoinFormInput-8e74a0e0.js";import{C as Ns}from"./CreateStaffLeave-3833b760.js";import"./StaffProfileEachInfo-21badda6.js";import"./ViewFileDialog-0c131c06.js";import"./Overlay-07ce6f88.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalBackdrop-5b309d60.js";import"./SearchHeader.module-b69c8942.js";import"./attendance-api-b2a2423b.js";import"./SendFilterStudentMessage-cf1c7d66.js";import"./JoinFormTextArea-7f6dded0.js";import"./Switch-81e70f2f.js";import"./SwitchBase-2ba5f868.js";import"./SearchModalWrapper-6e85c9f3.js";import"./TileWrapper-be9153cb.js";import"./Tile.module-64552da2.js";import"./JoinFormFile-110be590.js";const ys=({dynamicImage:c,indexNumber:a,designation:l,name:d,currentDesignation:i})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:m.staff_profile_photo_container,style:{minHeight:"5rem"},children:[e.jsx("img",{src:c,alt:"staff avatar",className:m.staff_profile_photo_image}),e.jsxs("div",{className:m.staff_profile_photo_info,children:[e.jsx("h5",{className:m.staff_profile_photo_name,children:d}),e.jsx("p",{className:m.staff_profile_photo_index,children:a}),e.jsx("p",{className:m.staff_profile_photo_index,children:l}),e.jsx("p",{className:m.staff_profile_photo_index,children:i})]})]})}),Ts=({onRefetch:c,leaveConfig:a,sid:l,onClose:d})=>{const{t:i}=ts(),[n,x]=r.useState({c_l:"",m_l:"",s_l:""}),[f,g]=r.useState(!1),[v]=vs();r.useEffect(()=>{a&&x({c_l:(a==null?void 0:a.casual_leave)??"",m_l:(a==null?void 0:a.medical_leave)??"",s_l:(a==null?void 0:a.sick_leave)??""})},[a]);const p=t=>{x(j=>({...j,[t.target.name]:+t.target.value}))},b=()=>{l&&(g(t=>!t),v({sid:l,leaveConfig:n}).then(()=>{c(),g(t=>!t),d()}).catch({}))},_=()=>{f||d()};return e.jsx(e.Fragment,{children:e.jsxs(bs,{onClose:_,children:[e.jsx("div",{className:N.add_category_modal,style:{width:"35rem",minHeight:"10rem",height:"fit-content"},children:e.jsxs("section",{className:N.fee_middle_section_container,style:{marginBottom:"1.2rem"},children:[e.jsx("h6",{style:{fontSize:"20px",fontWeight:"600"},children:i("leave_configuration")}),e.jsx(T,{customStyle:{width:"100%",marginTop:"0.7rem"}}),e.jsx(y,{labelText:i("casual_leave"),placeholder:i("casual_leave_placeholder"),name:"c_l",value:n==null?void 0:n.c_l,type:"tel",onChange:p}),e.jsx(y,{labelText:i("medical_leave"),placeholder:i("medical_leave_placeholder"),name:"m_l",value:n==null?void 0:n.m_l,type:"tel",onChange:p}),e.jsx(y,{labelText:i("sick_leave"),placeholder:i("sick_leave_placeholder"),name:"s_l",value:n==null?void 0:n.s_l,type:"tel",onChange:p}),e.jsx("button",{className:N.fee_middle_confirm_button,onClick:b,style:{marginTop:"2rem"},children:i("save")})]})}),f&&e.jsx(os,{})]})})},te=()=>{var I,w,E,O,$,C,R,A,B,U,F,H,M,Q,G,V,W,D,J,q,z,K,X,Y,Z,S,P,ss;const{t:c}=ts(),a=cs(),l=ns(),d=[{name:c("about"),id:0},{name:c("attendance"),id:1},{name:c("payroll_info"),id:2}],[i,n]=r.useState(0),[x,f]=r.useState(!1),[g,v]=r.useState(!1),[p,b]=r.useState(!1),_=rs(o=>o.idChange.id),{data:t,refetch:j}=ms(_,{skip:!_}),{oneStaffProfile:s,oneStaffProfileRefetch:u}=ps({sid:(I=a.state)==null?void 0:I.sid,skip:!((w=a.state)!=null&&w.sid)});r.useEffect(()=>{var o;(o=document.getElementById("scrollView"))==null||o.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},[(E=a.state)==null?void 0:E.sid]);const as=()=>{l(-1)};r.useEffect(()=>{_&&j()},[_,j]),r.useEffect(()=>{var o;(o=a.state)!=null&&o.sid&&u()},[(O=a.state)==null?void 0:O.sid,u]);const is=()=>{f(o=>!o)},L=()=>{v(o=>!o)},k=()=>{b(o=>!o)};return e.jsxs("div",{children:[e.jsx("div",{className:h.navbar,children:(($=a.state)==null?void 0:$.viewAs)==="INSTITUTE"?e.jsx(ls,{status:"home"}):e.jsx(ds,{status:"members",profileId:t?(C=t==null?void 0:t.user)==null?void 0:C._id:"",username:(R=t==null?void 0:t.user)==null?void 0:R.username,name:(A=t==null?void 0:t.user)==null?void 0:A.userLegalName,photoId:(B=t==null?void 0:t.user)==null?void 0:B.photoId,profilePhoto:(U=t==null?void 0:t.user)==null?void 0:U.profilePhoto,profileData:t==null?void 0:t.user})}),e.jsx("div",{className:h.goback_container,id:"scrollView",children:e.jsxs("div",{className:h.goback_container_text,onClick:as,children:[e.jsx("img",{src:"/images/arr-left-white.svg",alt:"go back icon"}),e.jsx("h6",{className:h.goback_container_text_go,children:c("go_back")})]})}),e.jsxs("div",{className:h.student_from_container,style:{marginBottom:"1rem"},children:[e.jsx(js,{textLevel:c("staff_profile_ins"),viewAs:"DEPARTMENT_HEAD",configTitle:c("leave_setting"),onConfig:L,configTitle1:c("request_c_off_leave"),onConfig1:k}),e.jsx(T,{customStyle:{width:"100%"}}),e.jsx(ys,{name:`${((F=s==null?void 0:s.staff)==null?void 0:F.staffFirstName)||""} ${(H=s==null?void 0:s.staff)!=null&&H.staffMiddleName?(M=s==null?void 0:s.staff)==null?void 0:M.staffMiddleName:""} ${((Q=s==null?void 0:s.staff)==null?void 0:Q.staffLastName)||""}`,designation:`Designations: ${((G=s==null?void 0:s.staff)==null?void 0:G.staffDesignationCount)||0}`,indexNumber:`Index No. ${((V=s==null?void 0:s.staff)==null?void 0:V.staffROLLNO)||"-"}`,dynamicImage:(W=s==null?void 0:s.staff)!=null&&W.staffProfilePhoto?`${_s}/${(D=s==null?void 0:s.staff)==null?void 0:D.staffProfilePhoto}`:"/images/ins_default_profile.svg",currentDesignation:`${c("form_current_designation_label")}: ${((J=s==null?void 0:s.staff)==null?void 0:J.current_designation)??""}`}),e.jsx("div",{style:{marginTop:"1.7rem"}}),e.jsx(gs,{tabList:d,activeIndexTab:i,setActiveIndexTab:n,customStyleTab:{width:"33.3%"}}),e.jsx(T,{customStyle:{width:"100%"}}),i===0&&e.jsx(hs,{staff:s==null?void 0:s.staff}),i===1&&e.jsx(es,{children:e.jsx(xs,{sid:(q=s==null?void 0:s.staff)==null?void 0:q._id})}),i===2&&e.jsx(es,{children:e.jsx(fs,{sid:(z=s==null?void 0:s.staff)==null?void 0:z._id})})]}),x&&e.jsx(us,{onLoginDetailToggle:is,loginData:(K=s==null?void 0:s.staff)==null?void 0:K.user,sid:(X=s==null?void 0:s.staff)==null?void 0:X._id,onRefetch:u,is_staff:!0}),g&&e.jsx(Ts,{onRefetch:u,sid:(Y=s==null?void 0:s.staff)==null?void 0:Y._id,onClose:L,leaveConfig:{casual_leave:(Z=s==null?void 0:s.staff)==null?void 0:Z.casual_leave,medical_leave:(S=s==null?void 0:s.staff)==null?void 0:S.medical_leave,sick_leave:(P=s==null?void 0:s.staff)==null?void 0:P.sick_leave}}),p&&e.jsx(Ns,{createdBy:"OWN_PROFILE",staffId:(ss=s==null?void 0:s.staff)==null?void 0:ss._id,onRefetch:u,onClose:k})]})};export{te as default};
