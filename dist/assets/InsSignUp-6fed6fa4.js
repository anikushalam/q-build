import{r as m,nr as K,ns as X,nt as Z,nu as D,aV as ee,aW as se,g as ne,c as ie,h as ae,A as te,u as A,R as ce,l as q,j as e}from"./index-731451a5.js";import{s,M as re,S as oe,C as le}from"./SignUpVerify-b47a2fe1.js";import{v as me}from"./verifyUserNameSpaces-1eb95efa.js";import"./SigninHeader.module-ca519f7c.js";import{B as de}from"./ButtonWithTypeSubmit-71da32d7.js";import{B as T}from"./ButtonWithAction-805b1066.js";import"./Container.module-c3c43a80.js";import"./ResendTimer-2d001486.js";import"./LoaderButton-71df50a7.js";const U=()=>{const[n,h]=m.useState({email:"",username:""}),[d,o]=m.useState({username:"",email:""}),[g]=K(),[c]=X(),[t]=Z(),[l]=D(),{exitsingUsernameVerify:x,exitsingUsernameVerifyRefetch:I}=ee({username:n.username,skip:!n.username}),{exitsingEmailVerify:j,exitsingEmailVerifyRefetch:C}=se({email:n.email,skip:!n.email}),S=ne(),O=ie();return m.useEffect(()=>{n.email&&C(),n.username&&I()},[n.email,n.username]),m.useEffect(()=>{x&&o(r=>{var u;return{...r,username:(u=x==null?void 0:x.username)!=null&&u._id?"invalid":"valid"}}),j&&o(r=>{var u;return{...r,email:(u=j==null?void 0:j.valid_flag)!=null&&u.emailId?"invalid":"valid"}})},[x,j]),{mobileRegister:async r=>{try{const{data:u}=await g(r);if(u.message)return{phoneNumber:u==null?void 0:u.insPhoneNumber}}catch{return{msg:"Time out of request..."}}},numberVerification:async r=>{try{const{data:u}=await c({insOtpCode:r.otpCode,insPhoneNumber:r.phoneNumber});if(u.message==="Invalid OTP")return{msg:"Invalid OTP",run:!0};if(u.insMobileStatus)return{mobileStatus:u.insMobileStatus}}catch{return{msg:"Time out of request..."}}},registerAccount:async r=>{var u;try{const f=new FormData;for(let a in r)f.append(a,r[a]);const{data:y}=await t(f);if(y.institute)return{_id:(u=y.institute)==null?void 0:u._id}}catch{return{msg:"Time out of request..."}}},createPassword:async r=>{var u,f,y;try{const{data:a}=await l(r);a.login&&(S(ae.loginQuery({login:!0,token:a.token,id:(u=a.institute)==null?void 0:u._id,status:!0,loggedinAs:"institute"})),S(te.addInstituteId({id:a.institute?(f=a.institute)==null?void 0:f._id:"",loggedinAs:"institute",username:(y=a.institute)==null?void 0:y.name})),O(`/q/${a.institute.name}/feed`))}catch{return{msg:"Time out or wrong request..."}}},verifyUsername:async r=>{h(()=>({email:"",username:r}))},verifyEmail:async r=>{h(()=>({email:r,username:""}))},validInput:d}};function ue({instituteData:n,setInstituteId:h,setActiveTab:d}){const{registerAccount:o,verifyUsername:g,verifyEmail:c,validInput:t}=U(),{t:l}=A(),[x,I]=m.useState(1),[j,C]=m.useState([]),[S,O]=m.useState(""),[w,P]=m.useState(!1),[p,M]=m.useState({}),[N,L]=m.useState({}),[r,u]=m.useState({}),[f,y]=m.useState(null),[a,v]=m.useState({insName:"",name:"",insEmail:"",insMode:n==null?void 0:n.mode,insType:n==null?void 0:n.type,insAddress:"",insState:"",insDistrict:"",insPincode:"",insAbout:"",insPhoneNumber:n==null?void 0:n.phoneNumber,insMobileStatus:n==null?void 0:n.mobileStatus,userId:""});ce.useEffect(()=>{v(i=>({...i,insPhoneNumber:n==null?void 0:n.phoneNumber,insMobileStatus:n==null?void 0:n.mobileStatus,insMode:n==null?void 0:n.mode,insType:n==null?void 0:n.type}))},[n==null?void 0:n.phoneNumber,n==null?void 0:n.type,n==null?void 0:n.mode,n==null?void 0:n.mobileStatus]);const V=i=>{const b=/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i,k={},J=me(a&&a.name);return i.insName||(k.insName="Institute name is required!"),i.name?J&&(k.name="Special Character not allowed"):k.name="Institute user name is required!",i.insEmail?b.test(i.insEmail)||(k.email="This is not a valid email format!"):k.email="Email is required!",k},$=i=>{const b={};return i.insAddress||(b.address="Address is required!"),i.insPincode||(b.pincode="Pincode is required!"),b},B=()=>{t.email==="valid"&&t.username==="valid"&&(M(V(a)),y(1))},F=i=>{i.preventDefault(),u($(a)),y(3)},H=()=>{x===3?(I(1),R.current.style.display="none",_.current.style.display="block",E.current.style.display="none"):x===2&&(I(1),E.current.style.display="none",_.current.style.display="block",R.current.style.display="none")},_=m.useRef(null),E=m.useRef(null),R=m.useRef(null),W=async()=>{P(b=>!b);const i=await o(a);i!=null&&i._id&&(h(i==null?void 0:i._id),d("CREATE_PASSWORD"),P(b=>!b))};m.useEffect(()=>{Object.keys(p).length===0&&f===1&&(I(2),_.current.style.display="none",E.current.style.display="block"),Object.keys(N).length===0&&f===3&&W()},[p,N,r]);const Y=m.useCallback(q.debounce(i=>g(i),500),[]),G=i=>{Y(i),v({...a,name:i})},Q=m.useCallback(q.debounce(i=>c(i),500),[]),z=i=>{Q(i),v({...a,insEmail:i})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:s.modalContainerr,children:[e.jsxs("div",{className:s.loginLogo,style:{marginTop:"15px"},children:[x===1&&e.jsx("img",{className:s.backText,src:"/images/back-text.svg",alt:"not found",onClick:()=>d("INSTITUTE_MODE")}),x===2&&e.jsx("img",{className:s.backText,src:"/images/back-text.svg",alt:"not found",onClick:()=>{H()}})]}),e.jsx("div",{className:`${s.form} ${s.forggotPassForm}`,children:e.jsxs("form",{onSubmit:F,encType:"multipart/form-data",noValidate:!0,children:[e.jsx("h3",{children:l("register-institute")}),e.jsx("p",{children:l("enter_ins_details")}),e.jsxs("div",{ref:_,className:s.step1,children:[e.jsxs("div",{className:s.userNamecontainer,children:[e.jsx("img",{className:s.regIcon,src:"/images/ins-mode-icon.svg",alt:"not found"}),e.jsx("input",{type:"text",required:!0,name:"insName",placeholder:l("institute_name"),value:a.insName,onChange:i=>v({...a,insName:i.target.value})}),e.jsx("span",{className:s.errorspan,children:p==null?void 0:p.insName})]}),e.jsxs("div",{className:s.userNamecontainer,children:[e.jsx("img",{className:s.regIcon,src:"/images/user-name-icon.svg",alt:"not found"}),e.jsx("input",{required:!0,type:"text",name:"name",placeholder:l("user_name"),value:a.name,onChange:i=>G(i.target.value)}),e.jsx("span",{className:s.errorspan,children:p==null?void 0:p.name}),!["valid",""].includes(t==null?void 0:t.username)&&e.jsx("span",{className:s.errorspan,children:l("username_is_already_exits")}),!(p!=null&&p.name)&&e.jsxs("div",{className:s.usernamerule,children:[e.jsx("span",{className:s.usernamespan,children:l("uname_desc")}),e.jsx("span",{className:s.usernamespan,children:l("uname_desc2")})]})]}),e.jsxs("div",{className:`${s.userNamecontainer} ${s.userNameRuleBottom}`,children:[e.jsx("img",{style:{top:"14px"},className:s.regIcon,src:"/images/mail-icon.svg",alt:"not found"}),e.jsx("input",{required:!0,type:"email",placeholder:l("email"),name:"insEmail",value:a.insEmail,onChange:i=>z(i.target.value)}),e.jsx("span",{className:s.errorspan,children:p==null?void 0:p.email}),!["valid",""].includes(t==null?void 0:t.email)&&e.jsx("span",{className:s.errorspan,children:l("email_is_already_exits")})]})]}),e.jsxs("div",{ref:E,className:s.step2,children:[e.jsxs("div",{className:s.userNamecontainer,children:[e.jsx("img",{alt:"not found",className:s.username,src:"/images/location-icon.svg"}),e.jsx("input",{required:!0,type:"text",placeholder:l("address"),name:"insAddress",value:a.insAddress,onChange:i=>v({...a,insAddress:i.target.value})}),e.jsx("span",{className:s.errorspan,children:N==null?void 0:N.address})]}),e.jsxs("div",{className:s.userNamecontainer,children:[e.jsx("img",{className:s.regIcon,src:"/images/pin-code-icon.svg",alt:"not found"}),e.jsx("input",{required:!0,type:"tel",maxLength:"6",minLength:"6",placeholder:l("pincode"),name:"insPincode",value:a.insPincode,onChange:i=>{v({...a,insPincode:i.target.value})}}),e.jsx("span",{className:s.errorspan,children:N==null?void 0:N.pincode})]}),e.jsxs("div",{className:s.userNamecontainer,children:[e.jsx("img",{className:s.regIcon,src:"/images/state-icon.svg",alt:"not found"}),e.jsxs("select",{id:"select1","aria-label":"Default select example",name:"insState",onChange:i=>v({...a,insState:i.target.value}),children:[e.jsx("option",{disabled:!0,selected:!0,children:l("select_state")}),e.jsx("option",{children:S&&S})]}),e.jsx("span",{className:s.errorspan,children:N==null?void 0:N.state})]}),e.jsxs("div",{className:s.userNamecontainer,children:[e.jsx("img",{className:s.regIcon,src:"/images/district-icon.svg",alt:"not found"}),e.jsxs("select",{id:"select2","aria-label":"Default select example",name:"insDistrict",onChange:i=>v({...a,insDistrict:i.target.value}),children:[e.jsx("option",{disabled:!0,selected:!0,children:l("select_district")}),j&&j.map(i=>e.jsx("option",{children:i},i))]}),e.jsx("span",{className:s.errorspan,children:r==null?void 0:r.district})]})]}),e.jsxs("div",{ref:R,className:s.step3,children:[e.jsxs("div",{className:s.userNamecontainer,children:[e.jsx("img",{className:s.regIcon,src:"/images/district-icon.svg",alt:"not found"}),e.jsxs("select",{id:"select2",required:!0,"aria-label":"Default select example",name:"insDistrict",onChange:i=>v({...a,insDistrict:i.target.value}),children:[e.jsx("option",{disabled:!0,selected:!0,children:l("select_district")}),j&&j.map(i=>e.jsx("option",{children:i},i))]}),e.jsx("span",{className:s.errorspan,children:r==null?void 0:r.district})]}),e.jsxs("div",{className:s.userNamecontainer,children:[e.jsx("img",{className:s.regIcon,src:"/images/about-ins-icon.svg",alt:"not found"}),e.jsx("input",{type:"text",placeholder:l("enter_username_of_user"),name:"userId",value:a.userId,onChange:i=>v({...a,userId:i.target.value})})]})]}),e.jsxs("div",{children:[x===2&&a.insAddress!==""&&a.insPincode!==""&&e.jsx(de,{buttonText:l("submit"),type:"submit",disabled:w,shwoLoader:!0,customStyleButton:{marginTop:"2vw",minHeight:"2.3rem",backgroundColor:"#575caa"}}),x===2&&(a.insAddress===""||a.insPincode==="")&&e.jsx(T,{buttonText:l("submit"),disabled:!0,shwoLoader:!1,customStyleButton:{marginTop:"2vw",minHeight:"2.3rem",backgroundColor:"#575caa",color:"rgba(18, 18, 18, 0.6)"}}),x===1&&a.insName!==""&&a.name!==""&&a.insEmail!==""&&t.email==="valid"&&t.username==="valid"&&e.jsx("div",{className:`${s.submitbtn} mt-4`,style:{minHeight:"2.3rem",backgroundColor:"#575caa"},onClick:B,children:e.jsx("p",{children:l("next")})}),x===1&&(a.insName===""||a.name===""||a.insEmail===""||t.email==="invalid"||t.username==="invalid")&&e.jsx("div",{className:`${s.submitbtn} ${s.submitDisable} mt-4`,onClick:B,children:e.jsx("p",{children:l("next")})})]})]})})]})})}function he({type:n,setActiveTab:h,setInstituteData:d}){const[o,g]=m.useState(0),{t:c}=A();return e.jsxs("div",{className:s.modalContainerr,children:[e.jsx("div",{className:s.loginLogo,children:e.jsx("img",{className:s.backText,src:"/images/back-text.svg",alt:"not found",onClick:()=>h("VERIFIED_MOBILE")})}),e.jsxs("div",{className:`${s.contentt} ${s.instypecontent}`,children:[e.jsxs("div",{className:s.contentthead,children:[e.jsx("h3",{className:s.choosetypeh,children:c("type_of_ins")}),e.jsx("p",{className:s.choosetypep,children:c("choose_others")})]}),e.jsxs("div",{className:s.contenttmid,children:[o===1||n==="College/Polytechnic"?e.jsxs("div",{className:s.contenttmidItemDark,children:[e.jsx("img",{src:"/images/ins-type/clg-polytechnic-dark.svg",alt:""}),e.jsx("p",{children:c("college_polytechnic")})]}):e.jsxs("div",{className:s.contenttmidItem,onClick:()=>{d(t=>({...t,type:"College/Polytechnic"})),g(1)},children:[e.jsx("img",{src:"/images/ins-type/clg-polytechnic.svg",alt:""}),e.jsx("p",{children:c("college_polytechnic")})]}),o===2||n==="School"?e.jsxs("div",{className:s.contenttmidItemDark,children:[e.jsx("img",{src:"/images/ins-type/school-dark.svg",alt:""}),e.jsx("p",{children:c("school_ecc")})]}):e.jsxs("div",{className:s.contenttmidItem,onClick:()=>{d(t=>({...t,type:"School"})),g(2)},children:[e.jsx("img",{src:"/images/ins-type/school.svg",alt:""}),e.jsx("p",{children:c("school_ecc")})]}),o===3||n==="Coaching/Tuition"?e.jsxs("div",{className:s.contenttmidItemDark,children:[e.jsx("img",{src:"/images/ins-type/coaching-dark.svg",alt:""}),e.jsx("p",{children:c("coaching")})]}):e.jsxs("div",{className:s.contenttmidItem,onClick:()=>{d(t=>({...t,type:"Coaching/Tuition"})),g(3)},children:[e.jsx("img",{src:"/images/ins-type/coaching.svg",alt:""}),e.jsx("p",{children:c("coaching")})]}),o===4||n==="Online Educating Institute"?e.jsxs("div",{className:s.contenttmidItemDark,children:[e.jsx("img",{src:"/images/ins-type/computer-institute-dark.svg",alt:""}),e.jsx("p",{children:c("Computer_ins")})]}):e.jsxs("div",{className:s.contenttmidItem,onClick:()=>{d(t=>({...t,type:"Online Educating Institute"})),g(4)},children:[e.jsx("img",{src:"/images/ins-type/computer-institute.svg",alt:""}),e.jsx("p",{children:c("Computer_ins")})]}),o===5||n==="Content Creator"?e.jsxs("div",{className:s.contenttmidItemDark,children:[e.jsx("img",{src:"/images/ins-type/content-creator-dark.svg",alt:""}),e.jsx("p",{children:c("educational_content")})]}):e.jsxs("div",{className:s.contenttmidItem,onClick:()=>{d(t=>({...t,type:"Content Creator"})),g(5)},children:[e.jsx("img",{src:"/images/ins-type/content-creator2.svg",alt:""}),e.jsx("p",{children:c("educational_content")})]}),o===6||n==="Other"?e.jsxs("div",{className:s.contenttmidItemDark,children:[e.jsx("img",{src:"/images/ins-type/music-dance-dark.svg",alt:""}),e.jsx("p",{children:c("music_academy")})]}):e.jsxs("div",{className:s.contenttmidItem,onClick:()=>{d(t=>({...t,type:"Other"})),g(6)},children:[e.jsx("img",{src:"/images/ins-type/music-dance.svg",alt:""}),e.jsx("p",{children:c("music_academy")})]})]}),n!==""?e.jsx(T,{buttonText:c("next"),disabled:!1,shwoLoader:!0,onAction:()=>h("INSTITUTE_MODE"),customStyleButton:{minHeight:"2.3rem",backgroundColor:"#575caa",marginTop:"2rem"}}):e.jsx(T,{buttonText:c("next"),disabled:!0,shwoLoader:!1,customStyleButton:{color:"rgba(18, 18, 18, 0.6)",minHeight:"2.3rem",backgroundColor:"#575caa",marginTop:"2rem"}})]})]})}function ge({setInstituteData:n,setActiveTab:h,mode:d}){const{t:o}=A(),[g,c]=m.useState(0);return e.jsxs("div",{className:s.modalContainerr,children:[e.jsx("div",{className:s.loginLogo,children:e.jsx("img",{className:s.backText,src:"/images/back-text.svg",alt:"not found",onClick:()=>h("INSTITUTE_TYPE")})}),e.jsxs("div",{className:`${s.contentt} ${s.insmodecontent}`,children:[e.jsxs("div",{className:s.contentthead,children:[e.jsx("h3",{className:s.choosetypeh,children:o("mode_of_operating")}),e.jsx("p",{className:s.choosetypep,children:o("choose_both")})]}),e.jsxs("div",{className:`${s.contenttmid} ${s.insmodemid}`,children:[g===1||d==="Online"?e.jsxs("div",{className:s.contenttmidItemDark,children:[e.jsx("img",{src:"/images/ins-mode/online-dark.svg",alt:""}),e.jsx("p",{children:o("online")})]}):e.jsxs("div",{className:s.contenttmidItem,onClick:()=>{n(t=>({...t,mode:"Online"})),c(1)},children:[e.jsx("img",{src:"/images/ins-mode/online.svg",alt:""}),e.jsx("p",{children:o("offline")})]}),g===2||d==="Offline"?e.jsxs("div",{className:s.contenttmidItemDark,children:[e.jsx("img",{src:"/images/ins-mode/offline-dark.svg",alt:""}),e.jsx("p",{children:o("offline")})]}):e.jsxs("div",{className:s.contenttmidItem,onClick:()=>{n(t=>({...t,mode:"Offline"})),c(2)},children:[e.jsx("img",{src:"/images/ins-mode/offline.svg",alt:""}),e.jsx("p",{children:o("offline")})]}),g===3||d==="Both"?e.jsxs("div",{className:s.contenttmidItemDark,children:[e.jsx("img",{src:"/images/ins-mode/both-dark.svg",alt:""}),e.jsx("p",{children:o("both")})]}):e.jsxs("div",{className:s.contenttmidItem,onClick:()=>{n(t=>({...t,mode:"Both"})),c(3)},children:[e.jsx("img",{src:"/images/ins-mode/both.svg",alt:""}),e.jsx("p",{children:o("both")})]})]}),e.jsx("div",{})]}),d!==""?e.jsx(T,{buttonText:o("next"),disabled:!1,shwoLoader:!0,onAction:()=>h("INSTITUTE_REGISTER"),customStyleButton:{minHeight:"2.3rem",backgroundColor:"#575caa"}}):e.jsx(T,{buttonText:o("next"),disabled:!0,shwoLoader:!1,customStyleButton:{minHeight:"2.3rem",backgroundColor:"#575caa"}})]})}function Se({switchUser:n}){const[h,d]=m.useState("MOBILE"),[o,g]=m.useState(""),[c,t]=m.useState({phoneNumber:"",mobileStatus:"",type:"",mode:""}),{mobileRegister:l,numberVerification:x,createPassword:I}=U(),j=C=>{t(S=>({...S,[C.type]:C.value}))};return console.info(h),e.jsxs(e.Fragment,{children:[h==="MOBILE"&&e.jsx(re,{onMobileNumberAdd:l,setActiveTab:d,setPhoneNumber:j,switchUser:n}),h==="VERIFIED_MOBILE"&&e.jsx(oe,{phoneNumber:c.phoneNumber,onMobileVerified:x,setActiveTab:d,onMobileNumberAdd:l,onMobileStatus:j,activeType:"INSTITUTE_TYPE"}),h==="INSTITUTE_TYPE"&&e.jsx(he,{type:c.type,setActiveTab:d,setInstituteData:t}),h==="INSTITUTE_MODE"&&e.jsx(ge,{mode:c.mode,setActiveTab:d,setInstituteData:t}),h==="INSTITUTE_REGISTER"&&e.jsx(ue,{instituteData:c,setInstituteId:g,setActiveTab:d}),h==="CREATE_PASSWORD"&&e.jsx(le,{id:o,createPassword:I})]})}export{Se as default};
