import{j as e,e as O,k as R,r as d,u as w,t as D,R as j,l as L}from"./index-731451a5.js";import{o as A}from"./search-api-15f7f9f9.js";const F="_complaintDetails_4ezjs_1",P="_detailsheader_4ezjs_5",I="_list_4ezjs_21",J="_datetime_4ezjs_25",M="_item_4ezjs_41",V="_detailsbody_4ezjs_54",q="_solvedbtn_4ezjs_80",H="_searchbar_4ezjs_99",T="_items_4ezjs_138",U="_divider_4ezjs_154",B="_text_4ezjs_166",c={complaintDetails:F,detailsheader:P,list:I,datetime:J,item:M,detailsbody:V,solvedbtn:q,searchbar:H,items:T,divider:U,text:B},p=({val:s,setReplacedStaff:m,replacedStaff:n})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:c.item,onClick:()=>{m(s)},style:{backgroundColor:(n==null?void 0:n._id)===(s==null?void 0:s._id)?"rgba(75, 26, 133, 0.1)":"inherit"},children:[e.jsx("img",{src:(s==null?void 0:s.photoId)!==""?`${O}/${s==null?void 0:s.staffProfilePhoto}`:"/images/demo_users/user3.svg",alt:""}),e.jsxs("div",{className:c.text,children:[e.jsx("h6",{children:`${s==null?void 0:s.staffFirstName} ${s!=null&&s.staffMiddleName?s==null?void 0:s.staffMiddleName:""} ${s==null?void 0:s.staffLastName}`}),e.jsx("p",{children:s==null?void 0:s.staffROLLNO})]})]}),e.jsx("div",{className:c.divider})]});function Q({setStaffListView:s,setReplacedStaff:m,replaceStaffId:n,replacedStaff:u}){const a=R(t=>t.idChange.id),[x,z]=d.useState(1),[f,l]=d.useState(!0),{t:b}=w(),[y,N]=D(),[o,g]=j.useState([]),[_,$]=d.useState(""),{assignSearchStaff:i,assignSearchStaffRefetch:h}=A({skip:!a,search:{search:_,page:x,id:a,limit:10}});j.useEffect(()=>{a&&h()},[a,x,h]),d.useEffect(()=>{N&&f&&z(t=>t+1)},[N,f]),j.useEffect(()=>{if(i!=null&&i.staff)if(_)g(i==null?void 0:i.staff);else{const t=[...o,...i==null?void 0:i.staff],r=[...new Set(t.map(JSON.stringify))].map(JSON.parse);g(r)}(i==null?void 0:i.staff.length)===10?l(!0):l(!1)},[i==null?void 0:i.staff]),d.useEffect(()=>{_&&E()},[_]);const E=()=>{h()},k=d.useCallback(L.debounce(t=>$(t),500),[]),C=t=>{k(t)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:c.complaintDetails,children:[e.jsxs("div",{className:c.detailsheader,children:[e.jsx("h6",{children:b("all_staff_list")}),e.jsx("img",{onClick:()=>s(!1),src:"/images/close-post-icon.svg",alt:""})]}),e.jsxs("div",{className:c.detailsbody,children:[e.jsxs("div",{className:c.searchbar,children:[e.jsx("input",{type:"text",placeholder:b("search"),className:`form-control ${c.searchinput}`,onChange:t=>C(t.target.value)}),e.jsx("img",{className:c.searchIcon,alt:"img",src:"/images/search-dash-icon.svg"})]}),e.jsx("div",{className:c.items,children:o==null?void 0:o.map((t,r)=>(o==null?void 0:o.length)===r+1?e.jsx("div",{ref:y,children:(t==null?void 0:t._id)===`${n}`?"":e.jsx(p,{setReplacedStaff:m,val:t,replacedStaff:u})},r):(t==null?void 0:t._id)===`${n}`?"":e.jsx(p,{setReplacedStaff:m,val:t,replacedStaff:u},r))})]})]})})}export{Q as default};
