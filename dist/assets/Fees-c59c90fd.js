import{u as A,j as e,e as ce,r as i,D as Je,Q as se,t as F,S as z,d as te,n as Oe,L as Ue,a1 as me,R as ee,l as Ne}from"./index-731451a5.js";import{B as Ge,C as Xe,D as Ye,E as ze,F as Ke,G as Ze,H as We,I as He,J as Qe,K as Re,L as Pe,M as Fe,N as Me,O as es,P as ss,Q as ts,R as as,S as ns,T as is,U as cs,h as os,V as rs}from"./department-api-a4f0b4b7.js";import{D as oe}from"./DepartmentTabChangeLink-58880b09.js";import{B as G}from"./BorderBottom-47800983.js";import{U as ls}from"./UniversalTab-d4f2174c.js";import{P as ie}from"./PopupWrapper-ffbaef7a.js";import{C as Se}from"./CustomNormalSelectInput-9ec7329b.js";import{J as Q}from"./JoinFormInput-8e74a0e0.js";import{s as v}from"./SeatingArrangement.module-3f4ae6aa.js";import{E as re}from"./EmptyInfo-7233226d.js";import{a as q,s as Y,E as Ae,S as je,b as Te}from"./Exminations.module-c45be880.js";import{J as _e}from"./JoinFormInputView-879755fe.js";import ds from"./AssignStaffModal-61be8e90.js";import{S as ge}from"./SeatingExaminationCard-1c99a7b5.js";import{S as ue}from"./SearchModalBackdrop-5b309d60.js";import{O as pe}from"./Overlay-07ce6f88.js";import{s as H}from"./EditConfirm.module-344fbdb9.js";import{o as ms}from"./search-api-15f7f9f9.js";import{J as Be}from"./JoinFormCalender-5158d888.js";import{w as hs}from"./timeComparison-f15c3247.js";import{l as _s,m as fs}from"./class-api-ec8ace00.js";const gs="_backlogContainer_1k2m7_1",xs="_backlog_1k2m7_1",js="_students_1k2m7_21",de={backlogContainer:gs,backlog:xs,students:js},us="_standerdItem_178w0_6",ps="_standerdsleft_178w0_20",Ns="_standerdsheading_178w0_26",Ss="_standerdsImg_178w0_35",bs="_standerdsh6_178w0_39",ks="_standerdsp_178w0_50",vs="_BacklogStudentsbody_178w0_61",ws="_studentImgcontainer_178w0_65",ys="_studentImg_178w0_65",Ts="_studentp1_178w0_80",Cs="_studentRightp_178w0_91",Is="_standerdsrright_178w0_101",Es="_dotsImg_178w0_107",Ds="_examItem_178w0_113",$s="_studentModal_178w0_117",Os="_backItem_178w0_123",Rs="_backItemRight_178w0_145",Ps="_modalbody_178w0_155",As="_confirmbutton_178w0_168",Bs="_standerdItemm_178w0_187",Vs="_back_fees_container_178w0_191",qs="_back_fees_container_inner_178w0_207",Ls="_back_fees_list_178w0_227",Js="_back_fees_list_inner_178w0_244",Us="_back_fees_list_text_178w0_249",Gs="_fees_header_178w0_271",Xs="_fees_table_header_178w0_295",T={standerdItem:us,standerdsleft:ps,standerdsheading:Ns,standerdsImg:Ss,standerdsh6:bs,standerdsp:ks,BacklogStudentsbody:vs,studentImgcontainer:ws,studentImg:ys,studentp1:Ts,studentRightp:Cs,standerdsrright:Is,dotsImg:Es,examItem:Ds,studentModal:$s,backItem:Os,backItemRight:Rs,modalbody:Ps,confirmbutton:As,standerdItemm:Bs,back_fees_container:Vs,back_fees_container_inner:qs,back_fees_list:Ls,back_fees_list_inner:Js,back_fees_list_text:Us,fees_header:Gs,fees_table_header:Xs},Ys="_studentMCQ_bkz14_1",zs="_mcqToptabs_bkz14_4",Ks="_mcqTop_bkz14_4",Zs="_mcqTopItem_bkz14_21",Ws="_active_bkz14_37",M={studentMCQ:Ys,mcqToptabs:zs,mcqTop:Ks,mcqTopItem:Zs,active:Ws};function Hs({activeIndex:s,setActiveIndex:a}){const{t:c}=A();return e.jsx("div",{className:M.mcqTop,children:e.jsxs("div",{className:M.mcqToptabs,children:[e.jsx("div",{className:s===0?`${M.mcqTopItem} ${M.active}`:M.mcqTopItem,onClick:()=>a(0),children:c("current")}),e.jsx("div",{className:s===1?`${M.mcqTopItem} ${M.active}`:M.mcqTopItem,onClick:()=>a(1),children:c("dropouts")})]})})}function xe({onStudentOpen:s,student:a,clickable:c}){var l,n,N;const t=()=>{c&&s(a)};return e.jsxs("div",{className:T.standerdItem,onClick:t,children:[e.jsxs("div",{className:T.standerdsleft,children:[e.jsx("div",{className:T.studentImgcontainer,children:e.jsx("img",{className:T.studentImg,src:(a==null?void 0:a.photoId)!=="1"?`${ce}/${a==null?void 0:a.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"student icon"})}),e.jsxs("div",{className:T.standerdsright,children:[e.jsx("h6",{className:T.standerdsh6,children:`${a==null?void 0:a.studentFirstName} ${(a==null?void 0:a.studentMiddleName)||""} ${a==null?void 0:a.studentLastName}`}),e.jsx("p",{className:T.studentp1,children:((l=a==null?void 0:a.batches)==null?void 0:l.batchName)||""})]})]}),e.jsxs("p",{className:T.studentRightp,children:[(n=a==null?void 0:a.studentClass)==null?void 0:n.className," ",(N=a==null?void 0:a.studentClass)==null?void 0:N.classTitle]})]})}function Qs({hideModal:s,open:a,studentId:c,subjectMasterId:t,onRefetchWhenConfirm:l}){var o,p,u;const{t:n}=A(),[N,b]=i.useState(""),[r,x]=i.useState(!1),[f]=Ge(),m=()=>{N&&(x(_=>!_),f({sid:c==null?void 0:c._id,smid:t,status:N}).then(()=>{l(),x(_=>!_),s(!1)}).catch({}))};return e.jsxs(Je,{open:a,onClose:()=>s(!1),children:[e.jsxs("div",{className:T.studentModal,children:[e.jsxs("div",{className:T.standerdItem,style:{borderTopLeftRadius:"0",borderTopRightRadius:"0"},children:[e.jsxs("div",{className:T.standerdsleft,children:[e.jsx("div",{className:T.studentImgcontainer,children:e.jsx("img",{className:T.studentImg,src:(c==null?void 0:c.photoId)!=="1"?`${ce}/${c==null?void 0:c.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"student"})}),e.jsxs("div",{className:T.standerdsright,children:[e.jsx("h6",{className:T.standerdsh6,children:`${c==null?void 0:c.studentFirstName} ${(c==null?void 0:c.studentMiddleName)||""} ${c==null?void 0:c.studentLastName}`}),e.jsx("p",{className:T.studentp1,children:((o=c==null?void 0:c.batches)==null?void 0:o.batchName)||""})]})]}),e.jsxs("p",{className:T.studentRightp,children:[" ",(p=c==null?void 0:c.studentClass)==null?void 0:p.className," ",(u=c==null?void 0:c.studentClass)==null?void 0:u.classTitle]})]}),e.jsxs("div",{className:T.modalbody,children:[e.jsxs("div",{className:T.backItem,onClick:()=>b("Clear"),children:[e.jsx("img",{src:"/images/department/clear_backlog.svg",alt:"clear backlog"}),e.jsxs("div",{className:T.backItemRight,children:[e.jsx("h6",{children:n("clr_backlog")}),e.jsx("p",{children:n("have_passed")})]})]}),e.jsxs("div",{className:T.backItem,onClick:()=>b("Dropout"),children:[e.jsx("img",{src:"/images/department/dropout.svg",alt:"clear backlog"}),e.jsxs("div",{className:T.backItemRight,children:[e.jsx("h6",{children:n("dropout")}),e.jsx("p",{children:n("either")})]})]}),e.jsx("div",{className:T.confirmbutton,onClick:m,children:n("confirm")})]})]}),r&&e.jsx(se,{})]})}const Fs=({subjectMasterId:s})=>{const[a,c]=i.useState(!0),[t,l]=i.useState(1),[n,N]=F(),[b,r]=i.useState(!0),[x,f]=i.useState([]),[m,o]=i.useState(!1),[p,u]=i.useState(""),[_,g]=i.useState(!1),{backlogSubjectAllStudent:h,backlogSubjectAllStudentRefetch:w}=Xe({data:{smid:s,page:t,limit:10},skip:!s});i.useEffect(()=>{N&&a&&l(S=>S+1)},[N,a]),i.useEffect(()=>{s&&(r(!0),w())},[t,s,_,w]),i.useEffect(()=>{var S,C;if(h!=null&&h.student_array)if(_){const P=[...h==null?void 0:h.student_array],D=[...new Set(P.map(JSON.stringify))].map(JSON.parse);f(D),g(!1),r(!1)}else{const P=[...x,...h==null?void 0:h.student_array],D=[...new Set(P.map(JSON.stringify))].map(JSON.parse);f(D),r(!1)}else((S=h==null?void 0:h.student_array)==null?void 0:S.length)===0&&r(!1);((C=h==null?void 0:h.student_array)==null?void 0:C.length)===10?c(!0):c(!1)},[h==null?void 0:h.student_array]);const j=S=>{u(S),o(C=>!C)},d=()=>{l(1),g(!0)};return e.jsxs(e.Fragment,{children:[x==null?void 0:x.map((S,C)=>(x==null?void 0:x.length)===C+1?e.jsx("div",{ref:n,children:e.jsx(xe,{student:S,onStudentOpen:j,clickable:!0})},S==null?void 0:S._id):e.jsx(xe,{student:S,onStudentOpen:j,clickable:!0},S==null?void 0:S._id)),b&&e.jsx(z,{}),m&&e.jsx(Qs,{open:m,hideModal:S=>o(S),studentId:p,subjectMasterId:s,onRefetchWhenConfirm:d})]})},Ms=({subjectMasterId:s})=>{const[a,c]=i.useState(!0),[t,l]=i.useState(1),[n,N]=F(),[b,r]=i.useState(!0),[x,f]=i.useState([]),{backlogSubjectAllStudentDropout:m,backlogSubjectAllStudentDropoutRefetch:o}=Ye({data:{smid:s,page:t,limit:10},skip:!s});return i.useEffect(()=>{N&&a&&l(p=>p+1)},[N,a]),i.useEffect(()=>{s&&(r(!0),o())},[t,s,o]),i.useEffect(()=>{var p,u;if(m!=null&&m.student_array){const _=[...x,...m==null?void 0:m.student_array],g=[...new Set(_.map(JSON.stringify))].map(JSON.parse);f(g),r(!1)}else((p=m==null?void 0:m.student_array)==null?void 0:p.length)===0&&r(!1);((u=m==null?void 0:m.student_array)==null?void 0:u.length)===10?c(!0):c(!1)},[m==null?void 0:m.student_array]),e.jsxs(e.Fragment,{children:[x==null?void 0:x.map((p,u)=>(x==null?void 0:x.length)===u+1?e.jsx("div",{ref:n,children:e.jsx(xe,{student:p,clickable:!1})},p==null?void 0:p._id):e.jsx(xe,{student:p,clickable:!1},p==null?void 0:p._id)),b&&e.jsx(z,{})]})};function et(){var t,l;const s=te(),[a,c]=i.useState(0);return e.jsxs("div",{children:[e.jsx(Hs,{activeIndex:a,setActiveIndex:c}),e.jsxs("div",{className:T.BacklogStudentsbody,children:[a===0&&e.jsx(Fs,{subjectMasterId:(t=s.state)==null?void 0:t.subId}),a===1&&e.jsx(Ms,{subjectMasterId:(l=s.state)==null?void 0:l.subId})]}),a===2&&e.jsx("div",{className:T.BacklogStudentsbody})]})}const he=({carryParentState:s,activeTab:a,children:c})=>{const t=Oe();return e.jsx(Ue,{to:`/q/${t.username}/member/exam?a=${a}`,state:{...s},children:c})};function Ce({classMaster:s,carryParentState:a,viewAs:c}){return e.jsx(e.Fragment,{children:c==="EXAMINATION_SECTION"?e.jsx(he,{carryParentState:{...a,clsId:s==null?void 0:s._id},activeTab:"department&n=backlog&subject",children:e.jsxs("div",{className:`${T.standerdItem} ${T.standerdItemm}`,children:[e.jsx("img",{className:T.standerdsImg,src:"/images/department/staffs.svg",alt:""}),e.jsxs("div",{className:T.standerdsright,children:[e.jsx("h6",{className:T.standerdsh6,children:(s==null?void 0:s.className)||""}),e.jsxs("p",{className:T.standerdsp,children:["Total Class: ",s==null?void 0:s.classCount]})]})]})}):e.jsx(oe,{carryParentState:{...a,clsId:s==null?void 0:s._id},activeTab:"backlog&subject",children:e.jsxs("div",{className:`${T.standerdItem} ${T.standerdItemm}`,children:[e.jsx("img",{className:T.standerdsImg,src:"/images/department/staffs.svg",alt:""}),e.jsxs("div",{className:T.standerdsright,children:[e.jsx("h6",{className:T.standerdsh6,children:(s==null?void 0:s.className)||""}),e.jsxs("p",{className:T.standerdsp,children:["Total Class: ",s==null?void 0:s.classCount]})]})]})})})}const Ie=({isFees:s,examFees:a,setAdd:c,setStudentList:t})=>{var n;const{t:l}=A();return e.jsx(e.Fragment,{children:s?e.jsxs("div",{className:T.back_fees_container,onClick:()=>c(a),style:{cursor:"pointer"},children:[e.jsx("img",{src:"/images/department/bank-icon.svg",alt:"bank icon"}),e.jsxs("div",{className:T.back_fees_container_inner,children:[e.jsx("h6",{children:l("backlog_exam_fee_structure")}),e.jsxs("p",{children:[l("rs"),".",(a==null?void 0:a.exam_fee_amount)??0," / ",(a==null?void 0:a.exam_fee_type)??""]})]})]}):e.jsxs("div",{className:T.back_fees_list,style:{cursor:"pointer"},onClick:()=>t(a),children:[e.jsx("img",{src:"/images/members/fees-icon.svg",alt:"fees icon"}),e.jsxs("div",{className:T.back_fees_list_inner,style:{width:"100%"},children:[e.jsxs("div",{className:T.back_fees_list_text,children:[e.jsxs("h6",{children:[((n=a==null?void 0:a.exam)==null?void 0:n.examName)??"",", ",l("rs"),". ",(a==null?void 0:a.exam_fee_amount)??0," ",a==null?void 0:a.exam_fee_type]}),e.jsxs("p",{style:{fontSize:"10px"},children:[l("rs"),".",(a==null?void 0:a.total_paid_collection)??0," ",l("received_of")," "," "," ",(a==null?void 0:a.total_raised_collection)??0]})]}),e.jsx("div",{className:T.back_fees_list_text,children:e.jsxs("p",{children:[me(a==null?void 0:a.created_at).format("DD MMMM yyyy"),","," ",me(a==null?void 0:a.created_at).format("LT")]})})]})]})})},st=({onClose:s,examFees:a,onRefetch:c})=>{const{t}=A(),[l,n]=i.useState(""),[N,b]=i.useState(!1),[r,x]=i.useState({exam_fee_type:"",exam_fee_amount:0}),[f]=ze();i.useEffect(()=>{a&&x(_=>({..._,exam_fee_type:(a==null?void 0:a.exam_fee_type)??"",exam_fee_amount:(a==null?void 0:a.exam_fee_amount)??0}))},[a]);const m=_=>{const g={};for(let h in _)h==="exam_fee_amount"||_[h]||(g[h]=`${h} is required!`);return g},o=_=>{x(g=>({...g,exam_fee_amount:+_.target.value}))},p=_=>{x(g=>({...g,exam_fee_type:_}))},u=()=>{const _=m(r);let g=!1;for(let h in _)if(h){g=!0;break}g?n(_):(b(h=>!h),f({efid:a==null?void 0:a._id,updateFee:r}).then(()=>{c(),s(),b(h=>!h)}).catch({}))};return e.jsx(ie,{onClose:s,children:e.jsxs("div",{className:v.seating_modal,children:[e.jsx("section",{className:v.seating_modal_title_left,style:{position:"relative"},children:e.jsx("h6",{children:t("exam_fees_update")})}),e.jsx(G,{customStyle:{width:"100%",marginTop:"0.5rem"}}),e.jsx(Se,{selectLabel:t("fees_type"),selectedValue:t("fees_type_placeholder"),options:["Per student","Per Backlog paper"],value:r.exam_fee_type,onClick:p,errorShow:l.examType}),e.jsx(Q,{labelText:t("fee_amount"),placeholder:t("fee_amount_placeholder"),name:"examWeight",value:r.exam_fee_amount,type:"number",onChange:o}),e.jsx("button",{className:v.update_btn,title:"update",onClick:u,children:t("update")}),N&&e.jsx(se,{})]})})},tt=({examFees:s,onClose:a})=>{var b;const{t:c}=A(),[t,l]=i.useState(!0),{examFeeStructureDetail:n,examFeeStructureDetailRefetch:N}=Ke({efid:s==null?void 0:s._id,skip:!(s!=null&&s._id)});return i.useEffect(()=>{s!=null&&s._id&&(l(!0),N())},[s==null?void 0:s._id,N]),i.useEffect(()=>{n!=null&&n.all_fee&&l(!1)},[n==null?void 0:n.all_fee]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:T.fees_header,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:a,alt:"go to previous",title:"Go Back",style:{cursor:"pointer"}}),e.jsx("h6",{children:c("total_collect_amount")})]}),e.jsxs("h6",{children:[c("rs"),". ",(s==null?void 0:s.total_paid_collection)??0]})]}),e.jsxs("div",{className:T.fees_table_header,children:[e.jsx("h6",{style:{width:"20%"},children:c("roll_number")}),e.jsx("h6",{style:{width:"50%"},children:c("name")}),e.jsx("h6",{style:{width:"15%"},children:c("amount")}),e.jsx("h6",{style:{width:"15%"},children:c("status")})]}),e.jsx(G,{customStyle:{width:"100%",marginTop:"0.8rem"}}),(b=n==null?void 0:n.all_fee)==null?void 0:b.map(r=>{var x,f,m,o,p,u;return e.jsxs("div",{className:T.fees_table_header,children:[e.jsx("p",{style:{width:"20%"},children:((x=r==null?void 0:r.student)==null?void 0:x.studentROLLNO)>9?(f=r==null?void 0:r.student)==null?void 0:f.studentROLLNO:`0${(m=r==null?void 0:r.student)==null?void 0:m.studentROLLNO}`}),e.jsx("p",{style:{width:"50%"},children:`${((o=r==null?void 0:r.student)==null?void 0:o.studentFirstName)??""} ${((p=r==null?void 0:r.student)==null?void 0:p.studentMiddleName)??""} ${((u=r==null?void 0:r.student)==null?void 0:u.studentLastName)??""}`}),e.jsx("p",{style:{width:"15%"},children:(r==null?void 0:r.amount)??0}),e.jsx("p",{style:{width:"15%"},children:e.jsx("img",{style:{marginLeft:"0.7rem"},src:(r==null?void 0:r.status)==="Not Paid"?"/images/department/radio-gray-icon.svg":"/images/department/radio-blue-icon.svg",alt:"radio icon"})})]})}),t&&e.jsx(z,{})]})},at=({did:s})=>{const[a,c]=i.useState(""),[t,l]=F(),[n,N]=i.useState(1),[b,r]=i.useState(!0),[x,f]=i.useState(!0),[m,o]=i.useState([]),[p,u]=i.useState(!1),[_,g]=i.useState(""),{getAllExamFeeStructure:h,getAllExamFeeStructureRefetch:w}=Ze({data:{did:s,page:n,limit:10},skip:!s});i.useEffect(()=>{s&&(f(!0),w())},[s,n,w]),i.useEffect(()=>{l&&b&&N(d=>d+1)},[l,b]),i.useEffect(()=>{var d,S;p?(o(h==null?void 0:h.all_exam_fee),f(!1),u(!1)):h!=null&&h.all_exam_fee?(o(C=>[...new Set([...C,...h==null?void 0:h.all_exam_fee].map(JSON.stringify))].map(JSON.parse)),f(!1)):((d=h==null?void 0:h.all_exam_fee)==null?void 0:d.length)===0&&f(!1),((S=h==null?void 0:h.all_exam_fee)==null?void 0:S.length)===10?r(!0):r(!1)},[h==null?void 0:h.all_exam_fee]);const j=()=>{N(1),u(!0),f(!0),w()};return e.jsxs(e.Fragment,{children:[!_&&(m==null?void 0:m.map((d,S)=>(m==null?void 0:m.length)===S+1?e.jsx("div",{ref:t,children:e.jsx(Ie,{examFees:d,isFees:(d==null?void 0:d.exam_fee_status)==="Static Department Linked",setAdd:c,setStudentList:g})},d==null?void 0:d._id):e.jsx(Ie,{examFees:d,isFees:(d==null?void 0:d.exam_fee_status)==="Static Department Linked",setAdd:c,setStudentList:g},d==null?void 0:d._id))),x&&e.jsx(z,{}),a&&e.jsx(st,{onClose:()=>c(""),onRefetch:j,examFees:a}),_&&e.jsx(tt,{examFees:_,onClose:()=>g("")})]})};function Ve({exam:s,carryParentState:a,viewAs:c,seeUrl:t}){const{t:l}=A();return e.jsx(e.Fragment,{children:c==="EXAMINATION_SECTION"?e.jsx(he,{carryParentState:{...a,examId:s==null?void 0:s._id},activeTab:"department&n=exam&n=detail",children:e.jsxs("div",{className:q.exam_card_container,title:"View exam detail",children:[e.jsxs("div",{className:q.imagedot,children:[e.jsx("img",{src:"/images/members/exam-icon.svg",alt:""}),e.jsx("div",{className:(s==null?void 0:s.examMode)===l("Offline")?`${q.dot} ${q.blue}`:`${q.dot} ${q.red}`})]}),e.jsxs("div",{className:q.exam_inner_text,children:[e.jsx("h6",{children:s==null?void 0:s.examName}),(s==null?void 0:s.examType)==="Final"?"":e.jsxs("p",{children:[l("weightage"),": ",s==null?void 0:s.examWeight," %"]})]}),e.jsxs("div",{className:q.exam_date,children:[e.jsx("h6",{children:me(s==null?void 0:s.createdAt).format("DD MMMM YYYY")}),e.jsx("p",{children:l(s==null?void 0:s.examType)})]})]})}):c==="DEPARTMENT_BACKLOG"?e.jsx(oe,{carryParentState:{...a,examId:s==null?void 0:s._id},activeTab:"backlog&exam&detail",children:e.jsxs("div",{className:q.exam_card_container,title:"View exam detail",children:[e.jsxs("div",{className:q.imagedot,children:[e.jsx("img",{src:"/images/members/exam-icon.svg",alt:""}),e.jsx("div",{className:(s==null?void 0:s.examMode)===l("Offline")?`${q.dot} ${q.blue}`:`${q.dot} ${q.red}`})]}),e.jsxs("div",{className:q.exam_inner_text,children:[e.jsx("h6",{children:s==null?void 0:s.examName}),(s==null?void 0:s.examType)==="Final"?"":e.jsxs("p",{children:[l("weightage"),": ",s==null?void 0:s.examWeight," %"]})]}),e.jsxs("div",{className:q.exam_date,children:[e.jsx("h6",{children:me(s==null?void 0:s.createdAt).format("DD MMMM YYYY")}),e.jsx("p",{children:l(s==null?void 0:s.examType)})]})]})}):e.jsx(oe,{carryParentState:{...a,examId:s==null?void 0:s._id},activeTab:"exam&n=detail",children:e.jsxs("div",{className:q.exam_card_container,title:"View exam detail",children:[e.jsxs("div",{className:q.imagedot,children:[e.jsx("img",{src:"/images/members/exam-icon.svg",alt:""}),e.jsx("div",{className:(s==null?void 0:s.examMode)===l("Offline")?`${q.dot} ${q.blue}`:`${q.dot} ${q.red}`})]}),e.jsxs("div",{className:q.exam_inner_text,children:[e.jsx("h6",{children:s==null?void 0:s.examName}),(s==null?void 0:s.examType)==="Final"?"":e.jsxs("p",{children:[l("weightage"),": ",s==null?void 0:s.examWeight," %"]})]}),e.jsxs("div",{className:q.exam_date,children:[e.jsx("h6",{children:me(s==null?void 0:s.createdAt).format("DD MMMM YYYY")}),e.jsx("p",{children:l(s==null?void 0:s.examType)})]})]})})})}const nt=({did:s,carryParentState:a,viewAs:c})=>{var p;const{t}=A(),[l,n]=i.useState(!0),[N,b]=i.useState([]),[r,x]=i.useState(!1),{getBacklogExamList:f,getBacklogExamListRefetch:m}=We({did:s,skip:!s});i.useEffect(()=>{s&&(n(!0),m())},[s,m]),i.useEffect(()=>{var u,_;(u=f==null?void 0:f.exam)!=null&&u.length?(b(f==null?void 0:f.exam),n(!1)):((_=f==null?void 0:f.exam)==null?void 0:_.length)===0&&n(!1)},[f==null?void 0:f.exam]);const o=()=>{x(u=>!u)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Y.add_new_container,children:e.jsx("p",{className:Y.add_new_exam,onClick:o,children:t("create_new_exam")})}),N==null?void 0:N.map(u=>e.jsx(Ve,{exam:u,carryParentState:a,viewAs:c},u._id)),!l&&!((p=f==null?void 0:f.exam)!=null&&p.length)&&e.jsx(re,{customStyleContainer:{marginTop:"5rem",height:"inherit"},title:"No any exams found",subtitle:"Please make sure you have created exam."}),r&&e.jsx(Ae,{onClose:o,did:s,onRefetch:m,openAs:"BACKLOG"})]})};function it({did:s,carryParentState:a,viewAs:c}){var j,d,S,C,P,D,I,B,L,J;const{t}=A(),l=Oe(),n=te(),N=[{name:t("stands"),id:0,url:c==="EXAMINATION_SECTION"?"member/exam?a=department&n=backlog&standard":`member/department/${l.deptname}?a=backlog&standard`},{name:t("exam_fees"),id:1,url:c==="EXAMINATION_SECTION"?"member/exam?a=department&n=backlog&fees":`member/department/${l.deptname}?a=backlog&fees`},{name:t("exams"),id:2,url:c==="EXAMINATION_SECTION"?"member/exam?a=department&n=backlog&exam":`member/department/${l.deptname}?a=backlog&exam`}],[b,r]=i.useState(!0),[x,f]=i.useState(1),[m,o]=F(),[p,u]=i.useState(!0),[_,g]=i.useState([]),{backlogClassMaster:h,backlogClassMasterRefetch:w}=He({data:{did:s,page:x,limit:10},skip:!s});return i.useEffect(()=>{o&&b&&f(k=>k+1)},[o,b]),i.useEffect(()=>{s&&(u(!0),w())},[x,s,w]),i.useEffect(()=>{var k,$;if(h!=null&&h.masters){const X=[..._,...h==null?void 0:h.masters],O=[...new Set(X.map(JSON.stringify))].map(JSON.parse);g(O),u(!1)}else((k=h==null?void 0:h.masters)==null?void 0:k.length)===0&&u(!1);(($=h==null?void 0:h.masters)==null?void 0:$.length)===10?r(!0):r(!1)},[h==null?void 0:h.masters]),e.jsxs("div",{className:T.standerds,children:[e.jsx("h6",{className:T.standerdsheading,children:t("stands")}),e.jsx(ls,{tabList:N,activeIndexTab:((j=n.search)==null?void 0:j.substring(3))==="backlog&standard"||((d=n.search)==null?void 0:d.substring(3))==="department&n=backlog&standard"?0:((S=n.search)==null?void 0:S.substring(3))==="backlog&fees"||((C=n.search)==null?void 0:C.substring(3))==="department&n=backlog&fees"?1:2,showAs:!0,customStyleLink:{width:"33.3%"},carryParentState:a}),e.jsx(G,{customStyle:{width:"100%",marginBottom:"0.7rem"}}),(((P=n.search)==null?void 0:P.substring(3))==="backlog&standard"||((D=n.search)==null?void 0:D.substring(3))==="department&n=backlog&standard")&&e.jsxs(e.Fragment,{children:[_==null?void 0:_.map((k,$)=>(_==null?void 0:_.length)===$+1?e.jsx("div",{ref:m,children:e.jsx(Ce,{classMaster:k,carryParentState:a,viewAs:c})},k==null?void 0:k._id):e.jsx(Ce,{classMaster:k,viewAs:c,carryParentState:a},k==null?void 0:k._id)),p&&e.jsx(z,{})]}),(((I=n.search)==null?void 0:I.substring(3))==="backlog&fees"||((B=n.search)==null?void 0:B.substring(3))==="department&n=backlog&fees")&&e.jsx(at,{did:s}),(((L=n.search)==null?void 0:L.substring(3))==="backlog&exam"||((J=n.search)==null?void 0:J.substring(3))==="department&n=backlog&exam")&&e.jsx(nt,{did:s,viewAs:c,carryParentState:a})]})}function Ee({subMaster:s,carryParentState:a,viewAs:c}){return e.jsx(e.Fragment,{children:c==="EXAMINATION_SECTION"?e.jsx(he,{carryParentState:{...a,subId:s==null?void 0:s._id},activeTab:"department&n=backlog&student",children:e.jsxs("div",{className:`${T.standerdItem} ${T.standerdItemm}`,children:[e.jsx("img",{className:T.standerdsImg,src:"/images/department/subjectIcon.svg",alt:""}),e.jsxs("div",{className:T.standerdsright,children:[e.jsx("h6",{className:T.standerdsh6,children:s==null?void 0:s.subjectName}),e.jsxs("p",{className:T.standerdsp,children:["Total Student: ",s==null?void 0:s.backlogStudentCount]})]})]})}):e.jsx(oe,{carryParentState:{...a,subId:s==null?void 0:s._id},activeTab:"backlog&student",children:e.jsxs("div",{className:`${T.standerdItem} ${T.standerdItemm}`,children:[e.jsx("img",{className:T.standerdsImg,src:"/images/department/subjectIcon.svg",alt:""}),e.jsxs("div",{className:T.standerdsright,children:[e.jsx("h6",{className:T.standerdsh6,children:s==null?void 0:s.subjectName}),e.jsxs("p",{className:T.standerdsp,children:["Total Student: ",s==null?void 0:s.backlogStudentCount]})]})]})})})}function ct({carryParentState:s,viewAs:a}){var g,h,w;const{t:c}=A(),[t,l]=i.useState(!0),[n,N]=i.useState(1),[b,r]=F(),[x,f]=i.useState(!0),[m,o]=i.useState([]),p=te(),{backlogSubjectMaster:u,backlogSubjectMasterRefetch:_}=Qe({data:{cmid:(g=p.state)==null?void 0:g.clsId,page:n,limit:10},skip:!((h=p.state)!=null&&h.clsId)});return i.useEffect(()=>{r&&t&&N(j=>j+1)},[r,t]),i.useEffect(()=>{var j;(j=p.state)!=null&&j.clsId&&(f(!0),_())},[n,(w=p.state)==null?void 0:w.clsId,_]),i.useEffect(()=>{var j,d;if(u!=null&&u.subjects){const S=[...m,...u==null?void 0:u.subjects],C=[...new Set(S.map(JSON.stringify))].map(JSON.parse);o(C),f(!1)}else((j=u==null?void 0:u.subjects)==null?void 0:j.length)===0&&f(!1);((d=u==null?void 0:u.subjects)==null?void 0:d.length)===10?l(!0):l(!1)},[u==null?void 0:u.subjects]),e.jsxs("div",{className:T.standerds,children:[e.jsx("h6",{className:T.standerdsheading,children:c("subjects")}),m==null?void 0:m.map((j,d)=>(m==null?void 0:m.length)===d+1?e.jsx("div",{ref:b,children:e.jsx(Ee,{carryParentState:s,subMaster:j,viewAs:a})},j==null?void 0:j._id):e.jsx(Ee,{carryParentState:s,subMaster:j,viewAs:a},j==null?void 0:j._id)),x&&e.jsx(z,{})]})}const ot=({onClose:s,currentSubject:a,onAddSubjectSeating:c})=>{const{t}=A(),[l,n]=i.useState(""),[N,b]=i.useState(0),[r,x]=i.useState({from:"",to:""}),f=p=>{x(u=>({...u,[p.target.name]:+p.target.value}))};i.useEffect(()=>{r.from&&r.to&&b(+r.to+1-+r.from)},[r]);const m=p=>{const u={};for(let _ in p)p[_]||(u[_]=`${_} is required!`);return p.from<p.to||(u.greater_value="form is less than to"),u},o=()=>{var _,g,h,w,j,d,S,C,P,D,I,B,L,J,k,$;const p=m(r);let u=!1;for(let X in p)if(X){u=!0;break}u?n(p):c({...r,subjectId:(g=(_=a==null?void 0:a.currentSubject)==null?void 0:_.subject)==null?void 0:g.subjectId,subjectName:(w=(h=a==null?void 0:a.currentSubject)==null?void 0:h.subject)==null?void 0:w.subjectName,totalMarks:(d=(j=a==null?void 0:a.currentSubject)==null?void 0:j.subject)==null?void 0:d.totalMarks,date:(C=(S=a==null?void 0:a.currentSubject)==null?void 0:S.subject)==null?void 0:C.date,startTime:(D=(P=a==null?void 0:a.currentSubject)==null?void 0:P.subject)==null?void 0:D.startTime,endTime:(B=(I=a==null?void 0:a.currentSubject)==null?void 0:I.subject)==null?void 0:B.endTime,duration:"",subjectMasterId:(J=(L=a==null?void 0:a.currentSubject)==null?void 0:L.subject)==null?void 0:J.subjectMasterId,paperId:($=(k=a==null?void 0:a.currentSubject)==null?void 0:k.subject)==null?void 0:$._id})};return e.jsx(ie,{onClose:s,children:e.jsxs("div",{className:v.seating_modal,children:[e.jsxs("section",{className:v.seating_modal_title_left,children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:s,alt:""}),e.jsx("h6",{children:t("select_exam")})]}),e.jsx(G,{customStyle:{width:"100%",marginBottom:"1rem"}}),e.jsx(ge,{examDetail:a,viewAs:"ADD_SEATING",studentCount:N}),e.jsx(Q,{labelText:t("student_from"),placeholder:t("student_from_placeholder"),name:"from",type:"number",errorShow:l.from,onChange:f,value:r.from}),e.jsx(Q,{labelText:t("student_to"),placeholder:t("student_to_placeholder"),name:"to",type:"number",errorShow:l.to,onChange:f,value:r.to}),l.greater_value&&e.jsx("span",{style:{color:"red",marginLeft:"15px"},children:"* Form field is less than To field"}),e.jsx("button",{className:v.select_exam_btn,title:"Add",style:{justifyContent:"center"},onClick:o,children:t("add")})]})})},rt=({onClose:s,onCurrentSubject:a})=>{var p,u,_;const{t:c}=A(),[t,l]=ee.useState([]),[n,N]=i.useState(""),[b,r]=ee.useState(!0),x=te(),{departmentExamDetail:f,departmentExamDetailRefetch:m}=Re({eid:(p=x.state)==null?void 0:p.examId,skip:!((u=x.state)!=null&&u.examId)});i.useEffect(()=>{var g;(g=x.state)!=null&&g.examId&&m()},[(_=x.state)==null?void 0:_.examId]),i.useEffect(()=>{var g;f!=null&&f.oneExamDetail?(l((f==null?void 0:f.oneExamDetail)??[]),r(!1)):((g=f==null?void 0:f.oneExamDetail)==null?void 0:g.length)===0&&r(!1)},[f==null?void 0:f.oneExamDetail]);const o=g=>{N(g.target.value)};return e.jsx(ie,{onClose:s,children:e.jsxs("div",{className:v.seating_modal,children:[e.jsxs("section",{className:v.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:s,alt:""}),e.jsx("h6",{children:c("select_scheduled_exam")})]}),e.jsx(G,{customStyle:{width:"100%",marginBottom:"1rem"}}),e.jsx("div",{className:v.search_container,style:{marginBottom:"0.5rem"},children:e.jsxs("div",{className:v.search_container_input,style:{width:"100%"},children:[e.jsx("img",{className:v.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),e.jsx("input",{type:"text",placeholder:c("search-label"),style:{width:"100%"},onChange:o})]})}),t==null?void 0:t.map(g=>{var h;return(h=g==null?void 0:g.subject)==null?void 0:h.map(w=>{var j,d;return n?(d=(j=w==null?void 0:w.subjectName)==null?void 0:j.toLowerCase())!=null&&d.includes(n==null?void 0:n.toLowerCase())?e.jsx(je,{classMaster:g==null?void 0:g.className,subject:w,customCardStyle:{width:"100%%",cursor:"pointer"},viewAs:"SEATING",onCurrentSubject:a},w==null?void 0:w._id):"":e.jsx(je,{classMaster:g==null?void 0:g.className,subject:w,customCardStyle:{width:"100%%",cursor:"pointer"},viewAs:"SEATING",onCurrentSubject:a},w==null?void 0:w._id)})})]})})},lt=({onClose:s,examId:a,onSelect:c})=>{const{t}=A(),[l,n]=F(),[N,b]=i.useState(1),[r,x]=i.useState(!0),[f,m]=i.useState(!0),[o,p]=i.useState([]),[u,_]=i.useState(""),{getClassListExam:g,getClassListExamRefetch:h}=Pe({data:{eid:a,page:N,limit:10,search:u},skip:!a});i.useEffect(()=>{a&&(m(!0),h())},[a,N,u,h]),i.useEffect(()=>{n&&r&&b(d=>d+1)},[n,r]),i.useEffect(()=>{var d,S;u?(p(g==null?void 0:g.all_classes),m(!1)):g!=null&&g.all_classes?(p(C=>[...new Set([...C,...g==null?void 0:g.all_classes].map(JSON.stringify))].map(JSON.parse)),m(!1)):((d=g==null?void 0:g.all_classes)==null?void 0:d.length)===0&&m(!1),((S=g==null?void 0:g.all_classes)==null?void 0:S.length)===10?x(!0):x(!1)},[g==null?void 0:g.all_classes]);const w=i.useCallback(Ne.debounce(d=>_(d),500),[]),j=d=>{w(d.target.value)};return e.jsx(ie,{onClose:s,children:e.jsxs("div",{className:v.seating_modal,children:[e.jsxs("section",{className:v.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:s,alt:""}),e.jsx("h6",{children:t("select_class")})]}),e.jsx(G,{customStyle:{width:"100%",marginBottom:"1rem"}}),e.jsx("div",{className:v.search_container,style:{marginBottom:"0.5rem"},children:e.jsxs("div",{className:v.search_container_input,style:{width:"100%"},children:[e.jsx("img",{className:v.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),e.jsx("input",{type:"text",placeholder:t("search-label"),style:{width:"100%"},onChange:j})]})}),o==null?void 0:o.map((d,S)=>(o==null?void 0:o.length)===S+1?e.jsx("div",{ref:l,children:e.jsx(Te,{cls:d,onSelect:c})},d==null?void 0:d._id):e.jsx(Te,{cls:d,onSelect:c},d==null?void 0:d._id)),f&&e.jsx(z,{})]})})},qe=({onClose:s,instituteId:a,examId:c,examName:t,onRefetch:l,said:n,onEdit:N,openAs:b,viewAs:r})=>{var le,ne,be,ke,ve,we,ye;const{t:x}=A(),[f,m]=i.useState(""),[o,p]=i.useState(""),[u,_]=i.useState(""),[g,h]=i.useState(""),[w,j]=i.useState({seat_block_name:b==="EDIT"?n==null?void 0:n.seat_block_name:"",seat_block_class:b==="EDIT"?(le=n==null?void 0:n.seat_block_class)==null?void 0:le._id:"",seat_valid_staff:b==="EDIT"?n==null?void 0:n.seat_valid_staff:"",seat_block_staff:b==="EDIT"?(ne=n==null?void 0:n.seat_block_staff)==null?void 0:ne._id:"",seat_valid_staff_name:b==="EDIT"?n==null?void 0:n.seat_valid_staff_name:"",papers:b==="EDIT"?n==null?void 0:n.seat_exam_paper_array:[]}),[d,S]=i.useState([]),[C,P]=i.useState(""),[D,I]=i.useState(!1),[B]=Fe(),[L]=Me();i.useEffect(()=>{var E,V;b==="EDIT"&&(j({seat_block_name:b==="EDIT"?n==null?void 0:n.seat_block_name:"",seat_block_class:b==="EDIT"?(E=n==null?void 0:n.seat_block_class)==null?void 0:E._id:"",seat_valid_staff:b==="EDIT"?n==null?void 0:n.seat_valid_staff:"",seat_block_staff:b==="EDIT"?(V=n==null?void 0:n.seat_block_staff)==null?void 0:V._id:"",seat_valid_staff_name:b==="EDIT"?n==null?void 0:n.seat_valid_staff_name:"",papers:n==null?void 0:n.seat_exam_paper_array}),m(n==null?void 0:n.seat_block_staff),p(n==null?void 0:n.seat_block_class))},[b]);const J=E=>{b==="EDIT"?(E==="SCHEDULE_EXAM_OPEN"||E==="SCHEDULE_OPEN")&&h(E):h(E)},k=()=>{h("")},$=E=>{j(V=>({...V,seat_valid_staff:E}))},X=E=>{m(E),k(),j(V=>({...V,seat_block_staff:E==null?void 0:E._id}))},O=E=>{j(V=>({...V,[E.target.name]:E.target.value}))},y=E=>{j(V=>({...V,seat_block_class:E==null?void 0:E._id})),p(E),k()},R=E=>{P(E),h("SCHEDULE_OPEN")},U=E=>{b==="EDIT"?(S(V=>[...V,E]),k()):(j(V=>({...V,papers:[...V.papers,E]})),k())},K=E=>{var Z;const V={};for(let W in E)W==="seat_block_staff"?E.seat_valid_staff==="Staff"&&(E[W]||(V.seat_block_staff="seat_block_staff is required!")):W==="seat_valid_staff_name"?E.seat_valid_staff==="External"&&(E[W]||(V.seat_valid_staff_name="seat_valid_staff_name is required!")):W==="papers"?(Z=E[W])!=null&&Z.length||(V.papers="papers is required!"):E[W]||(V[W]=`${W} is required!`);return V},ae=()=>{const E=K(w);let V=!1;for(let Z in E)if(Z){V=!0;break}V?_(E):b==="EDIT"?N(w,d):(I(Z=>!Z),r==="BACKLOG"?L({eid:c,addSeating:w}).then(()=>{l(),s(),I(Z=>!Z)}).catch({}):B({eid:c,addSeating:w}).then(()=>{l(),s(),I(Z=>!Z)}).catch({}))};return e.jsxs(e.Fragment,{children:[g===""&&e.jsxs(ie,{onClose:s,children:[e.jsxs("div",{className:v.seating_modal,children:[e.jsxs("section",{className:v.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:s,alt:""}),e.jsx("h6",{children:x("add_block_for_seating_arrragements")}),e.jsx("button",{className:v.select_select_btn,title:"Add seating arrangements",onClick:ae,children:x(b==="EDIT"?"update":"Add")})]}),e.jsx(G,{customStyle:{width:"100%"}}),e.jsx(Q,{labelText:x("block_hall_name"),placeholder:x("block_hall_name_placeholder"),name:"seat_block_name",value:w==null?void 0:w.seat_block_name,type:"text",onChange:O,errorShow:u.seat_block_name}),e.jsxs("div",{className:v.person_container,onClick:()=>J("CLASS_OPEN"),children:[e.jsx("img",{src:(be=o==null?void 0:o.classTeacher)!=null&&be.staffProfilePhoto?`${ce}/${o==null?void 0:o.classTeacher.staffProfilePhoto}`:"/images/user-icon.svg",alt:"avatar"}),e.jsxs("div",{className:v.person_container_text,children:[e.jsx("h6",{children:o?`${(o==null?void 0:o.className)??""} - ${(o==null?void 0:o.classTitle)??""}`:x("select_original_class_of_block")}),e.jsxs("p",{children:[o!=null&&o.classTeacher?`${((ke=o==null?void 0:o.classTeacher)==null?void 0:ke.staffFirstName)??""} ${((ve=o==null?void 0:o.classTeacher)==null?void 0:ve.staffMiddleName)??""} ${((we=o==null?void 0:o.classTeacher)==null?void 0:we.staffLastName)??""}`:x("select_from_list"),u.seat_block_class&&e.jsxs("span",{style:{color:"red",marginLeft:"15px"},children:["* ",x("form_require_label")]})]})]})]}),e.jsx(Se,{selectLabel:x("is_supervisor_external_or_staff"),selectedValue:x("select_supervisor_type"),options:["External","Staff"],onClick:$,errorShow:u.seat_valid_staff,value:w.seat_valid_staff,openAs:b==="EDIT"?"REFUND":""}),w.seat_valid_staff==="Staff"?e.jsxs("div",{className:v.person_container,onClick:()=>J("SUPERVISOR_OPEN"),children:[e.jsx("img",{src:f!=null&&f.staffProfilePhoto?`${ce}/${f.staffProfilePhoto}`:"/images/user-icon.svg",alt:"avatar"}),e.jsxs("div",{className:v.person_container_text,children:[e.jsx("h6",{children:f?`${(f==null?void 0:f.staffFirstName)??""} ${(f==null?void 0:f.staffMiddleName)??""} ${(f==null?void 0:f.staffLastName)??""}`:x("assign_supervisor")}),e.jsxs("p",{children:[x("select_from_list")," ",u.seat_block_staff&&e.jsxs("span",{style:{color:"red",marginLeft:"15px"},children:["* ",x("form_require_label")]})]})]})]}):e.jsx(Q,{labelText:x("external_supervisor"),placeholder:x("external_supervisor_placeholder"),name:"seat_valid_staff_name",value:w==null?void 0:w.seat_valid_staff_name,type:"text",onChange:O,errorShow:u.seat_valid_staff_name}),e.jsxs("button",{className:v.select_schedule_exam_btn,title:"Schedule Exam",onClick:()=>J("SCHEDULE_EXAM_OPEN"),children:[e.jsx("div",{children:x("select_schedule_exam")}),e.jsx("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]}),u.papers&&e.jsxs("span",{style:{color:"red",marginLeft:"15px"},children:["* atleast one sechedule exam ",x("form_require_label")]}),(ye=w.papers)==null?void 0:ye.map(E=>e.jsx(ge,{examDetail:{...E,examName:t,selectClass:`${o==null?void 0:o.className}, ${o==null?void 0:o.classTitle}`},viewAs:"VIEW_SEATING"})),d==null?void 0:d.map(E=>e.jsx(ge,{examDetail:{...E,examName:t,selectClass:`${o==null?void 0:o.className}, ${o==null?void 0:o.classTitle}`},viewAs:"VIEW_SEATING"}))]}),D&&e.jsx(se,{})]}),g==="CLASS_OPEN"&&e.jsx(lt,{examId:c,onClose:k,onSelect:y}),g==="SCHEDULE_EXAM_OPEN"&&e.jsx(rt,{onClose:k,onCurrentSubject:R}),g==="SCHEDULE_OPEN"&&e.jsx(ot,{onClose:k,currentSubject:{currentSubject:C,selectClass:o==null?void 0:o.classTitle,examName:t},onAddSubjectSeating:U}),g==="SUPERVISOR_OPEN"&&e.jsx(ds,{assignHead:g==="SUPERVISOR_OPEN",headSelect:X,title:x("assign_supervisor"),onClose:k,instituteId:a,viewAs:"ADMISSION_ADMIN"})]})},dt=({onClose:s,onRefetch:a,examId:c,said:t})=>{const[l,n]=i.useState(!1),[N,b]=i.useState(!1),[r]=es(),[x]=ss(),f=()=>{n(o=>!o),r({eid:c,said:t==null?void 0:t._id}).then(()=>{a(),s(),n(o=>!o)}).catch({})},m=(o,p)=>{b(!1),n(u=>!u),x({eid:c,said:t==null?void 0:t._id,updateSeating:{seat_block_name:o==null?void 0:o.seat_block_name,seat_block_class:o==null?void 0:o.seat_block_class,seat_valid_staff:o==null?void 0:o.seat_valid_staff,seat_block_staff:o==null?void 0:o.seat_block_staff,seat_valid_staff_name:o==null?void 0:o.seat_valid_staff_name,papers:p}}).then(()=>{a(),n(u=>!u),s()}).catch({})};return e.jsx(e.Fragment,{children:N?e.jsx(qe,{said:t,onEdit:m,openAs:"EDIT",onClose:()=>b(!1)}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{onClose:s}),e.jsxs(pe,{customStyle:{zIndex:"1200"},children:[e.jsxs("div",{className:H.edit_modal_container,style:{width:"200px"},children:[e.jsx("h6",{className:H.edit,onClick:()=>b(o=>!o),children:"Edit"}),e.jsx("h6",{className:H.remove,onClick:f,children:"Delete"})]}),l&&e.jsx(se,{})]})]})})},De=({seating:s,examName:a,examId:c,onRefetch:t})=>{var b,r,x,f,m,o;const{t:l}=A(),[n,N]=i.useState("");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:v.seating_block_container,onClick:()=>N(s),children:[e.jsxs("div",{className:v.seating_block_container_top,children:[e.jsx("h6",{children:(s==null?void 0:s.seat_block_name)??""}),e.jsx("p",{children:`${(b=s==null?void 0:s.seat_block_class)==null?void 0:b.className} - ${(r=s==null?void 0:s.seat_block_class)==null?void 0:r.classTitle}`}),e.jsxs("p",{children:[l("supervisor"),":"," ",s!=null&&s.seat_valid_staff_name?s==null?void 0:s.seat_valid_staff_name:`${((x=s==null?void 0:s.seat_block_staff)==null?void 0:x.staffFirstName)??""} ${((f=s==null?void 0:s.seat_block_staff)==null?void 0:f.staffMiddleName)??""} ${((m=s==null?void 0:s.seat_block_staff)==null?void 0:m.staffLastName)??""}`]})]}),(o=s==null?void 0:s.seat_exam_paper_array)==null?void 0:o.map(p=>{var u;return e.jsx(ge,{examDetail:{...p,examName:a,selectClass:(u=s==null?void 0:s.seat_block_class)==null?void 0:u.classTitle},viewAs:"ARANGE_SEATING"},p==null?void 0:p._id)}),e.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",className:v.menu_icon,title:"Menu"})]}),n&&e.jsx(dt,{said:n,examName:a,examId:c,onRefetch:t,onClose:()=>N("")})]})},mt=({instituteId:s,onBack:a,onGrabStaff:c,staff_list:t})=>{const{t:l}=A(),[n,N]=i.useState(1),[b,r]=i.useState(!0),[x,f]=F(),[m,o]=i.useState(""),[p,u]=ee.useState([]),[_,g]=i.useState(!0),[h,w]=i.useState(t!=null&&t.length?[...t]:[]),[j,d]=i.useState(!1),{assignSearchStaff:S,assignSearchStaffRefetch:C}=ms({skip:!s,search:{search:m,page:n,id:s,limit:100}});ee.useEffect(()=>{t!=null&&t.length&&w(t!=null&&t.length?[...t]:[])},[t]),ee.useEffect(()=>{s&&C()},[s,m,C,n]),i.useEffect(()=>{f&&b&&N(k=>k+1)},[f,b]),ee.useEffect(()=>{var k;S!=null&&S.staff&&(m?(u(S==null?void 0:S.staff),g(!1)):S!=null&&S.staff?(u($=>[...new Set([...$,...S==null?void 0:S.staff].map(JSON.stringify))].map(JSON.parse)),g(!1)):((k=S==null?void 0:S.staff)==null?void 0:k.length)===0&&g(!1)),(S==null?void 0:S.staff.length)===10?r(!0):r(!1)},[S==null?void 0:S.staff]);const P=i.useCallback(Ne.debounce(k=>o(k),500),[]),D=k=>{P(k.target.value)},I=()=>{let k=[];for(let $ of p)k.push($==null?void 0:$._id);w(k),d(!0)},B=()=>{w([]),d(!1)},L=k=>{h!=null&&h.includes(k)?w($=>$==null?void 0:$.filter(X=>X!==k)):w($=>[...$,k])},J=()=>{c(h)};return e.jsxs("div",{className:v.seating_modal,children:[e.jsxs("section",{className:v.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:a,alt:""}),e.jsx("h6",{children:l("select_availbale_staff_for_supervision")}),e.jsx("button",{className:v.next_btn,title:"Next",onClick:J,children:l("next")})]}),e.jsx(G,{customStyle:{width:"100%"}}),e.jsxs("div",{className:v.select_mutliple,children:[e.jsxs("p",{children:[h!=null&&h.length?h==null?void 0:h.length:""," "," ",l("selected")]}),j?e.jsx("button",{onClick:B,children:l("remove_all")}):e.jsx("button",{onClick:I,children:l("select_all")})]}),e.jsx("div",{className:v.search_container,style:{marginBottom:"0.5rem"},children:e.jsxs("div",{className:v.search_container_input,style:{width:"100%"},children:[e.jsx("img",{className:v.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),e.jsx("input",{type:"text",placeholder:l("search-label"),style:{width:"100%"},onChange:D})]})}),p==null?void 0:p.map((k,$)=>(p==null?void 0:p.length)===$+1?e.jsxs("div",{className:v.person_container,ref:x,onClick:()=>L(k==null?void 0:k._id),children:[e.jsx("img",{src:k!=null&&k.staffProfilePhoto?`${ce}/${k.staffProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),e.jsxs("div",{className:v.with_check_container,children:[e.jsxs("div",{className:v.person_container_text,children:[e.jsx("h6",{children:`${k.staffFirstName??""} ${(k==null?void 0:k.staffMiddleName)??""} ${k.staffLastName??""}`}),e.jsxs("p",{children:[l("index")," ",k==null?void 0:k.staffROLLNO]})]}),h!=null&&h.includes(k==null?void 0:k._id)?e.jsx("img",{src:"/images/department/blue-check-icon.svg",alt:"checkbox icon",title:"Select staff"}):e.jsx("img",{src:"/images/department/uncheck-icon.svg",alt:"checkbox icon",title:"Unselect staff"})]})]},k._id):e.jsxs("div",{className:v.person_container,onClick:()=>L(k==null?void 0:k._id),children:[e.jsx("img",{src:k!=null&&k.staffProfilePhoto?`${ce}/${k.staffProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),e.jsxs("div",{className:v.with_check_container,children:[e.jsxs("div",{className:v.person_container_text,children:[e.jsx("h6",{children:`${k.staffFirstName??""} ${(k==null?void 0:k.staffMiddleName)??""} ${k.staffLastName??""}`}),e.jsxs("p",{children:[l("index")," ",k==null?void 0:k.staffROLLNO]})]}),h!=null&&h.includes(k==null?void 0:k._id)?e.jsx("img",{src:"/images/department/blue-check-icon.svg",alt:"checkbox icon",title:"Select staff"}):e.jsx("img",{src:"/images/department/uncheck-icon.svg",alt:"checkbox icon",title:"Unselect staff"})]})]},k._id)),_&&e.jsx(z,{})]})},ht=({examId:s,onBack:a,onGrabClass:c,class_list:t,clsList:l,setStudentCount:n})=>{const{t:N}=A(),[b,r]=F(),[x,f]=i.useState(1),[m,o]=i.useState(!0),[p,u]=i.useState(!0),[_,g]=i.useState([]),[h,w]=i.useState(""),[j,d]=i.useState(t!=null&&t.length?[...t]:[]),[S,C]=i.useState(l??[]),[P,D]=i.useState(!1),{getClassListExam:I,getClassListExamRefetch:B}=Pe({data:{eid:s,page:x,limit:10,search:h},skip:!s});ee.useEffect(()=>{t!=null&&t.length&&d(t!=null&&t.length?[...t]:[]),l&&C(l)},[t,l]),i.useEffect(()=>{s&&(u(!0),B())},[s,x,h,B]),i.useEffect(()=>{r&&m&&f(y=>y+1)},[r,m]),i.useEffect(()=>{var y,R;h?(g(I==null?void 0:I.all_classes),u(!1)):I!=null&&I.all_classes?(g(U=>[...new Set([...U,...I==null?void 0:I.all_classes].map(JSON.stringify))].map(JSON.parse)),u(!1)):((y=I==null?void 0:I.all_classes)==null?void 0:y.length)===0&&u(!1),((R=I==null?void 0:I.all_classes)==null?void 0:R.length)===10?o(!0):o(!1)},[I==null?void 0:I.all_classes]);const L=i.useCallback(Ne.debounce(y=>w(y),500),[]),J=y=>{L(y.target.value)},k=()=>{let y=[],R=[],U=0;for(let K of _)y.push(K==null?void 0:K._id),R.push(K),U+=K.studentCount;d(y),C(R),n(U),D(!0)},$=()=>{d([]),C([]),D(!1),n(0)},X=y=>{j!=null&&j.includes(y==null?void 0:y._id)?(d(R=>R==null?void 0:R.filter(U=>U!==(y==null?void 0:y._id))),C(R=>R==null?void 0:R.filter(U=>(U==null?void 0:U._id)!==(y==null?void 0:y._id))),n(R=>R-(y==null?void 0:y.studentCount))):(d(R=>[...R,y==null?void 0:y._id]),C(R=>[...R,y]),n(R=>R+(y==null?void 0:y.studentCount)))},O=()=>{c(j,S)};return e.jsxs("div",{className:v.seating_modal,children:[e.jsxs("section",{className:v.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:a,alt:""}),e.jsx("h6",{children:N("select_availbale_classroom")}),e.jsx("button",{className:v.next_btn,title:"Next",onClick:O,children:N("next")})]}),e.jsx(G,{customStyle:{width:"100%"}}),e.jsxs("div",{className:v.select_mutliple,children:[e.jsxs("p",{children:[j!=null&&j.length?j==null?void 0:j.length:""," "," ",N("selected")]}),P?e.jsx("button",{onClick:$,children:N("remove_all")}):e.jsx("button",{onClick:k,children:N("select_all")})]}),e.jsx("div",{className:v.search_container,style:{marginBottom:"0.5rem"},children:e.jsxs("div",{className:v.search_container_input,style:{width:"100%"},children:[e.jsx("img",{className:v.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),e.jsx("input",{type:"text",placeholder:N("search-label"),style:{width:"100%"},onChange:J})]})}),_==null?void 0:_.map((y,R)=>(_==null?void 0:_.length)===R+1?e.jsxs("div",{className:v.classes_main_container,ref:b,onClick:()=>X(y),children:[e.jsx("img",{src:"/images/master-24-grey-icon.svg",alt:"classes icon"}),e.jsxs("div",{className:v.with_check_container,children:[e.jsx("div",{className:v.person_container_text,children:e.jsx("h6",{children:`${(y==null?void 0:y.className)??""} ${(y==null?void 0:y.classTitle)??""}`})}),e.jsx("div",{className:v.classes_count_container,children:j!=null&&j.includes(y==null?void 0:y._id)?e.jsxs(e.Fragment,{children:[e.jsx("h6",{children:(j==null?void 0:j.indexOf(y==null?void 0:y._id))+1}),e.jsx("img",{src:"/images/department/blue-check-icon.svg",alt:"checkbox icon",title:"Select staff"})]}):e.jsx("img",{src:"/images/department/uncheck-icon.svg",alt:"checkbox icon",title:"Unselect staff"})})]})]},y._id):e.jsxs("div",{className:v.classes_main_container,onClick:()=>X(y),children:[e.jsx("img",{src:"/images/master-24-grey-icon.svg",alt:"classes icon"}),e.jsxs("div",{className:v.with_check_container,children:[e.jsx("div",{className:v.person_container_text,children:e.jsx("h6",{children:`${(y==null?void 0:y.className)??""} ${(y==null?void 0:y.classTitle)??""}`})}),e.jsx("div",{className:v.classes_count_container,children:j!=null&&j.includes(y==null?void 0:y._id)?e.jsxs(e.Fragment,{children:[e.jsx("h6",{children:(j==null?void 0:j.indexOf(y==null?void 0:y._id))+1}),e.jsx("img",{src:"/images/department/blue-check-icon.svg",alt:"checkbox icon",title:"Select staff"})]}):e.jsx("img",{src:"/images/department/uncheck-icon.svg",alt:"checkbox icon",title:"Unselect staff"})})]})]},y._id)),p&&e.jsx(z,{})]})},_t=({onBack:s,onGrabRearrangeClass:a,clsList:c,class_list:t})=>{const{t:l}=A(),[n,N]=i.useState(t!=null&&t.length?[...t]:[]),[b,r]=i.useState(c??[]),x=i.useRef(),f=i.useRef();ee.useEffect(()=>{t!=null&&t.length&&N(t!=null&&t.length?[...t]:[]),c&&r(c)},[t,c]);const m=(_,g)=>{x.current=g},o=(_,g)=>{f.current=g},p=_=>{const g=[...n],h=g[x.current];g.splice(x.current,1),g.splice(f.current,0,h);const w=[...b],j=w[x.current];w.splice(x.current,1),w.splice(f.current,0,j),x.current=null,f.current=null,r(w),N(g)},u=()=>{a(n,b)};return e.jsxs("div",{className:v.seating_modal,children:[e.jsxs("section",{className:v.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:s,alt:""}),e.jsx("h6",{children:l("rearranges_exam_halls")}),e.jsx("button",{className:v.next_btn,title:"Next",onClick:u,children:l("next")})]}),e.jsx(G,{customStyle:{width:"100%"}}),b==null?void 0:b.map((_,g)=>e.jsxs("div",{className:v.classes_main_container,draggable:!0,onDragStart:h=>m(h,g),onDragEnter:h=>o(h,g),onDragEnd:p,children:[e.jsx("img",{src:"/images/master-24-grey-icon.svg",alt:"classes icon"}),e.jsxs("div",{className:v.with_check_container,children:[e.jsx("div",{className:v.person_container_text,children:e.jsx("h6",{children:`${(_==null?void 0:_.className)??""} ${(_==null?void 0:_.classTitle)??""}`})}),e.jsxs("div",{className:v.classes_count_container,children:[e.jsx("h6",{children:(n==null?void 0:n.indexOf(_==null?void 0:_._id))+1}),e.jsx("img",{src:"/images/department/equal-rearrange-icon.svg",alt:"checkbox icon",title:"Select staff"})]})]})]},_._id))]})},ft=({customExamStyle:s,examName:a,total_staff:c,total_classroom:t,student_count:l})=>{const{t:n}=A();return e.jsxs("div",{className:v.seating_examination_container,style:s,children:[e.jsx("h6",{children:a??""}),e.jsxs("p",{children:[n("total_staffs")," "," : "," ",c??0]}),e.jsxs("p",{children:[n("total_classrooms")," ",t??0]}),e.jsxs("p",{children:[n("total_students")," "," : "," ",l??0]})]})},gt=({onBack:s,automateState:a,onAddAutoMateSeating:c,studentCount:t,examName:l})=>{var u,_;const{t:n}=A(),[N,b]=i.useState(""),[r,x]=i.useState({hall_limit:"",sequence:""}),f=g=>{x(h=>({...h,hall_limit:+g.target.value}))},m=g=>{x(h=>({...h,sequence:g}))},o=g=>{const h={};for(let w in g)g[w]||(h[w]=`${w} is required!`);return h},p=()=>{const g=o(r);let h=!1;for(let w in g)if(w){h=!0;break}h?b(g):c(r)};return e.jsxs("div",{className:v.seating_modal,children:[e.jsxs("section",{className:v.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:s,alt:""}),e.jsx("h6",{children:n("select_exams")})]}),e.jsx(G,{customStyle:{width:"100%"}}),e.jsx(ft,{examName:l,total_staff:((u=a==null?void 0:a.staff_list)==null?void 0:u.length)??0,total_classroom:((_=a==null?void 0:a.class_list)==null?void 0:_.length)??0,student_count:t}),e.jsx(Q,{labelText:n("enter_exam_hall_student"),placeholder:n("enter_exam_hall_student_placeholder"),name:"hall_limit",type:"number",errorShow:N.hall_limit,onChange:f,value:r.hall_limit}),e.jsx(Se,{selectLabel:n("type_of_seating"),selectedValue:n("type_of_seating_placeholder"),options:["One Student / Bench","Two Student / Bench"],value:r.sequence,onClick:m,errorShow:N.sequence}),e.jsx("button",{className:v.start_arrangement_btn,title:"Start Arrangement",onClick:p,children:n("start_arrangement")})]})},xt=({onClose:s,instituteId:a,examId:c,examName:t})=>{const[l,n]=i.useState(1),[N,b]=i.useState(!1),[r,x]=i.useState({staff_list:[],class_list:[]}),[f,m]=i.useState([]),[o,p]=i.useState(0),[u]=ts(),_=j=>{x(d=>({...d,staff_list:j})),n(2)},g=(j,d)=>{x(S=>({...S,class_list:j})),m(d),n(3)},h=(j,d)=>{x(S=>({...S,class_list:j})),m(d),n(4)},w=j=>{b(d=>!d),u({eid:c,createAutomate:{...r,...j}}).then(()=>{b(d=>!d),s()}).catch({})};return e.jsxs(ie,{onClose:s,children:[l===1&&e.jsx(mt,{instituteId:a,onGrabStaff:_,staff_list:r.staff_list,onBack:s}),l===2&&e.jsx(ht,{examId:c,onGrabClass:g,class_list:r.class_list,onBack:()=>n(1),clsList:f,setStudentCount:p}),l===3&&e.jsx(_t,{onGrabRearrangeClass:h,class_list:r.class_list,onBack:()=>n(2),clsList:f}),l===4&&e.jsx(gt,{automateState:r,onBack:()=>n(3),onAddAutoMateSeating:w,examName:t,studentCount:o}),N&&e.jsx(se,{})]})},jt=({instituteId:s,viewAs:a})=>{var I,B,L,J,k,$,X;const{t:c}=A(),t=te(),[l,n]=i.useState(!1),[N,b]=i.useState(!1),[r,x]=F(),[f,m]=i.useState(1),[o,p]=i.useState(!0),[u,_]=i.useState(!0),[g,h]=i.useState([]),[w,j]=i.useState(!1),{getSeatingListExam:d,getSeatingListExamRefetch:S}=as({data:{eid:(I=t.state)==null?void 0:I.examId,page:f,limit:10,search:""},skip:!((B=t.state)!=null&&B.examId)});i.useEffect(()=>{var O;(O=t.state)!=null&&O.examId&&(_(!0),S())},[(L=t.state)==null?void 0:L.examId,f,S]),i.useEffect(()=>{x&&o&&m(O=>O+1)},[x,o]),i.useEffect(()=>{var O;(O=document.getElementById("scrollViewSeating"))==null||O.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},[]),i.useEffect(()=>{var O,y;w?(h(d==null?void 0:d.all_seating),_(!1),j(!1)):d!=null&&d.all_seating?(h(R=>[...new Set([...R,...d==null?void 0:d.all_seating].map(JSON.stringify))].map(JSON.parse)),_(!1)):((O=d==null?void 0:d.all_seating)==null?void 0:O.length)===0&&_(!1),((y=d==null?void 0:d.all_seating)==null?void 0:y.length)===10?p(!0):p(!1)},[d==null?void 0:d.all_seating]);const C=()=>{m(1),j(!0),_(!0),S()},P=()=>{n(O=>!O)},D=()=>{b(O=>!O)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:v.with_search,id:"scrollViewSeating",children:[e.jsx("h6",{children:c("seating_arrangements")}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[e.jsx("img",{src:"/images/department/seat-automate-icon.svg",alt:"back arrow",className:v.add_plus_icon,onClick:D,title:"Automate seating arrangements"}),e.jsx("img",{src:"/images/add-plus-blue-icon.svg",alt:"back arrow",className:v.add_plus_icon,onClick:P,title:"Add seating arrangements"})]})]}),e.jsx(G,{customStyle:{marginTop:"0.5rem",marginBottom:"0.6rem",width:"100%"}}),g==null?void 0:g.map((O,y)=>{var R,U,K,ae;return(g==null?void 0:g.length)===y+1?e.jsx("div",{ref:r,children:e.jsx(De,{seating:O,examName:((R=t.state)==null?void 0:R.examName)??"",examId:((U=t.state)==null?void 0:U.examId)??"",onRefetch:C})},O==null?void 0:O._id):e.jsx(De,{seating:O,examName:((K=t.state)==null?void 0:K.examName)??"",examId:((ae=t.state)==null?void 0:ae.examId)??"",onRefetch:C},O==null?void 0:O._id)}),u&&e.jsx(z,{}),l&&e.jsx(qe,{onClose:P,instituteId:s,examId:((J=t.state)==null?void 0:J.examId)??"",examName:((k=t.state)==null?void 0:k.examName)??"",onRefetch:C,viewAs:a}),N&&e.jsx(xt,{onClose:D,instituteId:s,examId:(($=t.state)==null?void 0:$.examId)??"",examName:((X=t.state)==null?void 0:X.examName)??""})]})},ut=({examSubject:s})=>{const{t:a}=A(),[c,t]=i.useState(!0);return i.useEffect(()=>{s!=null&&s.length&&t(!1)},[s]),i.useEffect(()=>{var l;(l=document.getElementById("scrollViewSubject"))==null||l.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:v.with_search,id:"scrollViewSubject",children:e.jsx("h6",{children:a("exam_schedule")})}),e.jsx(G,{customStyle:{marginTop:"0.5rem",marginBottom:"0.6rem",width:"100%"}}),s==null?void 0:s.map(l=>{var n;return(n=l==null?void 0:l.subject)==null?void 0:n.map(N=>e.jsx(je,{classMaster:l==null?void 0:l.className,subject:N,customCardStyle:{width:"49.5%"}},N==null?void 0:N._id))}),c&&e.jsx(z,{})]})},Le=({instituteId:s,viewAs:a})=>{var p,u,_,g,h,w,j,d,S,C,P,D,I,B,L,J,k,$,X,O,y,R,U,K,ae,le;const{t:c}=A(),t=te(),[l,n]=i.useState(!0),[N,b]=i.useState(!1),{departmentExamDetail:r,departmentExamDetailRefetch:x}=Re({eid:(p=t.state)==null?void 0:p.examId,skip:!((u=t.state)!=null&&u.examId)}),{sendExamNotifyToSubject:f,sendExamNotifyToSubjectRefetch:m}=ns({eid:(_=t.state)==null?void 0:_.examId,skip:l});i.useEffect(()=>{var ne;(ne=t.state)!=null&&ne.examId&&x()},[(g=t.state)==null?void 0:g.examId,x]),i.useEffect(()=>{f!=null&&f.message&&f.message==="All designation of marks update is processing..."&&b(!1)},[f==null?void 0:f.message]);const o=()=>{b(ne=>!ne),n(!1),m()};return e.jsxs("div",{className:v.view_container,children:[(((h=t==null?void 0:t.search)==null?void 0:h.substring(3))==="exam&n=detail"||((w=t==null?void 0:t.search)==null?void 0:w.substring(3))==="department&n=exam&n=detail"||((j=t==null?void 0:t.search)==null?void 0:j.substring(3))==="backlog&exam&detail"||((d=t==null?void 0:t.search)==null?void 0:d.substring(3))==="department&n=backlog&exam&detail")&&e.jsxs(e.Fragment,{children:[e.jsx("h6",{className:v.exam_detail_h6,children:c("exam_detail")}),a==="DEPARTMENT_BACKLOG"&&((S=r==null?void 0:r.exam)==null?void 0:S.is_backlog_notify)==="Not Send"&&!(f!=null&&f.message)&&e.jsx("div",{style:{position:"relative"},children:e.jsx("button",{className:v.next_btn,onClick:o,style:{top:"-2rem",backgroundColor:"inherit"},title:"Send exam update notification",children:c("send_notification")})}),e.jsxs("section",{className:v.exam_info_container,children:[e.jsx(_e,{labelText:`${c("exam_name")}:`,value:((C=r==null?void 0:r.exam)==null?void 0:C.examName)??"",customStyleValue:{fontWeight:"500"}}),e.jsx(_e,{labelText:`${c("exam_type")}:`,value:((P=r==null?void 0:r.exam)==null?void 0:P.examType)??"",customStyleValue:{fontWeight:"500"}}),e.jsx(_e,{labelText:`${c("exam_mode")}:`,value:((D=r==null?void 0:r.exam)==null?void 0:D.examMode)??"",customStyleValue:{fontWeight:"500"}}),((I=r==null?void 0:r.exam)==null?void 0:I.examType)==="Other"&&e.jsx(_e,{labelText:`${c("exam_weight")}:`,value:`${((B=r==null?void 0:r.exam)==null?void 0:B.examWeight)??""}%`,customStyleValue:{fontWeight:"500"}})]}),e.jsxs("div",{className:v.exam_schedule,children:[e.jsx("h6",{children:c("exam_schedule")}),a==="EXAMINATION_SECTION"?e.jsx(he,{carryParentState:{...t.state,examName:(L=r==null?void 0:r.exam)==null?void 0:L.examName},activeTab:"department&n=backlog&exam&detail&subject",children:e.jsxs("button",{className:v.exam_schedule_btn,title:"See Exam Schedule",children:[e.jsx("div",{children:c("exam_schedule")}),e.jsx("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]})}):e.jsx(oe,{carryParentState:{...t.state,examName:(J=r==null?void 0:r.exam)==null?void 0:J.examName},activeTab:a==="DEPARTMENT_BACKLOG"?"backlog&exam&detail&subject":"exam&n=detail&subject",children:e.jsxs("button",{className:v.exam_schedule_btn,title:"See Exam Schedule",children:[e.jsx("div",{children:c("exam_schedule")}),e.jsx("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]})})]}),e.jsxs("div",{className:v.exam_schedule,children:[e.jsx("h6",{children:c("seating_arrangements")}),a==="EXAMINATION_SECTION"?e.jsx(he,{carryParentState:{...t.state,examName:(k=r==null?void 0:r.exam)==null?void 0:k.examName},activeTab:"department&n=exam&n=detail&seating",children:e.jsxs("button",{className:v.exam_schedule_btn,title:"See Seating Arrangements",children:[e.jsx("div",{children:c("seating_arrangements")}),e.jsx("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]})}):e.jsx(oe,{carryParentState:{...t.state,examName:($=r==null?void 0:r.exam)==null?void 0:$.examName},activeTab:a==="DEPARTMENT_BACKLOG"?"backlog&exam&detail&seating":"exam&n=detail&seating",children:e.jsxs("button",{className:v.exam_schedule_btn,title:"See Seating Arrangements",children:[e.jsx("div",{children:c("seating_arrangements")}),e.jsx("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]})})]})]}),(((X=t==null?void 0:t.search)==null?void 0:X.substring(3))==="exam&n=detail&seating"||((O=t==null?void 0:t.search)==null?void 0:O.substring(3))==="department&n=exam&n=detail&seating"||((y=t==null?void 0:t.search)==null?void 0:y.substring(3))==="backlog&exam&detail&seating"||((R=t==null?void 0:t.search)==null?void 0:R.substring(3))==="department&n=backlog&exam&detail&seating")&&e.jsx(jt,{instituteId:s,viewAs:"BACKLOG"}),(((U=t==null?void 0:t.search)==null?void 0:U.substring(3))==="exam&n=detail&subject"||((K=t==null?void 0:t.search)==null?void 0:K.substring(3))==="department&n=exam&n=detail&subject"||((ae=t==null?void 0:t.search)==null?void 0:ae.substring(3))==="backlog&exam&detail&subject"||((le=t==null?void 0:t.search)==null?void 0:le.substring(3))==="department&n=backlog&exam&detail&subject")&&e.jsx("section",{className:v.schedule_subject_container,children:e.jsx(ut,{examSubject:r==null?void 0:r.oneExamDetail})}),N&&e.jsx(se,{})]})},$e=["backlog&exam&detail","backlog&exam&detail&seating","backlog&exam&detail&subject","department&n=backlog&exam&detail","department&n=backlog&exam&detail&seating","department&n=backlog&exam&detail&subject"];function Qt({did:s,carryParentState:a,instituteId:c,viewAs:t}){var n,N,b,r,x,f,m,o,p,u,_,g;const l=te();return e.jsxs(e.Fragment,{children:[$e.includes((n=l==null?void 0:l.search)==null?void 0:n.substring(3))&&e.jsx(Le,{carryParentState:a,instituteId:c,viewAs:t}),!$e.includes((N=l==null?void 0:l.search)==null?void 0:N.substring(3))&&e.jsxs("div",{className:de.backlogContainer,children:[(((b=l.search)==null?void 0:b.substring(3))==="backlog&standard"||((r=l.search)==null?void 0:r.substring(3))==="backlog&fees"||((x=l.search)==null?void 0:x.substring(3))==="backlog&exam"||((f=l.search)==null?void 0:f.substring(3))==="department&n=backlog&standard"||((m=l.search)==null?void 0:m.substring(3))==="department&n=backlog&fees"||((o=l.search)==null?void 0:o.substring(3))==="department&n=backlog&exam")&&e.jsx("div",{className:de.backlog,children:e.jsx(it,{carryParentState:a,did:s,instituteId:c,viewAs:t})}),(((p=l.search)==null?void 0:p.substring(3))==="backlog&subject"||((u=l.search)==null?void 0:u.substring(3))==="department&n=backlog&subject")&&e.jsx("div",{className:de.backlog,children:e.jsx(ct,{carryParentState:a,viewAs:t})}),(((_=l.search)==null?void 0:_.substring(3))==="backlog&student"||((g=l.search)==null?void 0:g.substring(3))==="department&n=backlog&student")&&e.jsx("div",{className:`${de.backlog} ${de.students}`,children:e.jsx(et,{})})]})]})}function Ft({did:s,bid:a,carryParentState:c,instituteId:t,viewAs:l}){var j,d,S,C,P;const{t:n}=A(),N=te(),[b,r]=i.useState(!1),[x,f]=i.useState(!0),[m,o]=i.useState([]),[p,u]=i.useState(!1),{departmentAllExam:_,departmentAllExamRefetch:g}=is({data:{did:s,page:1,limit:20},skip:!s});i.useEffect(()=>{s&&g()},[s,g]),i.useEffect(()=>{var D,I;(D=_==null?void 0:_.exam)!=null&&D.length?(o(_==null?void 0:_.exam),f(!1)):((I=_==null?void 0:_.exam)==null?void 0:I.length)===0&&f(!1)},[_==null?void 0:_.exam]);const h=()=>{r(D=>!D)},w=D=>{var I;if(D.target.value){const B=(I=_==null?void 0:_.exam)==null?void 0:I.filter(L=>{var J,k,$;return($=(J=L==null?void 0:L.examName)==null?void 0:J.toLowerCase())!=null&&$.includes((k=D.target.value)==null?void 0:k.toLowerCase())?L:null});(B==null?void 0:B.length)===0?u(!0):u(!1),o(B)}else u(!1),o(_==null?void 0:_.exam)};return e.jsxs(e.Fragment,{children:[(((j=N==null?void 0:N.search)==null?void 0:j.substring(3))==="exam"||((d=N==null?void 0:N.search)==null?void 0:d.substring(3))==="department&n=exam")&&e.jsxs("div",{className:Y.exam_container,children:[e.jsxs("div",{className:Y.with_search,children:[e.jsx("h6",{children:n("previous_exam_list")}),e.jsx("section",{className:Y.search_container,children:e.jsxs("div",{className:Y.search_container_input,children:[e.jsx("img",{className:Y.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),e.jsx("input",{type:"text",placeholder:"Search exams...",onChange:w})]})})]}),e.jsx(G,{customStyle:{marginTop:"0.5rem",marginBottom:"0.6rem",width:"100%"}}),e.jsx("div",{className:Y.add_new_container,children:e.jsx("p",{className:Y.add_new_exam,onClick:h,children:n("create_new_exam")})}),m==null?void 0:m.map(D=>e.jsx(Ve,{exam:D,carryParentState:c,viewAs:l},D._id)),!x&&!((S=_==null?void 0:_.exam)!=null&&S.length)&&e.jsx(re,{customStyleContainer:{marginTop:"9rem"},title:"No any exams found",subtitle:"Please make sure you have created exam."}),p&&e.jsx(re,{customStyleContainer:{marginTop:"9rem"},title:"No any search found"}),x&&e.jsx(z,{})]}),(((C=N==null?void 0:N.search)==null?void 0:C.substring(3,16))==="exam&n=detail"||((P=N==null?void 0:N.search)==null?void 0:P.substring(3,29))==="department&n=exam&n=detail")&&e.jsx(Le,{carryParentState:c,instituteId:t,viewAs:l}),b&&e.jsx(Ae,{onClose:h,did:s,bid:a,onRefetch:g})]})}const pt=({feesInfo:s,onGrabInfo:a})=>{const{t:c}=A(),[t,l]=i.useState({feeName:"",feeAmount:"",feeDate:""}),[n,N]=i.useState("");i.useEffect(()=>{s&&l(m=>({...m,...s}))},[s]);const b=m=>{const o={};for(let p in m)m[p]||(o[p]=`${p} is required!`);return o},r=m=>{m.target.name==="feeAmount"?l(o=>({...o,feeAmount:+m.target.value})):l(o=>({...o,[m.target.name]:m.target.value}))},x=m=>{if(!hs(m)){let p=m==null?void 0:m.split("/"),u=`${p[2]}-${p[1]}-${p[0]}`;l(_=>({..._,feeDate:u}))}},f=()=>{const m=b(t);let o=!1;for(let p in m)if(p){o=!0;break}o?N(m):a(t)};return e.jsxs("div",{className:v.seating_modal,style:{minHeight:"23rem"},children:[e.jsxs("section",{className:v.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("h6",{children:c("create_fees")}),e.jsx("button",{className:v.next_btn,title:"Next",onClick:f,children:c("next")})]}),e.jsx(G,{customStyle:{width:"100%",marginTop:"0.5rem"}}),e.jsx(Q,{labelText:c("department_fees_name"),placeholder:c("enter_fee_purpose"),name:"feeName",value:t.feeName,type:"text",onChange:r,errorShow:n.feeName}),e.jsx(Q,{labelText:c("amount"),placeholder:c("enter_fees_amount"),name:"feeAmount",value:t.feeAmount,type:"number",onChange:r,errorShow:n.feeAmount}),e.jsx(Be,{labelText:c("due_date"),placeholder:c("enter_fees_date"),name:"feeDate",value:t.feeDate,onDateFunction:x,customStyleContainer:{position:"relative",width:"100%"},datePickerPosition:{top:"-13rem",left:"2rem"},errorShow:n.feeDate})]})},Nt=({cls:s,classMaster:a,onSelect:c,divisionId:t})=>e.jsxs("div",{className:t!=null&&t.includes(s==null?void 0:s._id)?`${v.class_container} ${v.class_container_active}`:v.class_container,title:"Select class",onClick:()=>c(s==null?void 0:s._id),style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"1rem"},children:[e.jsx("img",{src:"/images/master-24-grey-icon.svg",alt:"classes icon"}),e.jsxs("h6",{children:[a??""," - ",(s==null?void 0:s.classTitle)??""]})]}),St=({onBack:s,bid:a,did:c,createFees:t,onResetAfterCreate:l})=>{const{t:n}=A(),[N,b]=i.useState(!0),[r,x]=i.useState(!1),[f,m]=i.useState([]),[o,p]=i.useState([]),[u]=cs(),{departmentAllClassMaster:_,departmentAllClassMasterRefetch:g}=os({data:{did:c,bid:a,page:1,limit:50},skip:!a||!c});i.useEffect(()=>{a&&c&&g()},[a,c,g]),i.useEffect(()=>{var j,d;(j=_==null?void 0:_.classMaster)!=null&&j.length?(m(_==null?void 0:_.classMaster),b(!1)):((d=_==null?void 0:_.classMaster)==null?void 0:d.length)===0&&b(!1)},[_==null?void 0:_.classMaster]);const h=()=>{o!=null&&o.length&&(x(j=>!j),u({did:c,fees:{...t,ClassId:o}}).then(()=>{l(),x(j=>!j)}).catch(()=>{x(j=>!j)}))},w=j=>{o!=null&&o.includes(j)?p(d=>d==null?void 0:d.filter(S=>S!==j)):p(d=>[...d,j])};return e.jsxs("div",{className:v.seating_modal,children:[e.jsxs("section",{className:v.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:s,alt:"back"}),e.jsx("h6",{children:n("select_classes")}),e.jsx("button",{className:v.next_btn,title:"Save fees",onClick:h,children:n("save")})]}),e.jsx(G,{customStyle:{width:"100%",marginTop:"0.5rem",marginBottom:"0.5rem"}}),f==null?void 0:f.map(j=>{var d;return(d=j==null?void 0:j.classDivision)==null?void 0:d.map(S=>e.jsx(Nt,{cls:S,isMaster:!0,onSelect:w,classMaster:j==null?void 0:j.className,divisionId:o},S._id))}),!N&&!(f!=null&&f.length)&&e.jsx(re,{customStyleContainer:{marginTop:"4rem"},title:"No any class found",subtitle:"Please make sure you have created class."}),N&&e.jsx(z,{}),r&&e.jsx(se,{})]})};function bt({did:s,bid:a,onRefetch:c,onClose:t}){const[l,n]=i.useState("FEES_INFO"),[N,b]=i.useState({feeName:"",feeAmount:"",feeDate:""}),r=f=>{b(m=>({...m,...f})),n("SELECT_DIVISION")},x=()=>{c(),t(),b({feeName:"",feeAmount:"",feeDate:""}),n("FEES_INFO")};return e.jsxs(ie,{onClose:t,children:[l==="FEES_INFO"&&e.jsx(pt,{onClose:t,onGrabInfo:r,feesInfo:{feeName:N.feeName,feeAmount:N.feeAmount,feeDate:N.feeDate}}),l==="SELECT_DIVISION"&&e.jsx(St,{onBack:()=>n("EXAM_INFO"),did:s,bid:a,createFees:N,onResetAfterCreate:x})]})}const kt=({onClose:s,did:a,onRefetch:c,openFeesMenu:t})=>{const{t:l}=A(),[n,N]=i.useState(!1),[b,r]=i.useState(!1),[x]=_s(),[f]=fs(),[m,o]=i.useState({feeName:(t==null?void 0:t.feeName)??"",feeDate:(t==null?void 0:t.feeDate)??""}),[p,u]=i.useState(""),_=()=>{N(d=>!d),x({did:a,fid:t==null?void 0:t._id}).then(()=>{c(),s(),N(d=>!d)}).catch({})},g=d=>{let S=d==null?void 0:d.split("/"),C=`${S[2]}-${S[1]}-${S[0]}`;o(P=>({...P,feeDate:C}))},h=d=>{o(S=>({...S,feeName:d.target.value}))},w=d=>{const S={};for(let C in d)d[C]||(S[C]=` ${C} is required!`);return S},j=()=>{const d=w(m);let S=!1;for(let C in d)if(C){S=!0;break}S?u(d):(N(C=>!C),r(!1),f({fid:t==null?void 0:t._id,updateFees:m}).then(()=>{c(),N(C=>!C),s()}).catch({}))};return e.jsx(e.Fragment,{children:b?e.jsxs(e.Fragment,{children:[e.jsx(ue,{onClose:()=>r(!1)}),e.jsx(pe,{customStyle:{zIndex:"1200"},children:e.jsxs("div",{className:H.edit_modal_container,style:{width:"30rem",minHeight:"10rem",height:"auto"},children:[e.jsx("h6",{className:H.edit,onClick:()=>r(d=>!d),children:l("update_fees")}),e.jsx(G,{customStyle:{width:"100%",marginTop:"0.5rem"}}),e.jsx(Q,{labelText:l("fees_name_edit"),placeholder:l("fees_name_placeholder"),name:"feeName",value:m.feeName,type:"text",errorShow:p.feeName,onChange:h,customStyleContainer:{width:"100%"}}),e.jsx(Be,{labelText:l("select_fees_date"),placeholder:l("select_fees_date_placeholder"),name:"feeDate",value:m.feeDate,onDateFunction:g,errorShow:p.feeDate,customStyleContainer:{position:"relative",width:"100%"},datePickerPosition:{top:"-1rem"}}),e.jsx("button",{className:H.xlsx_update_btn,title:"Update",onClick:j,style:{justifyContent:"center",marginTop:"1rem"},children:l("update")})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{onClose:s}),e.jsxs(pe,{customStyle:{zIndex:"1200"},children:[e.jsxs("div",{className:H.edit_modal_container,style:{width:"200px"},children:[e.jsx("h6",{className:H.edit,onClick:()=>r(d=>!d),children:"Edit"}),e.jsx("h6",{className:H.remove,onClick:_,children:"Delete"})]}),n&&e.jsx(se,{})]})]})})},vt="_exam_card_container_1soha_1",wt="_exam_active_card_1soha_22",yt="_exam_inner_text_1soha_26",Tt="_menu_icon_1soha_57",Ct="_fees_image_1soha_64",fe={exam_card_container:vt,exam_active_card:wt,exam_inner_text:yt,menu_icon:Tt,fees_image:Ct},It=({fees:s,onRefetch:a,did:c})=>{const[t,l]=i.useState("");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:fe.exam_card_container,children:[e.jsx("img",{src:"/images/members/fees-icon.svg",alt:"fees icon",className:fe.fees_image}),e.jsxs("div",{className:fe.exam_inner_text,children:[e.jsxs("h6",{children:["Rs. ",(s==null?void 0:s.feeAmount)??0,"/-"]}),e.jsxs("p",{children:[(s==null?void 0:s.feeName)??""," "]})]}),e.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:()=>l(s),className:fe.menu_icon,title:"Menu"})]}),t&&e.jsx(kt,{did:c,onRefetch:a,openFeesMenu:t,onClose:()=>l("")})]})};function Mt({did:s,bid:a}){var _,g,h;const{t:c}=A(),[t,l]=i.useState(!1),[n,N]=i.useState(!0),[b,r]=i.useState([]),[x,f]=i.useState(!1),{departmentAllFees:m,departmentAllFeesRefetch:o}=rs({data:{did:s,page:1,limit:20},skip:!s});i.useEffect(()=>{s&&o()},[s,o]),i.useEffect(()=>{var w,j,d,S,C;(j=(w=m==null?void 0:m.depart)==null?void 0:w.fees)!=null&&j.length?(r((d=m==null?void 0:m.depart)==null?void 0:d.fees),N(!1)):((C=(S=m==null?void 0:m.depart)==null?void 0:S.fees)==null?void 0:C.length)===0&&N(!1)},[(_=m==null?void 0:m.depart)==null?void 0:_.fees]);const p=()=>{l(w=>!w)},u=w=>{var j,d,S;if(w.target.value){const C=(d=(j=m==null?void 0:m.depart)==null?void 0:j.fees)==null?void 0:d.filter(P=>{var D,I,B;return(B=(D=P==null?void 0:P.feeName)==null?void 0:D.toLowerCase())!=null&&B.includes((I=w.target.value)==null?void 0:I.toLowerCase())?P:null});(C==null?void 0:C.length)===0?f(!0):f(!1),r(C)}else f(!1),r((S=m==null?void 0:m.depart)==null?void 0:S.fees)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:Y.exam_container,children:[e.jsxs("div",{className:Y.with_search,children:[e.jsx("h6",{children:c("previous_fees_list")}),e.jsx("section",{className:Y.search_container,children:e.jsxs("div",{className:Y.search_container_input,children:[e.jsx("img",{className:Y.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),e.jsx("input",{type:"text",placeholder:"Search fees...",onChange:u})]})})]}),e.jsx(G,{customStyle:{marginTop:"0.5rem",marginBottom:"0.6rem",width:"100%"}}),e.jsx("div",{className:Y.add_new_container,children:e.jsx("p",{className:Y.add_new_exam,onClick:p,children:c("create_new_fees")})}),b==null?void 0:b.map(w=>e.jsx(It,{fees:w,onRefetch:o,did:s},w._id)),!n&&!((h=(g=m==null?void 0:m.depart)==null?void 0:g.fees)!=null&&h.length)&&e.jsx(re,{customStyleContainer:{marginTop:"9rem"},title:"No any fees found",subtitle:"Please make sure you have created fees."}),x&&e.jsx(re,{customStyleContainer:{marginTop:"9rem"},title:"No any search found"}),n&&e.jsx(z,{})]}),t&&e.jsx(bt,{did:s,bid:a,onRefetch:o,onClose:p})]})}export{Qt as B,Ft as E,Nt as F,Mt as a,he as b};
