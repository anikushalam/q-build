import{u as dn,r as t,t as ye,j as i,S as Qe,bo as Be,Q as pn,n as He,lq as qe,lr as Oe,D as Me,N as Yi,aL as ue,k as no,m0 as io,R as lo,a1 as Hi,d as eo,lw as oo}from"./index-731451a5.js";import{an as co,aD as po,aE as to,g as $e,F as Xi,aa as ro,a2 as Le}from"./admission-api-56b87fde.js";import{V as fo}from"./ViewFileDialog-0c131c06.js";import{B as We}from"./BorderBottom-47800983.js";import{P as rn}from"./PopupWrapper-ffbaef7a.js";import{D as Ee}from"./DocumentCard-077d87d5.js";import{l as Zi,j as Ve}from"./finance-api-5c6c5671.js";import{U as qi,D as Oi,N as Mi,C as $i,s as p,S as _o,P as ho}from"./DemandProcess-df635659.js";import{A as Li}from"./ApplicationPreviewDetail-fd29a331.js";import{S as ao}from"./SelectFeeStructure-05d0a31f.js";import{s as Gi}from"./FeesStructure.module-7a88fbbc.js";import{J as Ki}from"./JoinFormInput-8e74a0e0.js";import{P as Fe,p as zi}from"./PaymentGatewayConfig-78c07c77.js";import{C as Ye}from"./CashProcess-d4947217.js";import{n as Ge,i as xo}from"./hostel-api-4d11cb04.js";import{A as ze}from"./AdmissionApplicationDetail-39b2aa3d.js";import{g as Ji}from"./paytmUpiInitiative-bed1cea7.js";import{S as Je}from"./Switch-81e70f2f.js";import{h as Xe,a as Ze}from"./pdf-convertor-function-e794de58.js";import{r as Ke}from"./main.receipt.pdf.worker-5753b302.js";import{S as jo}from"./SelectHostelFeeStrucutre-6ca88b34.js";import{S as mo}from"./StudentMemberConfig-a9c9556b.js";import"./Overlay-07ce6f88.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalBackdrop-5b309d60.js";import"./SearchHeader.module-b69c8942.js";import"./SearchModalWrapper-6e85c9f3.js";import"./JoinFormFileView-d3f85876.js";import"./JoinForm.module-212f9bb3.js";import"./JoinFormInputView-879755fe.js";import"./JoinFormCalender-5158d888.js";import"./DatePicker-305f3dc6.js";import"./JoinFormFile-110be590.js";import"./EditConfirm.module-344fbdb9.js";import"./CustomNormalSelectInput-9ec7329b.js";import"./StringLength.module-75a6e080.js";import"./SeatingArrangement.module-3f4ae6aa.js";import"./CustomSelectDepartment-a5dd9a35.js";import"./transport-api-9ab21e71.js";import"./LoaderButton-71df50a7.js";import"./AdmissionApplicationCalender-28d9a66e.js";import"./Attendence.module-a5391855.js";import"./SwitchBase-2ba5f868.js";import"./numberToWords.min-dbca819b.js";const so="_applicationStatus_5v7qk_1",So="_item_5v7qk_17",vo="_timeDate_5v7qk_37",Io="_itemrow_5v7qk_42",wo="_itembtn_5v7qk_48",Ao="_red_5v7qk_66",bo="_blue_5v7qk_70",No="_status_institute_name_5v7qk_74",ko="_online_payment_note_5v7qk_82",Co="_requested_btn_5v7qk_90",To="_rejected_btn_5v7qk_108",Ro="_view_receipt_btn_5v7qk_126",Po="_bullet_mark_5v7qk_143",v={applicationStatus:so,item:So,timeDate:vo,itemrow:Io,itembtn:wo,red:Ao,blue:bo,status_institute_name:No,online_payment_note:ko,requested_btn:Co,rejected_btn:To,view_receipt_btn:Ro,bullet_mark:Po},Eo="_document_preview_1o0ds_1",Do="_card_title_1o0ds_10",De={document_preview:Eo,card_title:Do},gi=({admissionId:l,onClose:h})=>{const{t:n}=dn(),[j,m]=t.useState(!1),[o,_]=ye(),[r,c]=t.useState(1),[f,S]=t.useState(!0),[b,I]=t.useState(!0),[A,C]=t.useState([]),{getDocumentByAdmission:a,getDocumentByAdmissionRefetch:e}=co({data:{aid:l,page:r,limit:10},skip:!l});t.useEffect(()=>{l&&(I(!0),e())},[l,r,e]),t.useEffect(()=>{_&&f&&c(x=>x+1)},[_,f]),t.useEffect(()=>{var x,N;a!=null&&a.all_docs?(C(R=>[...new Set([...R,...a==null?void 0:a.all_docs].map(JSON.stringify))].map(JSON.parse)),I(!1)):((x=a==null?void 0:a.all_docs)==null?void 0:x.length)===0&&I(!1),((N=a==null?void 0:a.all_docs)==null?void 0:N.length)===10?S(!0):S(!1)},[a==null?void 0:a.all_docs]);const d=x=>{m(x)},s=()=>{m("")};return i.jsx(i.Fragment,{children:j?i.jsx(fo,{onClose:s,keyValue:j}):i.jsx(rn,{onClose:h,children:i.jsxs("div",{className:De.document_preview,children:[i.jsx("h6",{className:De.card_title,children:n("required_documents")}),i.jsx(We,{customStyle:{width:"100%",marginBottom:"0.5rem"}}),A==null?void 0:A.map((x,N)=>(A==null?void 0:A.length)===N+1?i.jsx("div",{ref:o,children:i.jsx(Ee,{document:x,viewAs:"APPLICATION_STATUS",onOpenFileView:d})},x==null?void 0:x._id):i.jsx(Ee,{document:x,viewAs:"APPLICATION_STATUS",onOpenFileView:d},x==null?void 0:x._id)),b&&i.jsx(Qe,{})]})})})},Uo=({message:l})=>{var C,a,e,d,s,x,N,R,D,E,M,K,B,P,$,U,z,g,y;const[h,n]=t.useState(""),[j,m]=t.useState(""),[o,_]=t.useState(!1),[r,c]=t.useState(""),{getBankByFinance:f,getBankByFinanceRefetch:S}=Zi({data:{fid:l==null?void 0:l.finance,flow:"",filter_by:""},skip:!(l!=null&&l.finance)});t.useEffect(()=>{l!=null&&l.finance&&S()},[l==null?void 0:l.finance,S]);const b=()=>{_(W=>!W)},I=W=>{c(W),b()},A=()=>{c(""),b()};return i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:["Your application for"," ",i.jsxs("span",{style:{fontWeight:"500"},children:[((C=l==null?void 0:l.applicationId)==null?void 0:C.applicationName)??""," "]}),"have been filled successfully."]}),(d=(e=(a=l==null?void 0:l.student)==null?void 0:a.application_print)==null?void 0:e[0])!=null&&d.value?i.jsx("p",{style:{fontWeight:"500"},children:i.jsx("a",{href:`${Be}/${(N=(x=(s=l==null?void 0:l.student)==null?void 0:s.application_print)==null?void 0:x[0])==null?void 0:N.value}`,title:"Download Admission Application File",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:"Download Admission Application Form"})}):"",i.jsx("p",{style:{fontWeight:"500"},children:"Below is the admission process:"}),i.jsx("p",{children:"1. You will get notified here after your selection or rejection from the institute. ( In case there is no notification within 3 working days, visit or contact the admission department)"}),i.jsx("p",{children:"2. After selection, confirm from your side and start the admission process."}),i.jsxs("p",{children:["3. After confirmation from your side, visit the institute with the required documents and applicable fees. (You will get Required documents and application fees information on your selection from the institute side. (Till then check our standard"," ",i.jsx("span",{style:{color:"#002BBE",cursor:"pointer"},title:"View Document Preview",onClick:()=>{var W;return n(((W=l==null?void 0:l.applicationId)==null?void 0:W.admissionAdmin)??"")},children:"Required documents"})," ","and"," ",i.jsx("span",{style:{color:"#002BBE",cursor:"pointer"},onClick:b,children:"Fee structures"})," ",")"]}),i.jsx("p",{style:{marginBottom:"0.5rem",fontWeight:"500"},children:"4. Payment modes available for fee payment:"}),i.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex"},children:[i.jsx("div",{className:v.bullet_mark}),"Online: UPI, Debit Card, Credit Card, Net banking & other payment apps (Phonepe, Google pay, Paytm)"]}),((R=f==null?void 0:f.bank_query)==null?void 0:R.cash)&&i.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex"},children:[i.jsx("div",{className:v.bullet_mark}),"Cash"]}),((D=f==null?void 0:f.bank_query)==null?void 0:D.upi_transfer)&&i.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex"},children:[i.jsx("div",{className:v.bullet_mark}),"UPI Transfer ("," ",i.jsxs("span",{style:{color:"#002BBE",cursor:"pointer"},onClick:()=>m("UPI"),children:[" ","Bank Details"]}),")"]}),((E=f==null?void 0:f.bank_query)==null?void 0:E.demand_draft)&&i.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex"},children:[i.jsx("div",{className:v.bullet_mark}),"Demand Draft ("," ",i.jsxs("span",{style:{color:"#002BBE",cursor:"pointer"},onClick:()=>m("DEMAND"),children:[" ","Bank Details"]}),")"]}),((M=f==null?void 0:f.bank_query)==null?void 0:M.net_banking)&&i.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex"},children:[i.jsx("div",{className:v.bullet_mark}),"NEFT/RTGS/IMPS ("," ",i.jsxs("span",{style:{color:"#002BBE",cursor:"pointer"},onClick:()=>m("RTG"),children:[" ","Bank Details"]}),")"]}),((K=f==null?void 0:f.bank_query)==null?void 0:K.cheque)&&i.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex"},children:[i.jsx("div",{className:v.bullet_mark}),"Cheque ("," ",i.jsxs("span",{style:{color:"#002BBE",cursor:"pointer"},onClick:()=>m("CHEQUE"),children:[" ","Bank Details"]}),")"]}),i.jsxs("p",{style:{marginTop:"0.9rem"},children:["5. After submission and verification of documents, you are required to pay application admission fees."," "]}),i.jsx("p",{children:"6. Pay application admission fees and your admission will be confirmed and complete."}),i.jsx("p",{children:"7. For cancellation and refund, contact the admission department."}),i.jsx("p",{style:{fontWeight:"500"},children:"Note: Stay tuned for further updates."}),h&&i.jsx(gi,{admissionId:h,onClose:()=>n("")}),j&&i.jsx(rn,{onClose:()=>m(""),children:j==="UPI"?i.jsx(qi,{financeId:l==null?void 0:l.finance,flowAs:"Department",departmentId:((B=l==null?void 0:l.applicationId)==null?void 0:B.applicationDepartment)??"",viewAs:"APPLICATION_STATUS",setIndex:()=>m("")}):j==="DEMAND"?i.jsx(Oi,{financeId:l==null?void 0:l.finance,flowAs:"Department",departmentId:((P=l==null?void 0:l.applicationId)==null?void 0:P.applicationDepartment)??"",viewAs:"APPLICATION_STATUS",setIndex:()=>m("")}):j==="RTG"?i.jsx(Mi,{financeId:l==null?void 0:l.finance,flowAs:"Department",departmentId:(($=l==null?void 0:l.applicationId)==null?void 0:$.applicationDepartment)??"",viewAs:"APPLICATION_STATUS",setIndex:()=>m("")}):j==="CHEQUE"?i.jsx($i,{financeId:l==null?void 0:l.finance,flowAs:"Department",departmentId:((U=l==null?void 0:l.applicationId)==null?void 0:U.applicationDepartment)??"",viewAs:"APPLICATION_STATUS",setIndex:()=>m("")}):""}),o&&i.jsx(ao,{onClose:b,departmentId:((z=l==null?void 0:l.applicationId)==null?void 0:z.applicationDepartment)??"",classMasterId:((g=l==null?void 0:l.applicationId)==null?void 0:g.applicationMaster)??"",batchId:((y=l==null?void 0:l.applicationId)==null?void 0:y.applicationBatch)??"",onSelectedStrucutre:I,asOpen:"STUDENT_VIEW_STRUCTURE"}),r&&i.jsx(Li,{structureId:r,setStructureId:A,viewAs:"STUDENT"})]})},Bo=({actionStep:l,applicationId:h,statusId:n,onClose:j,studentId:m,onRefetchApplication:o})=>{const{t:_}=dn(),[r,c]=t.useState(!1),[f,S]=t.useState(!1),[b,I]=t.useState(""),[A]=po(),C=()=>{m&&n&&h&&l&&(l!=="CONFIRM_QUERY"?b==="Confirm"?(c(!0),A({sid:m,aid:h,stId:n,flow:l}).then(()=>{o(),c(!1),j()}).catch({})):S(!0):(c(!0),A({sid:m,aid:h,stId:n,flow:l}).then(()=>{o(),c(!1),j()}).catch({})))};return i.jsx(rn,{onClose:j,children:i.jsxs("div",{className:Gi.add_category_modal,style:{width:"30rem",minHeight:"10rem",height:"fit-content"},children:[i.jsxs("section",{className:Gi.fee_middle_section_container,style:{marginBottom:"1.2rem"},children:[i.jsx("h6",{style:{fontSize:"20px",fontWeight:"600"},children:_(l==="CONFIRM_QUERY"?"confirm_document_verification":"cancel_document_verification")}),i.jsx(We,{customStyle:{width:"100%",marginTop:"0.7rem"}}),l!=="CONFIRM_QUERY"&&i.jsx(Ki,{labelText:_("type_confirm_to_continue"),placeholder:_("type_confirm_to_continue"),name:"verification",value:b,type:"text",onChange:a=>I(a.target.value),errorShow:f}),i.jsx("button",{onClick:C,className:Gi.fee_middle_confirm_button,style:{marginTop:"4rem"},children:_("confirm")})]}),r&&i.jsx(pn,{})]})})},Ho=({message:l,onRefetchApplication:h})=>{var c,f;const[n,j]=t.useState(""),[m,o]=t.useState(""),[_,r]=t.useState("");return i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:["You have been selected for"," ",i.jsxs("span",{style:{fontWeight:"500"},children:[((c=l==null?void 0:l.applicationId)==null?void 0:c.applicationName)??"","."]})]}),i.jsxs("p",{children:["Your fee structure is (",i.jsx("span",{style:{color:"#002BBE",cursor:"pointer"},title:"View fees structure",onClick:()=>{var S;return o(((S=l==null?void 0:l.feeStructure)==null?void 0:S._id)??"")},children:"click here to view structure"})," ","). And required documents are ("," ",i.jsxs("span",{style:{color:"#002BBE",cursor:"pointer"},title:"View Document Preview",onClick:()=>{var S;return j(((S=l==null?void 0:l.applicationId)==null?void 0:S.admissionAdmin)??"")},children:[" ","click here for Documents"," "]}),")."]}),i.jsx("p",{children:"Start your admission process by confirming below."}),l!=null&&l.docs_status?"":i.jsxs("div",{className:v.itemrow,children:[i.jsx("div",{className:`${v.itembtn} ${v.red}`,onClick:()=>r("CANCEL_QUERY"),children:"Cancel"}),i.jsx("div",{className:`${v.itembtn} ${v.blue}`,onClick:()=>r("CONFIRM_QUERY"),children:"Confirm"})]}),n&&i.jsx(gi,{admissionId:n,onClose:()=>j("")}),m&&i.jsx(Li,{structureId:m,setStructureId:o,viewAs:"HOSTEL_SEARCH"}),_&&i.jsx(Bo,{onClose:()=>r(""),actionStep:_,applicationId:(f=l==null?void 0:l.applicationId)==null?void 0:f._id,statusId:l==null?void 0:l._id,studentId:l==null?void 0:l.studentId,onRefetchApplication:h})]})},qo=({message:l})=>{var f,S,b,I,A,C,a,e,d,s,x,N;const[h,n]=t.useState(""),[j,m]=t.useState(""),[o,_]=t.useState(""),{getBankByFinance:r,getBankByFinanceRefetch:c}=Zi({data:{fid:l==null?void 0:l.finance,flow:"",filter_by:""},skip:!(l!=null&&l.finance)});return t.useEffect(()=>{l!=null&&l.finance&&c()},[l==null?void 0:l.finance,c]),i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:["Your admission process has been started",i.jsxs("span",{style:{fontWeight:"500"},children:[` ${((f=l==null?void 0:l.applicationId)==null?void 0:f.applicationName)??""}`,"."]})]}),i.jsxs("p",{children:["Visit"," ",i.jsx("span",{style:{fontWeight:"500"},children:(S=l==null?void 0:l.instituteId)==null?void 0:S.insName})," ","with required documents (",i.jsx("span",{style:{color:"#002BBE",cursor:"pointer"},title:"View Document Preview",onClick:()=>{var R;return n(((R=l==null?void 0:l.applicationId)==null?void 0:R.admissionAdmin)??"")},children:"Click to view Documents"})," ",") and applicable fees"," ",i.jsxs("span",{style:{fontWeight:"500"},children:["Rs.",((b=l==null?void 0:l.feeStructure)==null?void 0:b.applicable_fees)??0," ("," "]}),i.jsx("span",{style:{color:"#002BBE",cursor:"pointer"},title:"View fees structure",onClick:()=>{var R;return m(((R=l==null?void 0:l.feeStructure)==null?void 0:R._id)??"")},children:"Click to view in detail"})," ",")."]}),i.jsx("p",{style:{fontWeight:"500",marginBottom:"0.5rem"},children:"Payment modes available:"}),i.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex"},children:[i.jsx("div",{className:v.bullet_mark}),"Online: UPI, Debit Card, Credit Card, Net banking & other payment apps (Phonepe, Google pay, Paytm)"]}),((I=r==null?void 0:r.bank_query)==null?void 0:I.cash)&&i.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex"},children:[i.jsx("div",{className:v.bullet_mark}),"Cash"]}),((A=r==null?void 0:r.bank_query)==null?void 0:A.upi_transfer)&&i.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex"},children:[i.jsx("div",{className:v.bullet_mark}),"UPI Transfer ("," ",i.jsxs("span",{style:{color:"#002BBE",cursor:"pointer"},onClick:()=>_("UPI"),children:[" ","Bank Details"]}),")"]}),((C=r==null?void 0:r.bank_query)==null?void 0:C.demand_draft)&&i.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex"},children:[i.jsx("div",{className:v.bullet_mark}),"Demand Draft ("," ",i.jsxs("span",{style:{color:"#002BBE",cursor:"pointer"},onClick:()=>_("DEMAND"),children:[" ","Bank Details"]}),")"]}),((a=r==null?void 0:r.bank_query)==null?void 0:a.net_banking)&&i.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex"},children:[i.jsx("div",{className:v.bullet_mark}),"NEFT/RTGS/IMPS ("," ",i.jsxs("span",{style:{color:"#002BBE",cursor:"pointer"},onClick:()=>_("RTG"),children:[" ","Bank Details"]}),")"]}),((e=r==null?void 0:r.bank_query)==null?void 0:e.cheque)&&i.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex"},children:[i.jsx("div",{className:v.bullet_mark}),"Cheque ("," ",i.jsxs("span",{style:{color:"#002BBE",cursor:"pointer"},onClick:()=>_("CHEQUE"),children:[" ","Bank Details"]}),")"]}),h&&i.jsx(gi,{admissionId:h,onClose:()=>n("")}),j&&i.jsx(Li,{structureId:j,setStructureId:m,viewAs:"HOSTEL_SEARCH"}),o&&i.jsx(rn,{onClose:()=>_(""),children:o==="UPI"?i.jsx(qi,{financeId:l==null?void 0:l.finance,flowAs:"Department",departmentId:((d=l==null?void 0:l.applicationId)==null?void 0:d.applicationDepartment)??"",viewAs:"APPLICATION_STATUS",setIndex:()=>_("")}):o==="DEMAND"?i.jsx(Oi,{financeId:l==null?void 0:l.finance,flowAs:"Department",departmentId:((s=l==null?void 0:l.applicationId)==null?void 0:s.applicationDepartment)??"",viewAs:"APPLICATION_STATUS",setIndex:()=>_("")}):o==="RTG"?i.jsx(Mi,{financeId:l==null?void 0:l.finance,flowAs:"Department",departmentId:((x=l==null?void 0:l.applicationId)==null?void 0:x.applicationDepartment)??"",viewAs:"APPLICATION_STATUS",setIndex:()=>_("")}):o==="CHEQUE"?i.jsx($i,{financeId:l==null?void 0:l.finance,flowAs:"Department",departmentId:((N=l==null?void 0:l.applicationId)==null?void 0:N.applicationDepartment)??"",viewAs:"APPLICATION_STATUS",setIndex:()=>_("")}):""})]})},Oo={inputProps:{"aria-label":"Switch demo"}};function Mo({addDisplay:l,hideModal:h,statusQuery:n,onRefetchApplication:j,isFeesEditable:m}){var nn,ln,en,Q,fn,_n,hn,an,xn,jn,mn,sn,Sn,vn,In,wn,An,bn,Nn,kn,Cn,Tn,Rn,Pn,En,Dn,Un,Bn,Hn,qn,On,Mn,$n,Ln,Wn,Vn,Fn,Yn,Gn,zn,Jn,Xn,Zn,Kn,gn,yn,Qn,un,ni,ii,li,ei,oi,ci,di,pi,ti,ri,fi,_i,hi,ai,xi,ji,mi,si,Si,vi,Ii,wi,Ai,bi,Ni,ki,T,q,V,Wi,Vi,Z,Ci,Ti,H,on,cn,Ri,Pi,Ei,ui,nl,il,ll,el,ol,cl,dl,pl,tl,rl,fl,_l,hl,al,xl,jl,ml,sl,Sl,vl,Il,wl,Al,bl,Nl,kl,Cl,Tl,Rl,Pl,El,Dl,Ul,Bl,Hl,ql,Ol,Ml,$l,Ll,Wl,Vl,Fl,Yl,Gl,zl,Jl,Xl,Zl,Kl,gl,yl,Ql,ul,ne,ie,le,ee,oe,ce,de,pe,te,re,fe,_e,he,ae,xe,je,me,se,Se,ve,Ie,we;const{t:o}=dn(),_=He(),[r,c]=t.useState(!1),[f,S]=t.useState(0),[b,I]=t.useState(""),[A,C]=t.useState(!1),[a,e]=t.useState(!1),[d,s]=t.useState({amount:0,feesId:"",insId:"",type:"",installmentType:""}),[x,N]=t.useState({msg:"",run:!1}),[R,D]=t.useState({fee_payment_mode:"",fee_payment_amount:"",transaction_date:"",fee_bank_name:"",fee_bank_holder:"",fee_utr_reference:"",fee_payment_acknowledge:""}),{data:E}=qe(),[M]=Oe(),[K]=to(),[B]=Ge(),{oneApplicationDetail:P,oneApplicationDetailRefetch:$}=$e({apid:(nn=n==null?void 0:n.applicationId)==null?void 0:nn._id,skip:!((ln=n==null?void 0:n.applicationId)!=null&&ln._id)}),{merchantId:U,merchantIdRefetch:z}=Ve({id:(fn=(Q=(en=P==null?void 0:P.oneApply)==null?void 0:en.admissionAdmin)==null?void 0:Q.institute)==null?void 0:fn._id,skip:!((an=(hn=(_n=P==null?void 0:P.oneApply)==null?void 0:_n.admissionAdmin)==null?void 0:hn.institute)!=null&&an._id)});t.useEffect(()=>{var w;(w=n==null?void 0:n.applicationId)!=null&&w._id&&$()},[(xn=n==null?void 0:n.applicationId)==null?void 0:xn._id,$]),t.useEffect(()=>{var w,O,L;(L=(O=(w=P==null?void 0:P.oneApply)==null?void 0:w.admissionAdmin)==null?void 0:O.institute)!=null&&L._id&&z()},[(sn=(mn=(jn=P==null?void 0:P.oneApply)==null?void 0:jn.admissionAdmin)==null?void 0:mn.institute)==null?void 0:sn._id,z]),t.useEffect(()=>{s(w=>{var O;return{...w,amount:(O=n==null?void 0:n.feeStructure)==null?void 0:O.applicable_fees}})},[(Sn=n==null?void 0:n.feeStructure)==null?void 0:Sn.applicable_fees]);const g=()=>{s(w=>{var O,L;return{...w,amount:(L=(O=n==null?void 0:n.feeStructure)==null?void 0:O.one_installments)==null?void 0:L.fees}}),c(w=>!w)},y=w=>{s(O=>({...O,amount:w.target.value}))},W=()=>{var w;I((w=n==null?void 0:n.applicationId)==null?void 0:w._id)},J=()=>{I("")},X=()=>{var O;e(!0);var w={sid:n==null?void 0:n.studentId,aid:(O=n==null?void 0:n.applicationId)==null?void 0:O._id,statusId:n==null?void 0:n._id,confirmPayload:f!==2?R:{fee_payment_mode:"By Cash"}};(w==null?void 0:w.sid)!==""&&(w==null?void 0:w.aid)!==""&&(w==null?void 0:w.statusId)!==""&&((n==null?void 0:n.flow_status)==="Hostel Application"?B(w).then(L=>{L.data.status&&(j(),e(!1),h(!1))}).catch({}):K(w).then(L=>{L.data.status&&(j(),e(!1),h(!1))}).catch({}))},tn=w=>{var Ae,be,Ne,ke,Ce,Te;let O=+(d==null?void 0:d.amount)*2.1/100,L=+O*18/100,Fi=O+L;const ge=parseInt(d==null?void 0:d.amount);var F={amount:Math.ceil(ge+ +Fi.toFixed(2))};w==="PAYTM"?(n==null?void 0:n.flow_status)==="Hostel Application"?Ji({amount:+(d==null?void 0:d.amount),amount_nocharges:+F.amount,type:"Hostel",paidBy:`${n==null?void 0:n.studentId}`,paidTo:`${(Ae=n==null?void 0:n.instituteId)==null?void 0:Ae._id}`,moduleId:`${(be=n==null?void 0:n.applicationId)==null?void 0:be._id}`,ad_status_id:n==null?void 0:n._id,payment_installment:d.installmentType,ad_install:r,month:null,payment_remain_1:null,payment_card_type:null,payment_book_id:null,name:_.username,isApk:"web",payment_card_id:null}).then(k=>{var Y,G;window.onScriptLoad((G=(Y=k==null?void 0:k.response)==null?void 0:Y.body)==null?void 0:G.txnToken,k==null?void 0:k.order,k==null?void 0:k.amount)}).catch(k=>{console.info(k)}):Ji({amount:+(d==null?void 0:d.amount),amount_nocharges:+F.amount,type:"Admission",paidBy:`${n==null?void 0:n.studentId}`,paidTo:`${(Ce=(ke=(Ne=P==null?void 0:P.oneApply)==null?void 0:Ne.admissionAdmin)==null?void 0:ke.institute)==null?void 0:Ce._id}`,moduleId:`${(Te=n==null?void 0:n.applicationId)==null?void 0:Te._id}`,ad_status_id:n==null?void 0:n._id,payment_installment:d.installmentType,ad_install:r,month:null,payment_remain_1:null,payment_card_type:null,payment_book_id:null,name:_.username,isApk:"web",payment_card_id:null}).then(k=>{var Y,G;window.onScriptLoad((G=(Y=k==null?void 0:k.response)==null?void 0:Y.body)==null?void 0:G.txnToken,k==null?void 0:k.order,k==null?void 0:k.amount)}).catch(k=>{console.info(k)}):E!=null&&E.Key&&(F!=null&&F.amount)?(n==null?void 0:n.flow_status)==="Hostel Application"?M({amount:F==null?void 0:F.amount}).then(k=>{var Y,G,Di,Ui,Bi;(Y=k.data)!=null&&Y.success?zi({key:E==null?void 0:E.Key,oid:(G=k.data)==null?void 0:G.order.id,amount_nocharge:(d==null?void 0:d.amount)*100,amount:(Di=k.data)==null?void 0:Di.order.amount,type:"Hostel",pay_by:`${n==null?void 0:n.studentId}`,pay_to:`${(Ui=n==null?void 0:n.instituteId)==null?void 0:Ui._id}`,mid:`${(Bi=n==null?void 0:n.applicationId)==null?void 0:Bi._id}`,razor_key:U==null?void 0:U.key,razor_author:U==null?void 0:U.bool,status:n==null?void 0:n._id,installment_type:d.installmentType,is_install:r,h_month:null}):console.log("data error")}).catch(k=>{console.log(k)}):M({amount:F==null?void 0:F.amount}).then(k=>{var Y,G,Di,Ui,Bi,Re,Pe;(Y=k.data)!=null&&Y.success?zi({key:E==null?void 0:E.Key,oid:(G=k.data)==null?void 0:G.order.id,amount_nocharge:(d==null?void 0:d.amount)*100,amount:(Di=k.data)==null?void 0:Di.order.amount,type:"Admission",pay_by:`${n==null?void 0:n.studentId}`,pay_to:`${(Re=(Bi=(Ui=P==null?void 0:P.oneApply)==null?void 0:Ui.admissionAdmin)==null?void 0:Bi.institute)==null?void 0:Re._id}`,mid:`${(Pe=n==null?void 0:n.applicationId)==null?void 0:Pe._id}`,razor_key:U==null?void 0:U.key,razor_author:U==null?void 0:U.bool,status:n==null?void 0:n._id,installment_type:d.installmentType,is_install:r,h_month:null}):console.log("data error")}).catch(k=>{console.log(k)}):console.log("error")},u=(w,O)=>{var L,Fi;O==="Hostel Application"?+d.amount>=((L=w==null?void 0:w.one_installments)==null?void 0:L.fees)&&+d.amount<=(w==null?void 0:w.total_admission_fees)?(s({...d,type:"Admission",installmentType:r?"one_installments":""}),C(!0)):N({msg:`Enter amount is not less than ${(Fi=w==null?void 0:w.one_installments)==null?void 0:Fi.fees} or greater than ${w==null?void 0:w.total_admission_fees}`,run:!0}):(s({...d,type:"Admission",installmentType:r?"one_installments":""}),C(!0))};return i.jsxs(i.Fragment,{children:[i.jsxs(i.Fragment,{children:[!b&&!A&&i.jsxs(Me,{open:l,onClose:()=>h(!1),children:[(f===0||f===1)&&i.jsxs("div",{className:p.addDisplay,children:[i.jsxs("div",{className:p.title,children:[i.jsx("div",{}),i.jsx("h6",{children:o("confirm_addmission")}),i.jsx("img",{src:"/images/close-post-icon.svg",onClick:()=>h(!1),alt:""})]}),i.jsxs("div",{className:p.content,children:[i.jsxs("div",{className:p.appdetailrow,style:{cursor:"pointer"},onClick:W,children:[i.jsx("h6",{children:o("view_app_details")}),i.jsx("img",{src:"/images/admidion_department/right_arrow.svg",alt:""})]}),i.jsxs("div",{className:p.tabsss,children:[i.jsx("div",{className:f===0?`${p.singletab} ${p.singletabActive}`:p.singletab,onClick:()=>S(0),children:o("pay_online")}),i.jsx("div",{className:f===1?`${p.singletab} ${p.singletabActive}`:p.singletab,children:o("pay_offline")})]}),f===0&&i.jsxs("div",{children:[i.jsxs("div",{className:p.singlerow,children:[i.jsx("h6",{children:o("admission_fees")}),i.jsxs("h6",{children:["Rs."," ",((vn=n==null?void 0:n.feeStructure)==null?void 0:vn.total_admission_fees)??((In=n==null?void 0:n.hostel_fee_structure)==null?void 0:In.total_admission_fees)??0]})]}),i.jsxs("div",{className:p.singlerow,style:{marginTop:"1rem"},children:[i.jsx("h6",{children:o("applicable_fees_only")}),i.jsxs("h6",{children:["Rs."," ",((wn=n==null?void 0:n.feeStructure)==null?void 0:wn.applicable_fees)??((An=n==null?void 0:n.hostel_fee_structure)==null?void 0:An.applicable_fees)??0]})]}),i.jsx("div",{className:p.singlerow,children:i.jsxs("h6",{children:[o("fees_category")," "," : ",((Nn=(bn=n==null?void 0:n.feeStructure)==null?void 0:bn.category_master)==null?void 0:Nn.category_name)??((Cn=(kn=n==null?void 0:n.hostel_fee_structure)==null?void 0:kn.category_master)==null?void 0:Cn.category_name)??""]})}),i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("application_total_installment")}),i.jsx(Je,{...Oo,onChange:g})]}),r&&i.jsxs("div",{children:[i.jsx("div",{className:p.borderr}),i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("first_install")}),i.jsxs("h6",{children:["Rs."," ",((Rn=(Tn=n==null?void 0:n.feeStructure)==null?void 0:Tn.one_installments)==null?void 0:Rn.fees)??((En=(Pn=n==null?void 0:n.hostel_fee_structure)==null?void 0:Pn.one_installments)==null?void 0:En.fees)??0]})]}),(Un=(Dn=n==null?void 0:n.feeStructure)==null?void 0:Dn.two_installments)!=null&&Un.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("two_installments")}),i.jsxs("h6",{children:["Rs."," ",((Hn=(Bn=n==null?void 0:n.feeStructure)==null?void 0:Bn.two_installments)==null?void 0:Hn.fees)??0]})]}):"",(On=(qn=n==null?void 0:n.feeStructure)==null?void 0:qn.three_installments)!=null&&On.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("three_installments")}),i.jsxs("h6",{children:["Rs."," ",(($n=(Mn=n==null?void 0:n.feeStructure)==null?void 0:Mn.three_installments)==null?void 0:$n.fees)??0]})]}):"",(Wn=(Ln=n==null?void 0:n.feeStructure)==null?void 0:Ln.four_installments)!=null&&Wn.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("four_installments")}),i.jsxs("h6",{children:["Rs."," ",((Fn=(Vn=n==null?void 0:n.feeStructure)==null?void 0:Vn.four_installments)==null?void 0:Fn.fees)??0]})]}):"",(Gn=(Yn=n==null?void 0:n.feeStructure)==null?void 0:Yn.five_installments)!=null&&Gn.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("five_installments")}),i.jsxs("h6",{children:["Rs."," ",((Jn=(zn=n==null?void 0:n.feeStructure)==null?void 0:zn.five_installments)==null?void 0:Jn.fees)??0]})]}):"",(Zn=(Xn=n==null?void 0:n.feeStructure)==null?void 0:Xn.six_installments)!=null&&Zn.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("six_installments")}),i.jsxs("h6",{children:["Rs."," ",((gn=(Kn=n==null?void 0:n.feeStructure)==null?void 0:Kn.six_installments)==null?void 0:gn.fees)??0]})]}):"",(Qn=(yn=n==null?void 0:n.feeStructure)==null?void 0:yn.seven_installments)!=null&&Qn.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("seven_installments")}),i.jsxs("h6",{children:["Rs."," ",((ni=(un=n==null?void 0:n.feeStructure)==null?void 0:un.seven_installments)==null?void 0:ni.fees)??0]})]}):"",(li=(ii=n==null?void 0:n.feeStructure)==null?void 0:ii.eight_installments)!=null&&li.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("eight_installments")}),i.jsxs("h6",{children:["Rs."," ",((oi=(ei=n==null?void 0:n.feeStructure)==null?void 0:ei.eight_installments)==null?void 0:oi.fees)??0]})]}):"",(di=(ci=n==null?void 0:n.feeStructure)==null?void 0:ci.nine_installments)!=null&&di.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("nine_installments")}),i.jsxs("h6",{children:["Rs."," ",((ti=(pi=n==null?void 0:n.feeStructure)==null?void 0:pi.nine_installments)==null?void 0:ti.fees)??0]})]}):"",(fi=(ri=n==null?void 0:n.feeStructure)==null?void 0:ri.ten_installments)!=null&&fi.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("ten_installments")}),i.jsxs("h6",{children:["Rs."," ",((hi=(_i=n==null?void 0:n.feeStructure)==null?void 0:_i.ten_installments)==null?void 0:hi.fees)??0]})]}):"",(xi=(ai=n==null?void 0:n.feeStructure)==null?void 0:ai.eleven_installments)!=null&&xi.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("eleven_installments")}),i.jsxs("h6",{children:["Rs."," ",((mi=(ji=n==null?void 0:n.feeStructure)==null?void 0:ji.eleven_installments)==null?void 0:mi.fees)??0]})]}):"",(Si=(si=n==null?void 0:n.feeStructure)==null?void 0:si.tweleve_installments)!=null&&Si.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("tweleve_installments")}),i.jsxs("h6",{children:["Rs."," ",((Ii=(vi=n==null?void 0:n.feeStructure)==null?void 0:vi.tweleve_installments)==null?void 0:Ii.fees)??0]})]}):""]}),i.jsx(Ki,{labelText:o("enter_amount_to_be_paid"),name:"amount",type:"tel",value:d.amount,onChange:y,placeholder:o("please_enter_amount_paid"),disabled:m}),i.jsx("div",{className:p.payandconfirmContainer,children:i.jsx("p",{className:p.payandconfirm,children:o("pay_and_confirm")})}),i.jsx("div",{className:p.btn,style:{cursor:"pointer"},onClick:()=>(n==null?void 0:n.flow_status)==="Hostel Application"?u(n==null?void 0:n.hostel_fee_structure,n==null?void 0:n.flow_status):u(n==null?void 0:n.feeStructure,n==null?void 0:n.flow_status),children:o("pay_confirm")})]}),f===1&&i.jsxs("div",{children:[i.jsxs("div",{className:p.singlerow,children:[i.jsx("h6",{children:o("admission_fees")}),i.jsxs("h6",{children:["Rs."," ",((wi=n==null?void 0:n.feeStructure)==null?void 0:wi.total_admission_fees)??((Ai=n==null?void 0:n.hostel_fee_structure)==null?void 0:Ai.total_admission_fees)??0]})]}),i.jsxs("div",{className:p.singlerow,style:{marginTop:"1rem"},children:[i.jsx("h6",{children:o("applicable_fees_only")}),i.jsxs("h6",{children:["Rs."," ",((bi=n==null?void 0:n.feeStructure)==null?void 0:bi.applicable_fees)??((Ni=n==null?void 0:n.hostel_fee_structure)==null?void 0:Ni.applicable_fees)??0]})]}),i.jsx("div",{className:p.singlerow,children:i.jsxs("h6",{children:[o("fees_category")," "," : ",((T=(ki=n==null?void 0:n.feeStructure)==null?void 0:ki.category_master)==null?void 0:T.category_name)??((V=(q=n==null?void 0:n.hostel_fee_structure)==null?void 0:q.category_master)==null?void 0:V.category_name)??""]})}),(Vi=(Wi=n==null?void 0:n.feeStructure)==null?void 0:Wi.one_installments)!=null&&Vi.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("first_install")}),i.jsxs("h6",{children:["Rs."," ",((Ci=(Z=n==null?void 0:n.feeStructure)==null?void 0:Z.one_installments)==null?void 0:Ci.fees)??0]})]}):"",(H=(Ti=n==null?void 0:n.feeStructure)==null?void 0:Ti.two_installments)!=null&&H.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("two_installments")}),i.jsxs("h6",{children:["Rs."," ",((cn=(on=n==null?void 0:n.feeStructure)==null?void 0:on.two_installments)==null?void 0:cn.fees)??0]})]}):"",(Pi=(Ri=n==null?void 0:n.feeStructure)==null?void 0:Ri.three_installments)!=null&&Pi.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("three_installments")}),i.jsxs("h6",{children:["Rs."," ",((ui=(Ei=n==null?void 0:n.feeStructure)==null?void 0:Ei.three_installments)==null?void 0:ui.fees)??0]})]}):"",(il=(nl=n==null?void 0:n.feeStructure)==null?void 0:nl.four_installments)!=null&&il.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("four_installments")}),i.jsxs("h6",{children:["Rs."," ",((el=(ll=n==null?void 0:n.feeStructure)==null?void 0:ll.four_installments)==null?void 0:el.fees)??0]})]}):"",(cl=(ol=n==null?void 0:n.feeStructure)==null?void 0:ol.five_installments)!=null&&cl.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("five_installments")}),i.jsxs("h6",{children:["Rs."," ",((pl=(dl=n==null?void 0:n.feeStructure)==null?void 0:dl.five_installments)==null?void 0:pl.fees)??0]})]}):"",(rl=(tl=n==null?void 0:n.feeStructure)==null?void 0:tl.six_installments)!=null&&rl.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("six_installments")}),i.jsxs("h6",{children:["Rs."," ",((_l=(fl=n==null?void 0:n.feeStructure)==null?void 0:fl.six_installments)==null?void 0:_l.fees)??0]})]}):"",(al=(hl=n==null?void 0:n.feeStructure)==null?void 0:hl.seven_installments)!=null&&al.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("seven_installments")}),i.jsxs("h6",{children:["Rs."," ",((jl=(xl=n==null?void 0:n.feeStructure)==null?void 0:xl.seven_installments)==null?void 0:jl.fees)??0]})]}):"",(sl=(ml=n==null?void 0:n.feeStructure)==null?void 0:ml.eight_installments)!=null&&sl.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("eight_installments")}),i.jsxs("h6",{children:["Rs."," ",((vl=(Sl=n==null?void 0:n.feeStructure)==null?void 0:Sl.eight_installments)==null?void 0:vl.fees)??0]})]}):"",(wl=(Il=n==null?void 0:n.feeStructure)==null?void 0:Il.nine_installments)!=null&&wl.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("nine_installments")}),i.jsxs("h6",{children:["Rs."," ",((bl=(Al=n==null?void 0:n.feeStructure)==null?void 0:Al.nine_installments)==null?void 0:bl.fees)??0]})]}):"",(kl=(Nl=n==null?void 0:n.feeStructure)==null?void 0:Nl.ten_installments)!=null&&kl.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("ten_installments")}),i.jsxs("h6",{children:["Rs."," ",((Tl=(Cl=n==null?void 0:n.feeStructure)==null?void 0:Cl.ten_installments)==null?void 0:Tl.fees)??0]})]}):"",(Pl=(Rl=n==null?void 0:n.feeStructure)==null?void 0:Rl.eleven_installments)!=null&&Pl.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("eleven_installments")}),i.jsxs("h6",{children:["Rs."," ",((Dl=(El=n==null?void 0:n.feeStructure)==null?void 0:El.eleven_installments)==null?void 0:Dl.fees)??0]})]}):"",(Bl=(Ul=n==null?void 0:n.feeStructure)==null?void 0:Ul.tweleve_installments)!=null&&Bl.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("tweleve_installments")}),i.jsxs("h6",{children:["Rs."," ",((ql=(Hl=n==null?void 0:n.feeStructure)==null?void 0:Hl.tweleve_installments)==null?void 0:ql.fees)??0]})]}):"",i.jsx("div",{className:p.borderr}),i.jsx("div",{className:p.adholdcontainer,children:i.jsx("p",{className:p.payandconfirm,children:o("admission_hold")})}),i.jsx(_o,{financeId:(n==null?void 0:n.finance)??"",setIndex:S,departmentId:((Ol=n==null?void 0:n.applicationId)==null?void 0:Ol.applicationDepartment)??((Ll=($l=(Ml=n==null?void 0:n.applicationId)==null?void 0:Ml.applicationUnit)==null?void 0:$l.hostel)==null?void 0:Ll._id)??"",flowAs:(Wl=n==null?void 0:n.applicationId)!=null&&Wl.applicationDepartment?"Department":(Yl=(Fl=(Vl=n==null?void 0:n.applicationId)==null?void 0:Vl.applicationUnit)==null?void 0:Fl.hostel)!=null&&Yl._id?"Hostel":""})]})]})]}),f===2&&i.jsx(Ye,{setIndex:S,ConfirmOffline:X}),f===3&&i.jsx(qi,{financeId:(n==null?void 0:n.finance)??"",setIndex:S,setPayData:D,payData:R,ConfirmOffline:X,departmentId:((Gl=n==null?void 0:n.applicationId)==null?void 0:Gl.applicationDepartment)??((Xl=(Jl=(zl=n==null?void 0:n.applicationId)==null?void 0:zl.applicationUnit)==null?void 0:Jl.hostel)==null?void 0:Xl._id)??"",flowAs:(Zl=n==null?void 0:n.applicationId)!=null&&Zl.applicationDepartment?"Department":(yl=(gl=(Kl=n==null?void 0:n.applicationId)==null?void 0:Kl.applicationUnit)==null?void 0:gl.hostel)!=null&&yl._id?"Hostel":""}),f===4&&i.jsx(Mi,{financeId:(n==null?void 0:n.finance)??"",setIndex:S,setPayData:D,payData:R,ConfirmOffline:X,departmentId:((Ql=n==null?void 0:n.applicationId)==null?void 0:Ql.applicationDepartment)??((ie=(ne=(ul=n==null?void 0:n.applicationId)==null?void 0:ul.applicationUnit)==null?void 0:ne.hostel)==null?void 0:ie._id)??"",flowAs:(le=n==null?void 0:n.applicationId)!=null&&le.applicationDepartment?"Department":(ce=(oe=(ee=n==null?void 0:n.applicationId)==null?void 0:ee.applicationUnit)==null?void 0:oe.hostel)!=null&&ce._id?"Hostel":""}),f===5&&i.jsx($i,{financeId:(n==null?void 0:n.finance)??"",setIndex:S,setPayData:D,payData:R,ConfirmOffline:X,departmentId:((de=n==null?void 0:n.applicationId)==null?void 0:de.applicationDepartment)??((re=(te=(pe=n==null?void 0:n.applicationId)==null?void 0:pe.applicationUnit)==null?void 0:te.hostel)==null?void 0:re._id)??"",flowAs:(fe=n==null?void 0:n.applicationId)!=null&&fe.applicationDepartment?"Department":(ae=(he=(_e=n==null?void 0:n.applicationId)==null?void 0:_e.applicationUnit)==null?void 0:he.hostel)!=null&&ae._id?"Hostel":""}),f===6&&i.jsx(Oi,{financeId:(n==null?void 0:n.finance)??"",setIndex:S,setPayData:D,payData:R,ConfirmOffline:X,departmentId:((xe=n==null?void 0:n.applicationId)==null?void 0:xe.applicationDepartment)??((se=(me=(je=n==null?void 0:n.applicationId)==null?void 0:je.applicationUnit)==null?void 0:me.hostel)==null?void 0:se._id)??"",flowAs:(Se=n==null?void 0:n.applicationId)!=null&&Se.applicationDepartment?"Department":(we=(Ie=(ve=n==null?void 0:n.applicationId)==null?void 0:ve.applicationUnit)==null?void 0:Ie.hostel)!=null&&we._id?"Hostel":""}),a&&i.jsx(pn,{})]}),A&&i.jsx(Fe,{onClose:()=>C(!1),allContent:d,checkoutAdmissionHandler:tn}),b&&i.jsx(ze,{viewDetail:!!b,hideModal:J,applicationId:b,completeApplication:!1})]}),x.run&&i.jsx(Yi,{msg:x.msg,run:x.run,setRun:()=>N({msg:"",run:!1}),postiton:"bottom",type:"error"})]})}const yi=({item:l,setOpenForm:h,openForm:n,applicationStatusFetch:j})=>{var A,C;const[m,o]=t.useState({fee_payment_mode:"",fee_payment_amount:"",transaction_date:"",fee_bank_name:"",fee_bank_holder:"",fee_utr_reference:"",fee_payment_acknowledge:""}),[_,r]=t.useState(!1),{getFeeReceiptDetail:c,getFeeReceiptDetailRefetch:f}=Xi({rid:l==null?void 0:l.receipt,skip:!(l!=null&&l.receipt)}),[S]=ro(),[b]=xo();t.useEffect(()=>{l!=null&&l.receipt&&f()},[l==null?void 0:l.receipt,f]),t.useEffect(()=>{var a,e,d,s,x,N,R,D;c!=null&&c.receipt&&o({fee_payment_mode:(a=c==null?void 0:c.receipt)==null?void 0:a.fee_payment_mode,fee_payment_amount:(e=c==null?void 0:c.receipt)==null?void 0:e.fee_payment_amount,transaction_date:(s=(d=c==null?void 0:c.receipt)==null?void 0:d.fee_transaction_date)==null?void 0:s.substr(0,10),fee_bank_name:(x=c==null?void 0:c.receipt)==null?void 0:x.fee_bank_name,fee_bank_holder:(N=c==null?void 0:c.receipt)==null?void 0:N.fee_bank_holder,fee_utr_reference:(R=c==null?void 0:c.receipt)==null?void 0:R.fee_utr_reference,fee_payment_acknowledge:(D=c==null?void 0:c.receipt)==null?void 0:D.fee_payment_acknowledge})},[c==null?void 0:c.receipt]);const I=()=>{var a,e;r(d=>!d),(l==null?void 0:l.flow_status)==="Hostel Application"?b({rid:(a=c==null?void 0:c.receipt)==null?void 0:a._id,sid:l==null?void 0:l._id,receiptReapply:m}).then(()=>{j(),r(d=>!d),h(!1)}).catch({}):S({rid:(e=c==null?void 0:c.receipt)==null?void 0:e._id,sid:l==null?void 0:l._id,receiptReapply:m}).then(()=>{j(),r(d=>!d),h(!1)}).catch({})};return i.jsxs(i.Fragment,{children:[(l==null?void 0:l.flow_status)==="Admission Application"?i.jsxs(i.Fragment,{children:[i.jsx("p",{children:"Admission confirmation is in process. Payment receipt request is rejected."}),i.jsxs("p",{children:["Reason:"," ",i.jsx("span",{style:{fontWeight:"500"},children:(A=c==null?void 0:c.receipt)==null?void 0:A.reason})]}),i.jsx("p",{children:"Re-apply with correct details"})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{children:"Hostel Admission confirmation is in process. Payment receipt request is rejected."}),i.jsxs("p",{children:["Reason:"," ",i.jsx("span",{style:{fontWeight:"500"},children:(C=c==null?void 0:c.receipt)==null?void 0:C.reason})]}),i.jsx("p",{children:"Re-apply with correct details"})]}),n&&i.jsx(rn,{onClose:()=>h(a=>!a),children:i.jsxs("div",{style:{width:"30rem",maxHeight:"35rem",padding:"0.9rem",overflowX:"hidden",scrollBehavior:"smooth",overflowY:"auto"},children:[i.jsx(ho,{payData:m,setPayData:o,ConfirmOffline:I,setOpenForm:h}),_&&i.jsx(pn,{})]})})]})},Qi=({receiptId:l})=>{const{t:h}=dn(),[n,j]=t.useState(""),[m,o]=t.useState(!1),[_,r]=t.useState(""),{getFeeReceiptDetail:c,getFeeReceiptDetailRefetch:f}=Xi({rid:n,skip:!n});t.useEffect(()=>{n&&f()},[n]),t.useEffect(()=>{c!=null&&c.receipt&&(c!=null&&c.all_remain)&&r(c)},[c]),t.useEffect(()=>{var b;if(_){const I=new Worker(new URL(Ke,import.meta.url),{type:"module"});if(((b=_==null?void 0:_.all_remain)==null?void 0:b.remaining_flow)==="Hostel Application"){const{institute:A,studentInfo:C,paymentReceiptInfo:a}=Xe(_==null?void 0:_.all_remain,_==null?void 0:_.receipt);I.postMessage({institute:A,studentInfo:C,paymentReceiptInfo:a,printReceiptType:(a==null?void 0:a.transactonRefund)==="Refunded"?"HOSTEL_REFUND":"HOSTEL"})}else{const{institute:A,studentInfo:C,paymentReceiptInfo:a}=Ze(_==null?void 0:_.all_remain,_==null?void 0:_.receipt);I.postMessage({institute:A,studentInfo:C,paymentReceiptInfo:a,printReceiptType:(a==null?void 0:a.transactonRefund)==="Refunded"?"ADMISSION_REFUND":"ADMISSION"})}I.onmessage=A=>{A&&(window.open(A.data,"_blank"),o(C=>!C),r(""),I.terminate())}}},[_]);const S=()=>{o(b=>!b),j(l),l===n&&r(c)};return i.jsxs(i.Fragment,{children:[i.jsx("button",{className:v.view_receipt_btn,onClick:S,children:h("download_receipt")}),m&&i.jsx(pn,{})]})},$o=({message:l,onRefetchApplication:h})=>{var a,e;const{t:n}=dn(),[j,m]=t.useState(""),[o,_]=t.useState(!1),[r,c]=t.useState(!1),[f,S]=t.useState({msg:"",run:!1}),[b]=Le(),{data:I,refetch:A}=ue(l==null?void 0:l.studentId,{skip:!(l!=null&&l.studentId)});t.useEffect(()=>{l!=null&&l.studentId&&A()},[l==null?void 0:l.studentId,A]);const C=()=>{var d;c(s=>!s),b({fid:l==null?void 0:l.finance,aid:(d=l==null?void 0:l.applicationId)==null?void 0:d._id,flow:"BY_DEPARTMENT"}).then(s=>{var x;c(N=>!N),(x=s==null?void 0:s.data)!=null&&x.denied?S({msg:"Before initiating payment. you must have a valid bank account to receive payment.",run:!0}):m(l)}).catch({})};return i.jsxs(i.Fragment,{children:[i.jsx("p",{children:"Your documents are submitted and verified successfully."}),i.jsx("p",{style:{marginBottom:"0.5rem",fontWeight:"500"},children:"Complete your admission by paying applicable admission fees from below:"}),i.jsxs("p",{children:["Applicable Admission Fees: Rs."," ",i.jsx("span",{style:{fontWeight:"500"},children:((a=l==null?void 0:l.feeStructure)==null?void 0:a.applicable_fees)??0})]}),(l==null?void 0:l.isPaid)==="Paid"?"":(l==null?void 0:l.payMode)==="online"?i.jsxs(i.Fragment,{children:[(l==null?void 0:l.receipt_status)==="Rejected"&&i.jsx(yi,{item:l,openForm:o,setOpenForm:_,applicationStatusFetch:h}),(l==null?void 0:l.receipt_status)==="Rejected"?"":(l==null?void 0:l.receipt_status)==="Approved"?i.jsx("p",{children:"Admission confirmation is in process. Payment receipt accepted."}):i.jsx("p",{children:"Admission confirmation is in process. Payment receipt is being requested. Stay updated"}),i.jsxs("section",{children:[i.jsx("h6",{className:v.online_payment_note,children:n("online_payment_note")}),(l==null?void 0:l.receipt_status)==="Rejected"&&i.jsx("button",{className:v.rejected_btn,onClick:()=>_(d=>!d),children:n("re_apply_for_receipt")}),(l==null?void 0:l.receipt_status)==="Approved"&&i.jsx(Qi,{receiptId:l==null?void 0:l.receipt}),(l==null?void 0:l.receipt_status)==="Requested"&&i.jsx("button",{className:v.requested_btn,children:n("requested")})]})]}):i.jsx("div",{className:v.itemrow,children:i.jsx("div",{className:`${v.itembtn} ${v.blue}`,style:{width:"100%"},onClick:C,children:"Pay Admission Fees"})}),i.jsx(Mo,{addDisplay:!!j,hideModal:()=>m(""),statusQuery:j,onRefetchApplication:h,isFeesEditable:((e=I==null?void 0:I.student)==null?void 0:e.online_amount_edit_access)!=="Granted"}),i.jsx(Yi,{msg:f.msg,run:f.run,setRun:()=>S({msg:"",run:!1}),postiton:"bottom",type:"error"}),r&&i.jsx(pn,{})]})},Lo=({message:l})=>{var I,A,C,a,e,d,s,x,N,R,D,E,M,K,B,P,$,U,z,g,y,W,J,X,tn,u,nn,ln,en;const[h,n]=t.useState(""),[j,m]=t.useState(!1),[o,_]=t.useState(""),{getBankByFinance:r,getBankByFinanceRefetch:c}=Zi({data:{fid:l==null?void 0:l.finance,flow:"",filter_by:""},skip:!(l!=null&&l.finance)});t.useEffect(()=>{l!=null&&l.finance&&c()},[l==null?void 0:l.finance,c]);const f=()=>{m(Q=>!Q)},S=Q=>{_(Q),f()},b=()=>{_(""),f()};return i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:["Your application for"," ",i.jsxs("span",{style:{fontWeight:"500"},children:[((I=l==null?void 0:l.applicationId)==null?void 0:I.applicationName)??""," "]}),"have been filled successfully."]}),(a=(C=(A=l==null?void 0:l.student)==null?void 0:A.application_print)==null?void 0:C[0])!=null&&a.value?i.jsx("p",{style:{fontWeight:"500"},children:i.jsx("a",{href:`${Be}/${(s=(d=(e=l==null?void 0:l.student)==null?void 0:e.application_print)==null?void 0:d[0])==null?void 0:s.value}`,title:"Download Hostel Admission Application File",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:"Download Hostel Admission Application Form"})}):"",i.jsx("p",{style:{fontWeight:"500"},children:"Below is the hostel admission process:"}),i.jsx("p",{children:"1. You will get notified here after your selection or rejection from the institute. ( In case there is no notification within 3 working days, visit or contact the hostel department)"}),i.jsx("p",{children:"2. After selection, confirm from your side and start the hostel admission process."}),i.jsxs("p",{children:["3. After confirmation from your side, visit the institute with the applicable fees. (You will get application fees information on your selection from the institute side. (Till then check our"," ",i.jsx("span",{style:{color:"#002BBE",cursor:"pointer"},onClick:f,children:"Fee structures"})," ",")"]}),i.jsx("p",{style:{marginBottom:"0.5rem",fontWeight:"500"},children:"4. Payment modes available for fee payment:"}),i.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex"},children:[i.jsx("div",{className:v.bullet_mark}),"Online: UPI, Debit Card, Credit Card, Net banking & other payment apps (Phonepe, Google pay, Paytm)"]}),((x=r==null?void 0:r.bank_query)==null?void 0:x.cash)&&i.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex"},children:[i.jsx("div",{className:v.bullet_mark}),"Cash"]}),((N=r==null?void 0:r.bank_query)==null?void 0:N.upi_transfer)&&i.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex"},children:[i.jsx("div",{className:v.bullet_mark}),"UPI Transfer ("," ",i.jsxs("span",{style:{color:"#002BBE",cursor:"pointer"},onClick:()=>n("UPI"),children:[" ","Bank Details"]}),")"]}),((R=r==null?void 0:r.bank_query)==null?void 0:R.demand_draft)&&i.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex"},children:[i.jsx("div",{className:v.bullet_mark}),"Demand Draft ("," ",i.jsxs("span",{style:{color:"#002BBE",cursor:"pointer"},onClick:()=>n("DEMAND"),children:[" ","Bank Details"]}),")"]}),((D=r==null?void 0:r.bank_query)==null?void 0:D.net_banking)&&i.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex"},children:[i.jsx("div",{className:v.bullet_mark}),"NEFT/RTGS/IMPS ("," ",i.jsxs("span",{style:{color:"#002BBE",cursor:"pointer"},onClick:()=>n("RTG"),children:[" ","Bank Details"]}),")"]}),((E=r==null?void 0:r.bank_query)==null?void 0:E.cheque)&&i.jsxs("p",{style:{marginBottom:"0.5rem",display:"flex"},children:[i.jsx("div",{className:v.bullet_mark}),"Cheque ("," ",i.jsxs("span",{style:{color:"#002BBE",cursor:"pointer"},onClick:()=>n("CHEQUE"),children:[" ","Bank Details"]}),")"]}),i.jsx("p",{style:{marginTop:"0.9rem"},children:"5. Pay application hostel admission fees and your admission will be confirmed and complete."}),i.jsx("p",{children:"6. For cancellation and refund, contact the hostel department."}),i.jsx("p",{style:{fontWeight:"500"},children:"Note: Stay tuned for further updates."}),h&&i.jsx(rn,{onClose:()=>n(""),children:h==="UPI"?i.jsx(qi,{financeId:l==null?void 0:l.finance,flowAs:"Hostel",departmentId:((B=(K=(M=l==null?void 0:l.applicationId)==null?void 0:M.applicationUnit)==null?void 0:K.hostel)==null?void 0:B._id)??"",viewAs:"APPLICATION_STATUS",setIndex:()=>n("")}):h==="DEMAND"?i.jsx(Oi,{financeId:l==null?void 0:l.finance,flowAs:"Hostel",departmentId:((U=($=(P=l==null?void 0:l.applicationId)==null?void 0:P.applicationUnit)==null?void 0:$.hostel)==null?void 0:U._id)??"",viewAs:"APPLICATION_STATUS",setIndex:()=>n("")}):h==="RTG"?i.jsx(Mi,{financeId:l==null?void 0:l.finance,flowAs:"Hostel",departmentId:((y=(g=(z=l==null?void 0:l.applicationId)==null?void 0:z.applicationUnit)==null?void 0:g.hostel)==null?void 0:y._id)??"",viewAs:"APPLICATION_STATUS",setIndex:()=>n("")}):h==="CHEQUE"?i.jsx($i,{financeId:l==null?void 0:l.finance,flowAs:"Hostel",departmentId:((X=(J=(W=l==null?void 0:l.applicationId)==null?void 0:W.applicationUnit)==null?void 0:J.hostel)==null?void 0:X._id)??"",viewAs:"APPLICATION_STATUS",setIndex:()=>n("")}):""}),j&&i.jsx(jo,{onClose:f,onSelectedStudent:S,hostelId:((nn=(u=(tn=l==null?void 0:l.applicationId)==null?void 0:tn.applicationUnit)==null?void 0:u.hostel)==null?void 0:nn._id)??"",asOpen:"STUDENT_VIEW_STRUCTURE",batchId:((ln=l==null?void 0:l.applicationId)==null?void 0:ln.applicationBatch)??"",classMasterId:((en=l==null?void 0:l.applicationId)==null?void 0:en.applicationMaster)??""}),o&&i.jsx(Li,{structureId:o,setStructureId:b,viewAs:"STUDENT"})]})},Wo={inputProps:{"aria-label":"Switch demo"}};function Vo({addDisplay:l,hideModal:h,statusQuery:n,onRefetchApplication:j,isFeesEditable:m}){var u,nn,ln,en,Q,fn,_n,hn,an,xn,jn,mn,sn,Sn,vn,In,wn,An,bn,Nn,kn,Cn,Tn,Rn,Pn,En,Dn,Un,Bn,Hn,qn,On,Mn,$n,Ln,Wn,Vn,Fn,Yn,Gn,zn,Jn,Xn,Zn,Kn,gn,yn,Qn,un,ni,ii,li,ei,oi,ci,di,pi,ti,ri,fi,_i,hi,ai,xi,ji,mi,si,Si,vi,Ii,wi,Ai,bi,Ni,ki;const{t:o}=dn(),_=He(),[r,c]=t.useState(!1),[f,S]=t.useState(0),[b,I]=t.useState(""),[A,C]=t.useState(!1),[a,e]=t.useState(!1),[d,s]=t.useState({amount:0,feesId:"",insId:"",type:"",installmentType:""}),[x,N]=t.useState({msg:"",run:!1}),[R,D]=t.useState({fee_payment_mode:"",fee_payment_amount:"",transaction_date:"",fee_bank_name:"",fee_bank_holder:"",fee_utr_reference:"",fee_payment_acknowledge:""}),{data:E}=qe(),[M]=Oe(),[K]=Ge(),{oneApplicationDetail:B,oneApplicationDetailRefetch:P}=$e({apid:(u=n==null?void 0:n.applicationId)==null?void 0:u._id,skip:!((nn=n==null?void 0:n.applicationId)!=null&&nn._id)}),{merchantId:$,merchantIdRefetch:U}=Ve({id:(Q=(en=(ln=B==null?void 0:B.oneApply)==null?void 0:ln.hostelAdmin)==null?void 0:en.institute)==null?void 0:Q._id,skip:!((hn=(_n=(fn=B==null?void 0:B.oneApply)==null?void 0:fn.hostelAdmin)==null?void 0:_n.institute)!=null&&hn._id)});t.useEffect(()=>{var T;(T=n==null?void 0:n.applicationId)!=null&&T._id&&P()},[(an=n==null?void 0:n.applicationId)==null?void 0:an._id,P]),t.useEffect(()=>{var T,q,V;(V=(q=(T=B==null?void 0:B.oneApply)==null?void 0:T.hostelAdmin)==null?void 0:q.institute)!=null&&V._id&&U()},[(mn=(jn=(xn=B==null?void 0:B.oneApply)==null?void 0:xn.hostelAdmin)==null?void 0:jn.institute)==null?void 0:mn._id,U]),t.useEffect(()=>{s(T=>{var q;return{...T,amount:(q=n==null?void 0:n.hostel_fee_structure)==null?void 0:q.applicable_fees}})},[(sn=n==null?void 0:n.hostel_fee_structure)==null?void 0:sn.applicable_fees]);const z=()=>{s(T=>{var q,V;return{...T,amount:(V=(q=n==null?void 0:n.hostel_fee_structure)==null?void 0:q.one_installments)==null?void 0:V.fees}}),c(T=>!T)},g=T=>{s(q=>({...q,amount:T.target.value}))},y=()=>{var T;I((T=n==null?void 0:n.applicationId)==null?void 0:T._id)},W=()=>{I("")},J=()=>{var q;e(!0);var T={sid:n==null?void 0:n.studentId,aid:(q=n==null?void 0:n.applicationId)==null?void 0:q._id,statusId:n==null?void 0:n._id,confirmPayload:f!==2?R:{fee_payment_mode:"By Cash"}};(T==null?void 0:T.sid)!==""&&(T==null?void 0:T.aid)!==""&&(T==null?void 0:T.statusId)!==""&&K(T).then(V=>{V.data.status&&(j(),e(!1),h(!1))}).catch({})},X=T=>{var Ci,Ti;let q=+(d==null?void 0:d.amount)*2.1/100,V=+q*18/100,Wi=q+V;const Vi=parseInt(d==null?void 0:d.amount);var Z={amount:Math.ceil(Vi+ +Wi.toFixed(2))};T==="PAYTM"?Ji({amount:+(d==null?void 0:d.amount),amount_nocharges:+Z.amount,type:"Hostel",paidBy:`${n==null?void 0:n.studentId}`,paidTo:`${(Ci=n==null?void 0:n.instituteId)==null?void 0:Ci._id}`,moduleId:`${(Ti=n==null?void 0:n.applicationId)==null?void 0:Ti._id}`,ad_status_id:n==null?void 0:n._id,payment_installment:d.installmentType===""?null:d.installmentType,ad_install:r,month:null,payment_remain_1:null,payment_card_type:null,payment_book_id:null,name:_.username,isApk:"web",payment_card_id:null}).then(H=>{var on,cn;window.onScriptLoad((cn=(on=H==null?void 0:H.response)==null?void 0:on.body)==null?void 0:cn.txnToken,H==null?void 0:H.order,H==null?void 0:H.amount)}).catch(H=>{console.info(H)}):E!=null&&E.Key&&(Z!=null&&Z.amount)?M({amount:Z==null?void 0:Z.amount}).then(H=>{var on,cn,Ri,Pi,Ei;(on=H.data)!=null&&on.success?zi({key:E==null?void 0:E.Key,oid:(cn=H.data)==null?void 0:cn.order.id,amount_nocharge:(d==null?void 0:d.amount)*100,amount:(Ri=H.data)==null?void 0:Ri.order.amount,type:"Hostel",pay_by:`${n==null?void 0:n.studentId}`,pay_to:`${(Pi=n==null?void 0:n.instituteId)==null?void 0:Pi._id}`,mid:`${(Ei=n==null?void 0:n.applicationId)==null?void 0:Ei._id}`,razor_key:$==null?void 0:$.key,razor_author:$==null?void 0:$.bool,status:n==null?void 0:n._id,installment_type:d.installmentType,is_install:r,h_month:null}):console.log("data error")}).catch(H=>{console.log(H)}):console.log("error")},tn=T=>{s({...d,type:"Admission",installmentType:r?"one_installments":""}),C(!0)};return i.jsxs(i.Fragment,{children:[i.jsxs(i.Fragment,{children:[!b&&!A&&i.jsxs(Me,{open:l,onClose:()=>h(!1),children:[(f===0||f===1)&&i.jsxs("div",{className:p.addDisplay,children:[i.jsxs("div",{className:p.title,children:[i.jsx("div",{}),i.jsx("h6",{children:o("confirm_addmission")}),i.jsx("img",{src:"/images/close-post-icon.svg",onClick:()=>h(!1),alt:""})]}),i.jsxs("div",{className:p.content,children:[i.jsxs("div",{className:p.appdetailrow,style:{cursor:"pointer"},onClick:y,children:[i.jsx("h6",{children:o("view_app_details")}),i.jsx("img",{src:"/images/admidion_department/right_arrow.svg",alt:""})]}),i.jsxs("div",{className:p.tabsss,children:[i.jsx("div",{className:f===0?`${p.singletab} ${p.singletabActive}`:p.singletab,onClick:()=>S(0),children:o("pay_online")}),i.jsx("div",{className:f===1?`${p.singletab} ${p.singletabActive}`:p.singletab,children:o("pay_offline")})]}),f===0&&i.jsxs("div",{children:[i.jsxs("div",{className:p.singlerow,children:[i.jsx("h6",{children:o("admission_fees")}),i.jsxs("h6",{children:["Rs."," ",((Sn=n==null?void 0:n.hostel_fee_structure)==null?void 0:Sn.total_admission_fees)??0]})]}),i.jsxs("div",{className:p.singlerow,style:{marginTop:"1rem"},children:[i.jsx("h6",{children:o("applicable_fees_only")}),i.jsxs("h6",{children:["Rs."," ",((vn=n==null?void 0:n.hostel_fee_structure)==null?void 0:vn.applicable_fees)??0]})]}),i.jsx("div",{className:p.singlerow,children:i.jsxs("h6",{children:[o("fees_category")," "," : ",((wn=(In=n==null?void 0:n.hostel_fee_structure)==null?void 0:In.category_master)==null?void 0:wn.category_name)??""]})}),i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("application_total_installment")}),i.jsx(Je,{...Wo,onChange:z})]}),r&&i.jsxs("div",{children:[i.jsx("div",{className:p.borderr}),i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("first_install")}),i.jsxs("h6",{children:["Rs."," ",((bn=(An=n==null?void 0:n.hostel_fee_structure)==null?void 0:An.one_installments)==null?void 0:bn.fees)??0]})]}),(kn=(Nn=n==null?void 0:n.hostel_fee_structure)==null?void 0:Nn.two_installments)!=null&&kn.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("two_installments")}),i.jsxs("h6",{children:["Rs."," ",((Tn=(Cn=n==null?void 0:n.hostel_fee_structure)==null?void 0:Cn.two_installments)==null?void 0:Tn.fees)??0]})]}):"",(Pn=(Rn=n==null?void 0:n.hostel_fee_structure)==null?void 0:Rn.three_installments)!=null&&Pn.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("three_installments")}),i.jsxs("h6",{children:["Rs."," ",((Dn=(En=n==null?void 0:n.hostel_fee_structure)==null?void 0:En.three_installments)==null?void 0:Dn.fees)??0]})]}):"",(Bn=(Un=n==null?void 0:n.hostel_fee_structure)==null?void 0:Un.four_installments)!=null&&Bn.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("four_installments")}),i.jsxs("h6",{children:["Rs."," ",((qn=(Hn=n==null?void 0:n.hostel_fee_structure)==null?void 0:Hn.four_installments)==null?void 0:qn.fees)??0]})]}):"",(Mn=(On=n==null?void 0:n.hostel_fee_structure)==null?void 0:On.five_installments)!=null&&Mn.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("five_installments")}),i.jsxs("h6",{children:["Rs."," ",((Ln=($n=n==null?void 0:n.hostel_fee_structure)==null?void 0:$n.five_installments)==null?void 0:Ln.fees)??0]})]}):"",(Vn=(Wn=n==null?void 0:n.hostel_fee_structure)==null?void 0:Wn.six_installments)!=null&&Vn.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("six_installments")}),i.jsxs("h6",{children:["Rs."," ",((Yn=(Fn=n==null?void 0:n.hostel_fee_structure)==null?void 0:Fn.six_installments)==null?void 0:Yn.fees)??0]})]}):"",(zn=(Gn=n==null?void 0:n.hostel_fee_structure)==null?void 0:Gn.seven_installments)!=null&&zn.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("seven_installments")}),i.jsxs("h6",{children:["Rs."," ",((Xn=(Jn=n==null?void 0:n.hostel_fee_structure)==null?void 0:Jn.seven_installments)==null?void 0:Xn.fees)??0]})]}):"",(Kn=(Zn=n==null?void 0:n.hostel_fee_structure)==null?void 0:Zn.eight_installments)!=null&&Kn.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("eight_installments")}),i.jsxs("h6",{children:["Rs."," ",((yn=(gn=n==null?void 0:n.hostel_fee_structure)==null?void 0:gn.eight_installments)==null?void 0:yn.fees)??0]})]}):"",(un=(Qn=n==null?void 0:n.hostel_fee_structure)==null?void 0:Qn.nine_installments)!=null&&un.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("nine_installments")}),i.jsxs("h6",{children:["Rs."," ",((ii=(ni=n==null?void 0:n.hostel_fee_structure)==null?void 0:ni.nine_installments)==null?void 0:ii.fees)??0]})]}):"",(ei=(li=n==null?void 0:n.hostel_fee_structure)==null?void 0:li.ten_installments)!=null&&ei.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("ten_installments")}),i.jsxs("h6",{children:["Rs."," ",((ci=(oi=n==null?void 0:n.hostel_fee_structure)==null?void 0:oi.ten_installments)==null?void 0:ci.fees)??0]})]}):"",(pi=(di=n==null?void 0:n.hostel_fee_structure)==null?void 0:di.eleven_installments)!=null&&pi.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("eleven_installments")}),i.jsxs("h6",{children:["Rs."," ",((ri=(ti=n==null?void 0:n.hostel_fee_structure)==null?void 0:ti.eleven_installments)==null?void 0:ri.fees)??0]})]}):"",(_i=(fi=n==null?void 0:n.hostel_fee_structure)==null?void 0:fi.tweleve_installments)!=null&&_i.fees?i.jsxs("div",{className:p.singlerow1,children:[i.jsx("h6",{children:o("tweleve_installments")}),i.jsxs("h6",{children:["Rs."," ",((ai=(hi=n==null?void 0:n.hostel_fee_structure)==null?void 0:hi.tweleve_installments)==null?void 0:ai.fees)??0]})]}):""]}),i.jsx(Ki,{labelText:o("enter_amount_to_be_paid"),name:"amount",type:"tel",value:d.amount,onChange:g,placeholder:o("please_enter_amount_paid"),disabled:m}),i.jsx("div",{className:p.payandconfirmContainer,children:i.jsx("p",{className:p.payandconfirm,children:o("pay_and_confirm")})}),i.jsx("div",{className:p.btn,style:{cursor:"pointer"},onClick:()=>tn(n==null?void 0:n.hostel_fee_structure,n==null?void 0:n.flow_status),children:o("pay_confirm")})]})]})]}),f===2&&i.jsx(Ye,{setIndex:S,ConfirmOffline:J}),f===3&&i.jsx(qi,{financeId:(n==null?void 0:n.finance)??"",setIndex:S,setPayData:D,payData:R,ConfirmOffline:J,departmentId:((mi=(ji=(xi=n==null?void 0:n.applicationId)==null?void 0:xi.applicationUnit)==null?void 0:ji.hostel)==null?void 0:mi._id)??"",flowAs:"Hostel"}),f===4&&i.jsx(Mi,{financeId:(n==null?void 0:n.finance)??"",setIndex:S,setPayData:D,payData:R,ConfirmOffline:J,departmentId:((vi=(Si=(si=n==null?void 0:n.applicationId)==null?void 0:si.applicationUnit)==null?void 0:Si.hostel)==null?void 0:vi._id)??"",flowAs:"Hostel"}),f===5&&i.jsx($i,{financeId:(n==null?void 0:n.finance)??"",setIndex:S,setPayData:D,payData:R,ConfirmOffline:J,departmentId:((Ai=(wi=(Ii=n==null?void 0:n.applicationId)==null?void 0:Ii.applicationUnit)==null?void 0:wi.hostel)==null?void 0:Ai._id)??"",flowAs:"Hostel"}),f===6&&i.jsx(Oi,{financeId:(n==null?void 0:n.finance)??"",setIndex:S,setPayData:D,payData:R,ConfirmOffline:J,departmentId:((ki=(Ni=(bi=n==null?void 0:n.applicationId)==null?void 0:bi.applicationUnit)==null?void 0:Ni.hostel)==null?void 0:ki._id)??"",flowAs:"Hostel"}),a&&i.jsx(pn,{})]}),A&&i.jsx(Fe,{onClose:()=>C(!1),allContent:d,checkoutAdmissionHandler:X}),b&&i.jsx(ze,{viewDetail:!!b,hideModal:W,applicationId:b,completeApplication:!1})]}),x.run&&i.jsx(Yi,{msg:x.msg,run:x.run,setRun:()=>N({msg:"",run:!1}),postiton:"bottom",type:"error"})]})}const Fo=({message:l,onRefetchApplication:h})=>{var a,e;const{t:n}=dn(),[j,m]=t.useState(""),[o,_]=t.useState(""),[r,c]=t.useState(!1),[f,S]=t.useState(!1),[b,I]=t.useState({msg:"",run:!1}),[A]=Le(),C=()=>{var d;S(s=>!s),A({fid:l==null?void 0:l.finance,aid:(d=l==null?void 0:l.applicationId)==null?void 0:d._id,flow:"BY_HOSTEL"}).then(s=>{var x;S(N=>!N),(x=s==null?void 0:s.data)!=null&&x.denied?I({msg:"Before initiating payment. you must have a valid bank account to receive payment.",run:!0}):_(l)}).catch({})};return i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:["You have been selected for"," ",i.jsxs("span",{style:{fontWeight:"500"},children:[((a=l==null?void 0:l.applicationId)==null?void 0:a.applicationName)??"","."]})]}),i.jsxs("p",{children:["Your fee structure is (",i.jsx("span",{style:{color:"#002BBE",cursor:"pointer"},title:"View fees structure",onClick:()=>{var d;return m(((d=l==null?void 0:l.hostel_fee_structure)==null?void 0:d._id)??"")},children:"click here to view structure"})," ",")."]}),i.jsx("p",{style:{marginBottom:"0.5rem",fontWeight:"500"},children:"Complete your admission by paying applicable admission fees from below:"}),i.jsxs("p",{children:["Applicable Admission Fees: Rs."," ",i.jsx("span",{style:{fontWeight:"500"},children:((e=l==null?void 0:l.hostel_fee_structure)==null?void 0:e.applicable_fees)??0})]}),(l==null?void 0:l.isPaid)==="Paid"?"":(l==null?void 0:l.payMode)==="online"?i.jsxs(i.Fragment,{children:[(l==null?void 0:l.receipt_status)==="Rejected"&&i.jsx(yi,{item:l,openForm:r,setOpenForm:c,applicationStatusFetch:h}),(l==null?void 0:l.receipt_status)==="Rejected"?"":(l==null?void 0:l.receipt_status)==="Approved"?i.jsx("p",{children:"Admission confirmation is in process. Payment receipt accepted."}):i.jsx("p",{children:"Admission confirmation is in process. Payment receipt is being requested. Stay updated"}),i.jsxs("section",{children:[i.jsx("h6",{className:v.online_payment_note,children:n("online_payment_note")}),(l==null?void 0:l.receipt_status)==="Rejected"&&i.jsx("button",{className:v.rejected_btn,onClick:()=>c(d=>!d),children:n("re_apply_for_receipt")}),(l==null?void 0:l.receipt_status)==="Approved"&&i.jsx(Qi,{receiptId:l==null?void 0:l.receipt}),(l==null?void 0:l.receipt_status)==="Requested"&&i.jsx("button",{className:v.requested_btn,children:n("requested")})]})]}):i.jsx("div",{className:v.itemrow,children:i.jsx("div",{className:`${v.itembtn} ${v.blue}`,style:{width:"100%"},onClick:C,children:"Pay Admission Fees"})}),j&&i.jsx(Li,{structureId:j,setStructureId:m,viewAs:"HOSTEL_SEARCH"}),i.jsx(Vo,{addDisplay:!!o,hideModal:()=>_(""),statusQuery:o,onRefetchApplication:h,isFeesEditable:!0}),i.jsx(Yi,{msg:b.msg,run:b.run,setRun:()=>I({msg:"",run:!1}),postiton:"bottom",type:"error"}),f&&i.jsx(pn,{})]})};function Ue(){var a;const{t:l}=dn(),h=no(e=>e.idChange),{data:n,refetch:j}=io(h==null?void 0:h.id,{skip:!(h!=null&&h.id)});lo.useEffect(()=>{h!=null&&h.id&&j()},[h==null?void 0:h.id,j]);const[m,o]=t.useState(""),[_,r]=t.useState(!1),[c,f]=t.useState(""),[S,b]=t.useState(!1),{getFeeReceiptDetail:I,getFeeReceiptDetailRefetch:A}=Xi({rid:m,skip:!m});t.useEffect(()=>{m&&A()},[m,A]),t.useEffect(()=>{I!=null&&I.receipt&&(I!=null&&I.all_remain)&&f(I)},[I]),t.useEffect(()=>{var e;if(c){const d=new Worker(new URL(Ke,import.meta.url),{type:"module"});if(((e=c==null?void 0:c.all_remain)==null?void 0:e.remaining_flow)==="Hostel Application"){const{institute:s,studentInfo:x,paymentReceiptInfo:N}=Xe(c==null?void 0:c.all_remain,c==null?void 0:c.receipt);d.postMessage({institute:s,studentInfo:x,paymentReceiptInfo:N,printReceiptType:(N==null?void 0:N.transactonRefund)==="Refunded"?"HOSTEL_REFUND":"HOSTEL"})}else{const{institute:s,studentInfo:x,paymentReceiptInfo:N}=Ze(c==null?void 0:c.all_remain,c==null?void 0:c.receipt);d.postMessage({institute:s,studentInfo:x,paymentReceiptInfo:N,printReceiptType:(N==null?void 0:N.transactonRefund)==="Refunded"?"ADMISSION_REFUND":"ADMISSION"})}d.onmessage=s=>{s&&(window.open(s.data,"_blank"),r(x=>!x),f(""),d.terminate())}}},[c]);const C=e=>{r(d=>!d),o(e),m===e&&f(I)};return i.jsxs("div",{className:v.applicationStatus,children:[(a=n==null?void 0:n.status)==null?void 0:a.map((e,d)=>{var s,x,N,R,D,E;return e!=null&&e.for_selection?i.jsxs("div",{className:v.item,children:[i.jsx("h6",{className:v.status_institute_name,children:(s=e==null?void 0:e.instituteId)==null?void 0:s.insName}),(e==null?void 0:e.for_selection)==="Yes"&&(e==null?void 0:e.flow_status)==="Admission Application"&&i.jsx($o,{message:e,onRefetchApplication:j}),i.jsxs("div",{className:v.timeDate,children:[i.jsxs("p",{children:[Hi(e==null?void 0:e.createdAt).format("dddd"),","," ",Hi(e==null?void 0:e.createdAt).format("DD MMM yyyy")]}),i.jsx("p",{children:Hi(e==null?void 0:e.createdAt).format("LT")})]})]},d):i.jsxs("div",{className:v.item,children:[i.jsx("h6",{className:v.status_institute_name,children:(x=e==null?void 0:e.instituteId)==null?void 0:x.insName}),e!=null&&e.document_visible?(e==null?void 0:e.for_docs)==="Yes"?(e==null?void 0:e.flow_status)==="Hostel Application"?i.jsx(Fo,{message:e,onRefetchApplication:j}):i.jsx(Ho,{message:e,onRefetchApplication:j}):(e==null?void 0:e.admission_process)==="Yes"?i.jsx(qo,{message:e}):(e==null?void 0:e.flow_status)==="Hostel Application"?i.jsx(Lo,{message:e}):i.jsx(Uo,{message:e}):(e==null?void 0:e.receipt_status)==="Requested"?i.jsxs(i.Fragment,{children:[i.jsx("p",{children:e==null?void 0:e.content}),i.jsxs("button",{className:v.requested_btn,children:[((N=e==null?void 0:e.fee_receipt)==null?void 0:N.fee_payment_mode)??""," ",l("requested")]})]}):(e==null?void 0:e.receipt_status)==="Approved"?i.jsxs(i.Fragment,{children:[i.jsx("p",{children:e==null?void 0:e.content}),i.jsx("p",{children:"Admission confirmation is in process. Payment receipt accepted."}),i.jsx(Qi,{receiptId:(R=e==null?void 0:e.fee_receipt)==null?void 0:R._id})]}):(e==null?void 0:e.receipt_status)==="Rejected"?i.jsxs(i.Fragment,{children:[i.jsx("p",{children:e==null?void 0:e.content}),i.jsx(yi,{item:e,openForm:S,setOpenForm:b,applicationStatusFetch:j}),i.jsxs("button",{className:v.rejected_btn,onClick:()=>b(M=>!M),children:[((D=e==null?void 0:e.fee_receipt)==null?void 0:D.fee_payment_mode)??""," ",l("re_apply_for_receipt")]})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{children:e==null?void 0:e.content}),((E=e==null?void 0:e.fee_receipt)==null?void 0:E._id)&&i.jsx("p",{style:{fontWeight:"500",cursor:"pointer"},onClick:()=>{var M;return C((M=e==null?void 0:e.fee_receipt)==null?void 0:M._id)},children:"View Receipt"})]}),i.jsxs("div",{className:v.timeDate,children:[i.jsx("p",{children:Hi(e==null?void 0:e.createdAt).format("ll")}),i.jsx("p",{children:Hi(e==null?void 0:e.createdAt).format("LT")})]})]},d)}),_&&i.jsx(pn,{})]})}const Bc=()=>{var h,n,j;const l=eo();return i.jsx(i.Fragment,{children:((h=l.state)==null?void 0:h.openAs)==="STUDENT"?i.jsx(mo,{index:"0",sid:((n=l==null?void 0:l.state)==null?void 0:n.sid)??"",children:i.jsx(Ue,{})}):i.jsx(oo,{index:"0",sid:((j=l==null?void 0:l.state)==null?void 0:j.sid)??"",children:i.jsx(Ue,{})})})};export{Bc as default};
