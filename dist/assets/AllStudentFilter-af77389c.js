import{u as D,r as i,ac as N,j as c}from"./index-0ca76035.js";import{P as w}from"./PopupWrapper-2578092d.js";import{s as m}from"./FeesStructure.module-7a88fbbc.js";import{B as W}from"./BorderBottom-1dc6f53e.js";import{c as H}from"./constant_value-4cd2b3e0.js";import{e as U}from"./admission-api-925391d9.js";import{C as _}from"./CustomSelectDepartment-11201deb.js";const X=({onClose:u,instituteId:h,setApplyFilter:b,applyFilter:a})=>{var S;const{t:n}=D(),[x,G]=i.useState("CARD_SHOW"),[s,o]=i.useState({department:[],batch:[],standard:[],gender:"",caste:""}),[C,j]=i.useState([]),[L,A]=i.useState([]),{allDepartment:f,allDepartmentRefetch:g}=N({id:h,skip:!h}),[R]=U();i.useEffect(()=>{h&&g()},[h,g]),i.useEffect(()=>{s.department&&R({departmentList:{arr:s.department}}).then(e=>{var r,t,d,l;(r=e.data)!=null&&r.master&&j((t=e.data)==null?void 0:t.master),(d=e.data)!=null&&d.batch&&A((l=e.data)==null?void 0:l.batch)}).catch({})},[s.department]),i.useEffect(()=>{o({department:(a==null?void 0:a.depart_arr)??[],batch:(a==null?void 0:a.batch_arr)??[],standard:(a==null?void 0:a.master_arr)??[],gender:a==null?void 0:a.gender,caste:a==null?void 0:a.cast_category})},[a]);const p=()=>{u()},E=e=>{var r;(r=s.department)!=null&&r.includes(e)?o(t=>{var d;return{...t,department:(d=t.department)==null?void 0:d.filter(l=>l!==e)}}):o(t=>({...t,department:[...t.department,e]}))},T=e=>{var r;(r=s.batch)!=null&&r.includes(e)?o(t=>{var d;return{...t,batch:(d=t.batch)==null?void 0:d.filter(l=>l!==e)}}):o(t=>({...t,batch:[...t.batch,e]}))},V=e=>{var r;(r=s.standard)!=null&&r.includes(e)?o(t=>{var d;return{...t,standard:(d=t.standard)==null?void 0:d.filter(l=>l!==e)}}):o(t=>({...t,standard:[...t.standard,e]}))},k=e=>{o(r=>({...r,gender:e}))},M=e=>{o(r=>({...r,caste:e}))},B=()=>{b(()=>({depart_arr:s.department,batch_arr:s.batch,master_arr:s.standard,gender:s.gender,cast_category:s.caste,filter_by:""})),u()},O=()=>{b(()=>({depart_arr:[],batch_arr:[],master_arr:[],gender:"",cast_category:"",filter_by:"Clear_All"})),u()};return c.jsx(c.Fragment,{children:x==="CARD_SHOW"&&c.jsx(w,{onClose:p,children:c.jsxs("div",{className:m.seating_modal,children:[c.jsxs("div",{className:m.add_category_modal_title,children:[c.jsx("h6",{children:n("apply_filter")}),c.jsx("img",{src:"/images/close-post-icon.svg",onClick:u,alt:""})]}),c.jsx(W,{customStyle:{width:"100%",marginTop:"0.6rem",marginBottom:"0.6rem"}}),c.jsx(_,{selectLabel:n("select_department_optional"),selectedValue:n("select_department_optional_placeholder"),options:((S=f==null?void 0:f.institute)==null?void 0:S.depart)??[],onClick:E,viewAs:"CUSTOM_FILTER",defalutValue:s.department}),c.jsx(_,{selectLabel:n("select_batch_optional"),selectedValue:n("select_batch_optional_placeholder"),options:L,onClick:T,viewAs:"CUSTOM_FILTER",defalutValue:s.batch}),c.jsx(_,{selectLabel:n("select_standard_year"),selectedValue:n("select_standard_year_placeholder"),options:C,onClick:V,viewAs:"CUSTOM_FILTER",defalutValue:s.standard}),c.jsx(_,{selectLabel:n("select_gender"),selectedValue:n("select_gender_placeholder"),options:["Male","Female","Other"],onClick:k,viewAs:"NORMAL_FILTER",defalutValue:s.gender}),c.jsx(_,{selectLabel:n("select_caste_catgory"),selectedValue:n("select_caste_catgory_placeholder"),options:H,onClick:M,viewAs:"NORMAL_FILTER",defalutValue:s.caste}),c.jsxs("div",{className:m.btn_group,children:[c.jsx("button",{className:m.set_fees_structure_btn,style:{justifyContent:"center"},onClick:B,children:n("apply_filter")}),c.jsx("button",{className:m.set_fees_structure_btn,style:{justifyContent:"center",border:"1px solid rgba(0, 0, 0, 0.12)",color:"rgba(18, 18, 18, 0.8)"},onClick:O,children:n("clear_filter")})]})]})})})};export{X as A};
