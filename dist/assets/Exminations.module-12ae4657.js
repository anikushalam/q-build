import{u as J,r as x,j as e,S as R,W as se,Q as q}from"./index-0ca76035.js";import{P as Q}from"./PopupWrapper-2578092d.js";import{J as M}from"./JoinFormInput-82706177.js";import{s as h}from"./SeatingArrangement.module-3f4ae6aa.js";import{B}from"./BorderBottom-1dc6f53e.js";import{T as K}from"./TileWrapper-48278ce6.js";import{h as ae,W as ie,X as ne,Y as oe,Z as me,_ as ce,$ as le}from"./department-api-e4b13f05.js";import{E as L}from"./EmptyInfo-dd58cebb.js";import{J as Y}from"./JoinFormInputView-2b5b0bdd.js";import{J as re}from"./JoinFormCalender-d186c4ef.js";import{J as _e}from"./JoinFormFile-a00a41cd.js";import{A as de}from"./AddAttainmentInSubject-61c99a63.js";const he="_exam_card_container_7d6i8_1",xe="_exam_active_card_7d6i8_22",fe="_exam_inner_text_7d6i8_26",ge="_exam_date_7d6i8_36",pe="_imagedot_7d6i8_66",Se="_dot_7d6i8_76",Te="_blue_7d6i8_81",Ne="_red_7d6i8_85",Ze={exam_card_container:he,exam_active_card:xe,exam_inner_text:fe,exam_date:ge,imagedot:pe,dot:Se,blue:Te,red:Ne},ue=[{name:"yes",key:"YES"},{name:"no",key:"NO"}],Ee=[{name:"internal",key:"INTERNAL"},{name:"external",key:"EXTERNAL"}],Ce=({onGrabInfo:s,examInfo:r,openAs:g})=>{const{t:T}=J(),[d,n]=x.useState({examName:"",examWeight:"",copo_attainment:"NO",copo_attainment_type:"INTERNAL"}),[i,m]=x.useState("");x.useEffect(()=>{r&&n(S=>({...S,...r})),g==="BACKLOG"&&n(S=>({...S,examType:"Final"}))},[r,g]);const c=S=>{S.target.name==="examWeight"?n(p=>({...p,examWeight:+S.target.value})):n(p=>({...p,[S.target.name]:S.target.value}))},a=S=>{const p={};for(let y in S)y==="examWeight"||S[y]||(p[y]=`${y} is required!`);return p},l=()=>{const S=a(d);let p=!1;for(let y in S)if(y){p=!0;break}p?m(S):s(d)},_=S=>{n(p=>({...p,copo_attainment:S}))},f=S=>{n(p=>({...p,copo_attainment_type:S}))};return e.jsxs("div",{className:h.seating_modal,children:[e.jsxs("section",{className:h.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("h6",{children:T("create_exam")}),e.jsx("button",{className:h.next_btn,title:"Next",onClick:l,children:T("next")})]}),e.jsx(B,{customStyle:{width:"100%",marginTop:"0.5rem"}}),e.jsx(M,{labelText:T("exam_name"),placeholder:T("enter_exam_name"),name:"examName",value:d==null?void 0:d.examName,type:"text",onChange:c,errorShow:i.examName}),e.jsx(M,{labelText:T("exam_weight"),placeholder:T("enter_exam_weightage"),name:"examWeight",value:d==null?void 0:d.examWeight,type:"number",onChange:c,errorShow:i.examWeight}),e.jsx(K,{labelText:"copo_attainment",tileList:ue,activeTile:d.copo_attainment,onTile:_}),d.copo_attainment==="YES"&&e.jsx(K,{labelText:"attainment_type",tileList:Ee,activeTile:d.copo_attainment_type,onTile:f})]})},V=({cls:s,onSelect:r,isMaster:g})=>e.jsx(e.Fragment,{children:g?e.jsxs("div",{className:h.class_container,title:"Select standard",onClick:()=>r(s),style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"1rem"},children:[e.jsx("img",{src:"/images/master-24-grey-icon.svg",alt:"classes icon"}),e.jsx("h6",{children:(s==null?void 0:s.className)??""})]}):e.jsx("div",{className:h.class_container,title:"Select class",onClick:()=>r(s),children:e.jsx("h6",{children:`${(s==null?void 0:s.className)??""} - ${(s==null?void 0:s.classTitle)??""}`})})}),je=({onBack:s,did:r,bid:g,onStandardSelect:T})=>{const{t:d}=J(),[n,i]=x.useState(!0),[m,c]=x.useState([]),{departmentAllClassMaster:a,departmentAllClassMasterRefetch:l}=ae({data:{did:r,bid:g,page:1,limit:50},skip:!g||!r});return x.useEffect(()=>{g&&r&&l()},[g,r,l]),x.useEffect(()=>{var _,f;(_=a==null?void 0:a.classMaster)!=null&&_.length?(c(a==null?void 0:a.classMaster),i(!1)):((f=a==null?void 0:a.classMaster)==null?void 0:f.length)===0&&i(!1)},[a==null?void 0:a.classMaster]),e.jsxs("div",{className:h.seating_modal,children:[e.jsxs("section",{className:h.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:s,alt:"back"}),e.jsx("h6",{children:d("select_standard")})]}),e.jsx(B,{customStyle:{width:"100%",marginTop:"0.5rem",marginBottom:"0.5rem"}}),m==null?void 0:m.map(_=>e.jsx(V,{cls:_,isMaster:!0,onSelect:T},_._id)),!n&&!(m!=null&&m.length)&&e.jsx(L,{customStyleContainer:{marginTop:"4rem"},title:"No any standard found",subtitle:"Please make sure you have created standard."}),n&&e.jsx(R,{})]})},ke=({onBack:s,did:r,onStandardSelect:g})=>{const{t:T}=J(),[d,n]=x.useState(!0),[i,m]=x.useState([]),{departmentAllClassMasterBacklog:c,departmentAllClassMasterBacklogRefetch:a}=ie({data:{did:r,page:1,limit:50},skip:!r});return x.useEffect(()=>{r&&a()},[r,a]),x.useEffect(()=>{var l,_;(l=c==null?void 0:c.classMaster)!=null&&l.length?(m(c==null?void 0:c.classMaster),n(!1)):((_=c==null?void 0:c.classMaster)==null?void 0:_.length)===0&&n(!1)},[c==null?void 0:c.classMaster]),e.jsxs("div",{className:h.seating_modal,children:[e.jsxs("section",{className:h.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:s,alt:"back"}),e.jsx("h6",{children:T("select_standard")})]}),e.jsx(B,{customStyle:{width:"100%",marginTop:"0.5rem",marginBottom:"0.5rem"}}),i==null?void 0:i.map(l=>e.jsx(V,{cls:l,isMaster:!0,onSelect:g},l._id)),!d&&!(i!=null&&i.length)&&e.jsx(L,{customStyleContainer:{marginTop:"4rem"},title:"No any standard found",subtitle:"Please make sure you have created standard."}),d&&e.jsx(R,{})]})},Z=({subject:s,onSelect:r,isMaster:g})=>e.jsx(e.Fragment,{children:g?e.jsxs("div",{className:h.class_container,title:"Select subject",onClick:()=>r(s),style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"1rem"},children:[e.jsx("img",{src:"/images/book-24-icon.svg",alt:"subject icon"}),e.jsx("h6",{children:(s==null?void 0:s.subjectName)??""})]}):e.jsx("div",{className:h.class_container,title:"Select subject",onClick:()=>r(s),children:e.jsx("h6",{children:(s==null?void 0:s.subjectName)??""})})}),we=({cmid:s,onSubjectSelect:r,bid:g,onBack:T})=>{const{t:d}=J(),[n,i]=x.useState(!0),[m,c]=x.useState([]),{departmentAllSubjectMaster:a,departmentAllSubjectMasterRefetch:l}=ne({data:{cmid:s,bid:g,page:1,limit:50},skip:!g||!s});return x.useEffect(()=>{g&&s&&l()},[g,s,l]),x.useEffect(()=>{var _,f;(_=a==null?void 0:a.classMaster)!=null&&_.length?(c(a==null?void 0:a.classMaster),i(!1)):((f=a==null?void 0:a.classMaster)==null?void 0:f.length)===0&&i(!1)},[a==null?void 0:a.classMaster]),e.jsxs("div",{className:h.seating_modal,children:[e.jsxs("section",{className:h.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:T,alt:"back"}),e.jsx("h6",{children:d("select_subject")})]}),e.jsx(B,{customStyle:{width:"100%",marginTop:"0.5rem",marginBottom:"0.5rem"}}),m==null?void 0:m.map(_=>e.jsx(Z,{subject:_,isMaster:!0,onSelect:r},_._id)),!n&&!(m!=null&&m.length)&&e.jsx(L,{customStyleContainer:{marginTop:"9rem"},title:"No any subject found",subtitle:"Please make sure you have created subject master."}),n&&e.jsx(R,{})]})},ye=({cmid:s,onSubjectSelect:r,bid:g,onBack:T})=>{const{t:d}=J(),[n,i]=x.useState(!0),[m,c]=x.useState([]),{departmentAllSubjectMasterBacklog:a,departmentAllSubjectMasterBacklogRefetch:l}=oe({data:{cmid:s,page:1,limit:50},skip:!s});return x.useEffect(()=>{s&&l()},[s,l]),x.useEffect(()=>{var _,f;(_=a==null?void 0:a.classMaster)!=null&&_.length?(c(a==null?void 0:a.classMaster),i(!1)):((f=a==null?void 0:a.classMaster)==null?void 0:f.length)===0&&i(!1)},[a==null?void 0:a.classMaster]),e.jsxs("div",{className:h.seating_modal,children:[e.jsxs("section",{className:h.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:T,alt:"back"}),e.jsx("h6",{children:d("select_subject")})]}),e.jsx(B,{customStyle:{width:"100%",marginTop:"0.5rem",marginBottom:"0.5rem"}}),m==null?void 0:m.map(_=>e.jsx(Z,{subject:_,isMaster:!0,onSelect:r},_._id)),!n&&!(m!=null&&m.length)&&e.jsx(L,{customStyleContainer:{marginTop:"9rem"},title:"No any subject found",subtitle:"Please make sure you have created subject master."}),n&&e.jsx(R,{})]})},Oe=({onBack:s,clsName:r,subjectName:g,onGrabSubjectInfo:T,createdBy:d})=>{var W,o,I;const{t:n}=J(),[i,m]=x.useState({totalMarks:"",date:"",startTime:"",endTime:"",subject_attachment:[]}),[c,a]=x.useState(""),[l,_]=x.useState(!1),[f]=se(),S=j=>{m(E=>({...E,date:j}))},p=j=>{m(E=>({...E,totalMarks:+j.target.value}))},y=j=>{m(E=>({...E,[j.target.name]:j.target.value}))},F=j=>{const E={};for(let O in j)O==="subject_attachment"||j[O]||(E[O]=`${O} is required!`);return E},H=()=>{const j=F(i);let E=!1;for(let O in j)if(O){E=!0;break}E?a(j):T(i)},u=j=>{if(j.target.files[0]){_(O=>!O);const E=new FormData;E.append("file",j.target.files[0]),f({fileUpload:E}).then(O=>{_($=>!$),m($=>{var A,k,U;return{...$,subject_attachment:[{documentName:(A=j.target.files[0])==null?void 0:A.name,documentKey:(k=O.data)==null?void 0:k.imageKey,documentType:(U=j.target.files[0])==null?void 0:U.type}]}})}).catch(()=>{_(O=>!O)})}};return e.jsxs("div",{className:h.seating_modal,children:[e.jsxs("section",{className:h.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:s,alt:"back"}),e.jsx("h6",{children:n("subject_details")}),e.jsx("button",{className:h.next_btn,title:"Next",onClick:H,children:n("next")})]}),e.jsx(B,{customStyle:{width:"100%",marginTop:"0.5rem",marginBottom:"0.5rem"}}),d==="SUBJECT_TEACHER"?null:e.jsxs(e.Fragment,{children:[e.jsx(Y,{labelText:n("standard"),value:r}),e.jsx(Y,{labelText:n("subject_exam"),value:g})]}),e.jsx(M,{labelText:n("marks"),placeholder:n("enter_the_marks"),name:"totalMarks",value:i==null?void 0:i.totalMarks,type:"number",onChange:p,errorShow:c.totalMarks}),e.jsx(re,{labelText:n("date"),placeholder:n("date"),name:"date",value:i.date,onDateFunction:S,customStyleContainer:{position:"relative",width:"100%"},datePickerPosition:{top:"-5rem",left:"2rem"},errorShow:c.date}),e.jsx(M,{labelText:n("start_time"),name:"startTime",value:i==null?void 0:i.startTime,type:"time",onChange:y,errorShow:c.startTime}),e.jsx(M,{labelText:n("end_time"),name:"endTime",value:i==null?void 0:i.endTime,type:"time",onChange:y,errorShow:c.endTime}),d==="SUBJECT_TEACHER"?e.jsx(_e,{labelText:n("upload_file"),name:"question_file",value:(W=i==null?void 0:i.subject_attachment)!=null&&W.length?{originalName:(I=(o=i==null?void 0:i.subject_attachment)==null?void 0:o[0])==null?void 0:I.documentName}:"",onChange:u,customStyleContainer:{width:"100%"}}):null,l&&e.jsx(q,{})]})},De=({subject:s,classMaster:r,customCardStyle:g,onCurrentSubject:T,viewAs:d})=>{var m,c,a,l,_;const{t:n}=J(),i=()=>{d==="SEATING"&&T({classMaster:r,subject:s})};return e.jsxs("div",{className:d==="SEATING"?`${h.subject_container} ${h.subject_container_active}`:h.subject_container,onClick:i,style:g,children:[e.jsx("h6",{children:(s==null?void 0:s.subjectName)??""}),e.jsx("p",{className:h.subject_standard,children:r??""}),e.jsxs("p",{className:h.subject_other,children:[n("date")," ",": ",(s==null?void 0:s.date)??""]}),e.jsxs("p",{className:h.subject_other,children:[n("time"),": ",`${(s==null?void 0:s.startTime)??""} to ${(s==null?void 0:s.endTime)??""}`]}),e.jsxs("p",{className:h.subject_other,children:[n("marks"),": ",(s==null?void 0:s.totalMarks)??0]}),e.jsxs("p",{className:h.subject_other,children:[n("co_mapping")," : ",(m=s==null?void 0:s.copo_list)==null?void 0:m.map((f,S)=>e.jsxs("span",{children:[S<=0?"":", ",f==null?void 0:f.attainment_name," ",": ",(f==null?void 0:f.marks)??""]},f==null?void 0:f.attainmentId))]}),(a=(c=s==null?void 0:s.subject_attachment)==null?void 0:c[0])!=null&&a.documentName?e.jsxs("p",{className:h.subject_other,children:[n("file"),": ",(_=(l=s==null?void 0:s.subject_attachment)==null?void 0:l[0])==null?void 0:_.documentName]}):""]})},Je=({onClose:s,bid:r,did:g,createExam:T,onResetAfterCreate:d,openAs:n,createdBy:i,sid:m,smid:c})=>{const{t:a}=J(),[l,_]=x.useState(""),[f,S]=x.useState([]),[p,y]=x.useState([]),[F,H]=x.useState([]),[u,W]=x.useState(""),[o,I]=x.useState(""),[j,E]=x.useState(!1),[O]=me(),[$]=ce(),[A]=le(),[k,U]=x.useState(null),w=t=>{_(t)},P=t=>{W(t),w("SHOW_SUBJECT")},G=t=>{I(t),w("SHOW_SUBJECT_INFO")},z=t=>{var X;let C="",D="";if(t.startTime>="12:00")if(t.startTime==="12:00"){const N=+t.startTime.slice(0,2);C=N>9?`${N}:${t.startTime.slice(3)} Pm`:`0${N}:${t.startTime.slice(3)} Pm`}else{const N=+t.startTime.slice(0,2)-12;C=N>9?`${N}:${t.startTime.slice(3)} Pm`:`0${N}:${t.startTime.slice(3)} Pm`}else C=`${t.startTime} Am`;if(t.endTime>="12:00")if(t.endTime==="12:00"){const N=+t.endTime.slice(0,2);D=N>9?`${N}:${t.endTime.slice(3)} Pm`:`0${N}:${t.endTime.slice(3)} Pm`}else{const N=+t.endTime.slice(0,2)-12;D=N>9?`${N}:${t.endTime.slice(3)} Pm`:`0${N}:${t.endTime.slice(3)} Pm`}else D=`${t.endTime} Am`;const b=[];if(((X=u==null?void 0:u.classDivision)==null?void 0:X.length)>0)for(let N of u==null?void 0:u.classDivision)b.push(N==null?void 0:N._id);T.copo_attainment==="YES"?(U(i==="SUBJECT_TEACHER"?{selectedSubject:{totalMarks:t==null?void 0:t.totalMarks,date:t==null?void 0:t.date,startTime:C,endTime:D,subject_attachment:t==null?void 0:t.subject_attachment},showSubject:{totalMarks:t==null?void 0:t.totalMarks,date:t==null?void 0:t.date,startTime:C,endTime:D,subject_attachment:t==null?void 0:t.subject_attachment}}:{selectedSubject:{subjectIds:o.ids,subjectName:o==null?void 0:o.subjectName,totalMarks:t==null?void 0:t.totalMarks,date:t==null?void 0:t.date,startTime:C,endTime:D,_id:o==null?void 0:o._id},newArray:b,showSubject:{subjectIds:o.ids,subjectName:o==null?void 0:o.subjectName,totalMarks:t==null?void 0:t.totalMarks,date:t==null?void 0:t.date,startTime:C,endTime:D,_id:o==null?void 0:o._id,classMaster:u==null?void 0:u.className}}),w("SHOW_SUBJECT_CO")):(y(N=>[...N,{subjectIds:o.ids,subjectName:o==null?void 0:o.subjectName,totalMarks:t==null?void 0:t.totalMarks,date:t==null?void 0:t.date,startTime:C,endTime:D,_id:o==null?void 0:o._id}]),S(N=>[...new Set([...N,...b].map(JSON.stringify))].map(JSON.parse)),H(N=>[...N,{subjectIds:o.ids,subjectName:o==null?void 0:o.subjectName,totalMarks:t==null?void 0:t.totalMarks,date:t==null?void 0:t.date,startTime:C,endTime:D,_id:o==null?void 0:o._id,classMaster:u==null?void 0:u.className}]),I(""),W(""),w(""))},v=t=>{i==="SUBJECT_TEACHER"?(y(C=>[...C,{...k==null?void 0:k.selectedSubject,copo_list:t}]),H(C=>[...C,{...k==null?void 0:k.showSubject,copo_list:t}]),I(""),W(""),w(""),U(null)):(y(C=>[...C,{...k==null?void 0:k.selectedSubject,copo_list:t}]),S(C=>[...new Set([...C,...k==null?void 0:k.newArray].map(JSON.stringify))].map(JSON.parse)),H(C=>[...C,{...k==null?void 0:k.showSubject,copo_list:t}]),I(""),W(""),w(""),U(null))},ee=()=>{i==="SUBJECT_TEACHER"&&m?(E(t=>!t),$({sid:m,exam:{examInfo:T,subject:p==null?void 0:p[0]}}).then(()=>{d(),E(t=>!t)}).catch(()=>{E(t=>!t)})):f!=null&&f.length&&(p!=null&&p.length)&&(E(t=>!t),n==="BACKLOG"?A({did:g,exam:{...T,allclasses:f,allsubject:p}}).then(()=>{d(),E(t=>!t)}).catch(()=>{E(t=>!t)}):O({bid:r,exam:{...T,allclasses:f,allsubject:p}}).then(()=>{d(),E(t=>!t)}).catch(()=>{E(t=>!t)}))},te=()=>{l===""?s():l==="SHOW_STANDARD"?w(""):l==="SHOW_SUBJECT"?w("SHOW_STANDARD"):l==="SHOW_SUBJECT_INFO"?w("SHOW_SUBJECT"):l==="SHOW_SUBJECT_CO"&&w("SHOW_SUBJECT_INFO")};return e.jsxs(Q,{onClose:te,children:[!l&&e.jsxs("div",{className:h.seating_modal,children:[e.jsxs("section",{className:h.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:s,alt:""}),e.jsx("h6",{children:a("create_exam")}),e.jsx("button",{className:h.next_btn,title:"Save exam",onClick:ee,children:a("save")})]}),e.jsx(B,{customStyle:{width:"100%",marginTop:"0.5rem",marginBottom:"0.5rem"}}),e.jsx("div",{className:h.add_container,children:i==="SUBJECT_TEACHER"?p!=null&&p[0]?null:e.jsx("p",{className:h.add_aubject,onClick:()=>w("SHOW_SUBJECT_INFO"),children:a("add_subject_details")}):e.jsx("p",{className:h.add_aubject,onClick:()=>w("SHOW_STANDARD"),children:a("add_subject")})}),F==null?void 0:F.map((t,C)=>e.jsx(De,{subject:t,classMaster:t==null?void 0:t.classMaster},C)),j&&e.jsx(q,{})]}),l==="SHOW_STANDARD"&&(n==="BACKLOG"?e.jsx(ke,{onBack:()=>w(""),did:g,onStandardSelect:P}):e.jsx(je,{onBack:()=>w(""),did:g,bid:r,onStandardSelect:P})),l==="SHOW_SUBJECT"&&(n==="BACKLOG"?e.jsx(ye,{onBack:()=>w("SHOW_STANDARD"),cmid:u==null?void 0:u._id,onSubjectSelect:G}):e.jsx(we,{onBack:()=>w("SHOW_STANDARD"),cmid:u==null?void 0:u._id,bid:r,onSubjectSelect:G})),l==="SHOW_SUBJECT_INFO"&&e.jsx(Oe,{onBack:()=>w(i==="SUBJECT_TEACHER"?"":"SHOW_SUBJECT"),clsName:u==null?void 0:u.className,subjectName:o==null?void 0:o.subjectName,onGrabSubjectInfo:z,createdBy:i}),l==="SHOW_SUBJECT_CO"&&e.jsx(de,{onBack:()=>w("SHOW_SUBJECT_INFO"),subjectName:o==null?void 0:o.subjectName,onGrabAttainment:v,smid:c||(o==null?void 0:o._id),stationaryPoint:k,createdBy:i})]})},ze=({onClose:s,bid:r,did:g,onRefetch:T,openAs:d,createdBy:n,sid:i,smid:m})=>{const[c,a]=x.useState("EXAM_INFO"),[l,_]=x.useState({examName:"",examWeight:"",copo_attainment:"NO",copo_attainment_type:"INTERNAL"}),f=y=>{_(F=>({...F,...y})),a("SCHEDULE_SUBJECT")},S=()=>{T(),s(),_({examName:"",examWeight:0}),a("EXAM_INFO")},p=()=>{c==="EXAM_INFO"?s():c==="SCHEDULE_SUBJECT"&&a("EXAM_INFO")};return e.jsxs(e.Fragment,{children:[c==="EXAM_INFO"&&e.jsx(Q,{onClose:p,children:e.jsx(Ce,{onClose:s,onGrabInfo:f,examInfo:l,openAs:d})}),c==="SCHEDULE_SUBJECT"&&e.jsx(Je,{onClose:()=>a("EXAM_INFO"),did:g,bid:r,createExam:l,onResetAfterCreate:S,openAs:d,createdBy:n,sid:i,smid:m})]})},Fe="_exam_container_1hp7w_1",We="_with_search_1hp7w_10",Ie="_search_container_1hp7w_26",Ue="_search_container_input_1hp7w_31",Be="_searchIcon_1hp7w_50",He="_search_container_filter_1hp7w_57",$e="_add_new_container_1hp7w_63",Me="_add_new_exam_1hp7w_68",ve={exam_container:Fe,with_search:We,search_container:Ie,search_container_input:Ue,searchIcon:Be,search_container_filter:He,add_new_container:$e,add_new_exam:Me};export{ze as E,De as S,Ze as a,V as b,ve as s};
