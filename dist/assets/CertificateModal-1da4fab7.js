import{u as z,r as n,k as X,W as Z,j as i,Q as tt,D as et,C as at}from"./index-731451a5.js";import{e as ot,H as it}from"./institute-staff-student-api-7f4890fe.js";import{J as T}from"./JoinFormFileEdit-e41481d6.js";import{P as st}from"./PopupWrapper-ffbaef7a.js";import{S as j}from"./StringLength-222a9fd1.js";import{J as p}from"./JoinFormInput-8e74a0e0.js";import"./JoinForm.module-212f9bb3.js";import"./ViewFileDialog-0c131c06.js";import"./Overlay-07ce6f88.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalBackdrop-5b309d60.js";import"./SearchHeader.module-b69c8942.js";import"./SearchModalWrapper-6e85c9f3.js";import"./StringLength.module-75a6e080.js";const nt="_addDisplay_16b6i_1",rt="_title_16b6i_8",lt="_body_16b6i_20",ft="_footer_16b6i_25",dt="_btn_16b6i_40",ct="_footerdisabled_16b6i_60",ut="_confirmMark_16b6i_66",_t="_marktabs_16b6i_77",ht="_condirmtab_16b6i_84",mt="_canceltab_16b6i_100",_={addDisplay:nt,title:rt,body:lt,footer:ft,btn:dt,footerdisabled:ct,confirmMark:ut,marktabs:_t,condirmtab:ht,canceltab:mt};function Ft({addDisplay:G,hideModal:x,instituteId:u,viewAs:v}){var N,U,P,R,E,O,J;const{t:l}=z(),[I,h]=n.useState(!1),[Q,L]=n.useState(""),[S,C]=n.useState(""),[W,w]=n.useState(!1),[A,B]=n.useState(!1),[pt,D]=n.useState(""),[y,H]=n.useState(""),m=X(e=>e.idChange.id),[k,F]=n.useState(""),{getEditable:t,getEditableRefetch:g}=ot({id:u||m,skip:v==="DESIGNATION_SIDE"?!u:!m}),[s,d]=n.useState({insAffiliated:(N=t==null?void 0:t.detail)==null?void 0:N.insAffiliated,insEditableText_one:(U=t==null?void 0:t.detail)==null?void 0:U.insEditableText_one,insEditableText_two:(P=t==null?void 0:t.detail)==null?void 0:P.insEditableText_two,affliatedLogo:(R=t==null?void 0:t.detail)==null?void 0:R.affliatedLogo,authority:(E=t==null?void 0:t.detail)==null?void 0:E.authority,authority_signature:(O=t==null?void 0:t.detail)==null?void 0:O.authority_signature,autority_stamp_profile:(J=t==null?void 0:t.detail)==null?void 0:J.autority_stamp_profile});n.useEffect(()=>{u&&g()},[m,u,g]),n.useEffect(()=>{var e,o,a,c,f,r,K;t!=null&&t.detail&&d({insAffiliated:(e=t==null?void 0:t.detail)==null?void 0:e.insAffiliated,insEditableText_one:(o=t==null?void 0:t.detail)==null?void 0:o.insEditableText_one,insEditableText_two:(a=t==null?void 0:t.detail)==null?void 0:a.insEditableText_two,affliatedLogo:(c=t==null?void 0:t.detail)==null?void 0:c.affliatedLogo,authority:(f=t==null?void 0:t.detail)==null?void 0:f.authority,authority_signature:(r=t==null?void 0:t.detail)==null?void 0:r.authority_signature,autority_stamp_profile:(K=t==null?void 0:t.detail)==null?void 0:K.autority_stamp_profile})},[t==null?void 0:t.detail]);const[M]=it(),[q]=Z(),b=(e,o)=>{var a;if((a=e.target.files)!=null&&a.length){const c=URL.createObjectURL(e.target.files[0]);C(e.target.files[0]),D(c),L(c),w(!0),F(o)}},V=e=>{if(e){h(a=>!a);const o=new FormData;o.append("file",e),q({fileUpload:o}).then(a=>{var c;(c=a.data)!=null&&c.imageKey&&d(k==="affliatedLogo"?f=>{var r;return{...f,affliatedLogo:(r=a.data)==null?void 0:r.imageKey}}:k==="authority_signature"?f=>{var r;return{...f,authority_signature:(r=a.data)==null?void 0:r.imageKey}}:f=>{var r;return{...f,autority_stamp_profile:(r=a.data)==null?void 0:r.imageKey}}),h(f=>!f),F("")}).catch({})}};n.useEffect(()=>{A&&V(S)},[A,S]);const Y=e=>{const o={};for(let a in e)["authority","authority_signature","autority_stamp_profile","affliatedLogo"].includes(a)||e[a]||(o[a]=`${a} is required!`);return o},$=()=>{const e=Y(s);let o=!1;for(let a in e)if(a){o=!0;break}o?H(e):(h(a=>!a),M({id:v==="DESIGNATION_SIDE"?u:m,e_data:s}).then(()=>{g(),x(),h(a=>!a)}).catch({}))};return i.jsx(i.Fragment,{children:i.jsxs(st,{open:G,onClose:()=>x(!1),children:[i.jsxs("div",{className:_.addDisplay,style:{maxHeight:"35rem",overflowY:"auto",scrollBehavior:"smooth"},children:[i.jsxs("div",{className:_.title,children:[i.jsx("h6",{children:l("menu")}),i.jsx("img",{src:"/images/close-post-icon.svg",alt:"",onClick:()=>x(!1)})]}),i.jsxs("div",{className:_.body,children:[i.jsx(p,{labelText:l("aff_with"),placeholder:"please enter affiliation body name",name:"insAffiliated",value:s==null?void 0:s.insAffiliated,type:"text",onChange:e=>{var o;((o=e.target.value)==null?void 0:o.length)<=50&&d(a=>({...a,insAffiliated:e.target.value}))},errorShow:y.insAffiliated}),i.jsx(j,{maxLength:50,valueLength:s.insAffiliated}),i.jsx(p,{labelText:l("accreditation"),placeholder:"Accredited by NAAC with B++, ISO 9001:2015 Certified",name:"insEditableText_one",value:s==null?void 0:s.insEditableText_one,type:"text",onChange:e=>{var o;((o=e.target.value)==null?void 0:o.length)<=200&&d(a=>({...a,insEditableText_one:e.target.value}))},errorShow:y.insEditableText_one}),i.jsx(j,{maxLength:200,valueLength:s.insEditableText_one}),i.jsx(p,{labelText:l("accreditation1"),placeholder:"Please enter other info like DTE code",name:"insEditableText_two",value:s==null?void 0:s.insEditableText_two,type:"text",onChange:e=>{var o;((o=e.target.value)==null?void 0:o.length)<=88&&d(a=>({...a,insEditableText_two:e.target.value}))},errorShow:y.insEditableText_two}),i.jsx(j,{maxLength:88,valueLength:s.insEditableText_two}),i.jsx(p,{labelText:l("competent_authority"),placeholder:l("competent_authority_lable"),name:"authority",value:s.authority,type:"text",onChange:e=>{d(o=>({...o,authority:e.target.value}))}}),i.jsx(T,{labelText:l("authority_signature"),name:"authority_signature_lable",value:s.authority_signature?s.authority_signature:"",onChange:e=>b(e,"authority_signature"),customStyleContainer:{width:"100%"}}),i.jsx(T,{labelText:l("affiliated_logo"),name:"affliatedLogo",value:s.affliatedLogo?s.affliatedLogo:"",onChange:e=>b(e,"affliatedLogo"),customStyleContainer:{width:"100%"}}),i.jsx(T,{labelText:l("authority_stamp_profile"),name:"autority_stamp_profile",value:s.autority_stamp_profile?s.autority_stamp_profile:"",onChange:e=>b(e,"autority_stamp_profile"),customStyleContainer:{width:"100%"}})]}),i.jsx("div",{className:_.footer,onClick:$,children:i.jsx("div",{className:_.btn,children:l("save_menu")})})]})," ",I&&i.jsx(tt,{}),i.jsx(et,{open:W,children:i.jsx(at,{setPhotoURL:L,photoURL:Q,setFile:C,setOpenCrop:w,setUpload:B,setProfilePhoto:D,first:1,second:1})})]})})}export{Ft as default};
