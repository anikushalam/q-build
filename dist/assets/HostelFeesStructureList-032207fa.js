import{u as P,c as V,r as n,t as W,j as e,Q as H,S as q}from"./index-0ca76035.js";import{g as z}from"./hostel-api-9294ced1.js";import{B as K}from"./BorderBottom-1dc6f53e.js";import{a as U,A as X}from"./ApplicationPreviewDetail-4a05e741.js";import{s as i}from"./HostelFeeStructure.module-5a40a31e.js";const g=({financeId:u,hostelId:t,instituteId:x,viewAs:m})=>{const{t:h}=P(),B=V(),[O,D]=n.useState(!1),[T,j]=W(),[o,p]=n.useState(1),[S,N]=n.useState(!0),[Q,v]=n.useState(!1),[G,d]=n.useState(!0),[l,E]=n.useState([]),[w,f]=n.useState(""),[J,Y]=n.useState(!1),{getHostelFeeStructureList:a,getHostelFeeStructureListRefetch:c}=z({data:{hid:t,page:o,limit:10},skip:!t});n.useEffect(()=>{t&&(d(!0),c())},[t,o,c]),n.useEffect(()=>{j&&S&&p(s=>s+1)},[j,S]),n.useEffect(()=>{var s,_;Q?(E(a==null?void 0:a.all_structures),d(!1),v(!1)):a!=null&&a.all_structures?(E(r=>[...new Set([...r,...a==null?void 0:a.all_structures].map(JSON.stringify))].map(JSON.parse)),d(!1)):((s=a==null?void 0:a.all_structures)==null?void 0:s.length)===0&&d(!1),((_=a==null?void 0:a.all_structures)==null?void 0:_.length)===10?N(!0):N(!1)},[a==null?void 0:a.all_structures]);const C=()=>{D(s=>!s)},R=()=>{p(1),v(!0),d(!0),c()},M=()=>{B(-1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:i.structure_container_title,style:{justifyContent:m==="HOSTEL_SEARCH"?"flex-start":"space-between",gap:"1rem"},children:[m==="HOSTEL_SEARCH"&&e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:M,alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),e.jsx("h6",{children:h("fees_structure")}),e.jsx("div",{className:i.upload_excel_container,children:m==="HOSTEL_SEARCH"?"":e.jsx("p",{className:i.add_new_category,onClick:C,children:h("add_new_fees_structure")})})]}),e.jsx(K,{customStyle:{marginBottom:"1rem"}}),l==null?void 0:l.map((s,_)=>{var r,b,k,A;return(l==null?void 0:l.length)===_+1?e.jsxs("div",{className:i.fees_card,ref:T,onClick:()=>f(s==null?void 0:s._id),style:{cursor:"pointer"},children:[e.jsx("img",{src:"/images/fees-category-icon.svg",alt:"categor icon"}),e.jsxs("div",{className:i.fees_card_text,children:[e.jsxs("div",{className:i.fees_card_text_bottom,children:[e.jsx("h6",{children:((r=s==null?void 0:s.category_master)==null?void 0:r.category_name)??""}),e.jsx("h6",{children:((b=s==null?void 0:s.class_master)==null?void 0:b.className)??""})]}),e.jsxs("div",{className:i.fees_card_text_bottom,children:[e.jsx("h6",{children:(s==null?void 0:s.structure_name)??""}),e.jsx("h6",{children:(s==null?void 0:s.total_admission_fees)??0})]})]})]},s==null?void 0:s._id):e.jsxs("div",{className:i.fees_card,onClick:()=>f(s==null?void 0:s._id),style:{cursor:"pointer"},children:[e.jsx("img",{src:"/images/fees-category-icon.svg",alt:"categor icon"}),e.jsxs("div",{className:i.fees_card_text,children:[e.jsxs("div",{className:i.fees_card_text_bottom,children:[e.jsx("h6",{children:((k=s==null?void 0:s.category_master)==null?void 0:k.category_name)??""}),e.jsx("h6",{children:((A=s==null?void 0:s.class_master)==null?void 0:A.className)??""})]}),e.jsxs("div",{className:i.fees_card_text_bottom,children:[e.jsx("h6",{children:(s==null?void 0:s.structure_name)??""}),e.jsx("h6",{children:(s==null?void 0:s.total_admission_fees)??0})]})]})]},s==null?void 0:s._id)}),J&&e.jsx(H,{}),G&&e.jsx(q,{}),O&&e.jsx(U,{onClose:C,financeId:u,departmentId:t,onRefetch:R,instituteId:x,flowAs:"Hostel_Manager"}),w&&e.jsx(X,{structureId:w,setStructureId:f,onRefetch:R,departmentId:t,instituteId:x,financeId:u,flowAs:"Hostel_Manager",viewAs:m})]})};export{g as H};
