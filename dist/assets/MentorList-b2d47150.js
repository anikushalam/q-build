import{g as M,v as S,j as n,L as j,e as w,A as x}from"./index-731451a5.js";import{e as W,f as X,g as Y,h as Z,i as f,j as i,c as t,b as m,d as ss}from"./search-api-15f7f9f9.js";import{s as c}from"./SearchStyle.module-ded1a888.js";const cs=({item:s,userId:h,hideModal:p})=>{var $,R,F,k,P,y,A,B,D,H;const u=s.username?s.username:s!=null&&s.name?s==null?void 0:s.name:"",e=M(),r=s==null?void 0:s._id,{showScrollbar:q}=S(),[L]=W(),[O]=X(),[E]=Y(),[z]=Z(),[G]=f(),[J]=i(),{userFollowingList:o,userFollowingListRefetch:g}=t({page:1,id:h,limit:100}),{userFollowList:a,userFollowListRefetch:I}=m({list:{page:1,id:h,limit:100}}),{userCircleList:d,userCircleListRefetch:_}=ss({page:1,id:h,limit:100});let v=[],N=[],U=[],b=[];for(let l=0;l<(($=o==null?void 0:o.uFollowing)==null?void 0:$.length);l++)v.push((R=o==null?void 0:o.uFollowing[l])==null?void 0:R._id);for(let l=0;l<((F=o==null?void 0:o.uInsFollowing)==null?void 0:F.length);l++)N.push((k=o==null?void 0:o.uInsFollowing[l])==null?void 0:k._id);for(let l=0;l<((P=a==null?void 0:a.followers)==null?void 0:P.length);l++)U.push((y=a==null?void 0:a.followers[l])==null?void 0:y._id);for(let l=0;l<((A=d==null?void 0:d.circle)==null?void 0:A.length);l++)b.push((B=d==null?void 0:d.circle[l])==null?void 0:B._id);const K=()=>{s!=null&&s.name?E({InsfollowId:s==null?void 0:s._id}).then(l=>{l.data.message&&g()}).catch({}):s!=null&&s.username&&L({userFollowId:s==null?void 0:s._id}).then(l=>{l.data.message&&g()}).catch({})},C=()=>{s!=null&&s.name?z({InsfollowId:s==null?void 0:s._id}).then(l=>{l.data.message&&g()}).catch({}):s!=null&&s.username&&O({userFollowId:s==null?void 0:s._id}).then(l=>{l.data.message&&g()}).catch({})},Q=()=>{G({followId:s==null?void 0:s._id}).then(l=>{l.data.message&&(_(),I())}).catch({})},T=()=>{J({followId:s==null?void 0:s._id}).then(l=>{l.data.message&&(_(),I())}).catch({})},V=()=>{q(),s.username?e(x.searchId({id:r,type:"ID",searchAs:"user"})):e(x.searchId({id:r,type:"ID",searchAs:"institute"})),p(!1)};return n.jsxs("div",{className:c.searchResult,children:[n.jsx(j,{to:`/q/${u}/profile`,onClick:V,children:n.jsxs("div",{className:c.searchResultLeft,children:[s!=null&&s.insName?n.jsx("img",{src:(s==null?void 0:s.photoId)!=="1"?`${w}/${s==null?void 0:s.insProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:""}):n.jsx("img",{src:(s==null?void 0:s.photoId)!=="1"?`${w}/${s==null?void 0:s.profilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:""}),n.jsxs("div",{children:[s!=null&&s.name?n.jsx("h6",{children:s==null?void 0:s.name}):s!=null&&s.username?n.jsx("h6",{children:s==null?void 0:s.username}):"",s!=null&&s.insName?n.jsx("p",{children:s==null?void 0:s.insName}):s!=null&&s.userLegalName?n.jsx("p",{children:s==null?void 0:s.userLegalName}):""]})]})}),((D=s==null?void 0:s.hostelDepart)==null?void 0:D[0])&&n.jsx(j,{to:`/q/${u}/hostel/profile`,state:{hid:(H=s==null?void 0:s.hostelDepart)==null?void 0:H[0]},children:n.jsx("img",{src:"/images/hostel/hostel-bed-icon.svg",alt:"bed icon",style:{marginRight:"-8rem",cursor:"pointer"},title:"Apply for hostel"})}),s!=null&&s.name&&N.includes(s==null?void 0:s._id)?n.jsx("div",{onClick:C,className:c.connectBtn,children:"Following"}):s!=null&&s.username&&v.includes(s==null?void 0:s._id)?n.jsx("div",{onClick:C,className:c.connectBtn,children:"Following"}):s!=null&&s.username&&U.includes(s==null?void 0:s._id)?n.jsx("div",{onClick:Q,className:c.connectBtn,children:"Follow Back"}):s!=null&&s.username&&b.includes(s==null?void 0:s._id)?n.jsx("div",{onClick:T,className:c.connectBtn,children:"Circled"}):n.jsx("div",{className:c.connectBtn,onClick:K,children:"Follow"})]})},rs=({staff:s})=>{var e;const h=M(),{showScrollbar:p}=S(),u=r=>{p(),h(x.searchId({id:r,type:"ID",searchAs:"user"}))};return n.jsx("div",{className:c.searchResult,children:n.jsx(j,{to:`/q/${(e=s==null?void 0:s.user)==null?void 0:e.username}/profile`,onClick:()=>{var r;return u((r=s==null?void 0:s.user)==null?void 0:r._id)},children:n.jsxs("div",{className:c.searchResultLeft,children:[n.jsx("img",{src:(s==null?void 0:s.photoId)!=="1"?`${w}/${s==null?void 0:s.staffProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),n.jsxs("div",{children:[n.jsx("h6",{children:`${s==null?void 0:s.staffFirstName} ${s!=null&&s.staffMiddleName?s==null?void 0:s.staffMiddleName:""} ${s==null?void 0:s.staffLastName}`}),n.jsx("h6",{children:s==null?void 0:s.staffROLLNO})]})]})})})};export{rs as M,cs as U};
