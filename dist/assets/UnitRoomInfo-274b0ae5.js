import{u as M,n as W,j as e,e as Y,L as x,r as m,Q as Z,t as Tn,S as En,W as Cn,l as yn,d as jn,lv as Sn,g as Fn,A as Ln}from"./index-731451a5.js";import{a4 as On,W as wn,a5 as Un,o as kn,a6 as Mn,a7 as Bn,a8 as Gn,a9 as Vn}from"./hostel-api-4d11cb04.js";import{s as E}from"./Tabs.module-fb9ec0a6.js";import{s as _}from"./Hostel.module-50da11fe.js";import{C as Jn}from"./CustomNormalSelectInput-9ec7329b.js";import{J as Wn}from"./JoinFormInput-8e74a0e0.js";import{P as Kn}from"./PopupWrapper-ffbaef7a.js";import{s as P}from"./HostelFeeStructure.module-5a40a31e.js";import{B as zn}from"./BorderBottom-47800983.js";const $n=({hostelites:n,viewAs:s})=>{var o,a,c,b,j,l,v,T;const{t:d}=M(),i=W();return e.jsx(e.Fragment,{children:s==="INSTITUTE_SIDE"?e.jsxs("section",{className:_.hostelite_container,style:{cursor:"pointer"},children:[e.jsx("img",{alt:"Student Request Avatar",src:(n==null?void 0:n.photoId)!=="1"?`${Y}/${n==null?void 0:n.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",style:{width:"52px",height:"52px",borderRadius:"5px"},loading:"lazy"}),e.jsxs("div",{className:_.hostelite_container_inner,children:[e.jsxs("div",{className:_.hostelite_container_inner_text,children:[e.jsx("h6",{children:`${(n==null?void 0:n.studentFirstName)??""} ${(n==null?void 0:n.studentMiddleName)??""} ${(n==null?void 0:n.studentLastName)??""}`}),e.jsx("p",{children:((o=n==null?void 0:n.student_unit)==null?void 0:o.hostel_unit_name)??""}),e.jsxs("p",{children:[((c=(a=n==null?void 0:n.student_bed_number)==null?void 0:a.hostelRoom)==null?void 0:c.room_name)??""," ",", "," ",((b=n==null?void 0:n.student_bed_number)==null?void 0:b.bed_number)??""]})]}),e.jsxs("div",{className:_.hostelite_container_inner_text,children:[e.jsxs("h6",{children:[d("rs")," ",". ",(n==null?void 0:n.hostelRemainFeeCount)??0]}),e.jsx("p",{children:d("pending_fees")})]})]})]}):e.jsx(x,{to:`/q/${i.username}/student/profile/hostel`,state:{sid:n==null?void 0:n._id,viewAs:"ADMISSION_ADMIN"},children:e.jsxs("section",{className:_.hostelite_container,style:{cursor:"pointer"},children:[e.jsx("img",{alt:"Student Request Avatar",src:(n==null?void 0:n.photoId)!=="1"?`${Y}/${n==null?void 0:n.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",style:{width:"52px",height:"52px",borderRadius:"5px"},loading:"lazy"}),e.jsxs("div",{className:_.hostelite_container_inner,children:[e.jsxs("div",{className:_.hostelite_container_inner_text,children:[e.jsx("h6",{children:`${(n==null?void 0:n.studentFirstName)??""} ${(n==null?void 0:n.studentMiddleName)??""} ${(n==null?void 0:n.studentLastName)??""}`}),e.jsx("p",{children:((j=n==null?void 0:n.student_unit)==null?void 0:j.hostel_unit_name)??""}),e.jsxs("p",{children:[((v=(l=n==null?void 0:n.student_bed_number)==null?void 0:l.hostelRoom)==null?void 0:v.room_name)??""," ",", "," ",((T=n==null?void 0:n.student_bed_number)==null?void 0:T.bed_number)??""]})]}),e.jsxs("div",{className:_.hostelite_container_inner_text,children:[e.jsxs("h6",{children:[d("rs")," ",". ",(n==null?void 0:n.hostelRemainFeeCount)??0]}),e.jsx("p",{children:d("pending_fees")})]})]})]})})})},qn=({carryParentState:n,activeTab:s,children:d})=>{const i=W();return e.jsx(x,{to:`/q/${i.username}/hostel?a=${s}`,state:{...n},children:d})},Q=["receipt&n=request","receipt&n=accept","receipt&n=reject"],H=["request","request&ongoing&n=application","request&ongoing&n=select","request&ongoing&n=confirm","request&ongoing&n=allot","request&ongoing&n=cancel","request&ongoing&n=confirm&s=multi"],nn=["request&renewal","request&unit&renewal","request&renewal&n=application","request&renewal&n=select","request&renewal&n=confirm","request&renewal&n=allot","request&renewal&n=cancel","request&renewal&n=confirm&s=multi"],en=["deposit"],sn=["complaint"],K=["pending"],an=["fee","fee&n=category","fee&n=structure"],tn=["notice","rule"],dn=["income"],cn=["request","request&ongoing&n=application"],rn=["request","request&ongoing&n=select"],_n=["request","request&ongoing&n=confirm","request&ongoing&n=confirm&s=multi"],un=["request","request&ongoing&n=allot"],ln=["request","request&ongoing&n=cancel"],mn=["export"],on=({carryParentState:n,activeTab:s,accessRole:d,accessTpye:i,callApi:o,children:a})=>{const c=W();return e.jsx(e.Fragment,{children:d==="PENDING_FEE_ACCESS"?K!=null&&K.includes(s)?e.jsx(x,{to:`/q/${c.username}/member/hostel?a=${s}`,state:{...n},children:a}):e.jsx("div",{style:{opacity:"0.5"},children:a}):d==="ALL_FEE_ACCESS"?Q!=null&&Q.includes(s)?e.jsx(x,{to:`/q/${c.username}/member/hostel?a=${s}`,state:{...n},children:a}):e.jsx("div",{style:{opacity:"0.5"},children:a}):d==="MULTI_APP_ACCESS"?H!=null&&H.includes(s)?e.jsx(x,{to:`/q/${c.username}/member/hostel?a=${s}`,state:{...n},children:a}):e.jsx("div",{style:{opacity:"0.5"},children:a}):d==="RENEWAL_UNIT_ACCESS"?nn!=null&&nn.includes(s)?e.jsx(x,{to:`/q/${c.username}/member/hostel?a=${s}`,state:{...n},children:a}):e.jsx("div",{style:{opacity:"0.5"},children:a}):d==="DEPOSIT_ACCESS"?en!=null&&en.includes(s)?e.jsx(x,{to:`/q/${c.username}/member/hostel?a=${s}`,state:{...n},children:a}):e.jsx("div",{style:{opacity:"0.5"},children:a}):d==="PENDING_FEE_ACCESS"?K!=null&&K.includes(s)?e.jsx(x,{to:`/q/${c.username}/member/hostel?a=${s}`,state:{...n},children:a}):e.jsx("div",{style:{opacity:"0.5"},children:a}):d==="COMPAINT_ACCESS"?sn!=null&&sn.includes(s)?e.jsx(x,{to:`/q/${c.username}/member/hostel?a=${s}`,state:{...n},children:a}):e.jsx("div",{style:{opacity:"0.5"},children:a}):d==="FEE_MASTER_ACCESS"?an!=null&&an.includes(s)?e.jsx(x,{to:`/q/${c.username}/member/hostel?a=${s}`,state:{...n},children:a}):e.jsx("div",{style:{opacity:"0.5"},children:a}):d==="RULES_AND_ANNOUNCEMENT_ACCESS"?tn!=null&&tn.includes(s)?e.jsx(x,{to:`/q/${c.username}/member/hostel?a=${s}`,state:{...n},children:a}):e.jsx("div",{style:{opacity:"0.5"},children:a}):d==="INCOME_AND_EXPENSE_ACCESS"?dn!=null&&dn.includes(s)?e.jsx(x,{to:`/q/${c.username}/member/hostel?a=${s}`,state:{...n},children:a}):e.jsx("div",{style:{opacity:"0.5"},children:a}):d==="ONE_TAB_ACCESS"?i==="Application"?cn!=null&&cn.includes(s)?e.jsx(x,{to:`/q/${c.username}/member/hostel?a=${s}`,state:{...n},children:a}):e.jsx("div",{style:{opacity:"0.5"},children:a}):i==="Selected"?rn!=null&&rn.includes(s)?e.jsx(x,{to:`/q/${c.username}/member/hostel?a=${s}`,state:{...n},children:a}):e.jsx("div",{style:{opacity:"0.5"},children:a}):i==="Confirmed"?_n!=null&&_n.includes(s)?e.jsx(x,{to:`/q/${c.username}/member/hostel?a=${s}`,state:{...n},children:a}):e.jsx("div",{style:{opacity:"0.5"},children:a}):i==="Allotted"?un!=null&&un.includes(s)?e.jsx(x,{to:`/q/${c.username}/member/hostel?a=${s}`,state:{...n},children:a}):e.jsx("div",{style:{opacity:"0.5"},children:a}):ln!=null&&ln.includes(s)?e.jsx(x,{to:`/q/${c.username}/member/hostel?a=${s}`,state:{...n},children:a}):e.jsx("div",{style:{opacity:"0.5"},children:a}):d==="DATA_EXPORT_ACCESS"?mn!=null&&mn.includes(s)?e.jsx(x,{to:`/q/${c.username}/member/hostel?a=${s}`,state:{...n},children:a}):e.jsx("div",{style:{opacity:"0.5"},children:a}):o?e.jsx(x,{to:`/q/${c.username}/member/hostel?a=${s}`,state:{...n},children:a}):e.jsx("div",{style:{opacity:"0.5"},children:a})})},An="_MiddleContent_1bc13_1",Xn="_MiddleContentLeft_1bc13_14",Dn="_tabs_1bc13_23",Yn="_item_1bc13_26",Zn="_MiddleContentRight_1bc13_50",Rn="_MiddleContentRightHead_1bc13_57",Pn="_pItem_1bc13_71",Qn="_text_1bc13_90",Hn="_addbtn_1bc13_124",ne="_menu_1bc13_143",ee="_menuItem_1bc13_148",se="_itemIcon_1bc13_163",ae="_classList_1bc13_185",te="_classListItem_1bc13_187",k={MiddleContent:An,MiddleContentLeft:Xn,tabs:Dn,item:Yn,MiddleContentRight:Zn,MiddleContentRightHead:Rn,pItem:Pn,text:Qn,addbtn:Hn,menu:ne,menuItem:ee,itemIcon:se,classList:ae,classListItem:te};function de({search:n,carryParentState:s,viewAs:d,openAsUrl:i}){const{t:o}=M(),a=W();return e.jsx("div",{className:E.mcqTop,children:d==="HOSTEL_UNIT"?e.jsxs("div",{className:E.mcqToptabs,children:[i==="STUDENT"||i==="HOSTEL_SEARCH"?"":e.jsx(x,{to:i==="DESIGNATION"?`/q/${a.username}/member/hostel/warden`:i==="INSTITUTE"?`/q/${a.username}/hostel?a=unit&n=info`:`/q/${a.username}/member/hostel?a=unit&n=info`,state:{...s},style:{width:"50%"},children:e.jsx("div",{className:(n==null?void 0:n.substring(3))==="unit&n=info"||(n==null?void 0:n.substring(3))==="unit&n=hostelites"||(n==null?void 0:n.substring(3))==="hostelites"||!n?`${E.mcqTopItem} ${E.active}`:E.mcqTopItem,children:o("menu")})}),e.jsx(x,{to:i==="STUDENT"?`/q/${a.username}/member/student/hostel?a=unit&n=menu&n=room`:i==="HOSTEL_SEARCH"?`/q/${a.username}/hostel/profile?a=unit&n=menu&n=room`:i==="DESIGNATION"?`/q/${a.username}/member/hostel/warden?a=menu&n=room`:i==="INSTITUTE"?`/q/${a.username}/hostel?a=unit&n=menu&n=room`:`/q/${a.username}/member/hostel?a=unit&n=menu&n=room`,state:{...s},style:{width:i==="STUDENT"||i==="HOSTEL_SEARCH"?"100%":"50%"},children:e.jsx("div",{className:(n==null?void 0:n.substring(3))==="unit&n=menu&n=room"||(n==null?void 0:n.substring(3))==="menu&n=room"?`${E.mcqTopItem} ${E.active}`:E.mcqTopItem,children:o("rooms")})})]}):e.jsxs("div",{className:E.mcqToptabs,children:[e.jsx(x,{to:`/q/${a.username}/member/hostel`,state:{...s},style:{width:"33.3%"},children:e.jsx("div",{className:n?E.mcqTopItem:`${E.mcqTopItem} ${E.active}`,children:o("menu")})}),e.jsx(x,{to:`/q/${a.username}/member/hostel?a=fee`,state:{...s},style:{width:"33.3%"},children:e.jsx("div",{className:(n==null?void 0:n.substring(3,6))==="fee"?`${E.mcqTopItem} ${E.active}`:E.mcqTopItem,children:o("fee_structure")})}),e.jsx(x,{to:`/q/${a.username}/member/hostel?a=fund`,state:{...s},style:{width:"33.3%"},children:e.jsx("div",{className:(n==null?void 0:n.substring(3))==="fund"?`${E.mcqTopItem} ${E.active}`:E.mcqTopItem,children:o("funds")})})]})})}const ce=({onClose:n,openAs:s,openRoomMenu:d,huid:i,onEdit:o,onRefetch:a})=>{const{t:c}=M(),[b,j]=m.useState({room_name:s==="EDIT"?d==null?void 0:d.room_name:"",room_strength:s==="EDIT"?d==null?void 0:d.room_strength:""}),[l,v]=m.useState(""),[T,p]=m.useState(!1),[g]=On();m.useEffect(()=>{s==="EDIT"&&j({room_name:d==null?void 0:d.room_name,room_strength:d==null?void 0:d.room_strength})},[s]);const $=I=>{j(q=>({...q,room_strength:I}))},h=I=>{const q={};for(let t in I)I[t]||(q[t]=`${t} is required!`);return q},C=()=>{const I=h(b);let q=!1;for(let t in I)if(t){q=!0;break}q?v(I):s==="EDIT"?o(b):(p(t=>!t),g({huid:i,addRoom:b}).then(()=>{a(),n(),p(t=>!t)}).catch({}))};return e.jsx(Kn,{onClose:n,children:e.jsxs("div",{className:P.add_category_modal,children:[e.jsxs("div",{className:P.add_category_modal_title,children:[e.jsx("h6",{children:c(s==="EDIT"?"edit_fee_head":"add_new_room")}),e.jsx("img",{src:"/images/close-post-icon.svg",onClick:n,alt:""})]}),e.jsx(Wn,{labelText:c("room_name"),placeholder:c("room_name_placeholder"),name:"room_name",value:b.room_name,type:"text",onChange:I=>j(q=>({...q,room_name:I.target.value})),errorShow:l.room_name}),e.jsx(Jn,{selectLabel:c("bed_capacity"),selectedValue:c("bed_capacity_placeholder"),options:[1,2,3,4,5,6],value:b.room_strength,onClick:$,errorShow:l.room_name}),e.jsx("button",{className:P.set_fees_structure_btn,title:"Add Hostel Room",onClick:C,style:{justifyContent:"center"},children:c(s==="EDIT"?"update":"add_room")}),T&&e.jsx(Z,{})]})})},ie=({carryParentState:n,activeTab:s,children:d})=>{const i=W();return e.jsx(x,{to:`/q/${i.username}/member/student/hostel?a=${s}`,state:{...n},children:d})},xn=({carryParentState:n,activeTab:s,children:d})=>{const i=W();return e.jsx(x,{to:`/q/${i.username}/member/hostel/warden?a=${s}`,state:{...n},children:d})},In=({room:n,carryParentState:s,viewAs:d,callApi:i})=>{const{t:o}=M(),a=W();return e.jsx(e.Fragment,{children:d==="STUDENT"?e.jsx(ie,{carryParentState:{...s,hrid:n==null?void 0:n._id},activeTab:"unit&n=room",children:e.jsxs("div",{className:_.unit_room_card_container,children:[e.jsx("div",{className:_.unit_room_card_lines,children:e.jsx("h6",{children:(n==null?void 0:n.room_name)??""})}),e.jsxs("div",{className:_.unit_room_card_lines,children:[e.jsxs("p",{children:[o("hostel_capacity")," ",(n==null?void 0:n.room_strength)??0]}),e.jsxs("p",{children:[o("hostel_vacant")," ",(n==null?void 0:n.vacant_count)??0]})]})]})}):d==="HOSTEL_SEARCH"?e.jsx(x,{to:`/q/${a.username}/hostel/profile?a=unit&n=room`,state:{...s,hrid:n==null?void 0:n._id},children:e.jsxs("div",{className:_.unit_room_card_container,children:[e.jsx("div",{className:_.unit_room_card_lines,children:e.jsx("h6",{children:(n==null?void 0:n.room_name)??""})}),e.jsxs("div",{className:_.unit_room_card_lines,children:[e.jsxs("p",{children:[o("hostel_capacity")," ",(n==null?void 0:n.room_strength)??0]}),e.jsxs("p",{children:[o("hostel_vacant")," ",(n==null?void 0:n.vacant_count)??0]})]})]})}):d==="DESIGNATION"?e.jsx(xn,{carryParentState:{...s,hrid:n==null?void 0:n._id},activeTab:"unit&n=room",children:e.jsxs("div",{className:_.unit_room_card_container,children:[e.jsx("div",{className:_.unit_room_card_lines,children:e.jsx("h6",{children:(n==null?void 0:n.room_name)??""})}),e.jsxs("div",{className:_.unit_room_card_lines,children:[e.jsxs("p",{children:[o("hostel_capacity")," ",(n==null?void 0:n.room_strength)??0]}),e.jsxs("p",{children:[o("hostel_vacant")," ",(n==null?void 0:n.vacant_count)??0]})]})]})}):d==="INSTITUTE"?e.jsx(x,{to:`/q/${a.username}/hostel?a=room`,state:{...s,hrid:n==null?void 0:n._id},children:e.jsxs("div",{className:_.unit_room_card_container,children:[e.jsx("div",{className:_.unit_room_card_lines,children:e.jsx("h6",{children:(n==null?void 0:n.room_name)??""})}),e.jsxs("div",{className:_.unit_room_card_lines,children:[e.jsxs("p",{children:[o("hostel_capacity")," ",(n==null?void 0:n.room_strength)??0]}),e.jsxs("p",{children:[o("hostel_vacant")," ",(n==null?void 0:n.vacant_count)??0]})]})]})}):e.jsx(on,{carryParentState:{...s,hrid:n==null?void 0:n._id},activeTab:"unit&n=room",callApi:i,children:e.jsxs("div",{className:_.unit_room_card_container,children:[e.jsxs("div",{className:_.unit_room_card_lines,children:[e.jsx("h6",{children:(n==null?void 0:n.room_name)??""}),e.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",className:_.menu_icon,title:"Menu",style:{transform:"rotate(90deg)"}})]}),e.jsxs("div",{className:_.unit_room_card_lines,children:[e.jsxs("p",{children:[o("hostel_capacity")," ",(n==null?void 0:n.room_strength)??0]}),e.jsxs("p",{children:[o("hostel_vacant")," ",(n==null?void 0:n.vacant_count)??0]})]})]})})})},re=({huid:n,carryParentState:s,viewAs:d,callApi:i})=>{const{t:o}=M(),[a,c]=m.useState(!1),[b,j]=Tn(),[l,v]=m.useState(1),[T,p]=m.useState(!0),[g,$]=m.useState(!0),[h,C]=m.useState([]),[I,q]=m.useState(!1),{getRoomListHostelUnit:t,getRoomListHostelUnitRefetch:F}=wn({data:{huid:n,page:l,limit:10,search:""},skip:!n});m.useEffect(()=>{n&&($(!0),F())},[n,l,F]),m.useEffect(()=>{j&&T&&v(r=>r+1)},[j,T]),m.useEffect(()=>{var r,y;I?(C(t==null?void 0:t.all_rooms),$(!1),q(!1)):t!=null&&t.all_rooms?(C(B=>[...new Set([...B,...t==null?void 0:t.all_rooms].map(JSON.stringify))].map(JSON.parse)),$(!1)):((r=t==null?void 0:t.all_rooms)==null?void 0:r.length)===0&&$(!1),((y=t==null?void 0:t.all_rooms)==null?void 0:y.length)===10?p(!0):p(!1)},[t==null?void 0:t.all_rooms]);const u=()=>{c(r=>!r)},w=()=>{v(1),q(!0),$(!0),F()};return e.jsxs("div",{className:_.unit_room_container,children:[d==="STUDENT"||d==="HOSTEL_SEARCH"?"":e.jsx("p",{className:_.add_new_category,onClick:u,children:o("create_new_room")}),h==null?void 0:h.map((r,y)=>(h==null?void 0:h.length)===y+1?e.jsx("div",{ref:b,children:e.jsx(In,{room:r,carryParentState:s,viewAs:d,callApi:i})},r==null?void 0:r._id):e.jsx(In,{room:r,carryParentState:s,viewAs:d,callApi:i},r==null?void 0:r._id)),g&&e.jsx(En,{}),a&&e.jsx(ce,{onClose:u,huid:n,onRefetch:w})]})},_e=({hid:n,filter_by:s,viewAs:d,instituteId:i})=>{const{t:o}=M(),[a,c]=Tn(),[b,j]=m.useState(1),[l,v]=m.useState(!0),[T,p]=m.useState(!0),[g,$]=m.useState([]),[h,C]=m.useState(""),[I,q]=m.useState(!1),[t,F]=m.useState(!1),[u]=Cn(),[w]=Un(),{getHostelHostelitesList:r,getHostelHostelitesListRefetch:y}=kn({data:{hid:n,page:b,limit:10,search:h,filter_by:s,id:i??""},skip:!n});m.useEffect(()=>{n&&(p(!0),y())},[n,i,b,h,y]),m.useEffect(()=>{c&&l&&j(f=>f+1)},[c,l]),m.useEffect(()=>{var f,L;I?($(r==null?void 0:r.all_hostalities),p(!1),q(!1)):h?($(r==null?void 0:r.all_hostalities),p(!1)):r!=null&&r.all_hostalities?($(U=>[...new Set([...U,...r==null?void 0:r.all_hostalities].map(JSON.stringify))].map(JSON.parse)),p(!1)):((f=r==null?void 0:r.all_hostalities)==null?void 0:f.length)===0&&p(!1),((L=r==null?void 0:r.all_hostalities)==null?void 0:L.length)===10?v(!0):v(!1)},[r==null?void 0:r.all_hostalities]);const B=m.useCallback(yn.debounce(f=>C(f),500),[]),V=f=>{B(f.target.value)},J=f=>{F(U=>!U);const L=new FormData;L.append("file",f.target.files[0]),u({fileUpload:L}).then(U=>{var N,S;(N=U.data)!=null&&N.imageKey?w({hid:n,excelFile:{excel_file:(S=U.data)==null?void 0:S.imageKey}}).then(()=>{F(O=>!O)}).catch({}):F(O=>!O)}).catch({})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:_.with_search,children:[e.jsx("h6",{children:o("hostelites")}),e.jsxs("section",{className:_.search_container,style:{gap:"1rem"},children:[e.jsxs("div",{className:_.search_container_input,children:[e.jsx("img",{className:_.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),e.jsx("input",{type:"text",placeholder:"Search hostelites...",onChange:V})]}),d==="INSTITUTE"?"":e.jsxs("div",{style:{marginRight:"1rem"},children:[e.jsx("label",{className:_.upload_excel_file,htmlFor:"uploadExcel",children:e.jsx("img",{src:"/images/upload-xslx-icon.svg",alt:"add student icon",title:"Upload excel file"})}),e.jsx("input",{type:"file",id:"uploadExcel",accept:".xlsx",onChange:J,style:{display:"none"}})]})]})]}),e.jsx(zn,{customStyle:{marginTop:"0.5rem",marginBottom:"0.6rem",width:"100%"}}),g==null?void 0:g.map((f,L)=>(g==null?void 0:g.length)===L+1?e.jsx("div",{ref:a,children:e.jsx($n,{hostelites:f})},f==null?void 0:f._id):e.jsx($n,{hostelites:f},f==null?void 0:f._id)),T&&e.jsx(En,{}),t&&e.jsx(Z,{})]})},ue=({carryParentState:n,accessRole:s,huid:d,viewAs:i,hid:o,callApi:a,pageOpenAs:c,instituteId:b})=>{var v,T,p,g,$,h;const{t:j}=M(),l=jn();return e.jsx("div",{className:k.MiddleContent,children:e.jsxs("div",{className:k.MiddleContentLeft,children:[e.jsx("div",{className:k.tabs,children:e.jsx(de,{search:l==null?void 0:l.search,carryParentState:n,viewAs:"HOSTEL_UNIT",openAsUrl:c||i})}),(!(l!=null&&l.search)||((v=l==null?void 0:l.search)==null?void 0:v.substring(3))==="unit&n=info")&&e.jsx("div",{className:k.item,children:i==="DESIGNATION"?e.jsxs(e.Fragment,{children:[e.jsx(xn,{carryParentState:n,activeTab:"hostelites",accessRole:s,children:e.jsxs("div",{className:k.itemIcon,children:[e.jsx("img",{src:"/images/member_tab/hostel/hostel-hostelite-icon.svg",alt:"inquery"}),e.jsx("p",{children:j("total_hostelites")})]})}),e.jsx(xn,{carryParentState:{...n,viewNotice:"HOSTEL_UNIT_TAB",hid:o??""},activeTab:"notice",accessRole:s,children:e.jsxs("div",{className:k.itemIcon,children:[e.jsx("img",{src:"/images/member_tab/hostel/hostel-announcement-icon.svg",alt:"moderator icon"}),e.jsx("p",{children:j("announcement_notices")})]})})]}):c==="INSTITUTE"?e.jsxs(e.Fragment,{children:[e.jsx(qn,{carryParentState:n,activeTab:"unit&n=hostelites",accessRole:s,callApi:a,children:e.jsxs("div",{className:k.itemIcon,children:[e.jsx("img",{src:"/images/member_tab/hostel/hostel-hostelite-icon.svg",alt:"inquery"}),e.jsx("p",{children:j("total_hostelites")})]})}),e.jsx(qn,{carryParentState:{...n,viewNotice:"HOSTEL_UNIT_TAB"},activeTab:"notice",accessRole:s,callApi:a,children:e.jsxs("div",{className:k.itemIcon,children:[e.jsx("img",{src:"/images/member_tab/hostel/hostel-announcement-icon.svg",alt:"moderator icon"}),e.jsx("p",{children:j("announcement_notices")})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(on,{carryParentState:n,activeTab:"unit&n=hostelites",accessRole:s,callApi:a,children:e.jsxs("div",{className:k.itemIcon,children:[e.jsx("img",{src:"/images/member_tab/hostel/hostel-hostelite-icon.svg",alt:"inquery"}),e.jsx("p",{children:j("total_hostelites")})]})}),e.jsx(on,{carryParentState:{...n,viewNotice:"HOSTEL_UNIT_TAB"},activeTab:"notice",accessRole:s,callApi:a,children:e.jsxs("div",{className:k.itemIcon,children:[e.jsx("img",{src:"/images/member_tab/hostel/hostel-announcement-icon.svg",alt:"moderator icon"}),e.jsx("p",{children:j("announcement_notices")})]})})]})}),(((T=l==null?void 0:l.search)==null?void 0:T.substring(3))==="unit&n=menu&n=room"||((p=l==null?void 0:l.search)==null?void 0:p.substring(3))==="menu&n=room")&&e.jsx(re,{carryParentState:n,accessRole:s,huid:d,viewAs:c||i,callApi:a}),(((g=l==null?void 0:l.search)==null?void 0:g.substring(3))==="unit&n=hostelites"||(($=l==null?void 0:l.search)==null?void 0:$.substring(3))==="hostelites")&&e.jsx("div",{style:{padding:"1rem"},children:e.jsx(_e,{hid:((h=l.state)==null?void 0:h.onClickValue)??o,filter_by:d,viewAs:i,instituteId:b})})]})})},ve=({carryParentState:n,viewAs:s,callApi:d,pageOpenAs:i,instituteId:o})=>{var r,y,B,V,J,f,L,U,N,S,O,z,A,X,fn,pn,hn,bn,Nn,vn,gn;const{t:a}=M(),c=jn(),[b,j]=m.useState(""),[l,v]=m.useState(""),[T,p]=m.useState(!1),[g,$]=m.useState(!1),[h,C]=m.useState(""),[I]=Mn(),[q,t]=m.useState(!1);m.useEffect(()=>{var G;if(g){t(R=>!R);let D=new FormData;D.append("file",l),I({uploadFile:D,huid:(G=c.state)==null?void 0:G.huid}).then(()=>{t(R=>!R)}).catch({})}},[g,l]);const F=G=>{const D=URL.createObjectURL(G.target.files[0]);v(G.target.files[0]),C(D),j(D),p(!0)},{getHostelUnitDetail:u,getHostelUnitDetailRefetch:w}=Bn({huid:(r=c.state)==null?void 0:r.huid,skip:!((y=c.state)!=null&&y.huid)});return m.useEffect(()=>{var G;(G=c.state)!=null&&G.huid&&w()},[(B=c.state)==null?void 0:B.huid,w]),e.jsxs("div",{children:[e.jsx(Sn,{coverKey:(V=u==null?void 0:u.one_unit)==null?void 0:V.hostel_unit_photo,coverId:(J=u==null?void 0:u.one_unit)!=null&&J.hostel_unit_photo?"0":"2",defaultCover:"/images/profileAndCover/unit-cover.svg",textLarge:(f=u==null?void 0:u.one_unit)==null?void 0:f.hostel_unit_name,textSmall:`${((U=(L=u==null?void 0:u.one_unit)==null?void 0:L.hostel_unit_head)==null?void 0:U.staffFirstName)??""} ${((S=(N=u==null?void 0:u.one_unit)==null?void 0:N.hostel_unit_head)==null?void 0:S.staffMiddleName)??""} ${((z=(O=u==null?void 0:u.one_unit)==null?void 0:O.hostel_unit_head)==null?void 0:z.staffLastName)??""}`,count1:(A=u==null?void 0:u.one_unit)==null?void 0:A.bed_count,count1label:a("hostel_beds"),count2:(X=u==null?void 0:u.one_unit)==null?void 0:X.room_count,count2label:a("hostel_rooms"),count3:(fn=u==null?void 0:u.one_unit)==null?void 0:fn.hostelities_count,count3label:a("occupied_count"),profilePhoto:h,profileChange:F,openCrop:T,setOpenCrop:p,setPhotoURL:j,photoURL:b,setFile:v,setUpload:$,setProfilePhoto:C,viewAs:!1,coverUpdate:!(s==="STUDENT"||s==="HOSTEL_SEARCH"||s==="INSTITUTE"),openAs:"HOSTEL_MANAGER",coverImageStyle:{height:"auto"}}),e.jsx(ue,{carryParentState:n,huid:(pn=c.state)==null?void 0:pn.huid,viewAs:s,hid:(bn=(hn=u==null?void 0:u.one_unit)==null?void 0:hn.hostel)==null?void 0:bn._id,callApi:d,pageOpenAs:i,instituteId:((gn=(vn=(Nn=u==null?void 0:u.one_unit)==null?void 0:Nn.hostel)==null?void 0:vn.hostel)==null?void 0:gn.institute)??""}),q&&e.jsx(Z,{})]})},le=({hostelite:n,vacant:s,index:d,viewAs:i})=>{var c,b,j,l,v,T,p,g,$,h,C,I,q,t,F,u,w;const{t:o}=M(),a=Fn();return e.jsx(e.Fragment,{children:s?e.jsxs("section",{className:_.hostelite_container,children:[s?e.jsx("img",{alt:"Student Request Avatar",src:"/images/hostel/vacant-plus-icon.svg"}):e.jsx("img",{alt:"Student Request Avatar",src:((q=n==null?void 0:n.bed_allotted_candidate)==null?void 0:q.photoId)!=="1"?`${Y}/${(t=n==null?void 0:n.bed_allotted_candidate)==null?void 0:t.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg"}),e.jsxs("div",{className:_.hostelite_container_inner,children:[e.jsxs("div",{className:_.hostelite_container_inner_text,children:[s?e.jsx("h6",{children:o("vacant_bed")}):e.jsx("h6",{children:`${((F=n==null?void 0:n.bed_allotted_candidate)==null?void 0:F.studentFirstName)??""} ${((u=n==null?void 0:n.bed_allotted_candidate)==null?void 0:u.studentMiddleName)??""} ${((w=n==null?void 0:n.bed_allotted_candidate)==null?void 0:w.studentLastName)??""}`}),e.jsxs("p",{children:[o("bed_number")," ",d+1]})]}),i==="STUDENT"||i==="HOSTEL_SEARCH"?"":e.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",className:_.menu_icon,title:"Menu"})]})]}):i==="INSTITUTE"?e.jsxs("section",{className:_.hostelite_container,children:[e.jsx("img",{alt:"Student Request Avatar",src:((c=n==null?void 0:n.bed_allotted_candidate)==null?void 0:c.photoId)!=="1"?`${Y}/${(b=n==null?void 0:n.bed_allotted_candidate)==null?void 0:b.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg"}),e.jsxs("div",{className:_.hostelite_container_inner,children:[e.jsxs("div",{className:_.hostelite_container_inner_text,children:[e.jsx("h6",{children:i==="HOSTEL_SEARCH"?"Hostelites Name":`${((j=n==null?void 0:n.bed_allotted_candidate)==null?void 0:j.studentFirstName)??""} ${((l=n==null?void 0:n.bed_allotted_candidate)==null?void 0:l.studentMiddleName)??""} ${((v=n==null?void 0:n.bed_allotted_candidate)==null?void 0:v.studentLastName)??""}`}),e.jsxs("p",{children:[o("bed_number")," ",d+1]})]}),i==="STUDENT"||i==="HOSTEL_SEARCH"?"":e.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",className:_.menu_icon,title:"Menu"})]})]}):e.jsx(x,{to:`/q/${(p=(T=n==null?void 0:n.bed_allotted_candidate)==null?void 0:T.user)==null?void 0:p.username}/profile`,onClick:()=>{var r,y;a(Ln.searchId({id:(y=(r=n==null?void 0:n.bed_allotted_candidate)==null?void 0:r.user)==null?void 0:y._id,type:"ID"}))},children:e.jsxs("section",{className:_.hostelite_container,children:[e.jsx("img",{alt:"Student Request Avatar",src:((g=n==null?void 0:n.bed_allotted_candidate)==null?void 0:g.photoId)!=="1"?`${Y}/${($=n==null?void 0:n.bed_allotted_candidate)==null?void 0:$.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg"}),e.jsxs("div",{className:_.hostelite_container_inner,children:[e.jsxs("div",{className:_.hostelite_container_inner_text,children:[e.jsx("h6",{children:i==="HOSTEL_SEARCH"?"Hostelites Name":`${((h=n==null?void 0:n.bed_allotted_candidate)==null?void 0:h.studentFirstName)??""} ${((C=n==null?void 0:n.bed_allotted_candidate)==null?void 0:C.studentMiddleName)??""} ${((I=n==null?void 0:n.bed_allotted_candidate)==null?void 0:I.studentLastName)??""}`}),e.jsxs("p",{children:[o("bed_number")," ",d+1]})]}),i==="STUDENT"||i==="HOSTEL_SEARCH"?"":e.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",className:_.menu_icon,title:"Menu"})]})]})})})},ge=({viewAs:n})=>{var u,w,r,y,B,V,J,f,L,U;const{t:s}=M(),d=jn(),[i,o]=m.useState(""),[a,c]=m.useState(""),[b,j]=m.useState(!1),[l,v]=m.useState(!1),[T,p]=m.useState(""),[g]=Gn(),[$,h]=m.useState(!1),[C,I]=m.useState([]);m.useEffect(()=>{var N;if(l){h(O=>!O);let S=new FormData;S.append("file",a),g({uploadFile:S,hrid:(N=d.state)==null?void 0:N.hrid}).then(()=>{h(O=>!O)}).catch({})}},[l,a]);const q=N=>{const S=URL.createObjectURL(N.target.files[0]);c(N.target.files[0]),p(S),o(S),j(!0)},{getRoomDetailHostel:t,getRoomDetailHostelRefetch:F}=Vn({hrid:(u=d.state)==null?void 0:u.hrid,skip:!((w=d.state)!=null&&w.hrid)});return m.useEffect(()=>{var N;(N=d.state)!=null&&N.hrid&&F()},[(r=d.state)==null?void 0:r.hrid,F]),m.useEffect(()=>{var N,S,O,z;if((N=t==null?void 0:t.one_room)!=null&&N.vacant_count||(S=t==null?void 0:t.one_room)!=null&&S.beds){let A=[...(O=t==null?void 0:t.one_room)==null?void 0:O.beds];for(let X=0;X<((z=t==null?void 0:t.one_room)==null?void 0:z.vacant_count);X++)A.push({bedVacant:!0});I(A)}},[(y=t==null?void 0:t.one_room)==null?void 0:y.vacant_count,(B=t==null?void 0:t.one_room)==null?void 0:B.beds]),e.jsxs(e.Fragment,{children:[e.jsx(Sn,{coverKey:(V=t==null?void 0:t.one_room)==null?void 0:V.room_photo,coverId:(J=t==null?void 0:t.one_room)!=null&&J.room_photo?"0":"2",defaultCover:"/images/profileAndCover/room-cover.svg",textLarge:(f=t==null?void 0:t.one_room)==null?void 0:f.room_name,textSmall:"",count1:(L=t==null?void 0:t.one_room)==null?void 0:L.bed_count,count1label:s("hostel_beds"),count2:(U=t==null?void 0:t.one_room)==null?void 0:U.vacant_count,count2label:s("room_vacant"),profilePhoto:T,profileChange:q,openCrop:b,setOpenCrop:j,setPhotoURL:o,photoURL:i,setFile:c,setUpload:v,setProfilePhoto:p,viewAs:!1,coverUpdate:!(n==="STUDENT"||n==="HOSTEL_SEARCH"),openAs:"HOSTEL_MANAGER",coverImageStyle:{height:"auto"}}),e.jsx("div",{className:_.unit_room_container_box,children:e.jsx("div",{className:_.unit_room_container_box_inner,children:C==null?void 0:C.map((N,S)=>e.jsx(le,{hostelite:N,vacant:!!(N!=null&&N.bedVacant),index:S,viewAs:n},S))})}),$&&e.jsx(Z,{})]})};export{$n as H,qn as I,le as R,ie as S,de as T,ge as U,ve as a,on as b,_e as c,k as s};
