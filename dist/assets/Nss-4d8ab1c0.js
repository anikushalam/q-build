import{u as W,c as $,k as q,r as n,W as z,j as e,Q as H,D as X,C as Y,d as Z,s as ee}from"./index-731451a5.js";import{s as w}from"./AdmisionAdmin.module-940a8610.js";import{s as l}from"./AdmissionSiteInfo.module-332fbdef.js";import{J as j}from"./JoinFormTextArea-7f6dded0.js";import{B as se}from"./BorderBottom-47800983.js";import{m as te,n as ae,o as oe}from"./setting-api-bd1a4a3c.js";import{J as A}from"./JoinFormInput-8e74a0e0.js";import{J as ne}from"./JoinFormFileEdit-e41481d6.js";import{J as ie}from"./JoinFormSelect-a3c930fc.js";import{o as le}from"./search-api-15f7f9f9.js";import"./JoinForm.module-212f9bb3.js";import"./ViewFileDialog-0c131c06.js";import"./Overlay-07ce6f88.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalBackdrop-5b309d60.js";import"./SearchHeader.module-b69c8942.js";function ce({instituteId:r,nid:c,viewAs:p}){var F;const{t}=W(),D=$(),f=q(s=>{var o;return(o=s.idChange)==null?void 0:o.id}),[J,u]=n.useState(!1),[k]=z();n.useState([]);const[S,L]=n.useState(""),[M,v]=n.useState(""),[b,N]=n.useState(""),[E,C]=n.useState(!1),[I,R]=n.useState(!1),[re,y]=n.useState(""),[B]=te(),[O]=ae(),[i,_]=n.useState({nss_about:"",nss_photo:"",nss_objective:"",nss_head:"",nss_roles:"",nss_commitee:[]}),[m,U]=n.useState([]);n.useEffect(()=>{_(s=>({...s,[S]:m}))},[m,S]);const{assignSearchStaff:x,assignSearchStaffRefetch:de}=le({skip:p==="ADMISSION_ADMIN"?!r:!f,search:{search:"",page:1,id:p==="ADMISSION_ADMIN"?r:f,limit:500}});oe({nid:c,skip:!c});const P=s=>{L(s),U([...i[s],{name:"",designation:""}])},K=s=>{if(s.target.files[0]){const o=URL.createObjectURL(s.target.files[0]);N(s.target.files[0]),y(o),v(o),C(!0)}},G=s=>{if(s){u(a=>!a);const o=new FormData;o.append("file",s),k({fileUpload:o}).then(a=>{var d;(d=a.data)!=null&&d.imageKey&&_(g=>{var T;return{...g,nss_photo:(T=a.data)==null?void 0:T.imageKey}}),u(g=>!g)}).catch({})}};n.useEffect(()=>{I&&G(b)},[I,b]);const Q=()=>{D(-1)},h=(s,o)=>{if(s.target.name==="name"||s.target.name==="designation"){const a=[...m];for(let d=0;d<(a==null?void 0:a.length);d++)d===o&&(a[d][s.target.name]=s.target.value);U(a)}else _(a=>({...a,[s.target.name]:s.target.value}))},V=()=>{u(s=>!s),c?O({aid:c,updateSiteInfo:{otherField:i}}).then(()=>{u(s=>!s)}).catch({}):B({id:f,updateSiteInfo:{otherField:i}}).then(()=>{u(s=>!s)}).catch({})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:l.bgContainer,children:e.jsxs("div",{className:l.container,children:[e.jsxs("div",{className:l.containerhead,children:[e.jsx("h6",{children:t("nss")}),e.jsx("img",{src:"/images/close-post-icon.svg",alt:"",onClick:Q})]}),e.jsx(se,{customStyle:{width:"100%",marginBottom:"1rem"}}),e.jsx("div",{className:l.containercontent,children:e.jsxs("div",{className:l.container_inner_content,children:[e.jsx(j,{labelText:t("nss_about"),placeholder:t("nss_about_placeholder"),name:"nss_about",value:i.nss_about,type:"text",onChange:h,customStyleContainer:{width:"100%"}}),e.jsxs("div",{className:l.show_field,style:{alignItems:"flex-start"},children:[e.jsx(ie,{selectLabel:t("select_dean_academic"),selectedValue:t("select_dean_placeholder"),value:i.academic_head,name:"nss_head",onChange:h,options:x==null?void 0:x.staff,openAs:"academicSiteInfo",customStyleContainer:{width:"49.5%"}}),e.jsx(ne,{labelText:t("academic_photo"),name:"dean_academic_photo",value:i.nss_photo,onChange:K,customStyleContainer:{width:"49.5%"}})]}),e.jsx(j,{labelText:t("nss_objective"),placeholder:t("nss_objective_placeholder"),name:"nss_objective",value:i.nss_objective,type:"text",onChange:h,customStyleContainer:{width:"100%"}}),e.jsx(j,{labelText:t("nss_roles"),placeholder:t("nss_roles_placeholder"),name:"nss_roles",value:i.nss_roles,type:"text",onChange:h,customStyleContainer:{width:"100%"}}),e.jsxs("div",{className:l.add_contact_person,children:[e.jsx("h6",{style:{marginTop:"1.5rem"},children:t("nss_commitee")}),(F=i==null?void 0:i.nss_commitee)==null?void 0:F.map((s,o)=>e.jsx("div",{children:e.jsxs("div",{className:l.show_field,children:[e.jsx(A,{labelText:t("name"),placeholder:t("enter_name"),name:"name",value:s==null?void 0:s.name,type:"text",onChange:a=>h(a,o),customStyleContainer:{width:"49.5%"}}),e.jsx(A,{labelText:t("designation"),placeholder:t("designation_details"),name:"designation",value:m==null?void 0:m.designation,type:"text",onChange:a=>h(a,o),customStyleContainer:{width:"49.5%"}})]})},o))]}),e.jsx("button",{className:l.add_contact_person_btn,title:"Add Member",onClick:()=>P("nss_commitee"),children:t("add_member")}),e.jsx("button",{className:l.update_btn,onClick:V,children:t(c?"update":"add")})]})})]})}),J&&e.jsx(H,{}),e.jsx(X,{open:E,children:e.jsx(Y,{setPhotoURL:v,photoURL:M,setFile:N,setOpenCrop:C,setUpload:R,setProfilePhoto:y,first:1,second:1})})]})}function Ue(){var c,p;const r=Z();return e.jsxs("div",{className:w.insChat,children:[e.jsx("div",{className:w.navbarr,children:e.jsx(ee,{status:"home"})}),((c=r.search)==null?void 0:c.substring(3))==="site"&&e.jsx(ce,{nid:(p=r==null?void 0:r.state)==null?void 0:p.nid,viewAs:"INSTITUTE"})]})}export{Ue as default};
