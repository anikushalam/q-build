import{u as $,r as l,k as F,nj as ae,j as s,e as se,L as Pe,D as ne,C as ce,g as Ne,t as we,bS as ge,Q as Se,w as Ce,nU as Ue,A as Te,x as Ae}from"./index-0ca76035.js";import{M as Le}from"./Main-dafb65cd.js";import{s as c,M as Ee}from"./MainProfile-a5efe2d0.js";import{e as Be,f as Fe,i as $e,j as Ie}from"./search-api-b192a53f.js";import{s as te}from"./InstituteProfileInfoTop.module-288d442d.js";import{b as be,E as ve,a as Oe,P as Re}from"./Posts-5a667711.js";import{x as Me,O as qe,P as Qe,Q as Ge}from"./post-api-b04eb54b.js";import{G as ze}from"./constant_value-4cd2b3e0.js";import{b as Ve,c as He}from"./image-api-6af06d8e.js";import{O as ye}from"./Overlay-c8100e0a.js";import{S as ke}from"./SearchModalBackdrop-c4f123e6.js";import{s as B}from"./EditConfirm.module-344fbdb9.js";import"./MiddleBody-a42f3bca.js";import"./CustomSuspenseGif-96fc12fa.js";import"./CustomSuspense-25f8db15.js";import"./SidebarBottom-7becd76a.js";import"./ProfileCover-5666dcaf.js";import"./LoaderButton-56f541f9.js";import"./ProfileSidebarBottom.module-965e8506.js";import"./index-c08ef366.js";import"./NeedHelp-0b224024.js";import"./Divider-2f807990.js";import"./FormControlLabel-b4cb2fc2.js";import"./SwitchBase-e3c2ff35.js";import"./Radio-4a0385d3.js";import"./EachQuestion-cfe1393e.js";import"./VideoPlayer-9f9fbe51.js";import"./index-1f591308.js";import"./index-387d7a00.js";import"./PostModal-e647b5d0.js";import"./CheckOutsideClick-e8a6bc7c.js";import"./Menu-f7e57469.js";import"./index-93406a40.js";import"./Checkbox-d3fc23de.js";import"./DialogTitle-11abc21d.js";import"./Switch-4bb87998.js";import"./Reactions-adfc4e73.js";import"./Save-f98edaa0.js";import"./Overlay.module-9133d1bb.js";import"./SearchHeader.module-b69c8942.js";const Ye="_navbar_1paom_1",_e={navbar:Ye},Je="_mainbody_19epb_1",Ke="_mainbodyedit_19epb_6",We="_mainbodyy_19epb_9",Xe="_mainbodysplit_19epb_19",Ze="_displayperson_19epb_25",pe="_profilepost_19epb_29",fe="_profileaboutt_19epb_32",re={mainbody:Je,mainbodyedit:Ke,mainbodyy:We,mainbodysplit:Xe,displayperson:Ze,profilepost:pe,profileaboutt:fe},De=({userId:n})=>{var N,k,a,S,T,U;const{t:o}=$(),[e,t]=l.useState(!1),d=F(L=>L.idChange),[h]=Be(),[m]=Fe(),[x]=$e(),[j]=Ie(),{oneUserDashboard:g,oneUserDashboardRefetch:_}=ae({id:d==null?void 0:d.id,skip:!(d!=null&&d.id)});l.useEffect(()=>{d!=null&&d.id&&_()},[d==null?void 0:d.id,_]);const C=()=>{t(!0),h({userFollowId:n}).then(()=>{_(),t(!1)}).catch({})},w=()=>{t(!0),m({userFollowId:n}).then(()=>{_(),t(!1)}).catch({})},y=()=>{t(!0),x({followId:n}).then(()=>{_(),t(!1)}).catch({})},u=()=>{t(!0),j({followId:n}).then(()=>{_(),t(!1)}).catch({})};return s.jsx(s.Fragment,{children:(k=(N=g==null?void 0:g.user)==null?void 0:N.userFollowing)!=null&&k.includes(n)?s.jsx("div",{className:te.profileedit,title:"Unfollow User",children:s.jsx("button",{onClick:w,disabled:e,style:{fontSize:"0.9rem"},children:o("unfollow")})}):(S=(a=g==null?void 0:g.user)==null?void 0:a.userFollowers)!=null&&S.includes(n)?s.jsx("div",{className:te.profileedit,title:"Follow Back User",children:s.jsx("button",{onClick:y,disabled:e,style:{fontSize:"0.9rem"},children:o("follow_back")})}):(U=(T=g==null?void 0:g.user)==null?void 0:T.userCircle)!=null&&U.includes(n)?s.jsx("div",{className:te.profileedit,title:"Uncirlced User",children:s.jsx("button",{onClick:u,disabled:e,style:{fontSize:"0.9rem"},children:o("uncircled")})}):s.jsx("div",{className:te.profileedit,title:"Follow User",children:s.jsx("button",{onClick:C,disabled:e,style:{fontSize:"0.9rem"},children:o("follow")})})})};function es({resultId:n,insID:o,profileData:e,searchId:t,profile:d,status:h,setApply:m,setEdit:x,openCrop:j,openCropCover:g,setOpenCrop:_,setOpenCropCover:C,coverChange:w,profileChange:y,photoURL:u,setPhotoURL:N,coverPhoto:k,profilePhoto:a,setUpload:S,setUploadProfile:T,setFile:U,setFileProfile:L,setCoverPhoto:b,setProfilePhoto:P,setEditt:E,userOpenCrop:K,setUserFile:W,setUserOpenCrop:oe,setUserUpload:I,userCoverPhoto:X,setUserCoverPhoto:O,insCoverChange:de,setUserProfileFile:me,setUserProfileOpenCrop:ie,setUserProfileUpload:le,setUserProfilePhoto:he,userrProfilePhoto:Z,userProfileOpenCrop:p,insProfileChange:f,setOpenBlock:D,userId:ee}){var q,Q,G,z,V,H,Y,r,A,J,xe,je;const[R,M]=l.useState(!0),{t:i}=$();return s.jsxs(s.Fragment,{children:[h!=="userProfile"&&h!=="useredit"?s.jsxs("div",{className:c.profilehead,children:[s.jsxs("div",{className:c.profileheadTop,children:[X?s.jsx("img",{src:X,alt:""}):s.jsx("img",{src:(e==null?void 0:e.coverId)!=="2"?`${se}/${e==null?void 0:e.insProfileCoverPhoto}`:"/images/profileAndCover/profile-cover.png",alt:""}),s.jsx("img",{className:c.profileMenu,src:"/images/profile/profile-menu.svg",alt:""}),s.jsx("label",{htmlFor:"insCover",children:s.jsx("img",{className:c.coverEdit,src:"/images/profile/cover-edit.svg",alt:""})}),s.jsx("input",{id:"insCover",name:"file",onChange:de,type:"file",style:{display:"none"},accept:"image/gif, image/jpeg, image/png",required:!0}),Z?s.jsxs("div",{className:c.profileimgcontainer,children:[s.jsx("img",{className:c.profileimg,src:Z}),s.jsx("label",{htmlFor:"userphoto",children:s.jsx("img",{className:c.profilephotoEdit,src:"/images/profile/cover-edit.svg",alt:""})}),s.jsx("input",{id:"userphoto",name:"file",onChange:f,type:"file",style:{display:"none"},accept:"image/gif, image/jpeg, image/png",required:!0})]}):s.jsxs("div",{className:c.profileimgcontainer,children:[s.jsx("img",{className:c.profileimg,src:(e==null?void 0:e.photoId)!=="1"?`${se}/${e==null?void 0:e.insProfilePhoto}`:"/images/ins_default_profile.svg"}),s.jsx("label",{htmlFor:"userphoto",children:s.jsx("img",{className:c.profilephotoEdit,src:"/images/profile/cover-edit.svg",alt:""})}),s.jsx("input",{id:"userphoto",name:"file",onChange:f,type:"file",style:{display:"none"},accept:"image/gif, image/jpeg, image/png",required:!0})]})]}),s.jsxs("div",{className:c.profileheadBottom,children:[s.jsxs("div",{className:c.profileheadBottomtop,children:[s.jsx("h3",{className:c.insname,children:e==null?void 0:e.insName}),s.jsxs("p",{className:c.username,children:["@",e==null?void 0:e.name]}),(e==null?void 0:e.followersCount)<2?s.jsxs("p",{className:c.oneLiner,children:[e==null?void 0:e.followersCount," ",i("follower")," /",((q=e==null?void 0:e.one_line_about)==null?void 0:q.length)>200?`${(Q=e==null?void 0:e.one_line_about)==null?void 0:Q.match(/.{1,200}/g)[0]} ...`:((G=e==null?void 0:e.one_line_about)==null?void 0:G.length)<=200?e==null?void 0:e.one_line_about:i("one_liner")]}):s.jsxs("p",{className:c.oneLiner,children:[e==null?void 0:e.followersCount," ",i("followers_")," /",((z=e==null?void 0:e.one_line_about)==null?void 0:z.length)>200?`${(V=e==null?void 0:e.one_line_about)==null?void 0:V.match(/.{1,200}/g)[0]} ...`:((H=e==null?void 0:e.one_line_about)==null?void 0:H.length)<=200?e==null?void 0:e.one_line_about:i("one_liner")]}),((Y=e==null?void 0:e.insAbout)==null?void 0:Y.length)>=41&&!R?s.jsxs("p",{className:c.biofull,children:[" ",e==null?void 0:e.insAbout,s.jsx("span",{className:c.biospan,onClick:()=>M(!0),children:i("read_less")})]}):((r=e==null?void 0:e.insAbout)==null?void 0:r.length)>=41&&R?s.jsxs("p",{className:c.biofull,children:[(A=e==null?void 0:e.insAbout)==null?void 0:A.match(/.{1,40}/g)[0],s.jsx("span",{className:c.biospan,onClick:()=>M(!1),children:i("read_more")})]}):s.jsx("p",{className:c.biofull,children:e==null?void 0:e.insAbout})]}),s.jsxs("div",{className:c.profileheadBottomcounts,children:[s.jsxs("div",{className:c.bottomOneItem,children:[s.jsx("p",{className:c.bottomCount,children:e==null?void 0:e.postCount}),(e==null?void 0:e.postCount)<2?s.jsx("p",{className:c.bottomText,children:i("post")}):s.jsx("p",{className:c.bottomText,children:i("posts")})]}),s.jsxs("div",{className:c.bottomOneItem,children:[s.jsx("p",{className:c.bottomCount,children:e==null?void 0:e.followersCount}),(e==null?void 0:e.followersCount)<2?s.jsx("p",{className:c.bottomText,children:i("follower")}):s.jsx("p",{className:c.bottomText,children:i("followers")})]}),s.jsxs("div",{className:c.bottomOneItem,children:[s.jsx("p",{className:c.bottomCount,children:e==null?void 0:e.followingCount}),(e==null?void 0:e.followingCount)<2?s.jsx("p",{className:c.bottomText,children:i("following")}):s.jsx("p",{className:c.bottomText,children:i("following")})]}),s.jsxs("div",{className:c.bottomOneItem,children:[s.jsx("p",{className:c.bottomCount,children:(e==null?void 0:e.staffCount)+(e==null?void 0:e.studentCount)}),(e==null?void 0:e.staffCount)+(e==null?void 0:e.studentCount)<2?s.jsx("p",{className:c.bottomText,children:i("joined")}):s.jsx("p",{className:c.bottomText,children:i("joined")})]}),(e==null?void 0:e.accessFeature)==="Locked"||t?s.jsxs("div",{className:c.bottomOneItem,children:[s.jsx("p",{className:c.bottomCount,children:e&&(e==null?void 0:e.departmentCount)}),(e==null?void 0:e.departmentCount)<2?s.jsx("p",{className:c.bottomText,children:i("department")}):s.jsx("p",{className:c.bottomText,children:i("departments")})]}):s.jsx(Pe,{to:`/q/${e==null?void 0:e.name}/department`,children:s.jsxs("div",{className:c.bottomOneItem,children:[s.jsx("p",{className:c.bottomCount,children:e&&(e==null?void 0:e.departmentCount)}),(e==null?void 0:e.departmentCount)<2?s.jsx("p",{className:c.bottomText,children:i("department")}):s.jsxs("p",{className:c.bottomText,children:[i("departments")," "]})]})}),s.jsxs("div",{className:c.bottomOneItem,children:[s.jsx("p",{className:c.bottomCount,children:e==null?void 0:e.staffCount}),(e==null?void 0:e.staffCount)<2?s.jsx("p",{className:c.bottomText,children:i("Staff")}):s.jsx("p",{className:c.bottomText,children:i("staffs")})]}),s.jsxs("div",{className:c.bottomOneItem,children:[s.jsx("p",{className:c.bottomCount,children:e==null?void 0:e.announcementCount}),(e==null?void 0:e.announcementCount)<2?s.jsx("p",{className:c.bottomText,children:i("announcement")}):s.jsx("p",{className:c.bottomText,children:i("announcements")})]}),s.jsxs("div",{className:c.bottomOneItem,children:[s.jsx("p",{className:c.bottomCount,children:e==null?void 0:e.admissionCount}),(e==null?void 0:e.admissionCount)<2?s.jsx("p",{className:c.bottomText,children:i("admision")}):s.jsx("p",{className:c.bottomText,children:i("admisions")})]})]}),s.jsx("img",{className:n===o&&h==="profile"||(d==null?void 0:d.loggedinAs)==="user"&&h==="profile"?c.scanicon:c.scaniconsearch,src:"/images/profile/scan-icon.svg",alt:""}),n===o&&h==="profile"?s.jsxs("div",{className:c.profileedit,onClick:()=>E(!0),children:[s.jsx("img",{src:"/images/profile/edit-profile-icon.svg",alt:""}),s.jsx("p",{children:i("edit")})]}):h==="profile"&&(d==null?void 0:d.loggedinAs)==="user"&&s.jsxs("div",{className:c.profileedit,onClick:()=>m(!0),children:[s.jsx("img",{src:"/images/profile/edit-profile-icon.svg",alt:""}),s.jsx("p",{children:i("apply")})]})]})]}):s.jsxs("div",{className:c.profilehead,children:[s.jsxs("div",{className:c.profileheadTop,children:[k?s.jsx("img",{src:k,alt:"cover is not uploaded"}):s.jsx("img",{src:(e==null?void 0:e.coverId)!=="2"?`${se}/${e==null?void 0:e.profileCoverPhoto}`:"/images/profileAndCover/profile-cover.png",alt:""}),n===o&&s.jsx("img",{className:c.profileMenu,src:"/images/profile/profile-menu.svg",alt:""}),h==="userProfile"&&(d==null?void 0:d.loggedinAs)==="user"&&s.jsx("img",{className:c.profileMenu,src:"/images/profile/profile-menu.svg",alt:"",onClick:()=>D(!0)}),s.jsx("input",{id:"cover",name:"file",onChange:w,type:"file",style:{display:"none"},accept:"image/gif, image/jpeg, image/png",required:!0}),s.jsx("label",{htmlFor:"cover",children:n===o&&s.jsx("img",{className:c.coverEdit,src:"/images/profile/cover-edit.svg",alt:""})}),a?s.jsxs("div",{className:c.profileimgcontainer,children:[s.jsx("img",{className:c.profileimg,src:a}),n===o&&s.jsx("div",{children:s.jsx("label",{children:s.jsx("img",{className:c.profilephotoEdit,src:"/images/profile/cover-edit.svg",alt:"",onClick:y})})})]}):s.jsxs("div",{className:(e==null?void 0:e.photoId)!=="1"?c.profileimgcontainer:`${c.profileimgcontainerbg}`,children:[s.jsx("img",{className:(e==null?void 0:e.photoId)!=="1"?c.profileimg:`${c.profileimg} ${c.profileimgg}`,src:(e==null?void 0:e.photoId)!=="1"?`${se}/${e==null?void 0:e.profilePhoto}`:"/images/member_tab/class/default_avatar.svg"}),n===o&&s.jsx("div",{children:s.jsx("label",{children:s.jsx("img",{className:c.profilephotoEdit,src:"/images/profile/cover-edit.svg",alt:"",onClick:y})})})]})]}),s.jsxs("div",{className:c.profileheadBottom,children:[s.jsxs("div",{className:c.profileheadBottomtop,children:[s.jsx("h3",{className:c.insname,children:e==null?void 0:e.userLegalName}),s.jsxs("p",{className:c.username,children:["@",e==null?void 0:e.username]}),e!=null&&e.one_line_about?s.jsx("p",{className:c.oneLiner,children:((J=e==null?void 0:e.one_line_about)==null?void 0:J.length)>200?`${(xe=e==null?void 0:e.one_line_about)==null?void 0:xe.match(/.{1,200}/g)[0]} ...`:((je=e==null?void 0:e.one_line_about)==null?void 0:je.length)<=200?e==null?void 0:e.one_line_about:""}):(e==null?void 0:e.followerCount)<2?s.jsxs("p",{className:c.oneLiner,children:[e==null?void 0:e.followerCount," ",i("follower")]}):s.jsxs("p",{className:c.oneLiner,children:[e==null?void 0:e.followerCount," ",i("followers_")]})]}),n===o&&h==="userProfile"?s.jsxs("div",{className:c.profileedit,onClick:()=>x(!0),children:[s.jsx("img",{src:"/images/profile/edit-profile-icon.svg",alt:""}),s.jsx("p",{children:i("edit")})]}):h==="userProfile"&&(d==null?void 0:d.loggedinAs)==="user"&&s.jsx(De,{userId:ee})]})]}),j&&s.jsx(ne,{open:j,children:s.jsx(ce,{setPhotoURL:N,photoURL:u,setFile:U,setOpenCrop:_,setUpload:S,setCoverPhoto:b,first:16,second:9})}),g&&s.jsx(ne,{open:g,children:s.jsx(ce,{setPhotoURL:N,photoURL:u,setFile:L,setOpenCrop:C,setUpload:T,setProfilePhoto:P,first:1,second:1})}),K&&s.jsx(ne,{open:K,children:s.jsx(ce,{setPhotoURL:N,photoURL:u,setFile:W,setOpenCrop:oe,setUpload:I,setProfilePhoto:O,first:16,second:9})}),p&&s.jsx(ne,{open:p,children:s.jsx(ce,{setPhotoURL:N,photoURL:u,setFile:me,setOpenCrop:ie,setUpload:le,setProfilePhoto:he,first:1,second:1})})]})}const ss="_middleBodyGap_1lgyc_1",ns={middleBodyGap:ss};function cs({profilePost:n,profileData:o}){var k,a,S,T,U,L;const e=F(b=>b.idChange),t=F(b=>b.postChange),d=Ne(),h=localStorage.getItem("_searchId"),[m,x]=l.useState(!0),[j,g]=we(),[_,C]=l.useState(!0),[w,y]=l.useState(1),{allProfilePost:u,allProfilePostRefetch:N}=Me({data:{id:(k=e==null?void 0:e.searchProfile)!=null&&k.id?(a=e==null?void 0:e.searchProfile)==null?void 0:a.id:h,page:w,limit:10,viewAs:ze},skip:!n});return l.useEffect(()=>{var b;(b=e==null?void 0:e.searchProfile)!=null&&b.id&&(d(ge.removeSearchPost({search:[]})),y(1),C(!0))},[d,(S=e==null?void 0:e.searchProfile)==null?void 0:S.id]),l.useEffect(()=>{g&&_&&n&&y(b=>b+1)},[g,n,_]),l.useEffect(()=>{N()},[w,n,N]),l.useEffect(()=>{var b,P;d(ge.addPost({post:n?((P=(b=u==null?void 0:u.post)==null?void 0:b[0])==null?void 0:P.author)===(e==null?void 0:e.searchProfile.id)?u==null?void 0:u.post:[]:[],profilePost:n?"search":"dash"})),(u==null?void 0:u.post.length)===10?C(!0):C(!1)},[u==null?void 0:u.post,d,n,(T=e==null?void 0:e.searchProfile)==null?void 0:T.id]),l.useEffect(()=>{setTimeout(()=>{x(!1)},5e3)},[]),s.jsx("div",{className:be.posts,children:!((U=t==null?void 0:t.searchPosts)!=null&&U.length)&&n&&m?s.jsx("div",{className:be.loader,children:s.jsx("img",{src:"/images/loader/loader.gif",alt:""})}):(L=t==null?void 0:t.searchPosts)==null?void 0:L.map((b,P)=>{var E;return((E=t==null?void 0:t.searchPosts)==null?void 0:E.length)===P+1?s.jsx("div",{ref:j,children:s.jsx(ve,{post:b,profilePost:n,allPosts:[],profileData:o},P)},P):s.jsx(ve,{post:b,profilePost:n,allPosts:[],profileData:o},P)})})}const ts="_container_1wqh6_1",os="_header_1wqh6_6",ds="_headerText_1wqh6_20",ms="_headerTextActive_1wqh6_26",is="_headerLink_1wqh6_39",ls="_headerLinkActive_1wqh6_51",hs="_headerLinkSearch_1wqh6_57",rs="_headerLinkSearch1_1wqh6_61",v={container:ts,header:os,headerText:ds,headerTextActive:ms,headerLink:is,headerLinkActive:ls,headerLinkSearch:hs,headerLinkSearch1:rs},us=({state:n})=>{const[o,e]=l.useState("my");$();const t=F(x=>x.idChange),d=()=>{t!=null&&t.searchProfile.id||(e("save"),n(!1))},h=()=>{e("my"),n(!1)},m=()=>{t!=null&&t.searchProfile.id||(e("tag"),n(!1))};return s.jsxs("div",{className:v.container,children:[s.jsxs("div",{className:v.header,children:[s.jsx("div",{className:o==="my"?v.headerTextActive:v.headerText,onClick:h,children:s.jsx("p",{className:o==="my"?`${v.headerLink} ${v.headerLinkActive}`:v.headerLink,children:"Posts"})}),s.jsx("div",{className:o==="tag"?v.headerTextActive:v.headerText,onClick:m,children:s.jsx("p",{className:o==="tag"?`${v.headerLink} ${v.headerLinkActive}`:v.headerLink,children:"Tag Posts"})}),t!=null&&t.searchProfile.id?"":s.jsx("div",{className:o==="save"?v.headerTextActive:v.headerText,onClick:d,children:s.jsx("p",{className:o==="save"?`${v.headerLink} ${v.headerLinkActive}`:v.headerLink,children:"Saved"})})]}),t!=null&&t.searchProfile.id?s.jsx(cs,{profilePost:!0}):s.jsx(Oe,{profilePost:!0,profileSavedPost:o})]})},xs="_middleBodyRight_1of88_1",js="_middleBodyRightTop_1of88_12",gs="_middleBodyRightbottom_1of88_24",bs="_flexItem_1of88_38",ue={middleBodyRight:xs,middleBodyRightTop:js,middleBodyRightbottom:gs,flexItem:bs},vs=({questionCount:n,answerQuestionCount:o,upVote:e})=>{const{t}=$();return s.jsxs("div",{className:ue.middleBodyRight,children:[s.jsxs("div",{className:ue.middleBodyRightTop,children:[" ",t("know_s")," (",t("knowledge_score"),")"]}),s.jsxs("div",{className:ue.middleBodyRightbottom,children:[s.jsxs("h6",{children:[t("total_questions_asked")," : ",n]}),s.jsxs("h6",{children:[t("questions_answered")," : ",o]}),s.jsxs("h6",{children:[t("total_upward")," : ",e]})]})]})},_s=({state:n,profileBody:o,upVote:e,status:t})=>{const d=h=>{n(h)};return s.jsxs("div",{className:ns.middleBodyGap,children:[s.jsx(us,{state:d,status:t}),s.jsx(vs,{questionCount:o==null?void 0:o.questionCount,answerQuestionCount:o==null?void 0:o.answerQuestionCount,upVote:e})]})},Ns=({onClose:n,userId:o,onSearchRefetch:e,loginUserId:t,blockedBy:d})=>{const{t:h}=$(),[m,x]=l.useState(!1),[j]=qe(),[g]=Qe(),[_]=Ge(),C=()=>{x(!0),j({blockId:o}).then(()=>{e(),x(!1),n()}).catch({})},w=()=>{x(!0),g({blockId:o}).then(()=>{e(),x(!1),n()}).catch({})},y=()=>{x(!0),_({rid:o,id:t,accountStatus:"Malicious"}).then(()=>{x(!1),n()}).catch({})};return s.jsxs(s.Fragment,{children:[s.jsx(ke,{onClose:n}),s.jsxs(ye,{customStyle:{zIndex:"1200"},children:[s.jsxs("div",{className:B.edit_modal_container,style:{width:"200px"},children:[d!=null&&d.includes(t)?s.jsxs("h6",{className:B.edit,onClick:w,children:[h("unblocked")," ",h("account")]}):s.jsxs("h6",{className:B.edit,onClick:C,children:[h("block")," ",h("account")]}),s.jsx("h6",{className:B.remove,onClick:y,children:h("report_acount")})]}),m&&s.jsx(Se,{})]})]})},Cs=({onClose:n,profileChange:o,onUploadType:e})=>{const{t}=$();return s.jsxs(s.Fragment,{children:[s.jsx(ke,{onClose:n}),s.jsx(ye,{customStyle:{zIndex:"1200"},children:s.jsxs("div",{className:B.edit_modal_container,style:{width:"300px"},children:[s.jsx("label",{htmlFor:"photo",children:s.jsx("h6",{className:B.edit,onClick:()=>e("ONLY_USER"),children:t("update_only_profile_photo")})}),s.jsx("label",{htmlFor:"photo",children:s.jsx("h6",{className:B.edit,onClick:()=>e("USER_AND_STUDENT"),children:t("update_user_student_profile_photo")})}),s.jsx("input",{id:"photo",name:"file",onChange:o,type:"file",style:{display:"none"},accept:"image/gif, image/jpeg, image/png",required:!0})]})})]})};function ys(){var D,ee,R,M,i,q,Q,G,z,V,H,Y;const n=F(r=>r.idChange),o=Ne(),[e,t]=l.useState(!1),[d,h]=l.useState(!1),{data:m,refetch:x}=Ce((D=n==null?void 0:n.searchProfile)!=null&&D.id?(ee=n==null?void 0:n.searchProfile)==null?void 0:ee.id:n==null?void 0:n.id,{skip:n.searchProfile.type==="USERNAME"}),{data:j,refetch:g}=Ue((R=n==null?void 0:n.searchProfile)==null?void 0:R.id,{skip:n.searchProfile.type==="ID"});l.useEffect(()=>{n.searchProfile.type==="USERNAME"?g():n.searchProfile.type==="ID"&&x()},[n.searchProfile.type,(M=n==null?void 0:n.searchProfile)==null?void 0:M.id]),l.useEffect(()=>{var r;j!=null&&j.user&&n.searchProfile.type==="USERNAME"&&o(Te.searchId({id:(r=j==null?void 0:j.user)==null?void 0:r._id,type:"ID"}))},[j==null?void 0:j.user]);const _=((i=n==null?void 0:n.searchProfile)==null?void 0:i.id)!==""?(q=n==null?void 0:n.searchProfile)==null?void 0:q.id:n==null?void 0:n.id,[C,w]=l.useState(!1),[y,u]=l.useState(!1),[N,k]=l.useState(""),[a,S]=l.useState(""),[T,U]=l.useState(""),[L,b]=l.useState(""),[P,E]=l.useState(!1),[K,W]=l.useState(!1),[oe,I]=l.useState(""),[X,O]=l.useState(!1),[de,me]=l.useState(""),[ie]=Ve(),[le]=He();l.useEffect(()=>{if(C){let r=new FormData;r.append("file",N),le({cover:r,id:n==null?void 0:n.id}).then(()=>{}).catch({})}},[C,N]),l.useEffect(()=>{if(y){let r=new FormData;r.append("file",a),ie({photo:r,id:n==null?void 0:n.id,role:de}).then(()=>{}).catch({})}},[y,a]);const he=r=>{const A=URL.createObjectURL(r.target.files[0]);k(r.target.files[0]),U(A),I(A),E(!0)},Z=()=>{O(!0)},p=r=>{me(A=>r)},f=r=>{var A;if((A=r.target.files)!=null&&A.length){O(!1);const J=URL.createObjectURL(r.target.files[0]);S(r.target.files[0]),b(J),I(J),W(!0)}};return s.jsxs(s.Fragment,{children:[m&&((Q=n==null?void 0:n.repostQuestion)==null?void 0:Q.repostStatus)==="post"&&(e?s.jsx("div",{className:re.mainbodyedit,children:s.jsx(Ee,{setEdit:t})}):s.jsxs("div",{className:re.mainbody,children:[s.jsx(es,{resultId:_,insID:n==null?void 0:n.id,profileData:m==null?void 0:m.user,searchId:(G=n==null?void 0:n.searchProfile)==null?void 0:G.id,profile:n,status:"userProfile",setEdit:t,openCrop:P,openCropCover:K,setOpenCrop:E,setOpenCropCover:W,coverChange:he,profileChange:Z,photoURL:oe,setPhotoURL:I,coverPhoto:T,profilePhoto:L,setUpload:w,setUploadProfile:u,setFile:k,setFileProfile:S,setCoverPhoto:U,setProfilePhoto:b,setOpenBlock:h,blockedBy:((z=m==null?void 0:m.user)==null?void 0:z.blockedBy)??[],loginUserId:(n==null?void 0:n.id)??"",userId:((V=n==null?void 0:n.searchProfile)==null?void 0:V.id)??""}),s.jsxs("div",{className:re.mainbodysplit,children:[s.jsx(Re,{userData:m==null?void 0:m.user,status:"profile"}),s.jsx(_s,{profileBody:m&&(m==null?void 0:m.user),upVote:(m==null?void 0:m.upVote)||0,status:"profile"}),d&&s.jsx(Ns,{userId:((H=n==null?void 0:n.searchProfile)==null?void 0:H.id)??"",onClose:()=>h(r=>!r),onSearchRefetch:x,blockedBy:((Y=m==null?void 0:m.user)==null?void 0:Y.blockedBy)??[],loginUserId:(n==null?void 0:n.id)??""})]})]})),X&&s.jsx(Cs,{onClose:()=>O(!1),profileChange:f,onUploadType:p})]})}function ln(){var t,d,h,m,x;const n=localStorage.getItem("user"),o=F(j=>j.idChange.searchProfile),{data:e}=Ce(n);return s.jsxs("div",{className:_e.Profile,children:[s.jsx("div",{className:_e.navbar,children:s.jsx(Ae,{status:"profile",profileData:e==null?void 0:e.user,username:(t=e==null?void 0:e.user)==null?void 0:t.username,name:(d=e==null?void 0:e.user)==null?void 0:d.userLegalName,photoId:(h=e==null?void 0:e.user)==null?void 0:h.photoId,profilePhoto:(m=e==null?void 0:e.user)==null?void 0:m.profilePhoto})}),(o==null?void 0:o.searchAs)==="institute"?s.jsx(Le,{applicantUserName:(x=e==null?void 0:e.user)==null?void 0:x.username}):s.jsx(ys,{profileData:e==null?void 0:e.user})]})}export{ln as default};
