import{r as h,k as I,j as l,D as B,C as z,u as $,z as A,nj as q,R as D,_ as F,e as k,L as v,Q as M,g as H,A as Q}from"./index-0ca76035.js";import{M as V}from"./MiddleBody-a42f3bca.js";import{C as S}from"./CustomSuspense-25f8db15.js";import{S as J}from"./SidebarBottom-7becd76a.js";import{s as a}from"./InstituteProfileInfoTop.module-288d442d.js";import{P as G}from"./ProfileCover-5666dcaf.js";import{u as K,a as W}from"./image-api-6af06d8e.js";import{M as X,N as Y}from"./post-api-b04eb54b.js";import{g as Z,h as u}from"./search-api-b192a53f.js";const i="_mainbody_jyie3_1",t="_mainbody_form_jyie3_6",oo="_mainbodysplit_jyie3_12",lo="_displayperson_jyie3_18",ao="_mainbodyy_jyie3_23",P={mainbody:i,mainbody_form:t,mainbodysplit:oo,displayperson:lo,mainbodyy:ao},eo=({dynamicImage:o,onPhotohangeAction:C,defaultImg:r})=>{const[c,d]=h.useState(""),[e,_]=h.useState(""),[s,p]=h.useState(!1),[x,N]=h.useState(!1),[j,n]=h.useState(""),f=I(m=>m.idChange.searchProfile);h.useEffect(()=>{x&&C(e)},[x,e]);const b=m=>{const y=URL.createObjectURL(m.target.files[0]);_(m.target.files[0]),n(y),d(y),p(!0)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:a.profileimgcontainer,children:[l.jsx("img",{className:a.profileimg,src:j||o||r}),f!=null&&f.id?"":l.jsx("label",{htmlFor:"userphoto",children:l.jsx("img",{className:a.profilephotoEdit,src:"/images/profile/cover-edit.svg",alt:""})}),l.jsx("input",{id:"userphoto",name:"file",onChange:b,type:"file",style:{display:"none"},accept:"image/gif, image/jpeg, image/png",required:!0})]}),l.jsx(B,{open:s,children:l.jsx(z,{setPhotoURL:d,photoURL:c,setFile:_,setOpenCrop:p,setUpload:N,setProfilePhoto:n,first:1,second:1})})]})},ro=({institute:o,is_hostel:C})=>{var f,b,m;const{t:r}=$(),[c,d]=h.useState(!1),e=I(y=>y.idChange),[_]=Z(),[s]=u();X(),Y();const{oneInstituteProfileRefetch:p}=A({data:{id:o==null?void 0:o._id,type:"ID"},skip:!(o!=null&&o._id)}),{oneUserDashboard:x,oneUserDashboardRefetch:N}=q({id:e==null?void 0:e.id,skip:!(e!=null&&e.id)});h.useEffect(()=>{e!=null&&e.id&&N()},[e==null?void 0:e.id]);const j=()=>{d(!0),_({InsfollowId:o==null?void 0:o._id}).then(()=>{p(),d(!1)}).catch({})},n=()=>{d(!0),s({InsfollowId:o==null?void 0:o._id}).then(()=>{p(),d(!1)}).catch({})};return l.jsx(l.Fragment,{children:(b=(f=x==null?void 0:x.user)==null?void 0:f.user_block_institute)!=null&&b.includes(o==null?void 0:o._id)?"":(m=o==null?void 0:o.userFollowersList)!=null&&m.includes(e==null?void 0:e.id)?l.jsx("div",{className:a.profileedit,style:{right:"1.5rem",width:"100px",height:"40px",borderRadius:"12px",opacity:"0.9"},title:"Unfollow Institute",children:l.jsx("button",{onClick:n,disabled:c,style:{fontSize:"0.9rem"},children:r("unfollow")})}):l.jsx("div",{className:a.profileedit,style:{right:"1.5rem",width:"100px",height:"40px",borderRadius:"12px",opacity:"0.9"},title:"Follow Institute",children:l.jsx("button",{onClick:j,disabled:c,style:{fontSize:"0.9rem"},children:r("follow")})})})},co=D.lazy(()=>F(()=>import("./FollowButton-e5215e8e.js"),["assets/FollowButton-e5215e8e.js","assets/index-0ca76035.js","assets/index-4d24e8f6.css","assets/post-api-b04eb54b.js","assets/search-api-b192a53f.js","assets/InstituteProfileInfoTop.module-288d442d.js","assets/InstituteProfileInfoTop-7f1f3ac8.css","assets/constant_value-4cd2b3e0.js"])),so=({institute:o,setApply:C})=>{var j,n,f,b,m,y,R,O,E,U,L;const{t:r}=$(),c=I(g=>g.idChange),d=I(g=>g.authChange.loginRole),[e]=K(),[_]=W(),[s,p]=h.useState(!1),x=g=>{if(g){p(w=>!w);let T=new FormData;T.append("file",g),e({cover:T,id:c==null?void 0:c.id}).then(()=>{p(w=>!w)}).catch({})}},N=g=>{if(g){p(w=>!w);let T=new FormData;T.append("file",g),_({photo:T,id:c==null?void 0:c.id}).then(()=>{p(w=>!w)}).catch({})}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:a.profilehead,children:[l.jsxs("div",{className:a.profileheadTop,children:[l.jsx(G,{dynamicImage:(o==null?void 0:o.coverId)!=="2"?`${k}/${o==null?void 0:o.insProfileCoverPhoto}`:"/images/profileAndCover/profile-cover.png",onCoverChangeAction:x,username:o==null?void 0:o.name}),l.jsx(eo,{dynamicImage:(o==null?void 0:o.photoId)!=="1"?`${k}/${o==null?void 0:o.insProfilePhoto}`:"/images/ins_default_profile.svg",onPhotohangeAction:N,defaultImg:"/images/ins_default_profile.svg"})]}),l.jsxs("div",{className:a.profileheadBottom,children:[l.jsxs("div",{className:a.profileheadBottomtop,style:{display:"flex",justifyContent:"space-between"},children:[l.jsxs("div",{children:[l.jsx("h3",{className:a.insname,children:o==null?void 0:o.insName}),l.jsxs("p",{className:a.username,children:["@",o==null?void 0:o.name]}),o!=null&&o.one_line_about?l.jsxs("p",{className:a.oneLiner,children:[" ",((j=o==null?void 0:o.one_line_about)==null?void 0:j.length)>200?`${(n=o==null?void 0:o.one_line_about)==null?void 0:n.match(/.{1,200}/g)[0]} ...`:((f=o==null?void 0:o.one_line_about)==null?void 0:f.length)<=200?o==null?void 0:o.one_line_about:""," "]}):(o==null?void 0:o.followersCount)<2?l.jsxs("p",{className:a.oneLiner,children:[o==null?void 0:o.followersCount," ",r("follower")]}):l.jsxs("p",{className:a.oneLiner,children:[o==null?void 0:o.followersCount," ",r("followers_")]}),l.jsx("p",{className:a.biofull,children:o==null?void 0:o.insAbout})]}),(b=o==null?void 0:o.sub_domain)!=null&&b.sub_domain_path?l.jsxs("a",{target:"_blank",rel:"noreferrer",href:(m=o==null?void 0:o.sub_domain)==null?void 0:m.sub_domain_path,style:{display:"flex",alignItems:"center",flexDirection:"column",marginTop:"0.8rem",color:"#1C023B"},children:[l.jsx("img",{src:"/images/site-globe-blue-icon.svg",alt:""}),l.jsx("p",{children:(y=o==null?void 0:o.sub_domain)==null?void 0:y.sub_domain_path})]}):""]}),l.jsxs("div",{className:a.profileheadBottomcounts,children:[l.jsxs("div",{className:a.bottomOneItem,children:[l.jsx("p",{className:a.bottomCount,children:o==null?void 0:o.postCount}),(o==null?void 0:o.postCount)<2?l.jsx("p",{className:a.bottomText,children:r("post")}):l.jsx("p",{className:a.bottomText,children:r("posts")})]}),l.jsxs("div",{className:a.bottomOneItem,children:[(c==null?void 0:c.searchProfile.id)&&l.jsxs("div",{className:a.profile_following_count,children:[l.jsx("p",{className:a.bottomCount,children:o==null?void 0:o.followersCount}),(o==null?void 0:o.followersCount)<2?l.jsx("p",{className:a.bottomText,children:r("follower")}):l.jsx("p",{className:a.bottomText,children:r("followers")})]}),d==="_usr_rs"?l.jsxs("div",{className:a.profile_following_count,children:[l.jsx("p",{className:a.bottomCount,children:o==null?void 0:o.followersCount}),(o==null?void 0:o.followersCount)<2?l.jsx("p",{className:a.bottomText,children:r("follower")}):l.jsx("p",{className:a.bottomText,children:r("followers")})]}):!(c!=null&&c.searchProfile.id)&&l.jsx(v,{to:`/q/${o==null?void 0:o.name}/following`,children:l.jsxs("div",{className:a.profile_following_count,children:[l.jsx("p",{className:a.bottomCount,children:o==null?void 0:o.followersCount}),(o==null?void 0:o.followersCount)<2?l.jsx("p",{className:a.bottomText,children:r("follower")}):l.jsx("p",{className:a.bottomText,children:r("followers")})]})})]}),l.jsxs("div",{className:a.bottomOneItem,children:[(c==null?void 0:c.searchProfile.id)&&l.jsxs("div",{className:a.profile_following_count,children:[l.jsx("p",{className:a.bottomCount,children:o==null?void 0:o.followingCount}),(o==null?void 0:o.followingCount)<2?l.jsx("p",{className:a.bottomText,children:r("unfollow")}):l.jsx("p",{className:a.bottomText,children:r("unfollow")})]}),d==="_usr_rs"?l.jsxs("div",{className:a.profile_following_count,children:[l.jsx("p",{className:a.bottomCount,children:o==null?void 0:o.followingCount}),(o==null?void 0:o.followingCount)<2?l.jsx("p",{className:a.bottomText,children:r("unfollow")}):l.jsx("p",{className:a.bottomText,children:r("unfollow")})]}):!(c!=null&&c.searchProfile.id)&&l.jsx(v,{to:`/q/${o==null?void 0:o.name}/following`,children:l.jsxs("div",{className:a.profile_following_count,children:[l.jsx("p",{className:a.bottomCount,children:o==null?void 0:o.followingCount}),(o==null?void 0:o.followingCount)<2?l.jsx("p",{className:a.bottomText,children:r("unfollow")}):l.jsx("p",{className:a.bottomText,children:r("unfollow")})]})})]}),l.jsxs("div",{className:a.bottomOneItem,children:[l.jsx("p",{className:a.bottomCount,children:(o==null?void 0:o.staffCount)??0+(o==null?void 0:o.studentCount)??0}),(o==null?void 0:o.staffCount)??0+(o==null?void 0:o.studentCount)??0<2?l.jsx("p",{className:a.bottomText,children:r("joined")}):l.jsx("p",{className:a.bottomText,children:r("joined")})]}),(o==null?void 0:o.accessFeature)==="Locked"||c!=null&&c.searchProfile.id?l.jsxs("div",{className:a.bottomOneItem,children:[l.jsx("p",{className:a.bottomCount,children:o&&(o==null?void 0:o.departmentCount)}),(o==null?void 0:o.departmentCount)<2?l.jsx("p",{className:a.bottomText,children:r("department")}):l.jsx("p",{className:a.bottomText,children:r("departments")})]}):d==="_usr_rs"?l.jsxs("div",{className:a.bottomOneItem,children:[l.jsx("p",{className:a.bottomCount,children:o&&(o==null?void 0:o.departmentCount)}),(o==null?void 0:o.departmentCount)<2?l.jsx("p",{className:a.bottomText,children:r("department")}):l.jsxs("p",{className:a.bottomText,children:[r("departments")," "]})]}):l.jsx(v,{to:`/q/${o==null?void 0:o.name}/department`,children:l.jsxs("div",{className:a.bottomOneItem,children:[l.jsx("p",{className:a.bottomCount,children:o&&(o==null?void 0:o.departmentCount)}),(o==null?void 0:o.departmentCount)<2?l.jsx("p",{className:a.bottomText,children:r("department")}):l.jsxs("p",{className:a.bottomText,children:[r("departments")," "]})]})}),l.jsxs("div",{className:a.bottomOneItem,children:[(c==null?void 0:c.searchProfile.id)&&l.jsxs(l.Fragment,{children:[l.jsx("p",{className:a.bottomCount,children:o==null?void 0:o.staffCount}),(o==null?void 0:o.staffCount)<2?l.jsx("p",{className:a.bottomText,children:r("Staff")}):l.jsx("p",{className:a.bottomText,children:r("staffs")})]}),d==="_usr_rs"?l.jsxs(l.Fragment,{children:[l.jsx("p",{className:a.bottomCount,children:o==null?void 0:o.staffCount}),(o==null?void 0:o.staffCount)<2?l.jsx("p",{className:a.bottomText,children:r("Staff")}):l.jsx("p",{className:a.bottomText,children:r("staffs")})]}):!(c!=null&&c.searchProfile.id)&&l.jsxs(v,{to:`/q/${o==null?void 0:o.name}/staff`,children:[l.jsx("p",{className:a.bottomCount,children:o==null?void 0:o.staffCount}),(o==null?void 0:o.staffCount)<2?l.jsx("p",{className:a.bottomText,children:r("Staff")}):l.jsx("p",{className:a.bottomText,children:r("staffs")})]})]}),l.jsxs("div",{className:a.bottomOneItem,children:[l.jsx("p",{className:a.bottomCount,children:o==null?void 0:o.announcementCount}),(o==null?void 0:o.announcementCount)<2?l.jsx("p",{className:a.bottomText,children:r("announcement")}):l.jsx("p",{className:a.bottomText,children:r("announcements")})]}),l.jsxs("div",{className:a.bottomOneItem,children:[l.jsx("p",{className:a.bottomCount,children:o==null?void 0:o.admissionCount}),(o==null?void 0:o.admissionCount)<2?l.jsx("p",{className:a.bottomText,children:r("admission")}):l.jsx("p",{className:a.bottomText,children:r("admissions")})]})]}),c!=null&&c.searchProfile.id?(c==null?void 0:c.loggedinAs)==="user"?l.jsxs(S,{children:[l.jsx(ro,{institute:o,is_hostel:!!((R=o==null?void 0:o.hostelDepart)!=null&&R.length)}),l.jsxs("div",{className:a.profileedit,onClick:()=>C(!0),style:{width:"180px",height:"40px",right:"24.5%"},children:[l.jsx("img",{style:{height:"1rem"},src:"/images/profile/edit-profile-icon.svg",alt:""}),l.jsx("p",{style:{fontSize:"1rem"},children:r("new_admissions")})]}),((O=o==null?void 0:o.hostelDepart)==null?void 0:O[0])&&l.jsx(v,{to:`/q/${o==null?void 0:o.name}/hostel/profile`,state:{hid:(E=o==null?void 0:o.hostelDepart)==null?void 0:E[0]},children:l.jsxs("div",{className:a.profileedit,style:{position:"absolute",right:"42.5%",cursor:"pointer",height:"40px",width:"180px"},children:[l.jsx("img",{style:{height:"1rem"},src:"/images/profile/edit-profile-icon.svg",alt:""}),l.jsx("p",{style:{fontSize:"1rem"},children:r("hostel_facility")})]})})]}):l.jsx(S,{children:l.jsx(co,{institute:o})}):l.jsxs(l.Fragment,{children:[l.jsx(v,{to:`/q/${(U=c.loginProfile)==null?void 0:U.username}/edit/site?a=landing`,style:{textDecoration:"none",color:"#fff"},children:l.jsxs("div",{className:a.site_edit,children:[l.jsx("img",{src:"/images/profile/site-globe-icon.svg",alt:""}),l.jsx("p",{children:r("site_info")})]})}),l.jsx(v,{to:`/q/${(L=c.loginProfile)==null?void 0:L.username}/edit`,style:{textDecoration:"none",color:"#fff"},children:l.jsxs("div",{className:a.profileedit,children:[l.jsx("img",{src:"/images/profile/edit-profile-icon.svg",alt:""}),l.jsx("p",{children:r("edit")})]})})]})]})]}),s&&l.jsx(M,{})]})},mo=D.lazy(()=>F(()=>import("./Side-b4677b37.js"),["assets/Side-b4677b37.js","assets/index-0ca76035.js","assets/index-4d24e8f6.css","assets/SidebarBottom-7becd76a.js","assets/CustomSuspense-25f8db15.js","assets/SidebarBottom-a67b7c0e.css","assets/Side-82584010.css"])),ho=D.lazy(()=>F(()=>import("./Mainbody-bcdd6b4a.js"),["assets/Mainbody-bcdd6b4a.js","assets/index-0ca76035.js","assets/index-4d24e8f6.css","assets/Sidebar-3921e5e2.js","assets/SidebarBottom-7becd76a.js","assets/CustomSuspense-25f8db15.js","assets/SidebarBottom-a67b7c0e.css","assets/Sidebar-ff16a12f.css","assets/Card-fcd366e5.js","assets/Card-7be5d5a8.css","assets/LibraryModal.module-13078745.js","assets/LibraryModal-f22c54c1.css","assets/ButtonWithAction-aaeab9a0.js","assets/LoaderButton-56f541f9.js","assets/LoaderButton-43b48c5c.css","assets/Divider-2f807990.js","assets/Posts-ef4ba95e.js","assets/post-api-b04eb54b.js","assets/constant_value-4cd2b3e0.js","assets/QvipleLoaderGif-bd545aa8.js","assets/PostTypeConfiguration-d2faac09.js","assets/Mainbody-419b4c2e.css"])),po=D.lazy(()=>F(()=>import("./JoiningForm-4094e9ae.js"),["assets/JoiningForm-4094e9ae.js","assets/index-0ca76035.js","assets/index-4d24e8f6.css","assets/JoiningForm.module-3d067e90.js","assets/JoiningForm-86ccc451.css","assets/admission-api-925391d9.js","assets/ApplicationPreviewDetail-4a05e741.js","assets/finance-api-e818490b.js","assets/JoinFormInputView-2b5b0bdd.js","assets/JoinForm.module-212f9bb3.js","assets/JoinForm-e988a09c.css","assets/FeesStructure.module-7a88fbbc.js","assets/FeesStructure-45be5563.css","assets/Overlay-c8100e0a.js","assets/Overlay.module-9133d1bb.js","assets/Overlay-6f7772cd.css","assets/SearchModalBackdrop-c4f123e6.js","assets/SearchHeader.module-b69c8942.js","assets/SearchHeader-d07f850c.css","assets/EditConfirm.module-344fbdb9.js","assets/EditConfirm-15d465b5.css","assets/CustomNormalSelectInput-0a62fa3f.js","assets/DatePicker-c6d0e911.js","assets/DatePicker-9ecb4579.css","assets/JoinFormInput-82706177.js","assets/StringLength.module-75a6e080.js","assets/StringLength-7b1d3ded.css","assets/SeatingArrangement.module-3f4ae6aa.js","assets/SeatingArrangement-04e9501a.css","assets/PopupWrapper-2578092d.js","assets/SearchModalWrapper-0fa3f9a3.js","assets/CustomSelectDepartment-11201deb.js","assets/hostel-api-9294ced1.js","assets/transport-api-ee724cce.js","assets/BorderBottom-1dc6f53e.js","assets/BorderBottom-eabbc1eb.css","assets/JoinFormCalender-d186c4ef.js","assets/SelectFeeStructure-915fed5c.js"]));function yo({applicantUserName:o}){var N,j,n,f,b;const[C,r]=h.useState(!1),[c,d]=h.useState(0),e=I(m=>m.idChange),_=H(),{oneInstituteProfile:s,oneInstituteProfileRefetch:p}=A({data:{id:e.searchProfile.id?e.searchProfile.id:e==null?void 0:e.id,type:e.searchProfile.type},skip:e.searchProfile.id?!e.searchProfile.id:!(e!=null&&e.id)}),x=e.searchProfile.id!==""?e.searchProfile.id:e==null?void 0:e.id;return h.useEffect(()=>{(e.searchProfile.id||e!=null&&e.id)&&p()},[e.searchProfile.id,e==null?void 0:e.id]),h.useEffect(()=>{var m;s!=null&&s.institute&&e.searchProfile.type==="USERNAME"&&_(Q.searchId({id:(m=s==null?void 0:s.institute)==null?void 0:m._id,type:"ID"}))},[s==null?void 0:s.institute]),l.jsxs(l.Fragment,{children:[((N=e==null?void 0:e.repostQuestion)==null?void 0:N.repostStatus)==="post"&&C?l.jsx("div",{className:P.mainbody_form,children:l.jsxs(S,{children:[l.jsx("div",{className:P.sidebar,children:l.jsx(mo,{profileSide:s==null?void 0:s.institute,resultId:x,name:(j=s==null?void 0:s.institute)==null?void 0:j.name,insPhotoId:(n=s==null?void 0:s.institute)==null?void 0:n.photoId,insProfilePhoto:(f=s==null?void 0:s.institute)==null?void 0:f.insProfilePhoto,setApply:r,apply:C})}),l.jsx(po,{searchId:e.searchProfile.id,uid:e==null?void 0:e.id,applicantUserName:o})]})}):l.jsxs("div",{className:P.mainbody,children:[l.jsx(so,{institute:s==null?void 0:s.institute,setApply:r}),l.jsxs("div",{className:P.mainbodysplit,children:[l.jsx("div",{className:P.displayperson,style:{top:c?`-${c-230}px`:"500px",position:"sticky"},children:l.jsx(J,{resultId:x,setDisplayHeight1:d})}),l.jsx("div",{className:P.profilepost,children:l.jsx(V,{profileBody:s==null?void 0:s.institute})})]})]}),l.jsx(S,{children:((b=e==null?void 0:e.repostQuestion)==null?void 0:b.repostStatus)==="repost"&&l.jsx(ho,{})})]})}export{yo as M};
