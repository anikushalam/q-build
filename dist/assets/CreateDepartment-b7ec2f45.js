import{k as q,r as _,u as w,$ as O,o4 as R,a6 as B,g as U,j as l,D as z,e as G,A as I}from"./index-0ca76035.js";/* empty css                   */import{L as J}from"./LoaderButton-56f541f9.js";import K from"./AssignStaffModal-e51a4441.js";import{S as r}from"./StringLength-ef31e6b8.js";import"./search-api-b192a53f.js";import"./AssignStaffModal.module-a60b32e1.js";import"./StringLength.module-75a6e080.js";const Q="_DModal_jjeai_1",V="_title_jjeai_8",W="_input_jjeai_25",X="_mid_jjeai_63",Y="_text_jjeai_77",Z="_btn_jjeai_99",m="_notFound_jjeai_136",n={DModal:Q,title:V,input:W,mid:X,text:Y,btn:Z,notFound:m};function cs({departmentModal:L,hideModal:x,edit:h,setEdit:A,editDepartment:s,onReftech:S}){var C;const f=q(i=>i.idChange.id),[N,v]=_.useState(!1),[c,j]=_.useState(h&&(s==null?void 0:s.dHead)),[T,e]=_.useState(!1),[b,g]=_.useState(!0),{t:o}=w(),[a,u]=_.useState({dName:h&&(s==null?void 0:s.dName)||"",dTitle:h&&(s==null?void 0:s.dTitle)||"",sid:h&&((C=s==null?void 0:s.dHead)==null?void 0:C._id)||"",gr_initials:h&&(s==null?void 0:s.gr_initials)||""}),{allDepartmentRefetch:$}=O({id:f,skip:!f}),[F]=R(),[k]=B(),E=U();_.useEffect(()=>{var i;h&&s&&(u({dName:(s==null?void 0:s.dName)||"",dTitle:(s==null?void 0:s.dTitle)||"",sid:((i=s==null?void 0:s.dHead)==null?void 0:i._id)||"",gr_initials:(s==null?void 0:s.gr_initials)||""}),j(s==null?void 0:s.dHead))},[h,s]);const H=i=>{j(i),u({...a,sid:i._id}),g(!0)},M=()=>{var i;if(a.dName&&a.dTitle)if(e(!0),!h)F({departmentCreate:a,id:f}).then(d=>{d&&(x(!1),$(),e(!1),u({dName:"",dTitle:"",sid:"",gr_initials:""}),j(""))}).catch({});else{const d={dName:(s==null?void 0:s.dName)===a.dName?"":a.dName,dTitle:(s==null?void 0:s.dTitle)===a.dTitle?"":a.dTitle,sid:((i=s==null?void 0:s.dHead)==null?void 0:i._id)===a.sid?"":a.sid,gr_initials:(s==null?void 0:s.gr_initials)===a.gr_initials?"":a.gr_initials};k({department:d,did:s==null?void 0:s._id}).then(P=>{P&&(E(I.editOneDepartment({did:s==null?void 0:s._id,dName:a.dName,dTitle:a.dTitle,dHead:c})),S(),x(!1),e(!1),u({dName:"",dTitle:"",sid:"",gr_initials:""}),j(""))}).catch({})}else g(!1)},y=()=>{x(!1),A(!1),u({dName:"",dTitle:"",sid:"",gr_initials:""}),j("")};return l.jsxs(l.Fragment,{children:[l.jsx(z,{open:L,children:l.jsxs("div",{className:n.DModal,children:[l.jsxs("div",{className:n.title,children:[h?l.jsx("h5",{children:o("edit_department")}):l.jsx("h5",{children:o("add_new_dept")}),l.jsx("img",{src:"/images/close-post-icon.svg",onClick:y,alt:""})]}),l.jsx("div",{hidden:b,className:n.notFound,children:o("fill_all_the_details")}),l.jsxs("div",{className:n.input,children:[l.jsx("h6",{children:o("department_name")}),l.jsx("input",{type:"text",value:a.dName,onChange:i=>{var d;((d=i.target.value)==null?void 0:d.length)<=45&&(u({...a,dName:i.target.value}),g(!0))},required:!0,placeholder:o("dept_example")}),l.jsx(r,{maxLength:45,valueLength:a.dName})]}),l.jsxs("div",{className:n.mid,onClick:()=>v(!0),children:[l.jsx("img",{src:c!=null&&c.staffProfilePhoto?`${G}/${c.staffProfilePhoto}`:"/images/avatar-icon.png",alt:""}),l.jsxs("div",{className:n.text,children:[l.jsx("h6",{children:c?`${c==null?void 0:c.staffFirstName} ${c.staffMiddleName?c.staffMiddleName:""} ${c==null?void 0:c.staffLastName}`:`${o("assign_dhead")} ${o("optional")}`}),l.jsx("p",{children:o("search_from_joined_list")})]})]}),l.jsxs("div",{className:n.input,children:[l.jsx("h6",{children:o("give_dhead_title")}),l.jsx("input",{type:"text",value:a.dTitle,onChange:i=>{var d;((d=i.target.value)==null?void 0:d.length)<=40&&(u({...a,dTitle:i.target.value}),g(!0))},placeholder:o("dhead_example"),required:!0}),l.jsx(r,{maxLength:40,valueLength:a.dTitle})]}),l.jsxs("div",{className:n.input,children:[l.jsx("h6",{children:o("department_initials")}),l.jsx("input",{type:"text",value:a.gr_initials,onChange:i=>{var d;((d=i.target.value)==null?void 0:d.length)<=10&&(u({...a,gr_initials:i.target.value}),g(!0))},placeholder:o("department_initials_placeholder"),required:!0}),l.jsx(r,{maxLength:10,valueLength:a.gr_initials})]}),l.jsxs("button",{className:n.btn,onClick:M,disabled:T,children:[h?l.jsx("p",{children:o("update")}):l.jsx("p",{children:o("create")}),T&&l.jsx("div",{children:l.jsx(J,{})})]})]})}),N&&l.jsx(K,{assignHead:N,headSelect:H,title:o("assign-d-head"),onClose:()=>v(i=>!i)})]})}export{cs as default};
