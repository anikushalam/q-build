import{u as E,k as R,R as U,g as z,z as S,r as h,j as p,bS as c}from"./index-0ca76035.js";import{i as f}from"./constant_value-4cd2b3e0.js";import{l as k,m as L,n as Q,L as V}from"./post-api-b04eb54b.js";import{l as C}from"./search-api-b192a53f.js";const H="_profileToolTip_158gd_1",F="_profileToolTipPopup_158gd_13",M="_triangle_158gd_18",q="_trianglePopup_158gd_27",B="_triangleNotPopup_158gd_30",G="_triangleDisplay_158gd_33",J="_profilelist_158gd_37",o={profileToolTip:H,profileToolTipPopup:F,triangle:M,trianglePopup:q,triangleNotPopup:B,triangleDisplay:G,profilelist:J};function Z({options:T,authorId:u,setDotsClicked:i,pid:n,postType:y,status:g,commentStatus:m,allPosts:l,popup:d}){const{t:P}=E(),t=R(e=>e.idChange),[v,O]=U.useState(!0),a=z(),[x]=C(),[w]=k(),[A]=L(),[I]=Q(),[N]=V(),{oneInstituteProfileRefetch:j}=S({data:{id:t==null?void 0:t.id,type:"ID"},skip:v}),D=h.useRef(null),$=e=>{const s=[];for(let r=0;r<(l==null?void 0:l.length);r++)l[r].author!==e&&s.push(l[r]);return s},b=e=>{if(e==="post_unfollow"){const s=$(u);a(c.unfollowPost({posts:s})),i(!1),x({followId:u}).then(()=>{}).catch({})}else e==="post_visibility"?(a(c.changeVisibility({pid:n,status:g==="Anyone"?"Private":"Anyone"})),i(!1),w({pid:n,viewAs:f,postUpdate:{postStatus:g==="Anyone"?"Private":"Anyone"}}).then(()=>{}).catch({})):e==="post_delete"?(a(c.deletePost({pid:n})),i(!1),y==="Question"?I({id:t==null?void 0:t.id,viewAs:f,pid:n}).then(()=>{}).catch({}):A({id:t==null?void 0:t.id,viewAs:f,pid:n}).then(()=>{O(!1),j()}).catch({})):e==="turn_off_comment"&&(a(c.turnOffComment({pid:n,status:m==="On"?"Off":"On"})),i(!1),N({pid:n,commentFeature:{comment_turned:m==="On"?"Off":"On"}}).then(()=>{}).catch({}))},_=e=>{(!e.target.style.zIndex||e.target.style.zIndex!=="50")&&i(!1)};return h.useEffect(()=>(document.addEventListener("click",_,!0),()=>{document.removeEventListener("click",_,!0)}),[]),p.jsxs("div",{className:d?`${o.profileToolTip} ${o.profileToolTipPopup}`:o.profileToolTip,id:"menuTooltip",children:[p.jsx("div",{className:d?`${o.triangle} ${o.trianglePopup}`:`${o.triangle} ${o.triangleNotPopup}`}),p.jsx("div",{className:o.profilelist,children:T.map((e,s)=>p.jsx("div",{ref:D,style:{zIndex:"50"},value:e,onClick:()=>b(e),children:P(e)},s))})]})}export{Z as default};
