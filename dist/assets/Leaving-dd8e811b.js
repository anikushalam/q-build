import{R as D,_ as E,u as L,k,r,c as C,n as R,j as e,N as w}from"./index-731451a5.js";import{C as P}from"./CustomSuspense-e90dc607.js";import{d as B,e as T}from"./institute-staff-student-api-7f4890fe.js";import{L as q}from"./LoaderButton-71df50a7.js";import{s as o}from"./Certificates-c6605331.js";import"./pdf-convertor-function-e794de58.js";import"./main.certificate.pdf.worker-8bd77f87.js";import"./numberToWords.min-dbca819b.js";import"./CertificateModal-1da4fab7.js";import"./JoinFormFileEdit-e41481d6.js";import"./JoinForm.module-212f9bb3.js";import"./ViewFileDialog-0c131c06.js";import"./Overlay-07ce6f88.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalBackdrop-5b309d60.js";import"./SearchHeader.module-b69c8942.js";import"./PopupWrapper-ffbaef7a.js";import"./SearchModalWrapper-6e85c9f3.js";import"./StringLength-222a9fd1.js";import"./StringLength.module-75a6e080.js";import"./JoinFormInput-8e74a0e0.js";const A=D.lazy(()=>E(()=>import("./CertificateModal-1da4fab7.js"),["assets/CertificateModal-1da4fab7.js","assets/index-731451a5.js","assets/index-4d24e8f6.css","assets/institute-staff-student-api-7f4890fe.js","assets/JoinFormFileEdit-e41481d6.js","assets/JoinForm.module-212f9bb3.js","assets/JoinForm-e988a09c.css","assets/ViewFileDialog-0c131c06.js","assets/Overlay-07ce6f88.js","assets/Overlay.module-9133d1bb.js","assets/Overlay-6f7772cd.css","assets/SearchModalBackdrop-5b309d60.js","assets/SearchHeader.module-b69c8942.js","assets/SearchHeader-d07f850c.css","assets/PopupWrapper-ffbaef7a.js","assets/SearchModalWrapper-6e85c9f3.js","assets/StringLength-222a9fd1.js","assets/StringLength.module-75a6e080.js","assets/StringLength-7b1d3ded.css","assets/JoinFormInput-8e74a0e0.js","assets/CertificateModal-dc584326.css"])),re=({student:m,viewAs:d,instituteId:t,status:p})=>{const{t:i}=L(),n=k(s=>s.idChange.id),[u,g]=r.useState(!1),[f,h]=r.useState(!1),j=C(),b=R(),[a,_]=r.useState({number:"",reason:"",previous:m==null?void 0:m.studentPreviousSchool,study:"",behaviour:"",remarks:"",udise:""}),[v,x]=r.useState({msg:"",run:!1}),[S]=B(),{getEditable:c,getEditableRefetch:l}=T({id:t||n,skip:d==="DESIGNATION_SIDE"?!t:!n});r.useEffect(()=>{t&&l()},[n,t,l]);const N=()=>{h(s=>!s),S({id:t||n,gr:a.number,leavingFeedback:a}).then(s=>{h(y=>!y),j(`/q/${b.username}/student/certificate/form`,{state:{student:s.data.student,download:s.data.download,instituteId:t,is_leaving:p}})}).catch(()=>{x({msg:"something went wrong",run:!0})})};return e.jsxs("div",{className:o.complaintDetails,children:[e.jsxs("div",{className:o.detailsHeader,children:[p==="transfer"?e.jsx("p",{children:i("transfer_certificate")}):e.jsx("p",{children:i("leaving")}),e.jsx("img",{src:"/images/menu-dots-dark-icon.svg",alt:"",onClick:()=>g(!0)})]}),e.jsxs("div",{className:o.detailsBody,children:[e.jsx("div",{className:o.gr,children:e.jsx("input",{type:"tel",placeholder:i("enter_gr"),onChange:s=>_({...a,number:s.target.value}),required:!0})}),(a==null?void 0:a.number)!==""&&e.jsxs("button",{type:"submit",disabled:f,className:o.getBtn,onClick:N,children:[e.jsx("p",{children:i("cer_preview")}),f&&e.jsx(q,{})]})]}),u&&e.jsx(P,{children:e.jsx(A,{hideModal:s=>g(s),addDisplay:u,editableData:c==null?void 0:c.detail,viewAs:d,instituteId:t,onRefetch:l})}),e.jsx(w,{msg:v.msg,run:v.run,setRun:()=>x({msg:"",run:!1}),postiton:"bottom",type:"error"})]})};export{re as default};
