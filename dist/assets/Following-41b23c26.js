import{k as w,r as l,t as N,nY as I,nZ as S,j as s,e as h}from"./index-731451a5.js";const q="_container_5x3qj_1",v="_card_5x3qj_7",P="_cardImage_5x3qj_21",E="_username_5x3qj_27",T="_name_5x3qj_39",$="_unfollow_5x3qj_51",k="_unfollowText_5x3qj_61",a={container:q,card:v,cardImage:P,username:E,name:T,unfollow:$,unfollowText:k},R=()=>{const i=w(e=>e.idChange.id),[o,_]=l.useState([]),[j,d]=N(),[t,U]=l.useState(!0),[u,p]=l.useState(1),[g]=I(),{instituteFollowingArray:n,instituteFollowingArrayRefetch:r}=S({data:{id:i,page:u,limit:10},skip:!i});l.useEffect(()=>{i&&r()},[i,u,r]),l.useEffect(()=>{d&&t&&p(e=>e+1)},[d,t]),l.useEffect(()=>{var e;if((e=n==null?void 0:n.following)!=null&&e.length){const c=[...o,...n==null?void 0:n.following],m=[...new Set(c.map(JSON.stringify))].map(JSON.parse);_(m)}},[n==null?void 0:n.following]);const x=e=>{var c={followId:e&&e};g(c).then(m=>{m.data.message&&r()})};return s.jsx("div",{className:`${a.container}`,children:o==null?void 0:o.map((e,c)=>(o==null?void 0:o.length)===c+1?s.jsxs("div",{className:a.card,ref:j,children:[s.jsx("img",{className:a.cardImage,src:(e==null?void 0:e.photoId)!=="1"?`${h}/${(e==null?void 0:e.insProfilePhoto)||(e==null?void 0:e.profilePhoto)}`:"/images/avatar-icon.png",alt:""}),s.jsx("p",{className:a.username,children:e&&e.name}),s.jsx("p",{className:a.name,children:e&&e.insName}),s.jsx("div",{className:a.unfollow,children:s.jsx("p",{className:a.unfollowText,onClick:()=>x(e&&e._id),children:"Unfollow"})})]},c):s.jsxs("div",{className:a.card,children:[s.jsx("img",{className:a.cardImage,src:(e==null?void 0:e.photoId)!=="1"?`${h}/${(e==null?void 0:e.insProfilePhoto)||(e==null?void 0:e.profilePhoto)}`:"/images/avatar-icon.png",alt:""}),s.jsx("p",{className:a.username,children:e&&e.name}),s.jsx("p",{className:a.name,children:e&&e.insName}),s.jsx("div",{className:a.unfollow,children:s.jsx("p",{className:a.unfollowText,onClick:()=>x(e&&e._id),children:"Unfollow"})})]},c))})};export{R as default};
