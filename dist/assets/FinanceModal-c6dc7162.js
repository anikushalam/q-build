import{g as y,r as j,u as E,k as Q,oo as R,c as q,j as o,D as w,e as I,Q as T,aZ as U}from"./index-0ca76035.js";import{s as l}from"./FinanceModal.module-0f0ee470.js";import Z from"./AssignStaffModal-e51a4441.js";import{u as z}from"./institute-finance-api-a05fbed8.js";import{D as B}from"./Divider-2f807990.js";import"./search-api-b192a53f.js";import"./AssignStaffModal.module-a60b32e1.js";function m({financeModal:F,hideModal:c,edit:h,financeManagerName:t,onParentRefetch:P}){const L=y(),[v,x]=j.useState(!1),[p,u]=j.useState(!1),{t:i}=E(),[s,C]=j.useState(""),r=Q(d=>d.idChange),[b]=R(),[A]=z(),D=q(),k=()=>{u(!0),b({id:r.id,fActivate:{sid:s==null?void 0:s._id}}).then(d=>{var _;d.data.status&&(L(U.financeQuery({fid:d.data.finance})),u(!1),D(`/q/${(_=r.loginProfile)==null?void 0:_.username}/finance`))})},O=()=>{t!=null&&t._id&&(s!=null&&s._id)?(u(!0),A({osid:t==null?void 0:t._id,nsid:s==null?void 0:s._id}).then(()=>{P(),u(!1),c()})):c()},$=d=>{C(d)};return o.jsxs(o.Fragment,{children:[!p&&o.jsx(w,{open:F,onClose:()=>c(!1),children:o.jsxs("div",{className:l.financeModal,children:[o.jsxs("div",{className:l.financeModalhead,children:[o.jsx("h6",{children:i(h?"edit_finance_dept":"active_finance")}),o.jsx("img",{onClick:()=>c(!1),src:"/images/close-post-icon.svg",alt:""})]}),o.jsx(B,{}),o.jsxs("div",{className:l.financeModalbody,children:[!s&&!h&&o.jsx("img",{className:l.assignManager,onClick:()=>x(!0),src:"/images/finance/assign-manager.svg",alt:""}),(s||t)&&o.jsxs("div",{className:l.sidebarbottomitem,onClick:()=>x(!0),children:[o.jsx("img",{alt:"not found",src:s!=null&&s.staffProfilePhoto||t!=null&&t.staffProfilePhoto?`${I}/${s.staffProfilePhoto?s.staffProfilePhoto:t==null?void 0:t.staffProfilePhoto}`:"/images/finance/assign-manager.svg"}),o.jsxs("div",{children:[o.jsx("p",{className:l.namee,children:`${s!=null&&s.staffFirstName?s==null?void 0:s.staffFirstName:t==null?void 0:t.staffFirstName} 
                    ${s!=null&&s.staffMiddleName?s==null?void 0:s.staffMiddleName:s!=null&&s.staffFirstName?"":t!=null&&t.staffMiddleName?t==null?void 0:t.staffMiddleName:""}
                    ${s!=null&&s.staffLastName?s==null?void 0:s.staffLastName:t==null?void 0:t.staffLastName} `}),o.jsxs("p",{className:l.desig,children:["No."," ",s!=null&&s.staffROLLNO?s==null?void 0:s.staffROLLNO:t==null?void 0:t.staffROLLNO]})]})]})]}),o.jsxs("div",{className:l.financeModalfooter,children:[!h&&o.jsx("div",{className:l.activebtn,onClick:k,children:i("activate")}),h&&(s==null?void 0:s._id)&&o.jsx("div",{className:l.activebtn,onClick:O,children:i("update")})]})]})}),v&&o.jsx(Z,{assignHead:v,headSelect:$,title:i("secect_finance_head"),onClose:()=>x(d=>!d),disabledId:t==null?void 0:t._id}),p&&o.jsx(T,{})]})}export{m as default};
