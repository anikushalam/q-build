import{u as W,r as c,nf as z,ng as G,nh as J,nb as K,j as t,D as Q}from"./index-731451a5.js";/* empty css                   */import{L as X}from"./LoaderButton-71df50a7.js";import{S as Z}from"./StringLength-222a9fd1.js";import"./StringLength.module-75a6e080.js";const $="_DModal_dr6vq_1",tt="_title_dr6vq_9",et="_input_dr6vq_26",st="_mid_dr6vq_64",at="_text_dr6vq_77",ct="_btn_dr6vq_99",lt="_notFound_dr6vq_136",it="_item_dr6vq_139",nt="_select_dr6vq_154",rt="_tooltip_dr6vq_180",ot="_tooltip2_dr6vq_185",ht="_profileToolTip_dr6vq_193",dt="_triangle_dr6vq_206",_t="_triangleDisplay_dr6vq_216",ut="_profilelist_dr6vq_220",pt="_subject_tile_container_dr6vq_334",bt="_subject_tile_dr6vq_334",mt="_subject_tile_active_dr6vq_342",e={DModal:$,title:tt,input:et,mid:st,text:at,btn:ct,notFound:lt,item:it,select:nt,tooltip:rt,tooltip2:ot,profileToolTip:ht,triangle:dt,triangleDisplay:_t,profilelist:ut,subject_tile_container:pt,subject_tile:bt,subject_tile_active:mt};function jt({options:o,switchOption:n}){return t.jsxs("div",{className:e.profileToolTip,children:[t.jsx("div",{className:e.triangle}),t.jsx("div",{className:e.profilelist,children:o==null?void 0:o.map((h,_)=>t.jsx("div",{value:h,onClick:()=>n(h),children:h.batchName},_))})]})}function Bt({departmentModal:o,hideModal:n,id:h,did:_,data:u,edit:i,setEdit:f,editBatch:r,onDepartmentRefetch:b,is_promote:x}){const{t:a}=W(),[m,D]=c.useState(a("batch-type-2")),l=c.useRef(""),[N,g]=c.useState(""),[j,O]=c.useState({batch:!1,pastBatch:!1});a("batch-type-1"),a("batch-type-2");const[k,B]=c.useState(!0),[w,T]=c.useState("2020-21"),[P,F]=c.useState(""),[v,q]=c.useState("No"),[C,p]=c.useState(!1),[L,S]=c.useState(!0),[E,I]=c.useState(u);c.useEffect(()=>{u&&I(u)},[u]),c.useEffect(()=>{i&&g(r==null?void 0:r.batchName)},[i]);const A=s=>{T(s.batchName),F(s._id)},y=s=>{D(s),B(s!=="Completely New Batch")},[H]=z(),[Y]=G(),[M]=J(),[R]=K(),U=()=>{l.current.value?(p(!0),i?Y({batch:{batchName:l.current.value},bid:x||(r==null?void 0:r.bid)}).then(()=>{n(!1),p(!1),f(!1),l.current.value="",b()}).catch({}):m==="Completely New Batch"?H({batch:{batchName:l.current.value},id:h,did:_}).then(s=>{var d;(d=s==null?void 0:s.data)!=null&&d.batch&&(n(!1),p(!1),l.current.value="",b())}).catch({}):M({batch:{batchName:l.current.value,with_designation:v},bid:P}).then(s=>{s&&R({did:_,bid:s.data.batchId,batch:""}).then(()=>{b(),n(!1),p(!1),l.current.value=""}).catch({})}).catch({})):S(!1)},V=()=>{n(!1),l.current.value="",f(!1)};return t.jsx(Q,{open:o,children:t.jsxs("div",{className:e.DModal,children:[t.jsxs("div",{className:e.title,children:[i?t.jsxs("h5",{children:[" ",a("edit_batch")," "]}):t.jsx("h5",{children:a("create-n-batch-place")}),t.jsx("img",{src:"/images/close-post-icon.svg",onClick:V,alt:""})]}),t.jsx("div",{hidden:L,className:e.notFound,children:a(i?"fill_details_to_edit_batch":"fill_details_to_create_batch")}),!i&&t.jsxs("div",{className:e.item,children:[t.jsx("h6",{children:a("batch-type-place")}),t.jsxs("section",{className:e.subject_tile_container,children:[t.jsx("div",{className:m==="Preformed Structured Batch"?e.subject_tile_active:e.subject_tile,onClick:()=>y("Preformed Structured Batch"),children:a("batch-type-2")}),t.jsx("div",{className:m==="Completely New Batch"?e.subject_tile_active:e.subject_tile,onClick:()=>y("Completely New Batch"),children:a("batch-type-1")})]})]}),k&&!i&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:e.item,onClick:()=>O({...j,pastBatch:!j.pastBatch}),children:[t.jsx("h6",{children:a("select-past-batch-place")}),t.jsxs("div",{className:e.select,children:[t.jsx("p",{children:w}),t.jsx("img",{src:"/images/select-icon.svg",alt:"select icon"})]}),j.pastBatch&&t.jsx("div",{className:e.tooltip2,children:t.jsx(jt,{options:E,switchOption:A})})]}),t.jsxs("div",{className:e.item,children:[t.jsx("h6",{children:a("without_designation")}),t.jsxs("section",{className:e.subject_tile_container,children:[t.jsx("div",{className:v==="Yes"?e.subject_tile_active:e.subject_tile,onClick:()=>q("Yes"),children:"Yes"}),t.jsx("div",{className:v==="No"?e.subject_tile_active:e.subject_tile,onClick:()=>q("No"),children:"No"})]})]})]}),t.jsxs("div",{className:e.input,children:[t.jsx("h6",{children:a("batch-name-place")}),t.jsx("input",{type:"text",placeholder:"e.g. 2022-23",required:!0,ref:l,maxLength:30,onChange:s=>{var d;((d=s.target.value)==null?void 0:d.length)<=30&&(g(s.target.value),S(!0))},defaultValue:N}),t.jsx(Z,{maxLength:30,valueLength:N})]}),t.jsxs("button",{className:e.btn,onClick:U,disabled:C,children:[i?t.jsx("p",{children:"Update"}):t.jsx("p",{children:a("create")}),C&&t.jsx("div",{children:t.jsx(X,{})})]})]})})}export{Bt as default};
