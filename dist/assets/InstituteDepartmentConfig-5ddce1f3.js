import{u as p,g,j as e,L as x,A as _,k as C,R as h,_ as S,n as L,$ as T,S as R,a0 as j,s as A}from"./index-0ca76035.js";import{s as m,S as H}from"./StaffTabSidebar-1371e5fe.js";import{s as l}from"./Departments.module-820df3a1.js";import{C as B}from"./CustomSuspense-25f8db15.js";import"./institute-staff-student-api-7114d611.js";const D=({depart:s})=>{var a,n,i,u;const{t}=p(),d=g(),c=f=>{d(_.addDepartmentId({did:f}))};return e.jsx(x,{to:`/q/${s==null?void 0:s.dName}/viewdept`,onClick:()=>{c(s._id)},children:e.jsxs("div",{className:l.department_card_container,children:[e.jsx("img",{src:"/images/profileAndCover/department-profile-img.svg",alt:"department avatar",className:l.department_card_image}),e.jsxs("div",{children:[e.jsx("h6",{className:l.department_card_name,children:(s==null?void 0:s.dName)||"Mechanical Engineering"}),e.jsxs("p",{className:l.department_card_head,children:[(a=s==null?void 0:s.dHead)==null?void 0:a.staffFirstName,(n=s==null?void 0:s.dHead)!=null&&n.staffMiddleName?` ${(i=s==null?void 0:s.dHead)==null?void 0:i.staffMiddleName} `:" ",(u=s==null?void 0:s.dHead)==null?void 0:u.staffLastName]}),e.jsx("p",{className:l.department_card_title,children:(s==null?void 0:s.dTitle)||t("hod")})]})]})})},w=()=>{const s=g(),t=C(a=>a.idChange.universalBack);return{onBack:()=>{const a=t.ChildList;a==null||a.pop();const n=a,i=t.childHeight-1;s(_.workUniversalBack({childList:n,childHeight:i}))},onAddBack:a=>{const n=t.ChildList??[];let i=t.childHeight;i===0?i=0:i+=1,n==null||n.push(a),s(_.workUniversalBack({childList:n,childHeight:i}))}}},y=h.lazy(()=>S(()=>import("./CreateDepartment-b7ec2f45.js"),["assets/CreateDepartment-b7ec2f45.js","assets/index-0ca76035.js","assets/index-4d24e8f6.css","assets/LoaderButton-56f541f9.js","assets/LoaderButton-43b48c5c.css","assets/AssignStaffModal-e51a4441.js","assets/search-api-b192a53f.js","assets/AssignStaffModal.module-a60b32e1.js","assets/AssignStaffModal-60e26c07.css","assets/StringLength-ef31e6b8.js","assets/StringLength.module-75a6e080.js","assets/StringLength-7b1d3ded.css","assets/CreateDepartment-6993e3e8.css","assets/AddDisplay-fea182d7.css"]));function E(){var v,N;const{t:s}=p(),t=C(r=>r.idChange),d=g(),c=L(),{onAddBack:a}=w(),[n,i]=h.useState(!0),[u,f]=h.useState(!1),{allDepartment:o,allDepartmentRefetch:b}=T({id:t==null?void 0:t.id,skip:!(t!=null&&t.id)});return h.useEffect(()=>{var r,k;(r=o==null?void 0:o.institute)!=null&&r.depart&&(d(_.addDepartment({departments:(k=o==null?void 0:o.institute)==null?void 0:k.depart})),i(!1))},[(v=o==null?void 0:o.institute)==null?void 0:v.depart]),h.useEffect(()=>{t!=null&&t.id&&b()},[t==null?void 0:t.id,b]),h.useEffect(()=>{a({linkType:!0,linkUrl:`/q/${c.username}/feed`})},[c.username]),e.jsxs("div",{className:l.department_conatiner,children:[e.jsx("p",{className:l.department_add_new,onClick:()=>f(r=>!r),children:s("add_new_dept")}),e.jsx("hr",{className:l.department_hr}),(N=t==null?void 0:t.departments)==null?void 0:N.map(r=>e.jsx(D,{depart:r},r._id)),n&&e.jsx(R,{}),e.jsx(B,{children:u&&e.jsx(y,{departmentModal:u,hideModal:f,edit:"",setEdit:()=>{},editDepartment:""})})]})}const $=({activeIndex:s})=>{const{t}=p(),d=L(),c=()=>{};return e.jsxs("div",{className:m.staff_tab_tabs,children:[e.jsx(x,{to:`/q/${d.username}/department`,children:e.jsx(j,{tabLevel:t("departments"),onTabAction:c,customStyleContainer:{marginRight:"2px",borderTopLeftRadius:"6px"},customStyleLevel:{borderTopLeftRadius:"6px"},tabValue:0,currentValue:s})}),e.jsx(x,{to:`/q/${d.username}/staff`,children:e.jsx(j,{tabLevel:t("staffs"),onTabAction:c,customStyleContainer:{marginRight:"2px"},tabValue:1,currentValue:s})}),e.jsx(x,{to:`/q/${d.username}/student`,children:e.jsx(j,{tabLevel:t("students"),customStyleContainer:{borderTopRightRadius:"6px",width:"280px"},customStyleLevel:{borderTopRightRadius:"6px"},onTabAction:c,tabValue:2,currentValue:s})})]})},U=()=>e.jsxs("div",{className:m.insprofilesetting,children:[e.jsx("div",{className:m.navbar,children:e.jsx(A,{status:"home"})}),e.jsxs("div",{className:m.staff_tab_container,children:[e.jsx("div",{children:e.jsx("div",{className:m.staff_tab_sidebar,children:e.jsx(H,{activeIndex:0})})}),e.jsxs("div",{className:m.staff_tab_main,children:[e.jsx($,{activeIndex:0}),e.jsx("div",{className:m.staff_tab_department_wrapper,children:e.jsx(E,{})})]})]})]});export{U as default};
