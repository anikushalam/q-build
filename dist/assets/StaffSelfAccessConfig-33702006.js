import{r as h,j as e,u as C,R as F,lJ as Z,e as A,D as J,C as ee,Q as z,lK as se,a1 as te,lL as ne,lM as ae,lN as W,lO as ie,lP as ce,c as oe,t as V,lQ as K,S as G,b as le,d as re,lw as de}from"./index-731451a5.js";import{u as me}from"./attendance-api-b2a2423b.js";import he from"./Payroll-4c5d36c1.js";import{S as ue}from"./StaffProfileAbout-ce127bc9.js";import{C as U}from"./CreateStaffLeave-3833b760.js";import{S as _e}from"./SwitchAccount-cec46c4f.js";import{s as k}from"./Hostel.module-50da11fe.js";import{U as pe}from"./UniversalTab-d4f2174c.js";import{B}from"./BorderBottom-47800983.js";import{S as E,a as xe}from"./StaffLeaveOverview-b8cdbc4d.js";import{t as je}from"./institute-staff-student-api-7f4890fe.js";import"./StaffProfileEachInfo-21badda6.js";import"./ViewFileDialog-0c131c06.js";import"./Overlay-07ce6f88.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalBackdrop-5b309d60.js";import"./SearchHeader.module-b69c8942.js";import"./PopupWrapper-ffbaef7a.js";import"./SearchModalWrapper-6e85c9f3.js";import"./FeesStructure.module-7a88fbbc.js";import"./JoinFormTextArea-7f6dded0.js";import"./JoinForm.module-212f9bb3.js";import"./TileWrapper-be9153cb.js";import"./Tile.module-64552da2.js";import"./JoinFormFile-110be590.js";import"./department-api-a4f0b4b7.js";import"./EditConfirm.module-344fbdb9.js";const ge="_studentForm_cfsb0_1",fe="_formContainer_cfsb0_12",ve="_viewRow_cfsb0_20",be="_detailImg_cfsb0_27",ye="_imgcontainer_cfsb0_59",Ne="_toprow_cfsb0_66",Se="_textcontainer_cfsb0_74",Ce="_tabs_cfsb0_95",we="_tophead_cfsb0_100",$e="_profile_head_cfsb0_112",Me="_profile_head_staff_header_text_cfsb0_118",T={studentForm:ge,formContainer:fe,viewRow:ve,detailImg:be,imgcontainer:ye,toprow:Ne,textcontainer:Se,tabs:Ce,tophead:we,profile_head:$e,profile_head_staff_header_text:Me},Le="_studentMCQ_18env_1",Re="_mcqTop_18env_5",Te="_mcqTopItem_18env_11",Fe="_active_18env_25",$={studentMCQ:Le,mcqTop:Re,mcqTopItem:Te,active:Fe};function D({children:s,onclick:a}){const[c,d]=h.useState(!1),[r,i]=h.useState({x:-1,y:-1});h.useEffect(()=>{r.x!==-1&&r.y!==-1?(d(!0),setTimeout(()=>d(!1),1e3)):d(!1)},[r]),h.useEffect(()=>{c||i({x:-1,y:-1})},[c]);const t=_=>{i({x:_.clientX-_.target.offsetLeft,y:_.clientY-_.target.offsetTop}),a&&a(_)};return e.jsxs("div",{className:"ripple_btn",onClick:t,children:[c?e.jsx("span",{className:"ripple"}):"",e.jsx("span",{className:"content",children:s})]})}function ke({activeIndex:s,setActiveIndex:a}){const{t:c}=C();return e.jsxs("div",{className:$.mcqTop,children:[e.jsx("div",{className:s===0?`${$.mcqTopItem} ${$.active}`:$.mcqTopItem,onClick:()=>a(0),children:e.jsx(D,{children:c("about")})}),e.jsx("div",{className:s===1?`${$.mcqTopItem} ${$.active} `:`${$.mcqTopItem} ${$.ripple}`,onClick:()=>a(1),children:e.jsx(D,{children:c("attendance")})}),e.jsx("div",{className:s===2?`${$.mcqTopItem} ${$.active}`:$.mcqTopItem,onClick:()=>a(2),children:e.jsx(D,{children:c("payroll")})})]})}const qe="_staffAttendence_1b9yp_1",Oe="_calendar_1b9yp_7",Pe="_arrColors_1b9yp_17",Ee="_colours_1b9yp_25",De="_clr_1b9yp_52",Ye="_present_1b9yp_68",Ie="_absent_1b9yp_73",ze="_holiday_1b9yp_78",Ue="_leave_1b9yp_84",Qe="_percentage_1b9yp_90",Be="_presentcount_1b9yp_94",He="_absentcount_1b9yp_103",S={staffAttendence:qe,calendar:Oe,arrColors:Pe,colours:Ee,clr:De,present:Ye,absent:Ie,holiday:ze,leave:Ue,percentage:Qe,presentcount:Be,absentcount:He};const Je=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],We=["January","February","March","April","May","June","July","August","September","October","November","December"],Ve=(s=Je,a=We)=>{const c=new Date,d=`${c.getDate()}-${c.getMonth()+1}-${c.getFullYear()}`,r=[1,2,3,4,5,6,0],[i,t]=h.useState(c),_=new Date(i.getFullYear(),i.getMonth()+1,0),m=new Date(i.getFullYear(),i.getMonth(),0),g=_.getDate(),b=new Date(i.getFullYear(),i.getMonth(),1).getDay(),l=r.indexOf(b)+1;let u=m.getDate()-r.indexOf(b)+1,n=1,o=1;const v=6,p=7,x={};for(let f=1;f<v+1;f++)for(let L=1;L<p+1;L++)x[f]||(x[f]=[]),f===1?L<l?(x[f]=[...x[f],{classes:"in-prev-month",date:`${u}-${i.getMonth()===0?12:i.getMonth()}-${i.getMonth()===0?i.getFullYear()-1:i.getFullYear()}`,value:u}],u++):(x[f]=[...x[f],{classes:"",date:`${n}-${i.getMonth()+1}-${i.getFullYear()}`,value:n}],n++):f>1&&n<g+1?(x[f]=[...x[f],{classes:"",date:`${n}-${i.getMonth()+1}-${i.getFullYear()}`,value:n}],n++):(x[f]=[...x[f],{classes:"in-next-month",date:`${o}-${i.getMonth()+2===13?1:i.getMonth()+2}-${i.getMonth()+2===13?i.getFullYear()+1:i.getFullYear()}`,value:o}],o++);return{daysShort:s,monthNames:a,todayFormatted:d,calendarRows:x,selectedDate:i,getPrevMonth:()=>{t(f=>new Date(f.getFullYear(),f.getMonth()-1,1))},getNextMonth:()=>{t(f=>new Date(f.getFullYear(),f.getMonth()+1,1))}}},Ke=({presentArr:s,absentArr:a,holidayArr:c,leavesArr:d})=>{const{calendarRows:r,selectedDate:i,todayFormatted:t,daysShort:_,monthNames:m,getNextMonth:g,getPrevMonth:b}=Ve(),l=u=>{const n=u.split("-"),o=n[0]>9?n[0]:`0${n[0]}`,v=n[1]>9?n[1]:`0${n[1]}`,p=n[2];return`${o}/${v}/${p}`};return e.jsxs(h.Fragment,{children:[e.jsxs("div",{className:"calenderheader",children:[e.jsx("div",{className:"monthbtn",onClick:b,children:e.jsx("img",{alt:"not found",src:"/images/members/arrow-left.svg"})}),e.jsxs("div",{className:"yearmonth",children:[e.jsx("h6",{children:`${m[i.getMonth()]}`}),e.jsx("p",{children:`${i.getFullYear()}`})]}),e.jsx("div",{className:"monthbtn",onClick:g,children:e.jsx("img",{alt:"not found",src:"/images/members/arrow-right.svg"})})]}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsx("tr",{children:_.map(u=>e.jsx("th",{className:"day",children:u},u))})}),e.jsx("tbody",{children:Object.values(r).map(u=>e.jsx("tr",{children:u.map(n=>n.date===t?d!=null&&d.includes(l(n.date))?e.jsx("td",{className:`${n.classes} date `,children:e.jsx("div",{className:"datediv aaji leave",children:n.value})},n.date):s!=null&&s.includes(l(n.date))?e.jsx("td",{className:`${n.classes} date `,children:e.jsx("div",{className:"datediv aaji",children:n.value})},n.date):a!=null&&a.includes(l(n.date))?e.jsx("td",{className:`${n.classes} date `,children:e.jsx("div",{className:"datediv aaji absent",children:n.value})},n.date):c!=null&&c.includes(l(n.date))?e.jsx("td",{className:`${n.classes} date `,children:e.jsx("div",{className:"datediv aaji holiday",children:n.value})},n.date):e.jsx("td",{className:`${n.classes} date `,children:e.jsx("div",{className:"datediv aaji",children:n.value})},n.date):s!=null&&s.includes(l(n.date))?e.jsx("td",{className:`${n.classes} date`,children:e.jsx("div",{className:"datediv present",children:n.value})},n.date):a!=null&&a.includes(l(n.date))?e.jsx("td",{className:`${n.classes} date`,children:e.jsx("div",{className:"datediv absent",children:n.value})},n.date):c!=null&&c.includes(l(n.date))?e.jsx("td",{className:`${n.classes} date`,children:e.jsx("div",{className:"datediv holiday",children:n.value})},n.date):d!=null&&d.includes(l(n.date))?e.jsx("td",{className:`${n.classes} date`,children:e.jsx("div",{className:"datediv leave",children:n.value})},n.date):e.jsx("td",{className:`${n.classes} date`,children:e.jsx("div",{className:"datediv",children:n.value})},n.date))},u[0].date))})]})]})};function Ge({sid:s}){var x,j;const c=new Date().toISOString().split("-"),d=+c[1]>9?+c[1]:`0${+c[1]}`,[r,i]=F.useState("Month"),{staffCalenderAttendance:t,staffCalenderAttendanceRefetch:_}=me({sid:s,month:r==="Month"?d:"",year:+c[0]}),{t:m}=C(),[g,b]=F.useState([]),[l,u]=F.useState([]),[n,o]=F.useState([]),v=[];F.useEffect(()=>{if(t&&(b([...t==null?void 0:t.presentArray]),u([...t==null?void 0:t.absentArray]),t!=null&&t.leaves)){const y=[];for(let f of t==null?void 0:t.leaves)y.push(...f.date);o(y)}},[t]),F.useEffect(()=>{_()},[r]);const p=y=>{i(y)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:S.staffAttendence,children:[e.jsxs("div",{className:S.calendar,children:[e.jsx(Ke,{presentArr:g,absentArr:l,holidayArr:v,leavesArr:n}),e.jsxs("div",{className:S.arrColors,children:[e.jsx("div",{className:`${S.clr} ${S.absent}`,children:m("absent")}),e.jsx("div",{className:`${S.clr} ${S.holiday}`,children:m("holiday_")}),e.jsx("div",{className:`${S.clr} ${S.leave}`,children:"Leave"})]})]}),e.jsxs("div",{className:S.colours,children:[e.jsxs("div",{class:"form-check",onClick:()=>p("Month"),children:[r==="Month"?e.jsx("img",{src:"/images/radio-active.svg "}):e.jsx("img",{src:"/images/radio-disabled.svg"}),e.jsx("p",{children:m("monthly")})]}),e.jsxs("div",{class:"form-check",onClick:()=>p("Year"),children:[r==="Year"?e.jsx("img",{src:"/images/radio-active.svg "}):e.jsx("img",{src:"/images/radio-disabled.svg"}),e.jsx("p",{children:m("yearly")})]})]})]}),e.jsxs("div",{className:S.percentage,children:[e.jsxs("div",{className:S.presentcount,children:[e.jsx("p",{children:m("present_count")}),e.jsxs("p",{children:[(x=t==null?void 0:t.presentArray)==null?void 0:x.length,m("days")]}),e.jsxs("p",{children:[t==null?void 0:t.present,"%"]})]}),e.jsxs("div",{className:S.absentcount,children:[e.jsx("p",{children:m("absent_count")}),e.jsxs("p",{children:[(j=t==null?void 0:t.absentArray)==null?void 0:j.length,m("days")]}),e.jsxs("p",{children:[t==null?void 0:t.absent,"%"]})]})]})]})}const Xe="_photoMain_2pqhl_1",Ze="_photoLabel_2pqhl_6",Y={photoMain:Xe,photoLabel:Ze},Ae=({sid:s,photoId:a,photoKey:c})=>{const[d]=Z(),[r,i]=h.useState(""),[t,_]=h.useState(""),[m,g]=h.useState(!1),[b,l]=h.useState(!1),[u,n]=h.useState(!1),[o,v]=h.useState("");h.useEffect(()=>{if(b){n(j=>!j);let x=new FormData;x.append("file",t),d({profile:x,sid:s}).then(()=>{n(j=>!j)}).catch({})}},[b,t]);const p=x=>{const j=URL.createObjectURL(x.target.files[0]);_(x.target.files[0]),v(j),i(j),g(!0)};return e.jsxs("div",{className:Y.photoMain,children:[o?e.jsx("img",{src:o,alt:"profile is not uploaded",style:{width:"100%",height:"100%"}}):e.jsx("img",{src:a!=="1"?`${A}/${c}`:"/images/member_tab/class/default_avatar.svg",alt:"",style:{width:"100%",height:"100%"}}),e.jsx("label",{htmlFor:"photo",className:Y.photoLabel,children:e.jsx("img",{alt:"not found",className:Y.photoLabel,src:"/images/edit1-icon.svg"})}),e.jsx("input",{id:"photo",name:"file",onChange:p,type:"file",style:{display:"none"},accept:"image/gif, image/jpeg, image/png",required:!0}),m&&e.jsx(J,{open:m,children:e.jsx(ee,{setPhotoURL:i,photoURL:r,setFile:_,setOpenCrop:g,setUpload:l,setProfilePhoto:v,first:1,second:1})}),u&&e.jsx(z,{})]})};function es({staffData:s}){var g,b,l,u,n,o,v,p,x,j,y,f,L;const{t:a}=C(),[c,d]=h.useState(0),[r,i]=h.useState(!1),{data:t,refetch:_}=se(s,{skip:!s});h.useEffect(()=>{s&&_()},[s,_]);const m=()=>{i(O=>!O)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:T.studentForm,children:[e.jsx("div",{className:T.profile_head,children:e.jsx("div",{className:T.tophead,children:"Profile In Institute"})}),e.jsxs("div",{className:T.toprow,children:[e.jsx("div",{className:T.imgcontainer,children:e.jsx(Ae,{photoKey:(g=t==null?void 0:t.staff)==null?void 0:g.staffProfilePhoto,photoId:(b=t==null?void 0:t.staff)==null?void 0:b.photoId,sid:(l=t==null?void 0:t.staff)==null?void 0:l._id})}),e.jsxs("div",{className:T.textcontainer,children:[e.jsxs("h6",{children:[(u=t==null?void 0:t.staff)==null?void 0:u.staffFirstName," ",(n=t==null?void 0:t.staff)!=null&&n.staffMiddleName?(o=t==null?void 0:t.staff)==null?void 0:o.staffMiddleName:""," ",(v=t==null?void 0:t.staff)==null?void 0:v.staffLastName]}),e.jsxs("p",{children:[" ",a("index_no"),". ",(p=t==null?void 0:t.staff)==null?void 0:p.staffROLLNO]}),e.jsxs("p",{children:[" ",a("designations"),": ",(x=t==null?void 0:t.staff)==null?void 0:x.staffDesignationCount]}),e.jsxs("p",{children:[" ",a("form_current_designation_label"),":"," ",((j=t==null?void 0:t.staff)==null?void 0:j.current_designation)??""]})]})]}),e.jsx("div",{className:T.tabs,children:e.jsx(ke,{activeIndex:c,setActiveIndex:d})}),c===0&&e.jsx(ue,{staff:t==null?void 0:t.staff,viewAs:"STAFF_OWN"}),c===1&&e.jsx(Ge,{sid:(y=t==null?void 0:t.staff)==null?void 0:y._id}),c===2&&e.jsx(he,{sid:(f=t==null?void 0:t.staff)==null?void 0:f._id})]}),r&&e.jsx(U,{createdBy:"OWN_PROFILE",staffId:(L=t==null?void 0:t.staff)==null?void 0:L._id,onRefetch:_,onClose:m})]})}const ss="_complaints_1x8cp_1",ts="_complaintDetail_1x8cp_8",ns="_complaintList_1x8cp_12",I={complaints:ss,complaintDetail:ts,complaintList:ns},as="_complaintList_lxlz8_1",is="_listcontainer_lxlz8_12",cs="_heading_lxlz8_26",os="_listHead_lxlz8_41",ls="_tabs_lxlz8_45",rs="_item_lxlz8_50",ds="_text_lxlz8_65",ms="_to_lxlz8_68",hs="_datetime_lxlz8_81",us="_solved_lxlz8_101",_s="_unsolved_lxlz8_105",ps="_dots_lxlz8_109",xs="_button_lxlz8_116",js="_menu_lxlz8_133",gs="_menuItem_lxlz8_145",w={complaintList:as,listcontainer:is,heading:cs,listHead:os,tabs:ls,item:rs,text:ds,to:ms,datetime:hs,solved:us,unsolved:_s,dots:ps,button:xs,menu:js,menuItem:gs};function fs({open:s,onClose:a,cid:c,refetch:d}){const{t:r}=C(),[i]=ne();if(!s)return null;const t={position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10},_={position:"absolute",zIndex:10},m=()=>{i(c).then(g=>{d(),a()}).catch({})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:a,style:t}),e.jsx("div",{className:w.menu,style:_,children:e.jsx("div",{className:w.menuItem,onClick:m,children:r("remove_complaint")})})]})}function vs({setShowDetails:s,complaint:a,setCDetails:c,refetch:d}){const[r,i]=h.useState(!1),{t}=C();return e.jsxs("div",{className:w.item,onClick:()=>{s(!0),c(a)},children:[e.jsx("img",{src:"/images/members/staff-complain-icon.svg",alt:""}),e.jsxs("div",{className:w.text,children:[e.jsxs("h6",{children:[a==null?void 0:a.complaintType," Complaint"]}),e.jsxs("div",{className:w.datetime,children:[e.jsxs("p",{children:[" ",t("date"),": ",te(a==null?void 0:a.createdAt).format("LL")]}),(a==null?void 0:a.complaintStatus)==="Unsolved"?e.jsx("p",{className:w.unsolved,children:a==null?void 0:a.complaintStatus}):e.jsx("p",{className:w.solved,children:a==null?void 0:a.complaintStatus})]})]}),e.jsx("img",{className:w.dots,src:"/images/menu-dots-icon.svg",alt:"",onClick:()=>i(!0)}),r&&e.jsx(fs,{open:r,onClose:()=>i(!1),cid:a==null?void 0:a._id,refetch:d})]})}function bs({setShowDetails:s,complaints:a,setCDetails:c,refetch:d}){const{t:r}=C();return e.jsxs("div",{className:w.complaintList,children:[e.jsx("h6",{className:w.heading,children:r("complaint_list")}),e.jsx("div",{className:w.listcontainer,children:a==null?void 0:a.map((i,t)=>e.jsx(vs,{complaint:i,setShowDetails:s,setCDetails:c,refetch:d},t))}),e.jsx("div",{className:w.button,onClick:()=>s(!1),children:r("make_new_complaint")})]})}const ys="_complaintDetails_eoqae_1",Ns="_detailsheader_eoqae_7",Ss="_detailsbody_eoqae_17",Cs="_footer_eoqae_42",ws="_red_eoqae_47",$s="_blue_eoqae_58",q={complaintDetails:ys,detailsheader:Ns,detailsbody:Ss,footer:Cs,red:ws,blue:$s};function Ms({cDetail:s}){const{t:a}=C();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:q.complaintDetails,children:[e.jsx("div",{className:q.detailsheader,children:a("complaint")}),e.jsx("hr",{}),e.jsxs("div",{className:q.detailsbody,children:[e.jsxs("h6",{children:[s==null?void 0:s.complaintType,a("complaint")]}),e.jsx("p",{children:s==null?void 0:s.complaintContent}),e.jsx("div",{className:q.footer,children:e.jsx("h6",{className:q.red,children:s==null?void 0:s.complaintStatus})})]})]})})}const Ls="_newComplain_h0dsd_1",Rs="_newComplainheader_h0dsd_5",Ts="_input_h0dsd_16",Fs="_down_h0dsd_37",ks="_options_h0dsd_43",qs="_option_h0dsd_43",Os="_postTextarea_h0dsd_68",Ps="_submitbtn_h0dsd_100",Es="_disablebtn_h0dsd_119",M={newComplain:Ls,newComplainheader:Rs,input:Ts,down:Fs,options:ks,option:qs,postTextarea:Os,submitbtn:Ps,disablebtn:Es},Ds={position:"relative",zIndex:1},Ys={position:"absolute",left:"14.5vw",top:"9.5vw",zIndex:10},Is={position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10};function zs({setComplaintData:s,open:a,onClose:c,complaintData:d,setIsOpen:r}){const{t:i}=C();return a?e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:c,style:Is}),e.jsxs("div",{style:Ys,className:M.options,children:[e.jsx("div",{className:M.option,onClick:()=>{s({...d,type:"Open"}),r(!1)},children:i("open_complaint")}),e.jsx("div",{className:M.option,onClick:()=>{s({...d,type:"Anonymous"}),r(!1)},children:i("anonymous_complaint")})]})]}):null}function Us({staffId:s,toast:a,setToast:c}){const[d,r]=h.useState(!1),[i,t]=h.useState(!1),[_]=ae(),{t:m}=C(),[g,b]=h.useState(""),[l,u]=h.useState({type:"",content:""}),n=document.querySelector("textarea");n==null||n.addEventListener("keyup",v=>{n.style.height="auto";let p=v.target.scrollHeight;n.style.height=`${p}px`});const o=()=>{t(p=>!p);const v=new FormData;v.append("complaintType",l.type),v.append("complaintContent",l.content),_({sid:s&&s,complaintData:{complaintType:l.type,complaintContent:l.content}}).then(p=>{p.data.message&&(b("Successfully Submitted"),c(!0),u({...l,content:"",type:""}),t(x=>!x))})};return e.jsxs("div",{className:M.newComplain,children:[e.jsx(W,{msg:g,run:a,setRun:c}),e.jsx("h6",{className:M.newComplainheader,children:m("make_complaint")}),e.jsx("div",{className:M.input,style:Ds,children:e.jsxs("div",{children:[(l==null?void 0:l.type)==="Open"?e.jsx("h6",{onClick:()=>r(!0),children:m("open_complaint")}):(l==null?void 0:l.type)==="Anonymous"?e.jsx("h6",{onClick:()=>r(!0),children:m("anonymous_complaint")}):e.jsx("h6",{onClick:()=>r(!0),children:m("comp_type")}),e.jsx("img",{className:M.down,src:"/images/downn-icon.svg",alt:""})]})}),e.jsx(zs,{open:d,onClose:()=>r(!1),setComplaintData:u,complaintData:l,setIsOpen:r}),e.jsx("textarea",{className:M.postTextarea,type:"text",required:!0,name:"CreateInsPost",placeholder:m("comp_des"),value:l.content,onChange:v=>u({...l,content:v.target.value})}),l.type&&l.content?e.jsx("div",{className:M.submitbtn,onClick:o,children:m("send_complaint")}):e.jsx("div",{className:`${M.submitbtn} ${M.disablebtn}`,children:m("send_complaint")}),i&&e.jsx(z,{})]})}function Qs({staffId:s}){const[a,c]=h.useState(!1),[d,r]=h.useState(),[i,t]=h.useState(!1),{data:_,refetch:m}=ie(s,{skip:!s});return h.useEffect(()=>{m()},[i]),e.jsxs("div",{className:I.complaints,children:[e.jsxs("div",{className:I.complaintDetail,children:[a&&e.jsx(Ms,{cDetail:d}),!a&&e.jsx(Us,{staffId:s,toast:i,setToast:t})]}),e.jsx("div",{className:I.complaintList,children:e.jsx(bs,{setShowDetails:c,complaints:_==null?void 0:_.complaints,setCDetails:r,refetch:m})})]})}const Bs="_complaints_1x8cp_1",Hs="_complaintDetail_1x8cp_8",Js="_complaintList_1x8cp_12",H={complaints:Bs,complaintDetail:Hs,complaintList:Js},Ws="_addDisplay_i1yf1_1",Vs="_title_i1yf1_8",Ks="_content_i1yf1_28",Gs="_item_i1yf1_32",Xs="_btn_i1yf1_55",Zs="_active_i1yf1_84",R={addDisplay:Ws,title:Vs,content:Ks,item:Gs,btn:Xs,active:Zs};function As({addDisplay:s,selectedReason:a,setSelectedReason:c,staffId:d,setToast:r,setvMessage:i,onCloseModal:t}){const[_]=ce(),m=document.querySelector("textarea"),{t:g}=C(),[b,l]=h.useState(!1);m==null||m.addEventListener("keyup",n=>{m.style.height="auto";let o=n.target.scrollHeight;m.style.height=`${o}px`});const u=()=>{l(n=>!n),_({sid:d&&d,transferData:{transferReason:a}}).then(n=>{n.data&&(i("Successfully Submitted Request"),r(!0),l(o=>!o),t())}).catch(()=>{l(n=>!n)})};return e.jsxs(J,{open:s,onClose:()=>t(),children:[e.jsxs("div",{className:R.addDisplay,children:[e.jsx("div",{className:R.title,children:e.jsx("h6",{children:g("add_leave_reason")})}),e.jsxs("div",{className:R.content,children:[e.jsx("div",{className:R.item,children:e.jsx("textarea",{className:R.postTextarea,type:"text",required:!0,name:"CreateInsPost",placeholder:g("enter_reason"),value:a,onChange:n=>c(n.target.value)})}),a?e.jsx("div",{className:`${R.btn} ${R.active}`,onClick:u,children:g("send_request")}):e.jsx("div",{className:R.btn,children:g("send_request")})]})]}),b&&e.jsx(z,{})]})}function et({staffId:s}){const a=oe(),[c,d]=h.useState(!0),[r,i]=h.useState(!1),[t,_]=h.useState(""),[m,g]=h.useState(""),b=()=>{d(!1),a(-1)};return e.jsxs("div",{className:H.complaints,children:[e.jsx(W,{msg:t,run:r,setRun:i}),e.jsx("div",{className:H.complaintDetail,children:c&&e.jsx(As,{addDisplay:c,selectedReason:m,setSelectedReason:g,setToast:i,setvMessage:_,staffId:s,onCloseModal:b})})]})}function st({staffId:s}){var f,L,O,Q;const{t:a}=C(),[c,d]=h.useState(!1),[r,i]=V(),[t,_]=h.useState(1),[m,g]=h.useState(!0),[b,l]=h.useState(!0),[u,n]=h.useState([]),{oneStaffProfile:o,oneStaffProfileRefetch:v}=je({sid:s,skip:!s}),{data:p,refetch:x}=K({sid:s,page:t,limit:10},{skip:!s});h.useEffect(()=>{s&&(l(!0),x())},[s,t,x]),h.useEffect(()=>{s&&v()},[s,v]),h.useEffect(()=>{i&&m&&_(N=>N+1)},[i,m]),h.useEffect(()=>{var N,P;p!=null&&p.allLeave?t===1?(n(p==null?void 0:p.allLeave),l(!1)):(n(X=>[...new Set([...X,...p==null?void 0:p.allLeave].map(JSON.stringify))].map(JSON.parse)),l(!1)):((N=p==null?void 0:p.allLeave)==null?void 0:N.length)===0&&l(!1),((P=p==null?void 0:p.allLeave)==null?void 0:P.length)===10?g(!0):g(!1)},[p==null?void 0:p.allLeave]);const j=()=>{d(N=>!N)},y=()=>{_(1),l(!0),x(),v()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:k.with_search,style:{justifyContent:"flex-end"},children:e.jsx("p",{className:k.add_new_category,onClick:j,children:a("create_new_leave")})}),u==null?void 0:u.map((N,P)=>(u==null?void 0:u.length)===P+1?e.jsx("div",{ref:r,children:e.jsx(E,{leave:N,onRefetch:y})},N==null?void 0:N._id):e.jsx(E,{leave:N,onRefetch:y},N==null?void 0:N._id)),b&&e.jsx(G,{}),c&&e.jsx(U,{staffId:s,onRefetch:y,onClose:j,leaveConfig:{casual_leave:(f=o==null?void 0:o.staff)==null?void 0:f.casual_leave,medical_leave:(L=o==null?void 0:o.staff)==null?void 0:L.medical_leave,sick_leave:(O=o==null?void 0:o.staff)==null?void 0:O.sick_leave,c_off_leave:(Q=o==null?void 0:o.staff)==null?void 0:Q.c_off_leave}})]})}function tt({staffId:s}){const{t:a}=C(),[c,d]=h.useState(!1),[r,i]=V(),[t,_]=h.useState(1),[m,g]=h.useState(!0),[b,l]=h.useState(!0),[u,n]=h.useState([]),{data:o,refetch:v}=K({sid:s,page:t,limit:10,category:"Compensation Off Leave"},{skip:!s});h.useEffect(()=>{s&&(l(!0),v())},[s,t,v]),h.useEffect(()=>{i&&m&&_(j=>j+1)},[i,m]),h.useEffect(()=>{var j,y;o!=null&&o.allLeave?t===1?(n(o==null?void 0:o.allLeave),l(!1)):(n(f=>[...new Set([...f,...o==null?void 0:o.allLeave].map(JSON.stringify))].map(JSON.parse)),l(!1)):((j=o==null?void 0:o.allLeave)==null?void 0:j.length)===0&&l(!1),((y=o==null?void 0:o.allLeave)==null?void 0:y.length)===10?g(!0):g(!1)},[o==null?void 0:o.allLeave]);const p=()=>{d(j=>!j)},x=()=>{_(1),l(!0),v()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:k.with_search,style:{justifyContent:"flex-end"},children:e.jsx("p",{className:k.add_new_category,onClick:p,children:a("request_c_off_leave")})}),u==null?void 0:u.map((j,y)=>(u==null?void 0:u.length)===y+1?e.jsx("div",{ref:r,children:e.jsx(E,{leave:j,onRefetch:x})},j==null?void 0:j._id):e.jsx(E,{leave:j,onRefetch:x},j==null?void 0:j._id)),b&&e.jsx(G,{}),c&&e.jsx(U,{createdBy:"OWN_PROFILE",staffId:s,onRefetch:x,onClose:p})]})}const nt=({carryParentState:s,staffId:a})=>{const{t:c}=C(),[d]=le(),r=[{name:c("request"),id:0,url:"member?a=leave",is_active:"enabled"},{name:c("overview"),id:1,url:"member?a=leave&n=overview",is_active:"enabled"},{name:c("c_off_leave"),id:2,url:"member?a=leave&n=manage-off",is_active:"enabled"}];return e.jsx(e.Fragment,{children:e.jsx("div",{style:{marginTop:"1rem"},children:e.jsxs("div",{className:k.hostel_container,children:[e.jsx("div",{className:k.with_search,children:e.jsx("h6",{children:c("leave_request")})}),e.jsx(B,{customStyle:{marginTop:"0.5rem",width:"100%"}}),e.jsx(pe,{tabList:r,activeIndexTab:d.get("n")?d.get("n")==="overview"?1:2:0,showAs:!0,customStyleTab:{width:"100%"},customStyleLink:{width:"33.3%"},carryParentState:s}),e.jsx(B,{customStyle:{width:"100%",marginBottom:"0.6rem"}}),d.get("n")?d.get("n")==="overview"?e.jsx(xe,{staffId:a}):e.jsx(tt,{staffId:a}):e.jsx(st,{staffId:a})]})})})},Tt=()=>{var a,c,d,r,i,t,_,m,g,b,l,u,n,o;const s=re();return e.jsxs(de,{index:((a=s==null?void 0:s.search)==null?void 0:a.substring(3))==="profile"?"20":((c=s==null?void 0:s.search)==null?void 0:c.substring(3))==="complaint"?"21":((d=s==null?void 0:s.search)==null?void 0:d.substring(3))==="leave"?"22":((r=s==null?void 0:s.search)==null?void 0:r.substring(3))==="transfer"?"23":"24",sid:((i=s==null?void 0:s.state)==null?void 0:i.sid)??"",children:[((t=s==null?void 0:s.search)==null?void 0:t.substring(3))==="profile"&&e.jsx(es,{staffData:((_=s==null?void 0:s.state)==null?void 0:_.sid)??""}),((m=s==null?void 0:s.search)==null?void 0:m.substring(3))==="complaint"&&e.jsx(Qs,{staffId:((g=s==null?void 0:s.state)==null?void 0:g.sid)??""}),((b=s==null?void 0:s.search)==null?void 0:b.substring(3,8))==="leave"&&e.jsx(nt,{staffId:((l=s==null?void 0:s.state)==null?void 0:l.sid)??"",carryParentState:s.state}),((u=s==null?void 0:s.search)==null?void 0:u.substring(3))==="transfer"&&e.jsx(et,{staffId:((n=s==null?void 0:s.state)==null?void 0:n.sid)??""}),((o=s==null?void 0:s.search)==null?void 0:o.substring(3))==="switch"&&e.jsx(_e,{})]})};export{Tt as default};
