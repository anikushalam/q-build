import{r as p,k as Q,c as W,u as X,oa as Z,ob as ee,j as t,N as oe}from"./index-0ca76035.js";import{s as ae}from"./UniversalForm.module-19614663.js";import{A as te,B as ce}from"./institute-staff-student-api-7114d611.js";import{F as ne}from"./FormHeader-7cd0179d.js";import{F as f}from"./FormToggle-18d319d7.js";import{B as u}from"./BorderBottom-1dc6f53e.js";import{F as d}from"./FormCheckbox-35f4f970.js";import"./CustomSelectDepartment-11201deb.js";import"./JoinForm.module-212f9bb3.js";import"./Switch-4bb87998.js";import"./SwitchBase-e3c2ff35.js";import"./FormControlLabel-b4cb2fc2.js";import"./Checkbox-d3fc23de.js";const re=()=>{var h=["0","1","2","3","4","5","6","7","8","9"],m=Math.floor(Math.random()*9),k=Math.floor(Math.random()*9),C=Math.floor(Math.random()*9),a=Math.floor(Math.random()*9),v=Math.floor(Math.random()*9),g=Math.floor(Math.random()*9),b=`${h[m]}${h[k]}${h[C]}${h[a]}${h[v]}${h[g]}`;return b},ve=()=>{var j;const[h,m]=p.useState(!1),[k,C]=p.useState(""),a=Q(o=>o.idChange),v=W(),{staffCode:g,staffCodeRefetch:b}=te({id:a==null?void 0:a.id,skip:!(a!=null&&a.id)}),{t:c}=X(),[G]=ce(),K=()=>{const o=re();o&&G({id:a==null?void 0:a.id,staffCode:{code:o}}).then(l=>{l.data.institute&&b()})},[A]=Z(),{instituteStaffForm:e,instituteStaffFormRefetch:x}=ee({id:a==null?void 0:a.id,skip:!(a!=null&&a.id)}),[r,S]=p.useState({otherPersonalInfo:!1,identityDetails:!1,addressInfo:!1,previousSchoolAndDocument:{previousSchoolDocument:!1,aadharCard:!1,identityDocument:!1,casteCertificate:!1,joiningTransferLetter:!1,leavingTransferCertificate:!1,incomeCertificate:!1,lastYearMarksheet:!1,nationalityCertificate:!1,domicileCertificate:!1,nonCreamyLayerCertificate:!1},bankDetails:!1});p.useEffect(()=>{a!=null&&a.id&&x()},[a==null?void 0:a.id,x]),p.useEffect(()=>{var o,l,n,i,y,L,T,_,M,H,I,V,Y,$,P,R,B,E,N,J,O,U,q,w,z,F;e!=null&&e.staffFormSetting&&S({otherPersonalInfo:(o=e==null?void 0:e.staffFormSetting)==null?void 0:o.otherPersonalInfo,identityDetails:(l=e==null?void 0:e.staffFormSetting)==null?void 0:l.identityDetails,addressInfo:(n=e==null?void 0:e.staffFormSetting)==null?void 0:n.addressInfo,previousSchoolAndDocument:{previousSchoolDocument:(y=(i=e==null?void 0:e.staffFormSetting)==null?void 0:i.previousSchoolAndDocument)==null?void 0:y.previousSchoolDocument,aadharCard:(T=(L=e==null?void 0:e.staffFormSetting)==null?void 0:L.previousSchoolAndDocument)==null?void 0:T.aadharCard,identityDocument:(M=(_=e==null?void 0:e.staffFormSetting)==null?void 0:_.previousSchoolAndDocument)==null?void 0:M.identityDocument,casteCertificate:(I=(H=e==null?void 0:e.staffFormSetting)==null?void 0:H.previousSchoolAndDocument)==null?void 0:I.casteCertificate,joiningTransferLetter:(Y=(V=e==null?void 0:e.staffFormSetting)==null?void 0:V.previousSchoolAndDocument)==null?void 0:Y.joiningTransferLetter,leavingTransferCertificate:(P=($=e==null?void 0:e.staffFormSetting)==null?void 0:$.previousSchoolAndDocument)==null?void 0:P.leavingTransferCertificate,incomeCertificate:(B=(R=e==null?void 0:e.staffFormSetting)==null?void 0:R.previousSchoolAndDocument)==null?void 0:B.incomeCertificate,lastYearMarksheet:(N=(E=e==null?void 0:e.staffFormSetting)==null?void 0:E.previousSchoolAndDocument)==null?void 0:N.lastYearMarksheet,nationalityCertificate:(O=(J=e==null?void 0:e.staffFormSetting)==null?void 0:J.previousSchoolAndDocument)==null?void 0:O.nationalityCertificate,domicileCertificate:(q=(U=e==null?void 0:e.staffFormSetting)==null?void 0:U.previousSchoolAndDocument)==null?void 0:q.domicileCertificate,nonCreamyLayerCertificate:(z=(w=e==null?void 0:e.staffFormSetting)==null?void 0:w.previousSchoolAndDocument)==null?void 0:z.nonCreamyLayerCertificate},bankDetails:(F=e==null?void 0:e.staffFormSetting)==null?void 0:F.bankDetails})},[e==null?void 0:e.staffFormSetting]);const D=(o,l)=>{const n={...r};for(let i in n)i===o&&(n[i]=l);A({id:a==null?void 0:a.id,formSetting:{staffFormSetting:n}}).then(()=>{C("Add joining details updated"),m(!0)}).catch({}),S(i=>({...i,[o]:l}))},s=(o,l)=>{const n={...r};if(o==="previousSchoolDocument"&&!l&&(n.previousSchoolAndDocument.aadharCard=!1,n.previousSchoolAndDocument.casteCertificate=!1,n.previousSchoolAndDocument.domicileCertificate=!1,n.previousSchoolAndDocument.identityDocument=!1,n.previousSchoolAndDocument.incomeCertificate=!1,n.previousSchoolAndDocument.joiningTransferLetter=!1,n.previousSchoolAndDocument.lastYearMarksheet=!1,n.previousSchoolAndDocument.leavingTransferCertificate=!1,n.previousSchoolAndDocument.nationalityCertificate=!1,n.previousSchoolAndDocument.nonCreamyLayerCertificate=!1),r.previousSchoolAndDocument.previousSchoolDocument||o==="previousSchoolDocument"){for(let i in n.previousSchoolAndDocument)i===o&&(n.previousSchoolAndDocument[i]=l);A({id:a==null?void 0:a.id,formSetting:{staffFormSetting:n}}).then(()=>{C("Add joining details updated"),m(!0)}).catch({}),S(i=>({...i,previousSchoolAndDocument:{...i.previousSchoolAndDocument,[o]:l}}))}};return t.jsxs(t.Fragment,{children:[t.jsx(ne,{RefreshCodeHandler:K,staffJoinCode:((j=g==null?void 0:g.institute)==null?void 0:j.staffJoinCode)||"-",setStaffSetting:()=>v(-1),asStaff:"Staff",availableCode:c("avail_ins_code")}),t.jsxs("div",{className:ae.staff_form_container,children:[t.jsx(f,{labelHeading:c("personal_info"),labelDescription:c("name_"),defaultLabel:!0}),t.jsx(u,{}),t.jsx(f,{labelHeading:c("other_personal"),labelDescription:c("labeltext"),defaultLabel:!1,checkedToggle:r.otherPersonalInfo,onToggleHandler:o=>D("otherPersonalInfo",o.target.checked)}),t.jsx(u,{}),t.jsx(f,{labelHeading:c("identity_details"),labelDescription:c("labeltext2"),defaultLabel:!1,checkedToggle:r.identityDetails,onToggleHandler:o=>D("identityDetails",o.target.checked)}),t.jsx(u,{}),t.jsx(f,{labelHeading:c("add_info"),labelDescription:c("labeltext3"),defaultLabel:!1,checkedToggle:r.addressInfo,onToggleHandler:o=>D("addressInfo",o.target.checked)}),t.jsx(u,{}),t.jsxs(f,{labelHeading:c("prev_school_"),labelDescription:"",defaultLabel:!1,checkedToggle:r.previousSchoolAndDocument.previousSchoolDocument,onToggleHandler:o=>s("previousSchoolDocument",o.target.checked),children:[t.jsx(d,{checkLabel:c("aadhar_card"),checkedValue:r.previousSchoolAndDocument.aadharCard,onCheckboxAction:o=>s("aadharCard",o.target.checked)}),t.jsx(d,{checkLabel:c("any_doc"),checkedValue:r.previousSchoolAndDocument.identityDocument,onCheckboxAction:o=>s("identityDocument",o.target.checked)}),t.jsx(d,{checkLabel:c("castee_"),checkedValue:r.previousSchoolAndDocument.casteCertificate,onCheckboxAction:o=>s("casteCertificate",o.target.checked)}),t.jsx(d,{checkLabel:c("joining_letter"),checkedValue:r.previousSchoolAndDocument.joiningTransferLetter,onCheckboxAction:o=>s("joiningTransferLetter",o.target.checked)}),t.jsx(d,{checkLabel:c("certificates"),checkedValue:r.previousSchoolAndDocument.leavingTransferCertificate,onCheckboxAction:o=>s("leavingTransferCertificate",o.target.checked)}),t.jsx(d,{checkLabel:c("i_certificate"),checkedValue:r.previousSchoolAndDocument.incomeCertificate,onCheckboxAction:o=>s("incomeCertificate",o.target.checked)}),t.jsx(d,{checkLabel:c("marksheet"),checkedValue:r.previousSchoolAndDocument.lastYearMarksheet,onCheckboxAction:o=>s("lastYearMarksheet",o.target.checked)}),t.jsx(d,{checkLabel:c("n_certificate"),checkedValue:r.previousSchoolAndDocument.nationalityCertificate,onCheckboxAction:o=>s("nationalityCertificate",o.target.checked)}),t.jsx(d,{checkLabel:c("d_certificate"),checkedValue:r.previousSchoolAndDocument.domicileCertificate,onCheckboxAction:o=>s("domicileCertificate",o.target.checked)}),t.jsx(d,{checkLabel:c("non_cremy"),checkedValue:r.previousSchoolAndDocument.nonCreamyLayerCertificate,onCheckboxAction:o=>s("nonCreamyLayerCertificate",o.target.checked)})]}),t.jsx(u,{}),t.jsx(f,{labelHeading:c("bank_details"),labelDescription:c("labeltext5"),defaultLabel:!1,checkedToggle:r.bankDetails,onToggleHandler:o=>D("bankDetails",o.target.checked)}),t.jsx(u,{})]}),t.jsx(oe,{run:h,setRun:m,msg:k,postiton:"bottom",type:"success"})]})};export{ve as default};
