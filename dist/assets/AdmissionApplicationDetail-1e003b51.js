import{u as U,c as z,n as H,r as h,j as s,D as J,Q as K,N as P}from"./index-0ca76035.js";import{s as d,A as W}from"./AdmissionApplicationCalender-43db225a.js";import{_ as X,$ as Y}from"./admission-api-925391d9.js";const B=({viewDetail:q,hideModal:j,applicationDetail:e,completeApplication:_,carryParentState:o,applicationDetailApplicablePending:V,pageOpenAs:A})=>{var g,R,b,S,a,k,I,T,E;const{t:n}=U(),Q=new Date,f=z(),v=H(),[C,x]=h.useState(!1),[u,N]=h.useState({msg:"",run:!1}),[w,G]=h.useState(!1),[l,L]=h.useState((g=Q.toISOString())==null?void 0:g.substring(0,10)),[O]=X(),{getDailyCollectionByAdmission:r,getDailyCollectionByAdmissionRefetch:t}=Y({data:{appId:e==null?void 0:e._id,valid_date:l},skip:!(e!=null&&e._id)});h.useEffect(()=>{e!=null&&e._id&&t()},[e==null?void 0:e._id,t,l]);const $=()=>{x(c=>!c),e!=null&&e._id?O(e==null?void 0:e._id).then(c=>{var F;(F=c==null?void 0:c.data)!=null&&F.complete_status?(x(m=>!m),j(!1),A==="INSTITUTE"?f(`/q/${v.username}/admission`,{state:{...o}}):f(`/q/${v.username}/member/admission`,{state:{...o}})):(N({msg:c==null?void 0:c.data.message,run:!0}),x(m=>!m))}).catch({}):x(c=>!c)};return s.jsxs(J,{open:q,onClose:()=>j(!1),children:[s.jsxs("div",{className:d.addDisplay,children:[s.jsxs("div",{className:d.title,children:[s.jsx("div",{}),s.jsx("h6",{style:{cursor:"pointer"},onClick:()=>G(c=>!c),children:e==null?void 0:e.applicationName}),s.jsx("img",{src:"/images/close-post-icon.svg",onClick:()=>j(!1),alt:""})]}),s.jsxs("div",{className:d.content,children:[s.jsx("div",{style:{padding:"1rem"},children:s.jsx(W,{setValidDate:L})}),_&&!w&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:d.content2,children:[s.jsxs("div",{className:d.appinforow,children:[s.jsx("h6",{children:n("total_received_application")}),s.jsx("h6",{children:((R=r==null?void 0:r.day_wise)==null?void 0:R.request_count)??0})]}),s.jsxs("div",{className:d.appinforow,children:[s.jsx("h6",{children:n("total_selected_application")}),s.jsx("h6",{children:((b=r==null?void 0:r.day_wise)==null?void 0:b.select_count)??0})]}),s.jsxs("div",{className:d.appinforow,children:[s.jsx("h6",{children:n("total_confirmed_application")}),s.jsx("h6",{children:((S=r==null?void 0:r.day_wise)==null?void 0:S.confirm_count)??0})]}),s.jsxs("div",{className:d.appinforow,children:[s.jsx("h6",{children:n("total_alloted_application")}),s.jsx("h6",{children:((a=r==null?void 0:r.day_wise)==null?void 0:a.allot_count)??0})]}),s.jsxs("div",{className:d.appinforow,children:[s.jsx("h6",{children:n("total_cancelled_application")}),s.jsx("h6",{children:((k=r==null?void 0:r.day_wise)==null?void 0:k.cancel_count)??0})]})]}),s.jsxs("div",{className:d.content3,children:[s.jsxs("div",{className:d.appinforow1,children:[s.jsx("h6",{children:n("total_fees_received")}),s.jsxs("h6",{children:["Rs. ",((I=r==null?void 0:r.day_wise)==null?void 0:I.paid)??0]})]}),s.jsxs("div",{className:`${d.appinforow2} ${d.appinforowred}`,children:[s.jsx("h6",{children:n("total_fees_pending")}),s.jsxs("h6",{children:["Rs. ",((T=r==null?void 0:r.day_wise)==null?void 0:T.remain)??0]})]}),s.jsxs("div",{className:`${d.appinforow2} ${d.appinforowred}`,children:[s.jsx("h6",{children:n("total_applicable_fees_pending")}),s.jsxs("h6",{children:["Rs."," ",((E=r==null?void 0:r.day_wise)==null?void 0:E.applicable_pending)??0]})]}),s.jsx("div",{className:d.completeApplicationcontainer,children:s.jsx("div",{className:d.completeApplication,onClick:$,children:n("complete_application")})})]})]}),_&&w&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:d.content2,children:[s.jsxs("div",{className:d.appinforow,children:[s.jsx("h6",{children:n("total_received_application")}),s.jsx("h6",{children:e==null?void 0:e.receievedCount})]}),s.jsxs("div",{className:d.appinforow,children:[s.jsx("h6",{children:n("total_selected_application")}),s.jsx("h6",{children:e==null?void 0:e.selectCount})]}),s.jsxs("div",{className:d.appinforow,children:[s.jsx("h6",{children:n("total_confirmed_application")}),s.jsx("h6",{children:e==null?void 0:e.confirmCount})]}),s.jsxs("div",{className:d.appinforow,children:[s.jsx("h6",{children:n("total_alloted_application")}),s.jsx("h6",{children:e==null?void 0:e.allotCount})]}),s.jsxs("div",{className:d.appinforow,children:[s.jsx("h6",{children:n("total_cancelled_application")}),s.jsx("h6",{children:e==null?void 0:e.cancelCount})]})]}),s.jsxs("div",{className:d.content3,children:[s.jsxs("div",{className:d.appinforow1,children:[s.jsx("h6",{children:n("total_fees_received")}),s.jsxs("h6",{children:["Rs. ",e==null?void 0:e.collectedFeeCount]})]}),s.jsxs("div",{className:`${d.appinforow2} ${d.appinforowred}`,children:[s.jsx("h6",{children:n("total_fees_pending")}),s.jsxs("h6",{children:["Rs. ",e==null?void 0:e.remainingFee]})]}),s.jsxs("div",{className:`${d.appinforow2} ${d.appinforowred}`,children:[s.jsx("h6",{children:n("total_applicable_fees_pending")}),s.jsxs("h6",{children:["Rs. ",V??0]})]}),s.jsx("div",{className:d.completeApplicationcontainer,children:s.jsx("div",{className:d.completeApplication,onClick:$,children:n("complete_application")})})]})]})]})]}),C&&s.jsx(K,{}),s.jsx(P,{msg:u.msg,run:u.run,setRun:()=>N({msg:"",run:!1}),postiton:"bottom",type:"error"})]})};export{B as A};
