import{u as U,r,W as ce,j as e,Q as K,k as re}from"./index-0ca76035.js";import{W as oe,X as ne,g as de,n as M,Y as ee,Z as te}from"./admission-api-925391d9.js";import{O as _e}from"./Overlay-c8100e0a.js";import{S as me}from"./SearchModalBackdrop-c4f123e6.js";import{s as Y}from"./EditConfirm.module-344fbdb9.js";import{s as p}from"./SeatingArrangement.module-3f4ae6aa.js";import{P as q}from"./PopupWrapper-2578092d.js";import{C as Q}from"./CustomNormalSelectInput-0a62fa3f.js";import{B as W}from"./BorderBottom-1dc6f53e.js";import{J as A}from"./JoinFormInput-82706177.js";import{e as he,c as se,a as ae,b as ie,f as le}from"./hostel-api-9294ced1.js";import{C as G}from"./CustomSelectDepartment-11201deb.js";import{J as Z}from"./JoinFormCalender-d186c4ef.js";import{J as xe}from"./JoinFormTextArea-394bf055.js";import{J as fe}from"./JoinFormFile-a00a41cd.js";import{d as Se}from"./department-api-e4b13f05.js";import{C as ge}from"./ClassCard-b1734f36.js";import{S as je}from"./SelectFeeStructure-915fed5c.js";import{S as Ne}from"./SelectHostelFeeStrucutre-f8ff675f.js";const z=({onClose:s,is_update:l,openApplicationMenu:a,isType:h,onCreateApplication:i,isDirect:f,viewAs:u})=>{const{t:c}=U(),[d,t]=r.useState({applicationSeats:"",applicationStartDate:"",applicationEndDate:"",applicationAbout:"",applicationPhoto:""}),[w,_]=r.useState(""),[y,m]=r.useState(""),[k,S]=r.useState(!1),[P]=ce();r.useEffect(()=>{l&&t(o=>({...o,applicationSeats:a==null?void 0:a.applicationSeats,applicationStartDate:a==null?void 0:a.applicationStartDate,applicationEndDate:a==null?void 0:a.applicationEndDate,applicationAbout:a==null?void 0:a.applicationAbout,applicationPhoto:a==null?void 0:a.applicationPhoto}))},[l,a]);const T=o=>{let N=o==null?void 0:o.split("/"),O=`${N[2]}-${N[1]}-${N[0]}`;t(F=>({...F,applicationStartDate:O}))},j=o=>{let N=o==null?void 0:o.split("/"),O=`${N[2]}-${N[1]}-${N[0]}`;t(F=>({...F,applicationEndDate:O}))},b=o=>{t(N=>({...N,[o.target.name]:o.target.value}))},L=o=>{const N={};for(let O in o)o[O]||(N[O]=`${O} is required!`);return N},g=o=>{S(O=>!O);const N=new FormData;m(o.target.files[0]),N.append("file",o.target.files[0]),P({fileUpload:N}).then(O=>{S(F=>!F),t(F=>{var B;return{...F,applicationPhoto:(B=O.data)==null?void 0:B.imageKey}})}).catch(()=>{S(O=>!O)})},D=()=>{if(h==="Normal Application")i(d);else{const o=L({applicationSeats:d.applicationSeats});let N=!1;for(let O in o)if(O){N=!0;break}N?_(o):i(d)}};return e.jsx(q,{onClose:s,children:e.jsxs("div",{className:p.seating_modal,children:[e.jsxs("section",{className:p.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:s,alt:""}),e.jsx("h6",{children:c(l?"update_admission_application":h==="Normal Application"?"create_new_application":u==="HOSTEL"?"new_direct_hostel_application":"new_direct_admission_application")})]}),e.jsx(W,{customStyle:{width:"100%"}}),e.jsx(A,{labelText:c(f?"available_seat_not_optional":"available_seat"),placeholder:c("please_enter_available_seat"),name:"applicationSeats",value:d==null?void 0:d.applicationSeats,type:"tel",onChange:b,errorShow:w.applicationSeats}),e.jsx(Z,{labelText:c("application_start_date"),placeholder:c("please_select_the_date"),name:"applicationStartDate",value:d.applicationStartDate,onDateFunction:T,customStyleContainer:{position:"relative",width:"100%"},datePickerPosition:{top:"0rem",left:"2rem"},customStyleCaledarIcon:{bottom:"1.7rem"}}),e.jsx(Z,{labelText:c("application_end_date"),placeholder:c("please_select_the_date"),name:"applicationEndDate",value:d.applicationEndDate,onDateFunction:j,customStyleContainer:{position:"relative",width:"100%"},datePickerPosition:{top:"0rem",left:"2rem"},customStyleCaledarIcon:{bottom:"1.7rem"}}),e.jsx(fe,{labelText:c("brochure"),name:"brochure_file",value:y?{originalName:y==null?void 0:y.name}:d.applicationPhoto?{originalName:"Brochure file"}:"",onChange:g,customStyleContainer:{width:"100%"}}),e.jsx(xe,{labelText:c("application_info_required"),placeholder:c("write_something"),name:"applicationAbout",value:d.applicationAbout,type:"text",onChange:b,customStyleContainer:{width:"100%"}}),e.jsx("button",{className:p.start_arrangement_btn,onClick:D,children:c(l?"update":"create")}),k&&e.jsx(K,{})]})})};function pe({openApplicationMenu:s,onEdit:l,onClose:a,viewAs:h}){var P,T,j,b,L;const{t:i}=U(),[f,u]=r.useState(0),[c,d]=r.useState(""),[t,w]=r.useState({applicationName:s==null?void 0:s.applicationName,gr_initials:s==null?void 0:s.gr_initials});r.useEffect(()=>{(s!=null&&s.gr_initials||s!=null&&s.applicationName)&&w(g=>({...g,applicationName:s==null?void 0:s.applicationName,gr_initials:s==null?void 0:s.gr_initials}))},[s==null?void 0:s.applicationName,s==null?void 0:s.gr_initials]);const _=g=>{u(g)},y=g=>{const D={};for(let o in g)g[o]||(D[o]=`${o} is required!`);return D},m=()=>{const g=y({applicationName:t.applicationName});let D=!1;for(let o in g)if(o){D=!0;break}D?d(g):_(1)},k=g=>{var D;g.target.name==="gr_initials"?((D=g.target.value)==null?void 0:D.length)<=10&&w(o=>({...o,[g.target.name]:g.target.value})):w(o=>({...o,[g.target.name]:g.target.value}))},S=g=>{l({...t,...g})};return e.jsxs(e.Fragment,{children:[f===0&&e.jsx(q,{onClose:a,children:e.jsxs("div",{className:p.seating_modal,children:[e.jsxs("section",{className:p.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:a,alt:""}),e.jsx("h6",{children:i("update_admission_application")})]}),e.jsx(W,{customStyle:{width:"100%"}}),e.jsx(A,{labelText:i("application_name"),placeholder:i("please_enter_application_name"),name:"applicationName",value:t==null?void 0:t.applicationName,type:"text",onChange:k,errorShow:c.applicationName}),h==="HOSTEL_MANAGER"?"":e.jsx(A,{labelText:i("application_initials"),placeholder:i("department_initials_placeholder"),name:"gr_initials",value:t==null?void 0:t.gr_initials,type:"text",onChange:k}),h==="HOSTEL_MANAGER"?e.jsxs(e.Fragment,{children:[e.jsx(Q,{selectLabel:i("select_unit"),openAs:"BACKLOG",value:((P=s==null?void 0:s.applicationUnit)==null?void 0:P.hostel_unit_name)??""}),e.jsx(Q,{selectLabel:i("select_batch"),openAs:"BACKLOG",value:((T=s==null?void 0:s.applicationBatch)==null?void 0:T.batchName)??""})]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{selectLabel:i("select_department"),openAs:"BACKLOG",value:((j=s==null?void 0:s.applicationDepartment)==null?void 0:j.dName)??""}),e.jsx(Q,{selectLabel:i("select_batch"),openAs:"BACKLOG",value:((b=s==null?void 0:s.applicationBatch)==null?void 0:b.batchName)??""}),e.jsx(Q,{selectLabel:i("select_standerd"),openAs:"BACKLOG",value:((L=s==null?void 0:s.applicationMaster)==null?void 0:L.className)??""})]}),e.jsx("button",{className:p.start_arrangement_btn,onClick:m,children:i("next")})]})}),f===1&&e.jsx(z,{onClose:()=>_(0),is_update:!0,isType:(s==null?void 0:s.applicationType)==="Plain Application"?"Normal Application":"Direct Application",openApplicationMenu:s,onCreateApplication:S,isDirect:(s==null?void 0:s.application_type)!=="Step Wise Admission",viewAs:h==="HOSTEL_MANAGER"?"HOSTEL":""})]})}const We=({onClose:s,onRefetch:l,openApplicationMenu:a,viewAs:h,hostelId:i,insAdmissionId:f})=>{const u=re(j=>j.admissionChange.aid),[c,d]=r.useState(!1),[t,w]=r.useState(!1),[_]=oe(),[y]=he(),[m]=ne(),{oneApplicationDetail:k,oneApplicationDetailRefetch:S}=de({apid:a==null?void 0:a._id,skip:!(a!=null&&a._id)});r.useEffect(()=>{a!=null&&a._id&&S()},[a==null?void 0:a._id,S]);const P=()=>{d(j=>!j),h==="HOSTEL_MANAGER"?y({aid:i,appId:a==null?void 0:a._id}).then(()=>{l(),s(),d(j=>!j)}).catch({}):_({aid:f||u,appId:a==null?void 0:a._id}).then(()=>{l(),s(),d(j=>!j)}).catch({})},T=j=>{d(b=>!b),w(!1),m({appId:a==null?void 0:a._id,updateApplication:j}).then(()=>{l(),d(b=>!b),s()}).catch({})};return e.jsx(e.Fragment,{children:t?e.jsx(pe,{openApplicationMenu:k==null?void 0:k.oneApply,onEdit:T,onClose:()=>w(!1),viewAs:h}):e.jsxs(e.Fragment,{children:[e.jsx(me,{onClose:s}),e.jsxs(_e,{customStyle:{zIndex:"1200"},children:[e.jsxs("div",{className:Y.edit_modal_container,style:{width:"200px"},children:[e.jsx("h6",{className:Y.edit,onClick:()=>w(j=>!j),children:"Edit"}),e.jsx("h6",{className:Y.remove,onClick:P,children:"Delete"})]}),c&&e.jsx(K,{})]})]})})},ue=({onClose:s,setSelectedApplicationType:l})=>{const{t:a}=U(),h=i=>{l(i)};return e.jsxs("div",{className:p.seating_modal,children:[e.jsxs("section",{className:p.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:s,alt:""}),e.jsx("h6",{children:a("select_admission_application_type")})]}),e.jsx(W,{customStyle:{width:"100%"}}),e.jsxs("div",{className:p.application_card,onClick:()=>h("Direct_Admission"),children:[e.jsxs("div",{className:p.application_card_title,children:[e.jsx("img",{src:"/images/fees-category-icon.svg",alt:"staff profile avatar"}),e.jsx("h6",{children:a("direct_admission")})]}),e.jsxs("section",{className:p.application_card_info,children:[e.jsx("div",{children:a("only_two_steps")}),e.jsxs("div",{children:["1. ",a("online_filling_form")]}),e.jsxs("div",{children:["2. ",a("online_admission_fees_payments")]}),e.jsx("h6",{children:a("online_note_suitable")})]})]}),e.jsxs("div",{className:p.application_card,onClick:()=>h("Complete_Step_Wise_Admission"),children:[e.jsxs("div",{className:p.application_card_title,children:[e.jsx("img",{src:"/images/fees-category-icon.svg",alt:"staff profile avatar"}),e.jsx("h6",{children:a("complete_step_wise_admission")})]}),e.jsxs("section",{className:p.application_card_info,children:[e.jsx("div",{children:a("steps_involved")}),e.jsxs("div",{children:["1. ",a("online_filling_form1")]}),e.jsxs("div",{children:["2. ",a("online_admission_fees_payments1")]}),e.jsxs("div",{children:["3. ",a("online_admission_fees_payments2")]}),e.jsxs("div",{children:["4. ",a("online_admission_fees_payments3")]}),e.jsxs("div",{children:["5. ",a("online_admission_fees_payments4")]}),e.jsx("h6",{children:a("offile_note_suitable")})]})]})]})},Ce=({onClose:s,hostelId:l,setRefetchOngoining:a})=>{var I;const{t:h}=U(),[i,f]=r.useState(0),[u,c]=r.useState(""),[d,t]=r.useState(""),[w,_]=r.useState({applicationName:"",gr_initials:""}),[y,m]=r.useState(""),[k,S]=r.useState(""),{getHostelUnitList:P,getHostelUnitListRefetch:T}=se({data:{hid:l,page:1,limit:1e3,search:""},skip:!l}),{getHostelAllBatch:j,getHostelAllBatchRefetch:b}=ae({data:{hid:l,page:1,limit:1e3},skip:!l}),{getHostelAllStandard:L,getHostelAllStandardRefetch:g}=ie({hid:l,skip:!l});r.useEffect(()=>{l&&(b(),T(),g())},[l,b,T,g]);const[D]=le(),o=x=>{t(x)},N=x=>{f(x)},O=x=>{m(x)},F=x=>{S(x)},B=x=>{const V={};for(let R in x)x[R]||(V[R]=`${R} is required!`);return V},J=()=>{const x=B({hostelUnit:d==null?void 0:d._id,applicationName:w.applicationName,batch:y==null?void 0:y._id});let V=!1;for(let R in x)if(R){V=!0;break}V?c(x):N(1)},H=x=>{var V;x.target.name==="gr_initials"?((V=x.target.value)==null?void 0:V.length)<=10&&_(R=>({...R,[x.target.name]:x.target.value})):_(R=>({...R,[x.target.name]:x.target.value}))},C=x=>{f(2);const V={applicationName:w.applicationName,gr_initials:w.gr_initials,applicationUnit:d==null?void 0:d._id,applicationBatch:y==null?void 0:y._id,applicationMaster:k==null?void 0:k._id,application_type:"Step Wise Admission",...x};D({hid:l,new_Data:V}).then(()=>{a(),s(),f(0)}).catch({})};return e.jsxs(e.Fragment,{children:[i===0&&e.jsx(q,{onClose:s,children:e.jsxs("div",{className:p.seating_modal,children:[e.jsxs("section",{className:p.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:s,alt:""}),e.jsx("h6",{children:h("create_new_application")})]}),e.jsx(W,{customStyle:{width:"100%"}}),e.jsx(A,{labelText:h("application_name"),placeholder:h("please_enter_application_name"),name:"applicationName",value:w==null?void 0:w.applicationName,type:"text",onChange:H,errorShow:u.applicationName}),e.jsx(G,{selectLabel:h("select_unit"),onClick:o,selectedValue:h("select_unit_placeholder"),options:(P==null?void 0:P.all_units)??[],errorShow:u.hostelUnit,openAs:"PROMOTE",viewAs:"ADMISSION_APPLICATION",defalutValue:d==null?void 0:d.hostel_unit_name}),e.jsx(G,{selectLabel:h("select_batch"),onClick:O,selectedValue:h("select_batch_placeholder"),options:(I=j==null?void 0:j.all_batches)!=null&&I.length?j==null?void 0:j.all_batches:[],errorShow:u.batch,openAs:"PROMOTE",viewAs:"ADMISSION_APPLICATION",defalutValue:y==null?void 0:y.batchName}),e.jsx(G,{selectLabel:h("select_standerd"),onClick:F,selectedValue:h("please_select_standerd"),options:(L==null?void 0:L.all_masters)??[],openAs:"PROMOTE",viewAs:"ADMISSION_APPLICATION",defalutValue:k==null?void 0:k.className}),e.jsx("button",{className:p.start_arrangement_btn,onClick:J,children:h("next")})]})}),i===1&&e.jsx(z,{onClose:()=>N(0),onCreateApplication:C,isType:"Normal Application"}),i===2&&e.jsx(K,{})]})},ve=({onClose:s,admissionId:l,setRefetchOngoining:a,onCloseParent:h})=>{const{t:i}=U(),[f,u]=r.useState(0),[c,d]=r.useState(""),[t,w]=r.useState(""),[_,y]=r.useState(""),[m,k]=r.useState(""),[S,P]=r.useState({applicationName:"",gr_initials:""}),{allDepartmentList:T,allDepartmentListRefetch:j}=M({aid:l,skip:!l}),[b]=ee();r.useEffect(()=>{l&&j()},[l,j]);const L=C=>{w(C)},g=C=>{y(C)},{admissionClassMasterList:D,admissionClassMasterListRefetch:o}=te({did:t==null?void 0:t._id,skip:!(t!=null&&t._id)});r.useEffect(()=>{t!=null&&t._id&&o()},[t==null?void 0:t._id,o]);const N=C=>{k(C)},O=C=>{u(C)},F=C=>{const I={};for(let x in C)C[x]||(I[x]=`${x} is required!`);return I},B=()=>{const C=F({department:t==null?void 0:t._id,batch:_==null?void 0:_._id,classMaster:m==null?void 0:m._id,applicationName:S.applicationName});let I=!1;for(let x in C)if(x){I=!0;break}I?d(C):O(1)},J=C=>{var I;C.target.name==="gr_initials"?((I=C.target.value)==null?void 0:I.length)<=10&&P(x=>({...x,[C.target.name]:C.target.value})):P(x=>({...x,[C.target.name]:C.target.value}))},H=C=>{u(2);const I={applicationName:S.applicationName,gr_initials:S.gr_initials,applicationDepartment:t==null?void 0:t._id,applicationBatch:_==null?void 0:_._id,applicationMaster:m==null?void 0:m._id,application_type:"Step Wise Admission",...C};b({aid:l,new_Data:I}).then(()=>{a(),h(),u(0)}).catch({})};return e.jsxs(e.Fragment,{children:[f===0&&e.jsx(q,{onClose:s,children:e.jsxs("div",{className:p.seating_modal,children:[e.jsxs("section",{className:p.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:s,alt:""}),e.jsx("h6",{children:i("create_new_application")})]}),e.jsx(W,{customStyle:{width:"100%"}}),e.jsx(A,{labelText:i("application_name"),placeholder:i("please_enter_application_name"),name:"applicationName",value:S==null?void 0:S.applicationName,type:"text",onChange:J,errorShow:c.applicationName}),e.jsx(A,{labelText:i("application_initials"),placeholder:i("department_initials_placeholder"),name:"gr_initials",value:S==null?void 0:S.gr_initials,type:"text",onChange:J,errorShow:c.gr_initials}),e.jsx(G,{selectLabel:i("select_department"),onClick:L,selectedValue:i("please_select_the_department"),options:(T==null?void 0:T.allDB)??[],errorShow:c.department,openAs:"PROMOTE",viewAs:"ADMISSION_APPLICATION",defalutValue:t==null?void 0:t.dName}),e.jsx(G,{selectLabel:i("select_batch"),onClick:g,selectedValue:i("select_batch_placeholder"),options:(t==null?void 0:t.batches)??[],errorShow:c.batch,openAs:"PROMOTE",viewAs:"ADMISSION_APPLICATION",defalutValue:_==null?void 0:_.batchName}),e.jsx(G,{selectLabel:i("select_standerd"),onClick:N,selectedValue:i("please_select_standerd"),options:(D==null?void 0:D.classMasters)??[],errorShow:c.classMaster,openAs:"PROMOTE",viewAs:"ADMISSION_APPLICATION",defalutValue:m==null?void 0:m.className}),e.jsx("button",{className:p.start_arrangement_btn,onClick:B,children:i("next")})]})}),f===1&&e.jsx(z,{onClose:()=>O(0),onCreateApplication:H,isType:"Normal Application"}),f===2&&e.jsx(K,{})]})},be=({onClose:s,bid:l,onSkip:a,onSelectedDivision:h})=>{var c,d;const{t:i}=U(),{departmentBatchAllClass:f,departmentBatchAllClassRefetch:u}=Se({data:{bid:l,page:1,limit:200},skip:!l});return r.useEffect(()=>{l&&u()},[l,u]),e.jsx(q,{onClose:s,children:e.jsxs("div",{className:p.seating_modal,children:[e.jsxs("section",{className:p.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:s,alt:""}),e.jsx("h6",{children:i("select_class_optional")}),e.jsx("button",{className:p.next_btn,onClick:a,children:i("skip")})]}),e.jsx(W,{customStyle:{width:"100%",marginTop:"0.8rem",marginBottom:"0.8rem"}}),(d=(c=f==null?void 0:f.batch)==null?void 0:c.classroom)==null?void 0:d.map(t=>e.jsx(ge,{classData:t,setAllotC:h,setViewClass:()=>{}},t==null?void 0:t._id))]})})},De=({onClose:s,admissionId:l,setRefetchOngoining:a,onCloseParent:h})=>{const{t:i}=U(),[f,u]=r.useState(0),[c,d]=r.useState(""),[t,w]=r.useState(""),[_,y]=r.useState(""),[m,k]=r.useState(""),[S,P]=r.useState(""),[T,j]=r.useState(""),[b,L]=r.useState({applicationName:"",gr_initials:""}),{allDepartmentList:g,allDepartmentListRefetch:D}=M({aid:l,skip:!l}),[o]=ee();r.useEffect(()=>{l&&D()},[l,D]);const N=n=>{w(n)},O=n=>{y(n)},{admissionClassMasterList:F,admissionClassMasterListRefetch:B}=te({did:t==null?void 0:t._id,skip:!(t!=null&&t._id)});r.useEffect(()=>{t!=null&&t._id&&B()},[t==null?void 0:t._id,B]);const J=n=>{k(n)},H=n=>{u(n)},C=n=>{const E={};for(let $ in n)n[$]||(E[$]=`${$} is required!`);return E},I=()=>{const n=C({department:t==null?void 0:t._id,batch:_==null?void 0:_._id,classMaster:m==null?void 0:m._id,applicationName:b.applicationName});let E=!1;for(let $ in n)if($){E=!0;break}E?d(n):H(1)},x=n=>{P(n==null?void 0:n._id),H(2)},V=n=>{j(n==null?void 0:n._id),H(3)},R=n=>{var E;n.target.name==="gr_initials"?((E=n.target.value)==null?void 0:E.length)<=10&&L($=>({...$,[n.target.name]:n.target.value})):L($=>({...$,[n.target.name]:n.target.value}))},X=()=>{H(3)},v=n=>{u(5);const E={applicationName:b.applicationName,gr_initials:b.gr_initials,applicationDepartment:t==null?void 0:t._id,applicationBatch:_==null?void 0:_._id,applicationMaster:m==null?void 0:m._id,direct_linked_structure:S,direct_attach_class:T??"",application_type:"Direct Admisison",...n};o({aid:l,new_Data:E}).then(()=>{a(),h(),u(0)}).catch({})};return e.jsxs(e.Fragment,{children:[f===0&&e.jsx(q,{onClose:s,children:e.jsxs("div",{className:p.seating_modal,children:[e.jsxs("section",{className:p.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:s,alt:""}),e.jsx("h6",{children:i("new_direct_admission_application")})]}),e.jsx(W,{customStyle:{width:"100%"}}),e.jsx(A,{labelText:i("application_name"),placeholder:i("please_enter_application_name"),name:"applicationName",value:b==null?void 0:b.applicationName,type:"text",onChange:R,errorShow:c.applicationName}),e.jsx(A,{labelText:i("application_initials"),placeholder:i("department_initials_placeholder"),name:"gr_initials",value:b==null?void 0:b.gr_initials,type:"text",onChange:R,errorShow:c.gr_initials}),e.jsx(G,{selectLabel:i("select_department"),onClick:N,selectedValue:i("please_select_the_department"),options:(g==null?void 0:g.allDB)??[],errorShow:c.department,openAs:"PROMOTE",viewAs:"ADMISSION_APPLICATION",defalutValue:t==null?void 0:t.dName}),e.jsx(G,{selectLabel:i("select_batch"),onClick:O,selectedValue:i("select_batch_placeholder"),options:(t==null?void 0:t.batches)??[],errorShow:c.batch,openAs:"PROMOTE",defalutValue:_==null?void 0:_.batchName}),e.jsx(G,{selectLabel:i("select_standerd"),onClick:J,selectedValue:i("please_select_standerd"),options:(F==null?void 0:F.classMasters)??[],errorShow:c.classMaster,openAs:"PROMOTE",defalutValue:m==null?void 0:m.className}),e.jsx("button",{className:p.start_arrangement_btn,onClick:I,children:i("next")})]})}),f===1&&e.jsx(je,{onClose:()=>H(0),departmentId:t==null?void 0:t._id,classMasterId:m==null?void 0:m._id,batchId:_==null?void 0:_._id,asOpen:"ADMISSION_APPLICATION",onSelectedStrucutre:x}),f===2&&e.jsx(be,{onClose:()=>H(1),bid:_==null?void 0:_._id,onSelectedDivision:V,onSkip:X}),f===3&&e.jsx(z,{onClose:()=>H(2),onCreateApplication:v,isDirect:!0}),f===5&&e.jsx(K,{})]})},Oe=({onClose:s,hostelId:l,setRefetchOngoining:a,onCloseParent:h})=>{var X;const{t:i}=U(),[f,u]=r.useState(0),[c,d]=r.useState(""),[t,w]=r.useState(""),[_,y]=r.useState(""),[m,k]=r.useState({applicationName:"",gr_initials:""}),[S,P]=r.useState(""),[T,j]=r.useState(""),[b]=le(),{getHostelUnitList:L,getHostelUnitListRefetch:g}=se({data:{hid:l,page:1,limit:1e3,search:""},skip:!l}),{getHostelAllBatch:D,getHostelAllBatchRefetch:o}=ae({data:{hid:l,page:1,limit:1e3},skip:!l}),{getHostelAllStandard:N,getHostelAllStandardRefetch:O}=ie({hid:l,skip:!l});r.useEffect(()=>{l&&(o(),g(),O())},[l,o,g,O]);const F=v=>{w(v)},B=v=>{u(v)},J=v=>{P(v)},H=v=>{j(v)},C=v=>{const n={};for(let E in v)v[E]||(n[E]=`${E} is required!`);return n},I=()=>{const v=C({hostelUnit:t==null?void 0:t._id,applicationName:m.applicationName,batch:S==null?void 0:S._id});let n=!1;for(let E in v)if(E){n=!0;break}n?d(v):B(1)},x=v=>{y(v==null?void 0:v._id),B(2)},V=v=>{var n;v.target.name==="gr_initials"?((n=v.target.value)==null?void 0:n.length)<=10&&k(E=>({...E,[v.target.name]:v.target.value})):k(E=>({...E,[v.target.name]:v.target.value}))},R=v=>{u(3);const n={applicationName:m.applicationName,gr_initials:m.gr_initials,applicationBatch:S==null?void 0:S._id,applicationMaster:T==null?void 0:T._id,applicationUnit:t==null?void 0:t._id,direct_linked_structure:_,application_type:"Direct Admisison",...v};b({hid:l,new_Data:n}).then(()=>{a(),h(),u(0)}).catch({})};return e.jsxs(e.Fragment,{children:[f===0&&e.jsx(q,{onClose:s,children:e.jsxs("div",{className:p.seating_modal,children:[e.jsxs("section",{className:p.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:s,alt:""}),e.jsx("h6",{children:i("new_direct_hostel_application")})]}),e.jsx(W,{customStyle:{width:"100%"}}),e.jsx(A,{labelText:i("application_name"),placeholder:i("please_enter_application_name"),name:"applicationName",value:m==null?void 0:m.applicationName,type:"text",onChange:V,errorShow:c.applicationName}),e.jsx(G,{selectLabel:i("select_unit"),onClick:F,selectedValue:i("select_unit_placeholder"),options:(L==null?void 0:L.all_units)??[],errorShow:c.hostelUnit,openAs:"PROMOTE",viewAs:"ADMISSION_APPLICATION",defalutValue:t==null?void 0:t.hostel_unit_name}),e.jsx(G,{selectLabel:i("select_batch"),onClick:J,selectedValue:i("select_batch_placeholder"),options:(X=D==null?void 0:D.all_batches)!=null&&X.length?D==null?void 0:D.all_batches:[],errorShow:c.batch,openAs:"PROMOTE",viewAs:"ADMISSION_APPLICATION",defalutValue:S==null?void 0:S.batchName}),e.jsx(G,{selectLabel:i("select_standerd"),onClick:H,selectedValue:i("please_select_standerd"),options:(N==null?void 0:N.all_masters)??[],openAs:"PROMOTE",viewAs:"ADMISSION_APPLICATION",defalutValue:T==null?void 0:T.className}),e.jsx("button",{className:p.start_arrangement_btn,onClick:I,children:i("next")})]})}),f===1&&e.jsx(Ne,{onClose:()=>B(0),hostelId:l,asOpen:"HOSTEL_APPLICATION",onSelectedStudent:x,batchId:"",classMasterId:""}),f===2&&e.jsx(z,{onClose:()=>B(1),onCreateApplication:R,viewAs:"HOSTEL",isDirect:!0}),f===3&&e.jsx(K,{})]})},Ke=({viewAs:s,admissionId:l,setCreateApplication:a,setRefetchOngoining:h,hostelId:i})=>{const[f,u]=r.useState("");return e.jsx(e.Fragment,{children:f?f==="Direct_Admission"?s==="HOSTEL_MANAGER"?e.jsx(Oe,{hostelId:i,onClose:()=>a(c=>!c),setRefetchOngoining:h,onCloseParent:()=>a(c=>!c)}):e.jsx(De,{admissionId:l,onClose:()=>u(""),setRefetchOngoining:h,onCloseParent:()=>a(c=>!c)}):s==="HOSTEL_MANAGER"?e.jsx(Ce,{hostelId:i,onClose:()=>a(c=>!c),setRefetchOngoining:h}):e.jsx(ve,{admissionId:l,onClose:()=>u(""),onCloseParent:()=>a(c=>!c),setRefetchOngoining:h}):e.jsx(q,{onClose:()=>a(c=>!c),children:e.jsx(ue,{onClose:()=>a(c=>!c),setSelectedApplicationType:u})})})};export{We as A,Ke as C};
