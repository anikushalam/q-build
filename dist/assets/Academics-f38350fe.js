import{r as c,t as C,v,j as e,S as A,u as H,n as I,L as N}from"./index-731451a5.js";import{s as d,a as V}from"./AcademicDetail-b12ada4f.js";import{B as b}from"./BorderBottom-47800983.js";import{S,A as B}from"./SubjectDailyUpdateCard-6de260b7.js";import{E as $}from"./subject-api-215ccf27.js";import{E as P}from"./EmptyInfo-7233226d.js";const k=({sid:t,reftechStatus:i,setReftechStatus:m,isDepartment:o})=>{var w;const[r,_]=c.useState(!0),[l,E]=c.useState(1),[g,p]=C(),[n,h]=c.useState([]),[T,u]=c.useState(!0),{scrollToTop:f}=v(),{getAllDailySubject:s,getAllDailySubjectRefetch:x}=$({data:{sid:t,page:i?1:l,limit:10},skip:!t});c.useEffect(()=>{i&&(E(a=>1),m(!1),x())},[i]),c.useEffect(()=>{t&&(u(!0),x())},[t,l,x]),c.useEffect(()=>{f()},[f]),c.useEffect(()=>{p&&r&&E(a=>a+1)},[p,r]),c.useEffect(()=>{var a,j;s!=null&&s.dailyUpdate?(h(l===1?s==null?void 0:s.dailyUpdate:U=>[...new Set([...U,...s==null?void 0:s.dailyUpdate].map(JSON.stringify))].map(JSON.parse)),u(!1)):((a=s==null?void 0:s.dailyUpdate)==null?void 0:a.length)===0&&u(!1),((j=s==null?void 0:s.dailyUpdate)==null?void 0:j.length)===10?_(!0):_(!1)},[s==null?void 0:s.dailyUpdate]);const R=()=>{E(a=>1),u(!0),x()};return e.jsxs(e.Fragment,{children:[n==null?void 0:n.map((a,j)=>(n==null?void 0:n.length)===j+1?e.jsx("div",{ref:g,children:e.jsx(S,{daily:a,sid:t,onParentRefetch:R,isView:o?"STUDENT":""})},a==null?void 0:a._id):e.jsx(S,{daily:a,sid:t,onParentRefetch:R,isView:o?"STUDENT":""},a==null?void 0:a._id)),!T&&!((w=s==null?void 0:s.dailyUpdate)!=null&&w.length)&&e.jsx(P,{customStyleContainer:{marginTop:"9rem"},title:"No academics found yet."}),T&&e.jsx(A,{status:"white"})]})},G=({sid:t,carryParentState:i,isDepartment:m})=>{const{t:o}=H(),r=I(),[_,l]=c.useState(!1),[E,g]=c.useState(!1),[p,n]=c.useState(!1),h=()=>{l(f=>!f)},T=()=>{g(f=>!f)},u=()=>{n(!0)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:d.subject_academic_container,children:[e.jsxs("div",{className:d.subject_academic_title,children:[e.jsx("h6",{children:o("academics_teachings")}),e.jsx("div",{className:d.subject_academic_link,children:m==="CLASS_TEACHER"?e.jsx(N,{to:`/q/${r.username}/member/class/${r.cname}?a=subject-academic-detail`,state:{...i,subjectId:t,isView:"DEPARTMENT_HEAD"},children:e.jsx("h6",{className:d.add_record_lecture,style:{margin:"0"},children:o("view_academic_detail")})}):m==="DEPARTMENT_HEAD"?e.jsx(N,{to:`/q/${r.username}/member/department/${r.deptname}?a=subject-academic-detail`,state:{...i,subjectId:t,isView:"DEPARTMENT_HEAD"},children:e.jsx("h6",{className:d.add_record_lecture,style:{margin:"0"},children:o("view_academic_detail")})}):e.jsx(e.Fragment,{children:e.jsx(N,{to:`/q/${r.username}/member/subject/${r.sname}?a=subject-academic`,state:{...i,subjectId:t,isView:m?"DEPARTMENT_HEAD":"SUBJECT_TEACHER",isSubType:"SUBJECT_TEACHER_INSTITUTE"},children:e.jsx("h6",{className:d.add_record_lecture,style:{margin:"0"},children:o("view_academic_detail")})})})})]}),e.jsx(b,{customStyle:{width:"100%",marginTop:"0.7rem",marginBottom:"0.7rem"}}),m?null:e.jsx("div",{className:d.record_lecture,children:e.jsx("h6",{className:d.add_record_lecture,onClick:h,children:o("record_lecture_teachings")})}),_&&e.jsx(B,{onClose:h,sid:t,onRefetch:u}),E&&e.jsx(V,{onClose:T,sid:t}),e.jsx(k,{sid:t,reftechStatus:p,setReftechStatus:n,isDepartment:m})]})})};export{G as A};
