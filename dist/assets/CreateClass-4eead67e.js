import{u as X,r as i,ad as Z,o3 as C,a4 as ee,H as te,j as t,D as ce,e as ae}from"./index-0ca76035.js";/* empty css                   */import{L as se}from"./LoaderButton-56f541f9.js";import O from"./AssignStaffModal-e51a4441.js";import{S as E}from"./StringLength-ef31e6b8.js";import{M as le}from"./MarkValue-0c56875f.js";import"./search-api-b192a53f.js";import"./AssignStaffModal.module-a60b32e1.js";import"./StringLength.module-75a6e080.js";const ne="_DModal_leblo_1",oe="_title_leblo_8",re="_input_leblo_25",ie="_mid_leblo_63",ue="_text_leblo_77",ge="_btn_leblo_97",me="_notFound_leblo_134",pe="_item_leblo_138",_e="_select_leblo_153",he="_tooltip_leblo_179",je="_profileToolTip_leblo_187",xe="_triangle_leblo_200",fe="_triangleDisplay_leblo_210",Te="_profilelist_leblo_214",l={DModal:ne,title:oe,input:re,mid:ie,text:ue,btn:ge,notFound:me,item:pe,select:_e,tooltip:he,profileToolTip:je,triangle:xe,triangleDisplay:fe,profilelist:Te};function M({options:h,switchOption:j,customStyle:m}){return t.jsxs("div",{className:l.profileToolTip,style:{...m},children:[t.jsx("div",{className:l.triangle}),t.jsx("div",{className:l.profilelist,children:h==null?void 0:h.map((g,T)=>t.jsx("div",{value:g._id,onClick:()=>j(g),children:g.className},T))})]})}function Ae({departmentModal:h,hideModal:j,id:m,did:g,bid:T,edit:o,setEdit:P,editClass:e,onRefetch:F,isEditBy:S}){var A,I;const{t:s}=X(),[d,b]=i.useState(!1),[y,p]=i.useState(!0),[D,L]=i.useState(!1),[w,$]=i.useState(!1),[R,V]=i.useState([]),[q,U]=i.useState(!1),B=[{className:0},{className:1},{className:2},{className:3},{className:4},{className:5}],[Y,N]=i.useState(o&&(e==null?void 0:e.className)||s("select_standerd_")),[c,u]=i.useState({mcId:o&&(e==null?void 0:e.masterClassName)||"",classTitle:o&&(e==null?void 0:e.classTitle)||"",classHeadTitle:o&&(e==null?void 0:e.classHeadTitle)||"",sid:o&&((A=e==null?void 0:e.classTeacher)==null?void 0:A._id)||"",aggregatePassingPercentage:o&&((I=e==null?void 0:e.finalReportsSettings)==null?void 0:I.aggregatePassingPercentage)||"",optionalSubjectCount:o&&(e==null?void 0:e.optionalSubjectCount)||s("select_number_of_subject")}),[v,f]=i.useState(!1),[n,x]=i.useState(o&&(e==null?void 0:e.classTeacher)),{allClassMaster:_}=Z({data:{id:m,did:g},skip:m?!g:!m}),[z]=C(),[G]=ee(),{oneDepartmentRefetch:H}=te({did:g,skip:!g});i.useEffect(()=>{var a,r;o&&e&&(u({mcId:(e==null?void 0:e.masterClassName)||"",classTitle:(e==null?void 0:e.classTitle)||"",classHeadTitle:(e==null?void 0:e.classHeadTitle)||"",sid:((a=e==null?void 0:e.classTeacher)==null?void 0:a._id)||"",aggregatePassingPercentage:((r=e==null?void 0:e.finalReportsSettings)==null?void 0:r.aggregatePassingPercentage)||0,optionalSubjectCount:(e==null?void 0:e.optionalSubjectCount)||s("select_number_of_subject")}),N((e==null?void 0:e.className)||"Please select standard"),x(e==null?void 0:e.classTeacher))},[o,e]),i.useEffect(()=>{_!=null&&_.classMaster&&V(_==null?void 0:_.classMaster)},[_]);const J=a=>{N(a.className),u({...c,mcId:a._id}),p(!0)},K=a=>{u({...c,optionalSubjectCount:a.className}),p(!0)},k=a=>{x(a),u({...c,sid:a._id}),p(!0)},Q=()=>{var a;if(c.mcId&&c.classTitle&&c.classHeadTitle)if(b(!0),!o)z({classCreate:{mcId:c.mcId,classTitle:c.classTitle,classHeadTitle:c.classHeadTitle,sid:c.sid,aggregatePassingPercentage:c.aggregatePassingPercentage||0,optionalSubjectCount:c.optionalSubjectCount===s("select_number_of_subject")?0:+c.optionalSubjectCount},id:m,did:g,bid:T}).then(()=>{j(!1),b(!1),H(),u({mcId:"",classTitle:"",classHeadTitle:"",sid:"",aggregatePassingPercentage:0,optionalSubjectCount:"Please select no. of subjects one can choose"}),x("")}).catch({});else{const r={mcId:c.mcId,classTitle:(e==null?void 0:e.classTitle)===c.classTitle?"":c.classTitle,classHeadTitle:(e==null?void 0:e.classHeadTitle)===c.classHeadTitle?"":c.classHeadTitle,classTeacher:((a=e==null?void 0:e.classTeacher)==null?void 0:a._id)===c.sid?"":c.sid,aggregatePassingPercentage:+c.aggregatePassingPercentage,optionalSubjectCount:c.optionalSubjectCount===s("select_number_of_subject")?0:+c.optionalSubjectCount};G({classDetail:r,cid:e==null?void 0:e._id}).then(()=>{j(!1),b(!1),P(!1),H(),S==="DEPARTMENT_HEAD"&&F(),u({mcId:"",classTitle:"",classHeadTitle:"",sid:"",aggregatePassingPercentage:0,optionalSubjectCount:s("select_number_of_subject")}),x("")}).catch({})}else p(!1)},W=()=>{j(!1),P(!1),N(s("select_standerd_")),u({mcId:"",classTitle:"",classHeadTitle:"",sid:"",aggregatePassingPercentage:0,optionalSubjectCount:s("select_number_of_subject")}),x("")};return t.jsxs(t.Fragment,{children:[t.jsx(ce,{open:h,children:t.jsxs("div",{className:l.DModal,children:[t.jsxs("div",{className:l.title,children:[o?t.jsx("h5",{children:"Edit Class"}):t.jsx("h5",{children:s("add_class_n_place")}),t.jsx("img",{src:"/images/close-post-icon.svg",alt:"",onClick:W})]}),t.jsx("div",{hidden:y,className:l.notFound,children:"Please Fill all details to create a Class"}),t.jsxs("div",{className:l.item,onClick:()=>L(!D),children:[t.jsx("h6",{children:s("select_standard_grade_place")}),t.jsxs("div",{className:l.select,children:[t.jsx("p",{children:Y}),t.jsx("img",{src:"/images/select-icon.svg",alt:""})]}),D&&t.jsx("div",{className:l.tooltip,children:t.jsx(M,{options:R,switchOption:J})})]}),t.jsxs("div",{className:l.input,children:[t.jsx("h6",{children:s("class_name")}),t.jsx("input",{type:"text",value:c.classTitle,onChange:a=>{var r;((r=a.target.value)==null?void 0:r.length)<=45&&(u({...c,classTitle:a.target.value}),p(!0))},placeholder:"e.g. 6th A / FY BSC",required:!0}),t.jsx(E,{maxLength:45,valueLength:c.classTitle})]}),t.jsxs("div",{className:l.mid,onClick:()=>f(!0),children:[t.jsx("img",{src:n!=null&&n.staffProfilePhoto?`${ae}/${n.staffProfilePhoto}`:"/images/avatar-icon.png",alt:""}),t.jsxs("div",{className:l.text,children:[t.jsx("h6",{children:n?`${n==null?void 0:n.staffFirstName} ${(n==null?void 0:n.staffMiddleName)||""} ${n==null?void 0:n.staffLastName}`:`${s("assign_chead")} ${s("optional")}`}),t.jsx("p",{children:s("search_from_joined_list")})]})]}),t.jsxs("div",{className:l.input,children:[t.jsx("h6",{children:s("give_chead_title")}),t.jsx("input",{type:"text",value:c.classHeadTitle,onChange:a=>{var r;((r=a.target.value)==null?void 0:r.length)<=40&&(u({...c,classHeadTitle:a.target.value}),p(!0))},required:!0,placeholder:s("class_head_example")}),t.jsx(E,{maxLength:40,valueLength:c.classHeadTitle})]}),t.jsxs("div",{className:l.input,children:[t.jsxs("h6",{children:[s("pass_percentage")," ",s("optional")]}),t.jsx("input",{type:"text",value:c.aggregatePassingPercentage,onChange:a=>{+a.target.value<=100?(u({...c,aggregatePassingPercentage:+a.target.value}),p(!0)):U(!0)},placeholder:"E.g. 34"}),q&&t.jsx(le,{message:"Mark is not greater than 100"})]}),t.jsxs("div",{className:l.item,onClick:()=>$(a=>!a),children:[t.jsx("h6",{children:s("optional_subject")}),t.jsxs("div",{className:l.select,children:[t.jsx("p",{children:c.optionalSubjectCount}),t.jsx("img",{src:"/images/select-icon.svg",alt:""})]}),w&&t.jsx("div",{className:l.tooltip,children:t.jsx(M,{customStyle:{top:"561px",right:"-51px"},options:B,switchOption:K})})]}),t.jsxs("button",{className:l.btn,onClick:Q,disabled:d,children:[o?t.jsx("p",{children:"Update"}):t.jsx("p",{children:s("create")}),d&&t.jsx("div",{children:t.jsx(se,{})})]})]})}),v&&(S==="DEPARTMENT_HEAD"?t.jsx(O,{assignHead:v,headSelect:a=>{k(a),f(r=>!r)},title:s("assign_chead"),onClose:()=>f(a=>!a),instituteId:m,viewAs:"ADMISSION_ADMIN"}):t.jsx(O,{assignHead:v,headSelect:k,title:s("assign_chead"),onClose:()=>f(a=>!a)}))]})}export{Ae as default};
