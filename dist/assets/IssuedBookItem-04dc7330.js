import{u as q,j as e,e as v,a1 as w,r as j,D as T,T as y,i as C,Q as D}from"./index-0ca76035.js";import{v as R}from"./library-api-cd2cf9e9.js";import"./LoaderButton-56f541f9.js";import{S as L}from"./Switch-4bb87998.js";const S="_searchContainerr_1ur8q_2",F="_searchContainer_1ur8q_2",Y="_newBtn_1ur8q_37",k="_remainingFees_1ur8q_54",O="_remainingFeesBottom_1ur8q_60",A="_itemsContainer_1ur8q_64",E="_collctLogItem_1ur8q_72",P="_bookItemImg_1ur8q_83",z="_collectLogItemTopRight_1ur8q_87",Q="_collectLogItemTop_1ur8q_87",U="_collectLogItemBottom_1ur8q_143",G="_collectLogItemBottomleft_1ur8q_150",V="_fullwidth_1ur8q_171",H="_itemsRef_1ur8q_175",J="_loader_1ur8q_179",K="_noData_1ur8q_189",W="_disabled_1ur8q_198",_={searchContainerr:S,searchContainer:F,newBtn:Y,remainingFees:k,remainingFeesBottom:O,itemsContainer:A,collctLogItem:E,bookItemImg:P,collectLogItemTopRight:z,collectLogItemTop:Q,collectLogItemBottom:U,collectLogItemBottomleft:G,fullwidth:V,itemsRef:H,loader:J,noData:K,disabled:W};function We({status:g,book:t}){var s,a,c,r,m,h,p,d;const{t:u}=q();return e.jsx("div",{className:g==="memberdetail"?`${_.collctLogItem} ${_.fullwidth}`:g==="memberStudentdetail"?`${_.collctLogItem} ${_.disabled}`:_.collctLogItem,children:e.jsxs("div",{className:_.collectLogItemTop,children:[e.jsx("img",{className:_.bookItemImg,src:((s=t==null?void 0:t.book)==null?void 0:s.photoId)!=="1"&&((a=t==null?void 0:t.book)==null?void 0:a.photo)!==""?`${v}/${(c=t==null?void 0:t.book)==null?void 0:c.photo}`:"/images/defaultBook.png"}),e.jsxs("div",{className:_.collectLogItemTopRight,children:[e.jsxs("h6",{children:[" ",((m=(r=t==null?void 0:t.book)==null?void 0:r.bookName)==null?void 0:m.length)>=18?`${(p=(h=t==null?void 0:t.book)==null?void 0:h.bookName)==null?void 0:p.match(/.{1,18}/g)[0]} ...`:(d=t==null?void 0:t.book)==null?void 0:d.bookName]}),e.jsxs("div",{className:_.collectLogItemBottom,children:[e.jsxs("div",{className:_.collectLogItemBottomleft,children:[e.jsx("p",{children:u("issue_date")}),e.jsx("h6",{children:w(t==null?void 0:t.issuedDate).format("Do MMM YYYY")})]}),e.jsxs("div",{className:_.collectLogItemBottomleft,children:[e.jsx("p",{children:u("rcv_date")}),e.jsx("h6",{children:w(t==null?void 0:t.createdAt).format("Do MMM YYYY")})]})]})]})]})})}const X="_searchContainerr_49qgn_2",Z="_searchContainer_49qgn_2",b="_newBtn_49qgn_37",ee="_remainingFees_49qgn_54",te="_remainingFeesBottom_49qgn_60",se="_itemsContainer_49qgn_64",oe="_itemsRef_49qgn_72",ne="_issuedBookItem_49qgn_78",le="_issuedBookItemTop_49qgn_87",ae="_issuedBookItemTopleft_49qgn_95",ce="_issuedBookItemTopright_49qgn_99",ie="_author_49qgn_108",de="_bookItemImg_49qgn_120",re="_title_49qgn_123",_e="_authorLabel_49qgn_135",me="_booklang_49qgn_148",he="_issuedBookItemMid_49qgn_161",ge="_issuedBookItemMidleft_49qgn_168",ue="_imgcontainer_49qgn_170",pe="_issuedBookItemMidright_49qgn_185",Ie="_issuedBookItemBottomLeft_49qgn_186",fe="_issuedBookItemBottom_49qgn_186",Be="_collectbtn_49qgn_226",xe="_fullwidth_49qgn_239",je="_loader_49qgn_243",Ne="_noData_49qgn_253",l={searchContainerr:X,searchContainer:Z,newBtn:b,remainingFees:ee,remainingFeesBottom:te,itemsContainer:se,itemsRef:oe,issuedBookItem:ne,issuedBookItemTop:le,issuedBookItemTopleft:ae,issuedBookItemTopright:ce,author:ie,bookItemImg:de,title:re,authorLabel:_e,booklang:me,issuedBookItemMid:he,issuedBookItemMidleft:ge,imgcontainer:ue,issuedBookItemMidright:pe,issuedBookItemBottomLeft:Ie,issuedBookItemBottom:fe,collectbtn:Be,fullwidth:xe,loader:je,noData:Ne},qe="_collectModal_htrbt_1",ve="_collectModaltop_htrbt_5",we="_collectModalbody_htrbt_14",Ce="_swichRow_htrbt_21",Le="_swichRowlabel_htrbt_28",Me="_input_label_htrbt_29",$e="_inputt_htrbt_40",Te="_formselect_htrbt_48",ye="_input_border_active_htrbt_63",De="_formselectactive_htrbt_67",Re="_genderh_htrbt_71",Se="_genderplaceholder_htrbt_80",Fe="_upIcon_htrbt_84",Ye="_downIcon_htrbt_91",ke="_input_labelsmall_htrbt_102",Oe="_confirmbtn_htrbt_113",Ae="_errorspan_htrbt_136",o={collectModal:qe,collectModaltop:ve,collectModalbody:we,swichRow:Ce,swichRowlabel:Le,input_label:Me,inputt:$e,formselect:Te,input_border_active:ye,formselectactive:De,genderh:Re,genderplaceholder:Se,upIcon:Fe,downIcon:Ye,input_labelsmall:ke,confirmbtn:Oe,errorspan:Ae},Ee="_options_1q5km_1",Pe="_option_1q5km_1",M={options:Ee,option:Pe},ze={position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10},Qe={position:"absolute",left:"0",top:"-3.9rem",zIndex:10};function Ue({open:g,onClose:t,setFormData:u,formData:s}){const a=["Offline","Online"];return q(),g?e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:t,style:ze}),e.jsx("div",{style:Qe,className:M.options,children:a.map((c,r)=>e.jsx("div",{className:M.option,onClick:()=>{u({...s,paymentType:c}),t()},children:c},r))})]}):null}const $={inputProps:{"aria-label":"Switch demo"}};function Ge({open:g,hideModal:t,issueId:u,onRefetchWhenBookCollect:s}){const{t:a}=q(),[c,r]=j.useState(!1),[m,h]=j.useState(!1),[p]=R(),[d,f]=j.useState({damaged:!1,lost:!1}),[i,I]=j.useState({enterAmount:!1,fineCharge:0,paymentType:"Offline"}),B=n=>{n.name==="Damaged"?f(x=>({...x,damaged:n.value,lost:!1})):f(x=>({...x,damaged:!1,lost:n.value}))},N=()=>{i.fineCharge===0?I(n=>({...n,enterAmount:!0})):(r(n=>!n),p({lid:u,collectData:{chargeBy:d.damaged?"Damaged":d.lost?"Lost":"",paymentType:i.paymentType,fineCharge:i.fineCharge}}).then(()=>{s(),t(!1),r(n=>!n)}).catch(()=>{r(n=>!n)}))};return e.jsxs(T,{open:g,onClose:()=>t(!1),children:[e.jsxs("div",{className:o.collectModal,children:[e.jsx("div",{className:o.collectModaltop,children:a("collect_book")}),e.jsxs("div",{className:o.collectModalbody,children:[e.jsxs("div",{className:o.swichRow,children:[e.jsx("p",{className:o.swichRowlabel,children:a("damaged")}),e.jsx(L,{...$,checked:d.damaged,onClick:n=>B({name:"Damaged",value:n.target.checked})})]}),e.jsxs("div",{className:o.swichRow,children:[e.jsx("p",{className:o.swichRowlabel,children:a("lost")}),e.jsx(L,{...$,checked:d.lost,onClick:n=>B({name:"Lost",value:n.target.checked})})]}),i.enterAmount&&e.jsx("p",{className:o.errorspan,children:a("charg_reason")}),(d.damaged||d.lost)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:o.inputt,children:e.jsx(y,{type:"number",placeholder:a("enter_damage_amount"),label:a("enter_damage_fine"),value:i.fineCharge,handleChange:n=>I({...i,fineCharge:parseInt(n.target.value)}),customStyleInput:{width:"100%",padding:"0.6rem"}})}),e.jsxs("div",{className:o.inputt,children:[e.jsx("h3",{className:o.input_label,children:a("collection_type")}),e.jsx("p",{className:o.input_labelsmall,children:a("cheque_note")}),e.jsxs("div",{className:m?`${o.formselectactive} ${o.formselect}`:o.formselect,onClick:()=>h(!m),children:[i.paymentType&&i.paymentType!==""?e.jsx("h6",{className:o.genderh,onClick:()=>h(!0),children:i.paymentType}):e.jsx("h6",{className:`${o.genderplaceholder} ${o.genderh}`,onClick:()=>h(!0),children:a("select_payment_mode")}),m?e.jsx("img",{className:`${o.updownIcon} ${o.downIcon}`,src:`${C}/up-triangle-icon.svg`,alt:""}):e.jsx("img",{className:o.upIcon,src:`${C}/downn-icon.svg`,alt:""}),e.jsx(Ue,{open:m,onClose:()=>h(!1),setFormData:I,formData:i})]})]})]}),e.jsx("button",{disabled:c,className:o.confirmbtn,onClick:N,children:a("confirm")})]})]}),c&&e.jsx(D,{})]})}function Xe({status:g,book:t,issueId:u,member:s,onRefetchWhenBookCollect:a}){var h,p,d,f,i,I,B,N,n;const{t:c}=q(),[r,m]=j.useState(!1);return e.jsxs("div",{className:g==="memberdetail"?`${l.issuedBookItem} ${l.fullwidth}`:l.issuedBookItem,children:[e.jsxs("div",{className:l.issuedBookItemTop,children:[e.jsx("div",{className:l.issuedBookItemTopleft,children:e.jsx("img",{className:l.bookItemImg,src:(h=t==null?void 0:t.book)!=null&&h.photo?`${v}/${(p=t==null?void 0:t.book)==null?void 0:p.photo}`:"/images/defaultBook.png"})}),e.jsxs("div",{className:l.issuedBookItemTopright,children:[e.jsx("h6",{className:l.title,children:((f=(d=t==null?void 0:t.book)==null?void 0:d.bookName)==null?void 0:f.length)>=18?`${(I=(i=t==null?void 0:t.book)==null?void 0:i.bookName)==null?void 0:I.match(/.{1,18}/g)[0]} ...`:(B=t==null?void 0:t.book)==null?void 0:B.bookName}),e.jsxs("p",{className:l.author,children:[(N=t==null?void 0:t.book)==null?void 0:N.author," Â ",e.jsx("span",{className:l.authorLabel,children:c("author")})]}),e.jsxs("p",{className:l.booklang,children:[" ",(n=t==null?void 0:t.book)==null?void 0:n.language]})]})]}),e.jsxs("div",{className:l.issuedBookItemMid,children:[e.jsx("div",{className:l.issuedBookItemMidleft,children:e.jsx("div",{className:l.imgcontainer,children:e.jsx("img",{src:(s==null?void 0:s.photoId)!=="1"?`${v}/${s==null?void 0:s.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:""})})}),e.jsxs("div",{className:l.issuedBookItemMidright,children:[e.jsxs("h6",{children:[" ",`${s==null?void 0:s.studentFirstName} ${s!=null&&s.studentMiddleName?s==null?void 0:s.studentMiddleName:""} ${s==null?void 0:s.studentLastName}`]}),e.jsxs("p",{children:[c("gr_no")," ",s==null?void 0:s.studentGRNO," "]})]})]}),e.jsxs("div",{className:l.issuedBookItemBottom,children:[e.jsxs("div",{className:l.issuedBookItemBottomLeft,children:[e.jsxs("p",{children:[c("issue_date"),":"]}),e.jsx("h6",{children:w(t==null?void 0:t.createdAt).format("Do MMM YYYY")})]}),g!=="studentMemberDetail"&&e.jsx("div",{className:l.collectbtn,onClick:()=>m(!0),children:c("collect")})]}),r&&e.jsx(Ge,{open:r,hideModal:x=>{m(x)},issueId:u,onRefetchWhenBookCollect:a})]})}export{We as C,Xe as I,l as a,_ as s};
