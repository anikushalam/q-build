import{u as O,r as d,t as y,R as l,k as R,l as F,j as t,D as H,e as A}from"./index-731451a5.js";import{o as U}from"./search-api-15f7f9f9.js";import{s as f}from"./AssignStaffModal.module-a60b32e1.js";const V=window.innerHeight,q=i=>{var n,r;for(let c=0;c<(i==null?void 0:i.length);c++)for(let a=c+1;a<(i==null?void 0:i.length);a++)((n=i[c])==null?void 0:n._id)===((r=i[a])==null?void 0:r._id)&&(i==null||i.splice(a,1));return i},z=({onClose:i,title:n,headSelect:r,assignHead:c,disabledId:a,instituteId:p,viewAs:g})=>{const{t:x}=O(),[j,w]=d.useState(1),[N,b]=d.useState(!0),[C,k]=y(),[m,P]=d.useState(""),[h,M]=l.useState([]),o=R(s=>s.idChange),{assignSearchStaff:e,assignSearchStaffRefetch:_}=U({skip:g==="ADMISSION_ADMIN"?!p:!(o!=null&&o.id),search:{search:m,page:j,id:g==="ADMISSION_ADMIN"?p:o==null?void 0:o.id,limit:10}});l.useEffect(()=>{o!=null&&o.id&&_()},[o==null?void 0:o.id,_,j]),d.useEffect(()=>{k&&N&&w(s=>s+1)},[k,N]),l.useEffect(()=>{e!=null&&e.staff&&M(m?e==null?void 0:e.staff:s=>q([...s,...e==null?void 0:e.staff])),(e==null?void 0:e.staff.length)===10?b(!0):b(!1)},[e==null?void 0:e.staff]),d.useEffect(()=>{m&&D()},[m]);const D=()=>{_()},E=d.useCallback(F.debounce(s=>P(s),500),[]),I=s=>{E(s)},$=s=>{a===(s==null?void 0:s._id)||(r(s),g==="ADMISSION_ADMIN"||i())};return t.jsx(H,{open:c,onClose:i,children:t.jsxs("div",{style:{backgroundColor:"#FAFAFA",width:"35rem",height:`${V-20}px`,overflowX:"hidden"},children:[t.jsxs("div",{className:f.assign_title,style:{width:"100%"},children:[t.jsx("h5",{children:n}),t.jsx("img",{src:"/images/close-post-icon.svg",onClick:i,alt:"staff assign pop close icon"})]}),t.jsxs("div",{className:f.assign_search_container,children:[t.jsx("input",{type:"text",placeholder:x("search"),className:f.assign_search_input,onChange:s=>I(s.target.value)}),t.jsx("img",{src:"/images/search-dash-icon.svg",alt:"search icon"})]}),t.jsx("div",{className:f.assign_show_list,children:h==null?void 0:h.map((s,L)=>(h==null?void 0:h.length)===L+1?t.jsxs("div",{ref:C,children:[t.jsxs("div",{className:f.assign_show_list_each,style:a===s._id?{backgroundColor:"rgba(75, 26, 133, 0.1)"}:{backgroundColor:"inherit"},onClick:()=>$(s),children:[t.jsx("img",{src:s!=null&&s.staffProfilePhoto?`${A}/${s.staffProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),t.jsxs("div",{className:f.assign_each_paragraph,children:[t.jsx("h6",{children:`${s.staffFirstName} ${s!=null&&s.staffMiddleName?s==null?void 0:s.staffMiddleName:""} ${s.staffLastName}`}),t.jsxs("p",{children:[" ",x("index")," ",s==null?void 0:s.staffROLLNO]})]})]}),t.jsx("hr",{})]},s._id):t.jsxs("div",{children:[t.jsxs("div",{className:f.assign_show_list_each,style:a===s._id?{backgroundColor:"rgba(75, 26, 133, 0.1)"}:{backgroundColor:"inherit"},onClick:()=>$(s),children:[t.jsx("img",{src:s!=null&&s.staffProfilePhoto?`${A}/${s.staffProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),t.jsxs("div",{className:f.assign_each_paragraph,children:[t.jsx("h6",{children:`${s.staffFirstName} ${s!=null&&s.staffMiddleName?s==null?void 0:s.staffMiddleName:""} ${s.staffLastName}`}),t.jsxs("p",{children:[" ",x("index")," ",s==null?void 0:s.staffROLLNO]})]})]}),t.jsx("hr",{})]},s._id))})]})})};export{z as default};
