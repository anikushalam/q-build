import{u as h,n as w,R as A,j as s,G as I,o as b,e as M,p,b as L,d as T,k as H,q as $,r as R,s as E}from"./index-0ca76035.js";import{s as x}from"./InsFinance.module-24741212.js";import{s as _,C}from"./CommonLinkTab-347118f4.js";import{C as F}from"./CustomSuspense-25f8db15.js";import U from"./LibraryModal-5f6518a7.js";import{u as B}from"./library-api-cd2cf9e9.js";import{A as V,L as q}from"./LibrarySiteInfo-c7cbcf28.js";import"./LibraryModal.module-13078745.js";import"./ButtonWithAction-aaeab9a0.js";import"./LoaderButton-56f541f9.js";import"./Divider-2f807990.js";import"./LibraryBookCard-77f4a0ab.js";import"./JoinFormInput-82706177.js";import"./JoinForm.module-212f9bb3.js";import"./CustomNormalSelectInput-0a62fa3f.js";import"./JoinFormTextArea-394bf055.js";import"./JoinFormFileEdit-10928ae7.js";import"./ViewFileDialog-f7d48575.js";import"./Overlay-c8100e0a.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalBackdrop-c4f123e6.js";import"./SearchHeader.module-b69c8942.js";import"./BorderBottom-1dc6f53e.js";function G({username:t,library:e,libraryRefetch:d}){var c,u,m,f;const{t:n}=h(),o=w(),[l,i]=A.useState(!1);return s.jsxs("div",{style:{position:"sticky",top:"77px",height:"fit-content",width:"30%"},children:[s.jsx(I,{linkType:!0,linkUrl:`/q/${t}/feed`}),s.jsx(b,{dynamicImage:e!=null&&e.cover?`${M}/${e==null?void 0:e.cover}`:"/images/profileAndCover/library-cover.png",edit:!0,onEditAction:()=>i(!0),redirectUrl:`/q/${o.username}/library?a=site`,isSiteInfo:"LIBRARY",carryParentState:{lid:e==null?void 0:e._id}}),s.jsx(p,{cardAsHead:!0,heading:` ${((c=e==null?void 0:e.libraryHead)==null?void 0:c.staffFirstName)||""} ${(u=e==null?void 0:e.libraryHead)!=null&&u.staffMiddleName?(m=e==null?void 0:e.libraryHead)==null?void 0:m.staffMiddleName:""} ${((f=e==null?void 0:e.libraryHead)==null?void 0:f.staffLastName)||""}`,description:n("librarian"),customStyleCard:{borderRadius:"1rem 1rem 0 0",border:"none",marginTop:"-1.49vw"}}),s.jsx(p,{cardAsHead:!1,heading:n("books"),description:n("total_books"),count:(e==null?void 0:e.bookCount)||0}),s.jsx(p,{cardAsHead:!1,heading:n("members"),description:n("total_members"),count:(e==null?void 0:e.memberCount)||0,customStyleCard:{borderRadius:"0 0 12px 12px",borderBottom:"0.4px solid rgba(0, 0, 0, 0.15)"}}),s.jsx(F,{children:s.jsx(U,{libraryModal:l,hideModal:()=>i(!1),edit:!0,librarian:e==null?void 0:e.libraryHead,onParentRefetch:d})})]})}const O="_funds_1jrw5_1",Q="_funds2_1jrw5_9",Y="_fundshead_1jrw5_12",z="_fundscontent_1jrw5_36",J="_sidebarbottomitem_1jrw5_47",K="_namee_1jrw5_62",W="_dueActive_1jrw5_73",X="_desig_1jrw5_78",Z="_balanceItem_1jrw5_89",a={funds:O,funds2:Q,fundshead:Y,fundscontent:z,sidebarbottomitem:J,namee:K,dueActive:W,desig:X,balanceItem:Z};function j({bal:t,value:e,check:d}){return s.jsxs("div",{className:a.balanceItem,children:[s.jsxs("p",{children:[t,":"]}),s.jsxs("p",{children:["Rs. ",e]})]})}function P({library:t}){const{t:e}=h();return s.jsxs("div",{className:a.funds,children:[s.jsxs("div",{className:a.fundshead,children:[s.jsxs("h6",{children:[" ",e("library_fine")," "]}),s.jsx("img",{src:"/images/finance/filter-icon.svg",alt:""})]}),s.jsxs("div",{className:a.fundscontent,children:[s.jsxs("div",{className:a.sidebarbottomitem,children:[s.jsx("img",{alt:"not found",src:"/images/finance/doller-icon.svg"}),s.jsxs("div",{children:[s.jsxs("p",{className:a.namee,children:["Rs. ",t==null?void 0:t.totalFine," "]}),s.jsx("p",{className:a.desig,children:e("total_fine")})]})]}),s.jsx(j,{check:"false",bal:e("cash_fine"),value:t==null?void 0:t.offlineFine}),s.jsx(j,{check:"false",bal:e("bank_fine"),value:t==null?void 0:t.onlineFine}),s.jsx(j,{check:"true",bal:e("cash_lib"),value:t==null?void 0:t.collectedFine})]})]})}const D=({carryParentState:t,library:e})=>{const{t:d}=h(),[n]=L();return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:_.finance_tab_tabs,children:[s.jsx(C,{tabLevel:d("all_books"),customStyleContainer:{width:"50%",marginRight:"2px",borderTopLeftRadius:"6px"},customStyleLevel:{borderTopLeftRadius:"6px"},tabValue:"book",currentValue:(n==null?void 0:n.get("a"))==="book"?"book":"other",carryParentState:t,activeUrl:"library?a=book"}),s.jsx(C,{tabLevel:d("funds"),customStyleContainer:{width:"50%",borderTopRightRadius:"6px"},customStyleLevel:{borderTopLeftRadius:"6px"},tabValue:"fund",currentValue:(n==null?void 0:n.get("a"))==="fund"?"fund":"other",carryParentState:t,activeUrl:"library?a=fund"})]}),(n==null?void 0:n.get("a"))==="fund"?s.jsx(P,{library:e}):null]})};function y(){var u,m,f,v,g,k,N;const t=w(),[e]=L(),d=T(),n=H(r=>r.idChange.id),{oneInstituteDashboard:o,oneInstituteDashboardRefetch:l}=$({id:n,skip:!n});R.useEffect(()=>{n&&l()},[n,l]);const{getLibraryDetail:i,getLibraryDetailRefetch:c}=B({lid:(m=(u=o==null?void 0:o.institute)==null?void 0:u.library)==null?void 0:m[0],skip:!((v=(f=o==null?void 0:o.institute)==null?void 0:f.library)!=null&&v[0])});return R.useEffect(()=>{var r,S;(S=(r=o==null?void 0:o.institute)==null?void 0:r.library)!=null&&S[0]&&c()},[(k=(g=o==null?void 0:o.institute)==null?void 0:g.library)==null?void 0:k[0],c]),s.jsxs("div",{className:_.main,children:[s.jsx(G,{username:t.username,library:i==null?void 0:i.library,libraryRefetch:c}),s.jsxs("div",{className:_.finance_container,children:[e!=null&&e.get("n")?null:((e==null?void 0:e.get("a"))==="book"||(e==null?void 0:e.get("a"))==="fund")&&s.jsx(D,{carryParentState:d.state,library:i==null?void 0:i.library}),(e==null?void 0:e.get("a"))==="book"&&s.jsx(V,{carryParentState:d.state,libraryId:(N=i==null?void 0:i.library)==null?void 0:N._id,pageOpenAs:"INSTITUTE"})]})]})}function Se(){var e,d;const t=T();return s.jsxs("div",{className:x.bgContainer,children:[s.jsx("div",{className:x.navbar,children:s.jsx(E,{status:"home"})}),((e=t.search)==null?void 0:e.substring(3))==="site"?s.jsx(q,{lid:(d=t.state)==null?void 0:d.lid,viewAs:"INSTITUTE"}):s.jsx("div",{className:x.editContainer,children:s.jsx(y,{})})]})}export{Se as default};
