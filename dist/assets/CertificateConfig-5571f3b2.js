import{u as j,d as w,n as F,j as e,L as q,r as p,Q as V,t as T,S as E,b as k,q as $,R as L,lw as U}from"./index-0ca76035.js";import{s as b}from"./PromoteDepartment.module-1bdd3b1d.js";import{s as x}from"./Tabs.module-5d07bc0d.js";import{A as B}from"./AllStudent-ee29de43.js";import{S as D}from"./StudentMessageHistory-7e206bf8.js";import{aA as O,aB as R}from"./department-api-e4b13f05.js";import{J as v}from"./JoinFormInput-82706177.js";import{U as J}from"./UniversalTab-73e7f63a.js";import{B as Q}from"./BorderBottom-1dc6f53e.js";import{C as S}from"./CertificateCard-8f5293ed.js";import"./AdmissionScholarship.module-d4281c11.js";import"./institute-staff-student-api-7114d611.js";import"./export-data-api-674b559b.js";import"./EmptyInfo-dd58cebb.js";import"./admission-api-925391d9.js";import"./AllStudentFilter-af77389c.js";import"./PopupWrapper-2578092d.js";import"./Overlay-c8100e0a.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalWrapper-0fa3f9a3.js";import"./SearchModalBackdrop-c4f123e6.js";import"./SearchHeader.module-b69c8942.js";import"./FeesStructure.module-7a88fbbc.js";import"./constant_value-4cd2b3e0.js";import"./CustomSelectDepartment-11201deb.js";import"./JoinForm.module-212f9bb3.js";import"./SendFilterStudentMessage-e0daf41f.js";import"./JoinFormTextArea-394bf055.js";import"./AdmissionApplicationRequest.module-43e4e129.js";import"./History.module-4b700312.js";import"./ReminderMessageStudentList-c2ed7cf8.js";import"./OsReminderStudentCard-1fa8be04.js";import"./InstituteHostel.module-b6b254cc.js";import"./BonafideReason-170cf76d.js";import"./pdf-convertor-function-4fe9e778.js";import"./main.certificate.pdf.worker-fdc20546.js";import"./numberToWords.min-081ca735.js";function Y({carryParentState:s}){var r,o;const{t:n}=j(),i=w(),t=F();return e.jsx("div",{className:x.mcqTop,style:{padding:"0"},children:e.jsxs("div",{className:x.mcqToptabs,children:[e.jsx(q,{to:`/q/${t.username}/member/certificate`,state:s,className:i.search?x.mcqTopItem:`${x.mcqTopItem} ${x.active}`,children:e.jsx("div",{children:n("all_students")})}),e.jsx(q,{to:`/q/${t.username}/member/certificate?a=request&n=request`,state:s,className:((r=i.search)==null?void 0:r.substring(3,10))==="request"?`${x.mcqTopItem} ${x.active}`:x.mcqTopItem,children:e.jsx("div",{children:n("request")})}),e.jsx(q,{to:`/q/${t.username}/member/certificate?a=fund`,state:s,className:((o=i.search)==null?void 0:o.substring(3))==="fund"?`${x.mcqTopItem} ${x.active}`:x.mcqTopItem,children:e.jsx("div",{children:n("fund")})})]})})}const H=({instituteId:s,fundCharges:n,onRefetch:i,issuedCOunt:t})=>{const{t:r}=j(),[o,h]=p.useState({bona_charges:"",leaving_charges:"",transfer_charges:"",migration_charges:""}),[g,_]=p.useState(!1),[m]=O();p.useEffect(()=>{n&&h({bona_charges:(n==null?void 0:n.bona_charges)??"",leaving_charges:(n==null?void 0:n.leaving_charges)??"",transfer_charges:(n==null?void 0:n.transfer_charges)??"",migration_charges:(n==null?void 0:n.migration_charges)??""})},[n]);const d=u=>{h(c=>({...c,[u.target.name]:+u.target.value}))},a=()=>{s&&(_(u=>!u),m({id:s,certificateFund:o}).then(()=>{i(),_(u=>!u)}).catch({}))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:b.with_search,style:{marginTop:"1rem"},children:[e.jsx("h6",{children:r("certificate_fund")}),e.jsxs("h6",{style:{fontWeight:"400",fontSize:"13px"},children:[r("total_certificate_issue")," ",t]})]}),e.jsx(v,{labelText:r("bonafide_certificate_charges"),placeholder:r("bonafide_certificate_charges_placeholder"),name:"bona_charges",value:o==null?void 0:o.bona_charges,type:"tel",onChange:d}),e.jsx(v,{labelText:r("leaving_certificate_charges"),placeholder:r("leaving_certificate_charges_placeholder"),name:"leaving_charges",value:o==null?void 0:o.leaving_charges,type:"tel",onChange:d}),e.jsx(v,{labelText:r("transfer_certificate_charges"),placeholder:r("transfer_certificate_charges_placeholder"),name:"transfer_charges",value:o==null?void 0:o.transfer_charges,type:"tel",onChange:d}),e.jsx(v,{labelText:r("migration_certificate_charges"),placeholder:r("migration_certificate_charges_placeholder"),name:"migration_charges",value:o==null?void 0:o.migration_charges,type:"tel",onChange:d}),e.jsx("button",{className:b.select_application_btn,style:{width:"100%",justifyContent:"center"},onClick:a,children:r("save")}),g&&e.jsx(V,{})]})},M=({instituteId:s})=>{j();const[n,i]=T(),[t,r]=p.useState(1),[o,h]=p.useState(!0),[g,_]=p.useState(!0),[m,d]=p.useState([]),{getAllCertificateAuthority:a,getAllCertificateAuthorityRefetch:u}=R({data:{id:s,status:"Requested",page:t,limit:10},skip:!s});p.useEffect(()=>{s&&(_(!0),u())},[s,t,u]),p.useEffect(()=>{i&&o&&r(l=>l+1)},[i,o]),p.useEffect(()=>{var l,f;a!=null&&a.all_cert?t===1?(d(a==null?void 0:a.all_cert),_(!1)):(d(N=>[...new Set([...N,...a==null?void 0:a.all_cert].map(JSON.stringify))].map(JSON.parse)),_(!1)):((l=a==null?void 0:a.all_cert)==null?void 0:l.length)===0&&_(!1),((f=a==null?void 0:a.all_cert)==null?void 0:f.length)===10?h(!0):h(!1)},[a==null?void 0:a.all_cert]);const c=()=>{r(1),_(!0),u()};return e.jsxs(e.Fragment,{children:[m==null?void 0:m.map((l,f)=>(m==null?void 0:m.length)===f+1?e.jsx("div",{ref:n,children:e.jsx(S,{certificate:l,isViewBy:"ISSUED",onRefetch:c,instituteId:s})},l==null?void 0:l._id):e.jsx(S,{certificate:l,isViewBy:"ISSUED",onRefetch:c,instituteId:s},l==null?void 0:l._id)),g&&e.jsx(E,{})]})},W=({instituteId:s})=>{j();const[n,i]=T(),[t,r]=p.useState(1),[o,h]=p.useState(!0),[g,_]=p.useState(!0),[m,d]=p.useState([]),{getAllCertificateAuthority:a,getAllCertificateAuthorityRefetch:u}=R({data:{id:s,status:"Issued",page:t,limit:10},skip:!s});return p.useEffect(()=>{s&&(_(!0),u())},[s,t,u]),p.useEffect(()=>{i&&o&&r(c=>c+1)},[i,o]),p.useEffect(()=>{var c,l;a!=null&&a.all_cert?t===1?(d(a==null?void 0:a.all_cert),_(!1)):(d(f=>[...new Set([...f,...a==null?void 0:a.all_cert].map(JSON.stringify))].map(JSON.parse)),_(!1)):((c=a==null?void 0:a.all_cert)==null?void 0:c.length)===0&&_(!1),((l=a==null?void 0:a.all_cert)==null?void 0:l.length)===10?h(!0):h(!1)},[a==null?void 0:a.all_cert]),e.jsxs(e.Fragment,{children:[m==null?void 0:m.map((c,l)=>(m==null?void 0:m.length)===l+1?e.jsx("div",{ref:n,children:e.jsx(S,{certificate:c,isViewBy:"ALREADY_ISSUED"})},c==null?void 0:c._id):e.jsx(S,{certificate:c,isViewBy:"ALREADY_ISSUED"},c==null?void 0:c._id)),g&&e.jsx(E,{})]})},z=({carryParentState:s,instituteId:n})=>{const{t:i}=j(),[t]=k(),r=[{name:i("request"),id:0,url:"member/certificate?a=request&n=request",is_active:"enabled"},{name:i("issued"),id:1,url:"member/certificate?a=request&n=issued",is_active:"enabled"}];return e.jsxs(e.Fragment,{children:[e.jsx(J,{tabList:r,activeIndexTab:t.get("n")==="request"?0:1,showAs:!0,customStyleTab:{width:"100%"},customStyleLink:{width:"50%"},carryParentState:s}),e.jsx(Q,{customStyle:{width:"100%"}}),t.get("n")==="request"&&e.jsx(M,{instituteId:n}),t.get("n")==="issued"&&e.jsx(W,{instituteId:n})]})},G=({instituteId:s,carryParentState:n})=>{var o,h,g,_,m,d,a;const i=w(),{oneInstituteDashboard:t,oneInstituteDashboardRefetch:r}=$({id:s,skip:!s});return L.useEffect(()=>{s&&r()},[s,r]),e.jsx("div",{className:b.departmenthead,children:((o=i.search)==null?void 0:o.substring(3))==="student-message"?e.jsx(D,{sid:s}):e.jsxs("div",{className:b.demaprtment_list,children:[e.jsx(Y,{carryParentState:n}),i.search?((m=i.search)==null?void 0:m.substring(3))==="fund"?e.jsx(H,{instituteId:s,fundCharges:(d=t==null?void 0:t.institute)==null?void 0:d.certificate_fund_charges,issuedCOunt:((a=t==null?void 0:t.institute)==null?void 0:a.certificate_issued_count)??0,onRefetch:r}):e.jsx(z,{carryParentState:n,instituteId:s}):e.jsx(B,{instituteId:s,viewId:(h=n==null?void 0:n.onClickValue)==null?void 0:h._id,is_view:"CERTIFICATE_AUTHORITY",studentAlias:(_=(g=t==null?void 0:t.institute)==null?void 0:g.alias_pronounciation)==null?void 0:_.student_alias,headId:n==null?void 0:n.sid,carryParentState:n})]})})},Fe=()=>{var n,i,t,r;const s=w();return e.jsx(e.Fragment,{children:e.jsx(U,{index:"26",sid:((n=s==null?void 0:s.state)==null?void 0:n.sid)??"",onClickValue:((i=s==null?void 0:s.state)==null?void 0:i.onClickValue)??"",children:e.jsx(G,{instituteId:(r=(t=s==null?void 0:s.state)==null?void 0:t.onClickValue)==null?void 0:r.institute,carryParentState:s==null?void 0:s.state})})})};export{Fe as default};
