import{u as R,r as g,R as A,j as e,a1 as N,Q as E}from"./index-731451a5.js";import{O as $,P as M}from"./institute-staff-student-api-7f4890fe.js";const Q="_complaintDetails_ohuzp_1",T="_detailsheader_ohuzp_7",B="_item_ohuzp_13",F="_datetime_ohuzp_23",H="_detailsbody_ohuzp_50",I="_footer_ohuzp_57",O="_solvedbtn_ohuzp_80",c={complaintDetails:Q,detailsheader:T,item:B,datetime:F,detailsbody:H,footer:I,solvedbtn:O};function w({setShowDetails:S,complaintId:o,setRefetchStatus:z}){var i,l,n,m,h,v,_,x,p,u,j,f,b;const{t:d}=R(),[y,r]=g.useState(!1),[L]=$(),{studentComplaintDetail:s,studentComplaintDetailRefetch:t}=M({cid:o,skip:!o});A.useEffect(()=>{o&&t()},[o,t]);const k=()=>{r(a=>!a),L({cid:o,status:{status:"Solved"}}).then(()=>{t(),S(!1),z({solved:!0,unsolved:!0}),r(a=>!a)}).catch({})};return e.jsxs("div",{className:c.complaintDetails,children:[e.jsx("div",{className:c.detailsheader,children:e.jsxs("div",{className:c.item,children:[e.jsx("img",{src:"/images/complainIconDark.svg",alt:""}),e.jsxs("div",{children:[e.jsx("h6",{children:`${(l=(i=s==null?void 0:s.complaint)==null?void 0:i.student)==null?void 0:l.studentFirstName} ${(m=(n=s==null?void 0:s.complaint)==null?void 0:n.student)!=null&&m.studentMiddleName?(v=(h=s==null?void 0:s.complaint)==null?void 0:h.student)==null?void 0:v.studentMiddleName:""} ${(_=s==null?void 0:s.complaint)==null?void 0:_.student.studentLastName}`}),e.jsxs("div",{className:c.datetime,children:[e.jsx("p",{children:N((x=s==null?void 0:s.complaint)==null?void 0:x.createdAt).format("LL")}),e.jsx("p",{children:N((p=s==null?void 0:s.complaint)==null?void 0:p.createdAt).format("LT")})]})]})]})}),e.jsx("div",{className:c.detailsbody,children:e.jsx("p",{children:(u=s==null?void 0:s.complaint)==null?void 0:u.complaintContent})}),e.jsx("div",{className:c.footer,children:((j=s==null?void 0:s.complaint)==null?void 0:j.complaintInsStatus)==="Solved"?e.jsxs("div",{className:c.solvedbtn,children:[d("problem")," ",(f=s==null?void 0:s.complaint)==null?void 0:f.complaintInsStatus]}):e.jsxs("div",{className:c.solvedbtn,onClick:k,children:[d("problem")," ",(b=s==null?void 0:s.complaint)==null?void 0:b.complaintInsStatus]})}),y&&e.jsx(E,{})]})}export{w as default};
