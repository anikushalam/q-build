import{u as k,r as S,c as B,n as T,j as n,a1 as e,kX as r,Q as U}from"./index-731451a5.js";import{s as u}from"./InstituteHostel.module-b6b254cc.js";import{B as C}from"./BonafideReason-8b18d679.js";import{d as G}from"./institute-staff-student-api-7f4890fe.js";const M=({certificate:s,isViewBy:a,instituteId:l,onRefetch:E})=>{var h;const{t:d}=k(),[N,_]=S.useState(!1),y=B(),p=T(),[w,x]=S.useState(!1),[g]=G(),D=()=>{var j,v,b,R;a==="ISSUED"&&((s==null?void 0:s.certificate_type)==="Leaving"?(_(o=>!o),g({id:l,gr:(j=s==null?void 0:s.student)==null?void 0:j.studentGRNO,leavingFeedback:{number:(v=s==null?void 0:s.student)==null?void 0:v.studentGRNO,reason:"",study:"",behaviour:"",remarks:"",udise:""}}).then(o=>{_(m=>!m),y(`/q/${p.username}/student/certificate/form`,{state:{student:o.data.student,download:o.data.download,instituteId:l,is_leaving:"leaving",isViewBy:"REQUEST_TAB",certificateId:s==null?void 0:s._id}})}).catch({})):(s==null?void 0:s.certificate_type)==="Transfer"?(_(o=>!o),g({id:l,gr:(b=s==null?void 0:s.student)==null?void 0:b.studentGRNO,leavingFeedback:{number:(R=s==null?void 0:s.student)==null?void 0:R.studentGRNO,reason:"",study:"",behaviour:"",remarks:"",udise:""}}).then(o=>{_(m=>!m),y(`/q/${p.username}/student/certificate/form`,{state:{student:o.data.student,download:o.data.download,instituteId:l,is_leaving:"transfer",isViewBy:"REQUEST_TAB",certificateId:s==null?void 0:s._id}})}).catch({})):(s==null?void 0:s.certificate_type)==="Migration"||x(!0))};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:u.hostel_warden_card,style:{paddingBlock:"1rem"},children:[n.jsx("img",{alt:"not found",src:"/images/member_tab/student/student-certificate-icon.svg",style:{borderRadius:"0"}}),n.jsxs("div",{className:u.student_cerfificate_container,children:[n.jsxs("div",{className:u.warden_card_text,children:[n.jsxs("h6",{children:[d("certificate_type")," "," : ",(s==null?void 0:s.certificate_type)??""]}),n.jsxs("p",{children:[d("reason")," "," : "," ",(s==null?void 0:s.query_content)??""]}),(s==null?void 0:s.certificate_type)==="Bonafide"?null:n.jsxs("p",{children:[d("certificate_copy")," "," : ",s!=null&&s.is_original?d("original_copy"):d("dublicate_copy")]}),n.jsxs("p",{children:[d("raised_on")," "," : ",e(s==null?void 0:s.created_at).format("DD-MM-yyyy")]})]}),a==="ISSUED"?n.jsx("div",{className:u.student_issued_btn,onClick:D,children:d("issue_certificate")}):n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem"},children:[n.jsxs("div",{className:u.warden_card_text,style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[a==="ALREADY_ISSUED"?null:n.jsxs("p",{children:[d("status")," "," : ",(s==null?void 0:s.certificate_status)??""]}),s!=null&&s.certificate_issued_date?n.jsxs("p",{children:[d("issued_on")," "," : ",e(s==null?void 0:s.certificate_issued_date).format("DD-MM-yyyy")]}):null]}),(s==null?void 0:s.certificate_attach)&&n.jsx("a",{href:`${r}/${s==null?void 0:s.certificate_attach}`,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:n.jsx("img",{src:"/images/member_tab/student/student-certificate-download-icon.svg",alt:"receipt icon",style:{height:"1.5rem"}})})]})]})]}),w&&n.jsx(C,{onClose:()=>x(!1),instituteId:l,isViewBy:"REQUEST_TAB",commingReason:s==null?void 0:s.query_content,certificateId:s==null?void 0:s._id,onRefetch:E,uniqueGr:((h=s==null?void 0:s.student)==null?void 0:h.studentGRNO)??""}),N&&n.jsx(U,{})]})};export{M as C};
