import{u as I,c as S,k as y,r as _,lR as A,j as s,D as L,S as T,n as b,e as x,Q as C}from"./index-0ca76035.js";import{u as F}from"./department-api-e4b13f05.js";const k="_complaints_wvr1q_1",E="_swichModal_wvr1q_9",B="_swichModalTop_wvr1q_13",D="_swichModalBody_wvr1q_24",Q="_swichModalItem_wvr1q_39",R="_swichModalText_wvr1q_56",U="_search_container_wvr1q_64",G="_search_container_text_wvr1q_70",H="_search_container_input_wvr1q_71",z="_searchIcon_wvr1q_99",o={complaints:k,swichModal:E,swichModalTop:B,swichModalBody:D,swichModalItem:Q,swichModalText:R,search_container:U,search_container_text:G,search_container_input:H,searchIcon:z};function J({data:e}){var r,t,g,v,M,N,j,$,q,P;const h=S(),l=b(),m=y(c=>c.idChange.id),[n,f]=_.useState(""),[w,i]=_.useState(!1),{getActivatedMemberAccountRefetch:u}=F({data:{id:m,active_member_role:n},skip:!n}),p=c=>{f(c)};return _.useEffect(()=>{n&&(i(c=>!c),u(),setTimeout(()=>{h(`/q/${l.username}/memberstab`,{state:{selectedAccount:n}}),i(c=>!c)},1e3))},[n,u]),s.jsxs(s.Fragment,{children:[e!=null&&e.studentFirstName?s.jsxs("div",{className:o.swichModalItem,onClick:()=>p(e==null?void 0:e._id),children:[s.jsx("img",{id:"profileImg",alt:"",src:(r=e==null?void 0:e.institute)!=null&&r.insProfilePhoto?`${x}/${(t=e==null?void 0:e.institute)==null?void 0:t.insProfilePhoto}`:(g=e==null?void 0:e.student_unit)!=null&&g.hostel_unit_photo?`${x}/${(v=e==null?void 0:e.student_unit)==null?void 0:v.hostel_unit_photo}`:e!=null&&e.studentProfilePhoto?`${x}/${e==null?void 0:e.studentProfilePhoto}`:"/images/ins_default_profile.svg"}),s.jsxs("div",{className:o.swichModalText,children:[s.jsx("h6",{children:((M=e==null?void 0:e.institute)==null?void 0:M.insName)??`${(N=e==null?void 0:e.student_unit)!=null&&N.hostel_unit_name?`${(j=e==null?void 0:e.student_unit)==null?void 0:j.hostel_unit_name} (Hostel)`:""}`??""}),s.jsxs("p",{children:[e==null?void 0:e.studentFirstName," ",e==null?void 0:e.studentMiddleName," ",e==null?void 0:e.studentLastName," ","(student)"]})]})]}):e!=null&&e.staffFirstName?s.jsxs("div",{className:o.swichModalItem,onClick:()=>p(e==null?void 0:e._id),children:[s.jsx("img",{id:"profileImg",alt:"",src:($=e==null?void 0:e.institute)!=null&&$.insProfilePhoto?`${x}/${(q=e==null?void 0:e.institute)==null?void 0:q.insProfilePhoto}`:e!=null&&e.staffProfilePhoto?`${x}/${e==null?void 0:e.staffProfilePhoto}`:"/images/ins_default_profile.svg"}),s.jsxs("div",{className:o.swichModalText,children:[s.jsx("h6",{children:(P=e==null?void 0:e.institute)==null?void 0:P.insName}),s.jsxs("p",{children:[e==null?void 0:e.staffFirstName," ",e==null?void 0:e.staffMiddleName," ",e==null?void 0:e.staffLastName," ","(staff)"]})]})]}):"",w&&s.jsx(C,{})]})}const K=(e,h)=>{var m;let l=e!=null&&e.studentFirstName?`${e==null?void 0:e.studentFirstName} ${e!=null&&e.studentMiddleName?`${e==null?void 0:e.studentMiddleName} `:""}${e==null?void 0:e.studentLastName}`:`${e==null?void 0:e.staffFirstName} ${e!=null&&e.staffMiddleName?`${e==null?void 0:e.staffMiddleName} `:""}${e==null?void 0:e.staffLastName}`;return(m=l==null?void 0:l.toLocaleLowerCase())!=null&&m.includes(h==null?void 0:h.toLocaleLowerCase())?e:null};function O(){const{t:e}=I(),h=S(),l=y(r=>r.idChange.id),[m,n]=_.useState(!0),[f,w]=_.useState([]),{data:i,refetch:u}=A(l,{skip:!l});_.useEffect(()=>{l&&(n(!0),u())},[u,l]),_.useEffect(()=>{var r;i!=null&&i.role_query?(w(i==null?void 0:i.role_query),n(!1)):((r=i==null?void 0:i.role_query)==null?void 0:r.length)===0&&n(!1)},[i==null?void 0:i.role_query]);const p=r=>{var t;if(r.target.value){const g=(t=i==null?void 0:i.role_query)==null?void 0:t.filter(v=>K(v,r.target.value));w(g)}else w(i==null?void 0:i.role_query)};return s.jsx(L,{open:!0,onClose:()=>h(-1),children:s.jsxs("div",{className:o.swichModal,children:[s.jsx("div",{className:o.swichModalTop,onClick:()=>h(-1),children:e("switch_account")}),s.jsxs("div",{className:o.swichModalBody,children:[s.jsx("div",{className:o.search_container,style:{marginBottom:"0.6rem"},children:s.jsxs("div",{className:o.search_container_text,children:[s.jsx("img",{className:o.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),s.jsx("input",{type:"text",placeholder:e("search-label"),onChange:p,autoFocus:!0,style:{border:"0.029vw solid rgba(0, 0, 0, 0.15)",width:"370px",marginInline:"0.5rem"}})]})}),f==null?void 0:f.map((r,t)=>s.jsx(J,{data:r},t)),m&&s.jsx(T,{})]})]})})}function X(){return s.jsx("div",{className:o.complaints,children:s.jsx(O,{})})}export{X as S};
