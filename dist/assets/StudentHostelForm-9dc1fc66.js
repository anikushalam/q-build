import{u as Hs,k as Fs,r as l,W as gs,j as o,D as xs,C as bs,N as Ls,Q as is,c as st,d as tt,n as ot,nl as et,nm as rt,w as nt,lq as ut,lr as ct,z as dt,x as pt}from"./index-731451a5.js";import{s as j}from"./JoinForm.module-212f9bb3.js";import{s as Js,a as Ks,b as Qs,d as Ys,e as Ws,H as zs,g as at,h as mt,j as ht,k as lt,l as _t,o as ft,p as yt,q as St,I as jt}from"./constant_value-4cd2b3e0.js";import{J as E}from"./JoinFormInput-8e74a0e0.js";import{J as ks}from"./JoinFormSelect-a3c930fc.js";import{J as wt}from"./JoinFormTextArea-7f6dded0.js";import{J as Xs}from"./JoinFormFile-110be590.js";import{B as Z}from"./BorderBottom-47800983.js";import{B as Ct}from"./ButtonWithTypeSubmit-71da32d7.js";import{F as kt}from"./FormCheckbox-3a5ba026.js";import{S as vt,A as Pt}from"./main.form.pdf.worker-13bf8267.js";import{J as Zs}from"./JoinFormCalender-5158d888.js";import{w as Nt}from"./timeComparison-f15c3247.js";import{K as At,ap as It}from"./hostel-api-4d11cb04.js";import{P as Dt,p as Tt}from"./PaymentGatewayConfig-78c07c77.js";import{g as Ot}from"./paytmUpiInitiative-bed1cea7.js";import{j as Vt}from"./finance-api-5c6c5671.js";import{u as qt}from"./use-login-02f54549.js";import{c as Bt}from"./pdf-convertor-function-e794de58.js";import"./LoaderButton-71df50a7.js";import"./UniversalForm.module-19614663.js";import"./FormControlLabel-1c6af80c.js";import"./SwitchBase-2ba5f868.js";import"./Checkbox-1498c124.js";import"./JoinFormInputView-879755fe.js";import"./JoinFormFileView-d3f85876.js";import"./ViewFileDialog-0c131c06.js";import"./Overlay-07ce6f88.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalBackdrop-5b309d60.js";import"./SearchHeader.module-b69c8942.js";import"./numberToWords.min-dbca819b.js";import"./DatePicker-305f3dc6.js";import"./PopupWrapper-ffbaef7a.js";import"./SearchModalWrapper-6e85c9f3.js";import"./verifyUserNameSpaces-1eb95efa.js";const Rt=({preview:x,setPreview:d,onApplyForm:vs,hostelId:a})=>{var us,cs,ds,ps,as,ms,hs,ls,_s,fs,ys,Ss,e,h,q,J,K,N,B,R,T;const{t:c}=Hs();Fs(t=>t.idChange);const[$,b]=l.useState(""),[C,P]=l.useState({});l.useState("");const[f,Ps]=l.useState([]),[Q,H]=l.useState({studentFirstName:"",studentMiddleName:"",studentLastName:"",studentDOB:"",studentGender:"",studentMotherName:""}),[Y,Ms]=l.useState([]),[V,M]=l.useState({}),[y,L]=l.useState(!1),[D,ss]=l.useState(""),[G,ts]=l.useState(!1),[Gs,F]=l.useState(""),[W,i]=l.useState(""),[Ns,os]=l.useState({msg:"",run:!1}),[_,As]=l.useState({}),[Is,es]=l.useState(""),[Ds]=gs(),[z,Ts]=l.useState({student_prn_enroll_number:"",student_hostel_cpi:""}),{getHostelForm:u,getHostelFormRefetch:rs}=At({hid:a,skip:!a});l.useEffect(()=>{a&&rs()},[rs,a]),l.useEffect(()=>{var t,s,r,m,k,n,p,w,v,X,js;if((t=u==null?void 0:u.one_hostel)!=null&&t.student_form_query){const U=[];for(let O in(s=u==null?void 0:u.one_hostel)==null?void 0:s.student_form_query)if(O==="previousSchoolAndDocument"){let I=(m=(r=u==null?void 0:u.one_hostel)==null?void 0:r.student_form_query)==null?void 0:m.previousSchoolAndDocument,S=[];for(let ws in I)I[ws]&&(ws==="aadharCard"?(M(Cs=>({...Cs,addharFrontCard:"",addharBackCard:""})),S.push("addharFrontCard","addharBackCard")):ws==="previousSchoolDocument"?(M(Cs=>({...Cs,studentPreviousSchool:"",previousSchoolDocument:""})),S.push("previousSchoolDocument","studentPreviousSchool")):(M(Cs=>({...Cs,[ws]:""})),S.push(ws)));Ms([...S])}else(k=u==null?void 0:u.one_hostel)!=null&&k.student_form_query[O]&&(O==="otherPersonalInfo"?(P(I=>{var S;return{...I,...(S=Js)==null?void 0:S.withValue}}),U.push(...(n=Js)==null?void 0:n.keys)):O==="identityDetails"?(P(I=>{var S;return{...I,...(S=Ks)==null?void 0:S.withValue}}),U.push(...(p=Ks)==null?void 0:p.keys)):O==="addressInfo"?(P(I=>{var S;return{...I,...(S=Qs)==null?void 0:S.withValue}}),U.push(...(w=Qs)==null?void 0:w.keys)):O==="parentsInfo"?(P(I=>{var S;return{...I,...(S=Ys)==null?void 0:S.withValue}}),U.push(...(v=Ys)==null?void 0:v.keys)):O==="bankDetails"?(P(I=>{var S;return{...I,...(S=Ws)==null?void 0:S.withValue}}),U.push(...(X=Ws)==null?void 0:X.keys)):O==="cpi"&&(P(I=>{var S;return{...I,...(S=zs)==null?void 0:S.withValue}}),U.push(...(js=zs)==null?void 0:js.keys)));Ps([...U])}},[(us=u==null?void 0:u.one_hostel)==null?void 0:us.student_form_query]),l.useEffect(()=>{if($){const t=$.split(" ");t.length>=3?H(s=>({...s,studentFirstName:t[0],studentMiddleName:t[1],studentLastName:t.slice(2).toString().replaceAll(","," ")})):H(s=>({...s,studentFirstName:t[0],studentMiddleName:"",studentLastName:t[1]===void 0?"":t[1]}))}},[$]);const Os=t=>{const s=URL.createObjectURL(t.target.files[0]);ss(t.target.files[0]),F(s),i(s),ts(!0)};l.useEffect(()=>{y&&g({target:{name:"file",files:[D]}})},[y,D]);const Vs=(t,s,r)=>{var k,n;const m={};D||(os({msg:c("form_select_image_label"),run:!0}),m.file="profile image is required!"),s.studentBankAccount&&s.studentBankAccount!==s.studentBankReAccount&&(m.studentBankReAccount=`${c("form_account_dose_not_match_label")}`);for(let p in t)p==="studentMiddleName"||t[p]||(m[p]=`${p} is required!`);for(let p in s)p==="studentPhoneNumber"||p==="studentEmail"||p==="studentFatherRationCardColor"||s[p]||(m[p]=`${p} is required!`);for(let p in r)p==="previousSchoolDocument"||(p==="studentPreviousSchool"?r.previousSchoolDocument||r[p]||(m[p]=`${p} is required!`):r[p]||(m[p]=`${p} is required!`));return(n=(k=u==null?void 0:u.one_hostel)==null?void 0:k.student_form_query)!=null&&n.enrollmentPrn&&(z.student_prn_enroll_number||(m.student_prn_enroll_number="student_prn_enroll_number is required!")),m},ns=t=>{H(s=>({...s,[t.target.name]:t.target.value}))},A=t=>{P(s=>({...s,[t.target.name]:t.target.value}))},qs=t=>{t.target.name==="previousSchoolDocument"?M(s=>({...s,[t.target.name]:t.target.value})):t.target.name==="studentPreviousSchool"?M(s=>({...s,[t.target.name]:t.target.value})):M(s=>({...s,[t.target.name]:t.target.files[0]}))},Bs=t=>{t.target.checked?P(s=>({...s,asSameAddress:t.target.checked,studentAddress:s.studentCurrentAddress,studentPincode:s.studentCurrentPincode})):P(s=>({...s,asSameAddress:t.target.checked,studentAddress:"",studentPincode:""}))},g=t=>{es(r=>!r);const s=new FormData;s.append("file",t.target.files[0]),Ds({fileUpload:s}).then(r=>{var m,k;t.target.name==="file"?(L(!1),ss({name:t.target.name,key:(m=r.data)==null?void 0:m.imageKey,type:(k=t.target.files[0])==null?void 0:k.type})):t.target.name==="bankPassbook"?P(n=>{var p,w,v;return{...n,[t.target.name]:{originalName:(p=t.target.files[0])==null?void 0:p.name,name:t.target.name,key:(w=r.data)==null?void 0:w.imageKey,type:(v=t.target.files[0])==null?void 0:v.type}}}):M(n=>{var p,w,v;return{...n,[t.target.name]:{originalName:(p=t.target.files[0])==null?void 0:p.name,name:t.target.name,key:(w=r.data)==null?void 0:w.imageKey,type:(v=t.target.files[0])==null?void 0:v.type}}}),es(n=>!n)}).catch({})},Rs=t=>{t.preventDefault();const s=Vs(Q,C,V);let r=!1;for(let m in s){r=!0;break}r?As(s):d(m=>!m)},Us=t=>{if(Nt(t)){let r=t==null?void 0:t.split("/"),m=`${r[2]}-${r[1]}-${r[0]}`;H(k=>({...k,studentDOB:m}))}else os({msg:`You cannot select upcoming date ${t}`,run:!0})},Es=t=>{let r=`${(t==null?void 0:t.split("/"))[2]}`;P(m=>({...m,student_year:r}))},$s=()=>{var t,s;vs({file:D,formData:Q,studentForm:C,dynamicDocument:V,studentNewField:z,pdfUndertaking:(t=u==null?void 0:u.one_hostel)!=null&&t.pg_undertakings_hostel_admission?"PG":(s=u==null?void 0:u.one_hostel)!=null&&s.ug_undertakings_hostel_admission?"UG":"OFF"})};return o.jsxs(o.Fragment,{children:[x?o.jsx(vt,{studentForm:C,dynamicForm:f,formData:Q,dynamicFormDocument:Y,dynamicDocument:V,fileUrl:W,formSetting:(T=u==null?void 0:u.one_hostel)==null?void 0:T.student_form_query,onApplyStudentForm:$s,studentNewField:z}):o.jsxs("form",{onSubmit:Rs,children:[o.jsxs("div",{className:j.form_container,children:[o.jsxs("h4",{children:[c("form_personal_info_label"),":"]}),o.jsxs("div",{className:j.form_container_profile,children:[o.jsx(E,{labelText:c("form_name_label"),placeholder:c("form_name_placeholder"),name:"fullname",value:$,type:"text",onChange:t=>b(t.target.value),customStyleContainer:(ds=(cs=u==null?void 0:u.one_hostel)==null?void 0:cs.student_form_query)!=null&&ds.enrollmentPrn?{width:"56%"}:{width:"86%"},errorShow:_.studentFirstName||_.studentLastName}),((as=(ps=u==null?void 0:u.one_hostel)==null?void 0:ps.student_form_query)==null?void 0:as.enrollmentPrn)&&o.jsx(E,{labelText:c("form_prn_enr_label"),placeholder:c("form_prn_enr_placeholder"),name:"prn",value:z.student_prn_enroll_number,type:"text",onChange:t=>Ts(s=>({...s,student_prn_enroll_number:t.target.value})),customStyleContainer:{width:"30%"},errorShow:_.student_prn_enroll_number}),o.jsxs("div",{className:j.form_container_profile_image,children:[o.jsxs("label",{htmlFor:"profile",className:j.form_container_profile_image_label,children:[o.jsx("img",{className:j.form_container_profile_photo,src:W||"/images/ins_default_profile.svg",alt:"student avatar"}),o.jsx("img",{src:"/images/user-pencil-edit-transparent.svg",alt:"edit icon",className:j.form_edit_icon})]}),o.jsx("input",{type:"file",id:"profile",onChange:Os,style:{display:"none"}})]})]}),o.jsxs("div",{className:j.form_profile_info,children:[o.jsx(ks,{selectLabel:c("form_gender_label"),selectedValue:c("form_gender_placeholder"),value:Q.studentGender,name:"studentGender",onChange:ns,options:at,optionsValue:mt,errorShow:_.studentGender}),o.jsx(Zs,{labelText:c("form_date_of_birth_label"),placeholder:c("form_date_of_birth_placeholder"),name:"studentDOB",value:Q.studentDOB,onDateFunction:Us,errorShow:_.studentDOB,customStyleContainer:{position:"relative"}}),o.jsx(E,{labelText:c("form_mother_name_label"),placeholder:c("form_mother_name_placeholder"),name:"studentMotherName",value:Q.studentMotherName,type:"text",onChange:ns,errorShow:_.studentMotherName})]}),o.jsx(Z,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}}),((hs=(ms=u==null?void 0:u.one_hostel)==null?void 0:ms.student_form_query)==null?void 0:hs.otherPersonalInfo)&&o.jsxs(o.Fragment,{children:[o.jsxs("h4",{children:[c("form_other_personal_info_label"),":"]}),o.jsx("div",{className:j.form_other_field,children:f==null?void 0:f.map(t=>ht.map(s=>{var r;return((r=s==null?void 0:s.lists)==null?void 0:r.includes(t))&&(s!=null&&s.type?o.jsx(ks,{selectLabel:c(s==null?void 0:s.label),selectedValue:c(s==null?void 0:s.placeHolder),value:C[t],name:t,onChange:A,options:s==null?void 0:s.chooseOptions,optionsValue:s==null?void 0:s.chooseOptionsValue,customStyleContainer:{width:"49.5%"},errorShow:_[t]},s==null?void 0:s.id):o.jsx(E,{labelText:c(s==null?void 0:s.label),placeholder:c(s==null?void 0:s.placeHolder),name:t,value:C[t],type:["studentPhoneNumber","studentAadharNumber"].includes(t)?"tel":"text",inputLength:t==="studentPhoneNumber"?10:12,onChange:A,customStyleContainer:{width:"49.5%"},errorShow:_[t]},s==null?void 0:s.id))}))}),o.jsx(Z,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}})]}),((_s=(ls=u==null?void 0:u.one_hostel)==null?void 0:ls.student_form_query)==null?void 0:_s.identityDetails)&&o.jsxs(o.Fragment,{children:[o.jsxs("h4",{children:[c("form_identity_details_label"),":"]}),o.jsx("div",{className:j.form_other_field,children:f==null?void 0:f.map(t=>lt.map(s=>{var r;return((r=s==null?void 0:s.lists)==null?void 0:r.includes(t))&&(s!=null&&s.type?o.jsx(ks,{selectLabel:c(s==null?void 0:s.label),selectedValue:c(s==null?void 0:s.placeHolder),value:C[t],onChange:A,options:s==null?void 0:s.chooseOptions,optionsValue:s==null?void 0:s.chooseOptionsValue,name:t,customStyleContainer:{width:"49.5%"},errorShow:_[t]},s==null?void 0:s.id):o.jsx(E,{labelText:c(s==null?void 0:s.label),placeholder:c(s==null?void 0:s.placeHolder),name:t,value:C[t],type:"text",onChange:A,customStyleContainer:{width:"49.5%"},errorShow:_[t]},s==null?void 0:s.id))}))}),o.jsx(Z,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}})]}),((ys=(fs=u==null?void 0:u.one_hostel)==null?void 0:fs.student_form_query)==null?void 0:ys.addressInfo)&&o.jsxs(o.Fragment,{children:[o.jsxs("h4",{children:[c("form_address_info_label"),":"]}),o.jsx("div",{className:j.form_other_field,children:f==null?void 0:f.map(t=>_t.map(s=>{var r;return((r=s==null?void 0:s.lists)==null?void 0:r.includes(t))&&(s!=null&&s.type?o.jsx(wt,{labelText:c(s==null?void 0:s.label),placeholder:c(s==null?void 0:s.placeHolder),name:t,value:C[t],type:"text",onChange:A,customStyleContainer:{width:"49.5%"},errorShow:_[t]},s==null?void 0:s.id):s!=null&&s.checkbox?o.jsx(kt,{checkLabel:c(s==null?void 0:s.label),checkedValue:C.asSameAddress,onCheckboxAction:Bs,customStyle:{display:"block",width:"100%",marginLeft:"0"}},s==null?void 0:s.id):o.jsx(E,{labelText:c(s==null?void 0:s.label),placeholder:c(s==null?void 0:s.placeHolder),name:t,value:C[t],type:["studentCurrentPincode","studentPincode"].includes(t)?"tel":"text",inputLength:6,onChange:A,customStyleContainer:{width:"49.5%"},errorShow:_[t]},s==null?void 0:s.id))}))}),o.jsx(Z,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}})]}),((e=(Ss=u==null?void 0:u.one_hostel)==null?void 0:Ss.student_form_query)==null?void 0:e.parentsInfo)&&o.jsxs(o.Fragment,{children:[o.jsxs("h4",{children:[c("form_parent_guardian_info_label"),":"]}),o.jsx("div",{className:j.form_other_field,children:f==null?void 0:f.map(t=>ft.map(s=>{var r;return((r=s==null?void 0:s.lists)==null?void 0:r.includes(t))&&(s!=null&&s.type?o.jsx(ks,{selectLabel:c(s==null?void 0:s.label),selectedValue:c(s==null?void 0:s.placeHolder),value:C[t],onChange:A,options:s==null?void 0:s.chooseOptions,optionsValue:s==null?void 0:s.chooseOptionsValue,name:t,customStyleContainer:{width:"49.5%"},errorShow:_[t]},s==null?void 0:s.id):o.jsx(E,{labelText:c(s==null?void 0:s.label),placeholder:c(s==null?void 0:s.placeHolder),name:t,value:C[t],type:["studentParentsPhoneNumber"].includes(t)?"tel":"text",inputLength:t==="studentParentsPhoneNumber"?10:30,onChange:A,customStyleContainer:{width:"49.5%"},errorShow:_[t]},s==null?void 0:s.id))}))}),o.jsx(Z,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}})]}),((J=(q=(h=u==null?void 0:u.one_hostel)==null?void 0:h.student_form_query)==null?void 0:q.previousSchoolAndDocument)==null?void 0:J.previousSchoolDocument)&&o.jsxs(o.Fragment,{children:[o.jsxs("h4",{children:[c("form_previous_school_document_label"),":"]}),o.jsx("div",{className:j.form_other_field,children:Y==null?void 0:Y.map(t=>yt.map(s=>{var r;return((r=s==null?void 0:s.lists)==null?void 0:r.includes(t))&&(s!=null&&s.fileType?o.jsx(Xs,{labelText:c(s==null?void 0:s.label),name:t,value:V[t],onChange:g,customStyleContainer:{width:"49.5%"},errorShow:_[t]},s==null?void 0:s.id):s!=null&&s.checkbox?"":!(V!=null&&V.previousSchoolDocument)&&o.jsx(E,{labelText:c(s==null?void 0:s.label),placeholder:c(s==null?void 0:s.placeHolder),name:t,value:V[t],type:"text",onChange:qs,customStyleContainer:{width:"100%"},errorShow:_[t]},s==null?void 0:s.id))}))}),o.jsx(Z,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}})]}),((N=(K=u==null?void 0:u.one_hostel)==null?void 0:K.student_form_query)==null?void 0:N.bankDetails)&&o.jsxs(o.Fragment,{children:[o.jsxs("h4",{children:[c("form_student_bank_details_label"),":"]}),o.jsx("div",{className:j.form_other_field,children:f==null?void 0:f.map(t=>St.map(s=>{var r;return((r=s==null?void 0:s.lists)==null?void 0:r.includes(t))&&(s!=null&&s.fileType?o.jsx(Xs,{labelText:c(s==null?void 0:s.label),name:t,value:C[t],onChange:g,customStyleContainer:{width:"49.5%"},errorShow:_[t]},s==null?void 0:s.id):o.jsx(E,{labelText:c(s==null?void 0:s.label),placeholder:c(s==null?void 0:s.placeHolder),name:t,value:C[t],type:["studentBankAccount","studentBankReAccount"].includes(t)?"tel":"text",reAccount:t==="studentBankReAccount"?_[t]:"",inputLength:50,onChange:A,customStyleContainer:{width:"49.5%"},errorShow:_[t]},s==null?void 0:s.id))}))})]}),((R=(B=u==null?void 0:u.one_hostel)==null?void 0:B.student_form_query)==null?void 0:R.cpi)&&o.jsxs(o.Fragment,{children:[o.jsxs("h4",{children:[c("form_student_hostel_cpi"),":"]}),o.jsx("div",{className:j.form_other_field,children:f==null?void 0:f.map(t=>jt.map(s=>{var r;return((r=s==null?void 0:s.lists)==null?void 0:r.includes(t))&&(s!=null&&s.isCalender?o.jsx(Zs,{labelText:c(s==null?void 0:s.label),placeholder:c(s==null?void 0:s.placeHolder),name:t,value:C[t],onDateFunction:Es,errorShow:_[t],customStyleContainer:{position:"relative",width:"49.5%"}},s==null?void 0:s.id):s!=null&&s.type?o.jsx(ks,{selectLabel:c(s==null?void 0:s.label),selectedValue:c(s==null?void 0:s.placeHolder),value:C[t],name:t,onChange:A,options:s==null?void 0:s.chooseOptions,optionsValue:s==null?void 0:s.chooseOptionsValue,customStyleContainer:{width:"49.5%"},errorShow:_[t]},s==null?void 0:s.id):o.jsx(E,{labelText:c(s==null?void 0:s.label),placeholder:c(s==null?void 0:s.placeHolder),name:t,value:C[t],type:"text",onChange:A,customStyleContainer:{width:"49.5%"},errorShow:_[t]},s==null?void 0:s.id))}))})]}),o.jsx(Ct,{type:"submit",buttonText:c("form_preview"),customStyleButton:{marginTop:"1.5vw"}})]}),G&&o.jsx(xs,{open:G,children:o.jsx(bs,{setPhotoURL:i,photoURL:W,setFile:ss,setOpenCrop:ts,setProfilePhoto:F,first:1,second:1,setUpload:L})}),o.jsx(Ls,{msg:Ns.msg,run:Ns.run,setRun:()=>os({msg:"",run:!1}),postiton:"bottom",type:"error"})]}),Is&&o.jsx(is,{})]})};function So(){var _,As,Is,es,Ds,z,Ts,u,rs,Os,Vs,ns,A,qs,Bs,g,Rs,Us,Es,$s,us,cs,ds,ps,as,ms,hs,ls,_s,fs,ys,Ss;const x=st(),d=tt(),vs=ot(),a=Fs(e=>e.idChange),{t:c}=Hs(),[$,b]=l.useState(!1),[C,P]=l.useState(!1),[f,Ps]=l.useState(!1),[Q,H]=l.useState(null),[Y]=It(),[Ms]=et(),{existingAccountLogin:V}=qt(),[M]=rt(),{data:y,refetch:L}=nt((a==null?void 0:a.id)||((_=d.state)==null?void 0:_.instituteId),{skip:((As=d.state)==null?void 0:As.openAs)==="landing_page"||((Is=d.state)==null?void 0:Is.openAs)==="landing_page_and_existing"?!((es=d.state)!=null&&es.instituteId):!(a!=null&&a.id)}),{data:D}=ut(),[ss]=ct(),{merchantId:G,merchantIdRefetch:ts}=Vt({id:((Ds=d.state)==null?void 0:Ds.openAs)==="landing_page"||((z=d.state)==null?void 0:z.openAs)==="landing_page_and_existing"?(Ts=d.state)==null?void 0:Ts.instituteId:(u=a.searchProfile)==null?void 0:u.id,skip:((rs=d.state)==null?void 0:rs.openAs)==="landing_page"||((Os=d.state)==null?void 0:Os.openAs)==="landing_page_and_existing"?!((Vs=d.state)!=null&&Vs.instituteId):!((ns=a.searchProfile)!=null&&ns.id)});l.useEffect(()=>{var e,h;((e=a.searchProfile)!=null&&e.id||(h=d.state)!=null&&h.instituteId)&&ts()},[(A=a.searchProfile)==null?void 0:A.id,(qs=d.state)==null?void 0:qs.instituteId,ts]),l.useEffect(()=>{var e;(a!=null&&a.id||(e=d.state)!=null&&e.instituteId)&&L()},[L,a==null?void 0:a.id,(Bs=d.state)==null?void 0:Bs.instituteId]),l.useEffect(()=>{var e;(e=document.getElementById("scrollView"))==null||e.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},[$]);const Gs=()=>{$?b(e=>!e):x(-1)},{oneInstituteProfile:F,oneInstituteProfileRefetch:W}=dt({data:{id:((g=d.state)==null?void 0:g.openAs)==="landing_page"||((Rs=d.state)==null?void 0:Rs.openAs)==="landing_page_and_existing"?(Us=d.state)==null?void 0:Us.instituteId:(Es=a.searchProfile)==null?void 0:Es.id,type:"ID"},skip:(($s=d.state)==null?void 0:$s.openAs)==="landing_page"||((us=d.state)==null?void 0:us.openAs)==="landing_page_and_existing"?!((cs=d.state)!=null&&cs.instituteId):!((ds=a.searchProfile)!=null&&ds.id)});l.useEffect(()=>{var e,h;((e=a.searchProfile)!=null&&e.id||(h=d.state)!=null&&h.instituteId)&&W()},[(ps=a.searchProfile)==null?void 0:ps.id,(as=d.state)==null?void 0:as.instituteId,W]);const i=async(e,h,q,J=null,K=!1)=>{var T;const N=new Worker(new URL(Pt,import.meta.url),{type:"module"}),{institute:B,studentInfo:R}=Bt(F==null?void 0:F.institute,e,{imageKey:h,isAdmission:K,applicationName:(T=d.state)==null?void 0:T.applicationName});N.postMessage({printFormType:"STUDENT_HOSTEL_FORM",studentInfo:R,institute:B,pdfUndertaking:J}),N.onmessage=t=>{if(t&&q){window.open(URL.createObjectURL(t.data),"_blank");const s=new FormData;s.append("file",t.data),M({sid:q,pdf_file:s}).then(()=>{P(r=>!r)}).catch({})}}},Ns=async e=>{var q,J,K,N,B,R,T,t,s,r,m,k;P(n=>!n);const h={fileArray:[]};h.fileArray.push(e==null?void 0:e.file);for(let n in e==null?void 0:e.formData)h[n]=e==null?void 0:e.formData[n];for(let n in e==null?void 0:e.studentForm)n==="asSameAddress"||(n==="bankPassbook"?e!=null&&e.studentForm[n]&&h.fileArray.push(e==null?void 0:e.studentForm[n]):h[n]=e==null?void 0:e.studentForm[n]);for(let n in e==null?void 0:e.dynamicDocument)n==="previousSchoolDocument"||(n==="studentPreviousSchool"?h[n]=e==null?void 0:e.dynamicDocument[n]:e!=null&&e.dynamicDocument[n]&&h.fileArray.push(e==null?void 0:e.dynamicDocument[n]));h.student_prn_enroll_number=e==null?void 0:e.studentNewField.student_prn_enroll_number,((q=d.state)==null?void 0:q.openAs)==="PROFILE_SEARCH"&&(a!=null&&a.id)&&((J=d.state)!=null&&J.appId)?Y({aid:(K=d.state)==null?void 0:K.appId,studentData:h,uid:a==null?void 0:a.id}).then(async n=>{var p,w;n.data.status?(await i(h,(p=e==null?void 0:e.file)==null?void 0:p.key,(w=n==null?void 0:n.data)==null?void 0:w.student,"PG"),x(`/q/${vs.username}/feed`)):P(v=>!v)}).catch({}):((N=d.state)==null?void 0:N.openAs)==="ADMISSION_DIRECT_APPLY"&&((B=d.state)!=null&&B.appId)?f||(Ps(!0),H(h),P(n=>!n)):((R=d.state)==null?void 0:R.openAs)==="landing_page"&&((T=d.state)!=null&&T.verifyNumber)?Ms({phoneNumber:(t=d.state)==null?void 0:t.verifyNumber,aid:d.state.appId,direct_student:h}).then(async n=>{var p,w,v,X,js,U,O;await i(h,(p=e==null?void 0:e.file)==null?void 0:p.key,(w=n==null?void 0:n.data)==null?void 0:w.student,e==null?void 0:e.pdfUndertaking),V({token:(v=n==null?void 0:n.data)==null?void 0:v.token,_id:(js=(X=n==null?void 0:n.data)==null?void 0:X.user)==null?void 0:js._id,username:(O=(U=n==null?void 0:n.data)==null?void 0:U.user)==null?void 0:O.username})}).catch({}):((s=d.state)==null?void 0:s.openAs)==="landing_page_and_existing"&&((r=d.state)!=null&&r.userId)?Y({aid:(m=d.state)==null?void 0:m.appId,studentData:h,uid:(k=d.state)==null?void 0:k.userId}).then(async n=>{var p,w,v;n.data.status?(await i(h,(p=e==null?void 0:e.file)==null?void 0:p.key,(w=n==null?void 0:n.data)==null?void 0:w.student,e==null?void 0:e.pdfUndertaking),x(`/q/${(v=d.state)==null?void 0:v.username}/feed`)):P(X=>!X)}).catch({}):P(n=>!n)};function os(e){var B,R,T,t,s;let h=+((B=d.state)==null?void 0:B.first_install)*2.1/100,q=+h*18/100,J=+h+q;const K=parseInt((R=d.state)==null?void 0:R.first_install);var N={amount:Math.ceil(K+ +J.toFixed(2))};e==="PAYTM"?Ot({amount:+((T=d.state)==null?void 0:T.first_install),amount_nocharges:+N.amount,type:"Direct_Hostel",paidBy:`${a==null?void 0:a.id}`,paidTo:`${(t=a.searchProfile)==null?void 0:t.id}`,moduleId:`${(s=d.state)==null?void 0:s.appId}`,ad_status_id:null,payment_installment:null,ad_install:null,month:null,payment_remain_1:null,payment_card_type:null,payment_book_id:null,name:vs.username,isApk:"web",payment_card_id:null}).then(r=>{var m,k;window.onScriptLoad((k=(m=r==null?void 0:r.response)==null?void 0:m.body)==null?void 0:k.txnToken,r==null?void 0:r.order,r==null?void 0:r.amount)}).catch(r=>{console.info(r)}):D!=null&&D.Key&&(N!=null&&N.amount)&&ss({amount:N==null?void 0:N.amount,student_data:Q}).then(r=>{var m,k,n,p,w,v;(m=r.data)!=null&&m.success?Tt({key:D==null?void 0:D.Key,oid:(k=r.data)==null?void 0:k.order.id,amount_nocharge:((n=d.state)==null?void 0:n.first_install)*100,amount:(p=r.data)==null?void 0:p.order.amount,type:"Direct_Hostel",pay_by:`${a==null?void 0:a.id}`,pay_to:`${(w=a.searchProfile)==null?void 0:w.id}`,mid:`${(v=d.state)==null?void 0:v.appId}`,razor_key:G==null?void 0:G.key,razor_author:G==null?void 0:G.bool,status:null,installment_type:null,is_install:null,h_month:null}):console.log("data error")}).catch(r=>{console.log(r)})}return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:j.navbar,children:o.jsx(pt,{status:"profile",profileId:y?(ms=y==null?void 0:y.user)==null?void 0:ms._id:"",username:(hs=y==null?void 0:y.user)==null?void 0:hs.username,name:(ls=y==null?void 0:y.user)==null?void 0:ls.userLegalName,photoId:(_s=y==null?void 0:y.user)==null?void 0:_s.photoId,profilePhoto:(fs=y==null?void 0:y.user)==null?void 0:fs.profilePhoto,profileData:y==null?void 0:y.user})}),o.jsx("div",{className:j.goback_container,id:"scrollView",children:o.jsxs("div",{className:j.goback_container_text,onClick:Gs,children:[o.jsx("img",{src:"/images/arr-left-white.svg",alt:"go back icon"}),o.jsx("h6",{className:j.goback_container_text_go,children:c("go_back")})]})}),o.jsxs("div",{className:j.student_from_container,children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("h6",{className:j.student_from_fill,children:c("form_fill_student")}),$&&o.jsx("h6",{className:j.student_from_fill_edit,onClick:()=>b(e=>!e),children:c("edit_")})]}),o.jsx(Z,{customStyle:{width:"100%"}}),o.jsx(Rt,{preview:$,setPreview:b,onApplyForm:Ns,hostelId:(ys=d.state)==null?void 0:ys.hostelId}),f&&o.jsx(Dt,{onClose:()=>Ps(!1),allContent:{type:"ADMISSION_DIRECT_APPLY",amount:(Ss=d.state)==null?void 0:Ss.first_install},checkoutAdmissionDirectHandler:os})]}),C&&o.jsx(is,{})]})}export{So as default};
