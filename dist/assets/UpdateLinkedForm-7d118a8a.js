import{u as j,r as d,k as l,j as o,N as g,Q as v}from"./index-731451a5.js";import{s}from"./InsFinance-a3e64cbf.js";import{B as i}from"./ButtonWithTypeSubmit-71da32d7.js";import{e as C}from"./institute-finance-api-8c8ab872.js";import{J as a}from"./JoinFormInput-8e74a0e0.js";import"./InsFinance.module-24741212.js";import"./CommonLinkTab-7c8e0314.js";import"./CustomSuspense-e90dc607.js";import"./finance-api-5c6c5671.js";import"./InstituteFinanceTabChangeLink-4ab7a57f.js";import"./LoaderButton-71df50a7.js";import"./JoinForm.module-212f9bb3.js";const w=({onRefetch:h,bankDetail:r,setIndex:p})=>{const{t:c}=j(),[e,n]=d.useState({bankAccountHolderName:r==null?void 0:r.bankAccountHolderName,bankAccountNumber:r==null?void 0:r.bankAccountNumber,bankReAccountNumber:r==null?void 0:r.bankAccountNumber,bankIfscCode:r==null?void 0:r.bankIfscCode,bankAccountPhoneNumber:r==null?void 0:r.bankAccountPhoneNumber,bankAccountType:r==null?void 0:r.bankAccountType,razor_key:r==null?void 0:r.razor_key,razor_id:r==null?void 0:r.razor_id,re_razor_key:r==null?void 0:r.razor_key,re_razor_id:r==null?void 0:r.razor_id,razor_key_match:!1,razor_id_match:!1,razor_account:r==null?void 0:r.razor_account}),[y,z]=d.useState({msg:"",run:!1}),[f,m]=d.useState(!1),x=l(t=>t.idChange.id),[A]=C();d.useEffect(()=>{n({bankAccountHolderName:r==null?void 0:r.bankAccountHolderName,bankAccountNumber:r==null?void 0:r.bankAccountNumber,bankReAccountNumber:r==null?void 0:r.bankAccountNumber,bankIfscCode:r==null?void 0:r.bankIfscCode,bankAccountPhoneNumber:r==null?void 0:r.bankAccountPhoneNumber,bankAccountType:r==null?void 0:r.bankAccountType,razor_key:r==null?void 0:r.razor_key,razor_id:r==null?void 0:r.razor_id,re_razor_key:r==null?void 0:r.razor_key,re_razor_id:r==null?void 0:r.razor_id,razor_key_match:!1,razor_id_match:!1,razor_account:r==null?void 0:r.razor_account})},[r]);const N=t=>{t.preventDefault(),m(u=>!u),e.razor_account?e.razor_key!==e.re_razor_key||e.razor_id!==e.re_razor_id?(n(u=>({...u,razor_key_match:e.razor_key!==e.re_razor_key,razor_id_match:e.razor_id!==e.re_razor_id})),m(u=>!u)):A({editPassbook:{razor_key:e.razor_key,razor_id:e.razor_id,bankAccountPhoneNumber:e.bankAccountPhoneNumber,razor_account:e.razor_account},id:`${x}`}).then(()=>{h(),p(0),m(u=>!u)}).catch({}):e.bankAccountNumber===e.bankReAccountNumber&&e.bankIfscCode&&e.bankAccountHolderName?A({editPassbook:e,id:`${x}`}).then(()=>{h(),p(0),m(u=>!u)}).catch({}):(m(u=>!u),z({msg:e.bankAccountNumber!==e.bankReAccountNumber?c("form_account_dose_not_match_label"):"Check all the entered details carefully",run:!0}))},_=t=>{n(u=>({...u,[t.target.name]:t.target.value}))};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:s.linkform,children:o.jsxs("form",{onSubmit:N,children:[e.razor_account&&o.jsxs(o.Fragment,{children:[o.jsx(a,{labelText:c("merchant_secret_id"),name:"razor_id",type:"text",placeholder:c("please_enter_merchant_id_of_payment_gateway"),value:e.razor_id,onChange:_,customStyleLabel:{fontWeight:"600"}}),o.jsx(a,{labelText:c("confirm_merchant_secret_id"),name:"re_razor_id",type:"text",placeholder:c("re-enter_merchant_id_of_payment_gateway"),value:e.re_razor_id,onChange:_,customStyleLabel:{fontWeight:"600"},reAccount:e.razor_id_match?c("form_razor_id_dose_not_match_label"):""}),o.jsx(a,{labelText:c("razorpay_key"),name:"razor_key",type:"text",placeholder:c("please_enter_razorpay_key"),value:e.razor_key,onChange:_,customStyleLabel:{fontWeight:"600"}}),o.jsx(a,{labelText:c("confirm_razorpay_key"),name:"re_razor_key",type:"text",placeholder:c("re-enter_razorpay_key"),value:e.re_razor_key,onChange:_,customStyleLabel:{fontWeight:"600"},reAccount:e.razor_key_match?c("form_razor_key_dose_not_match_label"):""})]}),!e.razor_account&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:s.input,children:[o.jsx("h6",{children:c("acnt_holder")}),o.jsx("input",{type:"text",required:!0,placeholder:c("enter_name"),name:"bankAccountHolderName",value:e.bankAccountHolderName,onChange:t=>{n({...e,bankAccountHolderName:t.target.value})}})]}),o.jsxs("div",{className:s.input,children:[o.jsx("h6",{children:c("account_type")}),o.jsxs("select",{className:s.selectAccount,name:"bankAccountType",value:e.bankAccountType,onChange:t=>{n({...e,bankAccountType:t.target.value})},required:!0,children:[o.jsx("option",{value:"Select Account Type",disabled:!0,children:c("select_account_type")}),o.jsx("option",{value:"Saving",children:c("saving")}),o.jsx("option",{value:"Current",children:c("current")})]})]}),o.jsxs("div",{className:s.input,children:[o.jsx("h6",{children:c("account_holder")}),o.jsx("input",{type:"number",required:!0,placeholder:c("enter_account_no"),name:"bankAccountNumber",value:e.bankAccountNumber,onChange:t=>{n({...e,bankAccountNumber:t.target.value})}})]}),o.jsxs("div",{className:s.input,children:[o.jsx("h6",{children:c("confirm_account")}),o.jsx("input",{type:"number",required:!0,placeholder:c("please_confirm"),name:"bankReAccountNumber",value:e.bankReAccountNumber,onChange:t=>{n({...e,bankReAccountNumber:t.target.value})}})]}),o.jsxs("div",{className:s.input,children:[o.jsx("h6",{children:"IFSC Code"}),o.jsx("input",{type:"text",required:!0,placeholder:c("enter_ifsc"),pattern:"[a-zA-Z0-9]+",name:"bankIfscCode",value:e.bankIfscCode,onChange:t=>{n({...e,bankIfscCode:t.target.value})}})]})]}),o.jsxs("div",{className:s.input,children:[o.jsx("h6",{children:c("mobil_optional")}),o.jsx("input",{type:"text",pattern:"[789][0-9]{9}",placeholder:c("enter_mobile"),name:"bankAccountPhoneNumber",title:"Please enter valid phone number",value:e.bankAccountPhoneNumber,onChange:t=>{n({...e,bankAccountPhoneNumber:t.target.value})}})]}),o.jsx(i,{customStyleButton:{marginTop:"1vw"},type:"submit",disabled:f,buttonText:c("update")})]})}),o.jsx(g,{msg:y.msg,run:y.run,setRun:()=>z({msg:"",run:!1}),postiton:"bottom",type:"error"}),f&&o.jsx(v,{})]})};export{w as default};
