import{u,r as p,j as e,t as N}from"./index-0ca76035.js";import{v,aq as T,p as L,l as C,U as j,s as E,B as F,L as I}from"./FinanceConfig-24ef7fd2.js";import{s as m}from"./Income.module-200dd9e8.js";import{l as U}from"./localTime-4e51d139.js";import{R as Y}from"./ReminderMessageStudentList-c2ed7cf8.js";import"./PopupWrapper-2578092d.js";import"./Overlay-c8100e0a.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalWrapper-0fa3f9a3.js";import"./SearchModalBackdrop-c4f123e6.js";import"./SearchHeader.module-b69c8942.js";import"./BorderBottom-1dc6f53e.js";import"./FeesStructure.module-7a88fbbc.js";import"./PromoteDepartment.module-1bdd3b1d.js";import"./OsReminderStudentCard-1fa8be04.js";import"./EmptyInfo-dd58cebb.js";const f=({data:s})=>{var t,l,c;const{t:i}=u(),[x,h]=p.useState(!1),n=()=>{h(r=>!r)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:m.student_message_container,children:[e.jsxs("div",{className:m.text,children:[e.jsx("p",{className:m.rcv,children:i("message")}),e.jsx("h6",{children:(s==null?void 0:s.message)??""}),e.jsxs("p",{className:m.rcv,children:[i("by")," "," : ",(s==null?void 0:s.message_type)??"",s!=null&&s.from?`(${((t=s==null?void 0:s.from)==null?void 0:t.staffFirstName)??""} ${((l=s==null?void 0:s.from)==null?void 0:l.staffMiddleName)??""} ${((c=s==null?void 0:s.from)==null?void 0:c.staffLastName)??""})`:""]})]}),e.jsxs("div",{className:m.text,children:[e.jsxs("h6",{style:{cursor:"pointer",color:"#00f"},onClick:n,children:[i("student")," "," : "," ",(s==null?void 0:s.student_list_count)??0]}),e.jsxs("p",{className:m.rcv,children:[v(s==null?void 0:s.created_at).format("DD MMM, YYYY"),", ",U(s==null?void 0:s.created_at,"LT")]})]})]}),x&&e.jsx(Y,{studentList:s==null?void 0:s.student_list,onClose:n})]})},G=({instituteId:s})=>{const{t:i}=u(),[x,h]=p.useState(1),[n,t]=p.useState(!0),[l,c]=N(),{financeAllStudentMessageHistory:r,financeAllStudentMessageHistoryLoading:_}=T({data:{id:s,page:x,limit:10,flow:"INSTITUTE_ADMIN"},skip:!s});return p.useEffect(()=>{c&&n&&h(o=>o+1)},[c,n]),p.useEffect(()=>{r!=null&&r.length&&L(r==null?void 0:r.length,t)},[r==null?void 0:r.length]),e.jsxs(C,{children:[e.jsx(j,{children:e.jsx("div",{className:E.fm_header_container,children:e.jsx("h6",{children:i("student_message_history")})})}),e.jsx(F,{}),e.jsxs(j,{customStyle:{paddingTop:"0.3rem"},children:[_&&e.jsx(I,{}),r==null?void 0:r.map((o,g)=>(r==null?void 0:r.length)===g+1?e.jsx("div",{ref:l,children:e.jsx(f,{data:o})},o==null?void 0:o._id):e.jsx(f,{data:o},o==null?void 0:o._id))]})]})};export{G as default};
