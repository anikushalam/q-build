import{c as Ts,r as A,W as ls,ox as Ds,oy as ws,u as Fs,j as f,e as Us,Q as Os}from"./index-0ca76035.js";import{t as Ms,g as Is,h as Gs,T as Vs,j as Hs,U as Js,k as $s,V as Es,l as Rs,X as Ks,p as As,Y as qs,W as Qs,q as Ys}from"./constant_value-4cd2b3e0.js";import{B as Ws}from"./ButtonWithTypeSubmit-5c11ae9c.js";import{F as Xs}from"./FormCheckbox-35f4f970.js";import{J as $}from"./JoinFormFileEdit-10928ae7.js";import{J as B}from"./JoinFormInput-82706177.js";import{J as E}from"./JoinFormSelect-7025a8a4.js";import{J as zs}from"./JoinFormTextArea-394bf055.js";import{t as Zs}from"./institute-staff-student-api-7114d611.js";import{w as Ps}from"./timeComparison-f15c3247.js";import{s as _}from"./JoinForm.module-212f9bb3.js";import{B as U}from"./BorderBottom-1dc6f53e.js";import{J as Ss}from"./JoinFormCalender-d186c4ef.js";import"./LoaderButton-56f541f9.js";import"./UniversalForm.module-19614663.js";import"./FormControlLabel-b4cb2fc2.js";import"./SwitchBase-e3c2ff35.js";import"./Checkbox-d3fc23de.js";import"./ViewFileDialog-f7d48575.js";import"./Overlay-c8100e0a.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalBackdrop-c4f123e6.js";import"./SearchHeader.module-b69c8942.js";import"./DatePicker-c6d0e911.js";const gs=({sid:N})=>{const m=Ts(),[y,C]=A.useState({staffProfilePhoto:"",staffFirstName:"",staffMiddleName:"",staffLastName:"",staffDOB:"",staffGender:"",staffMotherName:"",staffBirthPlace:"",staffPhoneNumber:"",staffAadharNumber:"",staffQualification:"",staffNationality:"",staffReligion:"",staffCast:"",staffCastCategory:"",staffMTongue:"",staffCurrentAddress:"",staffCurrentPincode:"",staffAddress:"",staffPincode:"",staffPreviousSchool:"",addharFrontCard:"",addharBackCard:"",casteCertificate:"",identityDocument:"",joiningTransferLetter:"",leavingTransferCertificate:"",incomeCertificate:"",lastYearMarksheet:"",nationalityCertificate:"",domicileCertificate:"",nonCreamyLayerCertificate:"",staffBankName:"",staffBankAccountHolderName:"",staffBankAccount:"",staffBankIfsc:"",bankPassbook:"",current_designation:""}),[v,O]=A.useState(""),[n,M]=A.useState(!1),[w,j]=A.useState(!1),[T,J]=A.useState(""),[c]=ls(),[I]=Ds(),[G]=ws(),{oneStaffProfile:t,oneStaffProfileRefetch:F}=Zs({sid:N,skip:!N});A.useEffect(()=>{N&&F()},[N,F]),A.useEffect(()=>{var r,d,o,e,u,h,k,l,K,q,Q,Y,W,X,z,Z,P,S,g,x,b,i,L,ss,ts,as,rs,fs,cs,ds,os,ms,us,ps,hs,es,ys,ns,Cs,_s,Ns,ks,js;if(t!=null&&t.staff){C({staffProfilePhoto:((r=t==null?void 0:t.staff)==null?void 0:r.staffProfilePhoto)||"",staffFirstName:((d=t==null?void 0:t.staff)==null?void 0:d.staffFirstName)||"",staffMiddleName:((o=t==null?void 0:t.staff)==null?void 0:o.staffMiddleName)||"",staffLastName:((e=t==null?void 0:t.staff)==null?void 0:e.staffLastName)||"",staffDOB:((u=t==null?void 0:t.staff)==null?void 0:u.staffDOB)||"",staffGender:((h=t==null?void 0:t.staff)==null?void 0:h.staffGender)||"",staffMotherName:((k=t==null?void 0:t.staff)==null?void 0:k.staffMotherName)||"",staffBirthPlace:((l=t==null?void 0:t.staff)==null?void 0:l.staffBirthPlace)||"",staffPhoneNumber:((K=t==null?void 0:t.staff)==null?void 0:K.staffPhoneNumber)||"",staffAadharNumber:((q=t==null?void 0:t.staff)==null?void 0:q.staffAadharNumber)||"",staffQualification:((Q=t==null?void 0:t.staff)==null?void 0:Q.staffQualification)||"",staffNationality:((Y=t==null?void 0:t.staff)==null?void 0:Y.staffNationality)||"",staffReligion:((W=t==null?void 0:t.staff)==null?void 0:W.staffReligion)||"",staffCast:((X=t==null?void 0:t.staff)==null?void 0:X.staffCast)||"",staffCastCategory:((z=t==null?void 0:t.staff)==null?void 0:z.staffCastCategory)||"",staffMTongue:((Z=t==null?void 0:t.staff)==null?void 0:Z.staffMTongue)||"",staffCurrentAddress:((P=t==null?void 0:t.staff)==null?void 0:P.staffCurrentAddress)||"",staffCurrentPincode:((S=t==null?void 0:t.staff)==null?void 0:S.staffCurrentPincode)||"",staffAddress:((g=t==null?void 0:t.staff)==null?void 0:g.staffAddress)||"",staffPincode:((x=t==null?void 0:t.staff)==null?void 0:x.staffPincode)||"",staffPreviousSchool:((b=t==null?void 0:t.staff)==null?void 0:b.staffPreviousSchool)||"",addharFrontCard:((i=t==null?void 0:t.staff)==null?void 0:i.staffAadharFrontCard)||"",addharBackCard:((L=t==null?void 0:t.staff)==null?void 0:L.staffAadharBackCard)||"",casteCertificate:((ss=t==null?void 0:t.staff)==null?void 0:ss.staffCasteCertificatePhoto)||"",identityDocument:((ts=t==null?void 0:t.staff)==null?void 0:ts.staffIdentityDocument)||"",joiningTransferLetter:((as=t==null?void 0:t.staff)==null?void 0:as.staffJoiningTransferLetter)||"",leavingTransferCertificate:((rs=t==null?void 0:t.staff)==null?void 0:rs.staffLeavingTransferCertificate)||"",incomeCertificate:((fs=t==null?void 0:t.staff)==null?void 0:fs.staffIncomeCertificate)||"",lastYearMarksheet:((cs=t==null?void 0:t.staff)==null?void 0:cs.staffLastYearMarksheet)||"",nationalityCertificate:((ds=t==null?void 0:t.staff)==null?void 0:ds.staffNationalityCertificate)||"",domicileCertificate:((os=t==null?void 0:t.staff)==null?void 0:os.staffDomicileCertificate)||"",nonCreamyLayerCertificate:((ms=t==null?void 0:t.staff)==null?void 0:ms.staffNonCreamyLayerCertificate)||"",staffBankName:((us=t==null?void 0:t.staff)==null?void 0:us.staffBankName)||"",staffBankAccountHolderName:((ps=t==null?void 0:t.staff)==null?void 0:ps.staffBankAccountHolderName)||"",staffBankAccount:((hs=t==null?void 0:t.staff)==null?void 0:hs.staffBankAccount)||"",staffBankReAccount:((es=t==null?void 0:t.staff)==null?void 0:es.staffBankAccount)||"",staffBankIfsc:((ys=t==null?void 0:t.staff)==null?void 0:ys.staffBankIfsc)||"",bankPassbook:((ns=t==null?void 0:t.staff)==null?void 0:ns.staffBankPassbook)||"",current_designation:((Cs=t==null?void 0:t.staff)==null?void 0:Cs.current_designation)||""});for(let D of(_s=t==null?void 0:t.staff)==null?void 0:_s.staffDocuments)C(vs=>({...vs,[D==null?void 0:D.documentName]:D==null?void 0:D.documentKey}));O(`${(Ns=t==null?void 0:t.staff)==null?void 0:Ns.staffFirstName} ${((ks=t==null?void 0:t.staff)==null?void 0:ks.staffMiddleName)||""} ${((js=t==null?void 0:t.staff)==null?void 0:js.staffLastName)||""}`)}},[t==null?void 0:t.staff]),A.useEffect(()=>{if(v){const r=v.split(" ");r.length>=3?C(d=>({...d,staffFirstName:r[0],staffMiddleName:r[1],staffLastName:r.slice(2).toString().replaceAll(","," ")})):C(d=>({...d,staffFirstName:r[0],staffMiddleName:"",staffLastName:r[1]===void 0?"":r[1]}))}},[v]);const V=r=>{O(r.target.value)},H=r=>{C(d=>({...d,[r.target.name]:r.target.value}))},a=r=>{r.target.checked?(M(r.target.checked),C(d=>({...d,staffAddress:d.staffCurrentAddress,staffPincode:d.staffCurrentPincode}))):(M(r.target.checked),C(d=>({...d,staffAddress:"",staffPincode:""})))},s=["staffFirstName","staffLastName","staffDOB","staffGender"],p=r=>{const d={};for(let o in r)s.includes(o)&&!r[o]&&(d[o]=`${o} is required!`);return r.staffGender==="Please select your gender"&&(d.staffGender="staffGender is required!"),J(d),d},Bs=r=>{var e;r.preventDefault();const d=p({staffFirstName:y.staffFirstName,staffLastName:y.staffLastName,staffDOB:y.staffDOB,staffGender:y.staffGender});let o=!1;for(let u in d)if(u)return o=!0;if(!o)if(j(u=>!u),N){const u={staff:{},fileArray:[]};for(let h in y)Ms.includes(h)?(e=y[h])!=null&&e.originalName&&u.fileArray.push(y[h]):h==="staffProfilePhoto"||(u.staff[h]=y[h]);G({sid:N,editProfile:u}).then(h=>{j(k=>!k),m(-1)}).catch({})}else j(u=>!u)},R=(r,d,o,e)=>{C(u=>({...u,[r]:{originalName:d,name:r,key:o,type:e}}))};return{staff:y,fullName:v,sameAdd:n,disabled:w,onUpdateFullName:V,onUpdateInput:H,onAddressCheck:a,onFileUpload:r=>{j(o=>!o);const d=new FormData;y[`${r.target.name}`]?(d.append("file",r.target.files[0]),d.append("previousKey",y[`${r.target.name}`]),I({fileUpdate:d}).then(o=>{var e,u,h,k;(e=o.data)!=null&&e.imageKey&&R(r.target.name,(u=r.target.files[0])==null?void 0:u.name,(h=o.data)==null?void 0:h.imageKey,(k=r.target.files[0])==null?void 0:k.type),j(l=>!l)}).catch({})):(d.append("file",r.target.files[0]),c({fileUpload:d}).then(o=>{var e,u,h,k;(e=o.data)!=null&&e.imageKey&&R(r.target.name,(u=r.target.files[0])==null?void 0:u.name,(h=o.data)==null?void 0:h.imageKey,(k=r.target.files[0])==null?void 0:k.type),j(l=>!l)}).catch({}))},onUpdateForm:Bs,requiredField:T,onDateFunction:r=>{if(Ps(r)){let o=r==null?void 0:r.split("/"),e=`${o[2]}-${o[1]}-${o[0]}`;C(u=>({...u,staffDOB:e}))}}}},vt=({location:N})=>{var I,G,t,F,V,H;const{staff:m,fullName:y,sameAdd:C,disabled:v,onUpdateFullName:O,onUpdateInput:n,onAddressCheck:M,onFileUpload:w,onUpdateForm:j,requiredField:T,onDateFunction:J}=gs({sid:N==null?void 0:N.sid}),{t:c}=Fs();return f.jsxs("form",{onSubmit:j,children:[f.jsxs("div",{className:_.form_container,children:[f.jsxs("h4",{children:[c("form_personal_info_label"),":"]}),f.jsxs("div",{className:_.form_container_profile,children:[f.jsx(B,{labelText:c("form_name_label"),placeholder:c("form_name_placeholder"),name:"fullname",value:y,type:"text",onChange:O,customStyleContainer:{width:"86%"},errorShow:T.staffFirstName||T.staffLastName}),f.jsx("div",{className:_.form_container_profile_image,children:f.jsx("label",{className:_.form_container_profile_image_label,children:f.jsx("img",{className:_.form_container_profile_photo,src:m.staffProfilePhoto?`${Us}/${m.staffProfilePhoto}`:"/images/ins_default_profile.svg",alt:"student avatar"})})})]}),f.jsxs("div",{className:_.form_profile_info,children:[f.jsx(E,{selectLabel:c("form_gender_label"),selectedValue:c("form_gender_placeholder"),value:m.staffGender,name:"staffGender",onChange:n,options:Is,optionsValue:Gs,errorShow:T.staffGender}),f.jsx(Ss,{labelText:c("form_date_of_birth_label"),placeholder:c("form_date_of_birth_placeholder"),name:"staffDOB",value:m.staffDOB,onDateFunction:J,errorShow:T.staffDOB,customStyleContainer:{position:"relative"}}),f.jsx(B,{labelText:c("form_mother_name_label"),placeholder:c("form_mother_name_placeholder"),name:"staffMotherName",value:m.staffMotherName,type:"text",onChange:n})]}),f.jsx(U,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}}),f.jsxs("h4",{children:[c("form_other_personal_info_label"),":"]}),f.jsx("div",{className:_.form_other_field,children:(I=Vs.keys)==null?void 0:I.map(a=>Hs.map(s=>{var p;return((p=s==null?void 0:s.lists)==null?void 0:p.includes(a))&&(s!=null&&s.type?f.jsx(E,{selectLabel:c(s==null?void 0:s.label),selectedValue:m[a]?m[a]:c(s==null?void 0:s.placeHolder),value:m[a],name:a,onChange:n,options:s==null?void 0:s.chooseOptions,optionsValue:s==null?void 0:s.chooseOptionsValue,customStyleContainer:{width:"49.5%"}},s==null?void 0:s.id):f.jsx(B,{labelText:c(s==null?void 0:s.label),placeholder:c(s==null?void 0:s.placeHolder),name:a,value:m[a],type:["staffPhoneNumber","staffAadharNumber"].includes(a)?"tel":"text",inputLength:a==="staffPhoneNumber"?10:12,onChange:n,customStyleContainer:{width:"49.5%"}},s==null?void 0:s.id))}))}),f.jsx(U,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}}),f.jsxs("h4",{children:[c("form_identity_details_label"),":"]}),f.jsx("div",{className:_.form_other_field,children:(G=Js.keys)==null?void 0:G.map(a=>$s.map(s=>{var p;return((p=s==null?void 0:s.lists)==null?void 0:p.includes(a))&&(s!=null&&s.type?f.jsx(E,{selectLabel:c(s==null?void 0:s.label),selectedValue:m[a]?m[a]:c(s==null?void 0:s.placeHolder),value:m[a],onChange:n,options:s==null?void 0:s.chooseOptions,optionsValue:s==null?void 0:s.chooseOptionsValue,name:a,customStyleContainer:{width:"49.5%"}},s==null?void 0:s.id):f.jsx(B,{labelText:c(s==null?void 0:s.label),placeholder:c(s==null?void 0:s.placeHolder),name:a,value:m[a],type:"text",onChange:n,customStyleContainer:{width:"49.5%"}},s==null?void 0:s.id))}))}),f.jsx(U,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}}),f.jsxs("h4",{children:[c("form_address_info_label"),":"]}),f.jsx("div",{className:_.form_other_field,children:(t=Es.keys)==null?void 0:t.map(a=>Rs.map(s=>{var p;return((p=s==null?void 0:s.lists)==null?void 0:p.includes(a))&&(s!=null&&s.type?f.jsx(zs,{labelText:c(s==null?void 0:s.label),placeholder:c(s==null?void 0:s.placeHolder),name:a,value:m[a],type:"text",onChange:n,customStyleContainer:{width:"49.5%"}},s==null?void 0:s.id):s!=null&&s.checkbox?f.jsx(Xs,{checkLabel:c(s==null?void 0:s.label),checkedValue:C,onCheckboxAction:M,customStyle:{display:"block",width:"100%",marginLeft:"0"}},s==null?void 0:s.id):f.jsx(B,{labelText:c(s==null?void 0:s.label),placeholder:c(s==null?void 0:s.placeHolder),name:a,value:m[a],onChange:n,type:["staffCurrentPincode","staffPincode"].includes(a)?"tel":"text",inputLength:6,customStyleContainer:{width:"49.5%"}},s==null?void 0:s.id))}))}),f.jsx(U,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}}),f.jsxs("h4",{children:[c("form_previous_school_document_label"),":"]}),f.jsxs("div",{className:_.form_other_field,children:[(F=Ks.keys)==null?void 0:F.map(a=>As.map(s=>{var p;return((p=s==null?void 0:s.lists)==null?void 0:p.includes(a))&&(s!=null&&s.fileType?f.jsx($,{labelText:c(s==null?void 0:s.label),name:a,value:m[a],onChange:w,customStyleContainer:{width:"49.5%"}},s==null?void 0:s.id):s!=null&&s.checkbox?"":f.jsx(B,{labelText:c(s==null?void 0:s.label),placeholder:c(s==null?void 0:s.placeHolder),name:a,value:m[a],type:"text",onChange:n,customStyleContainer:{width:"49.5%"}},s==null?void 0:s.id))})),(V=qs.keys)==null?void 0:V.map(a=>As.map(s=>{var p;return((p=s==null?void 0:s.lists)==null?void 0:p.includes(a))&&f.jsx($,{labelText:c(s==null?void 0:s.label),name:a,value:m[a],onChange:w,customStyleContainer:{width:"49.5%"}},s==null?void 0:s.id)}))]}),f.jsx(U,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}}),f.jsxs("h4",{children:[c("form_staff_bank_details_label"),":"]}),f.jsx("div",{className:_.form_other_field,children:(H=Qs.keys)==null?void 0:H.map(a=>Ys.map(s=>{var p;return((p=s==null?void 0:s.lists)==null?void 0:p.includes(a))&&(s!=null&&s.fileType?f.jsx($,{labelText:c(s==null?void 0:s.label),name:a,value:m[a],onChange:w,customStyleContainer:{width:"49.5%"}},s==null?void 0:s.id):f.jsx(B,{labelText:c(s==null?void 0:s.label),placeholder:c(s==null?void 0:s.placeHolder),name:a,value:m[a],type:["staffBankAccount","staffBankReAccount"].includes(a)?"tel":"text",reAccount:"",inputLength:50,onChange:n,customStyleContainer:{width:"49.5%"}},s==null?void 0:s.id))}))}),f.jsx(Ws,{type:"submit",buttonText:c("update"),customStyleButton:{marginTop:"1.5vw"}})]}),v&&f.jsx(Os,{})]})};export{vt as default};
