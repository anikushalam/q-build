import{r as l,j as e,L as w,e as v,a1 as k,t as D,k as S,oC as C,S as T,nE as E}from"./index-731451a5.js";import{E as $}from"./EmptyInfo-7233226d.js";import{_ as A}from"./index-49ff1296.js";import{i as P}from"./image_extenstion-bbfb153e.js";import"./Radio-5967cf3b.js";import"./SwitchBase-2ba5f868.js";import"./Checkbox-1498c124.js";import"./DialogTitle-ba505e40.js";import"./Divider-6278282f.js";import"./FormControlLabel-1c6af80c.js";import"./Switch-81e70f2f.js";const U="_body_1c6yi_1",I="_loader_1c6yi_12",Y="_noData_1c6yi_23",F={body:U,loader:I,noData:Y},V="_item_14a1v_1",M="_head_14a1v_15",B="_text_14a1v_26",K="_content_14a1v_60",O="_bookmark_14a1v_75",_={item:V,head:M,text:B,content:K,bookmark:O};function b({data:s,Switch:n,setAnnId:a}){var u,p,f;const[m,h]=l.useState(!1);return e.jsxs("div",{className:_.item,children:[e.jsxs("div",{className:_.head,onClick:()=>{a(s&&s._id),n(!0)},children:[e.jsx(w,{to:`/q/${(u=s==null?void 0:s.institute)==null?void 0:u.name}/profile`,children:e.jsx("img",{alt:"Announcement",src:((p=s==null?void 0:s.institute)==null?void 0:p.photoId)!=="1"?`${v}/${s==null?void 0:s.institute.insProfilePhoto}`:"/images/ins_default_profile.svg"})}),e.jsxs("div",{className:_.text,children:[e.jsx("h6",{children:s&&(s==null?void 0:s.institute.name)}),e.jsxs("p",{children:[k(s==null?void 0:s.createdAt).format("MMM Do YY")," |"," ",k(s==null?void 0:s.createdAt).format("LT")]})]})]}),e.jsx("div",{className:_.content,children:e.jsx("p",{children:e.jsx("span",{onClick:()=>{a(s&&s._id),n(!0)},children:(f=s==null?void 0:s.insAnnTitle)==null?void 0:f.substr(0,130)})})}),m?e.jsx("img",{className:_.bookmark,src:"/images/bookmark-yellow.svg",onClick:()=>h(!m),alt:""}):e.jsx("img",{className:_.bookmark,src:"/images/bookmark-post.svg",onClick:()=>h(!m),alt:""})]})}function Q({Switch:s,setAnnId:n}){var N;const[a,m]=l.useState([]),[h,u]=D(),[p,f]=l.useState(!0),[g,j]=l.useState(1),c=S(t=>t.idChange),[x,i]=l.useState(!0),{data:o,refetch:y}=C({id:c==null?void 0:c.id,page:g,limit:10},{skip:!(c!=null&&c.id)});return l.useEffect(()=>{c!=null&&c.id&&(i(!0),y())},[c==null?void 0:c.id,g,y]),l.useEffect(()=>{u&&p&&j(t=>t+1)},[u,p]),l.useEffect(()=>{var t;if(o!=null&&o.announcement){const d=[...a,...o==null?void 0:o.announcement],q=[...new Set(d.map(JSON.stringify))].map(JSON.parse);m(q),i(!1)}else((t=o==null?void 0:o.announcement)==null?void 0:t.length)===0&&i(!1);(o==null?void 0:o.announcement.length)===10?f(!0):f(!1)},[o==null?void 0:o.announcement]),e.jsxs("div",{className:F.body,children:[a.map((t,d)=>(a==null?void 0:a.length)===d+1?e.jsx("div",{ref:h,children:e.jsx(b,{Switch:s,setAnnId:n,data:t||"",time:t==null?void 0:t.createdAt,date:t==null?void 0:t.createdAt,text:t==null?void 0:t.insAnnDescription})},d):e.jsx(b,{Switch:s,setAnnId:n,data:t||"",time:t==null?void 0:t.createdAt,date:t==null?void 0:t.createdAt,text:t==null?void 0:t.insAnnDescription},d)),x&&e.jsx(T,{}),!x&&!((N=o==null?void 0:o.announcement)!=null&&N.length)&&e.jsx($,{customStyleContainer:{marginTop:"5rem",height:"inherit"},title:"No announcement created yet."})]})}const R="_imgcontainer_kq6hf_1",G="_eachposthead_kq6hf_12",J="_eachpostUserName_kq6hf_18",z="_eachpostUserTime_kq6hf_35",H="_details_kq6hf_48",W="_tille_kq6hf_58",X="_description_kq6hf_68",Z="_hashTag_kq6hf_78",L="_hashtag_kq6hf_95",ee="_loader_kq6hf_100",se="_anndoc_kq6hf_117",ne="_documentContainer_kq6hf_112",r={imgcontainer:R,eachposthead:G,eachpostUserName:J,eachpostUserTime:z,public:"_public_kq6hf_44",details:H,tille:W,description:X,hashTag:Z,hashtag:L,loader:ee,anndoc:se,documentContainer:ne};function te({annId:s}){var h,u,p,f,g,j,c,x;const{data:n,isFetching:a,refetch:m}=E(s,{skip:!s});return l.useEffect(()=>{s&&m()},[s,m]),e.jsx("div",{className:r.details,children:a?e.jsx(e.Fragment,{children:e.jsx("div",{className:r.loader,children:e.jsx("img",{src:"/images/loader/loader-bg-white.gif",alt:""})})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:r.eachposthead,children:[e.jsx("div",{className:r.imgcontainer,children:e.jsx("img",{alt:"not found",src:((h=n==null?void 0:n.announcement)==null?void 0:h.institute.photoId)!=="1"?`${v}/${(p=(u=n==null?void 0:n.announcement)==null?void 0:u.institute)==null?void 0:p.insProfilePhoto}`:"/images/ins_default_profile.svg"})}),e.jsxs("div",{className:r.eachpostUserName,children:[e.jsx("h6",{children:n&&n.announcement&&((f=n.announcement.institute)==null?void 0:f.insName)}),e.jsxs("div",{className:r.eachpostUserTime,style:{display:"flex",gap:"0.5vw",alignItems:"center"},children:[e.jsx("p",{children:n&&k((g=n.announcement)==null?void 0:g.createdAt).format("DD-M-YYYY")}),((j=n==null?void 0:n.announcement)==null?void 0:j.insAnnVisibility)==="Private"?e.jsx("img",{className:r.public,src:"/images/post-private-icon.svg",alt:"Private"}):e.jsx("img",{className:r.public,src:"/images/privacy-icon.svg",alt:"Public"})]})]})]}),e.jsxs("div",{className:r.Container,children:[e.jsx("p",{className:r.tille,children:n&&((c=n.announcement)==null?void 0:c.insAnnTitle)}),e.jsx("hr",{}),e.jsxs("p",{className:r.description,style:{whiteSpace:"break-spaces"},children:[n&&((x=n.announcement)==null?void 0:x.insAnnDescription)," "]}),e.jsx("p",{className:r.description}),e.jsx("div",{className:r.documentContainer,children:e.jsx(A,{className:"Example",autoPlay:!1,indicators:!0,navButtonsAlwaysVisible:!1,navButtonsAlwaysInvisible:!1,next:(i,o)=>{},prev:(i,o)=>{},onChange:(i,o)=>{},children:n==null?void 0:n.announcement.announcementDocument.map(i=>i.documentType==="image/jpeg"||i.documentType==="image/png"||P(i==null?void 0:i.documentKey)?e.jsx("div",{className:r.anndoc,children:e.jsx("img",{className:r.selectedImg,src:`${v}/${i==null?void 0:i.documentKey}`,alt:i==null?void 0:i.documentName,style:{width:"100%",height:"auto"}})}):e.jsx("div",{className:r.anndoc,children:e.jsx("a",{title:"Download File",href:`https://d3dqpu54js2vfl.cloudfront.net/${i==null?void 0:i.documentKey}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{className:r.selectedImg,src:"/images/pdf-icon.png",alt:i==null?void 0:i.documentName,style:{width:"100%",height:"auto"}})})}))})})]})]})})}function _e(){const[s,n]=l.useState(!1),[a,m]=l.useState("");return e.jsx(e.Fragment,{children:s?e.jsx(te,{annId:a&&a}):e.jsx(Q,{Switch:h=>n(h),setAnnId:m})})}export{_e as default};
