import{u as ye,c as xe,k as je,r as m,W as be,w as ge,j as c,Q as ve,D as Ce,C as Ne,d as ke,s as Te}from"./index-0ca76035.js";import{s as ee}from"./AdmisionAdmin.module-940a8610.js";import{s as l}from"./AdmissionSiteInfo.module-332fbdef.js";import{J as F}from"./JoinFormTextArea-394bf055.js";import{B as we}from"./BorderBottom-1dc6f53e.js";import{J as D}from"./JoinFormInput-82706177.js";import{J as Fe}from"./JoinFormFileEdit-10928ae7.js";import{J as ae}from"./JoinFormSelect-7025a8a4.js";import{o as Se}from"./search-api-b192a53f.js";import{L as Ue,M as De}from"./constant_value-4cd2b3e0.js";import{j as Ee,k as Je,l as Ke}from"./setting-api-673e672b.js";import{J as te}from"./JoinFormFilee-268327e0.js";import"./JoinForm.module-212f9bb3.js";import"./ViewFileDialog-f7d48575.js";import"./Overlay-c8100e0a.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalBackdrop-c4f123e6.js";import"./SearchHeader.module-b69c8942.js";function Le({aid:_,viewAs:x,instituteId:b}){var G;const{t:n}=ye(),ce=xe(),f=je(e=>{var s;return(s=e.idChange)==null?void 0:s.id}),[se,y]=m.useState(!1),[E]=be();m.useState([]),m.useState("");const[ne,J]=m.useState(""),[K,L]=m.useState(""),[ie,R]=m.useState(!1),[O,oe]=m.useState(!1),[Re,P]=m.useState(""),[$,me]=m.useState(""),[p,g]=m.useState({academic_about:"",academic_head:"",academic_photo:"",academic_rules:[],academic_mechanism:[],academic_student_feedback:[],academic_ict_faculty:[],academic_peer:[],academic_development_courses:[],academic_results:[],academic_toppers:[],academic_student_survey:[],academic_annual_report:[],academic_action_plan:[],academic_calendar:[],academic_suggestion:[]}),S=[{fileheading:"dean_academic_rules",filename:"academic_rules"},{fileheading:"academic_mechanism",filename:"academic_mechanism"},{fileheading:"academic_student_feedback",filename:"academic_student_feedback"},{fileheading:"academic_ict_faculty",filename:"academic_ict_faculty"},{fileheading:"academic_peer",filename:"academic_peer"},{fileheading:"academic_development_courses",filename:"academic_development_courses"},{fileheading:"academic_results",filename:"academic_results"},{fileheading:"academic_toppers",filename:"academic_toppers"},{fileheading:"academic_student_survey",filename:"academic_student_survey"},{fileheading:"academic_annual_report",filename:"academic_annual_report"},{fileheading:"academic_action_plan",filename:"academic_action_plan"}],[N,k]=m.useState([]),[le]=Ee(),[de]=Je(),[T,B]=m.useState([{name:"",email:"",subject:"",compliant:"",stake_type:"",phone_number:""}]),{assignSearchStaff:U,assignSearchStaffRefetch:Oe}=Se({skip:x==="ADMISSION_ADMIN"?!b:!f,search:{search:"",page:1,id:x==="ADMISSION_ADMIN"?b:f,limit:500}}),{data:Pe,refetch:M}=ge(f,{skip:x==="INSTITUTE"?!0:!f}),{getAcademicSiteInfo:a,getAcademicSiteInfoRefetch:Q}=Ke({aid:_,skip:!_});m.useEffect(()=>{_&&Q()},[_,Q]),m.useEffect(()=>{f&&M()},[f,M]),m.useEffect(()=>{var e,s,t,i,o,r,d,h,C,u,W,q,H,X,Y,Z,I;if(a!=null&&a.academic&&(g({academic_about:((e=a==null?void 0:a.academic)==null?void 0:e.academic_about)??"",academic_head:((s=a==null?void 0:a.academic)==null?void 0:s.academic_head)??"",academic_photo:((t=a==null?void 0:a.academic)==null?void 0:t.academic_photo)??"",academic_rules:(i=a==null?void 0:a.academic)==null?void 0:i.academic_rules,academic_mechanism:(o=a==null?void 0:a.academic)==null?void 0:o.academic_mechanism,academic_student_feedback:(r=a==null?void 0:a.academic)==null?void 0:r.academic_student_feedback,academic_ict_faculty:(d=a==null?void 0:a.academic)==null?void 0:d.academic_ict_faculty,academic_peer:(h=a==null?void 0:a.academic)==null?void 0:h.academic_peer,academic_development_courses:(C=a==null?void 0:a.academic)==null?void 0:C.academic_peer,academic_results:(u=a==null?void 0:a.academic)==null?void 0:u.academic_results,academic_toppers:(W=a==null?void 0:a.academic)==null?void 0:W.academic_toppers,academic_student_survey:(q=a==null?void 0:a.academic)==null?void 0:q.academic_student_survey,academic_annual_report:(H=a==null?void 0:a.academic)==null?void 0:H.academic_annual_report,academic_action_plan:(X=a==null?void 0:a.academic)==null?void 0:X.academic_action_plan}),(Z=(Y=a==null?void 0:a.academic)==null?void 0:Y.academic_calendar)!=null&&Z.length)){let A=[];for(let j of(I=a==null?void 0:a.academic)==null?void 0:I.academic_calendar){let fe={calendar_name:j==null?void 0:j.calendar_name,calendar:j==null?void 0:j.calendar};A.push(fe)}k(A)}},[a==null?void 0:a.admission_site]),m.useEffect(()=>{g(e=>({...e,[$]:N}))},[N,$]),m.useEffect(()=>{g(e=>({...e,academic_suggestion:T}))},[T]);const re=()=>{ce(-1)},_e=(e,s,t,i)=>{console.info(e),y(r=>!r);const o=new FormData;o.append("file",e),E({fileUpload:o}).then(r=>{var C;let d={documentType:"",documentName:"",documentSize:"",documentKey:""};d.documentType=e.type,d.documentName=e.name,d.documentSize=e.size,d.documentKey=(C=r.data)==null?void 0:C.imageKey,i.push(d.documentKey);const h=[...N];for(let u=0;u<(h==null?void 0:h.length);u++)u===t&&(h[u][s]=d.documentKey);k(h),y(u=>!u)}).catch({})},V=(e,s)=>{var i;const t=[];if((i=e.target.files)!=null&&i.length)for(let o in e.target.files)typeof e.target.files[o]=="object"&&_e(e.target.files[o],e.target.name,s,t)},pe=e=>{if(e.target.files[0]){const s=URL.createObjectURL(e.target.files[0]);L(e.target.files[0]),P(s),J(s),R(!0)}},w=(e,s)=>{if(e.target.name==="academic_about"||e.target.name==="academic_head")g(t=>({...t,[e.target.name]:e.target.value}));else{const t=[...N];for(let i=0;i<(t==null?void 0:t.length);i++)i===s&&(t[i][e.target.name]=e.target.value);k(t)}},v=(e,s)=>{B(i=>({...i,[e.target.name]:e.target.value}));const t=[...T];for(let i=0;i<(t==null?void 0:t.length);i++)i===s&&(t[i][e.target.name]=e.target.value);B(t)},ue=e=>{if(e){y(t=>!t);const s=new FormData;s.append("file",e),E({fileUpload:s}).then(t=>{var i;(i=t.data)!=null&&i.imageKey&&g(o=>{var r;return{...o,academic_photo:(r=t.data)==null?void 0:r.imageKey}}),y(o=>!o)}).catch({})}};m.useEffect(()=>{O&&ue(K)},[O,K]);const z=e=>{me(e),k([...p[e],{calendar_name:"",calendar:[],name:"",file:[]}])},he=()=>{y(e=>!e),_?de({aid:_,updateSiteInfo:{otherField:p}}).then(()=>{y(e=>!e)}).catch({}):le({id:f,updateSiteInfo:{otherField:p}}).then(()=>{y(e=>!e)}).catch({})};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:l.bgContainer,children:c.jsxs("div",{className:l.container,children:[c.jsxs("div",{className:l.containerhead,children:[c.jsx("h6",{children:n("academics_")}),c.jsx("img",{src:"/images/close-post-icon.svg",alt:"",onClick:re})]}),c.jsx(we,{customStyle:{width:"100%",marginBottom:"1rem"}}),c.jsxs("div",{className:l.containercontent,children:[c.jsxs("div",{className:l.container_inner_content,children:[c.jsx("h6",{style:{marginTop:"1.5rem"},children:n("dean_academics")}),c.jsx(F,{labelText:n("about_dean_academics"),placeholder:n("about_dean_academics_placeholder"),name:"academic_about",value:p.academic_about,type:"text",onChange:w,customStyleContainer:{width:"100%"}}),c.jsxs("div",{className:l.show_field,style:{alignItems:"flex-start"},children:[c.jsx(ae,{selectLabel:n("select_dean_academic"),selectedValue:n("select_dean_placeholder"),value:p.academic_head,name:"academic_head",onChange:w,options:U==null?void 0:U.staff,openAs:"academicSiteInfo",customStyleContainer:{width:"49.5%"}}),c.jsx(Fe,{labelText:n("academic_photo"),name:"academic_photo",value:p.academic_photo,onChange:pe,customStyleContainer:{width:"49.5%"}})]}),c.jsx("h6",{style:{marginTop:"1.5rem"},children:n("academic_calendar")}),c.jsx("div",{className:l.add_contact_person,children:(G=p==null?void 0:p.academic_calendar)==null?void 0:G.map((e,s)=>{var t,i;return c.jsxs("div",{className:l.show_field,style:{alignItems:"flex-start"},children:[c.jsx(F,{labelText:n("calendar_name"),placeholder:n("calendar_name_placeholder"),name:"calendar_name",value:e.calendar_name,type:"text",onChange:o=>w(o,s),customStyleContainer:{width:"48%"}}),c.jsx(te,{acceptType:"application/pdf",labelText:n("calendar_file"),index:s,multiple:!1,onChange:o=>V(o,s),errorShow:!1,customStyleContainer:{width:"48%"},name:"calendar",labelname:`academic_calendar_${s}`,value:Object.keys(e==null?void 0:e.calendar).length>0?{originalName:(t=e==null?void 0:e.calendar)==null?void 0:t.documentName,key:(i=e==null?void 0:e.calendar)==null?void 0:i.documentKey,isPdf:!0}:""})]})})}),c.jsx("button",{className:l.add_contact_person_btn,title:"Add Calendar",onClick:()=>z("academic_calendar"),children:n("add_calendar")}),S==null?void 0:S.map((e,s)=>c.jsxs(c.Fragment,{children:[c.jsx("h6",{style:{marginTop:"1.5rem"},children:n(`${e==null?void 0:e.fileheading}`)}),c.jsx("div",{className:l.add_contact_person,children:p[`${e==null?void 0:e.filename}`].map((t,i)=>{var o,r;return c.jsxs("div",{className:l.show_field,style:{alignItems:"flex-start"},children:[c.jsx(F,{labelText:n("file_name"),placeholder:n("enter_file_name"),name:"name",value:t.name,type:"text",onChange:d=>w(d,i),customStyleContainer:{width:"48%"}}),c.jsx(te,{acceptType:"application/pdf",labelText:n("file"),index:i,multiple:!1,onChange:d=>V(d,i),errorShow:!1,customStyleContainer:{width:"48%"},name:"file",labelname:`${e==null?void 0:e.filename}_${i}`,value:Object.keys(t==null?void 0:t.file).length>0?{originalName:(o=t==null?void 0:t.file)==null?void 0:o.documentName,key:(r=t==null?void 0:t.file)==null?void 0:r.documentKey,isPdf:!0}:""})]})})}),c.jsx("button",{className:l.add_contact_person_btn,title:"Add Rules",onClick:()=>z(`${e==null?void 0:e.filename}`),children:n("add_file")})]})),c.jsx("h6",{style:{marginTop:"1.5rem"},children:n("suggestion_feedback")}),T.map((e,s)=>c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:l.show_field,style:{alignItems:"flex-start"},children:[c.jsx(D,{labelText:n("name"),placeholder:n("enter_name"),name:"name",value:e==null?void 0:e.name,type:"text",onChange:t=>v(t,s),customStyleContainer:{width:"49.5%"}}),c.jsx(ae,{selectLabel:n("type_of_stake"),selectedValue:n("type_of_stake"),value:e.stake_type,name:"stake_type",onChange:t=>v(t,s),options:Ue,optionsValue:De,customStyleContainer:{width:"49.5%"}})]}),c.jsxs("div",{className:l.show_field,style:{alignItems:"flex-start"},children:[c.jsx(D,{labelText:n("email"),placeholder:n("email_id_details"),name:"email",value:e==null?void 0:e.email,type:"email",onChange:t=>v(t,s),customStyleContainer:{width:"49.5%"}}),c.jsx(D,{labelText:n("mobile_bumber"),placeholder:n("enter_mobile_number"),name:"phone_number",value:e==null?void 0:e.phone_number,type:"text",onChange:t=>v(t,s),customStyleContainer:{width:"49.5%"}})]}),c.jsx("div",{className:l.show_field,style:{alignItems:"flex-start"},children:c.jsx(F,{labelText:n("complaint"),placeholder:n("enter_complaint"),name:"compliant",value:e.compliant,type:"text",onChange:t=>v(t,s),customStyleContainer:{width:"100%"}})})]}))]}),c.jsx("button",{className:l.update_btn,onClick:he,children:n(_?"update":"add")})]})]})}),se&&c.jsx(ve,{}),c.jsx(Ce,{open:ie,children:c.jsx(Ne,{setPhotoURL:J,photoURL:ne,setFile:L,setOpenCrop:R,setUpload:oe,setProfilePhoto:P,first:1,second:1})})]})}function ca(){var x,b;const _=ke();return c.jsxs("div",{className:ee.insChat,children:[c.jsx("div",{className:ee.navbarr,children:c.jsx(Te,{status:"home"})}),((x=_.search)==null?void 0:x.substring(3))==="site"&&c.jsx(Le,{aid:(b=_.state)==null?void 0:b.aid,viewAs:"INSTITUTE"})]})}export{ca as default};
