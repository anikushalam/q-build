import{u as E,r as _,c as j,j as e,Q as u}from"./index-0ca76035.js";import{P as M}from"./PopupWrapper-2578092d.js";import{B as F}from"./BorderBottom-1dc6f53e.js";import{s as i}from"./FeesStructure.module-7a88fbbc.js";import{J as D}from"./JoinFormTextArea-394bf055.js";import{o as P,p as b}from"./institute-staff-student-api-7114d611.js";const G=({onClose:c,messageId:s,headId:d,viewAs:o,sendStudentList:n,isInstitute:N,isStudentProfile:f,carryParentState:T,toRedirectUrl:I,instituteId:m})=>{const{t:r}=E(),[g,l]=_.useState(!1),[p,x]=_.useState(!1),[A]=P(),[S]=b(),[t,h]=_.useState({alarm_mode:"APP_NOTIFICATION",content:""}),y=j(),O=()=>{t.content?f?s&&t.alarm_mode&&(n==null?void 0:n.length)>0&&m&&(l(a=>!a),S({sendMessage:{message:t.content,from:d??"",type:o==="ADMISSION_ADMIN"?"Admission Head":o==="FINANCE_MANAGER"?"Finance Head":o==="CERTIFICATE_AUTHORITY"?"Certificate Authority":o==="STUDENT_SECTION"?"Student Section":o==="ID_CARD_SECTION"?"Id Card Authority":"Institute Admin",fid:s??"",alarm_mode:t.alarm_mode,sid:n,flow:N?"INSTITUTE_ADMIN":"Other"},id:m}).then(()=>{c(),l(a=>!a)}).catch({})):s&&t.alarm_mode&&(n==null?void 0:n.length)>0&&m&&(l(a=>!a),A({sendMessage:{message:t.content,from:d??"",type:o==="ADMISSION_ADMIN"?"Admission Head":o==="FINANCE_MANAGER"?"Finance Head":o==="CERTIFICATE_AUTHORITY"?"Certificate Authority":o==="STUDENT_SECTION"?"Student Section":o==="ID_CARD_SECTION"?"Id Card Authority":"Institute Admin",fid:s??"",alarm_mode:t.alarm_mode,filtered_arr:n,flow:N?"INSTITUTE_ADMIN":"Other"},id:m}).then(()=>{c(),y(I,{state:T}),l(a=>!a)}).catch({})):x(!0)};return e.jsxs(M,{onClose:c,children:[e.jsx("div",{className:i.add_category_modal,style:{width:"30rem",minHeight:"10rem",height:"fit-content",maxHeight:"35rem",overflowX:"hidden",scrollBehavior:"smooth"},children:e.jsxs("section",{className:i.fee_middle_section_container,style:{marginBottom:"1.2rem"},children:[e.jsx("h6",{style:{fontSize:"20px",fontWeight:"600"},children:r("student_message")}),e.jsx(F,{customStyle:{width:"100%",marginTop:"0.7rem",marginBottom:"1rem"}}),e.jsxs("section",{className:i.notify_container,onClick:()=>h(a=>({...a,alarm_mode:"APP_NOTIFICATION"})),children:[e.jsx("img",{src:t.alarm_mode==="APP_NOTIFICATION"?"/images/department/radio-blue-icon.svg":"/images/department/radio-gray-icon.svg",alt:"icon"}),e.jsxs("div",{className:i.notify_text,children:[e.jsx("h6",{children:r("Notify_with_In_app_Notification")}),e.jsx("p",{children:r("Notify_with_In_app_Notification_note")})]})]}),e.jsxs("section",{className:i.notify_container,children:[e.jsx("img",{src:t.alarm_mode==="EMAIL_NOTIFICATION"?"/images/department/radio-blue-icon.svg":"/images/department/radio-gray-icon.svg",alt:"icon"}),e.jsxs("div",{className:i.notify_text,children:[e.jsx("h6",{children:r("Notify_On_Email_and_SMS")}),e.jsx("p",{children:r("Notify_On_Email_and_SMS_note")})]})]}),t.alarm_mode==="APP_NOTIFICATION"&&e.jsx(D,{labelText:r("student_message_label"),placeholder:r("student_message_label_placeholder"),name:"content",value:t.content,type:"text",onChange:a=>h(C=>({...C,content:a.target.value})),errorShow:p}),e.jsx("button",{onClick:O,className:i.fee_middle_confirm_button,style:{marginTop:"4rem"},children:r("confirm")})]})}),g&&e.jsx(u,{})]})};export{G as S};
