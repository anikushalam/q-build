import{u as g,j as a,lH as M,r as d,t as P}from"./index-0ca76035.js";import{n as y,v as C,S as F,p as L,q as D,l as Y,U as f,s as e,r as k,B as w,L as B}from"./FinanceConfig-24ef7fd2.js";const E="_exemption_card_1hrbv_1",T="_exemption_card_text_1hrbv_23",V="_exemption_card_name_1hrbv_26",W="_exemption_card_amount_1hrbv_27",q="_exemption_card_batch_1hrbv_28",h={exemption_card:E,exemption_card_text:T,exemption_card_name:V,exemption_card_amount:W,exemption_card_batch:q},N=({exemption:s})=>{var c,u,j,o,i,_,v,b,n;const{t:l}=g();return a.jsxs("section",{className:h.exemption_card,children:[a.jsx("img",{src:(c=s==null?void 0:s.student)!=null&&c.studentProfilePhoto?`${M}/${(u=s==null?void 0:s.student)==null?void 0:u.studentProfilePhoto}`:`${y}/feed-user-avatar.svg`,alt:"student avatar"}),a.jsxs("div",{className:h.exemption_card_text,children:[a.jsxs("div",{className:h.exemption_card_name,children:[a.jsx("h6",{children:`${(j=s==null?void 0:s.student)==null?void 0:j.studentFirstName} ${(o=s==null?void 0:s.student)!=null&&o.studentMiddleName?(i=s==null?void 0:s.student)==null?void 0:i.studentMiddleName:""} ${(_=s==null?void 0:s.student)==null?void 0:_.studentLastName}`}),a.jsxs("h6",{children:[l("rs")," ",(s==null?void 0:s.fee_payment_amount)??0]})]}),a.jsxs("div",{className:h.exemption_card_amount,children:[a.jsx("p",{children:l("admission_fees_paid")}),a.jsx("p",{children:((v=s==null?void 0:s.student)==null?void 0:v.admissionPaidFeeCount)??0})]}),a.jsxs("div",{className:h.exemption_card_batch,children:[a.jsx("p",{children:`(${((n=(b=s==null?void 0:s.student)==null?void 0:b.batches)==null?void 0:n.batchName)??""})`}),a.jsx("p",{children:C(s==null?void 0:s.fee_transaction_date).format("DD MMM YYYY")})]})]})]})},R=({fid:s,exemptBalance:l})=>{const{t:c}=g(),[u,j]=d.useState(""),[o,i]=d.useState(1),[_,v]=d.useState(!0),[b,n]=P({skip:u}),{financeAllExemption:t,financeAllExemptionLoading:m}=F({data:{fid:s,page:o,limit:2},skip:!s});d.useEffect(()=>{n&&_&&i(r=>r+1)},[n,_]),d.useEffect(()=>{t!=null&&t.length&&L(financeFeeList==null?void 0:financeFeeList.length,v)},[t==null?void 0:t.length]);const S=d.useCallback(D(r=>j(r),500),[]),$=r=>{S(r.target.value)};return a.jsxs(Y,{children:[a.jsx(f,{children:a.jsxs("div",{className:e.fm_header_container,children:[a.jsx("h6",{children:c("exemption_unrecovered")}),a.jsx("div",{className:e.fm_search,children:a.jsx("section",{className:e.fm_search_container,children:a.jsxs("div",{className:e.fm_search_container_inner,children:[a.jsx("img",{className:e.fm_search_icon,alt:"search icon",src:`${k}/navbar-search.svg`}),a.jsx("input",{type:"text",placeholder:c("search"),onChange:$})]})})})]})}),a.jsx(w,{}),a.jsxs(f,{customStyle:{paddingTop:"0"},children:[a.jsx("p",{className:e.fm_all_time_data,children:c("all_time_data")}),a.jsxs("h6",{className:e.fm_total_amount,children:[c("total_amount")," ",c("rs")," ",l??0]}),m&&a.jsx(B,{}),t==null?void 0:t.map((r,U)=>(t==null?void 0:t.length)===U+1?a.jsx("div",{ref:b,children:a.jsx(N,{exemption:r})},r==null?void 0:r._id):a.jsx(N,{exemption:r},r==null?void 0:r._id))]})]})};export{R as default};
