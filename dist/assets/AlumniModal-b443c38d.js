import{u as W,r as i,k as z,t as J,oA as K,a8 as X,g as Y,aQ as Z,c as b,y as ss,j as e,D as es,e as C,oB as D}from"./index-731451a5.js";import{B as ts}from"./ButtonWithAction-805b1066.js";import{D as A}from"./Divider-6278282f.js";import"./LoaderButton-71df50a7.js";const as="_admissionModal_920vi_1",os="_admissionModalhead_920vi_7",is="_admissionModalbody_920vi_16",ns="_admissionModalfooter_920vi_19",cs="_assignManager_920vi_23",ms="_searchbar_920vi_29",ls="_sidebarbottomitem_920vi_66",fs="_namee_920vi_82",ds="_desig_920vi_93",hs="_items_920vi_104",rs="_financebtn_920vi_122",us="_activebtn_920vi_134",gs="_assignDesignation_920vi_147",_s="_peventinputContainer_920vi_177",ps="_pollTextareah_920vi_181",xs="_switchContainerh_920vi_182",vs="_pollTextarea_920vi_181",a={admissionModal:as,admissionModalhead:os,admissionModalbody:is,admissionModalfooter:ns,assignManager:cs,searchbar:ms,sidebarbottomitem:ls,namee:fs,desig:ds,items:hs,financebtn:rs,activebtn:us,assignDesignation:gs,peventinputContainer:_s,pollTextareah:ps,switchContainerh:xs,pollTextarea:vs};function k({img:_,photoId:d,name:m,index:t,setIndex:p,assignAdmissionHead:n}){const x=()=>{n(),p(t)};return e.jsxs("div",{className:a.sidebarbottomitem,onClick:x,children:[e.jsx("img",{alt:"not found",src:d!=="1"?`${C}/${_}`:"/images/member_tab/class/default_avatar.svg"}),e.jsxs("div",{children:[e.jsx("p",{className:a.namee,children:m}),e.jsx("p",{className:a.desig,children:t})]})]})}function As({openModal:_,hideModal:d,edit:m,librarian:t,onParentRefetch:p}){const{t:n}=W(),[x,u]=i.useState(!1),l=z(s=>s.idChange),[w,E]=i.useState(!1),[F,O]=i.useState(!1),[L,R]=i.useState(""),[v,Q]=i.useState(1),[f,H]=i.useState([]),[Ns,P]=J(),[B]=K(),[q]=X(),S=Y(),h=document.querySelector("textarea");h==null||h.addEventListener("keyup",s=>{h.style.height="auto";let c=s.target.scrollHeight;h.style.height=`${c}px`});const{data:g,refetch:js}=Z({id:l==null?void 0:l.id,page:v,limit:10},{skip:!(l!=null&&l.id)});i.useEffect(()=>{g&&(g.staffIns?H([...f,...g.staffIns]):v>1&&E(!0))},[g]),i.useEffect(()=>{P&&(w||Q(v+1))},[P]),i.useEffect(()=>{setTimeout(()=>{O(!F)},3e3)},[]);const V=b(),{data:N}=ss(),[r,j]=i.useState(!1),[M,$]=i.useState(!1),[o,y]=i.useState({sid:"",name:"",index:"",photoId:"",profilePhoto:""}),G=()=>{u(!0),B({id:l.id,passegeData:{sid:o==null?void 0:o.sid,alumini_passage:L}}).then(s=>{var c,T;S(D.alumniQuery({aid:(c=s.data)==null?void 0:c.alumini})),u(!1),V(`/q/${(T=N==null?void 0:N.institute)==null?void 0:T.name}/alumni`)})},U=()=>{o.sid!==""&&(u(!0),q({osid:t==null?void 0:t._id,nsid:o.sid}).then(s=>{var c;S(D.alumniQuery({aid:(c=s.data)==null?void 0:c.alumini})),p(),y({...o,sid:""}),$(!M),j(!r),u(!1),d()}))},I=f==null?void 0:f.filter(s=>(s==null?void 0:s._id)!==(t==null?void 0:t._id));return e.jsx(es,{open:_,onClose:()=>d(!1),children:e.jsxs("div",{className:a.admissionModal,children:[e.jsxs("div",{className:a.admissionModalhead,children:[e.jsx("h6",{children:n(m?"edit_alumin_dept":"active_alumin")}),e.jsx("img",{onClick:()=>d(!1),src:"/images/close-post-icon.svg",alt:""})]}),e.jsx(A,{}),e.jsxs("div",{className:a.admissionModalbody,children:[!r&&!m&&e.jsxs("div",{className:a.assignDesignation,onClick:()=>j(!0),children:[e.jsx("img",{className:a.assignManager,src:"/images/sports/avatar-circle.svg",alt:""}),e.jsxs("div",{children:[e.jsx("h6",{children:n("assign_alumin_head")}),e.jsx("p",{children:n("search_from_joined_list")})]})]}),!r&&m&&e.jsxs("div",{className:a.sidebarbottomitem,onClick:()=>j(!0),children:[e.jsx("img",{alt:"not found",src:(t==null?void 0:t.photoId)!=="1"?`${C}/${t==null?void 0:t.staffProfilePhoto}`:"/images/member_tab/class/default_avatar.svg"}),e.jsxs("div",{children:[e.jsx("p",{className:a.namee,children:`${(t==null?void 0:t.staffFirstName)||""} ${t!=null&&t.staffMiddleName?t==null?void 0:t.staffMiddleName:""} ${(t==null?void 0:t.staffLastName)||""}`}),e.jsxs("p",{className:a.desig,children:[" ",n("index_no")," ",t==null?void 0:t.index]})]})]}),r&&!M&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:a.searchbar,children:[e.jsx("input",{type:"text",placeholder:n("search"),className:`form-control ${a.searchinput}`}),e.jsx("img",{className:a.searchIcon,alt:"img",src:"/images/search-dash-icon.svg"})]}),e.jsx("div",{className:a.items,children:m?I==null?void 0:I.map(s=>e.jsxs(e.Fragment,{children:[e.jsx(k,{img:s.staffProfilePhoto,photoId:s.photoId,name:`${s.staffFirstName} ${s.staffMiddleName?s.staffMiddleName:""} ${s.staffLastName}`,index:s.staffROLLNO,setIndex:c=>$(!0),assignAdmissionHead:()=>{y({...o,sid:s==null?void 0:s._id,name:`${s==null?void 0:s.staffFirstName} ${s!=null&&s.staffMiddleName?s==null?void 0:s.staffMiddleName:""} ${s==null?void 0:s.staffLastName}`,index:s==null?void 0:s.staffROLLNO,photoId:s==null?void 0:s.photoId,profilePhoto:s==null?void 0:s.staffProfilePhoto})}}),e.jsx(A,{})]})):f==null?void 0:f.map(s=>e.jsxs(e.Fragment,{children:[e.jsx(k,{img:s.staffProfilePhoto,photoId:s.photoId,name:`${s.staffFirstName} ${s.staffMiddleName?s.staffMiddleName:""} ${s.staffLastName}`,index:s.staffROLLNO,setIndex:c=>$(!0),assignAdmissionHead:()=>{y({...o,sid:s==null?void 0:s._id,name:`${s==null?void 0:s.staffFirstName} ${s!=null&&s.staffMiddleName?s==null?void 0:s.staffMiddleName:""} ${s==null?void 0:s.staffLastName}`,index:s==null?void 0:s.staffROLLNO,photoId:s==null?void 0:s.photoId,profilePhoto:s==null?void 0:s.staffProfilePhoto})}}),e.jsx(A,{})]}))})]}),r&&M&&e.jsxs("div",{children:[e.jsxs("div",{className:a.sidebarbottomitem,children:[e.jsx("img",{alt:"not found",src:o.photoId!=="1"?`${C}/${o.profilePhoto}`:"/images/member_tab/class/default_avatar.svg"}),e.jsxs("div",{children:[e.jsx("p",{className:a.namee,children:o.name}),e.jsxs("p",{className:a.desig,children:["Index No. ",o.index]})]})]}),e.jsx("div",{className:a.peventinputContainer,children:e.jsx("textarea",{className:a.pollTextarea,id:"pollTextArea",type:"text",required:!0,placeholder:n("write_something_"),value:L,onChange:s=>R(s.target.value)})})]})]}),e.jsx("div",{className:a.admissionModalfooter,children:e.jsx("div",{children:e.jsx(ts,{disabled:x,shwoLoader:!0,buttonText:n(m?"edit_":"activate"),customStyleButton:{minHeight:"2rem",marginTop:"0rem"},onAction:m?U:G})})})]})})}export{As as default};
