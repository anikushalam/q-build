import{u as q,c as z,r as p,W as D,k as H,w as M,j as a,x as V,Q as X}from"./index-731451a5.js";import{J as C}from"./JoinFormTextArea-7f6dded0.js";import{J as Y}from"./JoinFormFileEdit-e41481d6.js";import{B as Z}from"./BorderBottom-47800983.js";import{J as f}from"./JoinFormInput-8e74a0e0.js";import{a as $,b as G}from"./department-api-a4f0b4b7.js";const ee="_navbar_1uhg4_1",te="_bgContainer_1uhg4_10",ne="_container_1uhg4_13",ae="_containercontent_1uhg4_24",_e="_containerhead_1uhg4_27",se="_site_tab_container_1uhg4_45",oe="_site_tab_container_h6_1uhg4_60",re="_site_tab_container_h6_active_1uhg4_68",ie="_container_inner_content_1uhg4_84",ce="_show_field_1uhg4_91",le="_leading_person_container_1uhg4_98",de="_leading_person_text_1uhg4_112",me="_update_btn_1uhg4_133",pe="_add_contact_person_1uhg4_149",he="_add_contact_person_btn_1uhg4_162",ue="_labelContainer_1uhg4_180",ge="_label_1uhg4_180",be="_inputBox_1uhg4_193",xe="_add_supporting_member_1uhg4_222",ve="_add_supporting_member_heading_1uhg4_234",Ce="_flexItem50_1uhg4_246",fe="_fileinputflexContainer_1uhg4_250",je="_input_label_1uhg4_251",ye="_labelspan_1uhg4_261",we="_formselect_1uhg4_265",Ne="_input_border_active_1uhg4_280",Te="_genderh_1uhg4_288",Fe="_genderplaceholder_1uhg4_297",Ue="_upIcon_1uhg4_301",Ee="_downIcon_1uhg4_308",ke="_site_theme_1uhg4_314",Be="_site_theme_header_1uhg4_317",Ie="_site_theme_container_1uhg4_327",Je="_site_theme_icon_1uhg4_334",i={navbar:ee,bgContainer:te,container:ne,containercontent:ae,containerhead:_e,site_tab_container:se,site_tab_container_h6:oe,site_tab_container_h6_active:re,container_inner_content:ie,show_field:ce,leading_person_container:le,leading_person_text:de,update_btn:me,add_contact_person:pe,add_contact_person_btn:he,labelContainer:ue,label:ge,inputBox:be,add_supporting_member:xe,add_supporting_member_heading:ve,flexItem50:Ce,fileinputflexContainer:fe,input_label:je,labelspan:ye,formselect:we,input_border_active:Ne,genderh:Te,genderplaceholder:Fe,upIcon:Ue,downIcon:Ee,site_theme:ke,site_theme_header:Be,site_theme_container:Ie,site_theme_icon:Je},Oe=({did:h,viewAs:w})=>{var F,U,E,k;const{t:_}=q(),P=z(),[K,g]=p.useState(!1),[d,j]=p.useState({department_vission:"",department_mission:"",department_hod_message:"",department_about:"",department_image:""}),[c,y]=p.useState([{contact_department_name:"",contact_person_name:"",contact_person_mobile:"",contact_person_email:""}]),{departmentGetSiteInfo:t,departmentGetSiteInfoRefetch:N}=$({did:h,skip:!h}),[Q]=D(),[R]=G(),b=H(n=>n.idChange.id),{data:o,refetch:T}=M(b,{skip:w==="INSTITUTE"?!0:!b});p.useEffect(()=>{b&&T()},[b,T]),p.useEffect(()=>{h&&N()},[h,N]),p.useEffect(()=>{var n,s,e,l,m,u,B,I;if(t!=null&&t.department_site&&(j({department_vission:(n=t==null?void 0:t.department_site)==null?void 0:n.department_vission,department_mission:(s=t==null?void 0:t.department_site)==null?void 0:s.department_mission,department_hod_message:(e=t==null?void 0:t.department_site)==null?void 0:e.department_hod_message,department_about:(l=t==null?void 0:t.department_site)==null?void 0:l.department_about,department_image:(m=t==null?void 0:t.department_site)==null?void 0:m.department_image}),(B=(u=t==null?void 0:t.department_site)==null?void 0:u.department_contact)!=null&&B.length)){let J=[];for(let r of(I=t==null?void 0:t.department_site)==null?void 0:I.department_contact){let W={contact_department_name:r==null?void 0:r.contact_department_name,contact_person_name:r==null?void 0:r.contact_person_name,contact_person_mobile:r==null?void 0:r.contact_person_mobile,contact_person_email:r==null?void 0:r.contact_person_email,contactId:r==null?void 0:r._id};J.push(W)}y(J)}},[t==null?void 0:t.department_site]);const A=()=>{y(n=>[...n,{contact_department_name:"",contact_person_name:"",contact_person_mobile:"",contact_person_email:""}])},x=(n,s)=>{const e=[...c];for(let l=0;l<(e==null?void 0:e.length);l++)l===s&&(e[l][n.target.name]=n.target.value);y(e)},L=()=>{P(-1)},O=n=>{g(e=>!e);const s=new FormData;s.append("file",n.target.files[0]),Q({fileUpload:s}).then(e=>{var l;(l=e.data)!=null&&l.imageKey&&j(m=>{var u;return{...m,department_image:(u=e.data)==null?void 0:u.imageKey}}),g(m=>!m)}).catch({})},v=n=>{j(s=>({...s,[n.target.name]:n.target.value}))},S=()=>{var n,s;g(e=>!e),R({did:h,updateSiteInfo:{...d,department_contact:c==null?void 0:c.filter(e=>e!=null&&e.contactId?"":e),edit_department_contact:c==null?void 0:c.filter(e=>e!=null&&e.contactId?e:""),previousKey:((n=t==null?void 0:t.department_site)==null?void 0:n.department_image)===d.department_image?"":(s=t==null?void 0:t.department_site)==null?void 0:s.department_image}}).then(()=>{g(e=>!e)}).catch({})};return a.jsxs("div",{className:i.bgContainer,children:[w==="INSTITUTE"?null:a.jsx("div",{className:i.navbar,children:a.jsx(V,{status:"members",profileData:o==null?void 0:o.user,username:(F=o==null?void 0:o.user)==null?void 0:F.username,name:(U=o==null?void 0:o.user)==null?void 0:U.userLegalName,photoId:(E=o==null?void 0:o.user)==null?void 0:E.photoId,profilePhoto:(k=o==null?void 0:o.user)==null?void 0:k.profilePhoto})}),a.jsxs("div",{className:i.container,children:[a.jsxs("div",{className:i.containerhead,children:[a.jsx("h6",{children:_("update_department_site_info")}),a.jsx("img",{src:"/images/close-post-icon.svg",alt:"",onClick:L})]}),a.jsx(Z,{customStyle:{width:"100%"}}),a.jsx("div",{className:i.containercontent,children:a.jsxs("div",{className:i.container_inner_content,children:[a.jsxs("div",{className:i.show_field,children:[a.jsx(C,{labelText:_("vision"),placeholder:_("department_vision_placeholder"),name:"department_vission",value:d.department_vission,type:"text",onChange:v,customStyleContainer:{width:"69.5%"}}),a.jsx(Y,{labelText:_("department_Image"),name:"department_image",value:d.department_image,onChange:O,customStyleContainer:{width:"29.5%"}})]}),a.jsx(C,{labelText:_("mission"),placeholder:_("department_mission_placeholder"),name:"department_mission",value:d.department_mission,type:"text",onChange:v,customStyleContainer:{width:"100%"}}),a.jsx(C,{labelText:_("about_department"),placeholder:_("about_department_placeholder"),name:"department_about",value:d.department_about,type:"text",onChange:v,customStyleContainer:{width:"100%"}}),a.jsx(C,{labelText:_("hod_message"),placeholder:_("hod_message_placeholder"),name:"department_hod_message",value:d.department_hod_message,type:"text",onChange:v,customStyleContainer:{width:"100%"}}),a.jsxs("div",{className:i.add_contact_person,children:[a.jsx("h6",{children:_("add_contact_persons")}),c==null?void 0:c.map((n,s)=>a.jsxs("div",{children:[a.jsxs("div",{className:i.show_field,children:[a.jsx(f,{labelText:_("site_department_name"),placeholder:_("site_department_name_placeholder"),name:"contact_department_name",value:n==null?void 0:n.contact_department_name,type:"text",onChange:e=>x(e,s),customStyleContainer:{width:"49.5%"}}),a.jsx(f,{labelText:_("contact_person_name"),placeholder:_("contact_person_name_placeholder"),name:"contact_person_name",value:n==null?void 0:n.contact_person_name,type:"text",onChange:e=>x(e,s),customStyleContainer:{width:"49.5%"}})]}),a.jsxs("div",{className:i.show_field,children:[a.jsx(f,{labelText:_("contact_person_mobile"),placeholder:_("contact_person_mobile_placeholder"),name:"contact_person_mobile",value:n==null?void 0:n.contact_person_mobile,type:"text",onChange:e=>x(e,s),customStyleContainer:{width:"49.5%"}}),a.jsx(f,{labelText:_("contact_person_email"),placeholder:_("contact_person_email_placeholder"),name:"contact_person_email",value:n==null?void 0:n.contact_person_email,type:"email",onChange:e=>x(e,s),customStyleContainer:{width:"49.5%"}})]})]},s))]}),a.jsx("button",{className:i.add_contact_person_btn,title:"Add Contact Person",onClick:A,children:_("add_contact_person")}),K&&a.jsx(X,{}),a.jsx("button",{className:i.update_btn,onClick:S,children:_("update")})]})})]})]})};export{Oe as D};
