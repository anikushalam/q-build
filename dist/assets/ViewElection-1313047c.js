import{j as u,r as c,t as q,e as F,S as J,u as B,R as D,a1 as N}from"./index-731451a5.js";import{aa as Q,ab as U}from"./department-api-a4f0b4b7.js";import{s as o}from"./ElectionCard.module-4dd482f8.js";const z=({customStyle:M,children:e})=>u.jsx("div",{className:o.election_card_container,style:{...M},children:e}),H=({onViewOneApplyCandidate:M,electionId:e,oneApplyDetail:_})=>{const[b,t]=c.useState(!0),[h,r]=c.useState(1),[w,R]=q(),[m,i]=c.useState([]),[S,g]=c.useState(!0),{departmentOneElectionAllCandidate:f,departmentOneElectionAllCandidateRefetch:y}=Q({data:{eid:e,page:_===""?1:h,limit:10},skip:!e});return c.useEffect(()=>{R&&b&&r(s=>s+1)},[R,b]),c.useEffect(()=>{e&&_===""&&(g(!0),y())},[h,e,y,_]),c.useEffect(()=>{var s,j;if(f!=null&&f.all_candidates)if(_==="")i(f==null?void 0:f.all_candidates),g(!1);else{const l=[...m,...f==null?void 0:f.all_candidates],x=[...new Set(l.map(JSON.stringify))].map(JSON.parse);i(x),g(!1)}else((s=f==null?void 0:f.all_candidates)==null?void 0:s.length)===0&&g(!1);((j=f==null?void 0:f.all_candidates)==null?void 0:j.length)===10?t(!0):t(!1)},[f==null?void 0:f.all_candidates,_]),u.jsxs(u.Fragment,{children:[m==null?void 0:m.map((s,j)=>{var l,x,v,$,V,k,P,T,G,L;return(m==null?void 0:m.length)===j+1?u.jsxs("div",{ref:w,className:(_==null?void 0:_._id)===(s==null?void 0:s._id)?`${o.candidate_member} ${o.candidate_member_selected}`:o.candidate_member,onClick:()=>M(s),children:[u.jsx("img",{src:`${F}/${(l=s==null?void 0:s.student)==null?void 0:l.studentProfilePhoto}`,alt:"elections static icon",style:{borderRadius:"50%"}}),u.jsxs("div",{children:[u.jsx("h6",{className:o.candidate,style:{margin:"0"},children:`${(x=s==null?void 0:s.student)==null?void 0:x.studentFirstName} ${((v=s==null?void 0:s.student)==null?void 0:v.studentMiddleName)||""} ${($=s==null?void 0:s.student)==null?void 0:$.studentLastName}`}),u.jsxs("p",{className:o.candidate_gr,children:["GRNO. ",(V=s==null?void 0:s.student)==null?void 0:V.studentGRNO]})]})]},s==null?void 0:s._id):u.jsxs("div",{className:(_==null?void 0:_._id)===(s==null?void 0:s._id)?`${o.candidate_member} ${o.candidate_member_selected}`:o.candidate_member,onClick:()=>M(s),children:[u.jsx("img",{src:`${F}/${(k=s==null?void 0:s.student)==null?void 0:k.studentProfilePhoto}`,alt:"elections static icon",style:{borderRadius:"50%"}}),u.jsxs("div",{children:[u.jsx("h6",{className:o.candidate,style:{margin:"0"},children:`${(P=s==null?void 0:s.student)==null?void 0:P.studentFirstName} ${((T=s==null?void 0:s.student)==null?void 0:T.studentMiddleName)||""} ${(G=s==null?void 0:s.student)==null?void 0:G.studentLastName}`}),u.jsxs("p",{className:o.candidate_gr,children:["GRNO. ",(L=s==null?void 0:s.student)==null?void 0:L.studentGRNO]})]})]},s==null?void 0:s._id)}),S&&u.jsx(J,{})]})},Y=({onViewOneApplyCandidate:M,onViewResultOfApplyCandidate:e,electionId:_,oneApplyDetail:b,status:t})=>{var m,i,S,g,f,y,s,j;const{t:h}=B(),{departmentOneElection:r,departmentOneElectionRefetch:w}=U({id:t==="studentElection"?_:_==null?void 0:_.electionId,skip:!_});D.useEffect(()=>{var l;(t==="studentElection"?_:_!=null&&_.electionId)&&((l=document.getElementById("scrollToTop"))==null||l.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}))},[t==="studentElection"?_:_==null?void 0:_.electionId]),D.useEffect(()=>{(t==="studentElection"?_:_!=null&&_.electionId)&&w()},[t==="studentElection"?_:_==null?void 0:_.electionId,w]),D.useEffect(()=>{var l,x,v,$;((l=r==null?void 0:r.elect)==null?void 0:l.result_notification)==="Declare"&&e({totalVoter:(x=r==null?void 0:r.elect)==null?void 0:x.election_total_voter,totalVoteCasted:(v=r==null?void 0:r.elect)==null?void 0:v.election_vote_cast,candidateList:($=r==null?void 0:r.elect)==null?void 0:$.election_candidate})},[r==null?void 0:r.elect]);const R=l=>{var x;((x=r==null?void 0:r.elect)==null?void 0:x.result_notification)!=="Declare"&&M(l)};return u.jsxs(z,{customStyle:{width:t==="studentElection"?"100%":"486px",height:"fit-content"},children:[u.jsxs("div",{className:o.election_card_title,id:"scrollToTop",children:[u.jsx("img",{src:"/images/members/election-icon.svg",alt:"elections static icon"}),u.jsx("h6",{className:o.create_new_elections,children:(m=r==null?void 0:r.elect)==null?void 0:m.election_position})]}),u.jsx("hr",{className:o.create_new_elections_hr}),u.jsxs("div",{className:o.election_info,style:{marginTop:"15px"},children:[u.jsx("h6",{children:h("election_detials")}),u.jsxs("p",{children:[h("apply_from")," ",N((i=r==null?void 0:r.elect)==null?void 0:i.election_app_start_date).format("DD MMM")," ",h("to")," ",N((S=r==null?void 0:r.elect)==null?void 0:S.election_app_end_date).format("DD MMM yyyy")]}),u.jsxs("p",{children:[h("candidate_selection")," ",N((g=r==null?void 0:r.elect)==null?void 0:g.election_selection_date).format("DD MMM yyyy")]}),u.jsxs("p",{children:[h("start_campaign")," ",N((f=r==null?void 0:r.elect)==null?void 0:f.election_campaign_date).format("DD MMM")," ",h("to"),N((y=r==null?void 0:r.elect)==null?void 0:y.election_campaign_last_date).format("DD MMM yyyy")]}),u.jsxs("p",{children:[h("voting_date"),N((s=r==null?void 0:r.elect)==null?void 0:s.election_voting_date).format("DD MMM yyyy")]}),u.jsxs("p",{children:[h("result_declare")," ",N((j=r==null?void 0:r.elect)==null?void 0:j.election_result_date).format("DD MMM yyyy")]})]}),u.jsx("hr",{className:o.create_new_elections_hr1}),u.jsxs("div",{className:o.candidate_container,children:[u.jsx("p",{className:o.candidate,children:h("candidate")}),u.jsx(H,{onViewOneApplyCandidate:R,electionId:t==="studentElection"?_:_==null?void 0:_.electionId,oneApplyDetail:b})]})]})};export{z as E,Y as V};
