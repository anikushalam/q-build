import{n as le,j as s,L as re,u as z,e as he,a1 as Ne,r as o,t as de,k as Ee,S as ne,Q as se,c as ce,v as ae,ad as us,H as ls,l as Se,N as Qe,d as ve,R as ws,_ as ks,kX as Te,W as hs,w as Ps,x as Ts,D as Fs,C as $s}from"./index-731451a5.js";import{i as ze,j as Os,k as Rs,l as Ls,m as As,n as as,o as Bs,p as Us,q as Ms,r as Vs,s as Ds,t as fs,v as qs,w as Ws,x as Js,y as Is,z as Gs,A as Hs,B as Qs,C as zs,D as Xs,E as Ys,F as Xe,G as Ks,H as Zs,I as ps,J as et,K as st,L as tt,M as nt,g as ot,N as it,O as rt,P as dt,Q as ct,R as mt,S as _t,T as ut,b as lt,U as ht,V as at}from"./admission-api-56b87fde.js";import{B as p}from"./BorderBottom-47800983.js";import ft from"./AssignStaffModal-61be8e90.js";import{C as Oe}from"./CustomNormalSelectInput-9ec7329b.js";import{P as me}from"./PopupWrapper-ffbaef7a.js";import{s as J}from"./AdmissionModerator.module-e8abdfd3.js";import{O as Ye}from"./Overlay-07ce6f88.js";import{S as Ke}from"./SearchModalBackdrop-5b309d60.js";import{s as Ce}from"./EditConfirm.module-344fbdb9.js";import{s as _e}from"./AdmisisonRefund.module-c6c85188.js";import{s as Fe}from"./Funds.module-95df49a8.js";import{C as be}from"./CustomSelectDepartment-a5dd9a35.js";import{c as gt}from"./constant_value-4cd2b3e0.js";import{a as xt}from"./finance-api-5c6c5671.js";import{A as jt}from"./AdmissionExportEdit-055c7a3d.js";import{s as h}from"./AdmissionApplicationRequest.module-43e4e129.js";import{A as Nt,C as bt}from"./CreateAdmissionApplication-3142beca.js";import{A as St}from"./AdmissionApplicationDetail-39b2aa3d.js";import{d as Ct}from"./hostel-api-4d11cb04.js";import{U as gs}from"./UniversalTab-d4f2174c.js";import{C as Et}from"./CustomSuspense-e90dc607.js";import{S as xs}from"./SelectFeeStructure-05d0a31f.js";import{P as js}from"./PaymentModeType-cf3d04e2.js";import{J as ue}from"./JoinFormInput-8e74a0e0.js";import{J as Ns}from"./JoinFormCalender-5158d888.js";import{a as Ze}from"./pdf-convertor-function-e794de58.js";import{r as pe}from"./main.receipt.pdf.worker-5753b302.js";import{C as ss}from"./ClassCard-ebc64e14.js";import{s as ge}from"./FeesStructure.module-7a88fbbc.js";import{s as $e}from"./PromoteDepartment.module-1bdd3b1d.js";import{J as He}from"./JoinFormTextArea-7f6dded0.js";import{O as vt}from"./OsReminderStudentCard-db46fbab.js";import{E as yt}from"./EmptyInfo-7233226d.js";import{A as wt}from"./AllStudentFilter-2a0b02e0.js";import{s as ke}from"./RemainingFees.module-bd1517de.js";import{s as xe}from"./AdmissionSiteInfo.module-332fbdef.js";import{J as kt}from"./JoinFormFileEdit-e41481d6.js";const es=({carryParentState:e,activeTab:i,children:t})=>{const d=le();return s.jsx(re,{to:`/q/${d.username}/admission${i}`,state:{...e},children:t})},Pt=({setActivePopup:e,selectedApplication:i,selectedStaff:t,moderatorState:d,onAssignModerator:m})=>{const{t:c}=z(),_=()=>{};return s.jsx(me,{children:s.jsxs("div",{className:J.assign_role_container,children:[s.jsxs("section",{className:J.assign_role_title,children:[s.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:_,alt:"back icon"}),s.jsx("h6",{children:c("preview")})]}),s.jsx(p,{customStyle:{width:"100%"}}),s.jsxs("section",{className:J.selected_staff_container,children:[s.jsx("img",{src:t!=null&&t.staffProfilePhoto?`${he}/${t==null?void 0:t.staffProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),s.jsxs("div",{className:J.selected_staff_text,children:[s.jsx("h6",{children:`${t==null?void 0:t.staffFirstName} ${(t==null?void 0:t.staffMiddleName)??""} ${t==null?void 0:t.staffLastName}`}),s.jsxs("p",{children:[c("index_number"),t==null?void 0:t.staffROLLNO]})]})]}),s.jsx("section",{style:{padding:"0.8rem"},children:s.jsx(Oe,{selectLabel:c("select_role_of_moderator"),selectedValue:c("please_select_role"),value:(d==null?void 0:d.mod_role)==="ALL_FEE_ACCESS"?"Fee receipt authority":(d==null?void 0:d.mod_role)==="MULTI_APP_ACCESS"?"Application Manager":(d==null?void 0:d.mod_role)==="INQUIRY_ACCESS"?"Enquiries Section":"FULL_ACCESS",openAs:"REFUND"})}),i==null?void 0:i.map(n=>{var g;return s.jsxs("div",{className:J.application_card,children:[s.jsx("img",{src:"/images/admision-application-icon.svg",alt:"application icon"}),s.jsxs("section",{className:J.application_card_text,children:[s.jsx("h6",{children:(n==null?void 0:n.applicationName)??""}),s.jsxs("div",{className:J.application_card_text_bottom,children:[s.jsx("p",{children:((g=n==null?void 0:n.applicationDepartment)==null?void 0:g.dName)??""}),n!=null&&n.applicationEndDate?s.jsx("p",{children:Ne(n==null?void 0:n.applicationEndDate).format("DD/MM/yyyy")}):""]})]})]},n==null?void 0:n._id)}),s.jsxs("section",{style:{padding:"0.8rem"},children:[s.jsxs("button",{className:J.select_application_btn,onClick:()=>e("SELECT_APPLICATION"),children:[s.jsx("div",{children:c("add_more")}),s.jsx("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]}),s.jsxs("button",{className:J.assign_btn,onClick:m,children:[c("assign")," "]})]})]})})},Tt=({onCloseEdit:e,setActivePopup:i,selectedStaff:t,moderatorState:d,onSelectRole:m,onUpdateModerator:c,selectedApplication:_})=>{const{t:n}=z();return s.jsx(s.Fragment,{children:s.jsx(me,{onClose:e,children:s.jsxs("div",{className:J.assign_role_container,children:[s.jsxs("section",{className:J.assign_role_title,children:[s.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:e,alt:"back icon",style:{cursor:"pointer"}}),s.jsx("h6",{children:n("update_role_to_moderator")})]}),s.jsx(p,{customStyle:{width:"100%"}}),s.jsxs("section",{className:J.selected_staff_container,onClick:()=>i("OPEN_STAFF_LIST"),children:[s.jsx("img",{src:t!=null&&t.staffProfilePhoto?`${he}/${t==null?void 0:t.staffProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),s.jsxs("div",{className:J.selected_staff_text,children:[s.jsx("h6",{children:`${t==null?void 0:t.staffFirstName} ${(t==null?void 0:t.staffMiddleName)??""} ${t==null?void 0:t.staffLastName}`}),s.jsxs("p",{children:[n("index_number"),t==null?void 0:t.staffROLLNO]})]})]}),s.jsxs("section",{style:{padding:"0.8rem"},children:[s.jsx(Oe,{selectLabel:n("select_role_of_moderator"),selectedValue:n("please_select_role"),options:["Fee receipt authority","Application Manager","Enquiries Section","Scholarship Manager","Excess Fee Refund","Pending Fee Manager","Tab Authority","Data Export Authority"],value:(d==null?void 0:d.mod_role)==="ALL_FEE_ACCESS"?"Fee receipt authority":(d==null?void 0:d.mod_role)==="MULTI_APP_ACCESS"?"Application Manager":(d==null?void 0:d.mod_role)==="INQUIRY_ACCESS"?"Enquiries Section":(d==null?void 0:d.mod_role)==="SCHOLARSHIP_ACCESS"?"Scholarship Manager":(d==null?void 0:d.mod_role)==="REFUND_ACCESS"?"Access Fee Moderator":(d==null?void 0:d.mod_role)==="PENDING_FEE_ACCESS"?"Pending Fee Manager":(d==null?void 0:d.mod_role)==="ONE_TAB_ACCESS"?"Tab Authority":(d==null?void 0:d.mod_role)==="DATA_EXPORT_ACCESS"?"Data Export Authority":"",onClick:m}),_==null?void 0:_.map(g=>{var j;return s.jsxs("div",{className:J.application_card,style:{width:"100%",margin:"1rem 0 0"},children:[s.jsx("img",{src:"/images/admision-application-icon.svg",alt:"application icon"}),s.jsxs("section",{className:J.application_card_text,children:[s.jsx("h6",{children:(g==null?void 0:g.applicationName)??""}),s.jsxs("div",{className:J.application_card_text_bottom,children:[s.jsx("p",{children:((j=g==null?void 0:g.applicationDepartment)==null?void 0:j.dName)??""}),g!=null&&g.applicationEndDate?s.jsx("p",{children:Ne(g==null?void 0:g.applicationEndDate).format("DD/MM/yyyy")}):""]})]})]},g==null?void 0:g._id)}),(d==null?void 0:d.mod_role)==="MULTI_APP_ACCESS"&&s.jsxs("button",{className:J.select_application_btn,onClick:()=>i("SELECT_APPLICATION"),children:[s.jsx("div",{children:n("moderator_select_application")}),s.jsx("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]}),s.jsxs("button",{className:J.assign_btn,onClick:c,children:[n("update")," "]})]})]})})})},Ft=({setActivePopup:e,setSelectedApplication:i,setSelectedApplicationId:t,selectedApplicationId:d,openAs:m,role:c})=>{const{t:_}=z(),[n,g]=o.useState(!0),[j,x]=o.useState(1),[w,f]=de(),[E,C]=o.useState([]),[v,k]=o.useState(!0),$=Ee(l=>l.admissionChange),{allOngoingApp:N,allOngoingAppRefetch:T}=ze({data:{aid:$==null?void 0:$.aid,page:j,limit:10},skip:!($!=null&&$.aid)});o.useEffect(()=>{f&&n&&x(l=>l+1)},[f,n]),o.useEffect(()=>{$!=null&&$.aid&&(k(!0),T())},[$==null?void 0:$.aid,j,T]),o.useEffect(()=>{$!=null&&$.aid&&(k(!0),T())},[$==null?void 0:$.aid,T]),o.useEffect(()=>{var l;N!=null&&N.ongoing&&(C(b=>[...new Set([...b,...N==null?void 0:N.ongoing].map(JSON.stringify))].map(JSON.parse)),k(!1)),((l=N==null?void 0:N.ongoing)==null?void 0:l.length)===10?g(!0):g(!1)},[N==null?void 0:N.ongoing]);const F=()=>{e(m==="EDIT"?"PREVIEW_FORM":"ASSIGN_ROLE")},u=l=>{d!=null&&d.includes(l==null?void 0:l._id)?(i(b=>b==null?void 0:b.filter(r=>(r==null?void 0:r._id)!==(l==null?void 0:l._id))),t(b=>b==null?void 0:b.filter(r=>r!==(l==null?void 0:l._id)))):(i(b=>b?[...b,l]:[l]),t(b=>b?[...b,l==null?void 0:l._id]:[l==null?void 0:l._id]))},P=()=>{e(m==="EDIT"?"PREVIEW_FORM":c==="ONE_TAB_ACCESS"?"ASSIGN_ROLE":"MODERATOR_PREWVIEW")};return s.jsx(me,{onClose:F,children:s.jsxs("div",{className:J.assign_role_container,children:[s.jsxs("section",{className:J.assign_role_title,style:{position:"relative"},children:[s.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:F,alt:"back icon"}),s.jsx("h6",{children:_("assign_role_to_moderator")}),s.jsxs("button",{className:J.select_btn,onClick:P,children:[(d==null?void 0:d.length)??""," "," ",_("select")]})]}),s.jsx(p,{customStyle:{width:"100%"}}),E==null?void 0:E.map((l,b)=>{var r,S;return(E==null?void 0:E.length)===b+1?s.jsxs("div",{className:d!=null&&d.includes(l==null?void 0:l._id)?`${J.application_card} ${J.application_card_active}`:J.application_card,ref:w,onClick:()=>u(l),children:[s.jsx("img",{src:"/images/admision-application-icon.svg",alt:"application icon"}),s.jsxs("section",{className:J.application_card_text,children:[s.jsx("h6",{children:(l==null?void 0:l.applicationName)??""}),s.jsxs("div",{className:J.application_card_text_bottom,children:[s.jsx("p",{children:((r=l==null?void 0:l.applicationDepartment)==null?void 0:r.dName)??""}),l!=null&&l.applicationEndDate?s.jsx("p",{children:Ne(l==null?void 0:l.applicationEndDate).format("DD/MM/yyyy")}):""]})]})]},l==null?void 0:l._id):s.jsxs("div",{className:d!=null&&d.includes(l==null?void 0:l._id)?`${J.application_card} ${J.application_card_active}`:J.application_card,onClick:()=>u(l),children:[s.jsx("img",{src:"/images/admision-application-icon.svg",alt:"application icon"}),s.jsxs("section",{className:J.application_card_text,children:[s.jsx("h6",{children:(l==null?void 0:l.applicationName)??""}),s.jsxs("div",{className:J.application_card_text_bottom,children:[s.jsx("p",{children:((S=l==null?void 0:l.applicationDepartment)==null?void 0:S.dName)??""}),l!=null&&l.applicationEndDate?s.jsx("p",{children:Ne(l==null?void 0:l.applicationEndDate).format("DD/MM/yyyy")}):""]})]})]},l==null?void 0:l._id)}),v&&s.jsx(ne,{})]})})},bs=({instituteId:e,admissionId:i,onClose:t,onRefetchWhenAdd:d,openModeratorMenu:m,openAs:c,onEdit:_})=>{var S;const{t:n}=z(),[g,j]=o.useState(c==="EDIT"?"PREVIEW_FORM":"OPEN_STAFF_LIST"),[x,w]=o.useState(c==="EDIT"?m==null?void 0:m.access_staff:""),[f,E]=o.useState({mod_role:c==="EDIT"?m==null?void 0:m.access_role:"",sid:c==="EDIT"?(S=m==null?void 0:m.access_staff)==null?void 0:S._id:"",app_array:[],one_tab:""}),[C,v]=o.useState(c==="EDIT"?m==null?void 0:m.access_application:[]),[k,$]=o.useState([]),[N]=Os();o.useEffect(()=>{var O;if(c==="EDIT"){w(m==null?void 0:m.access_staff),v(m==null?void 0:m.access_application);let R=[];for(let a of m==null?void 0:m.access_application)R.push(a==null?void 0:a._id);$(R),E({mod_role:m==null?void 0:m.access_role,sid:(O=m==null?void 0:m.access_staff)==null?void 0:O._id,app_array:R}),j("PREVIEW_FORM")}},[c]);const T=O=>{w(O),E(R=>({...R,sid:O==null?void 0:O._id})),j(c==="EDIT"?"PREVIEW_FORM":"ASSIGN_ROLE")},F=()=>{j("OPEN_STAFF_LIST")},u=O=>{E(R=>({...R,mod_role:O==="Fee receipt authority"?"ALL_FEE_ACCESS":O==="Application Manager"?"MULTI_APP_ACCESS":O==="Enquiries Section"?"INQUIRY_ACCESS":O==="Scholarship Manager"?"SCHOLARSHIP_ACCESS":O==="Excess Fee Refund"?"REFUND_ACCESS":O==="Pending Fee Manager"?"PENDING_FEE_ACCESS":O==="Tab Authority"?"ONE_TAB_ACCESS":O==="Data Export Authority"?"DATA_EXPORT_ACCESS":""}))},P=O=>{E(R=>({...R,one_tab:O}))},l=()=>{j("LOADING"),N({aid:i,active_tab:f.one_tab,addModerator:(f==null?void 0:f.mod_role)==="MULTI_APP_ACCESS"||(f==null?void 0:f.mod_role)==="ONE_TAB_ACCESS"?{mod_role:f.mod_role,sid:f.sid,app_array:k}:f}).then(()=>{d(),j(""),t()}).catch({})},b=()=>{_(f,k),t()},r=()=>{t()};return s.jsxs(s.Fragment,{children:[g==="OPEN_STAFF_LIST"&&s.jsx(ft,{assignHead:g==="OPEN_STAFF_LIST",headSelect:T,title:n("staff_list"),onClose:t,instituteId:e,viewAs:"ADMISSION_ADMIN"}),g==="ASSIGN_ROLE"&&s.jsx(s.Fragment,{children:s.jsx(me,{onClose:F,children:s.jsxs("div",{className:J.assign_role_container,children:[s.jsxs("section",{className:J.assign_role_title,children:[s.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:F,alt:"back icon"}),s.jsx("h6",{children:n("assign_role_to_moderator")})]}),s.jsx(p,{customStyle:{width:"100%"}}),s.jsxs("section",{className:J.selected_staff_container,children:[s.jsx("img",{src:x!=null&&x.staffProfilePhoto?`${he}/${x==null?void 0:x.staffProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),s.jsxs("div",{className:J.selected_staff_text,children:[s.jsx("h6",{children:`${x==null?void 0:x.staffFirstName} ${(x==null?void 0:x.staffMiddleName)??""} ${x==null?void 0:x.staffLastName}`}),s.jsxs("p",{children:[n("index_number"),x==null?void 0:x.staffROLLNO]})]})]}),s.jsxs("section",{style:{padding:"0.8rem"},children:[s.jsx(Oe,{selectLabel:n("select_role_of_moderator"),selectedValue:n("please_select_role"),options:["Fee receipt authority","Application Manager","Enquiries Section","Scholarship Manager","Excess Fee Refund","Pending Fee Manager","Tab Authority","Data Export Authority"],value:(f==null?void 0:f.mod_role)==="ALL_FEE_ACCESS"?"Fee receipt authority":(f==null?void 0:f.mod_role)==="MULTI_APP_ACCESS"?"Application Manager":(f==null?void 0:f.mod_role)==="INQUIRY_ACCESS"?"Enquiries Section":(f==null?void 0:f.mod_role)==="SCHOLARSHIP_ACCESS"?"Scholarship Manager":(f==null?void 0:f.mod_role)==="REFUND_ACCESS"?"Excess Fee Refund":(f==null?void 0:f.mod_role)==="PENDING_FEE_ACCESS"?"Pending Fee Manager":(f==null?void 0:f.mod_role)==="ONE_TAB_ACCESS"?"Tab Authority":(f==null?void 0:f.mod_role)==="DATA_EXPORT_ACCESS"?"Data Export Authority":"",onClick:u}),f.mod_role==="ONE_TAB_ACCESS"&&s.jsx(Oe,{selectLabel:n("select_tab_role"),selectedValue:n("please_select_role"),options:["Application","Selected","Confirmed","Allotted","Cancelled"],value:f==null?void 0:f.one_tab,onClick:P}),f.mod_role==="MULTI_APP_ACCESS"?s.jsxs("button",{className:J.select_application_btn,onClick:()=>j("SELECT_APPLICATION"),children:[s.jsx("div",{children:n("moderator_select_application")}),s.jsx("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]}):s.jsxs("button",{className:J.assign_btn,onClick:l,children:[n("assign")," "]})]})]})})}),g==="SELECT_APPLICATION"&&s.jsx(Ft,{admissionId:i,setActivePopup:j,setSelectedApplication:v,selectedApplication:C,setSelectedApplicationId:$,selectedApplicationId:k,openAs:c,role:f.mod_role}),g==="MODERATOR_PREWVIEW"&&s.jsx(Pt,{setActivePopup:j,selectedApplication:C,selectedStaff:x,moderatorState:f,onAssignModerator:l}),g==="PREVIEW_FORM"&&s.jsx(Tt,{onCloseEdit:r,setActivePopup:j,selectedStaff:x,moderatorState:f,onSelectRole:u,onUpdateModerator:b,selectedApplication:C}),g==="LOADING"&&s.jsx(se,{})]})},$t=({onClose:e,admissionId:i,onRefetch:t,openModeratorMenu:d,instituteId:m})=>{const[c,_]=o.useState(!1),[n,g]=o.useState(!1),[j]=Rs(),[x]=Ls(),w=()=>{_(E=>!E),j({aid:i,modId:d==null?void 0:d._id}).then(()=>{t(),e(),_(E=>!E)}).catch({})},f=(E,C)=>{_(v=>!v),g(!1),x({modId:d==null?void 0:d._id,active_tab:E==null?void 0:E.one_tab,updateModerator:{role:E==null?void 0:E.mod_role,staffId:E==null?void 0:E.sid,app_array:(E==null?void 0:E.mod_role)==="MULTI_APP_ACCESS"||(E==null?void 0:E.mod_role)==="MULTI_APP_ACCESS"?C:[]}}).then(()=>{t(),_(v=>!v),e()}).catch({})};return s.jsx(s.Fragment,{children:n?s.jsx(bs,{onClose:()=>g(!1),admissionId:i,instituteId:m,onRefetch:t,openAs:"EDIT",openModeratorMenu:d,onEdit:f}):s.jsxs(s.Fragment,{children:[s.jsx(Ke,{onClose:e}),s.jsxs(Ye,{customStyle:{zIndex:"1200"},children:[s.jsxs("div",{className:Ce.edit_modal_container,style:{width:"200px"},children:[s.jsx("h6",{className:Ce.edit,onClick:()=>g(E=>!E),children:"Edit"}),s.jsx("h6",{className:Ce.remove,onClick:w,children:"Delete"})]}),c&&s.jsx(se,{})]})]})})},ts=({moderator:e,setOpenModeratorMenu:i})=>{var d,m,c,_,n,g,j,x,w,f;const{t}=z();return s.jsxs("div",{className:J.moderator_card,children:[s.jsx("img",{src:(d=e==null?void 0:e.access_staff)!=null&&d.staffProfilePhoto?`${he}/${(m=e==null?void 0:e.access_staff)==null?void 0:m.staffProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"moderator avatar"}),s.jsxs("section",{className:J.moderator_card_text_container,children:[s.jsx("h6",{children:`${(c=e==null?void 0:e.access_staff)==null?void 0:c.staffFirstName} ${((_=e==null?void 0:e.access_staff)==null?void 0:_.staffMiddleName)??""} ${(n=e==null?void 0:e.access_staff)==null?void 0:n.staffLastName}`}),s.jsxs("p",{children:[t("index_number"),(g=e==null?void 0:e.access_staff)==null?void 0:g.staffROLLNO]}),s.jsx("p",{children:(e==null?void 0:e.access_role)==="ALL_FEE_ACCESS"?"Fee receipt authority":(e==null?void 0:e.access_role)==="MULTI_APP_ACCESS"?"Application Manager":(e==null?void 0:e.access_role)==="INQUIRY_ACCESS"?"Enquiries Section":(e==null?void 0:e.access_role)==="SCHOLARSHIP_ACCESS"?"Scholarship Manager":(e==null?void 0:e.access_role)==="REFUND_ACCESS"?"Access Fee Moderator":(e==null?void 0:e.access_role)==="PENDING_FEE_ACCESS"?"Pending Fee Manager":(e==null?void 0:e.access_role)==="ONE_TAB_ACCESS"?((j=e==null?void 0:e.active_tab)==null?void 0:j.role)==="Application"?"Admission Application Tab":((x=e==null?void 0:e.active_tab)==null?void 0:x.role)==="Selected"?"Admission Selected Tab":((w=e==null?void 0:e.active_tab)==null?void 0:w.role)==="Confirmed"?"Admission Confirmed Tab":((f=e==null?void 0:e.active_tab)==null?void 0:f.role)==="Allotted"?"Admission Allotted Tab":"Admission Cancelled Tab":(e==null?void 0:e.access_role)==="DATA_EXPORT_ACCESS"?"Data Export Authority":""})]}),s.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:()=>i(e),className:J.menu_icon,title:"Menu"})]})},Wn=({instituteId:e,admissionId:i})=>{const{t}=z(),d=ce(),[m,c]=o.useState(!1),[_,n]=o.useState(""),[g,j]=de(),[x,w]=o.useState(1),[f,E]=o.useState(!0),[C,v]=o.useState(!1),[k,$]=o.useState(!0),[N,T]=o.useState([]),{getModeratorByAdmissionAdmin:F,getModeratorByAdmissionAdminRefetch:u}=As({data:{aid:i,page:x,limit:10},skip:!i}),{scrollToTop:P}=ae();o.useEffect(()=>{P()},[]),o.useEffect(()=>{i&&($(!0),u())},[i,x,u]),o.useEffect(()=>{j&&f&&w(r=>r+1)},[j,f]),o.useEffect(()=>{var r,S;C?(T(F==null?void 0:F.all_mods),v(!1),$(!1)):F!=null&&F.all_mods?(T(O=>[...new Set([...O,...F==null?void 0:F.all_mods].map(JSON.stringify))].map(JSON.parse)),$(!1)):((r=F==null?void 0:F.all_mods)==null?void 0:r.length)===0&&$(!1),((S=F==null?void 0:F.all_mods)==null?void 0:S.length)===10?E(!0):E(!1)},[F==null?void 0:F.all_mods]);const l=()=>{d(-1)},b=()=>{v(!0),w(1),$(!0),u()};return s.jsxs("div",{className:J.moderator_container,children:[s.jsxs("section",{className:J.moderator_container_title,children:[s.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:l,alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),s.jsx("h6",{children:t("admission_moderators")})]}),s.jsx(p,{customStyle:{width:"100%"}}),s.jsx("h6",{className:J.add_new_moderator,onClick:()=>c(!0),children:t("add_new_moderator")}),s.jsxs("div",{className:J.refund_list,children:[N==null?void 0:N.map((r,S)=>(N==null?void 0:N.length)===S+1?s.jsx("div",{ref:g,children:s.jsx(ts,{moderator:r,setOpenModeratorMenu:n})},r==null?void 0:r._id):s.jsx(ts,{moderator:r,setOpenModeratorMenu:n},r==null?void 0:r._id)),m&&s.jsx(bs,{onClose:()=>c(r=>!r),instituteId:e,admissionId:i,onRefetchWhenAdd:b}),_&&s.jsx($t,{admissionId:i,instituteId:e,onRefetch:b,onClose:()=>n(""),openModeratorMenu:_}),k&&s.jsx(ne,{})]})]})},Ot=({admissionId:e,instituteId:i,financeId:t,carryParentState:d,onClose:m,viewAs:c,onRefetch:_})=>{var U,D;const{t:n}=z(),g=ce(),j=le(),[x,w]=o.useState(!1),[f,E]=o.useState(!1),[C,v]=o.useState({depart:"",batch:"",master:"",fee_struct:""}),[k,$]=o.useState({gender:"",caste:"",is_all:""}),{allDepartmentList:N,allDepartmentListRefetch:T}=as({aid:e,skip:!e}),{allClassMaster:F,allClassMasterRefetch:u}=us({data:{id:i,did:C.depart},skip:C.depart!=="All"?!C.depart:!0}),{oneDepartment:P,oneDepartmentRefetch:l}=ls({did:C.depart,skip:C.depart!=="All"?!C.depart:!0}),{getAllFeesCategory:b,getAllFeesCategoryRefetch:r}=xt({fid:t,skip:!t}),[S]=Bs();o.useEffect(()=>{e&&T()},[e,T]),o.useEffect(()=>{C.depart&&C.depart!=="All"&&u()},[C.depart,u]),o.useEffect(()=>{C.depart&&C.depart!=="All"&&l()},[C.depart,l]),o.useEffect(()=>{t&&r()},[t,r]);const O=W=>{v(y=>({...y,depart:W}))},R=W=>{v(y=>({...y,batch:W}))},a=W=>{v(y=>({...y,master:W}))},A=W=>{$(y=>({...y,gender:W}))},q=W=>{$(y=>({...y,caste:W}))},M=W=>{v(y=>({...y,fee_struct:W}))},Q=W=>{$(y=>({...y,is_all:W==="All Time Fees"}))},H=()=>{E(W=>!W),S({aid:e,...k,all_depart:C.depart==="All"?"All":"Particular",batch_status:C.batch,pendingData:{depart:C.depart==="All"?"":C.depart,batch:C.depart==="All"?"":C.batch,master:C.depart==="All"?[]:[C.master],fee_struct:C.depart==="All"?"":C.fee_struct}}).then(()=>{c==="EXPORT"?(_(),m()):g(`/q/${j.username}/member/admission?a=export`,{state:{...d}}),E(W=>!W)}).catch({})};return s.jsxs(me,{onClose:m,children:[s.jsxs("div",{className:Fe.filter_container,children:[s.jsx("h6",{className:Fe.filter_title,children:n("filter_and_export_fees_data")}),!x&&s.jsxs(s.Fragment,{children:[s.jsx(be,{selectLabel:n("select_department"),selectedValue:n("all_select_particular_department"),options:N!=null&&N.allDB?["All",...N==null?void 0:N.allDB]:["All"],onClick:O}),s.jsx(be,{selectLabel:C.depart==="All"?n("select_current_batch"):n("select_batch_optional"),selectedValue:C.depart==="All"?n("select_pref"):n("all_time_select_batch"),options:C.depart==="All"?["Current","All"]:(U=P==null?void 0:P.department)!=null&&U.batches?[...(D=P==null?void 0:P.department)==null?void 0:D.batches]:[],onClick:R}),C.depart==="All"?"":s.jsx(be,{selectLabel:n("select_standard_year"),selectedValue:n("select_standard_year_placeholder"),options:F!=null&&F.classMaster?[...F==null?void 0:F.classMaster]:[],onClick:a}),s.jsx("button",{className:Fe.next_btn,onClick:()=>w(W=>!W),children:n("next")})]}),x&&s.jsxs(s.Fragment,{children:[s.jsx(be,{selectLabel:n("select_gender"),selectedValue:n("select_gender_placeholder"),options:["Male","Female","Other"],onClick:A}),s.jsx(be,{selectLabel:n("select_caste_catgory"),selectedValue:n("select_caste_catgory_placeholder"),options:gt,onClick:q}),s.jsx(be,{selectLabel:n("select_fee_category"),selectedValue:n("select_fee_category_placeholder"),options:b!=null&&b.all_fees_format?[...b==null?void 0:b.all_fees_format]:[],onClick:M}),s.jsx(be,{selectLabel:n("select_all_or_pending"),selectedValue:n("select_all_or_pending_placeholder"),options:["All Time Fees","Pending Fees"],onClick:Q}),s.jsx("button",{className:Fe.next_btn,onClick:H,children:n("export_data")})]})]}),f&&s.jsx(se,{})]})},Rt=({onClose:e,xlsxId:i,onRefetch:t,admissionId:d})=>{const[m,c]=o.useState(!1),[_,n]=o.useState(!1),[g]=Us(),[j]=Ms(),x=()=>{c(f=>!f),g({aid:d,xlsxId:i==null?void 0:i._id}).then(()=>{t(),e(),c(f=>!f)}).catch({})},w=f=>{c(E=>!E),j({aid:d,xlsxId:i==null?void 0:i._id,excelUpdate:{excel_file_name:f}}).then(()=>{t(),c(E=>!E),e()}).catch({})};return s.jsxs(s.Fragment,{children:[s.jsx(Ke,{onClose:e}),s.jsxs(Ye,{customStyle:{zIndex:"1200"},children:[_?s.jsx(jt,{xlsxId:i,onEdit:w}):s.jsxs("div",{className:Ce.edit_modal_container,style:{width:"200px"},children:[s.jsx("h6",{className:Ce.edit,onClick:()=>n(f=>!f),children:"Edit"}),s.jsx("h6",{className:Ce.remove,onClick:x,children:"Delete"})]}),m&&s.jsx(se,{})]})]})},Jn=({admissionId:e,funds:i,carryParentState:t})=>{var O,R;const{t:d}=z(),m=ce(),[c,_]=de(),[n,g]=o.useState(1),[j,x]=o.useState(!0),[w,f]=o.useState(!1),[E,C]=o.useState(!0),[v,k]=o.useState([]),[$,N]=o.useState(!1),[T,F]=o.useState(!1),{getAllExcelByAdmissionAdmin:u,getAllExcelByAdmissionAdminRefetch:P}=Vs({data:{aid:e,page:n,limit:10},skip:!e}),{scrollToTop:l}=ae();o.useEffect(()=>{l()},[]),o.useEffect(()=>{e&&(C(!0),P())},[e,n,P]),o.useEffect(()=>{_&&j&&g(a=>a+1)},[_,j]),o.useEffect(()=>{var a,A;w?(k(u==null?void 0:u.all_excel),f(!1),C(!1)):u!=null&&u.all_excel?(k(q=>[...new Set([...q,...u==null?void 0:u.all_excel].map(JSON.stringify))].map(JSON.parse)),C(!1)):((a=u==null?void 0:u.all_excel)==null?void 0:a.length)===0&&C(!1),((A=u==null?void 0:u.all_excel)==null?void 0:A.length)===10?x(!0):x(!1)},[u==null?void 0:u.all_excel]);const b=()=>{m(-1)},r=()=>{N(a=>!a)},S=()=>{g(1),P(),f(!0)};return s.jsxs("div",{className:_e.refund_container,children:[s.jsxs("section",{className:_e.refund_container_title,children:[s.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:b,alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),s.jsxs("div",{className:_e.refund_container_title,style:{justifyContent:"space-between",width:"95%"},children:[s.jsx("h6",{children:d("data_export")}),s.jsx("img",{src:"/images/export-filter-icon.svg",alt:"",onClick:r,className:_e.admission_filter_icon})]})]}),s.jsx(p,{customStyle:{width:"100%"}}),s.jsxs("div",{className:_e.refund_list,children:[v==null?void 0:v.map((a,A)=>(v==null?void 0:v.length)===A+1?s.jsxs("a",{ref:c,className:_e.export_card,title:"Download File",href:`https://d3dqpu54js2vfl.cloudfront.net/${a==null?void 0:a.excel_file}`,target:"_blank",rel:"noopener noreferrer",children:[s.jsx("img",{src:"/images/export-xsxl-icon.svg",alt:""}),s.jsxs("section",{className:_e.export_card_text,children:[s.jsx("h6",{children:(a==null?void 0:a.excel_file_name)??""}),s.jsxs("div",{className:_e.export_card_date,children:[s.jsx("h6",{children:Ne(a==null?void 0:a.created_at).format("DD MMM yyy")}),s.jsx("h6",{children:Ne(a==null?void 0:a.created_at).format("LT")})]})]}),s.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:q=>{q.preventDefault(),F(a)},className:_e.menu_icon,title:"Menu"})]},a==null?void 0:a._id):s.jsxs("a",{className:_e.export_card,title:"Download File",href:`https://d3dqpu54js2vfl.cloudfront.net/${a==null?void 0:a.excel_file}`,target:"_blank",rel:"noopener noreferrer",children:[s.jsx("img",{src:"/images/export-xsxl-icon.svg",alt:""}),s.jsxs("section",{className:_e.export_card_text,children:[s.jsx("h6",{children:(a==null?void 0:a.excel_file_name)??""}),s.jsxs("div",{className:_e.export_card_date,children:[s.jsx("h6",{children:Ne(a==null?void 0:a.created_at).format("DD MMM yyy")}),s.jsx("h6",{children:Ne(a==null?void 0:a.created_at).format("LT")})]})]}),s.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:q=>{q.preventDefault(),F(a)},className:_e.menu_icon,title:"Menu"})]},a==null?void 0:a._id)),E&&s.jsx(ne,{}),$&&s.jsx(Ot,{admissionId:e,instituteId:(O=i==null?void 0:i.institute)==null?void 0:O._id,financeId:(R=i==null?void 0:i.institute)==null?void 0:R.financeDepart[0],carryParentState:t,onClose:r,viewAs:"EXPORT",onRefetch:S}),T&&s.jsx(Rt,{xlsxId:T,onClose:()=>F(""),onRefetch:S,admissionId:e})]})]})},Le=["enquiry","student"],Ae=["receipt&n=request","receipt&n=accept","receipt&n=reject","student"],Be=["ongoing","ongoing&n=application","ongoing&n=select","ongoing&n=confirm","ongoing&n=allot","ongoing&n=cancel","ongoing&n=mulitple","student"],Ue=["scholarship","scholarship&n","student"],Me=["refund","student"],Ve=["pending","student"],De=["ongoing","ongoing&n=application","student"],qe=["ongoing","ongoing&n=select","student"],We=["ongoing","ongoing&n=confirm","ongoing&n=mulitple","student"],Je=["ongoing","ongoing&n=allot","student"],Ie=["ongoing","ongoing&n=cancel","student"],Ge=["export","student"],Pe=({carryParentState:e,activeTab:i,accessRole:t,accessTpye:d,callApi:m,children:c})=>{const _=le();return s.jsx(s.Fragment,{children:t==="INQUIRY_ACCESS"?Le!=null&&Le.includes(i)?s.jsx(re,{to:`/q/${_.username}/member/admission?a=${i}`,state:{...e},children:c}):s.jsx("div",{style:{opacity:"0.5"},children:c}):t==="ALL_FEE_ACCESS"?Ae!=null&&Ae.includes(i)?s.jsx(re,{to:`/q/${_.username}/member/admission?a=${i}`,state:{...e},children:c}):s.jsx("div",{style:{opacity:"0.5"},children:c}):t==="MULTI_APP_ACCESS"?Be!=null&&Be.includes(i)?s.jsx(re,{to:`/q/${_.username}/member/admission?a=${i}`,state:{...e},children:c}):s.jsx("div",{style:{opacity:"0.5"},children:c}):t==="SCHOLARSHIP_ACCESS"?Ue!=null&&Ue.includes(i==null?void 0:i.substring(0,11))?s.jsx(re,{to:`/q/${_.username}/member/admission?a=${i}`,state:{...e},children:c}):s.jsx("div",{style:{opacity:"0.5"},children:c}):t==="REFUND_ACCESS"?Me!=null&&Me.includes(i)?s.jsx(re,{to:`/q/${_.username}/member/admission?a=${i}`,state:{...e},children:c}):s.jsx("div",{style:{opacity:"0.5"},children:c}):t==="PENDING_FEE_ACCESS"?Ve!=null&&Ve.includes(i)?s.jsx(re,{to:`/q/${_.username}/member/admission?a=${i}`,state:{...e},children:c}):s.jsx("div",{style:{opacity:"0.5"},children:c}):t==="ONE_TAB_ACCESS"?d==="Application"?De!=null&&De.includes(i)?s.jsx(re,{to:`/q/${_.username}/member/admission?a=${i}`,state:{...e},children:c}):s.jsx("div",{style:{opacity:"0.5"},children:c}):d==="Selected"?qe!=null&&qe.includes(i)?s.jsx(re,{to:`/q/${_.username}/member/admission?a=${i}`,state:{...e},children:c}):s.jsx("div",{style:{opacity:"0.5"},children:c}):d==="Confirmed"?We!=null&&We.includes(i)?s.jsx(re,{to:`/q/${_.username}/member/admission?a=${i}`,state:{...e},children:c}):s.jsx("div",{style:{opacity:"0.5"},children:c}):d==="Allotted"?Je!=null&&Je.includes(i)?s.jsx(re,{to:`/q/${_.username}/member/admission?a=${i}`,state:{...e},children:c}):s.jsx("div",{style:{opacity:"0.5"},children:c}):Ie!=null&&Ie.includes(i)?s.jsx(re,{to:`/q/${_.username}/member/admission?a=${i}`,state:{...e},children:c}):s.jsx("div",{style:{opacity:"0.5"},children:c}):t==="DATA_EXPORT_ACCESS"?Ge!=null&&Ge.includes(i)?s.jsx(re,{to:`/q/${_.username}/member/admission?a=${i}`,state:{...e},children:c}):s.jsx("div",{style:{opacity:"0.5"},children:c}):m?s.jsx(re,{to:`/q/${_.username}/member/admission?a=${i}`,state:{...e},children:c}):s.jsx("div",{style:{opacity:"0.5"},children:c})})},ns=({data:e,carryParentState:i,accessRole:t,accessApplication:d,setOpenApplicationMenu:m,accessTpye:c,callApi:_,pageOpenAs:n})=>{var j,x,w,f,E;const g=C=>{C.preventDefault(),m(e)};return s.jsx(s.Fragment,{children:n==="INSTITUTE"?s.jsx(es,{carryParentState:{...i,applicationId:e==null?void 0:e._id},activeTab:"?a=ongoing&n=application",children:s.jsxs("div",{className:h.ongoing_card,children:[s.jsxs("div",{className:h.ongoing_card_inner,children:[s.jsx("img",{alt:"Ongoing App",src:"/images/admision-application-icon.svg"}),s.jsxs("div",{className:h.ongoing_card_text,children:[s.jsx("h6",{children:e==null?void 0:e.applicationName}),s.jsx("p",{children:(j=e==null?void 0:e.applicationDepartment)==null?void 0:j.dName})]})]}),s.jsx("div",{className:h.ongoing_card_count_date,children:s.jsxs("div",{className:h.ongoing_card_count_container,children:[s.jsx("h6",{children:(e==null?void 0:e.receievedCount)??0}),s.jsx("h6",{children:(e==null?void 0:e.selectCount)??0}),s.jsx("h6",{children:(e==null?void 0:e.confirmCount)??0})]})}),s.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:g,className:h.menu_icon,title:"Menu"})]})}):t?c?s.jsx(Pe,{carryParentState:{...i,applicationId:e==null?void 0:e._id},activeTab:`ongoing&n=${c==="Application"?"application":c==="Selected"?"select":c==="Confirmed"?"confirm":c==="Allotted"?"allot":"cancel"}`,accessRole:t,accessTpye:c,callApi:_,children:s.jsxs("div",{className:h.ongoing_card,children:[s.jsxs("div",{className:h.ongoing_card_inner,children:[s.jsx("img",{alt:"Ongoing App",src:"/images/admision-application-icon.svg"}),s.jsxs("div",{className:h.ongoing_card_text,children:[s.jsx("h6",{children:e==null?void 0:e.applicationName}),s.jsx("p",{children:(x=e==null?void 0:e.applicationDepartment)==null?void 0:x.dName})]})]}),s.jsx("div",{className:h.ongoing_card_count_date,children:s.jsxs("div",{className:h.ongoing_card_count_container,children:[s.jsx("h6",{children:(e==null?void 0:e.receievedCount)??0}),s.jsx("h6",{children:(e==null?void 0:e.selectCount)??0}),s.jsx("h6",{children:(e==null?void 0:e.confirmCount)??0})]})})]})}):d!=null&&d.includes(e==null?void 0:e._id)?s.jsx(Pe,{carryParentState:{...i,applicationId:e==null?void 0:e._id},activeTab:"ongoing&n=application",accessRole:t,callApi:_,children:s.jsxs("div",{className:h.ongoing_card,children:[s.jsxs("div",{className:h.ongoing_card_inner,children:[s.jsx("img",{alt:"Ongoing App",src:"/images/admision-application-icon.svg"}),s.jsxs("div",{className:h.ongoing_card_text,children:[s.jsx("h6",{children:e==null?void 0:e.applicationName}),s.jsx("p",{children:(w=e==null?void 0:e.applicationDepartment)==null?void 0:w.dName})]})]}),s.jsx("div",{className:h.ongoing_card_count_date,children:s.jsxs("div",{className:h.ongoing_card_count_container,children:[s.jsx("h6",{children:(e==null?void 0:e.receievedCount)??0}),s.jsx("h6",{children:(e==null?void 0:e.selectCount)??0}),s.jsx("h6",{children:(e==null?void 0:e.confirmCount)??0})]})})]})}):s.jsxs("div",{className:h.ongoing_card,style:{opacity:"0.5"},children:[s.jsxs("div",{className:h.ongoing_card_inner,children:[s.jsx("img",{alt:"Ongoing App",src:"/images/admision-application-icon.svg"}),s.jsxs("div",{className:h.ongoing_card_text,children:[s.jsx("h6",{children:e==null?void 0:e.applicationName}),s.jsx("p",{children:(f=e==null?void 0:e.applicationDepartment)==null?void 0:f.dName})]})]}),s.jsx("div",{className:h.ongoing_card_count_date,children:s.jsxs("div",{className:h.ongoing_card_count_container,children:[s.jsx("h6",{children:(e==null?void 0:e.receievedCount)??0}),s.jsx("h6",{children:(e==null?void 0:e.selectCount)??0}),s.jsx("h6",{children:(e==null?void 0:e.confirmCount)??0})]})})]}):s.jsx(Pe,{carryParentState:{...i,applicationId:e==null?void 0:e._id},activeTab:"ongoing&n=application",accessRole:t,accessTpye:c,callApi:_,children:s.jsxs("div",{className:h.ongoing_card,children:[s.jsxs("div",{className:h.ongoing_card_inner,children:[s.jsx("img",{alt:"Ongoing App",src:"/images/admision-application-icon.svg"}),s.jsxs("div",{className:h.ongoing_card_text,children:[s.jsx("h6",{children:e==null?void 0:e.applicationName}),s.jsx("p",{children:(E=e==null?void 0:e.applicationDepartment)==null?void 0:E.dName})]})]}),s.jsx("div",{className:h.ongoing_card_count_date,children:s.jsxs("div",{className:h.ongoing_card_count_container,children:[s.jsx("h6",{children:(e==null?void 0:e.receievedCount)??0}),s.jsx("h6",{children:(e==null?void 0:e.selectCount)??0}),s.jsx("h6",{children:(e==null?void 0:e.confirmCount)??0})]})}),s.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:g,className:h.menu_icon,title:"Menu"})]})})})},Lt=({carryParentState:e,accessRole:i,accessApplication:t,accessTpye:d,callApi:m,admissionId:c,pageOpenAs:_})=>{const{t:n}=z(),g=Ee(A=>A.admissionChange),[j,x]=o.useState(!0),[w,f]=o.useState(1),[E,C]=de(),[v,k]=o.useState([]),[$,N]=o.useState(!0),[T,F]=o.useState(""),[u,P]=o.useState(!1),[l,b]=o.useState(!1),{allOngoingApp:r,allOngoingAppRefetch:S}=ze({data:{aid:c||(g==null?void 0:g.aid),page:w,limit:10},skip:c?!c:!(g!=null&&g.aid)}),{scrollToTop:O}=ae();o.useEffect(()=>{O()},[]),o.useEffect(()=>{C&&j&&f(A=>A+1)},[C,j]),o.useEffect(()=>{(g!=null&&g.aid||c)&&(N(!0),S())},[g==null?void 0:g.aid,c,w,S]),o.useEffect(()=>{var A,q;u?(k(r==null?void 0:r.ongoing),N(!1),P(!1)):r!=null&&r.ongoing?(k(M=>[...new Set([...M,...r==null?void 0:r.ongoing].map(JSON.stringify))].map(JSON.parse)),N(!1)):((A=r==null?void 0:r.ongoing)==null?void 0:A.length)===0&&N(!1),((q=r==null?void 0:r.ongoing)==null?void 0:q.length)===10?x(!0):x(!1)},[r==null?void 0:r.ongoing]);const R=()=>{f(1),P(!0),N(!0),S()},a=()=>{i||b(A=>!A)};return s.jsxs(s.Fragment,{children:[s.jsx("p",{className:h.add_new_category,onClick:a,style:{opacity:i?"0.5":1},children:n("create_new_application")}),s.jsxs("div",{className:h.remainingFees,children:[v==null?void 0:v.map((A,q)=>(v==null?void 0:v.length)===q+1?s.jsx("div",{ref:E,children:s.jsx(ns,{data:A,carryParentState:e,accessRole:i,accessTpye:d,callApi:m,accessApplication:t,setOpenApplicationMenu:F,pageOpenAs:_})},q):s.jsx(ns,{data:A,carryParentState:e,accessRole:i,accessTpye:d,callApi:m,accessApplication:t,setOpenApplicationMenu:F,pageOpenAs:_},q)),$&&s.jsx(ne,{status:"white"})]}),T&&s.jsx(Nt,{openApplicationMenu:T,onClose:()=>F(""),onRefetch:R,insAdmissionId:c}),l&&s.jsx(bt,{setCreateApplication:b,createApplication:l,admissionId:(g==null?void 0:g.aid)??c,setRefetchOngoining:R})]})},os=({applicant:e,onSelectApplicant:i,transferApplicat:t})=>{var m,c,_,n,g,j,x,w,f,E,C,v,k,$,N,T,F,u,P,l,b,r,S,O;const d=()=>{i(e)};return s.jsxs("div",{className:t!=null&&t.includes(e==null?void 0:e._id)?`${h.applicant_card_container} ${h.applicant_card_container_active}`:`${h.applicant_card_container} ${h.applicant_card_container_hover}`,onClick:d,children:[s.jsxs("div",{className:h.applicant_card_inner,children:[s.jsx("img",{alt:"Student Request Avatar",src:((m=e==null?void 0:e.student)==null?void 0:m.photoId)!=="1"?`${he}/${(c=e==null?void 0:e.student)==null?void 0:c.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",loading:"lazy"}),s.jsx("div",{className:h.applicant_card_inner_info,children:s.jsx("h6",{children:`${(_=e==null?void 0:e.student)==null?void 0:_.studentFirstName} ${(n=e==null?void 0:e.student)!=null&&n.studentMiddleName?(g=e==null?void 0:e.student)==null?void 0:g.studentMiddleName:""} ${(j=e==null?void 0:e.student)==null?void 0:j.studentLastName}`})})]}),s.jsxs("div",{className:h.applicant_card_contact,children:[s.jsxs("div",{className:h.applicant_card_contact_inner,children:[s.jsx("img",{src:"/images/admidion_department/gender.svg",alt:""}),s.jsx("p",{children:(x=e==null?void 0:e.student)==null?void 0:x.studentGender})]}),(((w=e==null?void 0:e.student)==null?void 0:w.studentPhoneNumber)||((E=(f=e==null?void 0:e.student)==null?void 0:f.user)==null?void 0:E.userPhoneNumber)||((v=(C=e==null?void 0:e.student)==null?void 0:C.user)==null?void 0:v.userEmail)||((k=e==null?void 0:e.student)==null?void 0:k.studentParentsPhoneNumber))&&s.jsxs("div",{className:h.applicant_card_contact_inner,children:[s.jsx("img",{src:"/images/admidion_department/phone.svg",alt:""}),s.jsx("p",{style:{marginBottom:"0 !important"},children:(N=($=e==null?void 0:e.student)==null?void 0:$.user)!=null&&N.userPhoneNumber?(F=(T=e==null?void 0:e.student)==null?void 0:T.user)==null?void 0:F.userPhoneNumber:(P=(u=e==null?void 0:e.student)==null?void 0:u.user)!=null&&P.userEmail?(b=(l=e==null?void 0:e.student)==null?void 0:l.user)==null?void 0:b.userEmail:(r=e==null?void 0:e.student)!=null&&r.studentPhoneNumber?(S=e==null?void 0:e.student)==null?void 0:S.studentPhoneNumber:(O=e==null?void 0:e.student)==null?void 0:O.studentParentsPhoneNumber})]})]})]})},At=({onBack:e,onSelectApp:i,transferApplication:t})=>{const d=Ee(N=>N.admissionChange),{t:m}=z(),[c,_]=o.useState(!0),[n,g]=o.useState(1),[j,x]=de(),[w,f]=o.useState([]),[E,C]=o.useState(!0),{allOngoingApp:v,allOngoingAppRefetch:k}=ze({data:{aid:d==null?void 0:d.aid,page:n,limit:10},skip:!(d!=null&&d.aid)});o.useEffect(()=>{x&&c&&g(N=>N+1)},[x,c]),o.useEffect(()=>{d!=null&&d.aid&&(C(!0),k())},[d==null?void 0:d.aid,n,k]),o.useEffect(()=>{d!=null&&d.aid&&(C(!0),k())},[d==null?void 0:d.aid,k]),o.useEffect(()=>{var N;v!=null&&v.ongoing&&(f(T=>[...new Set([...T,...v==null?void 0:v.ongoing].map(JSON.stringify))].map(JSON.parse)),C(!1)),((N=v==null?void 0:v.ongoing)==null?void 0:N.length)===10?_(!0):_(!1)},[v==null?void 0:v.ongoing]);const $=N=>{i(N)};return s.jsx(me,{onClose:e,children:s.jsxs("div",{className:J.assign_role_container,children:[s.jsxs("section",{className:J.assign_role_title,style:{position:"relative"},children:[s.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:e,alt:"back icon",style:{cursor:"pointer"}}),s.jsx("h6",{children:m("select_application")})]}),s.jsx(p,{customStyle:{width:"100%"}}),w==null?void 0:w.map((N,T)=>{var F,u;return(w==null?void 0:w.length)===T+1?s.jsxs("div",{className:(t==null?void 0:t._id)===(N==null?void 0:N._id)?`${J.application_card} ${J.application_card_active}`:J.application_card,ref:j,onClick:()=>$(N),children:[s.jsx("img",{src:"/images/admision-application-icon.svg",alt:"application icon"}),s.jsxs("section",{className:J.application_card_text,children:[s.jsx("h6",{children:(N==null?void 0:N.applicationName)??""}),s.jsx("div",{className:J.application_card_text_bottom,children:s.jsx("p",{children:((F=N==null?void 0:N.applicationDepartment)==null?void 0:F.dName)??""})})]})]},N==null?void 0:N._id):s.jsxs("div",{className:(t==null?void 0:t._id)===(N==null?void 0:N._id)?`${J.application_card} ${J.application_card_active}`:J.application_card,onClick:()=>$(N),children:[s.jsx("img",{src:"/images/admision-application-icon.svg",alt:"application icon"}),s.jsxs("section",{className:J.application_card_text,children:[s.jsx("h6",{children:(N==null?void 0:N.applicationName)??""}),s.jsx("div",{className:J.application_card_text_bottom,children:s.jsx("p",{children:((u=N==null?void 0:N.applicationDepartment)==null?void 0:u.dName)??""})})]})]},N==null?void 0:N._id)}),E&&s.jsx(ne,{status:"white"})]})})},Bt=({onClose:e,applicationId:i,onRefetchConfirmTab:t})=>{const{t:d}=z(),[m,c]=o.useState(0),[_,n]=o.useState(!0),[g,j]=o.useState(1),[x,w]=o.useState(""),[f,E]=de(),[C,v]=o.useState([]),[k,$]=o.useState(!1),[N,T]=o.useState(!0),[F,u]=o.useState(""),[P,l]=o.useState([]),[b,r]=o.useState([]),[S,O]=o.useState(!1),[R]=Ds(),{getAllConfirmList:a,getAllConfirmListRefetch:A}=fs({data:{id:i,page:g,limit:10,search:x||""},skip:!i});o.useEffect(()=>{E&&_&&j(y=>y+1)},[E,_]),o.useEffect(()=>{i&&(T(!0),A())},[g,i,A,x]),o.useEffect(()=>{var y,V;x?(v(a==null?void 0:a.confirm),T(!1)):k?(v(a==null?void 0:a.confirm),$(!1),T(!1)):a!=null&&a.confirm?(v(L=>[...new Set([...L,...a==null?void 0:a.confirm].map(JSON.stringify))].map(JSON.parse)),T(!1)):((y=a==null?void 0:a.confirm)==null?void 0:y.length)===0&&T(!1),((V=a==null?void 0:a.confirm)==null?void 0:V.length)===10?n(!0):n(!1)},[a==null?void 0:a.confirm]);const q=o.useCallback(Se.debounce(y=>w(y),500),[]),M=y=>{q(y.target.value)},Q=()=>{S||(m===0?e():c(m===1?0:1))},H=y=>{var V;if(P!=null&&P.includes(y==null?void 0:y._id))l(L=>L==null?void 0:L.filter(B=>B!==(y==null?void 0:y._id))),r(L=>L==null?void 0:L.filter(B=>{var I;return(B==null?void 0:B.studentId)!==((I=y==null?void 0:y.student)==null?void 0:I._id)}));else{let L={studentId:(V=y==null?void 0:y.student)==null?void 0:V._id,mode:y==null?void 0:y.payment_status,type:y==null?void 0:y.install_type,price:y==null?void 0:y.fee_remain};r(B=>B!=null&&B.length?[...B,L]:[L]),l(B=>B!=null&&B.length?[...B,y==null?void 0:y._id]:[y==null?void 0:y._id])}},U=()=>{c(1)},D=y=>{u(y),c(2)},W=()=>{F!=null&&F._id&&i&&(P!=null&&P.length)&&(O(y=>!y),R({aid:F==null?void 0:F._id,transferApplicantData:{app_array:P,oaid:i,student_array:b}}).then(()=>{t(),O(y=>!y),e()}).catch({}))};return s.jsx(s.Fragment,{children:m===0||m===2?s.jsx(me,{onClose:Q,children:s.jsxs("div",{className:h.admission_modal,children:[m===0?s.jsxs("div",{className:h.transfer_container,children:[s.jsx("h6",{className:h.admission_modal_heading,children:d("select_confirm_student")}),s.jsxs("button",{className:h.transfer_select_btn,onClick:U,children:[(P==null?void 0:P.length)??""," "," ",d("select")]})]}):s.jsx("h6",{className:h.admission_modal_heading,children:d("transfer_select_student")}),s.jsx(p,{customStyle:{width:"100%",margin:"0.7rem 0"}}),m===0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:h.with_search,style:{marginBottom:"0.7rem"},children:s.jsx("div",{className:h.search_container_filter,style:{width:"100%"},children:s.jsx("section",{className:h.search_container,style:{width:"100%"},children:s.jsxs("div",{className:h.search_container_input,style:{width:"100%"},children:[s.jsx("img",{className:h.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),s.jsx("input",{type:"text",placeholder:"Search classes...",onChange:M,style:{width:"100%"}})]})})})}),C==null?void 0:C.map((y,V)=>(C==null?void 0:C.length)===V+1?s.jsx("div",{ref:f,children:s.jsx(os,{applicant:y,onSelectApplicant:H,transferApplicat:P})},V):s.jsx(os,{applicant:y,onSelectApplicant:H,transferApplicat:P},V)),N&&s.jsx(ne,{status:"white"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:h.admission_class_confirm,children:[d("transfering")," ",s.jsx("span",{style:{fontWeight:"600"},children:P==null?void 0:P.length})," ",d("students")," "," ",",",d("to")," ",s.jsx("span",{style:{fontWeight:"600"},children:(F==null?void 0:F.applicationName)??""})]}),s.jsx("div",{className:h.confirm_btn,onClick:W,children:d("confirm")})]}),S&&s.jsx(se,{})]})}):s.jsx(At,{onBack:Q,onSelectApp:D,transferApplication:F})})},Ut=["Request_Query","Confirm_Query","Allot_Query"],ye=({applicationDetail:e,carryParentState:i,instituteId:t,tabStatusFlow:d,applicationDetailApplicablePending:m,onRefetchConfirmTab:c,pageOpenAs:_,children:n})=>{var u,P,l,b;const g=ce(),j=le(),[x,w]=o.useState({msg:"",run:!1}),[f,E]=o.useState(!1),[C,v]=o.useState(!1),[k,$]=o.useState(!1),[N]=Ct(),T=()=>{_==="INSTITUTE"?g(`/q/${j.username}/admission?a=ongoing`,{state:{...i}}):g(`/q/${j.username}/member/admission?a=ongoing`,{state:{...i}})},F=()=>{e!=null&&e._id&&d&&(E(r=>!r),N({appId:e==null?void 0:e._id,flow:d}).then(r=>{var S;w({msg:(S=r==null?void 0:r.data)==null?void 0:S.message,run:!0}),setTimeout(()=>{_==="INSTITUTE"?g(`/q/${j.username}/admission?a=export`,{state:i}):g(`/q/${j.username}/member/admission?a=export`,{state:i})},1e3)}).catch({}))};return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:h.moderator_container_title,children:[s.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:T,alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),s.jsxs("div",{className:h.with_search,children:[s.jsx("h6",{children:(e==null?void 0:e.applicationName)??""}),s.jsxs("div",{className:h.search_container_filter,children:[s.jsx("section",{className:h.search_container,children:s.jsxs("div",{className:h.search_container_input,children:[s.jsx("img",{className:h.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),n]})}),s.jsx(re,{to:"/q/joining",state:{formAs:"STUDENT",openAs:"ADMISSION_ADMIN_SIDE",instituteId:t,appId:e==null?void 0:e._id,admissionAmount:[(e==null?void 0:e.admissionFee)??0,((u=e==null?void 0:e.one_installments)==null?void 0:u.fees)??0],applicationMaster:e==null?void 0:e.applicationMaster,applicationDepartment:(P=e==null?void 0:e.applicationDepartment)==null?void 0:P._id,batchId:(l=e==null?void 0:e.applicationBatch)==null?void 0:l._id,departmentId:(b=e==null?void 0:e.applicationDepartment)==null?void 0:b._id,whichFormShow:"DEPARTMENT"},children:s.jsx("img",{style:{height:"2.2rem",cursor:"pointer"},src:"/images/add-icon.svg",alt:"icon",title:"Add student"})}),s.jsx("img",{style:{height:"2.2rem",cursor:"pointer"},onClick:()=>v(!0),src:"/images/application_info.svg",alt:"icon",title:"View Application Details"}),Ut.includes(d)?s.jsx("img",{style:{height:"2.2rem",cursor:"pointer"},onClick:F,src:"/images/member_tab/finance/finance-export-icon.svg",alt:""}):null,d==="Confirm_Query"?s.jsx("img",{style:{height:"2.2rem",cursor:"pointer"},onClick:()=>$(!0),src:"/images/member_tab/admission/admission-transfer-icon.svg",alt:""}):null]})]})]}),s.jsx(p,{customStyle:{width:"100%",marginTop:"0.5rem"}}),C&&s.jsx(St,{completeApplication:!0,viewDetail:C,applicationDetail:e,hideModal:v,carryParentState:i,applicationDetailApplicablePending:m,pageOpenAs:_}),k&&s.jsx(Bt,{instituteId:t,applicationId:e==null?void 0:e._id,onClose:()=>$(!1),onRefetchConfirmTab:c}),f&&s.jsx(se,{}),s.jsx(Qe,{msg:x.msg,run:x.run,setRun:()=>w({msg:"",run:!1}),postiton:"bottom",type:"success"})]})},we=({carryParentState:e,accessRole:i,accessTpye:t,pageOpenAs:d})=>{var g,j,x,w,f;const{t:m}=z(),c=ve(),_=[{name:m("application"),id:0,url:"member/admission?a=ongoing&n=application",is_active:["MULTI_APP_ACCESS"].includes(i)||!i?"enabled":["ONE_TAB_ACCESS"].includes(i)?t==="Application"?"enabled":"disabled":"enabled"},{name:m("selected"),id:1,url:"member/admission?a=ongoing&n=select",is_active:["MULTI_APP_ACCESS"].includes(i)||!i?"enabled":["ONE_TAB_ACCESS"].includes(i)?t==="Selected"?"enabled":"disabled":"enabled"},{name:m("confirmed"),id:2,url:"member/admission?a=ongoing&n=confirm",is_active:["MULTI_APP_ACCESS"].includes(i)||!i?"enabled":["ONE_TAB_ACCESS"].includes(i)?t==="Confirmed"?"enabled":"disabled":"enabled"},{name:m("allotted"),id:3,url:"member/admission?a=ongoing&n=allot",is_active:["MULTI_APP_ACCESS"].includes(i)||!i?"enabled":["ONE_TAB_ACCESS"].includes(i)?t==="Allotted"?"enabled":"disabled":"enabled"},{name:m("cancelled"),id:4,url:"member/admission?a=ongoing&n=cancel",is_active:["MULTI_APP_ACCESS"].includes(i)||!i?"enabled":["ONE_TAB_ACCESS"].includes(i)?t==="Cancelled"?"enabled":"disabled":"enabled"}],n=[{name:m("application"),id:0,url:"admission?a=ongoing&n=application",is_active:"enabled"},{name:m("selected"),id:1,url:"admission?a=ongoing&n=select",is_active:"enabled"},{name:m("confirmed"),id:2,url:"admission?a=ongoing&n=confirm",is_active:"enabled"},{name:m("allotted"),id:3,url:"admission?a=ongoing&n=allot",is_active:"enabled"},{name:m("cancelled"),id:4,url:"admission?a=ongoing&n=cancel",is_active:"enabled"}];return s.jsxs(s.Fragment,{children:[s.jsx(gs,{tabList:d==="INSTITUTE"?n:_,activeIndexTab:((g=c.search)==null?void 0:g.substring(13))==="application"?0:((j=c.search)==null?void 0:j.substring(13))==="select"?1:((x=c.search)==null?void 0:x.substring(13))==="confirm"||((w=c.search)==null?void 0:w.substring(13))==="mulitple"?2:((f=c.search)==null?void 0:f.substring(13))==="allot"?3:4,showAs:!0,customStyleTab:{width:"100%"},customStyleLink:{width:"20%"},carryParentState:e}),s.jsx(p,{customStyle:{width:"100%"}})]})},Mt=ws.lazy(()=>ks(()=>import("./AdmissionCancelApplication-4f9ce726.js"),["assets/AdmissionCancelApplication-4f9ce726.js","assets/index-731451a5.js","assets/index-4d24e8f6.css","assets/PopupWrapper-ffbaef7a.js","assets/Overlay-07ce6f88.js","assets/Overlay.module-9133d1bb.js","assets/Overlay-6f7772cd.css","assets/SearchModalWrapper-6e85c9f3.js","assets/SearchModalBackdrop-5b309d60.js","assets/SearchHeader.module-b69c8942.js","assets/SearchHeader-d07f850c.css","assets/HostelFeeStructure.module-5a40a31e.js","assets/HostelFeeStructure-4b6c9716.css","assets/admission-api-56b87fde.js","assets/BorderBottom-47800983.js","assets/BorderBottom-eabbc1eb.css","assets/JoinFormInput-8e74a0e0.js","assets/JoinForm.module-212f9bb3.js","assets/JoinForm-e988a09c.css"])),is=({applicant:e,onRefetchWhenSelect:i,applicationId:t,departmentId:d,classMasterId:m,batchId:c,instituteId:_})=>{var P,l,b,r,S,O,R,a,A,q,M,Q,H,U,D,W,y,V,L,B,I,G,K,Y,X,oe,fe,ee;const{t:n}=z(),g=le(),j=ce(),[x,w]=o.useState(!1),[f,E]=o.useState(!1),[C,v]=o.useState(!1),[k]=qs(),$=()=>{var Z;j(`/q/${g.username}/student/profile`,{state:{sid:(Z=e==null?void 0:e.student)==null?void 0:Z._id,viewAs:"ADMISSION_ADMIN",instituteId:_}})},N=Z=>{Z.stopPropagation(),E(!0)},T=Z=>{Z.stopPropagation(),w(ie=>!ie)},F=Z=>{var ie,te;((ie=e==null?void 0:e.student)==null?void 0:ie._id)!==""&&t!==""&&Z&&(v(je=>!je),k({sid:(te=e==null?void 0:e.student)==null?void 0:te._id,aid:t,selectApplicant:{fee_struct:Z}}).then(()=>{i(),v(je=>!je)}).catch(()=>{v(je=>!je)}))},u=Z=>{Z.stopPropagation()};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:h.applicant_card_container,onClick:$,title:"View Profile",children:[s.jsxs("div",{className:h.applicant_card_inner,children:[s.jsx("img",{alt:"Student Request Avatar",src:((P=e==null?void 0:e.student)==null?void 0:P.photoId)!=="1"?`${he}/${(l=e==null?void 0:e.student)==null?void 0:l.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",loading:"lazy"}),s.jsxs("div",{className:h.applicant_card_inner_info,children:[s.jsx("h6",{children:`${(b=e==null?void 0:e.student)==null?void 0:b.studentFirstName} ${(r=e==null?void 0:e.student)!=null&&r.studentMiddleName?(S=e==null?void 0:e.student)==null?void 0:S.studentMiddleName:""} ${(O=e==null?void 0:e.student)==null?void 0:O.studentLastName}`}),s.jsxs("p",{children:[n("applied_on"),":"," ",Ne(e==null?void 0:e.apply_on).format("DD MMM yyyy")]})]})]}),s.jsxs("div",{className:h.applicant_card_contact,children:[s.jsxs("div",{className:h.applicant_card_contact_inner,children:[s.jsx("img",{src:"/images/admidion_department/gender.svg",alt:""}),s.jsx("p",{children:(R=e==null?void 0:e.student)==null?void 0:R.studentGender})]}),(((a=e==null?void 0:e.student)==null?void 0:a.studentPhoneNumber)||((q=(A=e==null?void 0:e.student)==null?void 0:A.user)==null?void 0:q.userPhoneNumber)||((Q=(M=e==null?void 0:e.student)==null?void 0:M.user)==null?void 0:Q.userEmail)||((H=e==null?void 0:e.student)==null?void 0:H.studentParentsPhoneNumber))&&s.jsxs("div",{className:h.applicant_card_contact_inner,children:[s.jsx("img",{src:"/images/admidion_department/phone.svg",alt:""}),s.jsx("p",{style:{marginBottom:"0 !important"},children:(D=(U=e==null?void 0:e.student)==null?void 0:U.user)!=null&&D.userPhoneNumber?(y=(W=e==null?void 0:e.student)==null?void 0:W.user)==null?void 0:y.userPhoneNumber:(L=(V=e==null?void 0:e.student)==null?void 0:V.user)!=null&&L.userEmail?(I=(B=e==null?void 0:e.student)==null?void 0:B.user)==null?void 0:I.userEmail:(G=e==null?void 0:e.student)!=null&&G.studentPhoneNumber?(K=e==null?void 0:e.student)==null?void 0:K.studentPhoneNumber:(Y=e==null?void 0:e.student)==null?void 0:Y.studentParentsPhoneNumber})]})]}),s.jsx("div",{className:h.applicant_card_reciept,onClick:u,children:s.jsx("a",{href:`${Te}/${(fe=(oe=(X=e==null?void 0:e.student)==null?void 0:X.application_print)==null?void 0:oe[0])==null?void 0:fe.value}`,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:s.jsx("img",{src:"/images/member_tab/admission/admission-form-download.svg",alt:"receipt icon",title:"View Application Form"})})}),s.jsxs("div",{className:h.application_button,children:[s.jsx("div",{className:h.selectAppBtnContainer,onClick:N,children:s.jsx("div",{className:h.selectBtn,children:n("select")})}),s.jsx("div",{className:h.selectAppBtnContainer,onClick:T,children:s.jsx("div",{className:h.cancelledBtn,children:n("reject")})})]})]}),s.jsx(Et,{children:x&&s.jsx(Mt,{studentId:(ee=e==null?void 0:e.student)==null?void 0:ee._id,applicationId:t,onClose:()=>w(Z=>!Z),onRefetchWhenSelect:i})}),f&&s.jsx(xs,{departmentId:d,classMasterId:m,batchId:c,onClose:()=>E(Z=>!Z),onSelectedStudent:F}),C&&s.jsx(se,{})]})};function Vt({applicationId:e,carryParentState:i,applicationDetail:t,instituteId:d,accessRole:m,accessTpye:c,applicationDetailApplicablePending:_,pageOpenAs:n}){const[g,j]=o.useState(!0),[x,w]=o.useState(1),[f,E]=o.useState(""),[C,v]=de(),[k,$]=o.useState([]),[N,T]=o.useState(!1),[F,u]=o.useState(!0),{getAllRequestList:P,getAllRequestListRefetch:l}=Ws({data:{id:e,page:x,limit:10,search:f||""},skip:!e}),{scrollToTop:b}=ae();o.useEffect(()=>{b()},[]),o.useEffect(()=>{v&&g&&w(R=>R+1)},[v,g]),o.useEffect(()=>{e&&(u(!0),l())},[x,e,l,f]),o.useEffect(()=>{var R,a;f?($(P==null?void 0:P.request),u(!1)):N?($(P==null?void 0:P.request),T(!1),u(!1)):P!=null&&P.request?($(A=>[...new Set([...A,...P==null?void 0:P.request].map(JSON.stringify))].map(JSON.parse)),u(!1)):((R=P==null?void 0:P.request)==null?void 0:R.length)===0&&u(!1),((a=P==null?void 0:P.request)==null?void 0:a.length)===10?j(!0):j(!1)},[P==null?void 0:P.request]);const r=()=>{w(1),l(),T(!0)},S=o.useCallback(Se.debounce(R=>E(R),500),[]),O=R=>{S(R.target.value)};return s.jsxs(s.Fragment,{children:[s.jsx(ye,{applicationDetail:t,carryParentState:i,instituteId:d,tabStatusFlow:"Request_Query",applicationDetailApplicablePending:_,pageOpenAs:n,children:s.jsx("input",{type:"text",placeholder:"Search requests...",onChange:O})}),s.jsx(we,{carryParentState:i,accessRole:m,accessTpye:c,pageOpenAs:n}),k==null?void 0:k.map((R,a)=>{var A,q,M,Q;return(k==null?void 0:k.length)===a+1?s.jsx("div",{ref:C,children:s.jsx(is,{applicant:R,onRefetchWhenSelect:r,applicationId:e,departmentId:(A=t==null?void 0:t.applicationDepartment)==null?void 0:A._id,batchId:(q=t==null?void 0:t.applicationBatch)==null?void 0:q._id,classMasterId:t==null?void 0:t.applicationMaster,instituteId:d})},a):s.jsx(is,{applicant:R,onRefetchWhenSelect:r,applicationId:e,departmentId:(M=t==null?void 0:t.applicationDepartment)==null?void 0:M._id,batchId:(Q=t==null?void 0:t.applicationBatch)==null?void 0:Q._id,classMasterId:t==null?void 0:t.applicationMaster,instituteId:d},a)}),F&&s.jsx(ne,{})]})}const Dt=({applicationId:e,studentId:i,statusId:t,onRefetch:d,isSelected:m})=>{const[c,_]=o.useState(!1),[n]=Js(),[g]=Is(),j=x=>{x.stopPropagation(),t&&i&&e&&(m==="Not Collected"?(_(w=>!w),n({sid:i,aid:e,revertData:{statusId:t}}).then(()=>{d(),_(w=>!w)}).catch({})):m==="Collected"&&(_(w=>!w),g({sid:i,aid:e,revertData:{statusId:t}}).then(()=>{d(),_(w=>!w)}).catch({})))};return s.jsxs(s.Fragment,{children:[s.jsx("img",{src:"/images/member_tab/admission/admission-undo-icon.svg",alt:"undo icon",style:{cursor:"pointer",width:"30px"},onClick:j,title:m==="Not Collected"?"Undo Application":"Undo Collect Document"}),c&&s.jsx(se,{})]})},rs=({applicant:e,onSelectOffileFees:i,onCollectDocs:t,onEditFee:d,instituteId:m,applicationId:c,onRefetch:_})=>{var k,$,N,T,F,u,P,l,b,r,S,O,R,a,A,q,M,Q,H,U,D,W,y,V,L,B,I,G,K,Y,X,oe,fe,ee,Z,ie;const{t:n}=z(),g=le(),j=ce(),x=()=>{var te;j(`/q/${g.username}/student/profile`,{state:{sid:(te=e==null?void 0:e.student)==null?void 0:te._id,viewAs:"ADMISSION_ADMIN",instituteId:m}})},w=te=>{te.stopPropagation(),i(e)},f=te=>{te.stopPropagation(),t(e)},E=te=>{var je;te.stopPropagation(),d((je=e==null?void 0:e.student)==null?void 0:je._id)},C=te=>{te.stopPropagation()},v=te=>{te.stopPropagation()};return s.jsxs("div",{className:h.applicant_card_container,onClick:x,title:"View Profile",children:[s.jsxs("div",{className:h.applicant_card_inner,children:[s.jsx("img",{alt:"Student Request Avatar",src:((k=e==null?void 0:e.student)==null?void 0:k.photoId)!=="1"?`${he}/${($=e==null?void 0:e.student)==null?void 0:$.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",loading:"lazy"}),s.jsxs("div",{className:h.applicant_card_inner_info,children:[s.jsx("h6",{children:`${(N=e==null?void 0:e.student)==null?void 0:N.studentFirstName} ${(T=e==null?void 0:e.student)!=null&&T.studentMiddleName?(F=e==null?void 0:e.student)==null?void 0:F.studentMiddleName:""} ${(u=e==null?void 0:e.student)==null?void 0:u.studentLastName}`}),s.jsxs("h6",{children:[n("fee_structure")," : ",((b=(l=(P=e==null?void 0:e.student)==null?void 0:P.fee_structure)==null?void 0:l.category_master)==null?void 0:b.category_name)??"",", ",n("rs")," ",((S=(r=e==null?void 0:e.student)==null?void 0:r.fee_structure)==null?void 0:S.applicable_fees)??""]}),s.jsx("p",{children:e!=null&&e.install_type?e==null?void 0:e.install_type:`
          ${n("select_on")}:
          ${Ne(e==null?void 0:e.select_on).format("DD MMM yyyy")}`})]})]}),s.jsxs("div",{className:h.applicant_card_contact,children:[s.jsxs("div",{className:h.applicant_card_contact_inner,children:[s.jsx("img",{src:"/images/admidion_department/gender.svg",alt:""}),s.jsx("p",{children:(O=e==null?void 0:e.student)==null?void 0:O.studentGender})]}),(((R=e==null?void 0:e.student)==null?void 0:R.studentPhoneNumber)||((A=(a=e==null?void 0:e.student)==null?void 0:a.user)==null?void 0:A.userPhoneNumber)||((M=(q=e==null?void 0:e.student)==null?void 0:q.user)==null?void 0:M.userEmail)||((Q=e==null?void 0:e.student)==null?void 0:Q.studentParentsPhoneNumber))&&s.jsxs("div",{className:h.applicant_card_contact_inner,children:[s.jsx("img",{src:"/images/admidion_department/phone.svg",alt:""}),s.jsx("p",{style:{marginBottom:"0 !important"},children:(U=(H=e==null?void 0:e.student)==null?void 0:H.user)!=null&&U.userPhoneNumber?(W=(D=e==null?void 0:e.student)==null?void 0:D.user)==null?void 0:W.userPhoneNumber:(V=(y=e==null?void 0:e.student)==null?void 0:y.user)!=null&&V.userEmail?(B=(L=e==null?void 0:e.student)==null?void 0:L.user)==null?void 0:B.userEmail:(I=e==null?void 0:e.student)!=null&&I.studentPhoneNumber?(G=e==null?void 0:e.student)==null?void 0:G.studentPhoneNumber:(K=e==null?void 0:e.student)==null?void 0:K.studentParentsPhoneNumber})]})]}),s.jsx("div",{className:h.applicant_card_reciept,onClick:v,children:s.jsx("a",{href:`${Te}/${(oe=(X=(Y=e==null?void 0:e.student)==null?void 0:Y.application_print)==null?void 0:X[0])==null?void 0:oe.value}`,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:s.jsx("img",{src:"/images/member_tab/admission/admission-form-download.svg",alt:"receipt icon",title:"View Application Form"})})}),((fe=e==null?void 0:e.payment_status)==null?void 0:fe.toLowerCase())==="receipt requested"?s.jsxs("div",{className:h.selectBtnContainer,style:{display:"flex",justifyContent:"space-evenly"},children:[s.jsx("div",{className:h.receipt_requested_btn,onClick:C,children:n("receipt_requested")}),s.jsx("img",{src:"/images/bank-edit-icon.svg",alt:"back arrow",className:h.back_icon,onClick:E})]}):s.jsxs("div",{className:h.selectBtnContainer,style:{display:"flex",justifyContent:"space-evenly"},children:[((ee=e==null?void 0:e.payment_status)==null?void 0:ee.toLowerCase())==="pending"&&((e==null?void 0:e.docs_collect)==="Not Collected"?s.jsx("div",{className:h.onlineBtn,onClick:f,children:n("collect_docs")}):s.jsx("div",{className:h.selectBtn,onClick:w,children:n("collect_fee")})),((Z=e==null?void 0:e.payment_status)==null?void 0:Z.toLowerCase())==="online"&&s.jsx("div",{className:h.onlineBtn,onClick:f,children:n("collect_docs")}),s.jsx("img",{src:"/images/bank-edit-icon.svg",alt:"back arrow",className:h.back_icon,onClick:E})]}),s.jsx(Dt,{applicationId:c,studentId:(ie=e==null?void 0:e.student)==null?void 0:ie._id,statusId:(e==null?void 0:e.docs_collect)==="Not Collected"?e==null?void 0:e.revert_request_status:(e==null?void 0:e.docs_collect)==="Collected"?e==null?void 0:e.status_id:"",onRefetch:_,isSelected:e==null?void 0:e.docs_collect})]})},qt=({currentApplicant:e,onClose:i,applicationId:t,onRefetchWhenConfirm:d})=>{var w,f,E,C,v,k;const{t:m}=z(),[c,_]=o.useState(!1),[n]=Gs(),[g]=Hs(),j=()=>{var $,N;t&&(($=e==null?void 0:e.student)!=null&&$._id)&&(_(T=>!T),n({aid:t,sid:(N=e==null?void 0:e.student)==null?void 0:N._id}).then(()=>{d(),i(),_(T=>!T)}).catch(()=>{_(T=>!T)}))},x=()=>{var $,N;t&&(($=e==null?void 0:e.student)!=null&&$._id)&&(_(T=>!T),g({aid:t,sid:(N=e==null?void 0:e.student)==null?void 0:N._id}).then(()=>{d(),i(),_(T=>!T)}).catch(()=>{_(T=>!T)}))};return s.jsxs(me,{onClose:i,children:[s.jsxs("div",{className:h.not_confirm_container,children:[s.jsx("h6",{children:m("admission_status")}),s.jsx(p,{customStyle:{marginLeft:"-2rem",width:"130%"}}),s.jsxs("section",{className:h.applicant_profile,children:[s.jsx("img",{alt:"Student Request Avatar",src:((w=e==null?void 0:e.student)==null?void 0:w.photoId)!=="1"?`${he}/${(f=e==null?void 0:e.student)==null?void 0:f.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg"}),s.jsxs("div",{className:h.applicant_profile_text,children:[s.jsx("h6",{children:`${(E=e==null?void 0:e.student)==null?void 0:E.studentFirstName} ${(C=e==null?void 0:e.student)!=null&&C.studentMiddleName?(v=e==null?void 0:e.student)==null?void 0:v.studentMiddleName:""} ${(k=e==null?void 0:e.student)==null?void 0:k.studentLastName}`}),s.jsxs("p",{children:[m("applied")," ",Ne(e==null?void 0:e.select_on).format("DD MMM yyyy")]})]})]}),s.jsxs("section",{className:h.button_group,children:[s.jsx("button",{onClick:j,children:m("confirm")}),s.jsx("button",{onClick:x,children:m("reject")})]})]}),c&&s.jsx(se,{})]})};function Wt({applicationId:e,currentApplicant:i,onRefetchWhenConfirm:t,onClose:d}){var j,x,w,f;const{t:m}=z(),[c,_]=o.useState(!1),[n]=Qs(),g=()=>{var E,C;(E=i==null?void 0:i.student)!=null&&E._id&&e&&(_(!0),n({sid:(C=i==null?void 0:i.student)==null?void 0:C._id,aid:e}).then(()=>{t(),d(),_(!1)}).catch({}))};return s.jsxs(me,{onClose:d,children:[s.jsxs("div",{className:h.not_confirm_container,children:[s.jsx("h6",{children:m("collect_required_document")}),s.jsx(p,{customStyle:{width:"100%"}}),s.jsxs("section",{className:h.admission_collect_docs,children:[s.jsx("p",{children:m("collecting_documents_of_student")}),s.jsx("h6",{children:`${(j=i==null?void 0:i.student)==null?void 0:j.studentFirstName} ${(x=i==null?void 0:i.student)!=null&&x.studentMiddleName?(w=i==null?void 0:i.student)==null?void 0:w.studentMiddleName:""} ${(f=i==null?void 0:i.student)==null?void 0:f.studentLastName}`})]}),s.jsx("button",{onClick:g,className:h.confirm_btn,children:m("confirm")})]}),c&&s.jsx(se,{})]})}function Jt({currentApplicant:e,applicationId:i,onRefetchWhenConfirm:t,onClose:d}){var T,F,u,P,l;const[m,c]=o.useState(!1),{t:_}=z(),[n,g]=o.useState({amount:"",mode:"",fee_payment_mode:"",fee_payment_amount:"",transaction_date:"",fee_bank_name:"",fee_bank_holder:"",fee_utr_reference:""}),[j,x]=o.useState({msg:"",run:!1}),[w,f]=o.useState(""),[E]=zs(),C=b=>{g(r=>({...r,amount:+b.target.value,fee_payment_amount:+b.target.value}))},v=b=>{b.target.name==="fee_payment_mode"?g(r=>({...r,[b.target.name]:b.target.value,mode:b.target.value==="By Cash"?"Offline":"Online",fee_payment_mode:b.target.value})):g(r=>({...r,[b.target.name]:b.target.value}))},k=b=>{const r=b==null?void 0:b.split("/");g(S=>({...S,transaction_date:`${r[2]}-${r[1]}-${r[0]}`}))},$=b=>{var S,O;const r={};for(let R in b)R==="fee_bank_name"||R==="fee_bank_holder"||R==="fee_utr_reference"||R==="amount"||R==="mode"||(b[R]?R==="fee_payment_amount"&&(b[R]<=((O=(S=e==null?void 0:e.student)==null?void 0:S.fee_structure)==null?void 0:O.total_admission_fees)||(x({msg:"You can not enter amount greater than Admission fees.",run:!0}),r.fee_payment_amount=`${R} is required!`)):r[R]=`${R} is required!`);return r},N=()=>{var S,O,R;const b=$(n);let r=!1;for(let a in b){r=!0;break}if(r)f(b);else{c(!0);const a={sid:(S=e==null?void 0:e.student)==null?void 0:S._id,aid:i,confirm_data:n,receipt_status:n.fee_payment_mode==="Fee Receipt Not Generated"?"Fee Receipt Not Generated":""};(a==null?void 0:a.sid)!==""&&(a==null?void 0:a.aid)!==""&&((O=a==null?void 0:a.confirm_data)==null?void 0:O.amount)>0&&((R=a==null?void 0:a.confirm_data)==null?void 0:R.mode)!==""?E(a).then(A=>{A.data.confirm_status&&(t(),d(!1),c(!1))}).catch({}):c(!1)}};return s.jsxs(me,{onClose:d,children:[s.jsxs("div",{className:h.admission_modal,children:[s.jsx("h6",{className:h.admission_modal_heading,children:_("collect_fees")}),s.jsx(p,{customStyle:{width:"100%",margin:"0.7rem 0"}}),s.jsxs("div",{className:h.admission_fees_row,children:[s.jsxs("h6",{children:[_("applicable_amount")," :"]}),s.jsxs("h6",{children:[_("rs"),"."," ",(F=(T=e==null?void 0:e.student)==null?void 0:T.fee_structure)==null?void 0:F.applicable_fees]})]}),s.jsx(ue,{labelText:`${_("amount_first_installment")} ${(l=(P=(u=e==null?void 0:e.student)==null?void 0:u.fee_structure)==null?void 0:P.one_installments)==null?void 0:l.fees}`,name:"amount",type:"tel",value:n.amount,onChange:C,placeholder:_("amoute_details_collect"),errorShow:w.fee_payment_amount,customStyleLabel:{marginTop:"15px",marginBottom:"7px"},customStyleContainer:{marginBottom:"15px"}}),s.jsx(js,{paymentHeading:_("payment_type_mode"),onInputChange:v,errorShow:w.fee_payment_mode}),s.jsx(Ns,{labelText:_("select_date_of_transaction"),placeholder:_("please_select_date"),name:"transaction_date",value:n.transaction_date,onDateFunction:k,customStyleContainer:{position:"relative",marginTop:"0.5rem"},datePickerPosition:{position:"relative",top:"-20rem"},customStyleLabel:{marginTop:"15px"},errorShow:w.transaction_date}),n.fee_payment_mode==="By Cash"?"":s.jsxs(s.Fragment,{children:[s.jsx(ue,{labelText:_("bank_name_collect"),name:"fee_bank_name",type:"tel",value:n.fee_bank_name,onChange:v,placeholder:_("please_enter_bank_name"),customStyleLabel:{marginTop:"15px",marginBottom:"7px"}}),s.jsx(ue,{labelText:_("banke_holder_name"),name:"fee_bank_holder",type:"tel",value:n.fee_bank_holder,onChange:v,placeholder:_("please_enter_name_of_bank_holder"),customStyleLabel:{marginTop:"15px",marginBottom:"7px"}}),s.jsx(ue,{labelText:_("cheque_dd_neft"),name:"fee_utr_reference",type:"tel",value:n.fee_utr_reference,onChange:v,placeholder:_("please_enter_utr_ref_number"),customStyleLabel:{marginTop:"15px",marginBottom:"7px"}})]}),s.jsx("div",{className:h.confirm_btn,onClick:N,children:_("collect")}),s.jsx(Qe,{msg:j.msg,run:j.run,setRun:()=>x({msg:"",run:!1}),postiton:"bottom",type:"error"})]}),m&&s.jsx(se,{})]})}function It({applicationId:e,applicationDetail:i,carryParentState:t,accessRole:d,accessTpye:m,instituteId:c,applicationDetailApplicablePending:_,pageOpenAs:n}){var L,B;const[g,j]=o.useState(!0),[x,w]=o.useState(1),[f,E]=o.useState(""),[C,v]=de(),[k,$]=o.useState([]),[N,T]=o.useState(!1),[F,u]=o.useState(!0),[P,l]=o.useState(""),[b,r]=o.useState(""),[S,O]=o.useState(!1),[R]=Xs(),{getAllSelectList:a,getAllSelectListRefetch:A}=Ys({data:{id:e,page:x,limit:10,search:f||""},skip:!e}),{scrollToTop:q}=ae();o.useEffect(()=>{q()},[]),o.useEffect(()=>{v&&g&&w(I=>I+1)},[v,g]),o.useEffect(()=>{e&&(u(!0),A())},[x,e,A,f]),o.useEffect(()=>{var I,G;f?($(a==null?void 0:a.select),u(!1)):N?($(a==null?void 0:a.select),T(!1),u(!1)):a!=null&&a.select?($(K=>[...new Set([...K,...a==null?void 0:a.select].map(JSON.stringify))].map(JSON.parse)),u(!1)):((I=a==null?void 0:a.select)==null?void 0:I.length)===0&&u(!1),((G=a==null?void 0:a.select)==null?void 0:G.length)===10?j(!0):j(!1)},[a==null?void 0:a.select]);const M=()=>{w(1),A(),T(!0)},Q=o.useCallback(Se.debounce(I=>E(I),500),[]),H=I=>{Q(I.target.value)},U=I=>{r(I),l("COLLECT_FEES")},D=I=>{r(I),l("COLLECT_DOCS")},W=I=>{r(I),l("EDIT_STRUCTURE")},y=I=>{r(I),l("MARK_CONFIRM")},V=I=>{b!==""&&e!==""&&(O(G=>!G),R({sid:b,aid:e,editStructure:{fee_struct:I}}).then(()=>{M(),O(G=>!G)}).catch(()=>{O(G=>!G)}))};return s.jsxs(s.Fragment,{children:[s.jsx(ye,{applicationDetail:i,carryParentState:t,instituteId:c,applicationDetailApplicablePending:_,pageOpenAs:n,children:s.jsx("input",{type:"text",placeholder:"Search applications...",onChange:H})}),s.jsx(we,{carryParentState:t,accessRole:d,accessTpye:m,pageOpenAs:n}),k==null?void 0:k.map((I,G)=>(k==null?void 0:k.length)===G+1?s.jsx("div",{ref:C,children:s.jsx(rs,{applicant:I,onEditFee:W,onSelectOffileFees:U,onCollectDocs:D,onNotConfirm:y,instituteId:c,applicationId:e,onRefetch:M})},G):s.jsx(rs,{applicant:I,onEditFee:W,onSelectOffileFees:U,onCollectDocs:D,onNotConfirm:y,instituteId:c,applicationId:e,onRefetch:M},G)),F&&s.jsx(ne,{}),P==="MARK_CONFIRM"&&s.jsx(qt,{currentApplicant:b,applicationId:e,onClose:()=>l(""),onRefetchWhenConfirm:M}),P==="EDIT_STRUCTURE"&&s.jsx(xs,{departmentId:(L=i==null?void 0:i.applicationDepartment)==null?void 0:L._id,batchId:(B=i==null?void 0:i.applicationBatch)==null?void 0:B._id,classMasterId:i==null?void 0:i.applicationMaster,onClose:()=>l(""),onSelectedStudent:V,asOpen:"SELECTED_TAB"}),P==="COLLECT_DOCS"&&s.jsx(Wt,{currentApplicant:b,applicationId:e,onClose:()=>l(""),onRefetchWhenConfirm:M}),P==="COLLECT_FEES"&&s.jsx(Jt,{onClose:()=>l(""),currentApplicant:b,applicationId:e,onRefetchWhenConfirm:M}),S&&s.jsx(se,{})]})}const ds=({onAllotApplicantBatch:e,onCancelAdmission:i,applicant:t,instituteId:d})=>{var F,u,P,l,b,r,S,O,R,a,A,q,M,Q,H,U,D,W,y,V,L,B,I,G,K,Y,X,oe,fe;const{t:m}=z(),c=le(),_=ce(),[n,g]=o.useState(""),[j,x]=o.useState(!1),[w,f]=o.useState(""),{getFeeReceiptDetail:E,getFeeReceiptDetailRefetch:C}=Xe({rid:n,skip:!n});o.useEffect(()=>{n&&C()},[n,C]),o.useEffect(()=>{E!=null&&E.receipt&&(E!=null&&E.all_remain)&&f(E)},[E]),o.useEffect(()=>{if(w){const{institute:ee,studentInfo:Z,paymentReceiptInfo:ie}=Ze(w==null?void 0:w.all_remain,w==null?void 0:w.receipt),te=new Worker(new URL(pe,import.meta.url),{type:"module"});te.postMessage({institute:ee,studentInfo:Z,paymentReceiptInfo:ie,printReceiptType:(ie==null?void 0:ie.transactonRefund)==="Refunded"?"ADMISSION_REFUND":"ADMISSION"}),te.onmessage=je=>{je&&(window.open(je.data,"_blank"),x(ys=>!ys),f(""),te.terminate())}}},[w]);const v=()=>{var ee;_(`/q/${c.username}/student/profile`,{state:{sid:(ee=t==null?void 0:t.student)==null?void 0:ee._id,viewAs:"ADMISSION_ADMIN",instituteId:d}})},k=ee=>{ee.stopPropagation(),i(t)},$=ee=>{ee.stopPropagation(),e(t)},N=(ee,Z)=>{ee.stopPropagation(),x(ie=>!ie),g(Z),n===Z&&f(E)},T=ee=>{ee.stopPropagation()};return s.jsxs("div",{className:h.applicant_card_container,onClick:v,title:"View Profile",children:[s.jsxs("div",{className:h.applicant_card_inner,children:[s.jsx("img",{alt:"Student Request Avatar",src:((F=t==null?void 0:t.student)==null?void 0:F.photoId)!=="1"?`${he}/${(u=t==null?void 0:t.student)==null?void 0:u.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",loading:"lazy"}),s.jsxs("div",{className:h.applicant_card_inner_info,children:[s.jsx("h6",{children:`${(P=t==null?void 0:t.student)==null?void 0:P.studentFirstName} ${(l=t==null?void 0:t.student)!=null&&l.studentMiddleName?(b=t==null?void 0:t.student)==null?void 0:b.studentMiddleName:""} ${(r=t==null?void 0:t.student)==null?void 0:r.studentLastName}`}),s.jsx("p",{onClick:k,className:h.cancelStatus,children:m("cancel_admision")})]})]}),s.jsxs("div",{className:h.applicant_card_contact,children:[s.jsxs("div",{className:h.applicant_card_contact_inner,children:[s.jsx("img",{src:"/images/admidion_department/gender.svg",alt:""}),s.jsx("p",{children:(S=t==null?void 0:t.student)==null?void 0:S.studentGender})]}),(((O=t==null?void 0:t.student)==null?void 0:O.studentPhoneNumber)||((a=(R=t==null?void 0:t.student)==null?void 0:R.user)==null?void 0:a.userPhoneNumber)||((q=(A=t==null?void 0:t.student)==null?void 0:A.user)==null?void 0:q.userEmail)||((M=t==null?void 0:t.student)==null?void 0:M.studentParentsPhoneNumber))&&s.jsxs("div",{className:h.applicant_card_contact_inner,children:[s.jsx("img",{src:"/images/admidion_department/phone.svg",alt:""}),s.jsx("p",{style:{marginBottom:"0 !important"},children:(H=(Q=t==null?void 0:t.student)==null?void 0:Q.user)!=null&&H.userPhoneNumber?(D=(U=t==null?void 0:t.student)==null?void 0:U.user)==null?void 0:D.userPhoneNumber:(y=(W=t==null?void 0:t.student)==null?void 0:W.user)!=null&&y.userEmail?(L=(V=t==null?void 0:t.student)==null?void 0:V.user)==null?void 0:L.userEmail:(B=t==null?void 0:t.student)!=null&&B.studentPhoneNumber?(I=t==null?void 0:t.student)==null?void 0:I.studentPhoneNumber:(G=t==null?void 0:t.student)==null?void 0:G.studentParentsPhoneNumber})]})]}),s.jsx("div",{className:h.applicant_card_reciept,onClick:T,children:s.jsx("a",{href:`${Te}/${(X=(Y=(K=t==null?void 0:t.student)==null?void 0:K.application_print)==null?void 0:Y[0])==null?void 0:X.value}`,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",marginTop:"-4.5px"},children:s.jsx("img",{src:"/images/member_tab/admission/admission-form-download.svg",alt:"receipt icon",title:"View Application Form"})})}),s.jsx("div",{className:h.applicant_card_reciept,children:(fe=(oe=t==null?void 0:t.student)==null?void 0:oe.fee_receipt)==null?void 0:fe.map((ee,Z)=>Z>2?"":s.jsx("img",{src:"/images/member_tab/admission/admission-receipt-download.svg",onClick:ie=>N(ie,ee),alt:"receipt icon",title:"Download Fees Receipt"},ee))}),s.jsx("div",{className:h.selectBtnContainer,style:{width:"auto"},children:s.jsx("div",{className:h.selectBtn,onClick:$,children:m("allot_class")})}),j&&s.jsx(se,{})]})};function Gt({onRefetchWhenAction:e,applicationId:i,currentApplicant:t,onClose:d}){var u,P,l;const{t:m}=z(),[c,_]=o.useState({amount:"",mode:"",fee_payment_mode:"",fee_payment_amount:"",transaction_date:"",fee_bank_name:"",fee_bank_holder:"",fee_utr_reference:""}),[n,g]=o.useState(""),[j,x]=o.useState(0),[w,f]=o.useState({msg:"",run:!1}),[E,C]=o.useState(!1),[v]=Ks();o.useEffect(()=>{var b,r,S,O,R;if((r=(b=t==null?void 0:t.student)==null?void 0:b.paidFeeList)!=null&&r.length){const a=(O=(S=t==null?void 0:t.student)==null?void 0:S.paidFeeList)==null?void 0:O.filter(A=>(A==null?void 0:A.appId)===i);x(((R=a==null?void 0:a[0])==null?void 0:R.paidAmount)??0)}},[(u=t==null?void 0:t.student)==null?void 0:u.paidFeeList]);const k=b=>{_(r=>({...r,amount:+b.target.value,fee_payment_amount:+b.target.value}))},$=b=>{b.target.name==="fee_payment_mode"?_(r=>({...r,[b.target.name]:b.target.value,mode:b.target.value==="By Cash"?"Offline":"Online",fee_payment_mode:b.target.value})):_(r=>({...r,[b.target.name]:b.target.value}))},N=b=>{const r=b==null?void 0:b.split("/");_(S=>({...S,transaction_date:`${r[2]}-${r[1]}-${r[0]}`}))},T=b=>{const r={};for(let S in b)S==="fee_bank_name"||S==="fee_bank_holder"||S==="fee_utr_reference"||S==="amount"||S==="mode"||(b[S]?S==="fee_payment_amount"&&(b[S]<=j||(f({msg:"You can not enter amount greater than fees paid",run:!0}),r.fee_payment_amount_issue=`${S} is required!`)):r[S]=`${S} is required!`);return r},F=()=>{var O,R;const b=T(c);let r=!1;for(let a in b){r=!0;break}if(r)g(b);else{C(!0);var S={sid:(O=t==null?void 0:t.student)==null?void 0:O._id,aid:i,cancel_data:{...c,remainAmount:(t==null?void 0:t.fee_remain)??0}};(S==null?void 0:S.sid)!==""&&(S==null?void 0:S.aid)!==""&&((R=S==null?void 0:S.cancel_data)==null?void 0:R.amount)>0&&v(S).then(a=>{var A;a.data.refund_status?(e(),d(),C(!1)):(f({msg:(A=a.data)==null?void 0:A.message,run:!0}),C(!1))}).catch({})}};return s.jsxs(me,{onClose:d,children:[s.jsxs("div",{className:h.admission_modal,children:[s.jsx("h6",{className:h.admission_modal_heading,children:m("cancel_addmission")}),s.jsx(p,{customStyle:{width:"100%",margin:"0.7rem 0"}}),s.jsxs("div",{className:h.admission_fees_row,children:[s.jsxs("h6",{children:[m("total_admission_fees")," :"]}),s.jsxs("h6",{children:[m("rs"),"."," ",((l=(P=t==null?void 0:t.student)==null?void 0:P.fee_structure)==null?void 0:l.total_admission_fees)??0]})]}),s.jsxs("div",{className:h.admission_fees_row,children:[s.jsxs("h6",{children:[m("fees_paid")," :"]}),s.jsxs("h6",{children:[m("rs"),". ",j]})]}),s.jsx(js,{paymentHeading:m("refund_payment_type_mode"),onInputChange:$,errorShow:n.fee_payment_mode}),s.jsx(ue,{labelText:m("refund_amount"),name:"amount",type:"tel",value:c.amount,onChange:k,placeholder:m("please_enter_refund_amount"),errorShow:n.fee_payment_amount}),s.jsx(Ns,{labelText:m("select_date_of_transaction"),placeholder:m("please_select_date"),name:"transaction_date",value:c.transaction_date,onDateFunction:N,customStyleContainer:{position:"relative",marginTop:"0.5rem"},datePickerPosition:{position:"relative",top:"-20rem"},customStyleLabel:{marginTop:"15px"},errorShow:n.transaction_date}),s.jsx("h6",{style:{marginTop:"0.5rem"},children:m("paid_to")}),s.jsx(ue,{labelText:m("bank_name_collect"),name:"fee_bank_name",type:"tel",value:c.fee_bank_name,onChange:$,placeholder:m("please_enter_bank_name"),customStyleLabel:{marginTop:"15px",marginBottom:"7px"}}),s.jsx(ue,{labelText:m("banke_holder_name"),name:"fee_bank_holder",type:"tel",value:c.fee_bank_holder,onChange:$,placeholder:m("please_enter_name_of_bank_holder"),customStyleLabel:{marginTop:"15px",marginBottom:"7px"}}),s.jsx(ue,{labelText:m("cheque_dd_neft"),name:"fee_utr_reference",type:"tel",value:c.fee_utr_reference,onChange:$,placeholder:m("please_enter_utr_ref_number"),customStyleLabel:{marginTop:"15px",marginBottom:"7px"}}),s.jsx("div",{className:h.confirm_btn,onClick:F,children:m("confirm")}),s.jsx(Qe,{msg:w.msg,run:w.run,setRun:()=>f({msg:"",run:!1}),postiton:"bottom",type:"error"})]}),E&&s.jsx(se,{})]})}const Ss=({applicationId:e,onAllotApplicantClasses:i,onClose:t})=>{var j;const{t:d}=z(),[m,c]=o.useState(!0),{admissionBatchList:_,admissionBatchListRefetch:n}=Zs({aid:e,skip:!e});o.useEffect(()=>{e&&(c(!0),n())},[e,n]);const g=x=>{i(x)};return o.useEffect(()=>{_!=null&&_.batch&&c(!1)},[_==null?void 0:_.batch]),s.jsx(me,{onClose:t,children:s.jsxs("div",{className:h.admission_modal,children:[s.jsx("h6",{className:h.admission_modal_heading,children:d("select_batch")}),s.jsx(p,{customStyle:{width:"100%",margin:"0.7rem 0"}}),(j=_==null?void 0:_.batch)==null?void 0:j.map(x=>s.jsxs("div",{className:h.admission_confirm_batch_card,onClick:()=>g(x==null?void 0:x._id),children:[s.jsx("img",{src:"/images/allot-class-icon.svg",alt:"Class Avatar"}),s.jsx("div",{className:h.admission_collect_docs,style:{marginTop:"0"},children:s.jsx("h6",{children:x==null?void 0:x.batchName})})]},x==null?void 0:x._id)),m&&s.jsx(ne,{})]})})},Cs=({onClose:e,currentApplicant:i,applicationId:t,onRefetchWhenAction:d,batchId:m,openAs:c})=>{var q,M,Q,H;const[_,n]=o.useState(!1),[g,j]=o.useState(!1),[x,w]=o.useState(""),{t:f}=z(),[E,C]=o.useState(1),[v,k]=o.useState(!0),[$,N]=de(),[T,F]=o.useState(""),[u,P]=o.useState([]),[l,b]=o.useState(!0),{getAllClassesList:r,getAllClassesListRefetch:S}=ps({data:{search:T,aid:t,bid:m,page:E,limit:10},skip:!t||!m}),[O]=et();o.useEffect(()=>{t&&(b(!0),S())},[t,S,E,T]),o.useEffect(()=>{N&&v&&C(U=>U+1)},[N,v]),o.useEffect(()=>{var U;T?(P(r==null?void 0:r.classes),b(!1)):r!=null&&r.classes?(P(D=>[...new Set([...D,...r==null?void 0:r.classes].map(JSON.stringify))].map(JSON.parse)),b(!1)):((U=r==null?void 0:r.classes)==null?void 0:U.length)===0&&b(!1),(r==null?void 0:r.classes.length)===10?k(!0):k(!1)},[r==null?void 0:r.classes]);const R=o.useCallback(Se.debounce(U=>F(U),500),[]),a=U=>{R(U.target.value)},A=()=>{var U;t&&(x!=null&&x._id)&&i&&(j(!0),O({allotClass:{dataList:c==="MULITSELECT"?i:[(U=i==null?void 0:i.student)==null?void 0:U._id]},aid:t,cid:x==null?void 0:x._id}).then(()=>{d(),e(),j(!1)}).catch({}))};return s.jsx(me,{onClose:e,children:s.jsxs("div",{className:h.admission_modal,children:[s.jsx("h6",{className:h.admission_modal_heading,children:f(_?"allot_to_class":"allot_class")}),s.jsx(p,{customStyle:{width:"100%",margin:"0.7rem 0"}}),_?"":s.jsx("div",{className:h.with_search,style:{marginBottom:"0.7rem"},children:s.jsx("div",{className:h.search_container_filter,style:{width:"100%"},children:s.jsx("section",{className:h.search_container,style:{width:"100%"},children:s.jsxs("div",{className:h.search_container_input,style:{width:"100%"},children:[s.jsx("img",{className:h.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),s.jsx("input",{type:"text",placeholder:"Search classes...",onChange:a})]})})})}),_?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:h.admission_class_confirm,children:[c==="MULITSELECT"?s.jsxs(s.Fragment,{children:[f("alloting")," ",s.jsx("span",{style:{fontWeight:"600"},children:i==null?void 0:i.length})," ",f("students")," "," "]}):s.jsxs(s.Fragment,{children:[f("lloting_student")," ",s.jsx("span",{style:{fontWeight:"600"},children:` ${(q=i==null?void 0:i.student)==null?void 0:q.studentFirstName} ${(M=i==null?void 0:i.student)!=null&&M.studentMiddleName?(Q=i==null?void 0:i.student)==null?void 0:Q.studentMiddleName:""} ${(H=i==null?void 0:i.student)==null?void 0:H.studentLastName} `})]}),",",f("to")," ",s.jsx("span",{style:{fontWeight:"600"},children:` ${x==null?void 0:x.className} - ${x==null?void 0:x.classTitle}`})]}),s.jsx("div",{className:h.confirm_btn,onClick:A,children:f("confirm")})]}):s.jsxs(s.Fragment,{children:[u==null?void 0:u.map((U,D)=>(u==null?void 0:u.length)===D+1?s.jsx("div",{ref:$,children:s.jsx(ss,{setViewClass:n,classData:U,setAllotC:w},D)}):s.jsx(ss,{setViewClass:n,classData:U,setAllotC:w},D)),l&&s.jsx(ne,{})]}),g&&s.jsx(se,{})]})})};function Ht({carryParentState:e,applicationId:i,applicationDetail:t,accessRole:d,accessTpye:m,instituteId:c,callApi:_,applicationDetailApplicablePending:n,pageOpenAs:g}){const{t:j}=z(),[x,w]=o.useState(!0),[f,E]=o.useState(1),[C,v]=o.useState(""),[k,$]=de(),[N,T]=o.useState([]),[F,u]=o.useState(!1),[P,l]=o.useState(!0),[b,r]=o.useState(""),[S,O]=o.useState(""),[R,a]=o.useState(""),{getAllConfirmList:A,getAllConfirmListRefetch:q}=fs({data:{id:i,page:f,limit:10,search:C||""},skip:!i}),{scrollToTop:M}=ae();o.useEffect(()=>{M()},[]),o.useEffect(()=>{$&&x&&E(V=>V+1)},[$,x]),o.useEffect(()=>{i&&(l(!0),q())},[f,i,q,C]),o.useEffect(()=>{var V,L;C?(T(A==null?void 0:A.confirm),l(!1)):F?(T(A==null?void 0:A.confirm),u(!1),l(!1)):A!=null&&A.confirm?(T(B=>[...new Set([...B,...A==null?void 0:A.confirm].map(JSON.stringify))].map(JSON.parse)),l(!1)):((V=A==null?void 0:A.confirm)==null?void 0:V.length)===0&&l(!1),((L=A==null?void 0:A.confirm)==null?void 0:L.length)===10?w(!0):w(!1)},[A==null?void 0:A.confirm]);const Q=()=>{E(1),q(),u(!0)},H=o.useCallback(Se.debounce(V=>v(V),500),[]),U=V=>{H(V.target.value)},D=V=>{O(V),r("CANCEL_APPLICANT")},W=V=>{O(V),r("ALLOT_BATCH")},y=V=>{a(V),r("ALLOT_CLASSES")};return s.jsxs(s.Fragment,{children:[s.jsx(ye,{applicationDetail:t,carryParentState:e,instituteId:c,tabStatusFlow:"Confirm_Query",applicationDetailApplicablePending:n,onRefetchConfirmTab:Q,pageOpenAs:g,s:!0,children:s.jsx("input",{type:"text",placeholder:"Search applicants...",onChange:U})}),s.jsx(we,{carryParentState:e,accessRole:d,accessTpye:m,pageOpenAs:g}),s.jsx("div",{className:h.end_btn,children:g==="INSTITUTE"?s.jsx(es,{carryParentState:e,activeTab:"?a=ongoing&n=mulitple",children:s.jsx("p",{className:h.mulitple_select_btn,children:j("multiple_select")})}):s.jsx(Pe,{carryParentState:e,accessRole:d,accessTpye:m,activeTab:"ongoing&n=mulitple",callApi:_,children:s.jsx("p",{className:h.mulitple_select_btn,children:j("multiple_select")})})}),N==null?void 0:N.map((V,L)=>(N==null?void 0:N.length)===L+1?s.jsx("div",{ref:k,children:s.jsx(ds,{applicant:V,onCancelAdmission:D,onAllotApplicantBatch:W,instituteId:c})},L):s.jsx(ds,{applicant:V,onCancelAdmission:D,onAllotApplicantBatch:W,instituteId:c},L)),P&&s.jsx(ne,{}),b==="CANCEL_APPLICANT"&&s.jsx(Gt,{onClose:()=>r(""),currentApplicant:S,onRefetchWhenAction:Q,applicationId:t==null?void 0:t._id}),b==="ALLOT_BATCH"&&s.jsx(Ss,{onClose:()=>r(""),applicationId:t==null?void 0:t._id,onAllotApplicantClasses:y}),b==="ALLOT_CLASSES"&&s.jsx(Cs,{onClose:()=>r(""),currentApplicant:S,onRefetchWhenAction:Q,applicationId:t==null?void 0:t._id,batchId:R})]})}const cs=({applicant:e})=>{var C,v,k,$,N,T,F,u,P,l,b,r,S,O,R,a,A,q,M,Q,H,U,D,W,y,V,L,B,I;const i=le(),t=ce(),[d,m]=o.useState(""),[c,_]=o.useState(!1),[n,g]=o.useState(""),{getFeeReceiptDetail:j,getFeeReceiptDetailRefetch:x}=Xe({rid:d,skip:!d});o.useEffect(()=>{d&&x()},[d,x]),o.useEffect(()=>{j!=null&&j.receipt&&(j!=null&&j.all_remain)&&g(j)},[j]),o.useEffect(()=>{if(n){const{institute:G,studentInfo:K,paymentReceiptInfo:Y}=Ze(n==null?void 0:n.all_remain,n==null?void 0:n.receipt),X=new Worker(new URL(pe,import.meta.url),{type:"module"});X.postMessage({institute:G,studentInfo:K,paymentReceiptInfo:Y,printReceiptType:(Y==null?void 0:Y.transactonRefund)==="Refunded"?"ADMISSION_REFUND":"ADMISSION"}),X.onmessage=oe=>{oe&&(window.open(oe.data,"_blank"),_(fe=>!fe),g(""),X.terminate())}}},[n]);const w=()=>{var G;t(`/q/${i.username}/student/profile`,{state:{sid:(G=e==null?void 0:e.student)==null?void 0:G._id,viewAs:"ADMISSION_ADMIN"}})},f=G=>{G.stopPropagation()},E=(G,K)=>{G.stopPropagation(),_(Y=>!Y),m(K),d===K&&g(j)};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:h.applicant_card_container,onClick:w,title:"View Profile",children:[s.jsxs("div",{className:h.applicant_card_inner,children:[s.jsx("img",{alt:"Student Request Avatar",src:((C=e==null?void 0:e.student)==null?void 0:C.photoId)!=="1"?`${he}/${(v=e==null?void 0:e.student)==null?void 0:v.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",loading:"lazy"}),s.jsxs("div",{className:h.applicant_card_inner_info,children:[s.jsx("h6",{children:`${(k=e==null?void 0:e.student)==null?void 0:k.studentFirstName} ${($=e==null?void 0:e.student)!=null&&$.studentMiddleName?(N=e==null?void 0:e.student)==null?void 0:N.studentMiddleName:""} ${(T=e==null?void 0:e.student)==null?void 0:T.studentLastName}`}),s.jsx("p",{children:(e==null?void 0:e.alloted_class)||""})]})]}),s.jsxs("div",{className:h.applicant_card_contact,children:[s.jsxs("div",{className:h.applicant_card_contact_inner,children:[s.jsx("img",{src:"/images/admidion_department/gender.svg",alt:""}),s.jsx("p",{children:(F=e==null?void 0:e.student)==null?void 0:F.studentGender})]}),(((u=e==null?void 0:e.student)==null?void 0:u.studentPhoneNumber)||((l=(P=e==null?void 0:e.student)==null?void 0:P.user)==null?void 0:l.userPhoneNumber)||((r=(b=e==null?void 0:e.student)==null?void 0:b.user)==null?void 0:r.userEmail)||((S=e==null?void 0:e.student)==null?void 0:S.studentParentsPhoneNumber))&&s.jsxs("div",{className:h.applicant_card_contact_inner,children:[s.jsx("img",{src:"/images/admidion_department/phone.svg",alt:""}),s.jsx("p",{style:{marginBottom:"0 !important"},children:(R=(O=e==null?void 0:e.student)==null?void 0:O.user)!=null&&R.userPhoneNumber?(A=(a=e==null?void 0:e.student)==null?void 0:a.user)==null?void 0:A.userPhoneNumber:(M=(q=e==null?void 0:e.student)==null?void 0:q.user)!=null&&M.userEmail?(H=(Q=e==null?void 0:e.student)==null?void 0:Q.user)==null?void 0:H.userEmail:(U=e==null?void 0:e.student)!=null&&U.studentPhoneNumber?(D=e==null?void 0:e.student)==null?void 0:D.studentPhoneNumber:(W=e==null?void 0:e.student)==null?void 0:W.studentParentsPhoneNumber})]})]}),s.jsx("div",{className:h.applicant_card_reciept,onClick:f,children:s.jsx("a",{href:`${Te}/${(L=(V=(y=e==null?void 0:e.student)==null?void 0:y.application_print)==null?void 0:V[0])==null?void 0:L.value}`,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:s.jsx("img",{src:"/images/member_tab/admission/admission-form-download.svg",alt:"receipt icon",title:"View Application Form"})})}),s.jsx("div",{className:h.applicant_card_reciept,children:(I=(B=e==null?void 0:e.student)==null?void 0:B.fee_receipt)==null?void 0:I.map((G,K)=>K>2?"":s.jsx("img",{src:"/images/member_tab/admission/admission-receipt-download.svg",onClick:Y=>E(Y,G),alt:"receipt icon",title:"Download Fees Receipt"},G))})]}),c&&s.jsx(se,{})]})},Qt=({carryParentState:e,applicationId:i,applicationDetail:t,viewAs:d,accessRole:m,accessTpye:c,instituteId:_,applicationDetailApplicablePending:n,pageOpenAs:g})=>{const[j,x]=o.useState(!0),[w,f]=o.useState(1),[E,C]=de(),[v,k]=o.useState([]),[$,N]=o.useState(!0),[T,F]=o.useState(""),{admissionAllottedList:u,admissionAllottedListRefetch:P}=st({data:{aid:i,page:w,limit:10,search:T||""},skip:!i}),{scrollToTop:l}=ae();o.useEffect(()=>{l()},[]),o.useEffect(()=>{C&&j&&f(S=>S+1)},[C,j]),o.useEffect(()=>{i&&(N(!0),P())},[w,i,P,T]),o.useEffect(()=>{var S,O;T?(k(u==null?void 0:u.allot),N(!1)):u!=null&&u.allot?(k(R=>[...new Set([...R,...u==null?void 0:u.allot].map(JSON.stringify))].map(JSON.parse)),N(!1)):((S=u==null?void 0:u.allot)==null?void 0:S.length)===0&&N(!1),((O=u==null?void 0:u.allot)==null?void 0:O.length)===10?x(!0):x(!1)},[u==null?void 0:u.allot]);const b=o.useCallback(Se.debounce(S=>F(S),500),[]),r=S=>{b(S.target.value)};return s.jsxs(s.Fragment,{children:[d==="COMPLETED_APPLICATION"?"":s.jsxs(s.Fragment,{children:[s.jsx(ye,{applicationDetail:t,carryParentState:e,instituteId:_,tabStatusFlow:"Allot_Query",applicationDetailApplicablePending:n,pageOpenAs:g,children:s.jsx("input",{type:"text",placeholder:"Search requests...",onChange:r})}),s.jsx(we,{carryParentState:e,accessRole:m,accessTpye:c,pageOpenAs:g})]}),v==null?void 0:v.map((S,O)=>(v==null?void 0:v.length)===O+1?s.jsx("div",{ref:E,children:s.jsx(cs,{applicant:S})},O):s.jsx(cs,{applicant:S},O)),$&&s.jsx(ne,{})]})},ms=({applicant:e})=>{var C,v,k,$,N,T,F,u,P,l,b,r,S,O,R,a,A,q,M,Q,H,U,D,W,y,V,L,B,I;const i=le(),t=ce(),[d,m]=o.useState(""),[c,_]=o.useState(!1),[n,g]=o.useState(""),{getFeeReceiptDetail:j,getFeeReceiptDetailRefetch:x}=Xe({rid:d,skip:!d});o.useEffect(()=>{d&&x()},[d,x]),o.useEffect(()=>{j!=null&&j.receipt&&(j!=null&&j.all_remain)&&g(j)},[j]),o.useEffect(()=>{if(n){const{institute:G,studentInfo:K,paymentReceiptInfo:Y}=Ze(n==null?void 0:n.all_remain,n==null?void 0:n.receipt),X=new Worker(new URL(pe,import.meta.url),{type:"module"});X.postMessage({institute:G,studentInfo:K,paymentReceiptInfo:Y,printReceiptType:(Y==null?void 0:Y.transactonRefund)==="Refunded"?"ADMISSION_REFUND":"ADMISSION"}),X.onmessage=oe=>{oe&&(window.open(oe.data,"_blank"),_(fe=>!fe),g(""),X.terminate())}}},[n]);const w=()=>{var G;t(`/q/${i.username}/student/profile`,{state:{sid:(G=e==null?void 0:e.student)==null?void 0:G._id,viewAs:"ADMISSION_ADMIN"}})},f=G=>{G.stopPropagation()},E=(G,K)=>{G.stopPropagation(),_(Y=>!Y),m(K),d===K&&g(j)};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:h.applicant_card_container,onClick:w,title:"View Profile",children:[s.jsxs("div",{className:h.applicant_card_inner,children:[s.jsx("img",{alt:"Student Request Avatar",src:((C=e==null?void 0:e.student)==null?void 0:C.photoId)!=="1"?`${he}/${(v=e==null?void 0:e.student)==null?void 0:v.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",loading:"lazy"}),s.jsxs("div",{className:h.applicant_card_inner_info,children:[s.jsx("h6",{children:`${(k=e==null?void 0:e.student)==null?void 0:k.studentFirstName} ${($=e==null?void 0:e.student)!=null&&$.studentMiddleName?(N=e==null?void 0:e.student)==null?void 0:N.studentMiddleName:""} ${(T=e==null?void 0:e.student)==null?void 0:T.studentLastName}`}),s.jsxs("p",{children:["Rs. ",e==null?void 0:e.refund_amount," ",(e==null?void 0:e.payment_status)==="Refund"&&"Refunded"]})]})]}),s.jsxs("div",{className:h.applicant_card_contact,children:[s.jsxs("div",{className:h.applicant_card_contact_inner,children:[s.jsx("img",{src:"/images/admidion_department/gender.svg",alt:""}),s.jsx("p",{children:(F=e==null?void 0:e.student)==null?void 0:F.studentGender})]}),(((u=e==null?void 0:e.student)==null?void 0:u.studentPhoneNumber)||((l=(P=e==null?void 0:e.student)==null?void 0:P.user)==null?void 0:l.userPhoneNumber)||((r=(b=e==null?void 0:e.student)==null?void 0:b.user)==null?void 0:r.userEmail)||((S=e==null?void 0:e.student)==null?void 0:S.studentParentsPhoneNumber))&&s.jsxs("div",{className:h.applicant_card_contact_inner,children:[s.jsx("img",{src:"/images/admidion_department/phone.svg",alt:""}),s.jsx("p",{style:{marginBottom:"0 !important"},children:(R=(O=e==null?void 0:e.student)==null?void 0:O.user)!=null&&R.userPhoneNumber?(A=(a=e==null?void 0:e.student)==null?void 0:a.user)==null?void 0:A.userPhoneNumber:(M=(q=e==null?void 0:e.student)==null?void 0:q.user)!=null&&M.userEmail?(H=(Q=e==null?void 0:e.student)==null?void 0:Q.user)==null?void 0:H.userEmail:(U=e==null?void 0:e.student)!=null&&U.studentPhoneNumber?(D=e==null?void 0:e.student)==null?void 0:D.studentPhoneNumber:(W=e==null?void 0:e.student)==null?void 0:W.studentParentsPhoneNumber})]})]}),s.jsx("div",{className:h.applicant_card_reciept,onClick:f,children:s.jsx("a",{href:`${Te}/${(L=(V=(y=e==null?void 0:e.student)==null?void 0:y.application_print)==null?void 0:V[0])==null?void 0:L.value}`,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:s.jsx("img",{src:"/images/member_tab/admission/admission-form-download.svg",alt:"receipt icon",title:"View Application Form"})})}),s.jsx("div",{className:h.applicant_card_reciept,children:(I=(B=e==null?void 0:e.student)==null?void 0:B.fee_receipt)==null?void 0:I.map((G,K)=>K>2?"":s.jsx("img",{src:"/images/member_tab/admission/admission-receipt-download.svg",onClick:Y=>E(Y,G),alt:"receipt icon",title:"Download Fees Receipt"},G))})]}),c&&s.jsx(se,{})]})},zt=({carryParentState:e,applicationId:i,applicationDetail:t,viewAs:d,accessRole:m,accessTpye:c,instituteId:_,applicationDetailApplicablePending:n,pageOpenAs:g})=>{const[j,x]=o.useState(!0),[w,f]=o.useState(1),[E,C]=de(),[v,k]=o.useState([]),[$,N]=o.useState(""),[T,F]=o.useState(!0),{admissionCancelledList:u,admissionCancelledListRefetch:P}=tt({data:{aid:i,page:w,limit:10,search:$||""},skip:!i}),{scrollToTop:l}=ae();o.useEffect(()=>{l()},[]),o.useEffect(()=>{C&&j&&f(S=>S+1)},[C,j]),o.useEffect(()=>{i&&(F(!0),P())},[w,i,P]),o.useEffect(()=>{var S,O;$?(k(u==null?void 0:u.cancel),F(!1)):u!=null&&u.cancel?(k(R=>[...new Set([...R,...u==null?void 0:u.cancel].map(JSON.stringify))].map(JSON.parse)),F(!1)):((S=u==null?void 0:u.cancel)==null?void 0:S.length)===0&&F(!1),((O=u==null?void 0:u.cancel)==null?void 0:O.length)===10?x(!0):x(!1)},[u==null?void 0:u.cancel]);const b=o.useCallback(Se.debounce(S=>N(S),500),[]),r=S=>{b(S.target.value)};return s.jsxs(s.Fragment,{children:[d==="COMPLETED_APPLICATION"?"":s.jsxs(s.Fragment,{children:[s.jsx(ye,{applicationDetail:t,carryParentState:e,instituteId:_,applicationDetailApplicablePending:n,pageOpenAs:g,children:s.jsx("input",{type:"text",placeholder:"Search requests...",onChange:r})}),s.jsx(we,{carryParentState:e,accessRole:m,accessTpye:c,pageOpenAs:g})]}),v==null?void 0:v.map((S,O)=>(v==null?void 0:v.length)===O+1?s.jsx("div",{ref:E,children:s.jsx(ms,{applicant:S})},O):s.jsx(ms,{applicant:S},O)),T&&s.jsx(ne,{})]})},Xt=({applicant:e,selectedApplicant:i,onSelectOne:t})=>{var n,g,j,x,w,f,E,C,v,k,$,N,T,F,u,P,l,b,r,S,O,R,a,A,q;const d=le(),m=ce(),c=()=>{var M;m(`/q/${d.username}/student/profile`,{state:{sid:(M=e==null?void 0:e.student)==null?void 0:M._id,viewAs:"ADMISSION_ADMIN"}})},_=M=>{var Q;M.stopPropagation(),t((Q=e==null?void 0:e.student)==null?void 0:Q._id)};return s.jsxs("div",{className:h.applicant_card_container,onClick:c,title:"View Profile",children:[s.jsxs("div",{className:h.applicant_card_inner,children:[s.jsx("img",{alt:"Student Request Avatar",src:((n=e==null?void 0:e.student)==null?void 0:n.photoId)!=="1"?`${he}/${(g=e==null?void 0:e.student)==null?void 0:g.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",loading:"lazy"}),s.jsxs("div",{className:h.applicant_card_inner_info,children:[s.jsx("h6",{children:`${(j=e==null?void 0:e.student)==null?void 0:j.studentFirstName} ${(x=e==null?void 0:e.student)!=null&&x.studentMiddleName?(w=e==null?void 0:e.student)==null?void 0:w.studentMiddleName:""} ${(f=e==null?void 0:e.student)==null?void 0:f.studentLastName}`}),s.jsx("p",{children:e==null?void 0:e.install_type})]})]}),s.jsxs("div",{className:h.applicant_card_contact,children:[s.jsxs("div",{className:h.applicant_card_contact_inner,children:[s.jsx("img",{src:"/images/admidion_department/gender.svg",alt:""}),s.jsx("p",{children:(E=e==null?void 0:e.student)==null?void 0:E.studentGender})]}),(((C=e==null?void 0:e.student)==null?void 0:C.studentPhoneNumber)||((k=(v=e==null?void 0:e.student)==null?void 0:v.user)==null?void 0:k.userPhoneNumber)||((N=($=e==null?void 0:e.student)==null?void 0:$.user)==null?void 0:N.userEmail)||((T=e==null?void 0:e.student)==null?void 0:T.studentParentsPhoneNumber))&&s.jsxs("div",{className:h.applicant_card_contact_inner,children:[s.jsx("img",{src:"/images/admidion_department/phone.svg",alt:""}),s.jsx("p",{style:{marginBottom:"0 !important"},children:(u=(F=e==null?void 0:e.student)==null?void 0:F.user)!=null&&u.userPhoneNumber?(l=(P=e==null?void 0:e.student)==null?void 0:P.user)==null?void 0:l.userPhoneNumber:(r=(b=e==null?void 0:e.student)==null?void 0:b.user)!=null&&r.userEmail?(O=(S=e==null?void 0:e.student)==null?void 0:S.user)==null?void 0:O.userEmail:(R=e==null?void 0:e.student)!=null&&R.studentPhoneNumber?(a=e==null?void 0:e.student)==null?void 0:a.studentPhoneNumber:(A=e==null?void 0:e.student)==null?void 0:A.studentParentsPhoneNumber})]})]}),s.jsx("div",{className:h.selectBtnContainer,children:s.jsx("img",{id:"check",className:h.checkbox,src:i!=null&&i.includes((q=e==null?void 0:e.student)==null?void 0:q._id)?"/images/checkbox-icon.svg":"/images/box-icon.svg",alt:"select icon",onClick:_})})]})},Yt=({carryParentState:e,applicationId:i,applicationDetail:t,accessRole:d,accessTpye:m,instituteId:c,applicationDetailApplicablePending:_,pageOpenAs:n})=>{const{t:g}=z(),[j,x]=o.useState([]),[w,f]=o.useState(!0),[E,C]=o.useState([]),[v,k]=o.useState(0),[$,N]=o.useState(""),[T,F]=o.useState(!1),[u,P]=o.useState(""),[l,b]=o.useState(""),{getAllConfirmListMulitselect:r,getAllConfirmListMulitselectRefetch:S}=nt({data:{id:i,search:u},skip:!i}),{scrollToTop:O}=ae();o.useEffect(()=>{O()},[]),o.useEffect(()=>{i&&(f(!0),S())},[i,S,u]),o.useEffect(()=>{var U,D;u||(U=r==null?void 0:r.confirm)!=null&&U.length?(C(r==null?void 0:r.confirm),f(!1)):((D=r==null?void 0:r.confirm)==null?void 0:D.length)===0&&f(!1)},[r==null?void 0:r.confirm]);const R=U=>{j!=null&&j.includes(U)?(x(D=>D==null?void 0:D.filter(W=>W!==U)),k(D=>--D)):(x(D=>[...D,U]),k(D=>++D)),F(!1)},a=()=>{var D;let U=[];for(let W of r==null?void 0:r.confirm)U.push((D=W==null?void 0:W.student)==null?void 0:D._id);x(U),k(U==null?void 0:U.length),F(!0)},A=()=>{x([]),F(!1),k(0)},q=()=>{j!=null&&j.length&&b("ALLOT_BATCH")},M=U=>{N(U),b("ALLOT_CLASSES")},Q=o.useCallback(Se.debounce(U=>P(U),500),[]),H=U=>{Q(U.target.value)};return s.jsxs(s.Fragment,{children:[s.jsx(ye,{applicationDetail:t,carryParentState:e,instituteId:c,applicationDetailApplicablePending:_,pageOpenAs:n,children:s.jsx("input",{type:"text",placeholder:"Search applicants...",onChange:H})}),s.jsx(we,{carryParentState:e,accessRole:d,accessTpye:m,pageOpenAs:n}),s.jsxs("div",{className:h.admission_mulit_select,children:[s.jsxs("p",{children:[v||""," ",g("selected_")]}),s.jsxs("div",{className:h.admission_mulit_select_right,children:[T?s.jsx("p",{onClick:A,style:{cursor:"pointer"},children:g("remove_all")}):s.jsx("p",{onClick:a,style:{cursor:"pointer"},children:g("select_all")}),s.jsx("div",{className:h.selectBtnContainer,style:{width:"auto"},children:s.jsx("div",{className:h.selectBtn,onClick:q,children:g("allot_class")})})]})]}),E==null?void 0:E.map(U=>{var D;return s.jsx(Xt,{applicant:U,onSelectOne:R,selectedApplicant:j},(D=U==null?void 0:U.student)==null?void 0:D._id)}),w&&s.jsx(ne,{}),l==="ALLOT_BATCH"&&s.jsx(Ss,{onClose:()=>b(""),applicationId:t==null?void 0:t._id,onAllotApplicantClasses:M}),l==="ALLOT_CLASSES"&&s.jsx(Cs,{onClose:()=>b(""),currentApplicant:j,onRefetchWhenAction:S,applicationId:t==null?void 0:t._id,batchId:$,openAs:"MULITSELECT"})]})},Kt=({instituteId:e,carryParentState:i,accessRole:t,accessTpye:d,callApi:m,pageOpenAs:c})=>{var x,w,f,E,C,v,k,$,N,T,F,u,P,l,b;const _=ve(),{oneApplicationDetail:n,oneApplicationDetailRefetch:g}=ot({apid:(x=_.state)==null?void 0:x.applicationId,skip:!((w=_.state)!=null&&w.applicationId)}),{scrollToTop:j}=ae();return o.useEffect(()=>{j()},[]),o.useEffect(()=>{var r;(r=_.state)!=null&&r.applicationId&&g()},[(f=_.state)==null?void 0:f.applicationId,g]),s.jsxs(s.Fragment,{children:[((E=_.search)==null?void 0:E.substring(13))==="application"&&s.jsx(Vt,{applicationId:(C=_.state)==null?void 0:C.applicationId,carryParentState:i,applicationDetail:n==null?void 0:n.oneApply,accessRole:t,accessTpye:d,instituteId:e,applicationDetailApplicablePending:n==null?void 0:n.applicable_pending,pageOpenAs:c}),((v=_.search)==null?void 0:v.substring(13))==="select"&&s.jsx(It,{applicationId:(k=_.state)==null?void 0:k.applicationId,carryParentState:i,applicationDetail:n==null?void 0:n.oneApply,accessRole:t,accessTpye:d,instituteId:e,applicationDetailApplicablePending:n==null?void 0:n.applicable_pending,pageOpenAs:c}),(($=_.search)==null?void 0:$.substring(13))==="confirm"&&s.jsx(Ht,{applicationId:(N=_.state)==null?void 0:N.applicationId,carryParentState:i,applicationDetail:n==null?void 0:n.oneApply,accessRole:t,accessTpye:d,instituteId:e,callApi:m,applicationDetailApplicablePending:n==null?void 0:n.applicable_pending,pageOpenAs:c}),((T=_.search)==null?void 0:T.substring(13))==="mulitple"&&s.jsx(Yt,{applicationId:(F=_.state)==null?void 0:F.applicationId,carryParentState:i,applicationDetail:n==null?void 0:n.oneApply,accessRole:t,accessTpye:d,instituteId:e,applicationDetailApplicablePending:n==null?void 0:n.applicable_pending,pageOpenAs:c}),((u=_.search)==null?void 0:u.substring(13))==="allot"&&s.jsx(Qt,{applicationId:(P=_.state)==null?void 0:P.applicationId,carryParentState:i,applicationDetail:n==null?void 0:n.oneApply,accessRole:t,accessTpye:d,instituteId:e,applicationDetailApplicablePending:n==null?void 0:n.applicable_pending,pageOpenAs:c}),((l=_.search)==null?void 0:l.substring(13))==="cancel"&&s.jsx(zt,{applicationId:(b=_.state)==null?void 0:b.applicationId,carryParentState:i,applicationDetail:n==null?void 0:n.oneApply,accessRole:t,accessTpye:d,instituteId:e,applicationDetailApplicablePending:n==null?void 0:n.applicable_pending,pageOpenAs:c})]})},In=({admissionId:e,instituteId:i,carryParentState:t,accessRole:d,accessApplication:m,accessTpye:c,callApi:_,pageOpenAs:n})=>{var E,C,v;const{t:g}=z(),j=ce(),x=le(),w=ve(),f=()=>{n==="INSTITUTE"?j(`/q/${x.username}/admission`,{state:{...t}}):j(`/q/${x.username}/member/admission`,{state:{...t}})};return s.jsxs("div",{className:h.admission_application_container,children:[((E=w.search)==null?void 0:E.substring(3))==="ongoing"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:h.with_search,style:{justifyContent:"flex-start",gap:"1rem"},children:[s.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:f,alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),s.jsx("h6",{children:g("ongoing_application")})]}),s.jsx(p,{customStyle:{width:"100%",marginTop:"0.5rem",marginBottom:"0.5rem"}})]}),((C=w.search)==null?void 0:C.substring(3))==="ongoing"&&s.jsx(Lt,{admissionId:e,carryParentState:t,accessRole:d,accessTpye:c,accessApplication:m,callApi:_,pageOpenAs:n}),((v=w==null?void 0:w.search)==null?void 0:v.substring(3,13))==="ongoing&n="&&s.jsx(Kt,{instituteId:i,admissionId:e,carryParentState:t,accessRole:d,accessTpye:c,callApi:_,pageOpenAs:n})]})};function _s({completed:e,carryParentState:i,accessRole:t,accessTpye:d,callApi:m,pageOpenAs:c,setOpenApplicationMenu:_}){var j,x;const{t:n}=z(),g=w=>{w.preventDefault(),_(e==null?void 0:e._id)};return s.jsx(s.Fragment,{children:c==="INSTITUTE"?s.jsx(es,{carryParentState:{...i,applicationId:e==null?void 0:e._id},activeTab:"?a=ongoing&n=application",children:s.jsxs("div",{className:h.ongoing_card,style:{display:"flex",flexDirection:"column",alignItems:"center",marginRight:"1rem"},children:[s.jsxs("div",{className:h.ongoing_card_inner,children:[s.jsx("img",{alt:"Ongoing App",src:"/images/admision-application-icon.svg"}),s.jsxs("div",{className:h.ongoing_card_text,children:[s.jsx("h6",{children:e==null?void 0:e.applicationName}),s.jsx("p",{children:(j=e==null?void 0:e.applicationDepartment)==null?void 0:j.dName})]})]}),s.jsxs("div",{className:h.ongoing_card_text,children:[s.jsx("h6",{children:e==null?void 0:e.allotCount}),s.jsx("p",{children:n("alloted")})]}),s.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:g,className:h.menu_icon,title:"Menu"})]})}):s.jsx(Pe,{carryParentState:{...i,applicationId:e==null?void 0:e._id},activeTab:"ongoing&n=application",accessRole:t,accessTpye:d,callApi:m,children:s.jsxs("div",{className:h.ongoing_card,children:[s.jsxs("div",{className:h.ongoing_card_inner,children:[s.jsx("img",{alt:"Ongoing App",src:"/images/admision-application-icon.svg"}),s.jsxs("div",{className:h.ongoing_card_text,children:[s.jsx("h6",{children:e==null?void 0:e.applicationName}),s.jsx("p",{children:(x=e==null?void 0:e.applicationDepartment)==null?void 0:x.dName})]})]}),s.jsxs("div",{className:h.ongoing_card_text,style:{display:"flex",flexDirection:"column",alignItems:"center",marginRight:"1rem"},children:[s.jsx("h6",{children:e==null?void 0:e.allotCount}),s.jsx("p",{children:n("alloted")})]}),s.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:g,className:h.menu_icon,title:"Menu"})]})})})}const Zt=({onClose:e,onRefetch:i,openApplicationMenu:t})=>{const[d,m]=o.useState(!1),[c]=it(),_=()=>{t&&(m(n=>!n),c({aid:t}).then(()=>{i(),m(n=>!n),e()}).catch({}))};return s.jsxs(s.Fragment,{children:[s.jsx(Ke,{onClose:e}),s.jsxs(Ye,{customStyle:{zIndex:"1200"},children:[s.jsx("div",{className:Ce.edit_modal_container,style:{width:"200px"},children:s.jsx("h6",{className:Ce.edit,onClick:_,children:"Mark as Ongoing"})}),d&&s.jsx(se,{})]})]})},Gn=({admissionId:e,carryParentState:i,accessRole:t,accessApplication:d,accessTpye:m,callApi:c,pageOpenAs:_})=>{const{t:n}=z(),g=ce(),j=Ee(a=>a.admissionChange),[x,w]=o.useState(!0),[f,E]=o.useState(1),[C,v]=de(),[k,$]=o.useState([]),[N,T]=o.useState(!0),{scrollToTop:F}=ae(),[u,P]=o.useState(""),[l,b]=o.useState(!1),{allCompletedApp:r,allCompletedAppRefetch:S}=rt({data:{aid:e||(j==null?void 0:j.aid),page:f,limit:10},skip:e?!e:!(j!=null&&j.aid)});o.useEffect(()=>{F()},[]),o.useEffect(()=>{v&&x&&E(a=>a+1)},[v,x]),o.useEffect(()=>{(j!=null&&j.aid||e)&&(T(!0),S())},[j==null?void 0:j.aid,e,f,S]),o.useEffect(()=>{var a,A;l?($(r==null?void 0:r.completed),T(!1),b(!1)):r!=null&&r.completed?($(q=>[...new Set([...q,...r==null?void 0:r.completed].map(JSON.stringify))].map(JSON.parse)),T(!1)):((a=r==null?void 0:r.completed)==null?void 0:a.length)===0&&T(!1),((A=r==null?void 0:r.completed)==null?void 0:A.length)===10?w(!0):w(!1)},[r==null?void 0:r.completed]);const O=()=>{g(-1)},R=()=>{E(1),b(!0),T(!0),S()};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:h.admission_application_container,children:[s.jsxs("div",{className:h.with_search,style:{justifyContent:"flex-start",gap:"1rem"},children:[s.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:O,alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),s.jsx("h6",{children:n("completed_application")})]}),s.jsx(p,{customStyle:{width:"100%",marginTop:"0.5rem",marginBottom:"0.5rem"}}),s.jsx("div",{className:h.remainingFeesBottom,children:s.jsxs("div",{className:h.itemsContainer,children:[k==null?void 0:k.map((a,A)=>(k==null?void 0:k.length)===A+1?s.jsx("div",{ref:C,children:s.jsx(_s,{completed:a,carryParentState:i,accessRole:t,accessTpye:m,callApi:c,accessApplication:d,pageOpenAs:_,setOpenApplicationMenu:P})},a==null?void 0:a._id):s.jsx(_s,{completed:a,carryParentState:i,accessRole:t,accessTpye:m,callApi:c,accessApplication:d,pageOpenAs:_,setOpenApplicationMenu:P},a==null?void 0:a._id)),N&&s.jsx(ne,{status:"white"})]})})]}),u&&s.jsx(Zt,{openApplicationMenu:u,onClose:()=>P(""),onRefetch:R})]})},pt=({onClose:e,onRefetch:i,aid:t,instituteId:d})=>{var y,V;const{t:m}=z(),[c,_]=o.useState(!1),[n]=dt(),[g,j]=o.useState(""),[x,w]=o.useState([]),[f,E]=o.useState([]),[C,v]=o.useState({alarm_mode:"APP_NOTIFICATION",content:""}),[k,$]=o.useState({depart:"",batch:"",master:[],batch_status:"",all_depart:""}),[N,T]=o.useState([]),[F,u]=o.useState(!1),[P]=ct(),{allDepartmentList:l,allDepartmentListRefetch:b}=as({aid:t,skip:!t}),{allClassMaster:r,allClassMasterRefetch:S}=us({data:{id:d,did:k.depart},skip:k.all_depart!=="All"?!k.depart:!0}),{oneDepartment:O,oneDepartmentRefetch:R}=ls({did:k.depart,skip:k.all_depart!=="All"?!k.depart:!0});o.useEffect(()=>{t&&b()},[t,b]),o.useEffect(()=>{k.depart&&k.all_depart!=="All"&&S()},[k.depart,S]),o.useEffect(()=>{k.depart&&k.all_depart!=="All"&&R()},[k.depart,R]);const a=()=>{t&&C.alarm_mode&&(N==null?void 0:N.length)>0&&(_(L=>!L),n({aid:t,alarm_mode:C.alarm_mode,content:C.content,reminderData:{...k,all_arr:N}}).then(()=>{i(),_(L=>!L),e()}).catch({}))},A=L=>{$(L==="All"?B=>({...B,depart:"",all_depart:"ALL"}):B=>({...B,depart:L,all_depart:"PARTICULAR"}))},q=L=>{$(L==="All"?B=>({...B,batch:"",batch_status:"ALL_BATCH"}):B=>({...B,batch:L,batch_status:"PARTICULAR_BATCH"}))},M=L=>{$(B=>({...B,master:[L]}))},Q=()=>{t&&(_(L=>!L),P({aid:t,pendingData:k}).then(L=>{var B,I;w((B=L==null?void 0:L.data)==null?void 0:B.all_student),E((I=L==null?void 0:L.data)==null?void 0:I.all_student),_(G=>!G),j("LIST")}).catch({}))},H=L=>{N!=null&&N.includes(L)?T(B=>B==null?void 0:B.filter(I=>I!==L)):T(B=>[...B,L])},U=()=>{T([]),u(!1)},D=()=>{let L=[];for(let B of x)L.push(B==null?void 0:B._id);T(L),u(!0)},W=L=>{if(L.target.value){let B=en(f,L.target.value);w(()=>B)}else w(()=>f)};return s.jsxs(me,{onClose:e,children:[s.jsx("div",{className:ge.add_category_modal,style:{width:"30rem",minHeight:"10rem",maxHeight:"35rem",overflowX:"hidden",overflowY:"auto",scrollBehavior:"smooth"},children:g==="SEND"?s.jsxs("section",{className:ge.fee_middle_section_container,style:{marginBottom:"1.2rem"},children:[s.jsx("h6",{style:{fontSize:"20px",fontWeight:"600"},children:m("Notify_about_Outstanding_Dues")}),s.jsx(p,{customStyle:{width:"100%",marginTop:"0.7rem",marginBottom:"1rem"}}),s.jsxs("section",{className:ge.notify_container,onClick:()=>v(L=>({...L,alarm_mode:"APP_NOTIFICATION"})),children:[s.jsx("img",{src:C.alarm_mode==="APP_NOTIFICATION"?"/images/department/radio-blue-icon.svg":"/images/department/radio-gray-icon.svg",alt:"icon"}),s.jsxs("div",{className:ge.notify_text,children:[s.jsx("h6",{children:m("Notify_with_In_app_Notification")}),s.jsx("p",{children:m("Notify_with_In_app_Notification_note")})]})]}),s.jsxs("section",{className:ge.notify_container,onClick:()=>v(L=>({...L,alarm_mode:"EMAIL_NOTIFICATION"})),children:[s.jsx("img",{src:C.alarm_mode==="EMAIL_NOTIFICATION"?"/images/department/radio-blue-icon.svg":"/images/department/radio-gray-icon.svg",alt:"icon"}),s.jsxs("div",{className:ge.notify_text,children:[s.jsx("h6",{children:m("Notify_On_Email_and_SMS")}),s.jsx("p",{children:m("Notify_On_Email_and_SMS_note")})]})]}),C.alarm_mode==="EMAIL_NOTIFICATION"&&s.jsx(He,{labelText:m("email_content"),placeholder:m("email_content_placeholder"),name:"content",value:C.content,type:"text",onChange:L=>v(B=>({...B,content:L.target.value}))}),s.jsx("button",{onClick:a,className:ge.fee_middle_confirm_button,style:{marginTop:"4rem"},children:m("confirm")})]}):g==="LIST"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:$e.select_header,children:[s.jsxs("h6",{children:[(N==null?void 0:N.length)>0?`${N==null?void 0:N.length} `:"",m("select_student")]}),s.jsxs("div",{children:[F?s.jsx("button",{className:$e.select_all_btn,title:"Remove All Student",onClick:U,style:{marginRight:"0.7rem"},children:m("remove_all")}):s.jsx("button",{className:$e.select_all_btn,title:"Select All Student",onClick:D,style:{marginRight:"0.7rem"},children:m("select_all")}),s.jsx("button",{className:$e.promote_all_btn,onClick:()=>(N==null?void 0:N.length)>0?j("SEND"):null,children:m("next")})]})]}),s.jsx(p,{customStyle:{width:"100%",marginTop:"0.5rem"}}),s.jsx("section",{className:ge.search_container,children:s.jsxs("div",{className:ge.search_container_text,children:[s.jsx("img",{className:ge.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),s.jsx("input",{type:"text",placeholder:m("search-label"),onChange:W})]})}),(x==null?void 0:x.length)<1&&s.jsx(yt,{customStyleContainer:{marginTop:"9rem"},title:"No student found."}),x==null?void 0:x.map((L,B)=>s.jsx(vt,{stu:L,selectedId:N,onSelectStudent:H},B))]}):s.jsxs("section",{className:ge.fee_middle_section_container,style:{marginBottom:"1.2rem"},children:[s.jsx("h6",{style:{fontSize:"20px",fontWeight:"600"},children:m("apply_filter")}),s.jsx(p,{customStyle:{width:"100%",marginTop:"0.7rem",marginBottom:"1rem"}}),s.jsx(be,{selectLabel:m("select_department"),selectedValue:m("all_select_particular_department"),options:l!=null&&l.allDB?["All",...l==null?void 0:l.allDB]:["All"],onClick:A}),s.jsx(be,{selectLabel:m("select_batch_optional"),selectedValue:m("select_pref"),options:k.all_depart==="ALL"?["All"]:(y=O==null?void 0:O.department)!=null&&y.batches?[...(V=O==null?void 0:O.department)==null?void 0:V.batches]:[],onClick:q}),k.all_depart==="ALL"?"":s.jsx(be,{selectLabel:m("select_standard_year"),selectedValue:m("select_standard_year_placeholder"),options:r!=null&&r.classMaster?[...r==null?void 0:r.classMaster]:[],onClick:M}),s.jsx("button",{onClick:Q,className:ge.fee_middle_confirm_button,style:{marginTop:"4rem"},children:m("next")})]})}),c&&s.jsx(se,{})]})},en=(e=[],i)=>e.filter(t=>{var m,c,_;let d=(t==null?void 0:t.studentFirstName)??" "+(t==null?void 0:t.studentMiddleName)??" "+(t==null?void 0:t.studentLastName)??"";return(m=d==null?void 0:d.toLowerCase())!=null&&m.includes(i==null?void 0:i.toLowerCase())||(_=(c=t==null?void 0:t.studentGRNO)==null?void 0:c.toLowerCase())!=null&&_.includes(i==null?void 0:i.toLowerCase())?t:null}),Es=({aid:e,instituteId:i,isEnable:t,onRefetch:d,setApplyFilter:m,applyFilter:c,isApplicable:_,pageOpenAs:n,admissionId:g,children:j})=>{const{t:x}=z(),[w,f]=o.useState(!1),[E,C]=o.useState(!1),v=le(),k=ce(),$=ve(),[N,T]=o.useState(!1),[F]=hs(),[u]=mt(),P=()=>{k(-1)},l=b=>{var r;if((r=b.target.files)!=null&&r.length&&g){T(!0);const S=new FormData;S.append("file",b.target.files[0]),F({fileUpload:S}).then(O=>{var R,a;(R=O.data)!=null&&R.imageKey?u({aid:g,excelFile:{excel_file:(a=O.data)==null?void 0:a.imageKey}}).then(()=>{T(!1)}).catch({}):T(!1)}).catch({})}};return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:h.moderator_container_title,children:[s.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:P,alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),s.jsxs("div",{className:h.with_search,children:[s.jsx("h6",{children:x("admission_remaining_fees")}),s.jsxs("div",{className:h.search_container_filter,children:[s.jsx("section",{className:h.search_container,children:s.jsxs("div",{className:h.search_container_input,children:[s.jsx("img",{className:h.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),j]})}),s.jsxs("div",{className:h.os_filter_container,children:[_?"":s.jsx("img",{src:"/images/filter-blue-icon.svg",alt:"filter icon",onClick:()=>C(!0)}),n==="INSTITUTE"?s.jsx("label",{htmlFor:"uploadExcel",children:s.jsx("img",{src:"/images/member_tab/subject/subject-excel-icon.svg",alt:"excel icon",style:{cursor:"pointer",height:"1.5rem"}})}):null,s.jsx("button",{className:h.os_reminder,onClick:()=>f(!0),disabled:!t,style:{opacity:t?"1":"0.5"},children:x("outstanding_reminder")}),s.jsx(re,{to:n==="INSTITUTE"?`/q/${v.username}/admission?a=reminder-message`:`/q/${v.username}/member/admission?a=reminder-message`,state:{...$.state,instituteId:i},children:s.jsx("img",{src:"/images/member_tab/finance/finance-message-log-icon.svg",alt:"receipt icon",title:"View message history",style:{height:"2rem",cursor:"pointer"}})})]})]})]})]}),s.jsx(p,{customStyle:{width:"100%",marginTop:"0.5rem"}}),w&&s.jsx(pt,{onClose:()=>f(!1),aid:e,onRefetch:d}),E&&s.jsx(wt,{onClose:()=>C(!1),instituteId:i,setApplyFilter:m,applyFilter:c}),s.jsx("input",{type:"file",id:"uploadExcel",accept:".xlsx",onChange:l,style:{display:"none"}}),N&&s.jsx(se,{})]})},vs=({carryParentState:e,pageOpenAs:i})=>{var _;const{t}=z(),d=ve(),m=[{name:t("os_fees"),id:0,url:"member/admission?a=pending"},{name:t("applicable_os"),id:1,url:"member/admission?a=pending&applicable"}],c=[{name:t("os_fees"),id:0,url:"admission?a=pending"},{name:t("applicable_os"),id:1,url:"admission?a=pending&applicable"}];return s.jsxs(s.Fragment,{children:[s.jsx(gs,{tabList:i==="INSTITUTE"?c:m,activeIndexTab:((_=d.search)==null?void 0:_.substring(3))==="pending"?0:1,showAs:!0,customStyleTab:{width:"100%"},customStyleLink:{width:"50%"},carryParentState:e}),s.jsx(p,{customStyle:{width:"100%",marginBottom:"0.5rem"}})]})},Re=({remainData:e,is_applicable:i})=>{var _;const{t}=z(),d=le(),m=ce(),c=()=>{m(`/q/${d.username}/student/profile/admission`,{state:{sid:e==null?void 0:e._id,viewAs:"ADMISSION_ADMIN"}})};return s.jsxs("div",{className:ke.item,onClick:c,title:"View Profile",children:[s.jsxs("div",{className:ke.subItem,children:[s.jsx("img",{alt:"Student Avatar",src:e!=null&&e.studentProfilePhoto?`${he}/${e==null?void 0:e.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",loading:"lazy"}),s.jsxs("div",{className:ke.text,children:[s.jsx("h6",{children:`${e.studentFirstName} ${e.studentMiddleName?e.studentMiddleName:""} ${e.studentLastName}`}),s.jsxs("p",{children:[t("gr_number"),(e==null?void 0:e.studentGRNO)??""," ",", ",((_=e==null?void 0:e.department)==null?void 0:_.dName)??""]})]})]}),s.jsxs("div",{className:ke.text,children:[i?s.jsxs("h6",{children:["Rs. ",e==null?void 0:e.applicable_fees_pending]}):s.jsxs("h6",{children:["Rs. ",e==null?void 0:e.admissionRemainFeeCount]}),s.jsx("p",{children:t("pending_fees")})]})]})},sn=({isEnable:e,instituteId:i,onRefetch:t,carryParentState:d,pageOpenAs:m,admissionId:c})=>{const{t:_}=z(),n=Ee(r=>r.admissionChange),[g,j]=o.useState(!0),[x,w]=o.useState(""),[f,E]=o.useState(1),[C,v]=de(),[k,$]=o.useState([]),[N,T]=o.useState(!0),{scrollToTop:F}=ae(),{allRemainingList:u,allRemainingListRefetch:P}=_t({data:{aid:n!=null&&n.aid?n==null?void 0:n.aid:c,page:f,limit:10,search:x,flow:"Applicable_Fees_Query"},skip:n!=null&&n.aid?!(n!=null&&n.aid):!c});o.useEffect(()=>{v&&g&&E(r=>r+1)},[v,g]),o.useEffect(()=>{(n!=null&&n.aid||c)&&(T(!0),P())},[f,n==null?void 0:n.aid,c,x,P]),o.useEffect(()=>{var r,S;x?($(u==null?void 0:u.remain),T(!1)):u!=null&&u.remain?($(f===1?u==null?void 0:u.remain:O=>[...new Set([...O,...u==null?void 0:u.remain].map(JSON.stringify))].map(JSON.parse)),T(!1)):((r=u==null?void 0:u.remain)==null?void 0:r.length)===0&&T(!1),((S=u==null?void 0:u.remain)==null?void 0:S.length)===10?j(!0):j(!1)},[u==null?void 0:u.remain]);const l=o.useCallback(Se.debounce(r=>w(r),500),[]),b=r=>{l(r.target.value),r.target.value||(E(1),P(),T(!0))};return o.useEffect(()=>{F()},[F]),s.jsxs(s.Fragment,{children:[s.jsx(Es,{aid:n!=null&&n.aid?n==null?void 0:n.aid:c,isEnable:e,onRefetch:t,instituteId:i,isApplicable:!0,pageOpenAs:m,admissionId:n!=null&&n.aid?n==null?void 0:n.aid:c,children:s.jsx("input",{type:"text",placeholder:_("search-label"),onChange:b})}),s.jsx(vs,{carryParentState:d,pageOpenAs:m}),k==null?void 0:k.map((r,S)=>(k==null?void 0:k.length)===S+1?s.jsx("div",{ref:C,children:s.jsx(Re,{remainData:r,is_applicable:!0})},S):s.jsx(Re,{remainData:r,is_applicable:!0},S)),N&&s.jsx(ne,{status:"white"})]})},tn=({isEnable:e,instituteId:i,onRefetch:t,carryParentState:d,pageOpenAs:m,admissionId:c})=>{var q;const{t:_}=z(),n=Ee(M=>M.admissionChange),[g,j]=o.useState(!0),[x,w]=o.useState(""),[f,E]=o.useState(1),[C,v]=de(),[k,$]=o.useState([]),[N,T]=o.useState(!0),[F,u]=o.useState({depart_arr:[],batch_arr:[],master_arr:[],gender:"",cast_category:"",filter_by:""}),[P,l]=o.useState(!1),{scrollToTop:b}=ae(),[r]=ut(),{getPendingCustomFilterByAdmission:S,getPendingCustomFilterByAdmissionRefetch:O}=lt({data:{aid:n!=null&&n.aid?n==null?void 0:n.aid:c,flow:"Admission_Filter"},skip:n!=null&&n.aid?!(n!=null&&n.aid):!c});o.useEffect(()=>{(n!=null&&n.aid||c)&&O()},[n==null?void 0:n.aid,c,O]);const R=o.useCallback(()=>{P&&r({aid:n!=null&&n.aid?n==null?void 0:n.aid:c,page:f,limit:10,search:x,flow:"All_Pending_Fees_Query",filter_by:F.filter_by,filterData:{...F}}).then(M=>{var Q,H,U,D,W,y,V,L;(Q=M.data)!=null&&Q.remain&&(x?($((H=M.data)==null?void 0:H.remain),T(!1)):(U=M.data)!=null&&U.remain?($(f===1?(D=M.data)==null?void 0:D.remain:B=>{var I;return[...new Set([...B,...(I=M.data)==null?void 0:I.remain].map(JSON.stringify))].map(JSON.parse)}),T(!1)):((y=(W=M.data)==null?void 0:W.remain)==null?void 0:y.length)===0&&T(!1),((L=(V=M.data)==null?void 0:V.remain)==null?void 0:L.length)===10?j(!0):j(!1))}).catch({})},[x,f,n==null?void 0:n.aid,c,F,P]);o.useEffect(()=>{v&&g&&E(M=>M+1)},[v,g]),o.useEffect(()=>{(n!=null&&n.aid||c)&&(T(!0),R())},[f,n==null?void 0:n.aid,c,x,R]),o.useEffect(()=>{E(M=>1),T(!0),R()},[F,R]),o.useEffect(()=>{var M,Q;if((M=S==null?void 0:S.ads_admin)!=null&&M.pending_fee_custom_filter){let H=(Q=S==null?void 0:S.ads_admin)==null?void 0:Q.pending_fee_custom_filter;u({depart_arr:H==null?void 0:H.department,batch_arr:H==null?void 0:H.batch,master_arr:H==null?void 0:H.master,gender:H==null?void 0:H.gender,cast_category:H==null?void 0:H.cast_category,filter_by:""}),l(!0)}},[(q=S==null?void 0:S.ads_admin)==null?void 0:q.pending_fee_custom_filter]);const a=o.useCallback(Se.debounce(M=>w(M),500),[]),A=M=>{a(M.target.value),M.target.value||(E(1),R(),T(!0))};return o.useEffect(()=>{b()},[b]),s.jsxs(s.Fragment,{children:[s.jsx(Es,{aid:n!=null&&n.aid?n==null?void 0:n.aid:c,isEnable:e,onRefetch:t,instituteId:i,applyFilter:F,setApplyFilter:u,pageOpenAs:m,admissionId:n!=null&&n.aid?n==null?void 0:n.aid:c,children:s.jsx("input",{type:"text",placeholder:_("search-label"),onChange:A})}),s.jsx(vs,{carryParentState:d,pageOpenAs:m}),k==null?void 0:k.map((M,Q)=>(k==null?void 0:k.length)===Q+1?s.jsx("div",{ref:C,children:s.jsx(Re,{remainData:M})},Q):s.jsx(Re,{remainData:M},Q)),N&&s.jsx(ne,{status:"white"})]})};function Hn({isEnable:e,instituteId:i,onRefetch:t,carryParentState:d,pageOpenAs:m,admissionId:c}){var n;const _=ve();return s.jsx("div",{className:ke.remainingFees,children:((n=_.search)==null?void 0:n.substring(3))==="pending"?s.jsx(tn,{isEnable:e,carryParentState:d,onRefetch:t,instituteId:i,pageOpenAs:m,admissionId:c}):s.jsx(sn,{isEnable:e,carryParentState:d,onRefetch:t,instituteId:i,pageOpenAs:m,admissionId:c})})}const Qn=({aid:e,viewAs:i})=>{var H,U,D,W;const{t}=z(),d=ce(),[m,c]=o.useState(!1),[_,n]=o.useState({admission_about:"",admission_process:"",cashier_name:"",cashier_signature:""}),[g,j]=o.useState([{contact_department_name:"",contact_person_name:"",contact_person_mobile:"",contact_person_email:""}]),[x,w]=o.useState(""),[f,E]=o.useState(""),[C,v]=o.useState(!1),[k,$]=o.useState(!1),[N,T]=o.useState(""),F=Ee(y=>y.idChange.id),{data:u,refetch:P}=Ps(F,{skip:i==="INSTITUTE"?!0:!F});o.useEffect(()=>{F&&P()},[F,P]);const{admissionGetSiteInfo:l,admissionGetSiteInfoRefetch:b}=ht({aid:e,skip:!e}),[r]=at(),[S]=hs();o.useEffect(()=>{e&&b()},[e,b]),o.useEffect(()=>{var y,V,L,B,I,G,K;if(l!=null&&l.admission_site&&(n({admission_about:(y=l==null?void 0:l.admission_site)==null?void 0:y.admission_about,admission_process:(V=l==null?void 0:l.admission_site)==null?void 0:V.admission_process,cashier_name:(L=l==null?void 0:l.admission_site)==null?void 0:L.cashier_name,cashier_signature:(B=l==null?void 0:l.admission_site)==null?void 0:B.cashier_signature}),(G=(I=l==null?void 0:l.admission_site)==null?void 0:I.admission_contact)!=null&&G.length)){let Y=[];for(let X of(K=l==null?void 0:l.admission_site)==null?void 0:K.admission_contact){let oe={contact_department_name:X==null?void 0:X.contact_department_name,contact_person_name:X==null?void 0:X.contact_person_name,contact_person_mobile:X==null?void 0:X.contact_person_mobile,contact_person_email:X==null?void 0:X.contact_person_email,contactId:X==null?void 0:X._id};Y.push(oe)}j(Y)}},[l==null?void 0:l.admission_site]);const O=()=>{j(y=>[...y,{contact_department_name:"",contact_person_name:"",contact_person_mobile:"",contact_person_email:""}])},R=(y,V)=>{const L=[...g];for(let B=0;B<(L==null?void 0:L.length);B++)B===V&&(L[B][y.target.name]=y.target.value);j(L)},a=()=>{d(-1)},A=y=>{n(V=>({...V,[y.target.name]:y.target.value}))},q=y=>{if(y.target.files[0]){const V=URL.createObjectURL(y.target.files[0]);E(y.target.files[0]),T(V),w(V),v(!0)}},M=y=>{if(y){c(L=>!L);const V=new FormData;V.append("file",y),S({fileUpload:V}).then(L=>{var B;(B=L.data)!=null&&B.imageKey&&n(I=>{var G;return{...I,cashier_signature:(G=L.data)==null?void 0:G.imageKey}}),c(I=>!I)}).catch({})}};o.useEffect(()=>{k&&M(f)},[k,f]);const Q=()=>{c(y=>!y),r({aid:e,updateSiteInfo:{..._,admission_contact:g==null?void 0:g.filter(y=>y!=null&&y.contactId?"":y),edit_admission_contact:g==null?void 0:g.filter(y=>y!=null&&y.contactId?y:"")}}).then(()=>{c(y=>!y)}).catch({})};return s.jsxs("div",{className:xe.bgContainer,children:[i==="INSTITUTE"?null:s.jsx("div",{className:xe.navbar,children:s.jsx(Ts,{status:"members",profileData:u==null?void 0:u.user,username:(H=u==null?void 0:u.user)==null?void 0:H.username,name:(U=u==null?void 0:u.user)==null?void 0:U.userLegalName,photoId:(D=u==null?void 0:u.user)==null?void 0:D.photoId,profilePhoto:(W=u==null?void 0:u.user)==null?void 0:W.profilePhoto})}),s.jsxs("div",{className:xe.container,children:[s.jsxs("div",{className:xe.containerhead,children:[s.jsx("h6",{children:t("update_admission_site_info")}),s.jsx("img",{src:"/images/close-post-icon.svg",alt:"",onClick:a})]}),s.jsx(p,{customStyle:{width:"100%"}}),s.jsx("div",{className:xe.containercontent,children:s.jsxs("div",{className:xe.container_inner_content,children:[s.jsx(He,{labelText:t("about_admission_department"),placeholder:t("about_admission_department_placeholder"),name:"admission_about",value:_.admission_about,type:"text",onChange:A,customStyleContainer:{width:"100%"}}),s.jsx(He,{labelText:t("admission_process_site"),placeholder:t("admission_process_site_placeholder"),name:"admission_process",value:_.admission_process,type:"text",onChange:A,customStyleContainer:{width:"100%"}}),s.jsxs("div",{className:xe.show_field,style:{alignItems:"flex-start"},children:[s.jsx(ue,{labelText:t("site_cashier_name"),placeholder:t("site_cashier_name_placeholder"),name:"cashier_name",value:_==null?void 0:_.cashier_name,type:"text",onChange:A,customStyleContainer:{width:"69.5%"}}),s.jsx(kt,{labelText:t("cashier_signature"),name:"cashier_signature",value:_.cashier_signature,onChange:q,customStyleContainer:{width:"29.5%"}})]}),s.jsxs("div",{className:xe.add_contact_person,children:[s.jsx("h6",{children:t("add_contact_persons")}),g==null?void 0:g.map((y,V)=>s.jsxs("div",{children:[s.jsxs("div",{className:xe.show_field,children:[s.jsx(ue,{labelText:t("site_department_name"),placeholder:t("site_department_name_placeholder"),name:"contact_department_name",value:y==null?void 0:y.contact_department_name,type:"text",onChange:L=>R(L,V),customStyleContainer:{width:"49.5%"}}),s.jsx(ue,{labelText:t("contact_person_name"),placeholder:t("contact_person_name_placeholder"),name:"contact_person_name",value:y==null?void 0:y.contact_person_name,type:"text",onChange:L=>R(L,V),customStyleContainer:{width:"49.5%"}})]}),s.jsxs("div",{className:xe.show_field,children:[s.jsx(ue,{labelText:t("contact_person_mobile"),placeholder:t("contact_person_mobile_placeholder"),name:"contact_person_mobile",value:y==null?void 0:y.contact_person_mobile,type:"text",onChange:L=>R(L,V),customStyleContainer:{width:"49.5%"}}),s.jsx(ue,{labelText:t("contact_person_email"),placeholder:t("contact_person_email_placeholder"),name:"contact_person_email",value:y==null?void 0:y.contact_person_email,type:"email",onChange:L=>R(L,V),customStyleContainer:{width:"49.5%"}})]})]},V))]}),s.jsx("button",{className:xe.add_contact_person_btn,title:"Add Contact Person",onClick:O,children:t("add_contact_person")}),m&&s.jsx(se,{}),s.jsx("button",{className:xe.update_btn,onClick:Q,children:t("update")}),s.jsx(Fs,{open:C,children:s.jsx($s,{setPhotoURL:w,photoURL:x,setFile:E,setOpenCrop:v,setUpload:$,setProfilePhoto:T,first:1,second:1})})]})})]})]})};export{In as A,Gn as C,es as I,Hn as R,Jn as a,Wn as b,Qn as c,Pe as d};
