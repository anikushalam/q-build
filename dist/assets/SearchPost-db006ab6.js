import{k as w,g as V,r as c,t as b,bS as k,j as h}from"./index-731451a5.js";import{x as y}from"./post-api-f57ebb8f.js";import{i as D}from"./constant_value-4cd2b3e0.js";import{P as L}from"./PostTypeConfiguration-5adf64d4.js";import{Q as G}from"./QvipleLoaderGif-827e9b4f.js";function H({profilePost:r}){var S,x,j,E,d,v,A;const e=w(t=>t.idChange),a=w(t=>t.postChange),f=V(),[Q,R]=c.useState(!0),[T,u]=b(),[n,i]=c.useState(!0),[p,m]=c.useState(1),{allProfilePost:s,allProfilePostRefetch:g}=y({data:{id:(S=e==null?void 0:e.searchProfile)==null?void 0:S.id,page:p,limit:10,viewAs:D},skip:r?!((x=e==null?void 0:e.searchProfile)!=null&&x.id):!0});return c.useEffect(()=>{var t;(t=e==null?void 0:e.searchProfile)!=null&&t.id&&(f(k.removeSearchPost({search:[]})),m(1),i(!0))},[f,(j=e==null?void 0:e.searchProfile)==null?void 0:j.id]),c.useEffect(()=>{u&&n&&r&&m(t=>t+1)},[u,r,n]),c.useEffect(()=>{var t;(t=e==null?void 0:e.searchProfile)!=null&&t.id&&g()},[p,(E=e==null?void 0:e.searchProfile)==null?void 0:E.id,r,g]),c.useEffect(()=>{var t,o;f(k.addPost({post:r?((o=(t=s==null?void 0:s.post)==null?void 0:t[0])==null?void 0:o.author)===(e==null?void 0:e.searchProfile.id)?s==null?void 0:s.post:[]:[],profilePost:r?"search":"dash"})),(s==null?void 0:s.post.length)===10?i(!0):i(!1)},[s==null?void 0:s.post,f,r,(d=e==null?void 0:e.searchProfile)==null?void 0:d.id]),c.useEffect(()=>{setTimeout(()=>{R(!1)},3e3)},[]),h.jsx("div",{children:!((v=a==null?void 0:a.searchPosts)!=null&&v.length)&&r&&Q?h.jsx(G,{}):(A=a==null?void 0:a.searchPosts)==null?void 0:A.map((t,o)=>{var C;return((C=a==null?void 0:a.searchPosts)==null?void 0:C.length)===o+1?h.jsx("div",{ref:T,children:h.jsx(L,{post:t,profilePost:r,allPosts:[]})},o):h.jsx(L,{post:t,profilePost:r,allPosts:[]},o)})})}export{H as default};
