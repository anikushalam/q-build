import{j as e,e as ne,u as J,t as ee,r as i,l as de,S as H,n as ue,L as Ts,c as re,k as ws,w as Ps,W as Ds,x as Is,Q as K,D as us,C as Fs,a1 as te,d as je,v as hs,N as Ee,R as Os,_ as $s,kX as ye}from"./index-731451a5.js";import{q as Ls,r as As,s as qs,t as Rs,v as Us,w as Ms,x as Vs,y as Bs,a as Js,z as Ws,b as Gs,A as fs,B as Ys,C as Qs,D as Xs,E as zs,F as Ks,G as Hs,c as Zs,H as ps,I as et,J as st,K as tt,L as nt,M as ot,d as rt,N as it,O as ct,P as lt,Q as dt,R as at,S as _t,T as mt,U as ut,V as ht,W as ft,X as xt,Y as jt,Z as gt,_ as Nt,$ as bt,a0 as St,a1 as Ct,a2 as vt,a3 as Et}from"./hostel-api-4d11cb04.js";import{s as Ne}from"./InstituteHostel.module-b6b254cc.js";import{B as Y}from"./BorderBottom-47800983.js";import{s as X}from"./Hostel.module-50da11fe.js";import{s as ce}from"./HostelSiteInfo.module-332fbdef.js";import{J as ts}from"./JoinFormTextArea-7f6dded0.js";import{J as se}from"./JoinFormInput-8e74a0e0.js";import{J as yt}from"./JoinFormFileEdit-e41481d6.js";import{P as ie}from"./PopupWrapper-ffbaef7a.js";import{s as z}from"./HostelFeeStructure.module-5a40a31e.js";import{S as xs}from"./StringLength-222a9fd1.js";import{O as Le}from"./Overlay-07ce6f88.js";import{S as Ae}from"./SearchModalBackdrop-5b309d60.js";import{s as me}from"./EditConfirm.module-344fbdb9.js";import{U as ke}from"./UniversalTab-d4f2174c.js";import kt from"./AssignStaffModal-61be8e90.js";import{C as ve}from"./CustomNormalSelectInput-9ec7329b.js";import{s as V}from"./AdmissionModerator.module-e8abdfd3.js";import{s as oe}from"./AdmisisonRefund.module-c6c85188.js";import{s as $e}from"./Funds.module-95df49a8.js";import{C as ge}from"./CustomSelectDepartment-a5dd9a35.js";import{a as Tt}from"./finance-api-5c6c5671.js";import{c as wt}from"./constant_value-4cd2b3e0.js";import{F as he}from"./FormCheckbox-3a5ba026.js";import{F as _e}from"./FormToggle-bf5ca79b.js";import{I as De,b as be}from"./UnitRoomInfo-274b0ae5.js";import{$ as Pt,w as Dt,B as It,E as Ft,F as qe,t as Ot,K as $t,L as Lt}from"./admission-api-56b87fde.js";import{s as Q,A as At}from"./AdmissionApplicationCalender-28d9a66e.js";import{s as D}from"./AdmissionApplicationRequest.module-43e4e129.js";import{C as js}from"./CustomSuspense-e90dc607.js";import{S as gs}from"./SelectHostelFeeStrucutre-6ca88b34.js";import{J as Ns}from"./JoinFormCalender-5158d888.js";import{P as bs}from"./PaymentModeType-cf3d04e2.js";import{h as Re}from"./pdf-convertor-function-e794de58.js";import{r as Ue}from"./main.receipt.pdf.worker-5753b302.js";import{A as qt,C as Rt}from"./CreateAdmissionApplication-3142beca.js";import{H as Ut}from"./HostelUnit-77f00467.js";import{F as Mt}from"./FeesCategoryList-8131ad8c.js";import{H as Vt}from"./HostelFeesStructureList-0cf3dd94.js";const ns=({warden:s})=>{var t;return e.jsxs("div",{className:Ne.hostel_warden_card,children:[e.jsx("img",{src:s!=null&&s.staffProfilePhoto?`${ne}/${s==null?void 0:s.staffProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:""}),e.jsxs("div",{className:Ne.warden_card_text,children:[e.jsx("h6",{children:`${(s==null?void 0:s.staffFirstName)??""} ${(s==null?void 0:s.staffMiddleName)??""} ${(s==null?void 0:s.staffLastName)??""}`}),e.jsx("p",{children:(t=s==null?void 0:s.hostelUnitDepartment)==null?void 0:t.map((n,r)=>e.jsxs("span",{children:[r===0?"":", ",(n==null?void 0:n.hostel_unit_name)??""]},n==null?void 0:n._id))})]})]})},mo=({hid:s})=>{const{t}=J(),[n,r]=ee(),[h,u]=i.useState(1),[_,o]=i.useState(!0),[a,f]=i.useState(!0),[m,N]=i.useState([]),[c,y]=i.useState(""),{getHostelWardenList:d,getHostelWardenListRefetch:x}=Ls({data:{hid:s,page:h,limit:10,search:c},skip:!s});i.useEffect(()=>{s&&(f(!0),x())},[s,h,c,x]),i.useEffect(()=>{r&&_&&u(E=>E+1)},[r,_]),i.useEffect(()=>{var E,S;c?(N(d==null?void 0:d.all_wardens),f(!1)):d!=null&&d.all_wardens?(N(l=>[...new Set([...l,...d==null?void 0:d.all_wardens].map(JSON.stringify))].map(JSON.parse)),f(!1)):((E=d==null?void 0:d.all_wardens)==null?void 0:E.length)===0&&f(!1),((S=d==null?void 0:d.all_wardens)==null?void 0:S.length)===10?o(!0):o(!1)},[d==null?void 0:d.all_wardens]);const v=i.useCallback(de.debounce(E=>y(E),500),[]),T=E=>{v(E.target.value)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:Ne.with_search,children:[e.jsx("h6",{children:t("staff_room")}),e.jsx("section",{className:Ne.search_container,children:e.jsxs("div",{className:Ne.search_container_input,children:[e.jsx("img",{className:Ne.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),e.jsx("input",{type:"text",placeholder:"Search warden...",onChange:T})]})})]}),e.jsx(Y,{customStyle:{marginTop:"0.5rem",width:"100%"}}),m==null?void 0:m.map((E,S)=>(m==null?void 0:m.length)===S+1?e.jsx("div",{ref:n,children:e.jsx(ns,{warden:E})},E==null?void 0:E._id):e.jsx(ns,{warden:E},E==null?void 0:E._id)),a&&e.jsx(H,{})]})},os=({applicant:s})=>{var r;const{t}=J(),n=ue();return e.jsx(Ts,{to:`/q/${n.username}/student/profile/hostel`,state:{sid:s==null?void 0:s._id,viewAs:"ADMISSION_ADMIN",openTab:"FEES_DATA"},children:e.jsxs("div",{className:X.hostelite_container,title:"View Profile",children:[e.jsx("img",{alt:"Student Avatar",src:s.photoId!=="1"?`${ne}/${s==null?void 0:s.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg"}),e.jsxs("div",{className:X.hostelite_container_inner,children:[e.jsxs("div",{className:X.hostelite_container_inner_text,children:[e.jsx("h6",{children:`${s.studentFirstName} ${s.studentMiddleName?s.studentMiddleName:""} ${s.studentLastName}`}),e.jsx("p",{children:((r=s==null?void 0:s.student_unit)==null?void 0:r.hostel_unit_name)??""})]}),e.jsxs("div",{className:X.hostelite_container_inner_text,children:[e.jsxs("h6",{children:[t("rs")," ",". ",(s==null?void 0:s.hostelRemainFeeCount)??0]}),e.jsx("p",{children:t("pending_fees")})]})]})]})})},uo=({hid:s,instituteId:t})=>{const{t:n}=J(),[r,h]=ee(),[u,_]=i.useState(1),[o,a]=i.useState(!0),[f,m]=i.useState(!0),[N,c]=i.useState([]),[y,d]=i.useState(""),{getPendingFeeByHostel:x,getPendingFeeByHostelRefetch:v}=As({data:{hid:s,page:u,limit:10,search:y,id:t},skip:!s});i.useEffect(()=>{s&&(m(!0),v())},[s,t,u,y,v]),i.useEffect(()=>{h&&o&&_(S=>S+1)},[h,o]),i.useEffect(()=>{var S,l;y?(c(x==null?void 0:x.remain),m(!1)):x!=null&&x.remain?(c(C=>[...new Set([...C,...x==null?void 0:x.remain].map(JSON.stringify))].map(JSON.parse)),m(!1)):((S=x==null?void 0:x.remain)==null?void 0:S.length)===0&&m(!1),((l=x==null?void 0:x.remain)==null?void 0:l.length)===10?a(!0):a(!1)},[x==null?void 0:x.remain]);const T=i.useCallback(de.debounce(S=>d(S),500),[]),E=S=>{T(S.target.value)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:X.with_search,children:[e.jsx("h6",{children:n("remaining_fees")}),e.jsx("section",{className:X.search_container,children:e.jsxs("div",{className:X.search_container_input,children:[e.jsx("img",{className:X.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),e.jsx("input",{type:"text",placeholder:"Search...",onChange:E})]})})]}),e.jsx(Y,{customStyle:{marginTop:"0.5rem",marginBottom:"0.6rem",width:"100%"}}),N==null?void 0:N.map((S,l)=>(N==null?void 0:N.length)===l+1?e.jsx("div",{ref:r,children:e.jsx(os,{applicant:S})},S==null?void 0:S._id):e.jsx(os,{applicant:S},S==null?void 0:S._id)),f&&e.jsx(H,{})]})},ho=({hid:s,viewAs:t})=>{var R,$,M,B;const{t:n}=J(),r=re(),[h,u]=i.useState(!1),[_,o]=i.useState({hostel_about:"",hostel_process:"",cashier_name:"",cashier_signature:""}),[a,f]=i.useState([{contact_department_name:"",contact_person_name:"",contact_person_mobile:"",contact_person_email:""}]),[m,N]=i.useState(""),[c,y]=i.useState(""),[d,x]=i.useState(!1),[v,T]=i.useState(!1),[E,S]=i.useState(""),l=ws(L=>L.idChange.id),{data:C,refetch:F}=Ps(l,{skip:t==="INSTITUTE"?!0:!l});i.useEffect(()=>{l&&F()},[l,F]);const{hostelGetSiteInfo:j,hostelGetSiteInfoRefetch:b}=qs({hid:s,skip:!s}),[I]=Rs(),[w]=Ds();i.useEffect(()=>{s&&b()},[s,b]),i.useEffect(()=>{var L,W,G,Z,ae,xe,Se;if(j!=null&&j.hostel_site&&(o({hostel_about:(L=j==null?void 0:j.hostel_site)==null?void 0:L.hostel_about,hostel_process:(W=j==null?void 0:j.hostel_site)==null?void 0:W.hostel_process,cashier_name:(G=j==null?void 0:j.hostel_site)==null?void 0:G.cashier_name,cashier_signature:(Z=j==null?void 0:j.hostel_site)==null?void 0:Z.cashier_signature}),(xe=(ae=j==null?void 0:j.hostel_site)==null?void 0:ae.hostel_contact)!=null&&xe.length)){let Ce=[];for(let p of(Se=j==null?void 0:j.hostel_site)==null?void 0:Se.hostel_contact){let Pe={contact_department_name:p==null?void 0:p.contact_department_name,contact_person_name:p==null?void 0:p.contact_person_name,contact_person_mobile:p==null?void 0:p.contact_person_mobile,contact_person_email:p==null?void 0:p.contact_person_email,contactId:p==null?void 0:p._id};Ce.push(Pe)}f(Ce)}},[j==null?void 0:j.hostel_site]);const k=()=>{f(L=>[...L,{contact_department_name:"",contact_person_name:"",contact_person_mobile:"",contact_person_email:""}])},g=(L,W)=>{const G=[...a];for(let Z=0;Z<(G==null?void 0:G.length);Z++)Z===W&&(G[Z][L.target.name]=L.target.value);f(G)},P=()=>{r(-1)},A=L=>{o(W=>({...W,[L.target.name]:L.target.value}))},O=L=>{if(L.target.files[0]){const W=URL.createObjectURL(L.target.files[0]);y(L.target.files[0]),S(W),N(W),x(!0)}},q=L=>{if(L){u(G=>!G);const W=new FormData;W.append("file",L),w({fileUpload:W}).then(G=>{var Z;(Z=G.data)!=null&&Z.imageKey&&o(ae=>{var xe;return{...ae,cashier_signature:(xe=G.data)==null?void 0:xe.imageKey}}),u(ae=>!ae)}).catch({})}};i.useEffect(()=>{v&&q(c)},[v,c]);const U=()=>{u(L=>!L),I({hid:s,updateSiteInfo:{..._,hostel_contact:a==null?void 0:a.filter(L=>L!=null&&L.contactId?"":L),edit_hostel_contact:a==null?void 0:a.filter(L=>L!=null&&L.contactId?L:"")}}).then(()=>{u(L=>!L)}).catch({})};return e.jsxs("div",{className:ce.bgContainer,children:[t==="INSTITUTE"?null:e.jsx("div",{className:ce.navbar,children:e.jsx(Is,{status:"members",profileData:C==null?void 0:C.user,username:(R=C==null?void 0:C.user)==null?void 0:R.username,name:($=C==null?void 0:C.user)==null?void 0:$.userLegalName,photoId:(M=C==null?void 0:C.user)==null?void 0:M.photoId,profilePhoto:(B=C==null?void 0:C.user)==null?void 0:B.profilePhoto})}),e.jsxs("div",{className:ce.container,children:[e.jsxs("div",{className:ce.containerhead,children:[e.jsx("h6",{children:n("update_hostel_site_info")}),e.jsx("img",{src:"/images/close-post-icon.svg",alt:"",onClick:P})]}),e.jsx(Y,{customStyle:{width:"100%"}}),e.jsx("div",{className:ce.containercontent,children:e.jsxs("div",{className:ce.container_inner_content,children:[e.jsx(ts,{labelText:n("about_hostel_department"),placeholder:n("about_hostel_department_placeholder"),name:"hostel_about",value:_.hostel_about,type:"text",onChange:A,customStyleContainer:{width:"100%"}}),e.jsx(ts,{labelText:n("hostel_process_site"),placeholder:n("hostel_process_site_placeholder"),name:"hostel_process",value:_.hostel_process,type:"text",onChange:A,customStyleContainer:{width:"100%"}}),e.jsxs("div",{className:ce.show_field,style:{alignItems:"flex-start"},children:[e.jsx(se,{labelText:n("site_cashier_name"),placeholder:n("site_cashier_name_placeholder"),name:"cashier_name",value:_==null?void 0:_.cashier_name,type:"text",onChange:A,customStyleContainer:{width:"69.5%"}}),e.jsx(yt,{labelText:n("cashier_signature"),name:"cashier_signature",value:_.cashier_signature,onChange:O,customStyleContainer:{width:"29.5%"}})]}),e.jsxs("div",{className:ce.add_contact_person,children:[e.jsx("h6",{children:n("add_contact_persons")}),a==null?void 0:a.map((L,W)=>e.jsxs("div",{children:[e.jsxs("div",{className:ce.show_field,children:[e.jsx(se,{labelText:n("site_department_name"),placeholder:n("site_department_name_placeholder"),name:"contact_department_name",value:L==null?void 0:L.contact_department_name,type:"text",onChange:G=>g(G,W),customStyleContainer:{width:"49.5%"}}),e.jsx(se,{labelText:n("contact_person_name"),placeholder:n("contact_person_name_placeholder"),name:"contact_person_name",value:L==null?void 0:L.contact_person_name,type:"text",onChange:G=>g(G,W),customStyleContainer:{width:"49.5%"}})]}),e.jsxs("div",{className:ce.show_field,children:[e.jsx(se,{labelText:n("contact_person_mobile"),placeholder:n("contact_person_mobile_placeholder"),name:"contact_person_mobile",value:L==null?void 0:L.contact_person_mobile,type:"text",onChange:G=>g(G,W),customStyleContainer:{width:"49.5%"}}),e.jsx(se,{labelText:n("contact_person_email"),placeholder:n("contact_person_email_placeholder"),name:"contact_person_email",value:L==null?void 0:L.contact_person_email,type:"email",onChange:G=>g(G,W),customStyleContainer:{width:"49.5%"}})]})]},W))]}),e.jsx("button",{className:ce.add_contact_person_btn,title:"Add Contact Person",onClick:k,children:n("add_contact_person")}),h&&e.jsx(K,{}),e.jsx("button",{className:ce.update_btn,onClick:U,children:n("update")}),e.jsx(us,{open:d,children:e.jsx(Fs,{setPhotoURL:N,photoURL:m,setFile:y,setOpenCrop:x,setUpload:T,setProfilePhoto:S,first:1,second:1})})]})})]})]})},Ss=({onClose:s,onRefetch:t,openAs:n,batchMenu:r,onEdit:h,hostelId:u,instituteId:_})=>{const{t:o}=J(),[a,f]=i.useState(""),[m,N]=i.useState(!1),[c,y]=i.useState({batchName:n==="EDIT"?r==null?void 0:r.batchName:""}),[d]=Us();i.useEffect(()=>{n==="EDIT"&&y(v=>({...v,batchName:r==null?void 0:r.batchName}))},[n]);const x=()=>{c.batchName?n==="EDIT"?h(c.batchName):u&&(N(v=>!v),d({hid:u,id:_,hostelBatch:c}).then(()=>{t(),s(),N(v=>!v)}).catch({})):f(!0)};return e.jsx(ie,{onClose:s,children:e.jsxs("div",{className:z.add_category_modal,children:[e.jsxs("div",{className:z.add_category_modal_title,children:[e.jsx("h6",{children:o(n==="EDIT"?"edit_batch":"add_new_batch")}),e.jsx("img",{src:"/images/close-post-icon.svg",onClick:s,alt:""})]}),e.jsx(Y,{customStyle:{width:"100%",marginTop:"0.6rem",marginBottom:"0.6rem"}}),e.jsx(se,{labelText:o("batch-name-place"),placeholder:"e.g. 2022-23",name:"batchName",value:c==null?void 0:c.batchName,type:"text",onChange:v=>{var T;((T=v.target.value)==null?void 0:T.length)<=30&&y(E=>({...E,batchName:v.target.value}))},errorShow:a}),e.jsx(xs,{maxLength:30,valueLength:c.batchName}),e.jsx("button",{className:z.set_fees_structure_btn,title:"Create Batch",onClick:x,style:{justifyContent:"center"},children:o(n==="EDIT"?"update":"create")}),m&&e.jsx(K,{})]})})},Bt=({onClose:s,batchMenu:t,onRefetch:n,hostelId:r,onMasterApiRefetch:h})=>{const[u,_]=i.useState(!1),[o,a]=i.useState(!1),[f]=Ms(),[m]=Vs(),[N]=Bs(),c=()=>{t!=null&&t._id&&(_(x=>!x),m({bid:t==null?void 0:t._id}).then(()=>{n(),s(),_(x=>!x)}).catch({}))},y=x=>{t!=null&&t._id&&(a(!1),_(v=>!v),f({bid:t==null?void 0:t._id,updateBatch:{batchName:x}}).then(()=>{n(),_(v=>!v),s()}).catch({}))},d=()=>{t!=null&&t._id&&r&&(_(x=>!x),N({hid:r,bid:t==null?void 0:t._id}).then(()=>{h(),_(x=>!x),s()}).catch({}))};return e.jsx(e.Fragment,{children:o?e.jsx(Ss,{openAs:"EDIT",onEdit:y,batchMenu:t,onClose:()=>a(x=>!x),onRefetch:n,hostelId:r}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{onClose:s}),e.jsxs(Le,{customStyle:{zIndex:"1200"},children:[e.jsxs("div",{className:me.edit_modal_container,style:{width:"200px"},children:[e.jsx("h6",{className:me.edit,onClick:d,children:"Select Batch"})," ",e.jsx("h6",{className:me.edit,onClick:()=>a(x=>!x),children:"Edit"}),e.jsx("h6",{className:me.remove,onClick:c,children:"Delete"})]}),u&&e.jsx(K,{})]})]})})},rs=({batch:s,selectedId:t,hostelId:n,onRefetch:r,onMasterApiRefetch:h})=>{const{t:u}=J(),[_,o]=i.useState("");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:X.hostel_batch_container,style:{backgroundColor:t===(s==null?void 0:s._id)?"rgb(226, 229, 232)":"inherit"},children:[e.jsx("img",{className:X.hostel_batch_image,src:"/images/master-24-grey-icon.svg",alt:"batch icon",style:{borderRadius:"0"}}),e.jsxs("div",{className:X.hostel_batch_container_text,children:[e.jsx("h6",{children:(s==null?void 0:s.batchName)??""}),e.jsxs("p",{children:[u("created_on_")," ",te(s==null?void 0:s.createdAt).format("DD MMM yyyy")]})]}),e.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:()=>o(s),className:X.hostel_batch_menu,title:"Menu"})]}),_&&e.jsx(Bt,{onClose:()=>o(""),hostelId:n,onRefetch:r,batchMenu:_,onMasterApiRefetch:h})]})},fo=({hid:s,selectedBacthId:t,onMasterApiRefetch:n,carryParentState:r,pageOpenAs:h,instituteId:u})=>{var g;const{t:_}=J(),o=je(),[a,f]=i.useState([{name:_("batch"),id:0,url:"member/hostel?a=batch"},{name:_("hostel_tab_standard"),id:1,url:"member/hostel?a=standard"}]),[m,N]=i.useState(!1),[c,y]=ee(),[d,x]=i.useState(1),[v,T]=i.useState(!0),[E,S]=i.useState(!0),[l,C]=i.useState([]),[F,j]=i.useState(!1),{getHostelAllBatch:b,getHostelAllBatchRefetch:I}=Js({data:{hid:s,id:u,page:d,limit:10},skip:!s});i.useEffect(()=>{h&&f([{name:_("batch"),id:0,url:"hostel?a=batch"},{name:_("hostel_tab_standard"),id:1,url:"hostel?a=standard"}])},[h]),i.useEffect(()=>{s&&(S(!0),I())},[s,d,I]),i.useEffect(()=>{y&&v&&x(P=>P+1)},[y,v]),i.useEffect(()=>{var P,A;F?(C(b==null?void 0:b.all_batches),S(!1),j(!1)):b!=null&&b.all_batches?(C(O=>[...new Set([...O,...b==null?void 0:b.all_batches].map(JSON.stringify))].map(JSON.parse)),S(!1)):((P=b==null?void 0:b.all_batches)==null?void 0:P.length)===0&&S(!1),((A=b==null?void 0:b.all_batches)==null?void 0:A.length)===10?T(!0):T(!1)},[b==null?void 0:b.all_batches]);const w=()=>{x(1),j(!0),S(!0),I()},k=()=>{N(P=>!P)};return e.jsxs(e.Fragment,{children:[e.jsx(ke,{tabList:a,activeIndexTab:((g=o.search)==null?void 0:g.substring(3))==="batch"?0:1,showAs:!0,customStyleTab:{width:"100%",marginTop:"-1rem"},customStyleLink:{width:"50%"},carryParentState:r}),e.jsx(Y,{customStyle:{marginBottom:"0.6rem",width:"100%"}}),e.jsx("div",{className:X.with_search,children:e.jsx("h6",{children:_("hostel_batch")})}),e.jsx(Y,{customStyle:{marginTop:"0.5rem",marginBottom:"0.6rem",width:"100%"}}),e.jsx("div",{className:X.add_container,children:e.jsx("p",{className:X.add_new_category,onClick:k,children:_("create_new_batch")})}),l==null?void 0:l.map((P,A)=>(l==null?void 0:l.length)===A+1?e.jsx("div",{ref:c,children:e.jsx(rs,{batch:P,hostelId:s,onRefetch:w,selectedId:t,onMasterApiRefetch:n})},P==null?void 0:P._id):e.jsx(rs,{batch:P,hostelId:s,onRefetch:w,selectedId:t,onMasterApiRefetch:n},P==null?void 0:P._id)),E&&e.jsx(H,{status:"white"}),m&&e.jsx(Ss,{onClose:k,hostelId:s,onRefetch:w,instituteId:u})]})},Jt=({onClose:s,onRefetch:t,hostelId:n})=>{const{t:r}=J(),[h,u]=i.useState(""),[_,o]=i.useState(!1),[a,f]=i.useState({className:""}),[m]=Ws(),N=()=>{a.className?n&&(o(c=>!c),m({hid:n,hostelStandard:a}).then(()=>{t(),s(),o(c=>!c)}).catch({})):u(!0)};return e.jsx(ie,{onClose:s,children:e.jsxs("div",{className:z.add_category_modal,children:[e.jsxs("div",{className:z.add_category_modal_title,children:[e.jsx("h6",{children:r("create_new_master")}),e.jsx("img",{src:"/images/close-post-icon.svg",onClick:s,alt:""})]}),e.jsx(Y,{customStyle:{width:"100%",marginTop:"0.6rem",marginBottom:"0.6rem"}}),e.jsx(se,{labelText:r("create_master_header_2"),placeholder:r("e.g. 6th Class/ FYJC"),name:"className",value:a==null?void 0:a.className,type:"text",onChange:c=>{var y;((y=c.target.value)==null?void 0:y.length)<=40&&f(d=>({...d,className:c.target.value}))},errorShow:h}),e.jsx(xs,{maxLength:40,valueLength:a.className}),e.jsx("button",{className:z.set_fees_structure_btn,title:"Create Standard",onClick:N,style:{justifyContent:"center"},children:r("create")}),_&&e.jsx(K,{})]})})},Wt=({standard:s})=>{const{t}=J();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:X.hostel_batch_container,children:[e.jsx("img",{className:X.hostel_batch_image,src:"/images/master-24-grey-icon.svg",alt:"batch icon",style:{borderRadius:"0"}}),e.jsxs("div",{className:X.hostel_batch_container_text,children:[e.jsx("h6",{children:(s==null?void 0:s.className)??""}),e.jsxs("p",{children:[t("created_on_")," ",te(s==null?void 0:s.createdAt).format("DD MMM yyyy")]})]})]})})},xo=({hid:s,carryParentState:t,pageOpenAs:n})=>{var x,v;const{t:r}=J(),h=je(),[u,_]=i.useState([{name:r("batch"),id:0,url:"member/hostel?a=batch"},{name:r("hostel_tab_standard"),id:1,url:"member/hostel?a=standard"}]),[o,a]=i.useState(!1),[f,m]=i.useState(!0),{getHostelAllStandard:N,getHostelAllStandardRefetch:c}=Gs({hid:s,skip:!s});i.useEffect(()=>{n&&_([{name:r("batch"),id:0,url:"hostel?a=batch"},{name:r("hostel_tab_standard"),id:1,url:"hostel?a=standard"}])},[n]),i.useEffect(()=>{s&&(m(!0),c())},[s,c]),i.useEffect(()=>{var T;(N!=null&&N.all_masters||((T=N==null?void 0:N.all_masters)==null?void 0:T.length)===0)&&m(!1)},[N==null?void 0:N.all_masters]);const y=()=>{m(!0),c()},d=()=>{a(T=>!T)};return e.jsxs(e.Fragment,{children:[e.jsx(ke,{tabList:u,activeIndexTab:((x=h.search)==null?void 0:x.substring(3))==="batch"?0:1,showAs:!0,customStyleTab:{width:"100%",marginTop:"-1rem"},customStyleLink:{width:"50%"},carryParentState:t}),e.jsx(Y,{customStyle:{marginBottom:"0.6rem",width:"100%"}}),e.jsx("div",{className:X.with_search,children:e.jsx("h6",{children:r("hostel_standard")})}),e.jsx(Y,{customStyle:{marginTop:"0.5rem",marginBottom:"0.6rem",width:"100%"}}),e.jsx("div",{className:X.add_container,children:e.jsx("p",{className:X.add_new_category,onClick:d,children:r("create_new_standard")})}),(v=N==null?void 0:N.all_masters)==null?void 0:v.map(T=>e.jsx(Wt,{standard:T},T==null?void 0:T._id)),f&&e.jsx(H,{status:"white"}),o&&e.jsx(Jt,{onClose:d,hostelId:s,onRefetch:y})]})},Gt=({setActivePopup:s,selectedApplication:t,selectedStaff:n,moderatorState:r,onAssignModerator:h})=>{const{t:u}=J(),_=()=>{};return e.jsx(ie,{children:e.jsxs("div",{className:V.assign_role_container,children:[e.jsxs("section",{className:V.assign_role_title,children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:_,alt:"back icon"}),e.jsx("h6",{children:u("preview")})]}),e.jsx(Y,{customStyle:{width:"100%"}}),e.jsxs("section",{className:V.selected_staff_container,children:[e.jsx("img",{src:n!=null&&n.staffProfilePhoto?`${ne}/${n==null?void 0:n.staffProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),e.jsxs("div",{className:V.selected_staff_text,children:[e.jsx("h6",{children:`${n==null?void 0:n.staffFirstName} ${(n==null?void 0:n.staffMiddleName)??""} ${n==null?void 0:n.staffLastName}`}),e.jsxs("p",{children:[u("index_number"),n==null?void 0:n.staffROLLNO]})]})]}),e.jsx("section",{style:{padding:"0.8rem"},children:e.jsx(ve,{selectLabel:u("select_role_of_moderator"),selectedValue:u("please_select_role"),value:(r==null?void 0:r.mod_role)==="ALL_FEE_ACCESS"?"Fee receipt authority":(r==null?void 0:r.mod_role)==="MULTI_APP_ACCESS"?"Application Manager":(r==null?void 0:r.mod_role)==="INQUIRY_ACCESS"?"Enquiries Section":"FULL_ACCESS",openAs:"REFUND"})}),t==null?void 0:t.map(o=>{var a;return e.jsxs("div",{className:V.application_card,children:[e.jsx("img",{src:"/images/admision-application-icon.svg",alt:"application icon"}),e.jsxs("section",{className:V.application_card_text,children:[e.jsx("h6",{children:(o==null?void 0:o.applicationName)??""}),e.jsxs("div",{className:V.application_card_text_bottom,children:[e.jsx("p",{children:((a=o==null?void 0:o.applicationDepartment)==null?void 0:a.dName)??""}),o!=null&&o.applicationEndDate?e.jsx("p",{children:te(o==null?void 0:o.applicationEndDate).format("DD/MM/yyyy")}):""]})]})]},o==null?void 0:o._id)}),e.jsxs("section",{style:{padding:"0.8rem"},children:[e.jsxs("button",{className:V.select_application_btn,onClick:()=>s("SELECT_APPLICATION"),children:[e.jsx("div",{children:u("add_more")}),e.jsx("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]}),e.jsxs("button",{className:V.assign_btn,onClick:h,children:[u("assign")," "]})]})]})})},Yt=({onCloseEdit:s,setActivePopup:t,selectedStaff:n,moderatorState:r,onSelectRole:h,onUpdateModerator:u,selectedApplication:_})=>{const{t:o}=J();return e.jsx(e.Fragment,{children:e.jsx(ie,{onClose:s,children:e.jsxs("div",{className:V.assign_role_container,children:[e.jsxs("section",{className:V.assign_role_title,children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:s,alt:"back icon",style:{cursor:"pointer"}}),e.jsx("h6",{children:o("update_role_to_moderator")})]}),e.jsx(Y,{customStyle:{width:"100%"}}),e.jsxs("section",{className:V.selected_staff_container,onClick:()=>t("OPEN_STAFF_LIST"),children:[e.jsx("img",{src:n!=null&&n.staffProfilePhoto?`${ne}/${n==null?void 0:n.staffProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),e.jsxs("div",{className:V.selected_staff_text,children:[e.jsx("h6",{children:`${n==null?void 0:n.staffFirstName} ${(n==null?void 0:n.staffMiddleName)??""} ${n==null?void 0:n.staffLastName}`}),e.jsxs("p",{children:[o("index_number"),n==null?void 0:n.staffROLLNO]})]})]}),e.jsxs("section",{style:{padding:"0.8rem"},children:[e.jsx(ve,{selectLabel:o("select_role_of_moderator"),selectedValue:o("please_select_role"),options:["Fee receipt authority","Application Manager","Renewal Manager","Deposit Moderator","Pending Fee Manager","Complaint Moderator","Fee Structure Moderator","Rules and Announcement Moderator","Income and Expense Moderator","Tab Authority","Data Export Authority"],value:(r==null?void 0:r.mod_role)==="ALL_FEE_ACCESS"?"Fee receipt authority":(r==null?void 0:r.mod_role)==="MULTI_APP_ACCESS"?"Application Manager":(r==null?void 0:r.mod_role)==="RENEWAL_UNIT_ACCESS"?"Renewal Manager":(r==null?void 0:r.mod_role)==="DEPOSIT_ACCESS"?"Deposit Moderator":(r==null?void 0:r.mod_role)==="COMPAINT_ACCESS"?"Complaint Moderator":(r==null?void 0:r.mod_role)==="PENDING_FEE_ACCESS"?"Pending Fee Manager":(r==null?void 0:r.mod_role)==="FEE_MASTER_ACCESS"?"Fee Structure Moderator":(r==null?void 0:r.mod_role)==="RULES_AND_ANNOUNCEMENT_ACCESS"?"Rules and Announcement Moderator":(r==null?void 0:r.mod_role)==="INCOME_AND_EXPENSE_ACCESS"?"Income and Expense Moderator":(r==null?void 0:r.mod_role)==="ONE_TAB_ACCESS"?"Tab Authority":(r==null?void 0:r.mod_role)==="DATA_EXPORT_ACCESS"?"Data Export Authority":"",onClick:h}),_==null?void 0:_.map(a=>{var f;return e.jsxs("div",{className:V.application_card,style:{width:"100%",margin:"1rem 0 0"},children:[e.jsx("img",{src:"/images/admision-application-icon.svg",alt:"application icon"}),e.jsxs("section",{className:V.application_card_text,children:[e.jsx("h6",{children:(a==null?void 0:a.applicationName)??""}),e.jsxs("div",{className:V.application_card_text_bottom,children:[e.jsx("p",{children:((f=a==null?void 0:a.applicationDepartment)==null?void 0:f.dName)??""}),a!=null&&a.applicationEndDate?e.jsx("p",{children:te(a==null?void 0:a.applicationEndDate).format("DD/MM/yyyy")}):""]})]})]},a==null?void 0:a._id)}),(r==null?void 0:r.mod_role)==="MULTI_APP_ACCESS"&&e.jsxs("button",{className:V.select_application_btn,onClick:()=>t("SELECT_APPLICATION"),children:[e.jsx("div",{children:o("moderator_select_application")}),e.jsx("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]}),e.jsxs("button",{className:V.assign_btn,onClick:u,children:[o("update")," "]})]})]})})})},Qt=({setActivePopup:s,setSelectedApplication:t,setSelectedApplicationId:n,selectedApplicationId:r,openAs:h,role:u,hid:_})=>{const{t:o}=J(),[a,f]=i.useState(!0),[m,N]=i.useState(1),[c,y]=ee(),[d,x]=i.useState([]),[v,T]=i.useState(!0),{getOngoingApplicationList:E,getOngoingApplicationListRefetch:S}=fs({data:{hid:_,page:m,limit:10},skip:!_});i.useEffect(()=>{y&&a&&N(j=>j+1)},[y,a]),i.useEffect(()=>{_&&(T(!0),S())},[_,m,S]),i.useEffect(()=>{var j;E!=null&&E.ongoing&&(x(b=>[...new Set([...b,...E==null?void 0:E.ongoing].map(JSON.stringify))].map(JSON.parse)),T(!1)),((j=E==null?void 0:E.ongoing)==null?void 0:j.length)===10?f(!0):f(!1)},[E==null?void 0:E.ongoing]);const l=()=>{s(h==="EDIT"?"PREVIEW_FORM":"ASSIGN_ROLE")},C=j=>{r!=null&&r.includes(j==null?void 0:j._id)?(t(b=>b==null?void 0:b.filter(I=>(I==null?void 0:I._id)!==(j==null?void 0:j._id))),n(b=>b==null?void 0:b.filter(I=>I!==(j==null?void 0:j._id)))):(t(b=>b?[...b,j]:[j]),n(b=>b?[...b,j==null?void 0:j._id]:[j==null?void 0:j._id]))},F=()=>{s(h==="EDIT"?"PREVIEW_FORM":u==="ONE_TAB_ACCESS"?"ASSIGN_ROLE":"MODERATOR_PREWVIEW")};return e.jsx(ie,{onClose:l,children:e.jsxs("div",{className:V.assign_role_container,children:[e.jsxs("section",{className:V.assign_role_title,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:l,alt:"back icon"}),e.jsx("h6",{children:o("assign_role_to_moderator")}),e.jsxs("button",{className:V.select_btn,onClick:F,children:[(r==null?void 0:r.length)??""," "," ",o("select")]})]}),e.jsx(Y,{customStyle:{width:"100%"}}),d==null?void 0:d.map((j,b)=>{var I,w;return(d==null?void 0:d.length)===b+1?e.jsxs("div",{className:r!=null&&r.includes(j==null?void 0:j._id)?`${V.application_card} ${V.application_card_active}`:V.application_card,ref:c,onClick:()=>C(j),children:[e.jsx("img",{src:"/images/admision-application-icon.svg",alt:"application icon"}),e.jsxs("section",{className:V.application_card_text,children:[e.jsx("h6",{children:(j==null?void 0:j.applicationName)??""}),e.jsxs("div",{className:V.application_card_text_bottom,children:[e.jsx("p",{children:((I=j==null?void 0:j.applicationDepartment)==null?void 0:I.dName)??""}),j!=null&&j.applicationEndDate?e.jsx("p",{children:te(j==null?void 0:j.applicationEndDate).format("DD/MM/yyyy")}):""]})]})]},j==null?void 0:j._id):e.jsxs("div",{className:r!=null&&r.includes(j==null?void 0:j._id)?`${V.application_card} ${V.application_card_active}`:V.application_card,onClick:()=>C(j),children:[e.jsx("img",{src:"/images/admision-application-icon.svg",alt:"application icon"}),e.jsxs("section",{className:V.application_card_text,children:[e.jsx("h6",{children:(j==null?void 0:j.applicationName)??""}),e.jsxs("div",{className:V.application_card_text_bottom,children:[e.jsx("p",{children:((w=j==null?void 0:j.applicationDepartment)==null?void 0:w.dName)??""}),j!=null&&j.applicationEndDate?e.jsx("p",{children:te(j==null?void 0:j.applicationEndDate).format("DD/MM/yyyy")}):""]})]})]},j==null?void 0:j._id)}),v&&e.jsx(H,{})]})})},Cs=({instituteId:s,hid:t,onClose:n,onRefetchWhenAdd:r,openModeratorMenu:h,openAs:u,onEdit:_})=>{var w;const{t:o}=J(),[a,f]=i.useState(u==="EDIT"?"PREVIEW_FORM":"OPEN_STAFF_LIST"),[m,N]=i.useState(u==="EDIT"?h==null?void 0:h.access_staff:""),[c,y]=i.useState({mod_role:u==="EDIT"?h==null?void 0:h.access_role:"",sid:u==="EDIT"?(w=h==null?void 0:h.access_staff)==null?void 0:w._id:"",app_array:[],one_tab:""}),[d,x]=i.useState(u==="EDIT"?h==null?void 0:h.access_application:[]),[v,T]=i.useState([]),[E]=Ys();i.useEffect(()=>{var k;if(u==="EDIT"){N(h==null?void 0:h.access_staff),x(h==null?void 0:h.access_application);let g=[];for(let P of h==null?void 0:h.access_application)g.push(P==null?void 0:P._id);T(g),y({mod_role:h==null?void 0:h.access_role,sid:(k=h==null?void 0:h.access_staff)==null?void 0:k._id,app_array:g}),f("PREVIEW_FORM")}},[u]);const S=k=>{N(k),y(g=>({...g,sid:k==null?void 0:k._id})),f(u==="EDIT"?"PREVIEW_FORM":"ASSIGN_ROLE")},l=()=>{f("OPEN_STAFF_LIST")},C=k=>{y(g=>({...g,mod_role:k==="Fee receipt authority"?"ALL_FEE_ACCESS":k==="Application Manager"?"MULTI_APP_ACCESS":k==="Renewal Manager"?"RENEWAL_UNIT_ACCESS":k==="Deposit Moderator"?"DEPOSIT_ACCESS":k==="Pending Fee Manager"?"PENDING_FEE_ACCESS":k==="Complaint Moderator"?"COMPAINT_ACCESS":k==="Fee Structure Moderator"?"FEE_MASTER_ACCESS":k==="Rules and Announcement Moderator"?"RULES_AND_ANNOUNCEMENT_ACCESS":k==="Income and Expense Moderator"?"INCOME_AND_EXPENSE_ACCESS":k==="Tab Authority"?"ONE_TAB_ACCESS":k==="Data Export Authority"?"DATA_EXPORT_ACCESS":""}))},F=k=>{y(g=>({...g,one_tab:k}))},j=()=>{f("LOADING"),E({hid:t,active_tab:c.one_tab,addModerator:(c==null?void 0:c.mod_role)==="MULTI_APP_ACCESS"||(c==null?void 0:c.mod_role)==="ONE_TAB_ACCESS"?{mod_role:c.mod_role,sid:c.sid,app_array:v}:c}).then(()=>{r(),f(""),n()}).catch({})},b=()=>{_(c,v),n()},I=()=>{n()};return e.jsxs(e.Fragment,{children:[a==="OPEN_STAFF_LIST"&&e.jsx(kt,{assignHead:a==="OPEN_STAFF_LIST",headSelect:S,title:o("staff_list"),onClose:n,instituteId:s,viewAs:"ADMISSION_ADMIN"}),a==="ASSIGN_ROLE"&&e.jsx(e.Fragment,{children:e.jsx(ie,{onClose:l,children:e.jsxs("div",{className:V.assign_role_container,children:[e.jsxs("section",{className:V.assign_role_title,children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:l,alt:"back icon"}),e.jsx("h6",{children:o("assign_role_to_moderator")})]}),e.jsx(Y,{customStyle:{width:"100%"}}),e.jsxs("section",{className:V.selected_staff_container,children:[e.jsx("img",{src:m!=null&&m.staffProfilePhoto?`${ne}/${m==null?void 0:m.staffProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),e.jsxs("div",{className:V.selected_staff_text,children:[e.jsx("h6",{children:`${m==null?void 0:m.staffFirstName} ${(m==null?void 0:m.staffMiddleName)??""} ${m==null?void 0:m.staffLastName}`}),e.jsxs("p",{children:[o("index_number"),m==null?void 0:m.staffROLLNO]})]})]}),e.jsxs("section",{style:{padding:"0.8rem"},children:[e.jsx(ve,{selectLabel:o("select_role_of_moderator"),selectedValue:o("please_select_role"),options:["Fee receipt authority","Application Manager","Renewal Manager","Deposit Moderator","Pending Fee Manager","Complaint Moderator","Fee Structure Moderator","Rules and Announcement Moderator","Income and Expense Moderator","Tab Authority","Data Export Authority"],value:(c==null?void 0:c.mod_role)==="ALL_FEE_ACCESS"?"Fee receipt authority":(c==null?void 0:c.mod_role)==="MULTI_APP_ACCESS"?"Application Manager":(c==null?void 0:c.mod_role)==="RENEWAL_UNIT_ACCESS"?"Renewal Manager":(c==null?void 0:c.mod_role)==="DEPOSIT_ACCESS"?"Deposit Moderator":(c==null?void 0:c.mod_role)==="COMPAINT_ACCESS"?"Complaint Moderator":(c==null?void 0:c.mod_role)==="PENDING_FEE_ACCESS"?"Pending Fee Manager":(c==null?void 0:c.mod_role)==="FEE_MASTER_ACCESS"?"Fee Structure Moderator":(c==null?void 0:c.mod_role)==="RULES_AND_ANNOUNCEMENT_ACCESS"?"Rules and Announcement Moderator":(c==null?void 0:c.mod_role)==="INCOME_AND_EXPENSE_ACCESS"?"Income and Expense Moderator":(c==null?void 0:c.mod_role)==="ONE_TAB_ACCESS"?"Tab Authority":(c==null?void 0:c.mod_role)==="DATA_EXPORT_ACCESS"?"Data Export Authority":"",onClick:C}),c.mod_role==="ONE_TAB_ACCESS"&&e.jsx(ve,{selectLabel:o("select_tab_role"),selectedValue:o("please_select_role"),options:["Application","Selected","Confirmed","Allotted","Cancelled"],value:c==null?void 0:c.one_tab,onClick:F}),c.mod_role==="MULTI_APP_ACCESS"?e.jsxs("button",{className:V.select_application_btn,onClick:()=>f("SELECT_APPLICATION"),children:[e.jsx("div",{children:o("moderator_select_application")}),e.jsx("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]}):e.jsxs("button",{className:V.assign_btn,onClick:j,children:[o("assign")," "]})]})]})})}),a==="SELECT_APPLICATION"&&e.jsx(Qt,{hid:t,setActivePopup:f,setSelectedApplication:x,selectedApplication:d,setSelectedApplicationId:T,selectedApplicationId:v,openAs:u,role:c.mod_role}),a==="MODERATOR_PREWVIEW"&&e.jsx(Gt,{setActivePopup:f,selectedApplication:d,selectedStaff:m,moderatorState:c,onAssignModerator:j}),a==="PREVIEW_FORM"&&e.jsx(Yt,{onCloseEdit:I,setActivePopup:f,selectedStaff:m,moderatorState:c,onSelectRole:C,onUpdateModerator:b,selectedApplication:d}),a==="LOADING"&&e.jsx(K,{})]})},Xt=({onClose:s,hid:t,onRefetch:n,openModeratorMenu:r,instituteId:h})=>{const[u,_]=i.useState(!1),[o,a]=i.useState(!1),[f]=Qs(),[m]=Xs(),N=()=>{_(y=>!y),f({hid:t,modId:r==null?void 0:r._id}).then(()=>{n(),s(),_(y=>!y)}).catch({})},c=(y,d)=>{_(x=>!x),a(!1),m({modId:r==null?void 0:r._id,active_tab:y==null?void 0:y.one_tab,updateModerator:{role:y==null?void 0:y.mod_role,staffId:y==null?void 0:y.sid,app_array:(y==null?void 0:y.mod_role)==="MULTI_APP_ACCESS"||(y==null?void 0:y.mod_role)==="MULTI_APP_ACCESS"?d:[]}}).then(()=>{n(),_(x=>!x),s()}).catch({})};return e.jsx(e.Fragment,{children:o?e.jsx(Cs,{onClose:()=>a(!1),hid:t,instituteId:h,onRefetch:n,openAs:"EDIT",openModeratorMenu:r,onEdit:c}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{onClose:s}),e.jsxs(Le,{customStyle:{zIndex:"1200"},children:[e.jsxs("div",{className:me.edit_modal_container,style:{width:"200px"},children:[e.jsx("h6",{className:me.edit,onClick:()=>a(y=>!y),children:"Edit"}),e.jsx("h6",{className:me.remove,onClick:N,children:"Delete"})]}),u&&e.jsx(K,{})]})]})})},is=({moderator:s,setOpenModeratorMenu:t})=>{var r,h,u,_,o,a,f,m,N,c;const{t:n}=J();return e.jsxs("div",{className:V.moderator_card,children:[e.jsx("img",{src:(r=s==null?void 0:s.access_staff)!=null&&r.staffProfilePhoto?`${ne}/${(h=s==null?void 0:s.access_staff)==null?void 0:h.staffProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"moderator avatar"}),e.jsxs("section",{className:V.moderator_card_text_container,children:[e.jsx("h6",{children:`${(u=s==null?void 0:s.access_staff)==null?void 0:u.staffFirstName} ${((_=s==null?void 0:s.access_staff)==null?void 0:_.staffMiddleName)??""} ${(o=s==null?void 0:s.access_staff)==null?void 0:o.staffLastName}`}),e.jsxs("p",{children:[n("index_number"),(a=s==null?void 0:s.access_staff)==null?void 0:a.staffROLLNO]}),e.jsx("p",{children:(s==null?void 0:s.access_role)==="ALL_FEE_ACCESS"?"Fee receipt authority":(s==null?void 0:s.access_role)==="MULTI_APP_ACCESS"?"Application Manager":(s==null?void 0:s.access_role)==="RENEWAL_UNIT_ACCESS"?"Renewal Manager":(s==null?void 0:s.access_role)==="DEPOSIT_ACCESS"?"Deposit Moderator":(s==null?void 0:s.access_role)==="PENDING_FEE_ACCESS"?"Pending Fee Manager":(s==null?void 0:s.access_role)==="COMPAINT_ACCESS"?"Complaint Moderator":(s==null?void 0:s.access_role)==="FEE_MASTER_ACCESS"?"Fee Structure Moderator":(s==null?void 0:s.access_role)==="RULES_AND_ANNOUNCEMENT_ACCESS"?"Rules and Announcement Moderator":(s==null?void 0:s.access_role)==="INCOME_AND_EXPENSE_ACCESS"?"Income and Expense Moderator":(s==null?void 0:s.access_role)==="ONE_TAB_ACCESS"?((f=s==null?void 0:s.active_tab)==null?void 0:f.role)==="Application"?"Hostel Application Tab":((m=s==null?void 0:s.active_tab)==null?void 0:m.role)==="Selected"?"Hostel Selected Tab":((N=s==null?void 0:s.active_tab)==null?void 0:N.role)==="Confirmed"?"Hostel Confirmed Tab":((c=s==null?void 0:s.active_tab)==null?void 0:c.role)==="Allotted"?"Hostel Allotted Tab":"Hostel Cancelled Tab":(s==null?void 0:s.access_role)==="DATA_EXPORT_ACCESS"?"Data Export Authority":""})]}),e.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:()=>t(s),className:V.menu_icon,title:"Menu"})]})},jo=({instituteId:s,hid:t})=>{const{t:n}=J(),r=re(),[h,u]=i.useState(!1),[_,o]=i.useState(""),[a,f]=ee(),[m,N]=i.useState(1),[c,y]=i.useState(!0),[d,x]=i.useState(!1),[v,T]=i.useState(!0),[E,S]=i.useState([]),{getModeratorByHostel:l,getModeratorByHostelRefetch:C}=zs({data:{hid:t,page:m,limit:10},skip:!t});i.useEffect(()=>{t&&(T(!0),C())},[t,m,C]),i.useEffect(()=>{f&&c&&N(b=>b+1)},[f,c]),i.useEffect(()=>{var b,I;d?(S(l==null?void 0:l.all_mods),x(!1),T(!1)):l!=null&&l.all_mods?(S(w=>[...new Set([...w,...l==null?void 0:l.all_mods].map(JSON.stringify))].map(JSON.parse)),T(!1)):((b=l==null?void 0:l.all_mods)==null?void 0:b.length)===0&&T(!1),((I=l==null?void 0:l.all_mods)==null?void 0:I.length)===10?y(!0):y(!1)},[l==null?void 0:l.all_mods]);const F=()=>{r(-1)},j=()=>{x(!0),N(1),T(!0),C()};return e.jsxs("div",{className:V.moderator_container,style:{marginTop:"0"},children:[e.jsxs("section",{className:V.moderator_container_title,children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:F,alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),e.jsx("h6",{children:n("hostel_moderators")})]}),e.jsx(Y,{customStyle:{width:"100%"}}),e.jsx("h6",{className:V.add_new_moderator,onClick:()=>u(!0),children:n("add_new_moderator")}),e.jsxs("div",{className:V.refund_list,children:[E==null?void 0:E.map((b,I)=>(E==null?void 0:E.length)===I+1?e.jsx("div",{ref:a,children:e.jsx(is,{moderator:b,setOpenModeratorMenu:o})},b==null?void 0:b._id):e.jsx(is,{moderator:b,setOpenModeratorMenu:o},b==null?void 0:b._id)),h&&e.jsx(Cs,{onClose:()=>u(b=>!b),instituteId:s,hid:t,onRefetchWhenAdd:j}),_&&e.jsx(Xt,{hid:t,instituteId:s,onRefetch:j,onClose:()=>o(""),openModeratorMenu:_}),v&&e.jsx(H,{})]})]})},zt=({onEdit:s,xlsxId:t})=>{const{t:n}=J(),[r,h]=i.useState((t==null?void 0:t.excel_file_name)??""),[u,_]=i.useState("");i.useEffect(()=>{h((t==null?void 0:t.excel_file_name)??"")},[t==null?void 0:t.excel_file_name]);const o=()=>{r?s(r):_({excelName:"excelName is required"})};return e.jsxs("div",{style:{width:"30rem",minHeight:"10rem",padding:"1rem"},children:[e.jsx("h6",{children:n("update_excel_name")}),e.jsx(Y,{customStyle:{width:"100%"}}),e.jsx(se,{labelText:n("excel_name"),placeholder:n("excel_name_plcaeholder"),value:r,name:"excelName",type:"text",onChange:a=>h(a.target.value),errorShow:u.excelName}),e.jsx("button",{className:me.xlsx_update_btn,title:"Add fees head",onClick:o,style:{justifyContent:"center",marginTop:"1rem"},children:n("update")})]})},Kt=({onClose:s,xlsxId:t,onRefetch:n,hostelId:r})=>{const[h,u]=i.useState(!1),[_,o]=i.useState(!1),[a]=Ks(),[f]=Hs(),m=()=>{u(c=>!c),f({hid:r,xlsxId:t==null?void 0:t._id}).then(()=>{n(),s(),u(c=>!c)}).catch({})},N=c=>{u(y=>!y),a({hid:r,xlsxId:t==null?void 0:t._id,excelUpdate:{excel_file_name:c}}).then(()=>{n(),u(y=>!y),s()}).catch({})};return e.jsxs(e.Fragment,{children:[e.jsx(Ae,{onClose:s}),e.jsxs(Le,{customStyle:{zIndex:"1200"},children:[_?e.jsx(zt,{xlsxId:t,onEdit:N}):e.jsxs("div",{className:me.edit_modal_container,style:{width:"200px"},children:[e.jsx("h6",{className:me.edit,onClick:()=>o(c=>!c),children:"Edit"}),e.jsx("h6",{className:me.remove,onClick:m,children:"Delete"})]}),h&&e.jsx(K,{})]})]})},Ht=({hostelId:s,financeId:t,onClose:n,viewAs:r,onRefetch:h})=>{const{t:u}=J(),[_,o]=i.useState(!1),[a,f]=i.useState({depart:"",fee_struct:""}),[m,N]=i.useState({gender:"",caste:"",is_all:""}),{getHostelUnitList:c,getHostelUnitListRefetch:y}=Zs({data:{hid:s,page:1,limit:1e3,search:""},skip:!s}),{getAllFeesCategory:d,getAllFeesCategoryRefetch:x}=Tt({fid:t,skip:!t}),[v]=ps();i.useEffect(()=>{s&&y()},[s,y]),i.useEffect(()=>{t&&x()},[t,x]);const T=j=>{f(b=>({...b,depart:j}))},E=j=>{N(b=>({...b,gender:j}))},S=j=>{N(b=>({...b,caste:j}))},l=j=>{f(b=>({...b,fee_struct:j}))},C=j=>{N(b=>({...b,is_all:j==="All Time Fees"}))},F=()=>{o(j=>!j),v({hid:s,...m,all_depart:a.depart==="All"?"All":"Particular",pendingData:{depart:a.depart==="All"?"":a.depart,fee_struct:a.depart==="All"?"":a.fee_struct}}).then(()=>{r==="EXPORT"&&(h(),n()),o(j=>!j)}).catch({})};return e.jsxs(ie,{onClose:n,children:[e.jsxs("div",{className:$e.filter_container,children:[e.jsx("h6",{className:$e.filter_title,children:u("filter_and_export_fees_data")}),e.jsx(ge,{selectLabel:u("select_unit"),selectedValue:u("all_select_particular_department"),options:c!=null&&c.all_units?["All",...c==null?void 0:c.all_units]:["All"],onClick:T}),e.jsx(ge,{selectLabel:u("select_gender"),selectedValue:u("select_gender_placeholder"),options:["Male","Female","Other"],onClick:E}),e.jsx(ge,{selectLabel:u("select_caste_catgory"),selectedValue:u("select_caste_catgory_placeholder"),options:wt,onClick:S}),e.jsx(ge,{selectLabel:u("select_fee_category"),selectedValue:u("select_fee_category_placeholder"),options:d!=null&&d.all_fees_format?[...d==null?void 0:d.all_fees_format]:[],onClick:l}),e.jsx(ge,{selectLabel:u("select_all_or_pending"),selectedValue:u("select_all_or_pending_placeholder"),options:["All Time Fees","Pending Fees"],onClick:C}),e.jsx("button",{className:$e.next_btn,onClick:F,children:u("export_data")})]}),_&&e.jsx(K,{})]})},go=({hostelId:s,instituteId:t})=>{const{t:n}=J(),r=re(),[h,u]=ee(),[_,o]=i.useState(1),[a,f]=i.useState(!0),[m,N]=i.useState(!1),[c,y]=i.useState(!0),[d,x]=i.useState([]),[v,T]=i.useState(!1),[E,S]=i.useState(!1),{getAllExcelByHostelManager:l,getAllExcelByHostelManagerRefetch:C}=et({data:{hid:s,page:_,limit:10},skip:!s}),{scrollToTop:F}=hs();i.useEffect(()=>{F()},[]),i.useEffect(()=>{s&&(y(!0),C())},[s,_,C]),i.useEffect(()=>{u&&a&&o(w=>w+1)},[u,a]),i.useEffect(()=>{var w,k;m?(x(l==null?void 0:l.all_excel),N(!1),y(!1)):l!=null&&l.all_excel?(x(g=>[...new Set([...g,...l==null?void 0:l.all_excel].map(JSON.stringify))].map(JSON.parse)),y(!1)):((w=l==null?void 0:l.all_excel)==null?void 0:w.length)===0&&y(!1),((k=l==null?void 0:l.all_excel)==null?void 0:k.length)===10?f(!0):f(!1)},[l==null?void 0:l.all_excel]);const j=()=>{r(-1)},b=()=>{T(w=>!w)},I=()=>{o(1),C(),N(!0)};return e.jsxs("div",{className:oe.refund_container,style:{marginTop:"0"},children:[e.jsxs("section",{className:oe.refund_container_title,children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:j,alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),e.jsxs("div",{className:oe.refund_container_title,style:{justifyContent:"space-between",width:"95%"},children:[e.jsx("h6",{children:n("data_export")}),e.jsx("img",{src:"/images/export-filter-icon.svg",alt:"",onClick:b,className:oe.admission_filter_icon})]})]}),e.jsx(Y,{customStyle:{width:"100%"}}),e.jsxs("div",{className:oe.refund_list,children:[d==null?void 0:d.map((w,k)=>(d==null?void 0:d.length)===k+1?e.jsxs("a",{ref:h,className:oe.export_card,title:"Download File",href:`https://d3dqpu54js2vfl.cloudfront.net/${w==null?void 0:w.excel_file}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx("img",{src:"/images/export-xsxl-icon.svg",alt:""}),e.jsxs("section",{className:oe.export_card_text,children:[e.jsx("h6",{children:(w==null?void 0:w.excel_file_name)??""}),e.jsxs("div",{className:oe.export_card_date,children:[e.jsx("h6",{children:te(w==null?void 0:w.created_at).format("DD MMM yyy")}),e.jsx("h6",{children:te(w==null?void 0:w.created_at).format("LT")})]})]}),e.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:g=>{g.preventDefault(),S(w)},className:oe.menu_icon,title:"Menu"})]},w==null?void 0:w._id):e.jsxs("a",{className:oe.export_card,title:"Download File",href:`https://d3dqpu54js2vfl.cloudfront.net/${w==null?void 0:w.excel_file}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx("img",{src:"/images/export-xsxl-icon.svg",alt:""}),e.jsxs("section",{className:oe.export_card_text,children:[e.jsx("h6",{children:(w==null?void 0:w.excel_file_name)??""}),e.jsxs("div",{className:oe.export_card_date,children:[e.jsx("h6",{children:te(w==null?void 0:w.created_at).format("DD MMM yyy")}),e.jsx("h6",{children:te(w==null?void 0:w.created_at).format("LT")})]})]}),e.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:g=>{g.preventDefault(),S(w)},className:oe.menu_icon,title:"Menu"})]},w==null?void 0:w._id)),c&&e.jsx(H,{}),v&&e.jsx(Ht,{hostelId:s,financeId:t,onClose:b,viewAs:"EXPORT",onRefetch:I}),E&&e.jsx(Kt,{xlsxId:E,onClose:()=>S(""),onRefetch:I,hostelId:s})]})]})},No=({hid:s})=>{var y;const[t,n]=i.useState(""),{t:r}=J(),[h,u]=i.useState(!1),[_]=st(),{getHostelForm:o,getHostelFormRefetch:a}=tt({hid:s,skip:!s}),[f,m]=i.useState({otherPersonalInfo:!1,enrollmentPrn:!1,identityDetails:!1,addressInfo:!1,parentsInfo:!1,previousSchoolAndDocument:{previousSchoolDocument:!1,aadharCard:!1,identityDocument:!1,casteCertificate:!1,joiningTransferLetter:!1,leavingTransferCertificate:!1,incomeCertificate:!1,lastYearMarksheet:!1,nationalityCertificate:!1,domicileCertificate:!1,nonCreamyLayerCertificate:!1},bankDetails:!1,cpi:!1,ug_undertakings_hostel_admission:!1,pg_undertakings_hostel_admission:!1});i.useEffect(()=>{s&&a()},[s,a]),i.useEffect(()=>{var d,x,v,T,E,S,l,C,F,j,b,I,w,k,g,P,A,O,q,U,R,$,M,B,L,W,G,Z,ae,xe,Se,Ce,p,Pe,Me,Ve,Be,Je,We,Ge,Ye,Qe,Xe,ze,Ke,He,Ze,pe,es,ss;(d=o==null?void 0:o.one_hostel)!=null&&d.student_form_query&&m({otherPersonalInfo:(v=(x=o==null?void 0:o.one_hostel)==null?void 0:x.student_form_query)==null?void 0:v.otherPersonalInfo,enrollmentPrn:(E=(T=o==null?void 0:o.one_hostel)==null?void 0:T.student_form_query)==null?void 0:E.enrollmentPrn,identityDetails:(l=(S=o==null?void 0:o.one_hostel)==null?void 0:S.student_form_query)==null?void 0:l.identityDetails,addressInfo:(F=(C=o==null?void 0:o.one_hostel)==null?void 0:C.student_form_query)==null?void 0:F.addressInfo,parentsInfo:(b=(j=o==null?void 0:o.one_hostel)==null?void 0:j.student_form_query)==null?void 0:b.parentsInfo,previousSchoolAndDocument:{previousSchoolDocument:(k=(w=(I=o==null?void 0:o.one_hostel)==null?void 0:I.student_form_query)==null?void 0:w.previousSchoolAndDocument)==null?void 0:k.previousSchoolDocument,aadharCard:(A=(P=(g=o==null?void 0:o.one_hostel)==null?void 0:g.student_form_query)==null?void 0:P.previousSchoolAndDocument)==null?void 0:A.aadharCard,identityDocument:(U=(q=(O=o==null?void 0:o.one_hostel)==null?void 0:O.student_form_query)==null?void 0:q.previousSchoolAndDocument)==null?void 0:U.identityDocument,casteCertificate:(M=($=(R=o==null?void 0:o.one_hostel)==null?void 0:R.student_form_query)==null?void 0:$.previousSchoolAndDocument)==null?void 0:M.casteCertificate,joiningTransferLetter:(W=(L=(B=o==null?void 0:o.one_hostel)==null?void 0:B.student_form_query)==null?void 0:L.previousSchoolAndDocument)==null?void 0:W.joiningTransferLetter,leavingTransferCertificate:(ae=(Z=(G=o==null?void 0:o.one_hostel)==null?void 0:G.student_form_query)==null?void 0:Z.previousSchoolAndDocument)==null?void 0:ae.leavingTransferCertificate,incomeCertificate:(Ce=(Se=(xe=o==null?void 0:o.one_hostel)==null?void 0:xe.student_form_query)==null?void 0:Se.previousSchoolAndDocument)==null?void 0:Ce.incomeCertificate,lastYearMarksheet:(Me=(Pe=(p=o==null?void 0:o.one_hostel)==null?void 0:p.student_form_query)==null?void 0:Pe.previousSchoolAndDocument)==null?void 0:Me.lastYearMarksheet,nationalityCertificate:(Je=(Be=(Ve=o==null?void 0:o.one_hostel)==null?void 0:Ve.student_form_query)==null?void 0:Be.previousSchoolAndDocument)==null?void 0:Je.nationalityCertificate,domicileCertificate:(Ye=(Ge=(We=o==null?void 0:o.one_hostel)==null?void 0:We.student_form_query)==null?void 0:Ge.previousSchoolAndDocument)==null?void 0:Ye.domicileCertificate,nonCreamyLayerCertificate:(ze=(Xe=(Qe=o==null?void 0:o.one_hostel)==null?void 0:Qe.student_form_query)==null?void 0:Xe.previousSchoolAndDocument)==null?void 0:ze.nonCreamyLayerCertificate},bankDetails:(He=(Ke=o==null?void 0:o.one_hostel)==null?void 0:Ke.student_form_query)==null?void 0:He.bankDetails,cpi:(pe=(Ze=o==null?void 0:o.one_hostel)==null?void 0:Ze.student_form_query)==null?void 0:pe.cpi,ug_undertakings_hostel_admission:(es=o==null?void 0:o.one_hostel)==null?void 0:es.ug_undertakings_hostel_admission,pg_undertakings_hostel_admission:(ss=o==null?void 0:o.one_hostel)==null?void 0:ss.pg_undertakings_hostel_admission})},[(y=o==null?void 0:o.one_hostel)==null?void 0:y.student_form_query]);const N=(d,x)=>{const v={...f};for(let T in v)T===d&&(v[T]=x);_({hid:s,formSetting:{student_form_query:v,ug_undertakings_hostel_admission:v.ug_undertakings_hostel_admission,pg_undertakings_hostel_admission:v.pg_undertakings_hostel_admission}}).then(()=>{n("Add joining details updated"),u(!0)}).catch({}),m(T=>({...T,[d]:x}))},c=(d,x)=>{const v={...f};d==="previousSchoolDocument"&&!x&&(v.previousSchoolAndDocument.aadharCard=!1,v.previousSchoolAndDocument.casteCertificate=!1,v.previousSchoolAndDocument.domicileCertificate=!1,v.previousSchoolAndDocument.identityDocument=!1,v.previousSchoolAndDocument.incomeCertificate=!1,v.previousSchoolAndDocument.joiningTransferLetter=!1,v.previousSchoolAndDocument.lastYearMarksheet=!1,v.previousSchoolAndDocument.leavingTransferCertificate=!1,v.previousSchoolAndDocument.nationalityCertificate=!1,v.previousSchoolAndDocument.nonCreamyLayerCertificate=!1);for(let T in v.previousSchoolAndDocument)T===d&&(v.previousSchoolAndDocument[T]=x);_({hid:s,formSetting:{student_form_query:v}}).then(()=>{n("Add joining details updated"),u(!0)}).catch({}),m(T=>({...T,previousSchoolAndDocument:{...T.previousSchoolAndDocument,[d]:x}}))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:X.with_search,children:e.jsx("h6",{children:r("hostel_form_setting")})}),e.jsx(Y,{customStyle:{marginTop:"0.5rem",marginBottom:"0.6rem",width:"100%"}}),e.jsxs("div",{className:X.staff_form_container,children:[e.jsx(_e,{labelHeading:r("personal_info_"),labelDescription:r("name_"),defaultLabel:!0}),e.jsx(Y,{}),e.jsx(_e,{labelHeading:r("enrollment_number"),labelDescription:r("enrollment_label_text"),defaultLabel:!1,checkedToggle:f.enrollmentPrn,onToggleHandler:d=>N("enrollmentPrn",d.target.checked)}),e.jsx(Y,{}),e.jsx(_e,{labelHeading:r("other_info"),labelDescription:r("label_text"),defaultLabel:!1,checkedToggle:f.otherPersonalInfo,onToggleHandler:d=>N("otherPersonalInfo",d.target.checked)}),e.jsx(Y,{}),e.jsx(_e,{labelHeading:r("i_details"),labelDescription:r("labeltext2"),defaultLabel:!1,checkedToggle:f.identityDetails,onToggleHandler:d=>N("identityDetails",d.target.checked)}),e.jsx(Y,{}),e.jsx(_e,{labelHeading:r("add_info"),labelDescription:r("labeltext3"),defaultLabel:!1,checkedToggle:f.addressInfo,onToggleHandler:d=>N("addressInfo",d.target.checked)}),e.jsx(Y,{}),e.jsx(_e,{labelHeading:r("parent_info_"),labelDescription:r("label_text2"),defaultLabel:!1,checkedToggle:f.parentsInfo,onToggleHandler:d=>N("parentsInfo",d.target.checked)}),e.jsx(Y,{}),e.jsxs(_e,{labelHeading:r("prev_school_"),labelDescription:"",defaultLabel:!1,checkedToggle:f.previousSchoolAndDocument.previousSchoolDocument,onToggleHandler:d=>c("previousSchoolDocument",d.target.checked),children:[e.jsx(he,{checkLabel:r("aadhar_card"),checkedValue:f.previousSchoolAndDocument.aadharCard,onCheckboxAction:d=>c("aadharCard",d.target.checked)}),e.jsx(he,{checkLabel:r("labeltext4"),checkedValue:f.previousSchoolAndDocument.identityDocument,onCheckboxAction:d=>c("identityDocument",d.target.checked)}),e.jsx(he,{checkLabel:r("castee_"),checkedValue:f.previousSchoolAndDocument.casteCertificate,onCheckboxAction:d=>c("casteCertificate",d.target.checked)}),e.jsx(he,{checkLabel:r("joining_letter"),checkedValue:f.previousSchoolAndDocument.joiningTransferLetter,onCheckboxAction:d=>c("joiningTransferLetter",d.target.checked)}),e.jsx(he,{checkLabel:r("certificates"),checkedValue:f.previousSchoolAndDocument.leavingTransferCertificate,onCheckboxAction:d=>c("leavingTransferCertificate",d.target.checked)}),e.jsx(he,{checkLabel:r("i_certificate"),checkedValue:f.previousSchoolAndDocument.incomeCertificate,onCheckboxAction:d=>c("incomeCertificate",d.target.checked)}),e.jsx(he,{checkLabel:r("marksheet"),checkedValue:f.previousSchoolAndDocument.lastYearMarksheet,onCheckboxAction:d=>c("lastYearMarksheet",d.target.checked)}),e.jsx(he,{checkLabel:r("n_certificate"),checkedValue:f.previousSchoolAndDocument.nationalityCertificate,onCheckboxAction:d=>c("nationalityCertificate",d.target.checked)}),e.jsx(he,{checkLabel:r("d_certificate"),checkedValue:f.previousSchoolAndDocument.domicileCertificate,onCheckboxAction:d=>c("domicileCertificate",d.target.checked)}),e.jsx(he,{checkLabel:r("non_cremy"),checkedValue:f.previousSchoolAndDocument.nonCreamyLayerCertificate,onCheckboxAction:d=>c("nonCreamyLayerCertificate",d.target.checked)})]}),e.jsx(Y,{}),e.jsx(_e,{labelHeading:r("bank_details_"),labelDescription:r("labeltext5"),defaultLabel:!1,checkedToggle:f.bankDetails,onToggleHandler:d=>N("bankDetails",d.target.checked)}),e.jsx(Y,{}),e.jsx(_e,{labelHeading:r("hostel_cpi"),labelDescription:r("hostel_cpi_text"),defaultLabel:!1,checkedToggle:f.cpi,onToggleHandler:d=>N("cpi",d.target.checked)}),e.jsx(Y,{}),e.jsx(_e,{labelHeading:r("turn_off_on_ug_hostel_undertakings"),labelDescription:"",defaultLabel:!1,checkedToggle:f.ug_undertakings_hostel_admission,onToggleHandler:d=>N("ug_undertakings_hostel_admission",d.target.checked)}),e.jsx(Y,{}),e.jsx(_e,{labelHeading:r("turn_off_on_pg_hostel_undertakings"),labelDescription:"",defaultLabel:!1,checkedToggle:f.pg_undertakings_hostel_admission,onToggleHandler:d=>N("pg_undertakings_hostel_admission",d.target.checked)}),e.jsx(Y,{})]}),e.jsx(Ee,{run:h,setRun:u,msg:t,postiton:"bottom",type:"success"})]})},Zt="_remainingFeesBottom_180uc_1",pt="_itemsContainer_180uc_5",en="_item_180uc_5",sn="_subItem_180uc_28",tn="_text_180uc_34",le={remainingFeesBottom:Zt,itemsContainer:pt,item:en,subItem:sn,text:tn},cs=({carryParentState:s,accessRole:t,accessTpye:n,callApi:r,pageOpenAs:h,data:u})=>{var o,a;const{t:_}=J();return e.jsx(e.Fragment,{children:h==="INSTITUTE"?e.jsx(De,{carryParentState:{...s,applicationId:u==null?void 0:u._id},activeTab:"request&ongoing&n=application",children:e.jsxs("div",{className:le.item,children:[e.jsxs("div",{className:le.subItem,children:[e.jsx("img",{alt:"Completed App",src:"/images/admision-application-icon.svg"}),e.jsxs("div",{className:le.text,children:[e.jsx("h6",{children:u==null?void 0:u.applicationName}),e.jsx("p",{style:{marginBottom:"0"},children:((o=u==null?void 0:u.applicationUnit)==null?void 0:o.hostel_unit_name)??""})]})]}),e.jsx("div",{className:le.text,children:e.jsxs("div",{className:le.text,children:[e.jsx("h6",{children:u==null?void 0:u.allotCount}),e.jsx("p",{style:{marginBottom:"0"},children:_("alloted")})]})})]})}):e.jsx(be,{carryParentState:{...s,applicationId:u==null?void 0:u._id},activeTab:"request&ongoing&n=application",accessRole:t,accessTpye:n,callApi:r,children:e.jsxs("div",{className:le.item,children:[e.jsxs("div",{className:le.subItem,children:[e.jsx("img",{alt:"Completed App",src:"/images/admision-application-icon.svg"}),e.jsxs("div",{className:le.text,children:[e.jsx("h6",{children:u==null?void 0:u.applicationName}),e.jsx("p",{style:{marginBottom:"0"},children:((a=u==null?void 0:u.applicationUnit)==null?void 0:a.hostel_unit_name)??""})]})]}),e.jsx("div",{className:le.text,children:e.jsxs("div",{className:le.text,children:[e.jsx("h6",{children:u==null?void 0:u.allotCount}),e.jsx("p",{style:{marginBottom:"0"},children:_("alloted")})]})})]})})})},nn=({hid:s,carryParentState:t,accessRole:n,accessApplication:r,accessTpye:h,callApi:u,pageOpenAs:_})=>{const[o,a]=i.useState(!0),[f,m]=i.useState(1),[N,c]=ee(),[y,d]=i.useState(!0),[x,v]=i.useState([]),{scrollToTop:T}=hs(),{getCompletedApplicationList:E,getCompletedApplicationListRefetch:S}=nt({data:{hid:s,page:f,limit:10},skip:!s});return i.useEffect(()=>{T()},[]),i.useEffect(()=>{c&&o&&m(l=>l+1)},[c,o]),i.useEffect(()=>{s&&(d(!0),S())},[f,s,S]),i.useEffect(()=>{var l,C;E!=null&&E.completed?(v(F=>[...new Set([...F,...E==null?void 0:E.completed].map(JSON.stringify))].map(JSON.parse)),d(!1)):((l=E==null?void 0:E.completed)==null?void 0:l.length)===0&&d(!1),((C=E==null?void 0:E.completed)==null?void 0:C.length)===10?a(!0):a(!1)},[E==null?void 0:E.completed]),e.jsx(e.Fragment,{children:e.jsx("div",{className:le.remainingFeesBottom,children:e.jsxs("div",{className:le.itemsContainer,children:[x==null?void 0:x.map((l,C)=>(x==null?void 0:x.length)===C+1?e.jsx("div",{ref:N,children:e.jsx(cs,{data:l,carryParentState:t,accessRole:n,accessTpye:h,callApi:u,accessApplication:r,pageOpenAs:_})},C):e.jsx(cs,{data:l,carryParentState:t,accessRole:n,accessTpye:h,callApi:u,accessApplication:r,pageOpenAs:_},C)),y&&e.jsx(H,{})]})})})};function on({viewDetail:s,hideModal:t,applicationDetail:n,completeApplication:r,carryParentState:h,applicationDetailApplicablePending:u,pageOpenAs:_}){var j,b,I,w,k,g,P,A,O;const{t:o}=J(),a=new Date,f=re(),m=ue(),[N,c]=i.useState(!1),[y,d]=i.useState({msg:"",run:!1}),[x,v]=i.useState(!1),[T,E]=i.useState((j=a.toISOString())==null?void 0:j.substring(0,10)),[S]=ot(),{getDailyCollectionByAdmission:l,getDailyCollectionByAdmissionRefetch:C}=Pt({data:{appId:n==null?void 0:n._id,valid_date:T},skip:!(n!=null&&n._id)});i.useEffect(()=>{n!=null&&n._id&&C()},[n==null?void 0:n._id,C,T]);const F=()=>{c(q=>!q),n!=null&&n._id?S({aid:n==null?void 0:n._id}).then(q=>{var U;(U=q==null?void 0:q.data)!=null&&U.complete_status?(c(R=>!R),t(!1),_==="INSTITUTE"?f(`/q/${m.username}/hostel`,{state:{...h}}):f(`/q/${m.username}/member/hostel`,{state:{...h}})):(d({msg:q==null?void 0:q.data.message,run:!0}),c(R=>!R))}).catch({}):c(q=>!q)};return e.jsxs(us,{open:s,onClose:()=>t(!1),children:[e.jsxs("div",{className:Q.addDisplay,children:[e.jsxs("div",{className:Q.title,children:[e.jsx("div",{}),e.jsx("h6",{style:{cursor:"pointer"},onClick:()=>v(q=>!q),children:n==null?void 0:n.applicationName}),e.jsx("img",{src:"/images/close-post-icon.svg",onClick:()=>t(!1),alt:""})]}),e.jsxs("div",{className:Q.content,children:[e.jsx("div",{style:{padding:"1rem"},children:e.jsx(At,{setValidDate:E})}),r&&!x&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:Q.content2,children:[e.jsxs("div",{className:Q.appinforow,children:[e.jsx("h6",{children:o("total_received_application")}),e.jsx("h6",{children:((b=l==null?void 0:l.day_wise)==null?void 0:b.request_count)??0})]}),e.jsxs("div",{className:Q.appinforow,children:[e.jsx("h6",{children:o("total_selected_application")}),e.jsx("h6",{children:((I=l==null?void 0:l.day_wise)==null?void 0:I.select_count)??0})]}),e.jsxs("div",{className:Q.appinforow,children:[e.jsx("h6",{children:o("total_confirmed_application")}),e.jsx("h6",{children:((w=l==null?void 0:l.day_wise)==null?void 0:w.confirm_count)??0})]}),e.jsxs("div",{className:Q.appinforow,children:[e.jsx("h6",{children:o("total_alloted_application")}),e.jsxs("h6",{children:[" ",((k=l==null?void 0:l.day_wise)==null?void 0:k.allot_count)??0]})]}),e.jsxs("div",{className:Q.appinforow,children:[e.jsx("h6",{children:o("total_cancelled_application")}),e.jsxs("h6",{children:[" ",((g=l==null?void 0:l.day_wise)==null?void 0:g.cancel_count)??0]})]})]}),e.jsxs("div",{className:Q.content3,children:[e.jsxs("div",{className:Q.appinforow1,children:[e.jsx("h6",{children:o("total_fees_received")}),e.jsxs("h6",{children:["Rs. ",((P=l==null?void 0:l.day_wise)==null?void 0:P.paid)??0]})]}),e.jsxs("div",{className:`${Q.appinforow2} ${Q.appinforowred}`,children:[e.jsx("h6",{children:o("total_fees_pending")}),e.jsxs("h6",{children:["Rs. ",((A=l==null?void 0:l.day_wise)==null?void 0:A.remain)??0]})]}),e.jsxs("div",{className:`${Q.appinforow2} ${Q.appinforowred}`,children:[e.jsx("h6",{children:o("total_applicable_fees_pending")}),e.jsxs("h6",{children:["Rs."," ",((O=l==null?void 0:l.day_wise)==null?void 0:O.applicable_pending)??0]})]}),e.jsx("div",{className:Q.completeApplicationcontainer,children:e.jsx("div",{className:Q.completeApplication,onClick:F,children:o("complete_application")})})]})]}),r&&x&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:Q.content2,children:[e.jsxs("div",{className:Q.appinforow,children:[e.jsx("h6",{children:o("total_received_application")}),e.jsx("h6",{children:n==null?void 0:n.receievedCount})]}),e.jsxs("div",{className:Q.appinforow,children:[e.jsx("h6",{children:o("total_selected_application")}),e.jsx("h6",{children:n==null?void 0:n.selectCount})]}),e.jsxs("div",{className:Q.appinforow,children:[e.jsx("h6",{children:o("total_confirmed_application")}),e.jsx("h6",{children:n==null?void 0:n.confirmCount})]}),e.jsxs("div",{className:Q.appinforow,children:[e.jsx("h6",{children:o("total_alloted_application")}),e.jsx("h6",{children:n==null?void 0:n.allotCount})]}),e.jsxs("div",{className:Q.appinforow,children:[e.jsx("h6",{children:o("total_cancelled_application")}),e.jsx("h6",{children:n==null?void 0:n.cancelCount})]})]}),e.jsxs("div",{className:Q.content3,children:[e.jsxs("div",{className:Q.appinforow1,children:[e.jsx("h6",{children:o("total_fees_received")}),e.jsxs("h6",{children:["Rs. ",n==null?void 0:n.collectedFeeCount]})]}),e.jsxs("div",{className:`${Q.appinforow2} ${Q.appinforowred}`,children:[e.jsx("h6",{children:o("total_fees_pending")}),e.jsxs("h6",{children:["Rs. ",n==null?void 0:n.remainingFee]})]}),e.jsxs("div",{className:`${Q.appinforow2} ${Q.appinforowred}`,children:[e.jsx("h6",{children:o("total_applicable_fees_pending")}),e.jsxs("h6",{children:["Rs. ",u??0]})]}),e.jsx("div",{className:Q.completeApplicationcontainer,children:e.jsx("div",{className:Q.completeApplication,onClick:F,children:o("complete_application")})})]})]})]})]}),N&&e.jsx(K,{}),e.jsx(Ee,{msg:y.msg,run:y.run,setRun:()=>d({msg:"",run:!1}),postiton:"bottom",type:"error"})]})}const rn=["Request_Query","Confirm_Query","Allot_Query"],fe=({applicationDetail:s,carryParentState:t,unitName:n,tabStatusFlow:r,applicationDetailApplicablePending:h,pageOpenAs:u,children:_})=>{const o=re(),a=ue(),[f,m]=i.useState(!1),[N,c]=i.useState({msg:"",run:!1}),[y,d]=i.useState(!1),[x]=rt(),v=()=>{u==="INSTITUTE"?o(`/q/${a.username}/hostel?a=request`,{state:{...t}}):o(`/q/${a.username}/member/hostel?a=request`,{state:{...t}})},T=()=>{s!=null&&s._id&&r&&(d(E=>!E),x({appId:s==null?void 0:s._id,flow:r}).then(E=>{var S;c({msg:(S=E==null?void 0:E.data)==null?void 0:S.message,run:!0}),setTimeout(()=>{u==="INSTITUTE"?o(`/q/${a.username}/hostel?a=export`,{state:t}):o(`/q/${a.username}/member/hostel?a=export`,{state:t})},1e3)}).catch({}))};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:X.moderator_container_title,children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:v,alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),e.jsxs("div",{className:X.with_search,children:[e.jsx("h6",{children:(s==null?void 0:s.applicationName)??n??""}),e.jsxs("div",{className:X.search_container_filter,children:[e.jsx("section",{className:X.search_container,children:e.jsxs("div",{className:X.search_container_input,children:[e.jsx("img",{className:X.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),_]})}),!n&&e.jsx("img",{style:{height:"2.2rem",cursor:"pointer"},onClick:()=>m(!0),src:"/images/application_info.svg",alt:""}),rn.includes(r)?e.jsx("img",{style:{height:"2.2rem",cursor:"pointer"},onClick:T,src:"/images/member_tab/finance/finance-export-icon.svg",alt:""}):null]})]})]}),e.jsx(Y,{customStyle:{width:"100%",marginTop:"0.5rem"}}),f&&e.jsx(on,{completeApplication:!0,viewDetail:f,applicationDetail:s,hideModal:m,carryParentState:t,applicationDetailApplicablePending:h,pageOpenAs:u}),y&&e.jsx(K,{}),e.jsx(Ee,{msg:N.msg,run:N.run,setRun:()=>c({msg:"",run:!1}),postiton:"bottom",type:"success"})]})},cn=Os.lazy(()=>$s(()=>Promise.resolve().then(()=>jn),void 0)),ls=({applicant:s,onRefetchWhenSelect:t,applicationId:n,hostelId:r,batchId:h,classMasterId:u})=>{var C,F,j,b,I,w,k,g,P,A,O,q,U,R,$,M;const{t:_}=J(),o=ue(),a=re(),[f,m]=i.useState(!1),[N,c]=i.useState(!1),[y,d]=i.useState(!1),[x]=it(),v=()=>{var B;a(`/q/${o.username}/student/profile`,{state:{sid:(B=s==null?void 0:s.student)==null?void 0:B._id,viewAs:"ADMISSION_ADMIN"}})},T=B=>{B.stopPropagation(),c(!0)},E=B=>{B.stopPropagation(),m(L=>!L)},S=B=>{var L,W;((L=s==null?void 0:s.student)==null?void 0:L._id)!==""&&n!==""&&(d(G=>!G),x({sid:(W=s==null?void 0:s.student)==null?void 0:W._id,aid:n,selectApplicant:B}).then(()=>{t(),d(G=>!G)}).catch(()=>{d(G=>!G)}))},l=B=>{B.stopPropagation()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:D.applicant_card_container,onClick:v,title:"View Profile",children:[e.jsxs("div",{className:D.applicant_card_inner,children:[e.jsx("img",{alt:"Student Request Avatar",src:((C=s==null?void 0:s.student)==null?void 0:C.photoId)!=="1"?`${ne}/${(F=s==null?void 0:s.student)==null?void 0:F.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",loading:"lazy"}),e.jsxs("div",{className:D.applicant_card_inner_info,children:[e.jsx("h6",{children:`${(j=s==null?void 0:s.student)==null?void 0:j.studentFirstName} ${(b=s==null?void 0:s.student)!=null&&b.studentMiddleName?(I=s==null?void 0:s.student)==null?void 0:I.studentMiddleName:""} ${(w=s==null?void 0:s.student)==null?void 0:w.studentLastName}`}),e.jsxs("p",{children:[_("applied_on"),":"," ",te(s==null?void 0:s.apply_on).format("DD MMM yyyy")]})]})]}),e.jsxs("div",{className:D.applicant_card_contact,children:[e.jsxs("div",{className:D.applicant_card_contact_inner,children:[e.jsx("img",{src:"/images/admidion_department/gender.svg",alt:""}),e.jsx("p",{children:(k=s==null?void 0:s.student)==null?void 0:k.studentGender})]}),(((g=s==null?void 0:s.student)==null?void 0:g.studentPhoneNumber)||((P=s==null?void 0:s.student)==null?void 0:P.studentParentsPhoneNumber))&&e.jsxs("div",{className:D.applicant_card_contact_inner,children:[e.jsx("img",{src:"/images/admidion_department/phone.svg",alt:""}),e.jsx("p",{style:{marginBottom:"0 !important"},children:(A=s==null?void 0:s.student)!=null&&A.studentPhoneNumber?(O=s==null?void 0:s.student)==null?void 0:O.studentPhoneNumber:(q=s==null?void 0:s.student)==null?void 0:q.studentParentsPhoneNumber})]})]}),e.jsx("div",{className:D.applicant_card_reciept,onClick:l,children:e.jsx("a",{href:`${ye}/${($=(R=(U=s==null?void 0:s.student)==null?void 0:U.application_print)==null?void 0:R[0])==null?void 0:$.value}`,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:e.jsx("img",{src:"/images/member_tab/admission/admission-form-download.svg",alt:"receipt icon",title:"View Application Form"})})}),e.jsxs("div",{className:D.application_button,children:[e.jsx("div",{className:D.selectAppBtnContainer,onClick:T,children:e.jsx("div",{className:D.selectBtn,children:_("select")})}),e.jsx("div",{className:D.selectAppBtnContainer,onClick:E,children:e.jsx("div",{className:D.cancelledBtn,children:_("reject")})})]})]}),e.jsx(js,{children:f&&e.jsx(cn,{studentId:(M=s==null?void 0:s.student)==null?void 0:M._id,applicationId:n,onClose:()=>m(B=>!B),onRefetchWhenSelect:t})}),N&&e.jsx(gs,{hostelId:r,onClose:()=>c(B=>!B),onSelectedStudent:S,batchId:h??"",classMasterId:u??""}),y&&e.jsx(K,{})]})},Te=({carryParentState:s,accessRole:t,accessTpye:n,pageOpenAs:r})=>{var a,f,m,N;const{t:h}=J(),u=je(),_=[{name:h("application"),id:0,url:"member/hostel?a=request&ongoing&n=application",is_active:["MULTI_APP_ACCESS"].includes(t)||!t?"enabled":["ONE_TAB_ACCESS"].includes(t)?n==="Application"?"enabled":"disabled":"enabled"},{name:h("selected"),id:1,url:"member/hostel?a=request&ongoing&n=select",is_active:["MULTI_APP_ACCESS"].includes(t)||!t?"enabled":["ONE_TAB_ACCESS"].includes(t)?n==="Selected"?"enabled":"disabled":"enabled"},{name:h("confirmed"),id:2,url:"member/hostel?a=request&ongoing&n=confirm",is_active:["MULTI_APP_ACCESS"].includes(t)||!t?"enabled":["ONE_TAB_ACCESS"].includes(t)?n==="Confirmed"?"enabled":"disabled":"enabled"},{name:h("allotted"),id:3,url:"member/hostel?a=request&ongoing&n=allot",is_active:["MULTI_APP_ACCESS"].includes(t)||!t?"enabled":["ONE_TAB_ACCESS"].includes(t)?n==="Allotted"?"enabled":"disabled":"enabled"},{name:h("cancelled"),id:4,url:"member/hostel?a=request&ongoing&n=cancel",is_active:["MULTI_APP_ACCESS"].includes(t)||!t?"enabled":["ONE_TAB_ACCESS"].includes(t)?n==="Cancelled"?"enabled":"disabled":"enabled"}],o=[{name:h("application"),id:0,url:"hostel?a=request&ongoing&n=application",is_active:"enabled"},{name:h("selected"),id:1,url:"hostel?a=request&ongoing&n=select",is_active:"enabled"},{name:h("confirmed"),id:2,url:"hostel?a=request&ongoing&n=confirm",is_active:"enabled"},{name:h("allotted"),id:3,url:"hostel?a=request&ongoing&n=allot",is_active:"enabled"},{name:h("cancelled"),id:4,url:"hostel?a=request&ongoing&n=cancel",is_active:"enabled"}];return e.jsxs(e.Fragment,{children:[e.jsx(ke,{tabList:r==="INSTITUTE"?o:_,activeIndexTab:((a=u.search)==null?void 0:a.substring(21))==="application"?0:((f=u.search)==null?void 0:f.substring(21))==="select"?1:((m=u.search)==null?void 0:m.substring(21))==="confirm"?2:((N=u.search)==null?void 0:N.substring(21))==="allot"?3:4,showAs:!0,customStyleTab:{width:"100%"},customStyleLink:{width:"20%"},carryParentState:s}),e.jsx(Y,{customStyle:{width:"100%"}})]})};function ln({carryParentState:s,applicationId:t,hostelId:n,applicationDetail:r,accessRole:h,accessTpye:u,applicationDetailApplicablePending:_,pageOpenAs:o}){const[a,f]=i.useState(!0),[m,N]=i.useState(1),[c,y]=i.useState(""),[d,x]=ee(),[v,T]=i.useState([]),[E,S]=i.useState(!1),[l,C]=i.useState(!0),{getAllRequestList:F,getAllRequestListRefetch:j}=Dt({data:{id:t,page:m,limit:10,search:c||""},skip:!t});i.useEffect(()=>{x&&a&&N(k=>k+1)},[x,a]),i.useEffect(()=>{t&&(C(!0),j())},[m,t,j,c]),i.useEffect(()=>{var k,g;c?(T(F==null?void 0:F.request),C(!1)):E?(T(F==null?void 0:F.request),S(!1),C(!1)):F!=null&&F.request?(T(P=>[...new Set([...P,...F==null?void 0:F.request].map(JSON.stringify))].map(JSON.parse)),C(!1)):((k=F==null?void 0:F.request)==null?void 0:k.length)===0&&C(!1),((g=F==null?void 0:F.request)==null?void 0:g.length)===10?f(!0):f(!1)},[F==null?void 0:F.request]);const b=()=>{N(1),j(),S(!0)},I=i.useCallback(de.debounce(k=>y(k),500),[]),w=k=>{I(k.target.value)};return e.jsxs(e.Fragment,{children:[e.jsx(fe,{applicationDetail:r,carryParentState:s,tabStatusFlow:"Request_Query",applicationDetailApplicablePending:_,pageOpenAs:o,children:e.jsx("input",{type:"text",placeholder:"Search requests...",onChange:w})}),e.jsx(Te,{carryParentState:s,accessRole:h,accessTpye:u,pageOpenAs:o}),v==null?void 0:v.map((k,g)=>{var P,A;return(v==null?void 0:v.length)===g+1?e.jsx("div",{ref:d,children:e.jsx(ls,{applicant:k,onRefetchWhenSelect:b,applicationId:t,hostelId:n,batchId:(P=r==null?void 0:r.applicationBatch)==null?void 0:P._id,classMasterId:r==null?void 0:r.applicationMaster})},g):e.jsx(ls,{applicant:k,onRefetchWhenSelect:b,applicationId:t,hostelId:n,batchId:(A=r==null?void 0:r.applicationBatch)==null?void 0:A._id,classMasterId:r==null?void 0:r.applicationMaster},g)}),l&&e.jsx(H,{})]})}const ds=({onSelectOffileFees:s,applicant:t})=>{var f,m,N,c,y,d,x,v,T,E,S,l,C,F,j,b,I,w,k,g,P,A;const{t:n}=J(),r=ue(),h=re(),u=()=>{var O;h(`/q/${r.username}/student/profile`,{state:{sid:(O=t==null?void 0:t.student)==null?void 0:O._id,viewAs:"ADMISSION_ADMIN"}})},_=O=>{O.stopPropagation(),s(t)},o=O=>{O.stopPropagation()},a=O=>{O.stopPropagation()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:D.applicant_card_container,onClick:u,title:"View Profile",children:[e.jsxs("div",{className:D.applicant_card_inner,children:[e.jsx("img",{alt:"Student Request Avatar",src:((f=t==null?void 0:t.student)==null?void 0:f.photoId)!=="1"?`${ne}/${(m=t==null?void 0:t.student)==null?void 0:m.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",loading:"lazy"}),e.jsxs("div",{className:D.applicant_card_inner_info,children:[e.jsx("h6",{children:`${(N=t==null?void 0:t.student)==null?void 0:N.studentFirstName} ${(c=t==null?void 0:t.student)!=null&&c.studentMiddleName?(y=t==null?void 0:t.student)==null?void 0:y.studentMiddleName:""} ${(d=t==null?void 0:t.student)==null?void 0:d.studentLastName}`}),e.jsxs("h6",{children:[n("fee_structure")," : ",((T=(v=(x=t==null?void 0:t.student)==null?void 0:x.hostel_fee_structure)==null?void 0:v.category_master)==null?void 0:T.category_name)??"",", ",n("rs")," ",((S=(E=t==null?void 0:t.student)==null?void 0:E.hostel_fee_structure)==null?void 0:S.total_admission_fees)??""]}),e.jsx("p",{children:t!=null&&t.install_type?t==null?void 0:t.install_type:`
              ${n("select_on")}:
              ${te(t==null?void 0:t.select_on).format("DD MMM yyyy")}`})]})]}),e.jsxs("div",{className:D.applicant_card_contact,children:[e.jsxs("div",{className:D.applicant_card_contact_inner,children:[e.jsx("img",{src:"/images/admidion_department/gender.svg",alt:""}),e.jsx("p",{children:(l=t==null?void 0:t.student)==null?void 0:l.studentGender})]}),(((C=t==null?void 0:t.student)==null?void 0:C.studentPhoneNumber)||((F=t==null?void 0:t.student)==null?void 0:F.studentParentsPhoneNumber))&&e.jsxs("div",{className:D.applicant_card_contact_inner,children:[e.jsx("img",{src:"/images/admidion_department/phone.svg",alt:""}),e.jsx("p",{style:{marginBottom:"0 !important"},children:(j=t==null?void 0:t.student)!=null&&j.studentPhoneNumber?(b=t==null?void 0:t.student)==null?void 0:b.studentPhoneNumber:(I=t==null?void 0:t.student)==null?void 0:I.studentParentsPhoneNumber})]})]}),e.jsx("div",{className:D.applicant_card_reciept,onClick:a,children:e.jsx("a",{href:`${ye}/${(g=(k=(w=t==null?void 0:t.student)==null?void 0:w.application_print)==null?void 0:k[0])==null?void 0:g.value}`,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:e.jsx("img",{src:"/images/member_tab/admission/admission-form-download.svg",alt:"receipt icon",title:"View Application Form"})})}),((P=t==null?void 0:t.payment_status)==null?void 0:P.toLowerCase())==="pending"?e.jsx("div",{className:D.selectBtnContainer,style:{display:"flex",justifyContent:"space-evenly"},children:e.jsx("div",{className:D.selectBtn,onClick:_,children:n("collect_fee")})}):((A=t==null?void 0:t.payment_status)==null?void 0:A.toLowerCase())==="receipt requested"?e.jsx("div",{className:D.selectBtnContainer,children:e.jsx("div",{className:D.receipt_requested_btn,onClick:o,children:n("receipt_requested")})}):null]})})},dn=({currentApplicant:s,onClose:t,applicationId:n,onRefetchWhenConfirm:r})=>{var N,c,y,d,x,v;const{t:h}=J(),[u,_]=i.useState(!1),[o]=ct(),[a]=lt(),f=()=>{var T,E;n&&((T=s==null?void 0:s.student)!=null&&T._id)&&(_(S=>!S),o({aid:n,sid:(E=s==null?void 0:s.student)==null?void 0:E._id}).then(()=>{r(),t(),_(S=>!S)}).catch(()=>{_(S=>!S)}))},m=()=>{var T,E;n&&((T=s==null?void 0:s.student)!=null&&T._id)&&(_(S=>!S),a({aid:n,sid:(E=s==null?void 0:s.student)==null?void 0:E._id}).then(()=>{r(),t(),_(S=>!S)}).catch(()=>{_(S=>!S)}))};return e.jsxs(ie,{onClose:t,children:[e.jsxs("div",{className:D.not_confirm_container,children:[e.jsx("h6",{children:h("hostel_status")}),e.jsx(Y,{customStyle:{marginLeft:"-2rem",width:"130%"}}),e.jsxs("section",{className:D.applicant_profile,children:[e.jsx("img",{alt:"Student Request Avatar",src:((N=s==null?void 0:s.student)==null?void 0:N.photoId)!=="1"?`${ne}/${(c=s==null?void 0:s.student)==null?void 0:c.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg"}),e.jsxs("div",{className:D.applicant_profile_text,children:[e.jsx("h6",{children:`${(y=s==null?void 0:s.student)==null?void 0:y.studentFirstName} ${(d=s==null?void 0:s.student)!=null&&d.studentMiddleName?(x=s==null?void 0:s.student)==null?void 0:x.studentMiddleName:""} ${(v=s==null?void 0:s.student)==null?void 0:v.studentLastName}`}),e.jsxs("p",{children:[h("applied")," ",te(s==null?void 0:s.select_on).format("DD MMM yyyy")]})]})]}),e.jsxs("section",{className:D.button_group,children:[e.jsx("button",{onClick:f,children:h("confirm")}),e.jsx("button",{onClick:m,children:h("reject")})]})]}),u&&e.jsx(K,{})]})};function vs({onClose:s,applicant:t,applicationId:n,onRefetchWhenConfirm:r,huid:h,viewAs:u}){var F,j,b,I,w;const[_,o]=i.useState(!1),{t:a}=J(),[f,m]=i.useState({amount:"",mode:"",fee_payment_mode:"",fee_payment_amount:"",transaction_date:"",fee_bank_name:"",fee_bank_holder:"",fee_utr_reference:""}),[N,c]=i.useState({msg:"",run:!1}),[y,d]=i.useState(""),[x]=dt(),[v]=at(),T=k=>{m(g=>({...g,amount:+k.target.value,fee_payment_amount:+k.target.value}))},E=k=>{k.target.name==="fee_payment_mode"?m(g=>({...g,[k.target.name]:k.target.value,mode:k.target.value==="By Cash"?"Offline":"Online",fee_payment_mode:k.target.value})):m(g=>({...g,[k.target.name]:k.target.value}))},S=k=>{const g=k==null?void 0:k.split("/");m(P=>({...P,transaction_date:`${g[2]}-${g[1]}-${g[0]}`}))},l=k=>{var P,A;const g={};for(let O in k)O==="fee_bank_name"||O==="fee_bank_holder"||O==="fee_utr_reference"||O==="amount"||O==="mode"||(k[O]?O==="fee_payment_amount"&&(k[O]<=((A=(P=t==null?void 0:t.student)==null?void 0:P.hostel_fee_structure)==null?void 0:A.total_admission_fees)||(c({msg:"You can not enter amount greater than Admission fees",run:!0}),g.fee_payment_amount=`${O} is required!`)):g[O]=`${O} is required!`);return g},C=()=>{var P,A,O,q,U,R;const k=l(f);let g=!1;for(let $ in k){g=!0;break}if(g)d(k);else if(o(!0),u==="RENEWAL"){const $={sid:(P=t==null?void 0:t.student)==null?void 0:P._id,aid:n,huid:h,collectFee:f};($==null?void 0:$.sid)!==""&&($==null?void 0:$.aid)!==""&&($==null?void 0:$.huid)!==""&&((A=$==null?void 0:$.collectFee)==null?void 0:A.amount)>0&&((O=$==null?void 0:$.collectFee)==null?void 0:O.mode)!==""?v($).then(M=>{M.data.confirm_status&&(r(),s(),o(!1))}).catch({}):o(!1)}else{const $={sid:(q=t==null?void 0:t.student)==null?void 0:q._id,aid:n,confirm_data:f,receipt_status:f.fee_payment_mode==="Fee Receipt Not Generated"?"Fee Receipt Not Generated":""};($==null?void 0:$.sid)!==""&&($==null?void 0:$.aid)!==""&&((U=$==null?void 0:$.confirm_data)==null?void 0:U.amount)>0&&((R=$==null?void 0:$.confirm_data)==null?void 0:R.mode)!==""?x($).then(M=>{M.data.confirm_status&&(r(),s(),o(!1))}).catch({}):o(!1)}};return e.jsxs(ie,{onClose:s,children:[e.jsxs("div",{className:D.admission_modal,children:[e.jsx("h6",{className:D.admission_modal_heading,children:a("collect_fees")}),e.jsx(Y,{customStyle:{width:"100%",margin:"0.7rem 0"}})," ",e.jsxs("div",{className:D.admission_fees_row,children:[e.jsxs("h6",{children:[a("applicable_amount")," :"]}),e.jsxs("h6",{children:["Rs. ",(j=(F=t==null?void 0:t.student)==null?void 0:F.hostel_fee_structure)==null?void 0:j.total_admission_fees]})]}),e.jsx(se,{labelText:`${a("amount_first_installment")} ${(w=(I=(b=t==null?void 0:t.student)==null?void 0:b.hostel_fee_structure)==null?void 0:I.one_installments)==null?void 0:w.fees}`,name:"amount",type:"tel",value:f.amount,onChange:T,placeholder:a("amoute_details_collect"),errorShow:y.fee_payment_amount,customStyleLabel:{marginTop:"15px",marginBottom:"7px"},customStyleContainer:{marginBottom:"15px"}}),e.jsx(bs,{paymentHeading:a("payment_type_mode"),onInputChange:E,errorShow:y.payment_type_mode}),e.jsx(Ns,{labelText:a("select_date_of_transaction"),placeholder:a("please_select_date"),name:"transaction_date",value:f.transaction_date,onDateFunction:S,customStyleContainer:{position:"relative",marginTop:"0.5rem"},datePickerPosition:{position:"relative",top:"-15rem"},customStyleLabel:{marginTop:"15px"},errorShow:y.transaction_date}),f.fee_payment_mode==="By Cash"?"":e.jsxs(e.Fragment,{children:[e.jsx(se,{labelText:a("bank_name_collect"),name:"fee_bank_name",type:"tel",value:f.fee_bank_name,onChange:E,placeholder:a("please_enter_bank_name"),customStyleLabel:{marginTop:"15px",marginBottom:"7px"}}),e.jsx(se,{labelText:a("banke_holder_name"),name:"fee_bank_holder",type:"tel",value:f.fee_bank_holder,onChange:E,placeholder:a("please_enter_name_of_bank_holder"),customStyleLabel:{marginTop:"15px",marginBottom:"7px"}}),e.jsx(se,{labelText:a("cheque_dd_neft"),name:"fee_utr_reference",type:"tel",value:f.fee_utr_reference,onChange:E,placeholder:a("please_enter_utr_ref_number"),customStyleLabel:{marginTop:"15px",marginBottom:"7px"}})]}),e.jsx("div",{className:D.confirm_btn,onClick:C,children:a("collect")}),e.jsx(Ee,{msg:N.msg,run:N.run,setRun:()=>c({msg:"",run:!1}),postiton:"bottom",type:"error"})]}),_&&e.jsx(K,{})]})}function an({onClose:s,applicationId:t,currentApplicant:n,onRefetchWhenConfirm:r}){var f,m,N,c;const{t:h}=J(),[u,_]=i.useState(!1),[o]=It(),a=()=>{var y;_(!0),o({sid:(y=n==null?void 0:n.student)==null?void 0:y._id,aid:t,install_type:n==null?void 0:n.install_type,payment_status:n==null?void 0:n.payment_status,amount:+(n==null?void 0:n.fee_remain)}).then(()=>{s(),r(),_(!1)}).catch({})};return e.jsxs(ie,{onClose:s,children:[e.jsxs("div",{className:D.not_confirm_container,children:[e.jsx("h6",{children:h("collect_required_document")}),e.jsx(Y,{customStyle:{width:"100%"}}),e.jsxs("section",{className:D.admission_collect_docs,children:[e.jsx("p",{children:h("collecting_documents_of_student")}),e.jsx("h6",{children:`${(f=n==null?void 0:n.student)==null?void 0:f.studentFirstName} ${(m=n==null?void 0:n.student)!=null&&m.studentMiddleName?(N=n==null?void 0:n.student)==null?void 0:N.studentMiddleName:""} ${(c=n==null?void 0:n.student)==null?void 0:c.studentLastName}`})]}),e.jsx("button",{onClick:a,className:D.confirm_btn,children:h("confirm")})]}),u&&e.jsx(K,{})]})}function _n({carryParentState:s,applicationId:t,hostelId:n,applicationDetail:r,accessRole:h,accessTpye:u,applicationDetailApplicablePending:_,pageOpenAs:o}){const[a,f]=i.useState(!0),[m,N]=i.useState(1),[c,y]=i.useState(""),[d,x]=ee(),[v,T]=i.useState([]),[E,S]=i.useState(!1),[l,C]=i.useState(!0),[F,j]=i.useState(""),[b,I]=i.useState(""),{getAllSelectList:w,getAllSelectListRefetch:k}=Ft({data:{id:t,page:m,limit:10,search:c||""},skip:!t});i.useEffect(()=>{x&&a&&N(R=>R+1)},[x,a]),i.useEffect(()=>{t&&(C(!0),k())},[m,t,k,c]),i.useEffect(()=>{var R,$;c?(T(w==null?void 0:w.select),C(!1)):E?(T(w==null?void 0:w.select),S(!1),C(!1)):w!=null&&w.select?(T(M=>[...new Set([...M,...w==null?void 0:w.select].map(JSON.stringify))].map(JSON.parse)),C(!1)):((R=w==null?void 0:w.select)==null?void 0:R.length)===0&&C(!1),(($=w==null?void 0:w.select)==null?void 0:$.length)===10?f(!0):f(!1)},[w==null?void 0:w.select]);const g=()=>{N(1),k(),S(!0)},P=i.useCallback(de.debounce(R=>y(R),500),[]),A=R=>{P(R.target.value)},O=R=>{I(R),j("COLLECT_FEES")},q=R=>{I(R),j("COLLECT_DOCS")},U=R=>{I(R),j("MARK_CONFIRM")};return e.jsxs(e.Fragment,{children:[e.jsx(fe,{applicationDetail:r,carryParentState:s,applicationDetailApplicablePending:_,pageOpenAs:o,children:e.jsx("input",{type:"text",placeholder:"Search applications...",onChange:A})}),e.jsx(Te,{carryParentState:s,accessRole:h,accessTpye:u,pageOpenAs:o}),v==null?void 0:v.map((R,$)=>{var M,B;return(v==null?void 0:v.length)===$+1?e.jsx("div",{ref:d,children:e.jsx(ds,{applicant:R,onRefetchWhenConfirm:g,applicationId:t,hostelId:n,onSelectOffileFees:O,onCollectDocs:q,onNotConfirm:U,batchId:(M=r==null?void 0:r.applicationBatch)==null?void 0:M._id})},$):e.jsx(ds,{applicant:R,onRefetchWhenConfirm:g,applicationId:t,hostelId:n,onSelectOffileFees:O,onCollectDocs:q,onNotConfirm:U,batchId:(B=r==null?void 0:r.applicationBatch)==null?void 0:B._id},$)}),l&&e.jsx(H,{}),F==="MARK_CONFIRM"&&e.jsx(dn,{currentApplicant:b,applicationId:t,onRefetchWhenConfirm:g,onClose:()=>j("")}),F==="COLLECT_FEES"&&e.jsx(vs,{applicant:b,applicationId:t,onRefetchWhenConfirm:g,onClose:()=>j("")}),F==="COLLECT_DOCS"&&e.jsx(an,{applicant:b,applicationId:t,onRefetchWhenConfirm:g,onClose:()=>j("")})]})}const Ie=({onCancelHostelApplication:s,onAllotBed:t,applicant:n})=>{var S,l,C,F,j,b,I,w,k,g,P,A,O,q,U,R,$;const{t:r}=J(),h=ue(),u=re(),[_,o]=i.useState(""),[a,f]=i.useState(!1),[m,N]=i.useState(""),{getFeeReceiptDetail:c,getFeeReceiptDetailRefetch:y}=qe({rid:_,skip:!_});i.useEffect(()=>{_&&y()},[_,y]),i.useEffect(()=>{c!=null&&c.receipt&&(c!=null&&c.all_remain)&&N(c)},[c]),i.useEffect(()=>{if(m){const{institute:M,studentInfo:B,paymentReceiptInfo:L}=Re(m==null?void 0:m.all_remain,m==null?void 0:m.receipt),W=new Worker(new URL(Ue,import.meta.url),{type:"module"});W.postMessage({institute:M,studentInfo:B,paymentReceiptInfo:L,printReceiptType:(L==null?void 0:L.transactonRefund)==="Refunded"?"HOSTEL_REFUND":"HOSTEL"}),W.onmessage=G=>{G&&(window.open(G.data,"_blank"),f(Z=>!Z),N(""),W.terminate())}}},[m]);const d=()=>{var M;u(`/q/${h.username}/student/profile`,{state:{sid:(M=n==null?void 0:n.student)==null?void 0:M._id,viewAs:"ADMISSION_ADMIN"}})},x=M=>{M.stopPropagation(),s(n)},v=M=>{M.stopPropagation(),t(n)},T=(M,B)=>{M.stopPropagation(),f(L=>!L),o(B),_===B&&N(c)},E=M=>{M.stopPropagation()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:D.applicant_card_container,onClick:d,title:"View Profile",children:[e.jsxs("div",{className:D.applicant_card_inner,children:[e.jsx("img",{alt:"Student Request Avatar",src:((S=n==null?void 0:n.student)==null?void 0:S.photoId)!=="1"?`${ne}/${(l=n==null?void 0:n.student)==null?void 0:l.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",loading:"lazy"}),e.jsxs("div",{className:D.applicant_card_inner_info,children:[e.jsx("h6",{children:`${(C=n==null?void 0:n.student)==null?void 0:C.studentFirstName} ${(F=n==null?void 0:n.student)!=null&&F.studentMiddleName?(j=n==null?void 0:n.student)==null?void 0:j.studentMiddleName:""} ${(b=n==null?void 0:n.student)==null?void 0:b.studentLastName}`}),e.jsx("p",{onClick:x,className:D.cancelStatus,children:r("cancel_admision")})]})]}),e.jsxs("div",{className:D.applicant_card_contact,children:[e.jsxs("div",{className:D.applicant_card_contact_inner,children:[e.jsx("img",{src:"/images/admidion_department/gender.svg",alt:""}),e.jsx("p",{children:(I=n==null?void 0:n.student)==null?void 0:I.studentGender})]}),(((w=n==null?void 0:n.student)==null?void 0:w.studentPhoneNumber)||((k=n==null?void 0:n.student)==null?void 0:k.studentParentsPhoneNumber))&&e.jsxs("div",{className:D.applicant_card_contact_inner,children:[e.jsx("img",{src:"/images/admidion_department/phone.svg",alt:""}),e.jsx("p",{style:{marginBottom:"0 !important"},children:(g=n==null?void 0:n.student)!=null&&g.studentPhoneNumber?(P=n==null?void 0:n.student)==null?void 0:P.studentPhoneNumber:(A=n==null?void 0:n.student)==null?void 0:A.studentParentsPhoneNumber})]})]}),e.jsx("div",{className:D.applicant_card_reciept,onClick:E,children:e.jsx("a",{href:`${ye}/${(U=(q=(O=n==null?void 0:n.student)==null?void 0:O.application_print)==null?void 0:q[0])==null?void 0:U.value}`,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",marginTop:"-4.5px"},children:e.jsx("img",{src:"/images/member_tab/admission/admission-form-download.svg",alt:"receipt icon",title:"View Application Form"})})}),e.jsx("div",{className:D.applicant_card_reciept,children:($=(R=n==null?void 0:n.student)==null?void 0:R.fee_receipt)==null?void 0:$.map((M,B)=>B>2?"":e.jsx("img",{src:"/images/member_tab/admission/admission-receipt-download.svg",onClick:L=>T(L,M),alt:"receipt icon",title:"Download Fees Receipt"}))}),e.jsx("div",{className:D.selectBtnContainer,style:{width:"auto"},children:e.jsx("div",{className:D.selectBtn,onClick:v,children:r("allot_bed")})})]}),a&&e.jsx(K,{})]})};function Es({currentApplicant:s,onClose:t,onRefetchWhenAction:n,applicationId:r,viewAs:h,huid:u}){var b,I,w;const{t:_}=J(),[o,a]=i.useState({amount:"",mode:"",fee_payment_mode:"",fee_payment_amount:"",transaction_date:"",fee_bank_name:"",fee_bank_holder:"",fee_utr_reference:""}),[f,m]=i.useState(""),[N,c]=i.useState(0),[y,d]=i.useState({msg:"",run:!1}),[x,v]=i.useState(!1),[T]=_t(),[E]=mt();i.useEffect(()=>{var k,g,P,A,O;if((g=(k=s==null?void 0:s.student)==null?void 0:k.paidFeeList)!=null&&g.length){const q=(A=(P=s==null?void 0:s.student)==null?void 0:P.paidFeeList)==null?void 0:A.filter(U=>(U==null?void 0:U.appId)===r);c(((O=q==null?void 0:q[0])==null?void 0:O.paidAmount)??0)}},[(b=s==null?void 0:s.student)==null?void 0:b.paidFeeList]);const S=k=>{a(g=>({...g,amount:+k.target.value,fee_payment_amount:+k.target.value}))},l=k=>{k.target.name==="fee_payment_mode"?a(g=>({...g,[k.target.name]:k.target.value,mode:k.target.value==="By Cash"?"Offline":"Online",fee_payment_mode:k.target.value})):a(g=>({...g,[k.target.name]:k.target.value}))},C=k=>{const g=k==null?void 0:k.split("/");a(P=>({...P,transaction_date:`${g[2]}-${g[1]}-${g[0]}`}))},F=k=>{const g={};for(let P in k)P==="fee_bank_name"||P==="fee_bank_holder"||P==="fee_utr_reference"||P==="amount"||P==="mode"||(k[P]?P==="fee_payment_amount"&&(k[P]<=N||(d({msg:"You can not enter amount greater than fees paid",run:!0}),g.fee_payment_amount_issue=`${P} is required!`)):g[P]=`${P} is required!`);return g},j=()=>{var A,O,q,U;const k=F(o);let g=!1;for(let R in k){g=!0;break}if(g)m(k);else if(v(!0),h==="RENEWAL"){var P={sid:(A=s==null?void 0:s.student)==null?void 0:A._id,aid:r,huid:u,cancelRenewal:{...o,remainAmount:(s==null?void 0:s.fee_remain)??0}};(P==null?void 0:P.sid)!==""&&(P==null?void 0:P.aid)!==""&&(P==null?void 0:P.huid)!==""&&((O=P==null?void 0:P.cancelRenewal)==null?void 0:O.amount)>0&&E(P).then(R=>{R.data.refund_status&&(n(),t(),v(!1))}).catch({})}else{var P={sid:(q=s==null?void 0:s.student)==null?void 0:q._id,aid:r,cancel_data:{...o,remainAmount:(s==null?void 0:s.fee_remain)??0}};(P==null?void 0:P.sid)!==""&&(P==null?void 0:P.aid)!==""&&((U=P==null?void 0:P.cancel_data)==null?void 0:U.amount)>0&&T(P).then($=>{$.data.refund_status&&(n(),t(),v(!1))}).catch({})}};return e.jsxs(e.Fragment,{children:[!x&&e.jsxs(ie,{onClose:t,children:[e.jsxs("div",{className:D.admission_modal,children:[e.jsx("h6",{className:D.admission_modal_heading,children:_(h==="RENEWAL"?"cancel_renewal_addmission":"cancel_addmission")}),e.jsx(Y,{customStyle:{width:"100%",margin:"0.7rem 0"}}),e.jsxs("div",{className:D.admission_fees_row,children:[e.jsxs("h6",{children:[_("total_admission_fees")," :"]}),e.jsxs("h6",{children:[_("rs"),"."," ",((w=(I=s==null?void 0:s.student)==null?void 0:I.hostel_fee_structure)==null?void 0:w.total_admission_fees)??0]})]}),e.jsxs("div",{className:D.admission_fees_row,children:[e.jsxs("h6",{children:[_("fees_paid")," :"]}),e.jsxs("h6",{children:[_("rs"),". ",N]})]}),e.jsx(bs,{paymentHeading:_("refund_payment_type_mode"),onInputChange:l,errorShow:f.payment_type_mode}),e.jsx(se,{labelText:_("refund_amount"),name:"amount",type:"tel",value:o.amount,onChange:S,placeholder:_("please_enter_refund_amount"),errorShow:f.fee_payment_amount}),h==="RENEWAL"?null:e.jsx(Ns,{labelText:_("select_date_of_transaction"),placeholder:_("please_select_date"),name:"transaction_date",value:o.transaction_date,onDateFunction:C,customStyleContainer:{position:"relative",marginTop:"0.5rem"},datePickerPosition:{position:"relative",top:"-20rem"},customStyleLabel:{marginTop:"15px"},errorShow:f.transaction_date}),e.jsx("h6",{style:{marginTop:"0.5rem"},children:_("paid_to")}),e.jsx(se,{labelText:_("bank_name_collect"),name:"fee_bank_name",type:"tel",value:o.fee_bank_name,onChange:l,placeholder:_("please_enter_bank_name"),customStyleLabel:{marginTop:"15px",marginBottom:"7px"}}),e.jsx(se,{labelText:_("banke_holder_name"),name:"fee_bank_holder",type:"tel",value:o.fee_bank_holder,onChange:l,placeholder:_("please_enter_name_of_bank_holder"),customStyleLabel:{marginTop:"15px",marginBottom:"7px"}}),e.jsx(se,{labelText:_("cheque_dd_neft"),name:"fee_utr_reference",type:"tel",value:o.fee_utr_reference,onChange:l,placeholder:_("please_enter_utr_ref_number"),customStyleLabel:{marginTop:"15px",marginBottom:"7px"}}),e.jsx("div",{className:D.confirm_btn,onClick:j,children:_("confirm")})]}),e.jsx(Ee,{msg:y.msg,run:y.run,setRun:()=>d({msg:"",run:!1}),postiton:"bottom",type:"error"})]}),x&&e.jsx(K,{})]})}const ys=({onClose:s,currentApplicant:t,applicationId:n,onRefetchWhenAction:r,unitId:h,viewAs:u,instituteId:_})=>{var k;const{t:o}=J(),[a,f]=i.useState(""),[m,N]=i.useState(!1),[c,y]=i.useState(u==="RENEWAL"),[d,x]=i.useState(""),[v,T]=i.useState({hrid:""}),[E]=ut(),[S]=ht(),{getRoomListHostelUnit:l,getRoomListHostelUnitRefetch:C}=ft({data:{huid:h,page:1,limit:1e3,search:""},skip:!h});i.useEffect(()=>{h&&C()},[h,C]);const F=g=>{T(P=>({...P,hrid:g}))},j=g=>{const P={};for(let A in g)g[A]||(P[A]=`${A} is required!`);return P},b=(g,P)=>{const A={};if(d==="No")for(let O in g)g[O]||(A[O]=`${O} is required!`);return P||(A.same_allot="same_allot is required!"),A},I=()=>{var g,P;if(_){const A=u==="RENEWAL"?b(v,d):j(v);let O=!1;for(let q in A)if(q){O=!0;break}O?f(A):(N(q=>!q),u==="RENEWAL"?S({aid:n,huid:h,allotBed:{dataList:[(g=t==null?void 0:t.student)==null?void 0:g._id],hrid:v.hrid,bed_mode:d==="Yes"?"Same":"Different"}}).then(()=>{r(),s(),N(q=>!q)}).catch({}):E({aid:n,huid:h,...v,id:_,allot_bed:{dataList:[(P=t==null?void 0:t.student)==null?void 0:P._id]}}).then(()=>{r(),s(),N(q=>!q)}).catch({}))}},w=g=>{y(g==="Yes"),x(g)};return e.jsx(ie,{onClose:s,children:e.jsxs("div",{className:z.add_category_modal,style:{width:"30rem",maxHeight:"35rem"},children:[e.jsxs("div",{className:z.add_category_modal_title,children:[e.jsx("h6",{children:o("allot_bed_to_hostelite")}),e.jsx("img",{src:"/images/close-post-icon.svg",onClick:s,alt:""})]}),e.jsx(Y,{customStyle:{width:"100%",marginTop:"0.5rem"}}),u==="RENEWAL"&&e.jsx(ve,{selectLabel:o("allot_same_bed_as_previous"),selectedValue:o("select_yes_or_no"),options:["Yes","No"],value:d,errorShow:a.same_allot,onClick:w}),!c&&e.jsx(ge,{selectLabel:o("select_unit_room"),onClick:F,selectedValue:o("select_unit_room_placeholder"),options:((k=l==null?void 0:l.all_rooms)==null?void 0:k.filter(g=>(g==null?void 0:g.vacant_count)>0?g:null))??[],errorShow:a.hrid}),e.jsx("button",{className:z.set_fees_structure_btn,title:"Allot Hostel",onClick:I,style:{justifyContent:"center"},children:o("allot_bed")}),m&&e.jsx(K,{})]})})};function mn({carryParentState:s,applicationId:t,hostelId:n,applicationDetail:r,unitId:h,accessRole:u,accessTpye:_,applicationDetailApplicablePending:o,pageOpenAs:a,instituteId:f}){const[m,N]=i.useState(!0),[c,y]=i.useState(1),[d,x]=i.useState(""),[v,T]=ee(),[E,S]=i.useState([]),[l,C]=i.useState(!1),[F,j]=i.useState(!0),[b,I]=i.useState(""),[w,k]=i.useState(""),{getAllConfirmList:g,getAllConfirmListRefetch:P}=Ot({data:{id:t,page:c,limit:10,search:d||""},skip:!t});i.useEffect(()=>{T&&m&&y($=>$+1)},[T,m]),i.useEffect(()=>{t&&(j(!0),P())},[c,t,P,d]),i.useEffect(()=>{var $,M;d?(S(g==null?void 0:g.confirm),j(!1)):l?(S(g==null?void 0:g.confirm),C(!1),j(!1)):g!=null&&g.confirm?(S(B=>[...new Set([...B,...g==null?void 0:g.confirm].map(JSON.stringify))].map(JSON.parse)),j(!1)):(($=g==null?void 0:g.confirm)==null?void 0:$.length)===0&&j(!1),((M=g==null?void 0:g.confirm)==null?void 0:M.length)===10?N(!0):N(!1)},[g==null?void 0:g.confirm]);const A=()=>{y(1),P(),C(!0)},O=i.useCallback(de.debounce($=>x($),500),[]),q=$=>{O($.target.value)},U=$=>{k($),I("CANCEL_APPLICANT")},R=$=>{k($),I("ALLOT_BED")};return e.jsxs(e.Fragment,{children:[e.jsx(fe,{applicationDetail:r,carryParentState:s,tabStatusFlow:"Confirm_Query",applicationDetailApplicablePending:o,pageOpenAs:a,children:e.jsx("input",{type:"text",placeholder:"Search applications...",onChange:q})}),e.jsx(Te,{carryParentState:s,accessRole:u,accessTpye:_,pageOpenAs:a}),E==null?void 0:E.map(($,M)=>(E==null?void 0:E.length)===M+1?e.jsx("div",{ref:v,children:e.jsx(Ie,{applicant:$,onCancelHostelApplication:U,onAllotBed:R})},M):e.jsx(Ie,{applicant:$,onCancelHostelApplication:U,onAllotBed:R},M)),F&&e.jsx(H,{}),b==="CANCEL_APPLICANT"&&e.jsx(Es,{currentApplicant:w,applicationId:t,onRefetchWhenAction:A,onClose:()=>I("")}),b==="ALLOT_BED"&&e.jsx(ys,{currentApplicant:w,applicationId:t,onRefetchWhenAction:A,onClose:()=>I(""),hostelId:n,unitId:h,instituteId:f})]})}const Fe=({applicant:s})=>{var x,v,T,E,S,l,C,F,j,b,I,w,k,g,P,A,O,q,U,R,$,M;const{t}=J(),n=ue(),r=re(),[h,u]=i.useState(""),[_,o]=i.useState(!1),[a,f]=i.useState(""),{getFeeReceiptDetail:m,getFeeReceiptDetailRefetch:N}=qe({rid:h,skip:!h});i.useEffect(()=>{h&&N()},[h,N]),i.useEffect(()=>{m!=null&&m.receipt&&(m!=null&&m.all_remain)&&f(m)},[m]),i.useEffect(()=>{if(a){const{institute:B,studentInfo:L,paymentReceiptInfo:W}=Re(a==null?void 0:a.all_remain,a==null?void 0:a.receipt),G=new Worker(new URL(Ue,import.meta.url),{type:"module"});G.postMessage({institute:B,studentInfo:L,paymentReceiptInfo:W,printReceiptType:(W==null?void 0:W.transactonRefund)==="Refunded"?"HOSTEL_REFUND":"HOSTEL"}),G.onmessage=Z=>{Z&&(window.open(Z.data,"_blank"),o(ae=>!ae),f(""),G.terminate())}}},[a]);const c=(B,L)=>{B.stopPropagation(),o(W=>!W),u(L),h===L&&f(m)},y=()=>{var B;r(`/q/${n.username}/student/profile`,{state:{sid:(B=s==null?void 0:s.student)==null?void 0:B._id,viewAs:"ADMISSION_ADMIN"}})},d=B=>{B.stopPropagation()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:D.applicant_card_container,onClick:y,title:"View Profile",children:[e.jsxs("div",{className:D.applicant_card_inner,children:[e.jsx("img",{alt:"Student Request Avatar",src:((x=s==null?void 0:s.student)==null?void 0:x.photoId)!=="1"?`${ne}/${(v=s==null?void 0:s.student)==null?void 0:v.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",loading:"lazy"}),e.jsxs("div",{className:D.applicant_card_inner_info,children:[e.jsx("h6",{children:`${(T=s==null?void 0:s.student)==null?void 0:T.studentFirstName} ${(E=s==null?void 0:s.student)!=null&&E.studentMiddleName?(S=s==null?void 0:s.student)==null?void 0:S.studentMiddleName:""} ${(l=s==null?void 0:s.student)==null?void 0:l.studentLastName}`}),e.jsxs("p",{children:[t("room_name")," "," : ",((j=(F=(C=s==null?void 0:s.student)==null?void 0:C.student_bed_number)==null?void 0:F.hostelRoom)==null?void 0:j.room_name)||""," / ",t("bed_name")," "," : ",`${((I=(b=s==null?void 0:s.student)==null?void 0:b.student_bed_number)==null?void 0:I.bed_number)||""}`]})]})]}),e.jsxs("div",{className:D.applicant_card_contact,children:[e.jsxs("div",{className:D.applicant_card_contact_inner,children:[e.jsx("img",{src:"/images/admidion_department/gender.svg",alt:""}),e.jsx("p",{children:(w=s==null?void 0:s.student)==null?void 0:w.studentGender})]}),(((k=s==null?void 0:s.student)==null?void 0:k.studentPhoneNumber)||((g=s==null?void 0:s.student)==null?void 0:g.studentParentsPhoneNumber))&&e.jsxs("div",{className:D.applicant_card_contact_inner,children:[e.jsx("img",{src:"/images/admidion_department/phone.svg",alt:""}),e.jsx("p",{style:{marginBottom:"0 !important"},children:(P=s==null?void 0:s.student)!=null&&P.studentPhoneNumber?(A=s==null?void 0:s.student)==null?void 0:A.studentPhoneNumber:(O=s==null?void 0:s.student)==null?void 0:O.studentParentsPhoneNumber})]})]}),e.jsx("div",{className:D.applicant_card_reciept,onClick:d,children:e.jsx("a",{href:`${ye}/${(R=(U=(q=s==null?void 0:s.student)==null?void 0:q.application_print)==null?void 0:U[0])==null?void 0:R.value}`,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:e.jsx("img",{src:"/images/member_tab/admission/admission-form-download.svg",alt:"receipt icon",title:"View Application Form"})})}),e.jsx("div",{className:D.applicant_card_reciept,children:(M=($=s==null?void 0:s.student)==null?void 0:$.fee_receipt)==null?void 0:M.map((B,L)=>L>2?"":e.jsx("img",{src:"/images/member_tab/admission/admission-receipt-download.svg",onClick:W=>c(W,B),alt:"receipt icon",title:"Download Fees Receipt"}))})]}),_&&e.jsx(K,{})]})},un=({carryParentState:s,applicationId:t,applicationDetail:n,viewAs:r,accessRole:h,accessTpye:u,applicationDetailApplicablePending:_,pageOpenAs:o})=>{const[a,f]=i.useState(!0),[m,N]=i.useState(1),[c,y]=ee(),[d,x]=i.useState([]),[v,T]=i.useState(!0),[E,S]=i.useState(""),{admissionAllottedList:l,admissionAllottedListRefetch:C}=$t({data:{aid:t,page:m,limit:10,search:E||""},skip:!t});i.useEffect(()=>{y&&a&&N(b=>b+1)},[y,a]),i.useEffect(()=>{t&&(T(!0),C())},[m,t,C,E]),i.useEffect(()=>{var b,I;E?(x(l==null?void 0:l.allot),T(!1)):l!=null&&l.allot?(x(w=>[...new Set([...w,...l==null?void 0:l.allot].map(JSON.stringify))].map(JSON.parse)),T(!1)):((b=l==null?void 0:l.allot)==null?void 0:b.length)===0&&T(!1),((I=l==null?void 0:l.allot)==null?void 0:I.length)===10?f(!0):f(!1)},[l==null?void 0:l.allot]);const F=i.useCallback(de.debounce(b=>S(b),500),[]),j=b=>{F(b.target.value)};return e.jsxs(e.Fragment,{children:[r==="COMPLETED_APPLICATION"?"":e.jsxs(e.Fragment,{children:[e.jsx(fe,{applicationDetail:n,carryParentState:s,tabStatusFlow:"Allot_Query",applicationDetailApplicablePending:_,pageOpenAs:o,children:e.jsx("input",{type:"text",placeholder:"Search requests...",onChange:j})}),e.jsx(Te,{carryParentState:s,accessRole:h,accessTpye:u,pageOpenAs:o})]}),d==null?void 0:d.map((b,I)=>(d==null?void 0:d.length)===I+1?e.jsx("div",{ref:c,children:e.jsx(Fe,{applicant:b})},I):e.jsx(Fe,{applicant:b},I)),v&&e.jsx(H,{})]})},Oe=({applicant:s})=>{var d,x,v,T,E,S,l,C,F,j,b,I,w,k,g,P,A;const t=ue(),n=re(),[r,h]=i.useState(""),[u,_]=i.useState(!1),[o,a]=i.useState(""),{getFeeReceiptDetail:f,getFeeReceiptDetailRefetch:m}=qe({rid:r,skip:!r});i.useEffect(()=>{r&&m()},[r,m]),i.useEffect(()=>{f!=null&&f.receipt&&(f!=null&&f.all_remain)&&a(f)},[f]),i.useEffect(()=>{if(o){const{institute:O,studentInfo:q,paymentReceiptInfo:U}=Re(o==null?void 0:o.all_remain,o==null?void 0:o.receipt),R=new Worker(new URL(Ue,import.meta.url),{type:"module"});R.postMessage({institute:O,studentInfo:q,paymentReceiptInfo:U,printReceiptType:(U==null?void 0:U.transactonRefund)==="Refunded"?"HOSTEL_REFUND":"HOSTEL"}),R.onmessage=$=>{$&&(window.open($.data,"_blank"),_(M=>!M),a(""),R.terminate())}}},[o]);const N=(O,q)=>{O.stopPropagation(),_(U=>!U),h(q),r===q&&a(f)},c=()=>{var O;n(`/q/${t.username}/student/profile`,{state:{sid:(O=s==null?void 0:s.student)==null?void 0:O._id,viewAs:"ADMISSION_ADMIN"}})},y=O=>{O.stopPropagation()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:D.applicant_card_container,onClick:c,title:"View Profile",children:[e.jsxs("div",{className:D.applicant_card_inner,children:[e.jsx("img",{alt:"Student Request Avatar",src:((d=s==null?void 0:s.student)==null?void 0:d.photoId)!=="1"?`${ne}/${(x=s==null?void 0:s.student)==null?void 0:x.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",loading:"lazy"}),e.jsxs("div",{className:D.applicant_card_inner_info,children:[e.jsx("h6",{children:`${(v=s==null?void 0:s.student)==null?void 0:v.studentFirstName} ${(T=s==null?void 0:s.student)!=null&&T.studentMiddleName?(E=s==null?void 0:s.student)==null?void 0:E.studentMiddleName:""} ${(S=s==null?void 0:s.student)==null?void 0:S.studentLastName}`}),e.jsxs("p",{children:["Rs. ",s==null?void 0:s.refund_amount," ",(s==null?void 0:s.payment_status)==="Refund"&&"Refunded"]})]})]}),e.jsxs("div",{className:D.applicant_card_contact,children:[e.jsxs("div",{className:D.applicant_card_contact_inner,children:[e.jsx("img",{src:"/images/admidion_department/gender.svg",alt:""}),e.jsx("p",{children:(l=s==null?void 0:s.student)==null?void 0:l.studentGender})]}),(((C=s==null?void 0:s.student)==null?void 0:C.studentPhoneNumber)||((F=s==null?void 0:s.student)==null?void 0:F.studentParentsPhoneNumber))&&e.jsxs("div",{className:D.applicant_card_contact_inner,children:[e.jsx("img",{src:"/images/admidion_department/phone.svg",alt:""}),e.jsx("p",{style:{marginBottom:"0 !important"},children:(j=s==null?void 0:s.student)!=null&&j.studentPhoneNumber?(b=s==null?void 0:s.student)==null?void 0:b.studentPhoneNumber:(I=s==null?void 0:s.student)==null?void 0:I.studentParentsPhoneNumber})]})]}),e.jsx("div",{className:D.applicant_card_reciept,onClick:y,children:e.jsx("a",{href:`${ye}/${(g=(k=(w=s==null?void 0:s.student)==null?void 0:w.application_print)==null?void 0:k[0])==null?void 0:g.value}`,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:e.jsx("img",{src:"/images/member_tab/admission/admission-form-download.svg",alt:"receipt icon",title:"View Application Form"})})}),e.jsx("div",{className:D.applicant_card_reciept,children:(A=(P=s==null?void 0:s.student)==null?void 0:P.fee_receipt)==null?void 0:A.map((O,q)=>q>2?"":e.jsx("img",{src:"/images/member_tab/admission/admission-receipt-download.svg",onClick:U=>N(U,O),alt:"receipt icon",title:"Download Fees Receipt"}))})]}),u&&e.jsx(K,{})]})},hn=({carryParentState:s,applicationId:t,applicationDetail:n,viewAs:r,accessRole:h,accessTpye:u,applicationDetailApplicablePending:_,pageOpenAs:o})=>{const[a,f]=i.useState(!0),[m,N]=i.useState(1),[c,y]=ee(),[d,x]=i.useState([]),[v,T]=i.useState(""),[E,S]=i.useState(!0),{admissionCancelledList:l,admissionCancelledListRefetch:C}=Lt({data:{aid:t,page:m,limit:10,search:v||""},skip:!t});i.useEffect(()=>{y&&a&&N(b=>b+1)},[y,a]),i.useEffect(()=>{t&&(S(!0),C())},[m,t,C]),i.useEffect(()=>{var b,I;v?(x(l==null?void 0:l.cancel),S(!1)):l!=null&&l.cancel?(x(w=>[...new Set([...w,...l==null?void 0:l.cancel].map(JSON.stringify))].map(JSON.parse)),S(!1)):((b=l==null?void 0:l.cancel)==null?void 0:b.length)===0&&S(!1),((I=l==null?void 0:l.cancel)==null?void 0:I.length)===10?f(!0):f(!1)},[l==null?void 0:l.cancel]);const F=i.useCallback(de.debounce(b=>T(b),500),[]),j=b=>{F(b.target.value)};return e.jsxs(e.Fragment,{children:[r==="COMPLETED_APPLICATION"?"":e.jsxs(e.Fragment,{children:[e.jsx(fe,{applicationDetail:n,carryParentState:s,applicationDetailApplicablePending:_,pageOpenAs:o,children:e.jsx("input",{type:"text",placeholder:"Search requests...",onChange:j})}),e.jsx(Te,{carryParentState:s,accessRole:h,accessTpye:u,pageOpenAs:o})]}),d==null?void 0:d.map((b,I)=>(d==null?void 0:d.length)===I+1?e.jsx("div",{ref:c,children:e.jsx(Oe,{applicant:b})},I):e.jsx(Oe,{applicant:b},I)),E&&e.jsx(H,{})]})},fn=({carryParentState:s,hid:t,accessRole:n,accessTpye:r,pageOpenAs:h,instituteId:u})=>{var f,m,N,c,y,d,x,v,T,E,S,l,C,F;const _=je(),{getHostelAppliciontDetail:o,getHostelAppliciontDetailRefetch:a}=xt({aid:(f=_.state)==null?void 0:f.applicationId,skip:!((m=_.state)!=null&&m.applicationId)});return i.useEffect(()=>{var j;(j=_.state)!=null&&j.applicationId&&a()},[(N=_.state)==null?void 0:N.applicationId,a]),e.jsxs(e.Fragment,{children:[((c=_.search)==null?void 0:c.substring(21))==="application"&&e.jsx(ln,{applicationId:(y=_.state)==null?void 0:y.applicationId,hostelId:t,carryParentState:s,applicationDetail:o==null?void 0:o.oneApply,accessRole:n,accessTpye:r,applicationDetailApplicablePending:o==null?void 0:o.applicable_pending,pageOpenAs:h}),((d=_.search)==null?void 0:d.substring(21))==="select"&&e.jsx(_n,{applicationId:(x=_.state)==null?void 0:x.applicationId,hostelId:t,carryParentState:s,applicationDetail:o==null?void 0:o.oneApply,accessRole:n,accessTpye:r,applicationDetailApplicablePending:o==null?void 0:o.applicable_pending,pageOpenAs:h}),((v=_.search)==null?void 0:v.substring(21))==="confirm"&&e.jsx(mn,{applicationId:(T=_.state)==null?void 0:T.applicationId,hostelId:t,carryParentState:s,applicationDetail:o==null?void 0:o.oneApply,unitId:(E=_.state)==null?void 0:E.unitId,accessRole:n,accessTpye:r,applicationDetailApplicablePending:o==null?void 0:o.applicable_pending,pageOpenAs:h,instituteId:u}),((S=_.search)==null?void 0:S.substring(21))==="allot"&&e.jsx(un,{applicationId:(l=_.state)==null?void 0:l.applicationId,carryParentState:s,applicationDetail:o==null?void 0:o.oneApply,accessRole:n,accessTpye:r,applicationDetailApplicablePending:o==null?void 0:o.applicable_pending,pageOpenAs:h}),((C=_.search)==null?void 0:C.substring(21))==="cancel"&&e.jsx(hn,{applicationId:(F=_.state)==null?void 0:F.applicationId,carryParentState:s,applicationDetail:o==null?void 0:o.oneApply,accessRole:n,accessTpye:r,applicationDetailApplicablePending:o==null?void 0:o.applicable_pending,pageOpenAs:h})]})};function as({data:s,carryParentState:t,accessRole:n,accessTpye:r,accessApplication:h,setOpenApplicationMenu:u,callApi:_,pageOpenAs:o}){var f,m,N,c,y,d,x,v,T;const a=E=>{E.preventDefault(),u(s)};return e.jsx(e.Fragment,{children:n?r?e.jsx(be,{carryParentState:{...t,applicationId:s==null?void 0:s._id,unitId:(f=s==null?void 0:s.applicationUnit)==null?void 0:f._id},activeTab:`request&ongoing&n=${r==="Application"?"application":r==="Selected"?"select":r==="Confirmed"?"confirm":r==="Allotted"?"allot":"cancel"}`,accessRole:n,accessTpye:r,callApi:_,children:e.jsxs("div",{className:D.ongoing_card,children:[e.jsxs("div",{className:D.ongoing_card_inner,children:[e.jsx("img",{alt:"Ongoing App",src:"/images/admision-application-icon.svg"}),e.jsxs("div",{className:D.ongoing_card_text,children:[e.jsx("h6",{children:s==null?void 0:s.applicationName}),e.jsx("p",{style:{marginBottom:"0"},children:((m=s==null?void 0:s.applicationUnit)==null?void 0:m.hostel_unit_name)??""})]})]}),e.jsx("div",{className:D.ongoing_card_count_date,children:e.jsxs("div",{className:D.ongoing_card_count_container,children:[e.jsx("h6",{children:(s==null?void 0:s.receievedCount)??0}),e.jsx("h6",{children:(s==null?void 0:s.selectCount)??0}),e.jsx("h6",{children:(s==null?void 0:s.confirmCount)??0})]})})]})}):h!=null&&h.includes(s==null?void 0:s._id)?e.jsx(be,{carryParentState:{...t,applicationId:s==null?void 0:s._id,unitId:(N=s==null?void 0:s.applicationUnit)==null?void 0:N._id},activeTab:"request&ongoing&n=application",accessRole:n,callApi:_,children:e.jsxs("div",{className:D.ongoing_card,children:[e.jsxs("div",{className:D.ongoing_card_inner,children:[e.jsx("img",{alt:"Ongoing App",src:"/images/admision-application-icon.svg"}),e.jsxs("div",{className:D.ongoing_card_text,children:[e.jsx("h6",{children:s==null?void 0:s.applicationName}),e.jsx("p",{style:{marginBottom:"0"},children:((c=s==null?void 0:s.applicationUnit)==null?void 0:c.hostel_unit_name)??""})]})]}),e.jsx("div",{className:D.ongoing_card_count_date,children:e.jsxs("div",{className:D.ongoing_card_count_container,children:[e.jsx("h6",{children:(s==null?void 0:s.receievedCount)??0}),e.jsx("h6",{children:(s==null?void 0:s.selectCount)??0}),e.jsx("h6",{children:(s==null?void 0:s.confirmCount)??0})]})})]})}):e.jsxs("div",{className:D.ongoing_card,style:{opacity:"0.5"},children:[e.jsxs("div",{className:D.ongoing_card_inner,children:[e.jsx("img",{alt:"Ongoing App",src:"/images/admision-application-icon.svg"}),e.jsxs("div",{className:D.ongoing_card_text,children:[e.jsx("h6",{children:s==null?void 0:s.applicationName}),e.jsxs("p",{style:{marginBottom:"0"},children:[" ",((y=s==null?void 0:s.applicationUnit)==null?void 0:y.hostel_unit_name)??""]})]})]}),e.jsx("div",{className:D.ongoing_card_count_date,children:e.jsxs("div",{className:D.ongoing_card_count_container,children:[e.jsx("h6",{children:(s==null?void 0:s.receievedCount)??0}),e.jsx("h6",{children:(s==null?void 0:s.selectCount)??0}),e.jsx("h6",{children:(s==null?void 0:s.confirmCount)??0})]})})]}):o==="INSTITUTE"?e.jsx(De,{carryParentState:{...t,applicationId:s==null?void 0:s._id,unitId:(d=s==null?void 0:s.applicationUnit)==null?void 0:d._id},activeTab:"request&ongoing&n=application",children:e.jsxs("div",{className:D.ongoing_card,children:[e.jsxs("div",{className:D.ongoing_card_inner,children:[e.jsx("img",{alt:"Ongoing App",src:"/images/admision-application-icon.svg"}),e.jsxs("div",{className:D.ongoing_card_text,children:[e.jsx("h6",{children:s==null?void 0:s.applicationName}),e.jsx("p",{style:{marginBottom:"0"},children:((x=s==null?void 0:s.applicationUnit)==null?void 0:x.hostel_unit_name)??""})]})]}),e.jsx("div",{className:D.ongoing_card_count_date,children:e.jsxs("div",{className:D.ongoing_card_count_container,children:[e.jsx("h6",{children:(s==null?void 0:s.receievedCount)??0}),e.jsx("h6",{children:(s==null?void 0:s.selectCount)??0}),e.jsx("h6",{children:(s==null?void 0:s.confirmCount)??0})]})}),e.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:a,className:D.menu_icon,title:"Menu"})]})}):e.jsx(be,{carryParentState:{...t,applicationId:s==null?void 0:s._id,unitId:(v=s==null?void 0:s.applicationUnit)==null?void 0:v._id},activeTab:"request&ongoing&n=application",accessRole:n,accessTpye:r,callApi:_,children:e.jsxs("div",{className:D.ongoing_card,children:[e.jsxs("div",{className:D.ongoing_card_inner,children:[e.jsx("img",{alt:"Ongoing App",src:"/images/admision-application-icon.svg"}),e.jsxs("div",{className:D.ongoing_card_text,children:[e.jsx("h6",{children:s==null?void 0:s.applicationName}),e.jsx("p",{style:{marginBottom:"0"},children:((T=s==null?void 0:s.applicationUnit)==null?void 0:T.hostel_unit_name)??""})]})]}),e.jsx("div",{className:D.ongoing_card_count_date,children:e.jsxs("div",{className:D.ongoing_card_count_container,children:[e.jsx("h6",{children:(s==null?void 0:s.receievedCount)??0}),e.jsx("h6",{children:(s==null?void 0:s.selectCount)??0}),e.jsx("h6",{children:(s==null?void 0:s.confirmCount)??0})]})}),e.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:a,className:D.menu_icon,title:"Menu"})]})})})}function xn({hid:s,accessRole:t,accessTpye:n,carryParentState:r,accessApplication:h,callApi:u,pageOpenAs:_}){const{t:o}=J(),[a,f]=i.useState(!0),[m,N]=i.useState(1),[c,y]=ee(),[d,x]=i.useState([]),[v,T]=i.useState(!0),[E,S]=i.useState(""),[l,C]=i.useState(!1),[F,j]=i.useState(!1),{getOngoingApplicationList:b,getOngoingApplicationListRefetch:I}=fs({data:{hid:s,page:m,limit:10},skip:!s});i.useEffect(()=>{y&&a&&N(g=>g+1)},[y,a]),i.useEffect(()=>{s&&(T(!0),I())},[s,m,I]),i.useEffect(()=>{var g,P;l?(x(b==null?void 0:b.ongoing),T(!1),C(!1)):b!=null&&b.ongoing?(x(A=>[...new Set([...A,...b==null?void 0:b.ongoing].map(JSON.stringify))].map(JSON.parse)),T(!1)):((g=b==null?void 0:b.ongoing)==null?void 0:g.length)===0&&T(!1),((P=b==null?void 0:b.ongoing)==null?void 0:P.length)===10?f(!0):f(!1)},[b==null?void 0:b.ongoing]);const w=()=>{N(1),C(!0),T(!0),I()},k=()=>{t||j(g=>!g)};return e.jsxs(e.Fragment,{children:[e.jsx("p",{className:D.add_new_category,onClick:k,style:{opacity:t?"0.5":1},children:o("create_new_application")}),e.jsxs("div",{className:D.remainingFees,children:[d==null?void 0:d.map((g,P)=>(d==null?void 0:d.length)===P+1?e.jsx("div",{ref:c,children:e.jsx(as,{data:g,carryParentState:r,accessRole:t,accessTpye:n,accessApplication:h,setOpenApplicationMenu:S,callApi:u,pageOpenAs:_})},P):e.jsx(as,{data:g,carryParentState:r,accessRole:t,accessTpye:n,accessApplication:h,setOpenApplicationMenu:S,callApi:u,pageOpenAs:_},P)),v&&e.jsx(H,{}),E&&e.jsx(qt,{openApplicationMenu:E,onClose:()=>S(""),onRefetch:w,viewAs:"HOSTEL_MANAGER",hostelId:s})]}),F&&e.jsx(Rt,{setCreateApplication:j,createApplication:F,hostelId:s,setRefetchOngoining:w,viewAs:"HOSTEL_MANAGER"})]})}const we=({carryParentState:s})=>{var h,u,_,o;const{t}=J(),n=je(),r=[{name:t("application"),id:0,url:"member/hostel?a=request&renewal&application"},{name:t("selected"),id:1,url:"member/hostel?a=request&renewal&select"},{name:t("confirmed"),id:2,url:"member/hostel?a=request&renewal&renewed"},{name:t("allotted"),id:3,url:"member/hostel?a=request&renewal&allot"},{name:t("cancelled"),id:4,url:"member/hostel?a=request&renewal&cancel"}];return e.jsxs(e.Fragment,{children:[e.jsx(ke,{tabList:r,activeIndexTab:((h=n.search)==null?void 0:h.substring(19))==="application"?0:((u=n.search)==null?void 0:u.substring(19))==="select"?1:((_=n.search)==null?void 0:_.substring(19))==="renewed"?2:((o=n.search)==null?void 0:o.substring(19))==="allot"?3:4,showAs:!0,customStyleTab:{width:"100%"},customStyleLink:{width:"20%"},carryParentState:s}),e.jsx(Y,{customStyle:{width:"100%"}})]})},ks=({onClose:s,onRefetchWhenSelect:t,applicationId:n,studentId:r,viewAs:h})=>{const{t:u}=J(),[_,o]=i.useState(!1),[a]=jt(),[f]=gt(),m=()=>{r!==""&&n!==""&&(o(N=>!N),h==="RENEWAL"?f({sid:r,huid:n}).then(()=>{t(),s(),o(N=>!N)}).catch({}):a({sid:r,aid:n}).then(()=>{t(),s(),o(N=>!N)}).catch({}))};return e.jsx(ie,{onClose:s,children:e.jsxs("div",{className:z.add_category_modal,style:{width:"23rem",height:"10rem"},children:[e.jsxs("div",{className:z.add_category_modal_title,children:[e.jsx("h6",{children:u(h==="RENEWAL"?"cancl_student_renewal_request":"cancel_student_hostel_request")}),e.jsx("img",{src:"/images/close-post-icon.svg",onClick:s,alt:"close"})]}),e.jsx("button",{className:z.set_fees_structure_btn,title:"Cancel Request",onClick:m,style:{justifyContent:"center",marginTop:"4rem"},children:u("confirm")}),_&&e.jsx(K,{})]})})},jn=Object.freeze(Object.defineProperty({__proto__:null,default:ks},Symbol.toStringTag,{value:"Module"})),_s=({applicant:s,onRefetchWhenSelect:t,hostelId:n,huid:r})=>{var E,S,l,C,F,j,b,I,w,k,g,P,A;const{t:h}=J(),u=ue(),_=re(),[o,a]=i.useState(!1),[f,m]=i.useState(!1),[N,c]=i.useState(!1),[y]=Nt(),d=()=>{var O;_(`/q/${u.username}/student/profile`,{state:{sid:(O=s==null?void 0:s.student)==null?void 0:O._id,viewAs:"ADMISSION_ADMIN"}})},x=O=>{O.stopPropagation(),m(!0)},v=O=>{O.stopPropagation(),a(q=>!q)},T=O=>{var q,U;((q=s==null?void 0:s.student)==null?void 0:q._id)!==""&&r!==""&&(c(R=>!R),y({sid:(U=s==null?void 0:s.student)==null?void 0:U._id,huid:r,selectRenewal:O}).then(()=>{t(),c(R=>!R)}).catch(()=>{c(R=>!R)}))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:D.applicant_card_container,onClick:d,title:"View Profile",children:[e.jsxs("div",{className:D.applicant_card_inner,children:[e.jsx("img",{alt:"Student Request Avatar",src:((E=s==null?void 0:s.student)==null?void 0:E.photoId)!=="1"?`${ne}/${(S=s==null?void 0:s.student)==null?void 0:S.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",loading:"lazy"}),e.jsxs("div",{className:D.applicant_card_inner_info,children:[e.jsx("h6",{children:`${(l=s==null?void 0:s.student)==null?void 0:l.studentFirstName} ${(C=s==null?void 0:s.student)!=null&&C.studentMiddleName?(F=s==null?void 0:s.student)==null?void 0:F.studentMiddleName:""} ${(j=s==null?void 0:s.student)==null?void 0:j.studentLastName}`}),e.jsxs("p",{children:[h("applied_on"),":"," ",te(s==null?void 0:s.apply_on).format("DD MMM yyyy")]})]})]}),e.jsxs("div",{className:D.applicant_card_contact,children:[e.jsxs("div",{className:D.applicant_card_contact_inner,children:[e.jsx("img",{src:"/images/admidion_department/gender.svg",alt:""}),e.jsx("p",{children:(b=s==null?void 0:s.student)==null?void 0:b.studentGender})]}),(((I=s==null?void 0:s.student)==null?void 0:I.studentPhoneNumber)||((w=s==null?void 0:s.student)==null?void 0:w.studentParentsPhoneNumber))&&e.jsxs("div",{className:D.applicant_card_contact_inner,children:[e.jsx("img",{src:"/images/admidion_department/phone.svg",alt:""}),e.jsx("p",{style:{marginBottom:"0 !important"},children:(k=s==null?void 0:s.student)!=null&&k.studentPhoneNumber?(g=s==null?void 0:s.student)==null?void 0:g.studentPhoneNumber:(P=s==null?void 0:s.student)==null?void 0:P.studentParentsPhoneNumber})]})]}),e.jsxs("div",{className:D.application_button,children:[e.jsx("div",{className:D.selectAppBtnContainer,onClick:x,children:e.jsx("div",{className:D.selectBtn,children:h("select")})}),e.jsx("div",{className:D.selectAppBtnContainer,onClick:v,children:e.jsx("div",{className:D.cancelledBtn,children:h("reject")})})]})]}),e.jsx(js,{children:o&&e.jsx(ks,{studentId:(A=s==null?void 0:s.student)==null?void 0:A._id,applicationId:r,onClose:()=>a(O=>!O),onRefetchWhenSelect:t,viewAs:"RENEWAL"})}),f&&e.jsx(gs,{hostelId:n,onClose:()=>m(O=>!O),onSelectedStudent:T,batchId:"",classMasterId:""}),N&&e.jsx(K,{})]})},gn=({carryParentState:s,applicationDetail:t,huid:n,hostelId:r,unitName:h,accessRole:u})=>{const[_,o]=i.useState(!0),[a,f]=i.useState(1),[m,N]=i.useState(""),[c,y]=ee(),[d,x]=i.useState([]),[v,T]=i.useState(!1),[E,S]=i.useState(!0),{getRenewalApplicationListByHostel:l,getRenewalApplicationListByHostelRefetch:C}=bt({data:{huid:n,page:a,limit:10,search:m||""},skip:!n});i.useEffect(()=>{y&&_&&f(I=>I+1)},[y,_]),i.useEffect(()=>{n&&(S(!0),C())},[a,n,C,m]),i.useEffect(()=>{var I,w;m?(x(l==null?void 0:l.request),S(!1)):v?(x(l==null?void 0:l.request),T(!1),S(!1)):l!=null&&l.request?(x(k=>[...new Set([...k,...l==null?void 0:l.request].map(JSON.stringify))].map(JSON.parse)),S(!1)):((I=l==null?void 0:l.request)==null?void 0:I.length)===0&&S(!1),((w=l==null?void 0:l.request)==null?void 0:w.length)===10?o(!0):o(!1)},[l==null?void 0:l.request]);const F=()=>{f(1),C(),T(!0)},j=i.useCallback(de.debounce(I=>N(I),500),[]),b=I=>{j(I.target.value)};return e.jsxs(e.Fragment,{children:[e.jsx(fe,{unitName:h,carryParentState:s,children:e.jsx("input",{type:"text",placeholder:"Search requests...",onChange:b})}),e.jsx(we,{carryParentState:s}),d==null?void 0:d.map((I,w)=>(d==null?void 0:d.length)===w+1?e.jsx("div",{ref:c,children:e.jsx(_s,{applicant:I,onRefetchWhenSelect:F,hostelId:r,huid:n})},w):e.jsx(_s,{applicant:I,onRefetchWhenSelect:F,hostelId:r,huid:n},w)),E&&e.jsx(H,{})]})},ms=({onSelectOffileFees:s,applicant:t})=>{var a,f,m,N,c,y,d,x,v,T,E,S,l,C,F,j,b,I,w;const{t:n}=J(),r=ue(),h=re(),u=()=>{var k;h(`/q/${r.username}/student/profile`,{state:{sid:(k=t==null?void 0:t.student)==null?void 0:k._id,viewAs:"ADMISSION_ADMIN"}})},_=k=>{k.stopPropagation(),s(t)},o=k=>{k.stopPropagation()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:D.applicant_card_container,onClick:u,title:"View Profile",children:[e.jsxs("div",{className:D.applicant_card_inner,children:[e.jsx("img",{alt:"Student Request Avatar",src:((a=t==null?void 0:t.student)==null?void 0:a.photoId)!=="1"?`${ne}/${(f=t==null?void 0:t.student)==null?void 0:f.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg"}),e.jsxs("div",{className:D.applicant_card_inner_info,children:[e.jsx("h6",{children:`${(m=t==null?void 0:t.student)==null?void 0:m.studentFirstName} ${(N=t==null?void 0:t.student)!=null&&N.studentMiddleName?(c=t==null?void 0:t.student)==null?void 0:c.studentMiddleName:""} ${(y=t==null?void 0:t.student)==null?void 0:y.studentLastName}`}),e.jsxs("h6",{children:[n("fee_structure")," : ",((v=(x=(d=t==null?void 0:t.student)==null?void 0:d.hostel_fee_structure)==null?void 0:x.category_master)==null?void 0:v.category_name)??"",", ",n("rs")," ",((E=(T=t==null?void 0:t.student)==null?void 0:T.hostel_fee_structure)==null?void 0:E.total_admission_fees)??""]}),e.jsx("p",{children:t!=null&&t.install_type?t==null?void 0:t.install_type:`
              ${n("select_on")}:
              ${te(t==null?void 0:t.select_on).format("DD MMM yyyy")}`})]})]}),e.jsxs("div",{className:D.applicant_card_contact,children:[e.jsxs("div",{className:D.applicant_card_contact_inner,children:[e.jsx("img",{src:"/images/admidion_department/gender.svg",alt:""}),e.jsx("p",{children:(S=t==null?void 0:t.student)==null?void 0:S.studentGender})]}),(((l=t==null?void 0:t.student)==null?void 0:l.studentPhoneNumber)||((C=t==null?void 0:t.student)==null?void 0:C.studentParentsPhoneNumber))&&e.jsxs("div",{className:D.applicant_card_contact_inner,children:[e.jsx("img",{src:"/images/admidion_department/phone.svg",alt:""}),e.jsx("p",{style:{marginBottom:"0 !important"},children:(F=t==null?void 0:t.student)!=null&&F.studentPhoneNumber?(j=t==null?void 0:t.student)==null?void 0:j.studentPhoneNumber:(b=t==null?void 0:t.student)==null?void 0:b.studentParentsPhoneNumber})]})]}),((I=t==null?void 0:t.payment_status)==null?void 0:I.toLowerCase())==="receipt requested"?e.jsx("div",{className:D.selectBtnContainer,children:e.jsx("div",{className:D.receipt_requested_btn,onClick:o,children:n("receipt_requested")})}):e.jsx("div",{className:D.selectBtnContainer,children:((w=t==null?void 0:t.payment_status)==null?void 0:w.toLowerCase())==="pending"&&e.jsx("div",{className:D.selectBtn,onClick:_,children:n("collect_fee")})})]})})},Nn=({carryParentState:s,huid:t,unitName:n})=>{const[r,h]=i.useState(!0),[u,_]=i.useState(1),[o,a]=i.useState(""),[f,m]=ee(),[N,c]=i.useState([]),[y,d]=i.useState(!1),[x,v]=i.useState(!0),[T,E]=i.useState(""),[S,l]=i.useState(""),{getRenewalSelectListByHostel:C,getRenewalSelectListByHostelRefetch:F}=St({data:{huid:t,page:u,limit:10,search:o||""},skip:!t});i.useEffect(()=>{m&&r&&_(k=>k+1)},[m,r]),i.useEffect(()=>{t&&(v(!0),F())},[u,t,F,o]),i.useEffect(()=>{var k,g;o?(c(C==null?void 0:C.select),v(!1)):y?(c(C==null?void 0:C.select),d(!1),v(!1)):C!=null&&C.select?(c(P=>[...new Set([...P,...C==null?void 0:C.select].map(JSON.stringify))].map(JSON.parse)),v(!1)):((k=C==null?void 0:C.select)==null?void 0:k.length)===0&&v(!1),((g=C==null?void 0:C.select)==null?void 0:g.length)===10?h(!0):h(!1)},[C==null?void 0:C.select]);const j=()=>{_(1),F(),d(!0)},b=i.useCallback(de.debounce(k=>a(k),500),[]),I=k=>{b(k.target.value)},w=k=>{l(k),E("COLLECT_FEES")};return e.jsxs(e.Fragment,{children:[e.jsx(fe,{unitName:n,carryParentState:s,children:e.jsx("input",{type:"text",placeholder:"Search applications...",onChange:I})}),e.jsx(we,{carryParentState:s}),N==null?void 0:N.map((k,g)=>(N==null?void 0:N.length)===g+1?e.jsx("div",{ref:f,children:e.jsx(ms,{applicant:k,onSelectOffileFees:w})},g):e.jsx(ms,{applicant:k,onSelectOffileFees:w},g)),x&&e.jsx(H,{}),T==="COLLECT_FEES"&&e.jsx(vs,{applicant:S,applicationId:S==null?void 0:S.appId,huid:t,onRefetchWhenConfirm:j,onClose:()=>E(""),viewAs:"RENEWAL"})]})},bn=({carryParentState:s,huid:t,unitName:n})=>{const[r,h]=i.useState(!0),[u,_]=i.useState(1),[o,a]=i.useState(""),[f,m]=ee(),[N,c]=i.useState([]),[y,d]=i.useState(!1),[x,v]=i.useState(!0),[T,E]=i.useState(""),[S,l]=i.useState(""),{getRenewalRenewedListByHostel:C,getRenewalRenewedListByHostelRefetch:F}=Ct({data:{huid:t,page:u,limit:10,search:o||""},skip:!t});i.useEffect(()=>{m&&r&&_(g=>g+1)},[m,r]),i.useEffect(()=>{t&&(v(!0),F())},[u,t,F,o]),i.useEffect(()=>{var g,P;o?(c(C==null?void 0:C.confirm),v(!1)):y?(c(C==null?void 0:C.confirm),d(!1),v(!1)):C!=null&&C.confirm?(c(A=>[...new Set([...A,...C==null?void 0:C.confirm].map(JSON.stringify))].map(JSON.parse)),v(!1)):((g=C==null?void 0:C.confirm)==null?void 0:g.length)===0&&v(!1),((P=C==null?void 0:C.confirm)==null?void 0:P.length)===10?h(!0):h(!1)},[C==null?void 0:C.confirm]);const j=()=>{_(1),F(),d(!0)},b=i.useCallback(de.debounce(g=>a(g),500),[]),I=g=>{b(g.target.value)},w=g=>{l(g),E("CANCEL_APPLICANT")},k=g=>{l(g),E("ALLOT_BED")};return e.jsxs(e.Fragment,{children:[e.jsx(fe,{unitName:n,carryParentState:s,children:e.jsx("input",{type:"text",placeholder:"Search applications...",onChange:I})}),e.jsx(we,{carryParentState:s}),N==null?void 0:N.map((g,P)=>(N==null?void 0:N.length)===P+1?e.jsx("div",{ref:f,children:e.jsx(Ie,{applicant:g,onCancelHostelApplication:w,onAllotBed:k})},P):e.jsx(Ie,{applicant:g,onCancelHostelApplication:w,onAllotBed:k},P)),x&&e.jsx(H,{}),T==="CANCEL_APPLICANT"&&e.jsx(Es,{currentApplicant:S,applicationId:S==null?void 0:S.appId,onRefetchWhenAction:j,onClose:()=>E(""),viewAs:"RENEWAL",huid:t}),T==="ALLOT_BED"&&e.jsx(ys,{currentApplicant:S,applicationId:S==null?void 0:S.appId,onRefetchWhenAction:j,onClose:()=>E(""),unitId:t,viewAs:"RENEWAL"})]})},Sn=({carryParentState:s,huid:t,unitName:n})=>{const[r,h]=i.useState(!0),[u,_]=i.useState(1),[o,a]=ee(),[f,m]=i.useState([]),[N,c]=i.useState(!0),[y,d]=i.useState(""),{getRenewalAllotListByHostel:x,getRenewalAllotListByHostelRefetch:v}=vt({data:{huid:t,page:u,limit:10,search:y||""},skip:!t});i.useEffect(()=>{a&&r&&_(S=>S+1)},[a,r]),i.useEffect(()=>{t&&(c(!0),v())},[u,t,v,y]),i.useEffect(()=>{var S,l;y?(m(x==null?void 0:x.allot),c(!1)):x!=null&&x.allot?(m(C=>[...new Set([...C,...x==null?void 0:x.allot].map(JSON.stringify))].map(JSON.parse)),c(!1)):((S=x==null?void 0:x.allot)==null?void 0:S.length)===0&&c(!1),((l=x==null?void 0:x.allot)==null?void 0:l.length)===10?h(!0):h(!1)},[x==null?void 0:x.allot]);const T=i.useCallback(de.debounce(S=>d(S),500),[]),E=S=>{T(S.target.value)};return e.jsxs(e.Fragment,{children:[e.jsx(fe,{unitName:n,carryParentState:s,children:e.jsx("input",{type:"text",placeholder:"Search applications...",onChange:E})}),e.jsx(we,{carryParentState:s}),f==null?void 0:f.map((S,l)=>(f==null?void 0:f.length)===l+1?e.jsx("div",{ref:o,children:e.jsx(Fe,{applicant:S})},l):e.jsx(Fe,{applicant:S},l)),N&&e.jsx(H,{})]})},Cn=({carryParentState:s,huid:t,unitName:n})=>{const[r,h]=i.useState(!0),[u,_]=i.useState(1),[o,a]=ee(),[f,m]=i.useState([]),[N,c]=i.useState(""),[y,d]=i.useState(!0),{getRenewalCancelListByHostel:x,getRenewalCancelListByHostelRefetch:v}=Et({data:{huid:t,page:u,limit:10,search:N||""},skip:!t});i.useEffect(()=>{a&&r&&_(S=>S+1)},[a,r]),i.useEffect(()=>{t&&(d(!0),v())},[u,t,v]),i.useEffect(()=>{var S,l;N?(m(x==null?void 0:x.cancel),d(!1)):x!=null&&x.cancel?(m(C=>[...new Set([...C,...x==null?void 0:x.cancel].map(JSON.stringify))].map(JSON.parse)),d(!1)):((S=x==null?void 0:x.cancel)==null?void 0:S.length)===0&&d(!1),((l=x==null?void 0:x.cancel)==null?void 0:l.length)===10?h(!0):h(!1)},[x==null?void 0:x.cancel]);const T=i.useCallback(de.debounce(S=>c(S),500),[]),E=S=>{T(S.target.value)};return e.jsxs(e.Fragment,{children:[e.jsx(fe,{unitName:n,carryParentState:s,children:e.jsx("input",{type:"text",placeholder:"Search applications...",onChange:E})}),e.jsx(we,{carryParentState:s}),f==null?void 0:f.map((S,l)=>(f==null?void 0:f.length)===l+1?e.jsx("div",{ref:o,children:e.jsx(Oe,{applicant:S})},l):e.jsx(Oe,{applicant:S},l)),y&&e.jsx(H,{})]})},vn=({carryParentState:s,hid:t})=>{var r,h,u,_,o,a,f,m,N,c,y,d,x,v,T;const n=je();return e.jsxs(e.Fragment,{children:[((r=n.search)==null?void 0:r.substring(19))==="application"&&e.jsx(gn,{hostelId:t,carryParentState:s,huid:(h=n.state)==null?void 0:h.huid,unitName:(u=n.state)==null?void 0:u.unitName}),((_=n.search)==null?void 0:_.substring(19))==="select"&&e.jsx(Nn,{hostelId:t,carryParentState:s,huid:(o=n.state)==null?void 0:o.huid,unitName:(a=n.state)==null?void 0:a.unitName}),((f=n.search)==null?void 0:f.substring(19))==="renewed"&&e.jsx(bn,{carryParentState:s,huid:(m=n.state)==null?void 0:m.huid,unitName:(N=n.state)==null?void 0:N.unitName}),((c=n.search)==null?void 0:c.substring(19))==="allot"&&e.jsx(Sn,{carryParentState:s,huid:(y=n.state)==null?void 0:y.huid,unitName:(d=n.state)==null?void 0:d.unitName}),((x=n.search)==null?void 0:x.substring(19))==="cancel"&&e.jsx(Cn,{carryParentState:s,huid:(v=n.state)==null?void 0:v.huid,unitName:(T=n.state)==null?void 0:T.unitName})]})},bo=({hid:s,carryParentState:t,accessApplication:n,accessRole:r,accessTpye:h,callApi:u,pageOpenAs:_,instituteId:o})=>{var x,v,T,E,S,l,C,F,j,b;const{t:a}=J(),f=re(),m=je(),N=ue(),c=[{name:a("application"),id:0,url:"member/hostel?a=request",is_active:r==="MULTI_APP_ACCESS"||!r?"enabled":"disabled"},{name:a("completed"),id:1,url:"member/hostel?a=request&completed",is_active:r?"disabled":"enabled"},{name:a("renewals"),id:2,url:"member/hostel?a=request&unit&renewal",is_active:r==="RENEWAL_UNIT_ACCESS"||!r?"enabled":"disabled"}],y=[{name:a("application"),id:0,url:"hostel?a=request",is_active:"enabled"},{name:a("completed"),id:1,url:"hostel?a=request&completed",is_active:"enabled"},{name:a("renewals"),id:2,url:"hostel?a=request&unit&renewal",is_active:"enabled"}],d=()=>{_==="INSTITUTE"?f(`/q/${N.username}/hostel`,{state:{...t}}):f(`/q/${N.username}/member/hostel`,{state:{...t}})};return e.jsxs(e.Fragment,{children:[(((x=m.search)==null?void 0:x.substring(3))==="request"||((v=m.search)==null?void 0:v.substring(3))==="request&completed"||((T=m.search)==null?void 0:T.substring(3))==="request&unit&renewal")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:X.with_search,style:{justifyContent:"flex-start",gap:"1rem"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:d,alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),e.jsx("h6",{children:a("reuqests")})]}),e.jsx(ke,{tabList:_==="INSTITUTE"?y:c,activeIndexTab:((E=m.search)==null?void 0:E.substring(3))==="request"?0:((S=m.search)==null?void 0:S.substring(3))==="request&completed"?1:2,showAs:!0,customStyleLink:{width:"50%"},carryParentState:t}),e.jsx(Y,{customStyle:{width:"100%",marginBottom:"0.5rem"}})]}),((l=m.search)==null?void 0:l.substring(3))==="request"&&e.jsx(xn,{hid:s,carryParentState:t,accessRole:r,accessTpye:h,accessApplication:n,callApi:u,pageOpenAs:_}),((C=m.search)==null?void 0:C.substring(3,18))==="request&ongoing"&&e.jsx(fn,{hid:s,carryParentState:t,accessRole:r,accessTpye:h,callApi:u,pageOpenAs:_,instituteId:o}),((F=m.search)==null?void 0:F.substring(3,20))==="request&completed"&&e.jsx(nn,{hid:s,carryParentState:t,accessRole:r,accessTpye:h,callApi:u,pageOpenAs:_}),((j=m.search)==null?void 0:j.substring(3))==="request&unit&renewal"&&e.jsx(Ut,{hid:s,carryParentState:t,viewAs:"RENEWAL"}),((b=m.search)==null?void 0:b.substring(3,18))==="request&renewal"&&e.jsx(vn,{hid:s,carryParentState:t})]})},En=({fees_category_count:s,fee_master_array_count:t,fee_structure_count:n,carryParentState:r,accessRole:h,callApi:u,pageOpenAs:_})=>{const{t:o}=J();return e.jsx(e.Fragment,{children:_==="INSTITUTE"?e.jsxs(e.Fragment,{children:[e.jsx(De,{carryParentState:r,activeTab:"fee&n=category",children:e.jsxs("div",{className:z.fees_category,children:[e.jsx("div",{className:z.fees_category_icon,children:e.jsx("img",{src:"/images/fees-category-icon.svg",alt:"categor icon"})}),e.jsxs("div",{className:z.fees_category_text,children:[e.jsx("h6",{children:o("fees_master")}),e.jsxs("p",{children:[o("fees_total")," ",s+t]})]})]})}),e.jsx(De,{carryParentState:r,activeTab:"fee&n=structure",children:e.jsxs("div",{className:z.department_card_container,style:{marginTop:"0.8rem"},children:[e.jsx("img",{src:"/images/profileAndCover/department-profile-img.svg",alt:"department avatar",className:z.department_card_image}),e.jsxs("div",{children:[e.jsx("h6",{className:z.department_card_name,children:o("fees_structure")}),e.jsxs("p",{className:z.department_card_head,children:[o("total_fees_structure")," ",n??0]})]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(be,{carryParentState:r,activeTab:"fee&n=category",accessRole:h,callApi:u,children:e.jsxs("div",{className:z.fees_category,children:[e.jsx("div",{className:z.fees_category_icon,children:e.jsx("img",{src:"/images/fees-category-icon.svg",alt:"categor icon"})}),e.jsxs("div",{className:z.fees_category_text,children:[e.jsx("h6",{children:o("fees_master")}),e.jsxs("p",{children:[o("fees_total")," ",s+t]})]})]})}),e.jsx(be,{carryParentState:r,activeTab:"fee&n=structure",accessRole:h,callApi:u,children:e.jsxs("div",{className:z.department_card_container,style:{marginTop:"0.8rem"},children:[e.jsx("img",{src:"/images/profileAndCover/department-profile-img.svg",alt:"department avatar",className:z.department_card_image}),e.jsxs("div",{children:[e.jsx("h6",{className:z.department_card_name,children:o("fees_structure")}),e.jsxs("p",{className:z.department_card_head,children:[o("total_fees_structure")," ",n??0]})]})]})})]})})},So=({financeId:s,instituteId:t,fees_category_count:n,fee_master_array_count:r,fee_structure_count:h,carryParentState:u,accessRole:_,hostelId:o,callApi:a,pageOpenAs:f})=>{var N,c,y;const m=je();return e.jsxs("div",{className:z.fess_container,children:[((N=m==null?void 0:m.search)==null?void 0:N.substring(3))==="fee"&&e.jsx(En,{instituteId:t,fees_category_count:n??0,carryParentState:u,fee_master_array_count:r??0,fee_structure_count:h,accessRole:_,callApi:a,pageOpenAs:f}),((c=m==null?void 0:m.search)==null?void 0:c.substring(9))==="category"&&e.jsx(Mt,{financeId:s,openAs:"HOSTEL_MANAGER"}),((y=m==null?void 0:m.search)==null?void 0:y.substring(9))==="structure"&&e.jsx(Vt,{financeId:s,instituteId:t,hostelId:o})]})};export{ho as H,mo as I,bo as a,uo as b,No as c,go as d,jo as e,fo as f,xo as g,So as h};
