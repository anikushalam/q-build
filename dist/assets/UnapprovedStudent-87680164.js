import{r,W as z,ae as A,j as a,Q,e as J,R as T,_ as K,u as M,t as q,lz as H,q as I,l as W,S as X}from"./index-731451a5.js";import{s as d}from"./InstituteStudentConfig-655f05b8.js";import{C as Y}from"./CustomSuspense-e90dc607.js";import{s}from"./StaffTable.module-98d8c511.js";import{E as $}from"./EmptyInfo-7233226d.js";import"./StaffTabSidebar-94fd18fa.js";import"./institute-staff-student-api-7f4890fe.js";import"./BorderBottom-47800983.js";import"./SelectOptions.module-81ece918.js";import"./constant_value-4cd2b3e0.js";import"./numberToWords.min-dbca819b.js";import"./InputDateField-70b961e2.js";import"./DatePicker-305f3dc6.js";import"./DownloadToggle-df915ffe.js";import"./JoinFormCalender-5158d888.js";import"./JoinForm.module-212f9bb3.js";import"./Funds.module-95df49a8.js";import"./PopupWrapper-ffbaef7a.js";import"./Overlay-07ce6f88.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalWrapper-6e85c9f3.js";import"./SearchModalBackdrop-5b309d60.js";import"./SearchHeader.module-b69c8942.js";import"./CustomSelectDepartment-a5dd9a35.js";import"./export-data-api-9f41e023.js";import"./index-43f19233.js";import"./index-387d7a00.js";import"./admission-api-56b87fde.js";import"./AllStudentFilter-2a0b02e0.js";import"./FeesStructure.module-7a88fbbc.js";import"./SendFilterStudentMessage-cf1c7d66.js";import"./JoinFormTextArea-7f6dded0.js";import"./CustomSuspenseGif-5a30d901.js";import"./UniversalTab-d4f2174c.js";import"./StaffHeader-8b393c01.js";import"./Switch-81e70f2f.js";import"./SwitchBase-2ba5f868.js";import"./StaffProfilePhoto-59dc6912.js";import"./student-api-4ee7144d.js";import"./StudentSubjectList-241a7bce.js";import"./BonafideReason-8b18d679.js";import"./JoinFormInput-8e74a0e0.js";import"./pdf-convertor-function-e794de58.js";import"./department-api-a4f0b4b7.js";import"./main.certificate.pdf.worker-8bd77f87.js";import"./StudentProfileAbout-bf2da4ac.js";import"./StaffProfileEachInfo-21badda6.js";import"./ViewFileDialog-0c131c06.js";import"./StudentProfileLoginDetails-c5fc54ba.js";import"./StudentMessageHistory-a3e2c406.js";import"./AdmissionApplicationRequest.module-43e4e129.js";import"./History.module-4b700312.js";import"./ReminderMessageStudentList-ba95587e.js";import"./PromoteDepartment.module-1bdd3b1d.js";import"./OsReminderStudentCard-db46fbab.js";const Z=({id:e,children:l})=>{const[g,p]=r.useState(!1),[c]=z(),[t]=A(),n=w=>{var R,x;if((x=(R=w.target)==null?void 0:R.files)!=null&&x.length&&e){p(h=>!h);const f=new FormData;f.append("file",w.target.files[0]),c({fileUpload:f}).then(h=>{var j,N;(j=h.data)!=null&&j.imageKey?t({id:e,excelFile:{excel_file:(N=h.data)==null?void 0:N.imageKey}}).then(()=>{p(m=>!m)}).catch({}):p(m=>!m)}).catch({})}};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:d.exploreParent,children:a.jsxs("div",{className:d.exploreChild,style:{width:"100%"},children:[a.jsxs("div",{className:d.searchbar,style:{width:"100%"},children:[l,a.jsx("img",{alt:"img",src:"/images/search-dash-icon.svg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:d.upload_excel_file,htmlFor:"uploadExcel",children:a.jsx("img",{src:"/images/upload-xslx-icon.svg",alt:"add student icon",title:"Upload unapproved excel file"})}),a.jsx("input",{type:"file",id:"uploadExcel",accept:".xlsx",onChange:n,style:{display:"none"}})]})]})}),g&&a.jsx(Q,{})]})},y=({student:e,onViewProfile:l})=>a.jsxs("div",{onClick:()=>l(e==null?void 0:e._id),children:[a.jsxs("div",{className:s.oneRow,children:[a.jsx("div",{className:`${s.oneRowIndex} ${s.oneRowwIndex}`,children:a.jsx("p",{className:s.oneRowIndexValue,children:e==null?void 0:e.studentGRNO})}),a.jsxs("div",{className:s.oneRowName,children:[a.jsx("div",{className:s.oneRowNameImage,children:a.jsx("img",{src:e!=null&&e.studentProfilePhoto?`${J}/${e==null?void 0:e.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",loading:"lazy",alt:""})}),a.jsxs("div",{children:[a.jsx("p",{className:s.oneRowNameText,children:`${e==null?void 0:e.studentFirstName} ${e!=null&&e.studentMiddleName?e==null?void 0:e.studentMiddleName:""} ${e==null?void 0:e.studentLastName}`}),a.jsx("p",{className:s.oneRowNamePlaceholder,children:e!=null&&e.studentClass?e==null?void 0:e.studentClass.classTitle:""})]})]}),a.jsxs("div",{className:s.oneRowContact,children:[a.jsxs("div",{className:s.oneRowContactEmailIcon,children:[a.jsx("img",{src:"/images/user_signup/gender.svg",alt:"gender icon"}),a.jsx("p",{className:s.oneRowContactEmail,children:e==null?void 0:e.studentGender})]}),a.jsxs("div",{className:s.oneRowContactEmailIcon,children:[a.jsx("img",{src:"/images/phone-white.svg",alt:""}),a.jsx("p",{className:s.oneRowContactNumber,children:e!=null&&e.user.userPhoneNumber?e==null?void 0:e.user.userPhoneNumber:(e==null?void 0:e.user.userEmail)??""})]})]}),a.jsx("div",{className:s.oneRowDate,children:a.jsx("p",{className:s.oneRowDateText,children:(e==null?void 0:e.applicable_fees_pending)??0})})]}),a.jsx("p",{className:s.oneRowBottomBorder})]}),U=T.lazy(()=>K(()=>import("./InstituteStudentConfig-655f05b8.js").then(e=>e.S),["assets/InstituteStudentConfig-655f05b8.js","assets/index-731451a5.js","assets/index-4d24e8f6.css","assets/StaffTabSidebar-94fd18fa.js","assets/institute-staff-student-api-7f4890fe.js","assets/StaffTabSidebar-c4f80257.css","assets/BorderBottom-47800983.js","assets/BorderBottom-eabbc1eb.css","assets/SelectOptions.module-81ece918.js","assets/SelectOptions-3cc49e6f.css","assets/constant_value-4cd2b3e0.js","assets/CustomSuspense-e90dc607.js","assets/numberToWords.min-dbca819b.js","assets/InputDateField-70b961e2.js","assets/DatePicker-305f3dc6.js","assets/DatePicker-9ecb4579.css","assets/InputDateField-7b9a49d5.css","assets/DownloadToggle-df915ffe.js","assets/DownloadToggle-4df41fca.css","assets/JoinFormCalender-5158d888.js","assets/JoinForm.module-212f9bb3.js","assets/JoinForm-e988a09c.css","assets/Funds.module-95df49a8.js","assets/Funds-ef5f1a81.css","assets/PopupWrapper-ffbaef7a.js","assets/Overlay-07ce6f88.js","assets/Overlay.module-9133d1bb.js","assets/Overlay-6f7772cd.css","assets/SearchModalWrapper-6e85c9f3.js","assets/SearchModalBackdrop-5b309d60.js","assets/SearchHeader.module-b69c8942.js","assets/SearchHeader-d07f850c.css","assets/CustomSelectDepartment-a5dd9a35.js","assets/export-data-api-9f41e023.js","assets/index-43f19233.js","assets/index-387d7a00.js","assets/admission-api-56b87fde.js","assets/AllStudentFilter-2a0b02e0.js","assets/FeesStructure.module-7a88fbbc.js","assets/FeesStructure-45be5563.css","assets/SendFilterStudentMessage-cf1c7d66.js","assets/JoinFormTextArea-7f6dded0.js","assets/StaffTable.module-98d8c511.js","assets/StaffTable-ed27e954.css","assets/CustomSuspenseGif-5a30d901.js","assets/UniversalTab-d4f2174c.js","assets/UniversalTab-ec2a600d.css","assets/StaffHeader-8b393c01.js","assets/Switch-81e70f2f.js","assets/SwitchBase-2ba5f868.js","assets/StaffProfilePhoto-59dc6912.js","assets/student-api-4ee7144d.js","assets/StudentSubjectList-241a7bce.js","assets/StudentSubjectList-e5915585.css","assets/BonafideReason-8b18d679.js","assets/JoinFormInput-8e74a0e0.js","assets/pdf-convertor-function-e794de58.js","assets/department-api-a4f0b4b7.js","assets/main.certificate.pdf.worker-8bd77f87.js","assets/StudentProfileAbout-bf2da4ac.js","assets/StaffProfileEachInfo-21badda6.js","assets/ViewFileDialog-0c131c06.js","assets/StudentProfileLoginDetails-c5fc54ba.js","assets/StudentMessageHistory-a3e2c406.js","assets/AdmissionApplicationRequest.module-43e4e129.js","assets/AdmissionApplicationRequest-a4f8490c.css","assets/History.module-4b700312.js","assets/History-abacb65d.css","assets/ReminderMessageStudentList-ba95587e.js","assets/PromoteDepartment.module-1bdd3b1d.js","assets/PromoteDepartment-cb3df8f3.css","assets/OsReminderStudentCard-db46fbab.js","assets/EmptyInfo-7233226d.js","assets/InstituteStudentConfig-faaf5a4e.css"])),ue=({instituteId:e})=>{var S,D,F,O;const{t:l}=M(),[g,p]=r.useState(""),[c,t]=r.useState([]),[n,w]=r.useState(""),[R,x]=q(),[f,h]=r.useState(1),[j,N]=r.useState(!0),[m,v]=r.useState(!0),{getUnapprovedStudentByInstitute:o,getUnapprovedStudentByInstituteRefetch:C}=H({data:{id:e,page:f,limit:10,search:n},skip:!e}),{oneInstituteDashboard:E,oneInstituteDashboardRefetch:b}=I({id:e,skip:!e});T.useEffect(()=>{e&&b()},[e,b]),r.useEffect(()=>{e&&(v(!0),C())},[e,f,n,C]),r.useEffect(()=>{x&&j&&h(i=>i+1)},[x,j]),r.useEffect(()=>{var i,_;n?(t(o==null?void 0:o.studentIns),v(!1)):o!=null&&o.studentIns?(t(V=>[...new Set([...V,...o==null?void 0:o.studentIns].map(JSON.stringify))].map(JSON.parse)),v(!1)):((i=o==null?void 0:o.studentIns)==null?void 0:i.length)===0&&v(!1),((_=o==null?void 0:o.studentIns)==null?void 0:_.length)===10?N(!0):N(!1)},[o==null?void 0:o.studentIns]);const L=()=>{p("")},P=i=>{p(i)},k=r.useCallback(W.debounce(i=>w(i),500),[]),G=i=>{k(i.target.value)};return a.jsx(a.Fragment,{children:g?a.jsx(Y,{children:a.jsx(U,{sid:g,onClose:L})}):a.jsxs(a.Fragment,{children:[a.jsx(Z,{id:e,children:a.jsx("input",{type:"text",placeholder:l("search"),name:"search",className:`form-control ${d.searchinput}`,onChange:G,style:{width:"95%"}})}),a.jsxs("div",{className:s.header,children:[a.jsxs("p",{className:s.index,children:[" ",((D=(S=E==null?void 0:E.institute)==null?void 0:S.alias_pronounciation)==null?void 0:D.student_alias)??l("gr_no")]}),a.jsx("p",{className:s.name,children:l("name")}),a.jsx("p",{className:s.contact,children:l("contact_number")}),a.jsx("p",{className:s.joinigDate,children:l("applicable_outs")})]}),a.jsxs("div",{className:s.container,children:[c==null?void 0:c.map((i,_)=>(c==null?void 0:c.length)===_+1?a.jsx("div",{ref:R,children:a.jsx(y,{onViewProfile:P,student:i})},i==null?void 0:i.studentGRNO):a.jsx(y,{onViewProfile:P,student:i},i==null?void 0:i.studentGRNO)),!m&&!((F=o==null?void 0:o.studentIns)!=null&&F.length)&&a.jsx($,{customStyleContainer:{marginTop:"5rem"},title:"No student found.",subtitle:"Please make sure you have added unappoved students."}),n&&!m&&!((O=o==null?void 0:o.studentIns)!=null&&O.length)&&a.jsx($,{customStyleContainer:{marginTop:"5rem"},title:"No search found!"}),m&&a.jsx(X,{})]})]})})};export{ue as default};
