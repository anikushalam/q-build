import{u as O,r,oD as G,ni as w,oE as E,ad as J,j as t,D as R}from"./index-731451a5.js";/* empty css                   */import{L as q}from"./LoaderButton-71df50a7.js";import{S as I}from"./StringLength-222a9fd1.js";import{J as x}from"./JoinFormInput-8e74a0e0.js";import"./StringLength.module-75a6e080.js";import"./JoinForm.module-212f9bb3.js";const B="_DModal_a5e0x_1",H="_title_a5e0x_9",Y="_input_a5e0x_26",$="_mid_a5e0x_64",z="_text_a5e0x_77",K="_btn_a5e0x_99",P="_notFound_a5e0x_136",Q="_item_a5e0x_139",U="_select_a5e0x_154",V="_tooltip_a5e0x_180",W="_profileToolTip_a5e0x_188",X="_triangle_a5e0x_201",Z="_triangleDisplay_a5e0x_211",ee="_profilelist_a5e0x_215",te="_subject_tile_container_a5e0x_293",ae="_subject_tile_a5e0x_293",se="_subject_tile_active_a5e0x_301",l={DModal:B,title:H,input:Y,mid:$,text:z,btn:K,notFound:P,item:Q,select:U,tooltip:V,profileToolTip:W,triangle:X,triangleDisplay:Z,profilelist:ee,subject_tile_container:te,subject_tile:ae,subject_tile_active:se};function ue({departmentModal:S,hideModal:p,id:c,did:m}){const{t:n}=O(),[_,C]=r.useState("Standard/Grade/Level Master"),[b,d]=r.useState(!1),[M,h]=r.useState(""),[o,j]=r.useState(""),[f,D]=r.useState(""),[u,g]=r.useState([]),v=e=>{C(e),j("")},[N]=G(),{allSubjectMasterRefetch:T}=w({data:{id:c,did:m},skip:!c}),[y]=E(),{allClassMasterRefetch:L}=J({data:{id:c,did:m},skip:!c}),F=()=>{_==="Standard/Grade/Level Master"?o?(d(!0),y({className:{className:o},id:c,did:m}).then(e=>{e!=null&&e.data&&(p(!1),d(!1),j(""),L())}).catch({})):h({subjectName:"* required"}):_==="Subject Master"&&(o?(d(!0),N({subject:{subjectName:o,subjectType:"Mandatory",co_attainment_count:f,co_attainment_list:u},id:c,did:m}).then(e=>{e!=null&&e.data&&(p(!1),d(!1),T(),j(""))}).catch({})):h({subjectName:"* required"}))},k=e=>{D(e.target.value);let s=[];for(let a=0;a<+e.target.value;a++){let i={attainment_name:`CO${a+1}`,attainment_type:"CO"};s.push(i)}g(s)},A=(e,s)=>{const a=[...u];for(let i=0;i<(a==null?void 0:a.length);i++)i===s&&(a[i].attainment_name=e.target.value);g(a)};return t.jsx(R,{open:S,children:t.jsxs("div",{className:l.DModal,children:[t.jsxs("div",{className:l.title,children:[t.jsx("h5",{children:n("create_new_master")}),t.jsx("img",{src:"/images/close-post-icon.svg",onClick:()=>p(!1),alt:""})]}),t.jsxs("div",{className:l.item,children:[t.jsx("h6",{children:n("create_master_header_1")}),t.jsxs("section",{className:l.subject_tile_container,children:[t.jsx("div",{className:_==="Standard/Grade/Level Master"?l.subject_tile_active:l.subject_tile,onClick:()=>v("Standard/Grade/Level Master"),children:"Standard/Grade/Level Master"}),t.jsx("div",{className:_==="Subject Master"?l.subject_tile_active:l.subject_tile,onClick:()=>v("Subject Master"),children:"Subject Master"})]})]}),t.jsx(x,{labelText:n("create_master_header_2"),placeholder:n("e.g. 6th Class/ FYJC"),name:"subjectName",value:o,type:"text",onChange:e=>{var s;((s=e.target.value)==null?void 0:s.length)<=40&&j(e.target.value)},errorShow:M}),t.jsx(I,{maxLength:40,valueLength:o}),_==="Subject Master"?t.jsxs(t.Fragment,{children:[t.jsx(x,{labelText:n("co_count"),placeholder:n("co_count_placeholder"),name:"count",value:f,type:"text",onChange:k}),u==null?void 0:u.map((e,s)=>t.jsx(x,{labelText:n("co_name"),placeholder:n("co_name_placeholder"),name:e.attainment_name,value:e.attainment_name,type:"text",onChange:a=>A(a,s)},s))]}):null,t.jsxs("button",{className:l.btn,onClick:F,disabled:b,children:[t.jsx("p",{children:n("create")}),b&&t.jsx("div",{children:t.jsx(q,{})})]})]})})}export{ue as default};
