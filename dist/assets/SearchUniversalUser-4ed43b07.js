import{u as $,r as n,t as u,R as d,k as F,l as q,j as e,D,e as w}from"./index-731451a5.js";import{p as J}from"./search-api-15f7f9f9.js";const L="_assign_title_vx9ec_1",O="_assign_search_container_vx9ec_22",V="_assign_search_input_vx9ec_36",H="_assign_show_list_vx9ec_58",T="_assign_show_list_each_vx9ec_68",z="_assign_each_paragraph_vx9ec_90",B="_universal_modal_vx9ec_95",i={assign_title:L,assign_search_container:O,assign_search_input:V,assign_show_list:H,assign_show_list_each:T,assign_each_paragraph:z,universal_modal:B},M=({onClose:o,title:S,headSelect:b,assignHead:N,disabledId:_})=>{const{t:k}=$(),[p,C]=n.useState(1),[l,m]=n.useState(!0),[E,x]=u(),[r,y]=n.useState(""),[t,f]=d.useState([]),c=F(s=>s.idChange),{universalUser:a,universalUserRefetch:h}=J({search:r,page:p,limit:10});d.useEffect(()=>{c!=null&&c.id&&h()},[c==null?void 0:c.id,h,p]),n.useEffect(()=>{x&&l&&C(s=>s+1)},[x,l]),d.useEffect(()=>{if(a!=null&&a.user)if(r)f(a==null?void 0:a.user);else{const s=[...t,...a==null?void 0:a.user],g=[...new Set(s.map(JSON.stringify))].map(JSON.parse);f(g)}(a==null?void 0:a.user.length)===10?m(!0):m(!1)},[a==null?void 0:a.user]),n.useEffect(()=>{r&&P()},[r]);const P=()=>{h()},R=n.useCallback(q.debounce(s=>y(s),500),[]),A=s=>{R(s)},j=s=>{_===(s==null?void 0:s._id)||(b(s),o())};return e.jsx(D,{open:N,onClose:o,children:e.jsxs("div",{style:{backgroundColor:"#FAFAFA"},children:[e.jsxs("div",{className:i.assign_title,children:[e.jsx("h5",{children:S}),e.jsx("img",{src:"/images/close-post-icon.svg",onClick:o,alt:"staff assign pop close icon"})]}),e.jsxs("div",{className:i.assign_search_container,children:[e.jsx("input",{type:"text",placeholder:k("search"),className:i.assign_search_input,onChange:s=>A(s.target.value)}),e.jsx("img",{src:"/images/search-dash-icon.svg",alt:"search icon"})]}),e.jsx("div",{className:i.assign_show_list,children:t==null?void 0:t.map((s,g)=>(t==null?void 0:t.length)===g+1?e.jsxs("div",{ref:E,children:[e.jsxs("div",{className:i.assign_show_list_each,style:_===s._id?{backgroundColor:"rgba(75, 26, 133, 0.1)"}:{backgroundColor:"inherit"},onClick:()=>j(s),children:[e.jsx("img",{src:s!=null&&s.profilePhoto?`${w}/${s.profilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),e.jsxs("div",{className:i.assign_each_paragraph,children:[e.jsx("h6",{children:s==null?void 0:s.userLegalName}),e.jsx("p",{children:s==null?void 0:s.username})]})]}),e.jsx("hr",{})]},s._id):e.jsxs("div",{children:[e.jsxs("div",{className:i.assign_show_list_each,style:_===s._id?{backgroundColor:"rgba(75, 26, 133, 0.1)"}:{backgroundColor:"inherit"},onClick:()=>j(s),children:[e.jsx("img",{src:s!=null&&s.profilePhoto?`${w}/${s.profilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),e.jsxs("div",{className:i.assign_each_paragraph,children:[e.jsx("h6",{children:s==null?void 0:s.userLegalName}),e.jsx("p",{children:s==null?void 0:s.username})]})]}),e.jsx("hr",{})]},s._id))})]})})};export{M as S};
