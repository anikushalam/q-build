import{u as K,c as Q,r as h,W as z,k as G,w as L,j as t,Q as M,d as O,s as P}from"./index-731451a5.js";import{s as F}from"./AdmisionAdmin.module-940a8610.js";import{s as i}from"./AdmissionSiteInfo.module-332fbdef.js";import{J as R}from"./JoinFormTextArea-7f6dded0.js";import{B as W}from"./BorderBottom-47800983.js";import{J as C}from"./JoinFormInput-8e74a0e0.js";import{g as $,h as q,i as H}from"./setting-api-bd1a4a3c.js";import{J as V}from"./JoinFormFilee-490746bf.js";import"./JoinForm.module-212f9bb3.js";import"./ViewFileDialog-0c131c06.js";import"./Overlay-07ce6f88.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalBackdrop-5b309d60.js";import"./SearchHeader.module-b69c8942.js";const X=({fid:c,viewAs:f})=>{var N,S;const{t:a}=K(),I=Q(),[b,d]=h.useState(!1),[w]=z(),[x,y]=h.useState([]),[o,_]=h.useState({post_content:{attach:"",title:""},content:[]}),m=G(e=>e.idChange.id),[U]=$(),[k]=q();H({fid:c,skip:!c});const{data:Y,refetch:v}=L(m,{skip:f==="INSTITUTE"?!0:!m});h.useEffect(()=>{m&&v()},[m,v]),h.useEffect(()=>{_(e=>({...e,content:x}))},[x]);const A=()=>{I(-1)},g=(e,l)=>{e.target.name==="title"&&_(s=>({...s,post_content:{...s.post_content,title:e.target.value}}));const n=[...x];for(let s=0;s<(n==null?void 0:n.length);s++)s===l&&(n[s][e.target.name]=e.target.value);y(n)},E=(e,l,n,s)=>{d(j=>!j);const p=new FormData;p.append("file",e),w({fileUpload:p}).then(j=>{var T;let r={documentType:"",documentName:"",documentSize:"",documentKey:""};r.documentType=e.type,r.documentName=e.name,r.documentSize=e.size,r.documentKey=(T=j.data)==null?void 0:T.imageKey,s.push(r.documentKey),_(u=>({...u,post_content:{...u.post_content,attach:r.documentKey}})),d(u=>!u)}).catch({})},J=(e,l)=>{var s;const n=[];if((s=e.target.files)!=null&&s.length)for(let p in e.target.files)typeof e.target.files[p]=="object"&&E(e.target.files[p],e.target.name,l,n)},B=e=>{y([...o[e],{headline:"",headline_content:""}])},D=()=>{d(e=>!e),c?k({fid:c,updateSiteInfo:{otherField:o}}).then(()=>{d(e=>!e)}).catch({}):U({id:m,updateSiteInfo:{otherField:o}}).then(()=>{d(e=>!e)}).catch({})};return t.jsx("div",{className:i.bgContainer,children:t.jsxs("div",{className:i.container,children:[t.jsxs("div",{className:i.containerhead,children:[t.jsx("h6",{children:a("update_facilities_info")}),t.jsx("img",{src:"/images/close-post-icon.svg",alt:"",onClick:A})]}),t.jsx(W,{customStyle:{width:"100%"}}),t.jsx("div",{className:i.containercontent,children:t.jsxs("div",{className:i.container_inner_content,children:[t.jsx("h6",{style:{marginTop:"1.5rem"},children:a("details_facilities")}),t.jsxs("div",{className:i.show_field,style:{alignItems:"flex-start"},children:[t.jsx(R,{labelText:a("facilities_title"),placeholder:a("facilities_title_placeholder"),name:"title",value:(N=o.post_content)==null?void 0:N.title,type:"text",onChange:g,customStyleContainer:{width:"48%"}}),t.jsx(V,{acceptType:"application/pdf",labelText:a("facilities_file"),multiple:!1,onChange:J,errorShow:!1,customStyleContainer:{width:"48%"},name:"facilities_file",labelname:"facilities_file",value:o.post_content.attach})]}),t.jsx("h6",{style:{marginTop:"1.5rem"},children:a("facilities")}),t.jsx("div",{className:i.add_contact_person,children:(S=o==null?void 0:o.content)==null?void 0:S.map((e,l)=>t.jsx("div",{children:t.jsxs("div",{className:i.show_field,children:[t.jsx(C,{labelText:a("headline"),placeholder:a("headline_placeholder"),name:"headline",value:e==null?void 0:e.headline,type:"text",onChange:n=>g(n,l),customStyleContainer:{width:"49.5%"}}),t.jsx(C,{labelText:a("content"),placeholder:a("content_placeholder"),name:"headline_content",value:e==null?void 0:e.headline_content,type:"text",onChange:n=>g(n,l),customStyleContainer:{width:"49.5%"}})]})},l))}),t.jsx("button",{className:i.add_contact_person_btn,title:"Add Facilities",onClick:()=>B("content"),children:a("add_facility")})]})}),b&&t.jsx(M,{}),t.jsx("button",{className:i.update_btn,onClick:D,children:a("update")})]})})};function he(){var f,a;const c=O();return t.jsxs("div",{className:F.insChat,children:[t.jsx("div",{className:F.navbarr,children:t.jsx(P,{status:"home"})}),((f=c.search)==null?void 0:f.substring(3))==="site"&&t.jsx(X,{fid:(a=c.state)==null?void 0:a.fid,viewAs:"INSTITUTE"})]})}export{he as default};
