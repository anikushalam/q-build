import{u as B,k as W,r as p,W as L,ae as q,j as e,Q as K,a5 as z,S as $,$ as H,c as X,s as Z}from"./index-731451a5.js";import{s as a}from"./InstituteSetting.module-7e640f80.js";import{B as T}from"./BorderBottom-47800983.js";import{C as j}from"./Card-935ca72a.js";import{i as G,a as ee,j as te,k as se,l as ae,m as ie}from"./institute-staff-student-api-7f4890fe.js";import{a as le}from"./admission-api-56b87fde.js";import{S as Q}from"./SelectDepartmentCard-a2cc20fb.js";import{P as V}from"./PopupWrapper-ffbaef7a.js";import{s as k}from"./SeatingArrangement.module-3f4ae6aa.js";import{C as ce}from"./ClassCard-ebc64e14.js";import"./Overlay-07ce6f88.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalWrapper-6e85c9f3.js";import"./SearchModalBackdrop-5b309d60.js";import"./SearchHeader.module-b69c8942.js";import"./AdmissionApplicationRequest.module-43e4e129.js";const ne=({onActive:l})=>{const{t}=B(),_=W(n=>n.idChange.id),[f,c]=p.useState(!1),[g]=L(),[S]=G(),[h]=ee(),[y]=le(),[E]=q(),o=n=>{var m;if((m=n.target.files)!=null&&m.length){c(!0);const r=new FormData;r.append("file",n.target.files[0]),g({fileUpload:r}).then(x=>{var s,u;(s=x.data)!=null&&s.imageKey?S({id:_,excelFile:{excel_file:(u=x.data)==null?void 0:u.imageKey}}).then(()=>{c(!1)}).catch({}):c(!1)}).catch({})}},b=n=>{var m;if((m=n.target.files)!=null&&m.length){c(!0);const r=new FormData;r.append("file",n.target.files[0]),g({fileUpload:r}).then(x=>{var s,u;(s=x.data)!=null&&s.imageKey?E({id:_,excelFile:{excel_file:(u=x.data)==null?void 0:u.imageKey}}).then(()=>{c(!1)}).catch({}):c(!1)}).catch({})}},d=n=>{var m;if((m=n.target.files)!=null&&m.length){c(!0);const r=new FormData;r.append("file",n.target.files[0]),g({fileUpload:r}).then(x=>{var s,u;(s=x.data)!=null&&s.imageKey?y({id:_,excelFile:{excel_file:(u=x.data)==null?void 0:u.imageKey}}).then(()=>{c(!1)}).catch({}):c(!1)}).catch({})}},v=n=>{var m;if((m=n.target.files)!=null&&m.length){c(!0);const r=new FormData;r.append("file",n.target.files[0]),g({fileUpload:r}).then(x=>{var s,u;(s=x.data)!=null&&s.imageKey?h({id:_,excelFile:{excel_file:(u=x.data)==null?void 0:u.imageKey}}).then(()=>{c(!1)}).catch({}):c(!1)}).catch({})}};return e.jsxs("div",{className:a.institute_setting_tab,style:{marginLeft:"2.5rem"},children:[e.jsx("label",{htmlFor:"uploadDepartmentExcel",children:e.jsxs("div",{className:a.institute_admission,children:[e.jsx(j,{name:t("department_excel"),img:"/images/member_tab/department/department-excel-icon.svg",customStyle:{height:"100%"}}),e.jsx("div",{className:a.institute_admission_preview,children:t("preview")})]})}),e.jsxs("div",{className:a.institute_admission,onClick:()=>l("CLASS_MASTER"),children:[e.jsx(j,{name:t("class_master_excel"),img:"/images/member_tab/class/class-master-excel-icon.svg",customStyle:{height:"100%"}}),e.jsx("div",{className:a.institute_admission_preview,children:t("preview")})]}),e.jsxs("div",{className:a.institute_admission,onClick:()=>l("SUBJECT_MASTER"),children:[e.jsx(j,{name:t("subject_master_excel"),img:"/images/member_tab/subject/subject-master-excel-icon.svg",customStyle:{height:"100%"}}),e.jsx("div",{className:a.institute_admission_preview,children:t("preview")})]}),e.jsxs("div",{className:a.institute_admission,onClick:()=>l("ONLY_CLASS"),children:[e.jsx(j,{name:t("only_class_excel"),img:"/images/member_tab/class/class-excel-icon.svg",customStyle:{height:"100%"}}),e.jsx("div",{className:a.institute_admission_preview,children:t("preview")})]}),e.jsxs("div",{className:a.institute_admission,onClick:()=>l("ONLY_SUBJECT"),children:[e.jsx(j,{name:t("only_subject_excel"),img:"/images/member_tab/subject/subject-institute-excel-icon.svg",customStyle:{height:"100%"}}),e.jsx("div",{className:a.institute_admission_preview,children:t("preview")})]}),e.jsx("label",{htmlFor:"uploadStudentExcel",children:e.jsxs("div",{className:a.institute_admission,children:[e.jsx(j,{name:t("staff_excel"),img:"/images/member_tab/subject/subject-institute-excel-icon.svg",customStyle:{height:"100%"}}),e.jsx("div",{className:a.institute_admission_preview,children:t("preview")})]})}),e.jsx("label",{htmlFor:"uploadStaffExcel",children:e.jsxs("div",{className:a.institute_admission,children:[e.jsx(j,{name:t("unapproved_student_excel"),img:"/images/member_tab/subject/subject-institute-excel-icon.svg",customStyle:{height:"100%"}}),e.jsx("div",{className:a.institute_admission_preview,children:t("preview")})]})}),e.jsx("label",{htmlFor:"uploadStudentScholarExcel",children:e.jsxs("div",{className:a.institute_admission,children:[e.jsx(j,{name:t("student_scholarship_excel"),img:"/images/member_tab/subject/subject-institute-excel-icon.svg",customStyle:{height:"100%"}}),e.jsx("div",{className:a.institute_admission_preview,children:t("preview")})]})}),e.jsx("input",{type:"file",id:"uploadDepartmentExcel",accept:".xlsx",onChange:o,style:{display:"none"}}),e.jsx("input",{type:"file",id:"uploadStudentExcel",accept:".xlsx",onChange:b,style:{display:"none"}}),e.jsx("input",{type:"file",id:"uploadStaffExcel",accept:".xlsx",onChange:v,style:{display:"none"}}),e.jsx("input",{type:"file",id:"uploadStudentScholarExcel",accept:".xlsx",onChange:d,style:{display:"none"}}),f&&e.jsx(K,{})]})},oe=({onClose:l,batchId:t,onParentClose:_})=>{var m,r,x;const{t:f}=B(),[c,g]=p.useState(!0),[S,h]=p.useState(!1),[y,E]=p.useState(""),{allClass:o,allClassRefetch:b}=z({bid:t,skip:!t}),[d]=L(),[v]=te();p.useEffect(()=>{var s;(s=o==null?void 0:o.batch)!=null&&s.classroom&&g(!1)},[(m=o==null?void 0:o.batch)==null?void 0:m.classroom]),p.useEffect(()=>{t&&(g(!0),b())},[t,b]);const n=s=>{var u;if((u=s.target.files)!=null&&u.length){h(!0);const w=new FormData;w.append("file",s.target.files[0]),d({fileUpload:w}).then(N=>{var C,F;(C=N.data)!=null&&C.imageKey?v({cid:y,excelFile:{excel_file:(F=N.data)==null?void 0:F.imageKey}}).then(()=>{h(!1),_()}).catch({}):h(!1)}).catch({})}};return e.jsx(e.Fragment,{children:e.jsx(V,{onClose:l,children:e.jsxs("div",{className:k.seating_modal,children:[e.jsxs("section",{className:k.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:l,alt:""}),e.jsx("h6",{children:f("select_excel_upload_department")})]}),e.jsx(T,{customStyle:{width:"100%",marginBottom:"0.6rem"}}),(x=(r=o==null?void 0:o.batch)==null?void 0:r.classroom)==null?void 0:x.map(s=>e.jsx("label",{htmlFor:"uploadSubjectExcel",style:{width:"100%"},onClick:()=>E(s==null?void 0:s._id),children:e.jsx(ce,{classData:s,isView:"ONLY_SUBJECT"},s._id)})),c&&e.jsx($,{status:"white"}),e.jsx("input",{type:"file",id:"uploadSubjectExcel",accept:".xlsx",onChange:n,style:{display:"none"}}),S&&e.jsx(K,{})]})})})},de=({onClose:l,isAuthority:t})=>{var N,C,F,A,I;const{t:_}=B(),f=W(i=>i.idChange.id),[c,g]=p.useState(!0),[S,h]=p.useState(!1),[y,E]=p.useState(!1),[o,b]=p.useState(""),{allDepartment:d,allDepartmentRefetch:v}=H({id:f,skip:!f}),[n]=L(),[m]=G(),[r]=se(),[x]=ae(),[s]=ie();p.useEffect(()=>{var i;(i=d==null?void 0:d.institute)!=null&&i.depart&&g(!1)},[(N=d==null?void 0:d.institute)==null?void 0:N.depart]),p.useEffect(()=>{f&&(g(!0),v())},[f,v]);const u=i=>{var U;if((U=i.target.files)!=null&&U.length){h(!0);const M=new FormData;M.append("file",i.target.files[0]),n({fileUpload:M}).then(D=>{var R,O,Y,J,P;(R=D.data)!=null&&R.imageKey?t==="ONLY_DEPARTMENT"?m({id:f,excelFile:{excel_file:(O=D.data)==null?void 0:O.imageKey}}).then(()=>{h(!1),l()}).catch({}):t==="CLASS_MASTER"?r({did:o,excelFile:{excel_file:(Y=D.data)==null?void 0:Y.imageKey}}).then(()=>{h(!1),l()}).catch({}):t==="SUBJECT_MASTER"?x({did:o,excelFile:{excel_file:(J=D.data)==null?void 0:J.imageKey}}).then(()=>{h(!1),l()}).catch({}):t==="ONLY_CLASS"?s({did:o,excelFile:{excel_file:(P=D.data)==null?void 0:P.imageKey}}).then(()=>{h(!1),l()}).catch({}):h(!1):h(!1)}).catch({})}},w=i=>{b(i),E(U=>!U)};return e.jsx(e.Fragment,{children:y?e.jsx(oe,{batchId:o,onClose:()=>w(""),onParentClose:l}):e.jsx(V,{onClose:l,children:e.jsxs("div",{className:k.seating_modal,children:[e.jsxs("section",{className:k.seating_modal_title_left,style:{position:"relative"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:l,alt:""}),e.jsx("h6",{children:_("select_excel_upload_department")})]}),e.jsx(T,{customStyle:{width:"100%",marginBottom:"0.6rem"}}),t==="ONLY_SUBJECT"?(F=(C=d==null?void 0:d.institute)==null?void 0:C.depart)==null?void 0:F.map(i=>e.jsx("div",{style:{width:"100%"},onClick:()=>w(i==null?void 0:i.departmentSelectBatch),children:e.jsx(Q,{depart:i,isExcel:!0},i._id)})):(I=(A=d==null?void 0:d.institute)==null?void 0:A.depart)==null?void 0:I.map(i=>e.jsx("label",{htmlFor:"uploadDepartmentExcel",style:{width:"100%"},onClick:()=>b(i==null?void 0:i._id),children:e.jsx(Q,{depart:i,isExcel:!0},i._id)})),c&&e.jsx($,{status:"white"}),e.jsx("input",{type:"file",id:"uploadDepartmentExcel",accept:".xlsx",onChange:u,style:{display:"none"}}),S&&e.jsx(K,{})]})})})},Ne=()=>{const{t:l}=B(),t=X(),[_,f]=p.useState(""),c=()=>{t(-1)},g=h=>{f(h)},S=()=>{f("")};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:a.navbar,children:e.jsx(Z,{status:"home"})}),e.jsx("div",{className:a.goback_container,children:e.jsxs("div",{className:a.goback_container_text,onClick:c,children:[e.jsx("img",{src:"/images/arr-left-white.svg",alt:"go back icon"}),e.jsx("h6",{className:a.goback_container_text_go,children:l("go_back")})]})}),e.jsxs("div",{className:a.student_from_container,children:[e.jsx("h6",{className:a.student_from_fill,children:l("excel_import")}),e.jsx(T,{customStyle:{width:"100%"}}),e.jsx(ne,{onActive:g}),_&&e.jsx(de,{onClose:S,isAuthority:_})]})]})};export{Ne as default};
