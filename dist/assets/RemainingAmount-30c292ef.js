import{u as N,c as C,j as e,n as k,e as B,k as T,R as n,t as V,r as v,om as G,v as M,l as O,S as J}from"./index-0ca76035.js";import{s as f}from"./RemainingFees.module-bd1517de.js";import{B as Q}from"./BorderBottom-1dc6f53e.js";import{s as u}from"./AdmissionApplicationRequest.module-43e4e129.js";const W=({children:s})=>{const{t:d}=N(),t=C(),o=()=>{t(-1)};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:u.moderator_container_title,children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:o,alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),e.jsxs("div",{className:u.with_search,children:[e.jsx("h6",{children:d("pending_fees")}),e.jsx("div",{className:u.search_container_filter,children:e.jsx("section",{className:u.search_container,children:e.jsxs("div",{className:u.search_container_input,children:[e.jsx("img",{className:u.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),s]})})})]})]}),e.jsx(Q,{customStyle:{width:"100%",marginTop:"0.5rem",marginBottom:"0.5rem"}})]})},b=({remainData:s})=>{var r,i,h;const{t:d}=N(),t=k(),o=C(),p=()=>{o(`/q/${t.username}/student/profile`,{state:{sid:s==null?void 0:s._id,viewAs:"FINANCE_MANAGER"}})};return e.jsxs("div",{className:f.item,onClick:p,title:"View Profile",children:[e.jsxs("div",{className:f.subItem,children:[e.jsx("img",{alt:"Student Avatar",src:s!=null&&s.studentProfilePhoto?`${B}/${s==null?void 0:s.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",loading:"lazy",style:{height:"4vw",width:"4vw"}}),e.jsxs("div",{className:f.text,children:[e.jsx("h6",{children:`${s==null?void 0:s.studentFirstName} ${s!=null&&s.studentMiddleName?s==null?void 0:s.studentMiddleName:""} ${s==null?void 0:s.studentLastName}`}),e.jsxs("p",{children:[d("gr_number"),(s==null?void 0:s.studentGRNO)??""," ",", ",((r=s==null?void 0:s.department)==null?void 0:r.dName)??""]}),e.jsxs("p",{children:[d("finance_classes"),`${((i=s==null?void 0:s.studentClass)==null?void 0:i.className)??""} -  ${((h=s==null?void 0:s.studentClass)==null?void 0:h.classTitle)??""}`]})]})]}),e.jsxs("div",{className:f.text,children:[e.jsxs("h6",{children:["Rs. ",s==null?void 0:s.studentRemainingFeeCount]}),e.jsx("p",{children:d("pending_fees")})]})]})};function H({fId:s}){const{t:d}=N(),t=T(l=>l.financeChange),[o,p]=n.useState([]),[r,i]=V(),[h,S]=n.useState(!0),[w,E]=n.useState(1),[R,x]=v.useState(!0),[j,$]=v.useState(""),{data:c,refetch:_}=G({finance:`${t!=null&&t.fid?t==null?void 0:t.fid:s}`,page:w,limit:10,search:j},{skip:t!=null&&t.fid?!(t!=null&&t.fid):!s}),{scrollToTop:y}=M();n.useEffect(()=>{y()},[]),n.useEffect(()=>{(t!=null&&t.fid||s)&&(x(!0),_())},[t==null?void 0:t.fid,s,w,j,_]),n.useEffect(()=>{i&&h&&E(l=>l+1)},[i,h]),n.useEffect(()=>{var l;j?(p(c==null?void 0:c.list),x(!1)):c!=null&&c.list?(p(g=>[...new Set([...g,...c==null?void 0:c.list].map(JSON.stringify))].map(JSON.parse)),x(!1)):((l=c==null?void 0:c.list)==null?void 0:l.length)===0&&x(!1),(c==null?void 0:c.list.length)===10?S(!0):S(!1)},[c==null?void 0:c.list]);const F=v.useCallback(O.debounce(l=>$(l),500),[]),P=l=>{F(l.target.value)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:f.remainingFees,children:[e.jsx(W,{children:e.jsx("input",{type:"text",placeholder:d("search-label"),onChange:P})}),o==null?void 0:o.map((l,g)=>(o==null?void 0:o.length)===g+1?e.jsx("div",{ref:r,children:e.jsx(b,{remainData:l})},g):e.jsx(b,{remainData:l},g)),R&&e.jsx(J,{status:"white"})]})})}export{H as default};
