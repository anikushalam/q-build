import{k as D,c as ss,r as _,j as s,kf as k,bo as ts,N as is,Q as rs,u as M,t as cs,S as ds,d as es,n as os,L as W,v as ms,w as as,x as ls,e as hs}from"./index-731451a5.js";import{ao as _s,p as xs}from"./hostel-api-4d11cb04.js";import{P as us}from"./ProfileCover-66a63390.js";import{B as fs}from"./BorderBottom-47800983.js";import{s as c}from"./JoiningForm.module-3d067e90.js";import{g as js,h as bs}from"./admission-api-56b87fde.js";import{A as gs}from"./ApplicationPreviewDetail-fd29a331.js";import{S as vs}from"./SelectHostelFeeStrucutre-6ca88b34.js";import{s as J,a as Ns,U as ps}from"./UnitRoomInfo-274b0ae5.js";import{H as Ss}from"./HostelRules-0517602d.js";import{H as Es}from"./HostelFeesStructureList-0cf3dd94.js";import{H as ks}from"./HostelUnit-77f00467.js";import"./InstituteProfileInfoTop.module-288d442d.js";import"./finance-api-5c6c5671.js";import"./JoinFormInputView-879755fe.js";import"./JoinForm.module-212f9bb3.js";import"./FeesStructure.module-7a88fbbc.js";import"./Overlay-07ce6f88.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalBackdrop-5b309d60.js";import"./SearchHeader.module-b69c8942.js";import"./EditConfirm.module-344fbdb9.js";import"./CustomNormalSelectInput-9ec7329b.js";import"./DatePicker-305f3dc6.js";import"./JoinFormInput-8e74a0e0.js";import"./StringLength.module-75a6e080.js";import"./SeatingArrangement.module-3f4ae6aa.js";import"./PopupWrapper-ffbaef7a.js";import"./SearchModalWrapper-6e85c9f3.js";import"./CustomSelectDepartment-a5dd9a35.js";import"./transport-api-9ab21e71.js";import"./JoinFormCalender-5158d888.js";import"./Tabs.module-fb9ec0a6.js";import"./Hostel.module-50da11fe.js";import"./HostelFeeStructure.module-5a40a31e.js";import"./JoinFormTextArea-7f6dded0.js";import"./JoinFormFileEdit-e41481d6.js";import"./ViewFileDialog-0c131c06.js";import"./InstituteHostel.module-b6b254cc.js";import"./AssignStaffModal-61be8e90.js";import"./search-api-15f7f9f9.js";import"./AssignStaffModal.module-a60b32e1.js";const Cs="_navbar_ds065_1",Ts="_mainbody_ds065_9",ws="_mainbodysplit_ds065_14",Is="_profilehead_ds065_20",Rs="_profileheadTop_ds065_26",Bs="_profileheadBottom_ds065_37",Hs="_profileheadBottomtop_ds065_55",Os="_insname_ds065_59",Fs="_username_ds065_69",Ps="_profileheadBottomcounts_ds065_80",Us="_bottomOneItem_ds065_88",$s="_bottomCount_ds065_97",Ls="_bottomText_ds065_106",Vs="_profileedit_ds065_116",qs="_goback_container_ds065_134",As="_goback_container_text_ds065_142",Ms="_goback_container_text_go_ds065_151",Gs="_application_container_ds065_158",a={navbar:Cs,mainbody:Ts,mainbodysplit:ws,profilehead:Is,profileheadTop:Rs,profileheadBottom:Bs,profileheadBottomtop:Hs,insname:Os,username:Fs,profileheadBottomcounts:Ps,bottomOneItem:Us,bottomCount:$s,bottomText:Ls,profileedit:Vs,goback_container:qs,goback_container_text:As,goback_container_text_go:Ms,application_container:Gs};function Js({preview:o,hostelId:n}){var T,w,I,R,B,H,O,F,P,U,$,L,V;const h=D(u=>u.idChange.id),d=ss(),[i,r]=_.useState(!1),[f,t]=_.useState(""),[b,N]=_.useState({msg:"",run:!1}),[g,x]=_.useState(!1),{oneApplicationDetail:e,oneApplicationDetailRefetch:m}=js({apid:o,skip:!o}),[p]=bs();_.useEffect(()=>{o&&m()},[o,m]);const l=()=>{var u,S;(u=e==null?void 0:e.oneApply)!=null&&u._id&&h&&(x(v=>!v),p({uid:h,aid:(S=e==null?void 0:e.oneApply)==null?void 0:S._id}).then(v=>{var q,A,E,z,Y,K,X,Z,y;x(ns=>!ns),(q=v==null?void 0:v.data)!=null&&q.denied?N({msg:(A=v==null?void 0:v.data)==null?void 0:A.message,run:!0}):d("/q/hostel/joining",{state:{formAs:"STUDENT",openAs:((E=e==null?void 0:e.oneApply)==null?void 0:E.application_type)==="Direct Admisison"?"ADMISSION_DIRECT_APPLY":"PROFILE_SEARCH",appId:(z=e==null?void 0:e.oneApply)==null?void 0:z._id,hostelId:n,first_install:((Y=e==null?void 0:e.oneApply)==null?void 0:Y.application_type)==="Direct Admisison"?(Z=(X=(K=e==null?void 0:e.oneApply)==null?void 0:K.direct_linked_structure)==null?void 0:X.one_installments)==null?void 0:Z.fees:0,applicationName:(y=e==null?void 0:e.oneApply)==null?void 0:y.applicationName}})}).catch({}))},j=()=>{r(u=>!u)},C=u=>{t(u),j()},G=()=>{t(""),j()};return s.jsxs("div",{className:c.applications,style:{width:"1128px",marginTop:"1rem"},children:[s.jsxs("div",{className:c.top1,children:[s.jsx("h6",{children:(T=e==null?void 0:e.oneApply)==null?void 0:T.applicationName}),s.jsx("div",{})]}),s.jsxs("div",{className:c.content,children:[s.jsxs("div",{className:c.contentRow,children:[s.jsxs("div",{className:c.contentColumn,children:[s.jsx("p",{children:k("available_sets")}),s.jsx("h6",{children:((w=e==null?void 0:e.oneApply)==null?void 0:w.applicationSeats)??"N/A"})]}),s.jsx("div",{className:c.contentColumn,children:s.jsxs("button",{className:c.admission_fees_btn,title:"See All Fees",onClick:j,children:[s.jsx("div",{children:k("admission_fees")}),s.jsx("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]})})]}),s.jsxs("div",{className:c.contentRow,children:[s.jsxs("div",{className:c.contentColumn,children:[s.jsx("p",{children:k("starting_date")}),s.jsx("h6",{children:((I=e==null?void 0:e.oneApply)==null?void 0:I.applicationStartDate)??"N/A"})]}),s.jsxs("div",{className:c.contentColumn,children:[s.jsx("p",{children:k("last_date")}),s.jsx("h6",{children:((R=e==null?void 0:e.oneApply)==null?void 0:R.applicationEndDate)??"N/A"})]})]}),(B=e==null?void 0:e.oneApply)!=null&&B.applicationPhoto?s.jsx("div",{className:c.contentRow,children:s.jsx("div",{className:c.contentColumn,children:s.jsx("a",{title:"Download File",href:`${ts}/${(H=e==null?void 0:e.oneApply)==null?void 0:H.applicationPhoto}`,target:"_blank",rel:"noopener noreferrer",children:s.jsx("button",{className:c.admission_fees_btn,children:s.jsx("div",{children:k("application_brochure")})})})})}):"",(O=e==null?void 0:e.oneApply)!=null&&O.applicationAbout?s.jsxs("div",{className:c.contentColumn,children:[s.jsx("p",{children:k("application_info")}),(U=(P=(F=e==null?void 0:e.oneApply)==null?void 0:F.applicationAbout)==null?void 0:P.split(`
`))==null?void 0:U.map((u,S)=>s.jsx("h6",{children:u},S))]}):"",s.jsx("div",{className:c.applyBtn,onClick:l,children:k("apply")}),i&&s.jsx(vs,{onClose:j,hostelId:n,onSelectedStudent:C,asOpen:"STUDENT_VIEW_STRUCTURE",batchId:((L=($=e==null?void 0:e.oneApply)==null?void 0:$.applicationBatch)==null?void 0:L._id)??"",classMasterId:((V=e==null?void 0:e.oneApply)==null?void 0:V.applicationMaster)??""}),f&&s.jsx(gs,{structureId:f,setStructureId:G,viewAs:"STUDENT"}),s.jsx(is,{msg:b.msg,run:b.run,setRun:()=>N({msg:"",run:!1}),postiton:"bottom",type:"error"})]}),g&&s.jsx(rs,{})]})}function Q({applyData:o,setPreview:n}){var d;const{t:h}=M();return s.jsx("div",{className:c.card,onClick:()=>n(o==null?void 0:o._id),children:s.jsxs("div",{className:c.card_row_container,children:[s.jsx("img",{src:"/images/members/admission-application-icon.svg",alt:"admission icon"}),s.jsxs("div",{style:{width:"100%"},children:[s.jsxs("div",{className:c.cardRow,children:[s.jsx("h6",{style:{marginBottom:"0.2rem"},children:o==null?void 0:o.applicationName}),(o==null?void 0:o.application_type)==="Direct Admisison"?s.jsxs("div",{className:c.hostel_direct,children:[o!=null&&o.applicationEndDate?s.jsx("h6",{style:{marginBottom:"0.2rem",marginRight:"1rem"},children:o==null?void 0:o.applicationEndDate}):"",(o==null?void 0:o.application_type)==="Direct Admisison"&&s.jsx("img",{src:"/images/members/application-hotspot-icon.svg",alt:"admission icon"})]}):o!=null&&o.applicationEndDate?s.jsx("h6",{style:{marginBottom:"0.2rem",marginRight:"2.3rem"},children:o==null?void 0:o.applicationEndDate}):""]}),s.jsxs("div",{className:c.cardRow,children:[s.jsx("p",{children:((d=o==null?void 0:o.applicationUnit)==null?void 0:d.hostel_unit_name)??""}),(o==null?void 0:o.applicationEndDate)&&s.jsx("p",{style:{marginRight:"2.3rem"},children:h("last_date_to_apply")})]})]})]})})}function Ws({instituteId:o,setPreview:n}){const{t:h}=M(),[d,i]=cs(),[r,f]=_.useState(1),[t,b]=_.useState(!0),[N,g]=_.useState(!0),[x,e]=_.useState([]),{getHostelApplyApplicationList:m,getHostelApplyApplicationListRefetch:p}=_s({data:{id:o,page:r,limit:10,search:""},skip:!o});return _.useEffect(()=>{o&&(g(!0),p())},[o,r,p]),_.useEffect(()=>{i&&t&&f(l=>l+1)},[i,t]),_.useEffect(()=>{var l,j;m!=null&&m.allApp?(e(C=>[...new Set([...C,...m==null?void 0:m.allApp].map(JSON.stringify))].map(JSON.parse)),g(!1)):((l=m==null?void 0:m.allApp)==null?void 0:l.length)===0&&g(!1),((j=m==null?void 0:m.allApp)==null?void 0:j.length)===10?b(!0):b(!1)},[m==null?void 0:m.allApp]),s.jsxs("div",{className:c.applications,style:{width:"1128px",marginTop:"1rem"},children:[s.jsx("div",{className:c.top,children:h("join_or_apply_instutude")}),s.jsx("div",{className:c.content,children:s.jsxs("div",{className:c.contentBottom,children:[s.jsx("h6",{children:h("new_application")}),s.jsxs("div",{className:c.cardsContainer,children:[x==null?void 0:x.map((l,j)=>(x==null?void 0:x.length)===j+1?s.jsx("div",{ref:d,children:s.jsx(Q,{applyData:l,setPreview:n})},l==null?void 0:l._id):s.jsx(Q,{applyData:l,setPreview:n},l==null?void 0:l._id)),N&&s.jsx(ds,{})]})]})})]})}const zs=({instituteId:o,hostelId:n})=>{const{t:h}=M(),d=ss(),[i,r]=_.useState("");_.useEffect(()=>{var t;(t=document.getElementById("scrollView"))==null||t.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},[]);const f=()=>{i?r(""):d(-1)};return s.jsxs("div",{style:{backgroundColor:"#f5f5f5",paddingTop:"1vw"},children:[s.jsx("div",{className:a.goback_container,id:"scrollView",children:s.jsxs("div",{className:a.goback_container_text,onClick:f,children:[s.jsx("img",{src:"/images/arr-left-white.svg",alt:"go back icon"}),s.jsx("h6",{className:a.goback_container_text_go,children:h("go_back")})]})}),i?s.jsx(Js,{preview:i,hostelId:n}):s.jsx(Ws,{instituteId:o,setPreview:r,preview:i})]})},Ys=({carryParentState:o,hostel:n})=>{var r,f,t,b,N,g,x,e;const{t:h}=M(),d=es(),i=os();return s.jsx(s.Fragment,{children:s.jsxs("div",{style:{width:"100%",paddingBottom:"2vw"},children:[!(d!=null&&d.search)&&s.jsxs("div",{className:J.item,children:[s.jsx(W,{to:`/q/${i==null?void 0:i.username}/hostel/profile?a=knows`,state:{...o},children:s.jsxs("div",{className:J.itemIcon,children:[s.jsx("img",{src:"/images/member_tab/hostel/hostel-know-icon.svg",alt:"inquery"}),s.jsx("p",{children:h("knows_hostel")})]})}),s.jsx(W,{to:`/q/${i==null?void 0:i.username}/hostel/profile?a=rules`,state:{...o},children:s.jsxs("div",{className:J.itemIcon,children:[s.jsx("img",{src:"/images/member_tab/hostel/hostel-rule-icon.svg",alt:"moderator icon"}),s.jsx("p",{children:h("rules_and_regulation")})]})}),s.jsx(W,{to:`/q/${i==null?void 0:i.username}/hostel/profile?a=fees`,state:{...o},children:s.jsxs("div",{className:J.itemIcon,children:[s.jsx("img",{src:"/images/member_tab/finance/finance-pending-icon.svg",alt:"refund"}),s.jsx("p",{children:h("fees")})]})})]}),((r=d==null?void 0:d.search)==null?void 0:r.substring(3))==="rules"&&s.jsx("div",{style:{padding:"1rem"},children:s.jsx(Ss,{hid:(f=d.state)==null?void 0:f.hid,viewAs:"HOSTEL_SEARCH"})}),((t=d==null?void 0:d.search)==null?void 0:t.substring(3))==="fees"&&s.jsx("div",{style:{padding:"1rem"},children:s.jsx(Es,{financeId:(g=(N=(b=n==null?void 0:n.institute)==null?void 0:b.financeDepart)==null?void 0:N[0])==null?void 0:g._id,hostelId:n==null?void 0:n._id,instituteId:(x=n==null?void 0:n.institute)==null?void 0:x._id,viewAs:"HOSTEL_SEARCH"})}),((e=d==null?void 0:d.search)==null?void 0:e.substring(3))==="knows"&&s.jsx("div",{style:{padding:"1rem"},children:s.jsx(ks,{hid:n==null?void 0:n._id,carryParentState:o,viewAs:"HOSTEL_SEARCH"})})]})})},Ue=()=>{var N,g,x,e,m,p,l,j,C,G,T,w,I,R,B,H,O,F,P,U,$,L,V,u,S,v,q,A;const{t:o}=M(),n=es(),h=os(),{showScrollbar:d}=ms(),i=D(E=>E.idChange),{data:r,refetch:f}=as(i==null?void 0:i.id,{skip:!(i!=null&&i.id)}),{hostelDetail:t,hostelDetailRefetch:b}=xs({data:{hid:(N=n.state)==null?void 0:N.hid,mod_id:""},skip:!((g=n.state)!=null&&g.hid)});return _.useEffect(()=>{var E;(E=n.state)!=null&&E.hid&&b(),d()},[(x=n.state)==null?void 0:x.hid,b]),_.useEffect(()=>{i!=null&&i.id&&f()},[i==null?void 0:i.id,f]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:a.navbar,children:s.jsx(ls,{status:"profile",profileData:r==null?void 0:r.user,username:(e=r==null?void 0:r.user)==null?void 0:e.username,name:(m=r==null?void 0:r.user)==null?void 0:m.userLegalName,photoId:(p=r==null?void 0:r.user)==null?void 0:p.photoId,profilePhoto:(l=r==null?void 0:r.user)==null?void 0:l.profilePhoto})}),s.jsxs("div",{className:a.mainbody,children:[((j=n==null?void 0:n.search)==null?void 0:j.substring(3))!=="admission"&&((C=n==null?void 0:n.search)==null?void 0:C.substring(3))!=="unit&n=room"&&((G=n==null?void 0:n.search)==null?void 0:G.substring(3))!=="unit&n=menu&n=room"&&s.jsxs("div",{className:a.profilehead,children:[s.jsx("div",{className:a.profileheadTop,children:s.jsx(us,{dynamicImage:(T=t==null?void 0:t.one_hostel)!=null&&T.hostel_photo?`${hs}/${(w=t==null?void 0:t.one_hostel)==null?void 0:w.hostel_photo}`:"/images/profileAndCover/hostel-cover.svg",openAs:"SEARCH_HOSTEL"})}),s.jsxs("div",{className:a.profileheadBottom,children:[s.jsx("div",{className:a.profileheadBottomtop,style:{display:"flex",justifyContent:"space-between"},children:s.jsxs("div",{children:[s.jsxs("h3",{className:a.insname,children:[(R=(I=t==null?void 0:t.one_hostel)==null?void 0:I.institute)==null?void 0:R.insName," ","(Hostel)"]}),s.jsx("p",{className:a.username,children:`${((H=(B=t==null?void 0:t.one_hostel)==null?void 0:B.hostel_manager)==null?void 0:H.staffFirstName)??""} ${((F=(O=t==null?void 0:t.one_hostel)==null?void 0:O.hostel_manager)==null?void 0:F.staffMiddleName)??""} ${((U=(P=t==null?void 0:t.one_hostel)==null?void 0:P.hostel_manager)==null?void 0:U.staffLastName)??""}`})]})}),s.jsxs("div",{className:a.profileheadBottomcounts,children:[s.jsxs("div",{className:a.bottomOneItem,children:[s.jsx("p",{className:a.bottomCount,children:($=t==null?void 0:t.one_hostel)==null?void 0:$.bed_count}),s.jsx("p",{className:a.bottomText,children:o("hostel_beds")})]}),s.jsxs("div",{className:a.bottomOneItem,children:[s.jsx("p",{className:a.bottomCount,children:(L=t==null?void 0:t.one_hostel)==null?void 0:L.room_count}),s.jsx("p",{className:a.bottomText,children:o("rooms")})]})]}),s.jsx(fs,{customStyle:{width:"100%"}}),s.jsx(W,{to:`/q/${h==null?void 0:h.username}/hostel/profile?a=admission`,state:{...n.state},children:s.jsx("h6",{className:a.profileedit,style:{fontSize:"1rem"},children:o("take_admission")})}),s.jsx(Ys,{carryParentState:n.state,hostel:t==null?void 0:t.one_hostel})]})]}),((V=n==null?void 0:n.search)==null?void 0:V.substring(3))==="admission"&&s.jsx(zs,{instituteId:(S=(u=t==null?void 0:t.one_hostel)==null?void 0:u.institute)==null?void 0:S._id,hostelId:(v=t==null?void 0:t.one_hostel)==null?void 0:v._id}),((q=n==null?void 0:n.search)==null?void 0:q.substring(3))==="unit&n=menu&n=room"&&s.jsx(Ns,{carryParentState:n.state,viewAs:"HOSTEL_SEARCH"}),((A=n==null?void 0:n.search)==null?void 0:A.substring(3))==="unit&n=room"&&s.jsx(ps,{carryParentState:n.state,viewAs:"HOSTEL_SEARCH"})]})]})};export{Ue as default};
