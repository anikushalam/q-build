import{u as T,r as o,k as y,g as A,q as E,j as e,e as R,bS as H}from"./index-0ca76035.js";/* empty css                         */import{L as W}from"./LoaderButton-56f541f9.js";import{F as $}from"./post-api-b04eb54b.js";import{P as B}from"./PollsModal-f50fcc28.js";import{i as M}from"./constant_value-4cd2b3e0.js";import{P as U,a as z}from"./PostFooterIcon-79c1540d.js";import"./Avatar-e65c49d9.js";import"./Avatar.module-fb7ee634.js";import"./FormToggle-18d319d7.js";import"./UniversalForm.module-19614663.js";import"./Switch-4bb87998.js";import"./SwitchBase-e3c2ff35.js";const G="_tagList_lj343_1",J="_postTitle_lj343_15",K="_btn_lj343_41",V="_addfiles_lj343_62",X="_afterbtn_lj343_81",Y="_border2_lj343_85",Z="_border3_lj343_91",D="_mainbody_lj343_98",c={tagList:G,postTitle:J,btn:K,addfiles:V,afterbtn:X,border2:Y,border3:Z,mainbody:D};function pt({setPostType:d,onPostTypeChange:n}){var x,h,b;const{t:r}=T(),[k,P]=o.useState(!1),[m,u]=o.useState(!1),[I,p]=o.useState(!1),l=o.useRef(""),[O]=$(),t=y(i=>i.idChange),F=A(),[f,Q]=o.useState(!0),[a,q]=o.useState(""),[_,g]=o.useState("On"),{oneInstituteDashboard:s,oneInstituteDashboardRefetch:j}=E({id:t==null?void 0:t.id,skip:!(t!=null&&t.id)});o.useEffect(()=>{t!=null&&t.id&&j()},[t==null?void 0:t.id,j]);const w=()=>{var i;l.current.value!==""&&((i=a==null?void 0:a.current)==null?void 0:i.value)!==""?(u(!0),O({post:{postQuestion:l.current.value,trend_category:a,comment_turned:_,file:[]},id:t==null?void 0:t.id,viewAs:M}).then(v=>{var S;console.log(v),F(H.addCreatedPost({post:(S=v.data)==null?void 0:S.post})),u(!1),n("post")}).catch({})):p(!0)},C=()=>{n("newPost"),d("text")},L=()=>{n("newPost"),d("image")},N=i=>{i.target.checked?g("Off"):g("On")};return e.jsx(e.Fragment,{children:e.jsxs(U,{postTitle:r("create_question"),onClose:()=>n("post"),dynamicImage:((x=s==null?void 0:s.institute)==null?void 0:x.photoId)!=="1"?`${R}/${(h=s==null?void 0:s.institute)==null?void 0:h.insProfilePhoto}`:"/images/ins_default_profile.svg",name:(b=s==null?void 0:s.institute)==null?void 0:b.insName,privateImage:k,setPrivateImage:P,onToggleHandler:N,checkedToggle:_,children:[e.jsx("div",{className:c.postTitle,children:e.jsx("input",{className:c.input,type:"text",ref:l,required:!0,placeholder:"ask_question",onChange:()=>p(!1)})}),I&&e.jsx("div",{style:{color:"red"},children:r("please_type_question")}),e.jsxs("button",{className:c.btn,disabled:m,onClick:w,children:[e.jsx("p",{children:r("post")}),m&&e.jsx("div",{children:e.jsx(W,{})})]}),e.jsx(z,{onEditIocn:C,onPostTypeChange:n,activeIcon:6,addFileToggle:!1,children:e.jsx("div",{children:e.jsx("img",{src:"/images/img-post-icon.svg",onClick:L,alt:"file upload icon",title:"Create Image Post"})})}),f&&e.jsx(B,{open:f,setOpen:Q,setTrendCategoryRef:q})]})})}export{pt as default};
