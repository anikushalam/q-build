import{u as ft,d as _t,n as Nt,c as vt,r as g,W as Lt,a1 as Bt,j as e,e as It,L as wt,Q as kt,k as At,w as Et,s as Rt,x as Ot}from"./index-0ca76035.js";import{s as o}from"./JoinForm.module-212f9bb3.js";import{B as xt}from"./BorderBottom-1dc6f53e.js";import{J as l}from"./JoinFormInput-82706177.js";import{u as Pt,v as Dt,w as $t,x as Mt,y as Ut,z as Vt,m as Ft}from"./constant_value-4cd2b3e0.js";import{J as C}from"./JoinFormSelect-7025a8a4.js";import{w as Jt}from"./timeComparison-f15c3247.js";import{J as ht}from"./JoinFormCalender-d186c4ef.js";import{D as Gt}from"./DownloadToggle-03a86457.js";import{b as Wt}from"./pdf-convertor-function-4fe9e778.js";import{c as Kt}from"./department-api-e4b13f05.js";import{c as yt}from"./numberToWords.min-081ca735.js";import{c as Ht}from"./main.certificate.pdf.worker-fdc20546.js";import"./DatePicker-c6d0e911.js";import"./institute-staff-student-api-7114d611.js";const Qt={insName:"",insPhoneNumber:"",insAddress:"",insEmail:"",insAffiliated:"",insEditableText_one:"",insEditableText_two:"",affiliatedImage:"",insProfilePhoto:"",studentGRNO:"",studentCertificateNo:"",bookNo:"",studentUidaiNumber:"",name:"",studentMotherName:"",studentMTongue:"",studentCast:"",studentCastCategory:"",studentNationality:"",studentReligion:"",studentBirthPlace:"",studentDOB:"",studentPreviousSchool:"",studentLeavingBehaviour:"",studentLeavingStudy:"",studentLeavingReason:"",studentRemark:"",instituteJoinDate:"",instituteLeavingDate:"",courseDuration:"",studentClassName:"",authority:""},bt=t=>(t.match(/[a-zA-Z0-9]+/g)||[]).map(n=>`${n.charAt(0).toUpperCase()}${n.slice(1)}`).join(" "),zt=()=>{var P,D,$,M,U,V,F,J,G,W,K,H,Q,z,q,Z,X,Y,ee,te;const{t}=ft(),n=_t(),R=Nt(),h=vt(),[r,N]=g.useState(!1),[L,y]=g.useState(!1),[f,_]=g.useState(!1),[B,b]=g.useState(!1),[I]=Lt(),[w]=Kt(),[v,k]=g.useState(!1),[s,u]=g.useState(Qt);g.useEffect(()=>{var i,d,m,p;(i=n.state)!=null&&i.student&&(u(c=>{var T,x,A,S,j,E,ne,se,ae,oe,ie,le,re,ue,de,me,ce,pe,ge,xe,he,ye,be,fe,_e,ve,Te,Se,je,Ce,Ne,Le,Be,Ie,we,ke,Ae,Ee,Re,Oe,Pe,De,$e,Me,Ue,Ve,Fe,Je,Ge,We,Ke,He,Qe,ze,qe,Ze,Xe,Ye,et,tt,nt,st,at,ot,it,lt,rt,ut,dt,mt,ct,pt,gt;return{...c,insName:((A=(x=(T=n.state)==null?void 0:T.student)==null?void 0:x.institute)==null?void 0:A.insName)??"",insPhoneNumber:((E=(j=(S=n.state)==null?void 0:S.student)==null?void 0:j.institute)==null?void 0:E.insPhoneNumber)??"",insAddress:((ae=(se=(ne=n.state)==null?void 0:ne.student)==null?void 0:se.institute)==null?void 0:ae.insAddress)??"",insEmail:((le=(ie=(oe=n.state)==null?void 0:oe.student)==null?void 0:ie.institute)==null?void 0:le.insEmail)??"",insAffiliated:((de=(ue=(re=n.state)==null?void 0:re.student)==null?void 0:ue.institute)==null?void 0:de.insAffiliated)??"",insEditableText_one:((pe=(ce=(me=n.state)==null?void 0:me.student)==null?void 0:ce.institute)==null?void 0:pe.insEditableText_one)??"",insEditableText_two:((he=(xe=(ge=n.state)==null?void 0:ge.student)==null?void 0:xe.institute)==null?void 0:he.insEditableText_two)??"",affiliatedImage:((fe=(be=(ye=n.state)==null?void 0:ye.student)==null?void 0:be.institute)==null?void 0:fe.affliatedLogo)??"",insProfilePhoto:((Te=(ve=(_e=n.state)==null?void 0:_e.student)==null?void 0:ve.institute)==null?void 0:Te.insProfilePhoto)??"",studentGRNO:((je=(Se=n.state)==null?void 0:Se.student)==null?void 0:je.studentGRNO)??"",bookNo:((Ne=(Ce=n.state)==null?void 0:Ce.student)==null?void 0:Ne.bookNo)??"",studentCertificateNo:((Be=(Le=n.state)==null?void 0:Le.student)==null?void 0:Be.studentCertificateNo)??"",studentUidaiNumber:((we=(Ie=n.state)==null?void 0:Ie.student)==null?void 0:we.studentUidaiNumber)??"",name:`${((Ae=(ke=n.state)==null?void 0:ke.student)==null?void 0:Ae.studentFirstName)??""} ${((Re=(Ee=n.state)==null?void 0:Ee.student)==null?void 0:Re.studentMiddleName)??""} ${(Pe=(Oe=n.state)==null?void 0:Oe.student)==null?void 0:Pe.studentLastName}`,studentMotherName:(($e=(De=n.state)==null?void 0:De.student)==null?void 0:$e.studentMotherName)??"",studentMTongue:((Ue=(Me=n.state)==null?void 0:Me.student)==null?void 0:Ue.studentMTongue)??"",studentCast:((Fe=(Ve=n.state)==null?void 0:Ve.student)==null?void 0:Fe.studentCast)??"",studentCastCategory:((Ge=(Je=n.state)==null?void 0:Je.student)==null?void 0:Ge.studentCastCategory)??"",studentNationality:((Ke=(We=n.state)==null?void 0:We.student)==null?void 0:Ke.studentNationality)??"",studentReligion:((Qe=(He=n.state)==null?void 0:He.student)==null?void 0:Qe.studentReligion)??"",studentBirthPlace:((qe=(ze=n.state)==null?void 0:ze.student)==null?void 0:qe.studentBirthPlace)??"",studentDOB:((Xe=(Ze=n.state)==null?void 0:Ze.student)==null?void 0:Xe.studentDOB)??"",studentPreviousSchool:((et=(Ye=n.state)==null?void 0:Ye.student)==null?void 0:et.studentPreviousSchool)??"",studentLeavingBehaviour:((nt=(tt=n.state)==null?void 0:tt.student)==null?void 0:nt.studentLeavingBehaviour)??"",studentLeavingStudy:((at=(st=n.state)==null?void 0:st.student)==null?void 0:at.studentLeavingStudy)??"",studentLeavingReason:((it=(ot=n.state)==null?void 0:ot.student)==null?void 0:it.studentLeavingReason)??"",instituteJoinDate:Bt((rt=(lt=n.state)==null?void 0:lt.student)==null?void 0:rt.studentAdmissionDate).format("yyyy-mm-DD"),courseDuration:"",studentClassName:`${((mt=(dt=(ut=n.state)==null?void 0:ut.student)==null?void 0:dt.studentClass)==null?void 0:mt.className)??""} - ${((gt=(pt=(ct=n.state)==null?void 0:ct.student)==null?void 0:pt.studentClass)==null?void 0:gt.classTitle)??""}`??"",authority:""}}),_((p=(m=(d=n.state)==null?void 0:d.student)==null?void 0:m.certificateLeavingCopy)==null?void 0:p.originalCopy))},[(P=n.state)==null?void 0:P.student]);const Tt=()=>{N(i=>!i)},a=i=>{u(d=>({...d,[i.target.name]:i.target.value}))},St=i=>{if(Jt(i)){let m=i==null?void 0:i.split("/"),p=`${m[2]}-${m[1]}-${m[0]}`;u(c=>({...c,studentDOB:p}))}},jt=i=>{if(i){let d=i==null?void 0:i.split("/"),m=`${d[2]}-${d[1]}-${d[0]}`;u(p=>({...p,instituteJoinDate:m}))}},Ct=()=>{var p;b(c=>!c);const{institute:i,studentInfo:d}=Wt(s,{isOriginal:f,is_leaving:(p=n.state)==null?void 0:p.is_leaving,letterHead:v}),m=new Worker(new URL(Ht,import.meta.url),{type:"module"});m.postMessage({printCertificateType:"LEAVING",studentInfo:d,institute:i}),m.onmessage=c=>{var T;if(c)if(((T=n.state)==null?void 0:T.isViewBy)==="REQUEST_TAB"){const x=new FormData;x.append("file",c.data),I({fileUpload:x}).then(A=>{var S,j;w({cid:(S=n.state)==null?void 0:S.certificateId,attach:(j=A.data)==null?void 0:j.imageKey,status:"Issued"}).then(()=>{b(E=>!E),h(-1),window.open(URL.createObjectURL(c.data),"_blank")}).catch({})}).catch({})}else window.open(URL.createObjectURL(c.data),"_blank"),b(x=>!x)}},O=()=>{k(i=>!i)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h6",{className:o.student_from_fill,children:[t("fill_certificate_form"),(($=(D=n.state)==null?void 0:D.student)==null?void 0:$.duplicate_copy)==="Original Copy"?e.jsxs("span",{children:["(",t("original_not_given"),")"]}):e.jsxs("span",{children:["(",t("original_given"),")"]})]}),e.jsx("img",{style:{height:"1.3rem",marginRight:"1rem",cursor:"pointer"},src:"/images/menu-dots-dark-icon.svg",alt:"",onClick:Tt})]}),e.jsx(xt,{customStyle:{width:"100%"}}),e.jsxs("div",{className:o.form_profile_info,style:{paddingInline:"1rem"},children:[e.jsxs("div",{style:{width:"88%"},children:[e.jsx(l,{labelText:t("institute_name"),placeholder:t("institute_name"),name:"insName",value:s.insName,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsx(l,{labelText:t("institute_address"),placeholder:t("institute_address"),name:"insAddress",value:s.insAddress,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsxs("div",{className:o.form_profile_info,children:[e.jsx(l,{labelText:t("contact_number"),placeholder:t("contact_number"),name:"insPhoneNumber",value:s.insPhoneNumber,type:"tel",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsx(l,{labelText:t("email"),placeholder:t("email"),name:"insEmail",value:s.insEmail,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}})]})]}),e.jsx("div",{className:o.profilephotocontainer,children:e.jsx("img",{className:o.profilephotoins,src:s.affiliatedImage?`${It}/${s.affiliatedImage}`:"/images/ins_default_profile.svg",alt:"ChatAvatar"})})]}),e.jsxs("div",{style:{paddingInline:"1rem"},children:[e.jsx(l,{labelText:t("aff_body"),placeholder:t("aff_body"),name:"insAffiliated",value:s.insAffiliated,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsx(l,{labelText:t("ins_identity1"),placeholder:t("ins_identity1"),name:"insEditableText_one",value:s.insEditableText_one,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsx(l,{labelText:t("ins_identity2"),placeholder:t("ins_identity2"),name:"insEditableText_two",value:s.insEditableText_two,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}})]}),e.jsx(xt,{customStyle:{width:"100%",marginTop:"0.7rem"}}),e.jsxs("div",{className:o.form_profile_info,style:{paddingInline:"1rem"},children:[e.jsx(l,{labelText:t("gr_no"),placeholder:t("gr_no"),name:"studentGRNO",value:s.studentGRNO,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsx(l,{labelText:t("enter_book_no"),placeholder:t("enter_book_no"),name:"bookNo",value:s.bookNo,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsx(l,{labelText:t("certificate_no"),placeholder:t("certificate_no"),name:"studentCertificateNo",value:s.studentCertificateNo,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsx(l,{labelText:t("enter_udice"),placeholder:t("enter_udice"),name:"studentUidaiNumber",value:s.studentUidaiNumber,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}})]}),e.jsx("div",{className:o.certidyheading,children:((M=n.state)==null?void 0:M.is_leaving)==="leaving"?t("leaving_certificates"):t("transfer_certificate")}),e.jsxs("div",{style:{paddingInline:"1rem"},children:[e.jsx(l,{labelText:t("name"),placeholder:t("name"),name:"name",value:s.name,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsxs("div",{className:o.form_profile_info,children:[e.jsx(l,{labelText:t("mother_name"),placeholder:t("mother_name"),name:"studentMotherName",value:s.studentMotherName,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsx(l,{labelText:t("mother_tongue"),placeholder:t("mother_tongue"),name:"studentMTongue",value:s.studentMTongue,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}})]}),e.jsxs("div",{className:o.form_profile_info,children:[e.jsx(l,{labelText:t("cast"),placeholder:t("cast"),name:"studentCast",value:s.studentCast,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsx(C,{selectLabel:t("cast_category"),selectedValue:t("cast_category"),value:s.studentCastCategory,name:"studentCastCategory",onChange:a,options:Pt,optionsValue:Dt,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}})]}),e.jsxs("div",{className:o.form_profile_info,children:[e.jsx(C,{selectLabel:t("nationality"),selectedValue:t("nationality"),value:s.studentNationality,name:"studentNationality",onChange:a,options:$t,optionsValue:Mt,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsx(C,{selectLabel:t("religion"),selectedValue:t("religion"),value:s.studentReligion,name:"studentReligion",onChange:a,options:Ut,optionsValue:Vt,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}})]}),e.jsxs("div",{className:o.form_profile_info,children:[e.jsx(l,{labelText:t("birth_place"),placeholder:t("birth_place"),name:"studentBirthPlace",value:s.studentBirthPlace,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsx(wt,{to:`/q/${R.username}/student/profile`,state:{sid:(V=(U=n==null?void 0:n.state)==null?void 0:U.student)==null?void 0:V._id,viewAs:"LEAVING_FORM"},children:e.jsx(l,{labelText:t("applicable_remaining_fees"),name:"studentMotherName",value:`${t("applicable_remaining_fees")} : ${(J=(F=n.state)==null?void 0:F.student)==null?void 0:J.applicable_fees_pending}`,type:"text",onChange:()=>{},customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none",color:"#2572CB",cursor:"pointer"}})})]}),e.jsxs("div",{className:o.form_profile_info,children:[e.jsx(ht,{labelText:t("dob"),placeholder:t("dob"),name:"studentDOB",value:s.studentDOB,onDateFunction:St,customStyleContainer:{position:"relative"},customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsx(l,{labelText:t("in_words"),placeholder:t("in_words"),name:"studentDOBWork",value:s.studentDOB?`${bt(yt.toWords((K=(W=(G=s==null?void 0:s.studentDOB)==null?void 0:G.split("T")[0])==null?void 0:W.split("-"))==null?void 0:K[2]))}  ${Ft[((z=(Q=(H=s==null?void 0:s.studentDOB)==null?void 0:H.split("T")[0])==null?void 0:Q.split("-"))==null?void 0:z[1])-1]} ${bt(yt.toWords((X=(Z=(q=s==null?void 0:s.studentDOB)==null?void 0:q.split("T")[0])==null?void 0:Z.split("-"))==null?void 0:X[0]))}`:"",type:"text",onChange:()=>{},customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}})]}),e.jsx(l,{labelText:t("prev_school_college"),placeholder:t("prev_school_college"),name:"studentPreviousSchool",value:s.studentPreviousSchool,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsxs("div",{className:o.form_profile_info,children:[e.jsx(ht,{labelText:t("joining_date"),placeholder:t("joining_date"),name:"instituteJoinDate",value:s.instituteJoinDate,onDateFunction:jt,customStyleContainer:{position:"relative"},customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsx(l,{labelText:t("was_studying_in"),placeholder:t("was_studying_in"),name:"studentClassName",value:s.studentClassName,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}})]}),e.jsxs("div",{className:o.form_profile_info,children:[e.jsx(C,{selectLabel:t("study_progress"),selectedValue:t("study_progress"),value:s.studentLeavingStudy,name:"studentLeavingStudy",onChange:a,options:["Beginner","Intermediate","Advanced"],isNotTranslation:!0,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsx(C,{selectLabel:t("behaviour"),selectedValue:t("behaviour"),value:s.studentLeavingBehaviour,name:"studentLeavingBehaviour",onChange:a,options:["Excellent","Very Good","Good","Bad","Very Bad"],isNotTranslation:!0,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}})]}),e.jsx(l,{labelText:t("reason_for_leaving"),placeholder:t("reason_for_leaving"),name:"studentLeavingReason",value:s.studentLeavingReason,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsx(l,{labelText:t("remarks"),placeholder:t("remarks"),name:"studentRemark",value:s.studentRemark,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsx(l,{labelText:t("competent_authority"),placeholder:t("competent_authority_lable"),name:"authority",value:s.authority,type:"text",onChange:a,customStyleLabel:{marginTop:"7px",marginBottom:"4px"},customStyleInput:{outline:"none"}}),e.jsxs("section",{className:o.letter_head_container,children:[v?e.jsx("img",{src:"/images/checkbox-icon.svg",alt:"icon",onClick:O}):e.jsx("img",{src:"/images/box-icon.svg",alt:"icon",onClick:O}),e.jsx("h6",{children:t("printing_on_letter_head")})]})]}),e.jsxs("div",{className:o.buttoncontainer,children:[e.jsx("div",{className:o.buttonInner,children:f?e.jsx("div",{className:o.button_main,style:{marginTop:"1.5vw",width:"100%",cursor:"pointer",backgroundColor:"#4CAF50"},onClick:()=>y(!0),children:e.jsx("span",{children:t("original_copy")})}):e.jsx("div",{className:o.button_main,style:{marginTop:"1.5vw",width:"100%",cursor:"pointer",backgroundColor:"rgb(228, 72, 121)"},onClick:()=>y(!0),children:e.jsx("span",{children:t("duplicate_copy")})})}),e.jsx("div",{className:o.buttonInner,children:e.jsx("div",{className:o.button_main,style:{marginTop:"1.5vw",width:"100%",cursor:"pointer"},onClick:Ct,children:e.jsx("span",{children:t("download_certificate")})})})]}),L&&e.jsx(Gt,{open:L,hideModal:i=>y(i),insId:(te=(ee=(Y=n.state)==null?void 0:Y.student)==null?void 0:ee.institute)==null?void 0:te._id,setIsOrigin:_}),B&&e.jsx(kt,{})]})},cn=()=>{var y,f,_,B,b,I,w,v,k,s;const{t}=ft(),n=_t(),R=vt(),h=At(u=>u.idChange.id),{data:r,refetch:N}=Et(h,{skip:(y=n.state)!=null&&y.viewAs?((f=n.state)==null?void 0:f.viewAs)==="INSTITUTE"?!0:!h:!0});g.useEffect(()=>{var u;(u=n.state)!=null&&u.viewAs&&h&&N()},[(_=n.state)==null?void 0:_.viewAs,h,N]),g.useEffect(()=>{var u;(u=document.getElementById("scrollView"))==null||u.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},[(B=n.state)==null?void 0:B.sid]);const L=()=>{R(-1)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:o.navbar,children:((b=n.state)==null?void 0:b.viewAs)==="INSTITUTE"?e.jsx(Rt,{status:"home"}):e.jsx(Ot,{status:"members",profileId:r?(I=r==null?void 0:r.user)==null?void 0:I._id:"",username:(w=r==null?void 0:r.user)==null?void 0:w.username,name:(v=r==null?void 0:r.user)==null?void 0:v.userLegalName,photoId:(k=r==null?void 0:r.user)==null?void 0:k.photoId,profilePhoto:(s=r==null?void 0:r.user)==null?void 0:s.profilePhoto,profileData:r==null?void 0:r.user})}),e.jsx("div",{className:o.goback_container,id:"scrollView",children:e.jsxs("div",{className:o.goback_container_text,onClick:L,children:[e.jsx("img",{src:"/images/arr-left-white.svg",alt:"go back icon"}),e.jsx("h6",{className:o.goback_container_text_go,children:t("go_back")})]})}),e.jsx("div",{className:o.student_from_container,style:{marginBottom:"1rem"},children:e.jsx(zt,{})})]})};export{cn as default};
