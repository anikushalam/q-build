import{r as n,t as y,u as A,R as d,l as F,j as t,e as j}from"./index-731451a5.js";import{s as i}from"./AssignStaffModal.module-a60b32e1.js";import{S as O}from"./SearchModalWrapper-6e85c9f3.js";import{O as $}from"./Overlay-07ce6f88.js";import{d as q}from"./plateform-api-93737b6a.js";import"./SearchModalBackdrop-5b309d60.js";import"./SearchHeader.module-b69c8942.js";import"./Overlay.module-9133d1bb.js";const z=({onClose:o,selectMember:N})=>{const[p,S]=n.useState(1),[g,_]=n.useState(!0),[b,l]=y(),{t:c}=A(),[r,w]=n.useState(""),[a,f]=d.useState([]),{affiliatedSearch:e,affiliatedSearchRefetch:h}=q({search:r,page:p,limit:10});d.useEffect(()=>{h()},[h,p]),n.useEffect(()=>{l&&g&&S(s=>s+1)},[l,g]),d.useEffect(()=>{if(e!=null&&e.manage)if(r)f(e==null?void 0:e.manage);else{const s=[...a,...e==null?void 0:e.manage],m=[...new Set(s.map(JSON.stringify))].map(JSON.parse);f(m)}(e==null?void 0:e.manage.length)===10?_(!0):_(!1)},[e==null?void 0:e.manage]),n.useEffect(()=>{r&&E()},[r]);const E=()=>{h()},C=n.useCallback(F.debounce(s=>w(s),500),[]),R=s=>{C(s)},x=s=>{N(s),o()},k=()=>{o()};return t.jsxs(t.Fragment,{children:[t.jsx(O,{onClose:k}),t.jsx($,{children:t.jsxs("div",{style:{backgroundColor:"#FAFAFA",borderRadius:"10px"},children:[t.jsxs("div",{className:i.assign_title,children:[t.jsx("h5",{children:c("search_select")}),t.jsx("img",{src:"/images/close-post-icon.svg",onClick:o,alt:"staff assign pop close icon"})]}),t.jsxs("div",{className:i.assign_search_container,children:[t.jsx("input",{type:"text",placeholder:c("search"),className:i.assign_search_input,onChange:s=>R(s.target.value)}),t.jsx("img",{src:"/images/search-dash-icon.svg",alt:"search icon"})]}),t.jsx("div",{className:i.assign_show_list,children:a==null?void 0:a.map((s,m)=>(a==null?void 0:a.length)===m+1?t.jsxs("div",{ref:b,children:[t.jsxs("div",{className:i.assign_show_list_each,onClick:()=>x(s),children:[t.jsx("img",{src:s!=null&&s.photo?`${j}/${s.photo}`:"/images/member_tab/class/default_avatar.svg",alt:"student profile avatar"}),t.jsxs("div",{className:i.assign_each_paragraph,children:[t.jsx("h6",{children:s==null?void 0:s.affiliation_name}),t.jsxs("p",{children:[c("aff_ins")," ",s==null?void 0:s.affiliation_institute_approve_count]})]})]}),t.jsx("hr",{})]},s._id):t.jsxs("div",{children:[t.jsxs("div",{className:i.assign_show_list_each,onClick:()=>x(s),children:[t.jsx("img",{src:s!=null&&s.photo?`${j}/${s.photo}`:"/images/member_tab/class/default_avatar.svg",alt:"student profile avatar"}),t.jsxs("div",{className:i.assign_each_paragraph,children:[t.jsx("h6",{children:s==null?void 0:s.affiliation_name}),t.jsxs("p",{children:[c("aff_ins")," ",s==null?void 0:s.affiliation_institute_approve_count]})]})]}),t.jsx("hr",{})]},s._id))})]})})]})};export{z as default};
