import{u as $,k as W,t as B,r as c,j as s,S as E,l as Is,e as Q,a1 as Ss,Q as cs,R as ps,d as es,n as Cs,lv as bs,g as ys,bp as ws,lw as $s}from"./index-0ca76035.js";import{A as Ls,L as Ts}from"./LibrarySiteInfo-c7cbcf28.js";import{s as J,C as Z,a as b,I as F}from"./IssuedBookItem-04dc7330.js";import{k as qs,f as Rs,l as Ds,m as ks,n as Bs,o as Es,p as Ps,q as Os,r as gs,s as Ms,t as As,u as Js}from"./library-api-cd2cf9e9.js";import{P as Vs}from"./PopupWrapper-2578092d.js";import{v as Gs,s as Qs}from"./institute-staff-student-api-7114d611.js";import{U as Ns}from"./UniversalTab-73e7f63a.js";import{B as as}from"./BorderBottom-1dc6f53e.js";import{E as vs}from"./EmptyInfo-dd58cebb.js";import{S as Us}from"./StudentInternalFeeReceipt-723a549f.js";import{L as Ws}from"./LoaderButton-56f541f9.js";import{L as Y}from"./LibraryBookCard-77f4a0ab.js";import"./JoinFormInput-82706177.js";import"./JoinForm.module-212f9bb3.js";import"./CustomNormalSelectInput-0a62fa3f.js";import"./JoinFormTextArea-394bf055.js";import"./JoinFormFileEdit-10928ae7.js";import"./ViewFileDialog-f7d48575.js";import"./Overlay-c8100e0a.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalBackdrop-c4f123e6.js";import"./SearchHeader.module-b69c8942.js";import"./Switch-4bb87998.js";import"./SwitchBase-e3c2ff35.js";import"./SearchModalWrapper-0fa3f9a3.js";import"./StudentAllFeesData.module-f5c3243d.js";import"./admission-api-925391d9.js";import"./pdfInternalFeeReceipt-24199e26.js";import"./numberToWords.min-081ca735.js";const Hs="_departmenthead_tkk9w_1",Ys={departmenthead:Hs};function zs(){const{t:e}=$(),a=W(u=>u.libraryChange.lid),[o,i]=B(),[n,h]=c.useState(1),[m,f]=c.useState([]),[x,j]=c.useState(!0),[_,l]=c.useState(!0),{getCollectedBooklist:p,getCollectedBookListRefetch:d}=qs({data:{lid:a,page:n,limit:10},skip:!a});return c.useEffect(()=>{i&&x&&h(u=>u+1)},[i,x]),c.useEffect(()=>{a&&(l(!0),d())},[n,a,d]),c.useEffect(()=>{var u,v;p!=null&&p.collected?(f(t=>[...new Set([...t,...p==null?void 0:p.collected].map(JSON.stringify))].map(JSON.parse)),l(!1)):((u=p==null?void 0:p.collected)==null?void 0:u.length)===0&&l(!1),((v=p==null?void 0:p.collected)==null?void 0:v.length)===10?j(!0):j(!1)},[p==null?void 0:p.collected]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:J.searchContainerr,children:s.jsxs("div",{className:J.searchContainer,children:[s.jsx("img",{alt:"",src:"/images/search-dept-icon.svg"}),s.jsx("input",{type:"text",placeholder:e("search-label"),required:!0})]})}),s.jsx("div",{className:J.remainingFees,children:s.jsx("div",{className:J.remainingFeesBottom,children:s.jsxs("div",{className:J.itemsContainer,children:[m==null?void 0:m.map((u,v)=>(m==null?void 0:m.length)===v+1?s.jsx("div",{ref:o,className:J.itemsRef,children:s.jsx(Z,{book:u,status:"memberdetail"})},v):s.jsx("div",{className:J.itemsRef,children:s.jsx(Z,{book:u,status:"memberdetail"})},v)),_&&s.jsx(E,{}),!_&&(m==null?void 0:m.length)===0&&s.jsx("div",{className:J.noData,children:s.jsx("img",{src:"/images/nodata.jpg",alt:""})})]})})})]})}const Ks="_issue_modal_oeoed_1",Xs="_issueModalbody_oeoed_12",Zs="_issueModaltop_oeoed_16",Fs="_issuedBookItem_oeoed_26",se="_imgcontainer_oeoed_41",ee="_issuedBookItemMidright_oeoed_56",te="_issuedBookItemBottomLeft_oeoed_57",ae="_textt_oeoed_58",ie="_issueModaltopback_oeoed_81",ce="_issueModaltopsearch_oeoed_85",ne="_dash_oeoed_90",oe="_selectedText_oeoed_96",le="_itembookcontainer_oeoed_108",de="_itembookk_oeoed_111",re="_itembookcursor_oeoed_124",me="_issueBookk_oeoed_132",he="_bookmargin_oeoed_145",_e="_bluetick_oeoed_149",ue="_issuedDate_oeoed_156",fe="_issuebtn_oeoed_171",xe="_searchContainerr_oeoed_193",je="_searchContainer_oeoed_193",pe="_closeIconContainer_oeoed_229",ge="_closeIcon_oeoed_229",Ne="_author_oeoed_240",ve="_authorLabel_oeoed_252",I={issue_modal:Ks,issueModalbody:Xs,issueModaltop:Zs,issuedBookItem:Fs,imgcontainer:se,issuedBookItemMidright:ee,issuedBookItemBottomLeft:te,textt:ae,issueModaltopback:ie,issueModaltopsearch:ce,dash:ne,selectedText:oe,itembookcontainer:le,itembookk:de,itembookcursor:re,issueBookk:me,bookmargin:he,bluetick:_e,issuedDate:ue,issuebtn:fe,searchContainerr:xe,searchContainer:je,closeIconContainer:pe,closeIcon:ge,author:Ne,authorLabel:ve},ns=({onSearch:e,onBack:a,step:o})=>{const{t:i}=$(),[n,h]=c.useState(!1),m=()=>{h(_=>!_)},f=()=>{e(""),h(_=>!_)},x=c.useCallback(Is.debounce(_=>e(_),500),[]),j=_=>{x(_.target.value)};return s.jsx("div",{className:I.issueModaltop,children:n?s.jsxs("div",{className:I.searchContainerr,children:[s.jsxs("div",{className:I.searchContainer,children:[s.jsx("img",{alt:"",src:"/images/search-dept-icon.svg"}),s.jsx("input",{type:"text",placeholder:i("search-label"),onChange:j})]}),s.jsx("div",{className:I.closeIconContainer,children:s.jsx("img",{onClick:f,className:I.closeIcon,src:"/images/user_signup/close.svg",alt:""})})]}):s.jsxs(s.Fragment,{children:[s.jsx("img",{className:I.issueModaltopback,src:"/images/back.svg",alt:"",onClick:a}),s.jsx("h6",{className:I.issueModaltoph6,children:i(o===0?"select_member":o===1?"select_book":"issued_preview")}),o!==2&&s.jsx("img",{onClick:m,className:I.issueModaltopsearch,src:"/images/search-icon.svg",alt:""})]})})};function xs({student:e,onAddMember:a}){const{t:o}=$();return s.jsxs("div",{className:I.issuedBookItem,onClick:()=>a(e),children:[s.jsx("div",{className:I.issuedBookItemMidleft,children:s.jsx("div",{className:I.imgcontainer,children:s.jsx("img",{src:(e==null?void 0:e.photoId)!=="1"?`${Q}/${e==null?void 0:e.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:""})})}),s.jsxs("div",{className:I.issuedBookItemMidright,children:[s.jsx("h6",{children:`${e==null?void 0:e.studentFirstName} ${e!=null&&e.studentMiddleName?e==null?void 0:e.studentMiddleName:""} ${e==null?void 0:e.studentLastName}`}),s.jsxs("p",{children:[o("gr_no")," ",e==null?void 0:e.studentGRNO]})]})]})}const Ie=({instituteId:e,onAddMember:a,onBack:o,step:i})=>{const[n,h]=c.useState(""),[m,f]=B({skip:n}),[x,j]=c.useState([]),[_,l]=c.useState(1),[p,d]=c.useState(!0),[u,v]=c.useState(!0),{approveStudentList:t,approveStudentListRefetch:r}=Gs({data:{id:e,page:_,limit:10},skip:!e}),{searchStudent:g,searchStudentRefetch:w}=Qs({data:{search:n,page:1,limit:10,id:e},skip:!n});c.useEffect(()=>{f&&p&&l(N=>N+1)},[f,p]),c.useEffect(()=>{n&&e&&(v(!0),w())},[n,e,_,w]),c.useEffect(()=>{e&&(v(!0),r())},[e,_,r]),c.useEffect(()=>{var N,y,L;n?g!=null&&g.student?(j(_===1?g==null?void 0:g.student:q=>[...new Set([...q,...g==null?void 0:g.student].map(JSON.stringify))].map(JSON.parse)),v(!1)):((N=g==null?void 0:g.student)==null?void 0:N.length)===0&&v(!1):t!=null&&t.studentIns?(j(_===1?t==null?void 0:t.studentIns:q=>[...new Set([...q,...t==null?void 0:t.studentIns].map(JSON.stringify))].map(JSON.parse)),v(!1)):((y=t==null?void 0:t.studentIns)==null?void 0:y.length)===0&&v(!1),((L=t==null?void 0:t.studentIns)==null?void 0:L.length)===10?d(!0):d(!1)},[t==null?void 0:t.studentIns,g==null?void 0:g.student]);const S=N=>{l(y=>1),h(N)};return s.jsxs(s.Fragment,{children:[s.jsx(ns,{onBack:o,step:i,onSearch:S}),x==null?void 0:x.map((N,y)=>(x==null?void 0:x.length)===y+1?s.jsx("div",{ref:m,children:s.jsx(xs,{student:N,onAddMember:a})},N==null?void 0:N._id):s.jsx(xs,{student:N,onAddMember:a},N==null?void 0:N._id)),u&&s.jsx(E,{status:"white"})]})};function is({book:e,status:a,onAddBook:o}){const{t:i}=$(),n=()=>{a==="selectbook"&&o(e)};return s.jsxs("div",{className:a!=="issueBook"?`${I.itembookk} ${I.itembookcursor}`:I.itembookk,onClick:n,children:[a==="issueBook"&&s.jsx("img",{className:I.bluetick,src:"/images/library/bluetick.svg",alt:"verified"}),s.jsx("p",{className:I.selectedText,children:e==null?void 0:e.language}),s.jsx("img",{src:e!=null&&e.photo?`${Q}/${e==null?void 0:e.photo}`:"/images/defaultBook.png",alt:""}),s.jsxs("div",{className:I.textt,children:[s.jsx("h6",{children:e==null?void 0:e.bookName}),s.jsxs("p",{className:I.author,children:[e==null?void 0:e.author,"  ",s.jsx("span",{className:I.authorLabel,children:i("author")})]})]})]})}const Se=({member:e,onAddBook:a,onBack:o,step:i})=>{const{t:n}=$(),[h,m]=B(),[f,x]=c.useState(1),[j,_]=c.useState(!0),[l,p]=c.useState(!0),[d,u]=c.useState([]),[v,t]=c.useState(""),r=W(N=>N.libraryChange),{getBooklist:g,getBookListRefetch:w}=Rs({data:{lid:r==null?void 0:r.lid,page:f,limit:10,search:v,flow:"ISSUE_BOOK"},skip:!(r!=null&&r.lid)});c.useEffect(()=>{r!=null&&r.lid&&(p(!0),w())},[r==null?void 0:r.lid,f,v,w]),c.useEffect(()=>{m&&j&&x(N=>N+1)},[m,j]),c.useEffect(()=>{var N,y;v?(u(g==null?void 0:g.books),p(!1)):g!=null&&g.books?(u(f===1?g==null?void 0:g.books:L=>[...new Set([...L,...g==null?void 0:g.books].map(JSON.stringify))].map(JSON.parse)),p(!1)):((N=g==null?void 0:g.books)==null?void 0:N.length)===0&&p(!1),((y=g==null?void 0:g.books)==null?void 0:y.length)===10?_(!0):_(!1)},[g==null?void 0:g.books]);const S=N=>{x(y=>1),t(N)};return s.jsxs(s.Fragment,{children:[s.jsx(ns,{onBack:o,step:i,onSearch:S}),s.jsxs("div",{className:I.selectbook,children:[s.jsxs("div",{className:I.issuedBookItem,children:[s.jsx("p",{className:I.selectedText,children:n("selected")}),s.jsx("div",{className:I.issuedBookItemMidleft,children:s.jsx("div",{className:I.imgcontainer,children:s.jsx("img",{src:e!=null&&e.studentProfilePhoto?`${Q}/${e==null?void 0:e.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:""})})}),s.jsxs("div",{className:I.issuedBookItemMidright,children:[s.jsx("h6",{children:`${e==null?void 0:e.studentFirstName} ${e!=null&&e.studentMiddleName?e==null?void 0:e.studentMiddleName:""} ${e==null?void 0:e.studentLastName}`}),s.jsxs("p",{children:[n("gr_no")," ",e==null?void 0:e.studentGRNO]})]})]}),s.jsx("div",{className:I.dash}),s.jsxs("div",{className:I.itembookcontainer,children:[d==null?void 0:d.map((N,y)=>(d==null?void 0:d.length)===y+1?s.jsx("div",{ref:h,children:s.jsx(is,{status:"selectbook",book:N,onAddBook:a})},N==null?void 0:N._id):s.jsx(is,{status:"selectbook",book:N,onAddBook:a},N==null?void 0:N._id)),l&&s.jsx(E,{status:"white"})]})]})]})},Ce=({member:e,book:a,onBack:o,step:i,onIssueBook:n})=>{const{t:h}=$();return s.jsxs(s.Fragment,{children:[s.jsx(ns,{onBack:o,step:i}),s.jsxs("div",{className:I.issueBookk,children:[s.jsx("h6",{children:h("member")}),s.jsxs("div",{className:`${I.itembookk} ${I.bookmargin}`,children:[s.jsx("img",{className:I.bluetick,src:"/images/library/bluetick.svg",alt:"verified"}),s.jsx("div",{className:I.issuedBookItemMidleft,children:s.jsx("div",{className:I.imgcontainer,children:s.jsx("img",{src:e!=null&&e.studentProfilePhoto?`${Q}/${e==null?void 0:e.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:""})})}),s.jsxs("div",{className:I.issuedBookItemMidright,children:[s.jsx("h6",{children:`${e==null?void 0:e.studentFirstName} ${e!=null&&e.studentMiddleName?e==null?void 0:e.studentMiddleName:""} ${e==null?void 0:e.studentLastName}`}),s.jsxs("p",{children:[h("gr_no")," ",e==null?void 0:e.studentGRNO]})]})]}),s.jsx("h6",{children:h("book")}),s.jsx(is,{book:a,status:"issueBook"}),s.jsxs("h6",{className:I.issuedDate,children:[h("issue_date")," : ",s.jsx("span",{children:Ss().format("Do MMM YYYY")})]}),s.jsx("button",{className:I.issuebtn,onClick:n,children:h("issue_book")})]})]})},be=({onClose:e,instituteId:a,onRefetchWhenBookIssue:o})=>{const i=W(r=>r.libraryChange),[n,h]=c.useState(0),[m,f]=c.useState(!1),[x,j]=c.useState(""),[_,l]=c.useState(""),[p]=Ds(),d=()=>{n===0?e():h(n===1?0:1)},u=r=>{j(r),h(1)},v=r=>{l(r),h(2)},t=()=>{i!=null&&i.lid&&(x!=null&&x._id)&&(_!=null&&_._id)&&(f(!0),p({lid:i==null?void 0:i.lid,issueData:{memberId:x==null?void 0:x._id,bookId:_==null?void 0:_._id}}).then(()=>{o(),e(!1),f(!1)}).catch(()=>{}))};return s.jsx(s.Fragment,{children:s.jsxs(Vs,{onClose:d,children:[s.jsxs("div",{className:I.issue_modal,children:[n===0&&s.jsx(Ie,{instituteId:a,onAddMember:u,step:n,onBack:d}),n===1&&s.jsx(Se,{onAddBook:v,step:n,onBack:d,member:x}),n===2&&s.jsx(Ce,{step:n,onBack:d,book:_,member:x,onIssueBook:t})]}),m&&s.jsx(cs,{})]})})};function ye({insId:e}){const{t:a}=$(),[o,i]=B(),[n,h]=c.useState(1),[m,f]=c.useState([]),[x,j]=c.useState(!0),[_,l]=c.useState(!0),[p,d]=c.useState(!1),[u,v]=c.useState(!1),t=W(S=>S.libraryChange.lid),{getIssuedBooklist:r,getIssuedBookListRefetch:g}=ks({data:{lid:t,page:n,limit:10},skip:!t});c.useEffect(()=>{i&&x&&h(S=>S+1)},[i,x]),c.useEffect(()=>{t&&(l(!0),g())},[n,t,g]),c.useEffect(()=>{var S,N;r!=null&&r.issues&&(p?(f(r==null?void 0:r.issues),l(!1),d(!1)):r!=null&&r.issues?(f(y=>[...new Set([...y,...r==null?void 0:r.issues].map(JSON.stringify))].map(JSON.parse)),l(!1)):((S=r==null?void 0:r.issues)==null?void 0:S.length)===0&&l(!1)),((N=r==null?void 0:r.issues)==null?void 0:N.length)===10?j(!0):j(!1)},[r==null?void 0:r.issues]);const w=()=>{h(1),d(!0),l(!0),g()};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:b.searchContainerr,children:[s.jsxs("div",{className:b.searchContainer,children:[s.jsx("img",{alt:"",src:"/images/search-dept-icon.svg"}),s.jsx("input",{type:"text",placeholder:a("search-label"),required:!0})]}),s.jsx("div",{className:b.newBtn,onClick:()=>v(!0),children:a("issue_book")})]}),s.jsx("div",{className:b.remainingFees,children:s.jsx("div",{className:b.remainingFeesBottom,children:s.jsxs("div",{className:b.itemsContainer,children:[m==null?void 0:m.map((S,N)=>(m==null?void 0:m.length)===N+1?s.jsx("div",{ref:o,className:b.itemsRef,children:s.jsx(F,{book:S,member:S==null?void 0:S.member,issueId:S==null?void 0:S._id,onRefetchWhenBookCollect:w})},N):s.jsx("div",{className:b.itemsRef,children:s.jsx(F,{book:S,member:S==null?void 0:S.member,issueId:S==null?void 0:S._id,onRefetchWhenBookCollect:w})},N)),_&&s.jsx(E,{}),!_&&(m==null?void 0:m.length)===0&&s.jsx("div",{className:b.noData,children:s.jsx("img",{src:"/images/nodata.jpg",alt:""})})]})})}),u&&s.jsx(be,{instituteId:e,onClose:()=>v(!1),onRefetchWhenBookIssue:w})]})}const we="_admisionApplication_2hf31_1",$e="_admisionApplicationTop_2hf31_5",Le="_admisionApplicationTopLeft_2hf31_13",Te="_fine_heading_2hf31_18",qe="_active_2hf31_42",Re="_applicationBody_2hf31_47",De="_searchContainerr_2hf31_53",ke="_searchContainer_2hf31_53",Be="_newBtn_2hf31_88",Ee="_remainingFees_2hf31_106",Pe="_itemsContainer_2hf31_112",Oe="_item_2hf31_112",Me="_subItem_2hf31_129",Ae="_text_2hf31_138",Je="_imgContainer_2hf31_150",Ve="_enquiryDetail_2hf31_187",Ge="_enquiryDetailtop_2hf31_192",Qe="_enquiryDetailtopimg_2hf31_202",Ue="_enquiryDetailtoph6_2hf31_207",We="_enquiryDetailbody_2hf31_218",He="_enquiryDetailbodyp_2hf31_226",Ye="_itemrow_2hf31_236",ze="_enquiryDetailbodyspan_2hf31_240",Ke="_enquiryDetailbodyplight_2hf31_244",Xe="_pollTextarea_2hf31_254",Ze="_admisionApplicationTopRight_2hf31_289",Fe="_library_out_container_2hf31_299",st="_data_container_2hf31_302",U={admisionApplication:we,admisionApplicationTop:$e,admisionApplicationTopLeft:Le,fine_heading:Te,active:qe,applicationBody:Re,searchContainerr:De,searchContainer:ke,newBtn:Be,remainingFees:Ee,itemsContainer:Pe,item:Oe,subItem:Me,text:Ae,imgContainer:Je,enquiryDetail:Ve,enquiryDetailtop:Ge,enquiryDetailtopimg:Qe,enquiryDetailtoph6:Ue,enquiryDetailbody:We,enquiryDetailbodyp:He,itemrow:Ye,enquiryDetailbodyspan:ze,enquiryDetailbodyplight:Ke,pollTextarea:Xe,admisionApplicationTopRight:Ze,library_out_container:Fe,data_container:st},et="_remainingFees_4pbyx_1",tt="_remainingFeesBottom_4pbyx_7",at="_itemsContainer_4pbyx_10",it="_searchContainerr_4pbyx_19",ct="_searchContainer_4pbyx_19",nt="_newBtn_4pbyx_54",ot="_completeApplicationSplit_4pbyx_73",lt="_half_4pbyx_81",dt="_itemsDetails_4pbyx_94",rt="_memberItem_4pbyx_101",mt="_imgcontainer_4pbyx_116",ht="_issuedBookItemMidright_4pbyx_131",_t="_memberdetails_4pbyx_154",ut="_memberdetailstop_4pbyx_157",ft="_tabs_4pbyx_164",xt="_membersContainer_4pbyx_168",jt="_loader_4pbyx_176",pt="_noData_4pbyx_186",gt="_limember_4pbyx_195",Nt="_itemsRef_4pbyx_200",vt="_memberItemactive_4pbyx_204",C={remainingFees:et,remainingFeesBottom:tt,itemsContainer:at,searchContainerr:it,searchContainer:ct,newBtn:nt,completeApplicationSplit:ot,half:lt,"slide-effect":"_slide-effect_4pbyx_1",itemsDetails:dt,memberItem:rt,imgcontainer:mt,issuedBookItemMidright:ht,memberdetails:_t,memberdetailstop:ut,tabs:ft,membersContainer:xt,loader:jt,noData:pt,limember:gt,itemsRef:Nt,memberItemactive:vt};function js({index:e,member:a,setMid:o,mid:i}){const{t:n}=$();return s.jsxs("div",{className:(a==null?void 0:a._id)===i?`${C.memberItem} ${C.memberItemactive}`:C.memberItem,onClick:()=>o(a==null?void 0:a._id),children:[s.jsx("div",{className:C.issuedBookItemMidleft,children:s.jsx("div",{className:C.imgcontainer,children:s.jsx("img",{src:(a==null?void 0:a.photoId)!=="1"?`${Q}/${a==null?void 0:a.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:""})})}),s.jsxs("div",{className:C.issuedBookItemMidright,children:[s.jsx("h6",{children:`${a==null?void 0:a.studentFirstName} ${a!=null&&a.studentMiddleName?a==null?void 0:a.studentMiddleName:""} ${a==null?void 0:a.studentLastName}`}),s.jsxs("p",{children:[n("index_no")," : ",e," "]})]})]})}const It="_studentMCQ_175ui_1",St="_mcqToptabs_175ui_4",Ct="_mcqTop_175ui_4",bt="_mcqTopItem_175ui_22",yt="_active_175ui_38",V={studentMCQ:It,mcqToptabs:St,mcqTop:Ct,mcqTopItem:bt,active:yt};function wt({activeIndex:e,setActiveIndex:a}){const{t:o}=$();return s.jsx("div",{className:V.mcqTop,children:s.jsxs("div",{className:V.mcqToptabs,children:[s.jsx("div",{className:e===0?`${V.mcqTopItem} ${V.active}`:V.mcqTopItem,onClick:()=>a(0),children:o("issued")}),s.jsx("div",{className:e===1?`${V.mcqTopItem} ${V.active}`:V.mcqTopItem,onClick:()=>a(1),children:o("history")})]})})}const $t=ps.forwardRef((e,a)=>{var o,i;return s.jsxs("div",{className:C.membersContainer,children:[(o=e==null?void 0:e.borrowList)==null?void 0:o.map((n,h)=>{var m;return((m=e==null?void 0:e.borrowList)==null?void 0:m.length)===h+1?s.jsx("div",{ref:a,className:C.limember,children:s.jsx(F,{book:n,member:e==null?void 0:e.member,issueId:n==null?void 0:n._id,onRefetchWhenBookCollect:e==null?void 0:e.onRefetchWhenBookCollect})},h):s.jsx("div",{className:C.limember,children:s.jsx(F,{book:n,member:e==null?void 0:e.member,issueId:n==null?void 0:n._id,onRefetchWhenBookCollect:e==null?void 0:e.onRefetchWhenBookCollect})},h)}),(e==null?void 0:e.showingDataLoading)&&s.jsx(E,{}),!(e!=null&&e.showingDataLoading)&&((i=e==null?void 0:e.borrowList)==null?void 0:i.length)===0&&s.jsx("div",{className:C.noData,children:s.jsx("img",{src:"/images/nodata.jpg",alt:""})})]})});function Lt({mid:e}){var d,u;const[a,o]=B(),[i,n]=c.useState(1),[h,m]=c.useState(!0),[f,x]=c.useState(!0),[j,_]=c.useState({memberId:"",historyList:[]}),{getMemberHistorylist:l,getMemberHistoryListRefetch:p}=Bs({data:{sid:e,page:j.memberId!==e?1:i,limit:10},skip:!e});return c.useEffect(()=>{o&&h&&n(v=>v+1)},[o,h]),c.useEffect(()=>{e&&(x(!0),p())},[i,e,p]),c.useEffect(()=>{var v,t;l!=null&&l.history?j.memberId===e?(_(r=>({...r,historyList:[...new Set([...r.historyList,...l==null?void 0:l.history].map(JSON.stringify))].map(JSON.parse)})),x(!1)):(_({memberId:e,historyList:[...l==null?void 0:l.history]}),x(!1)):((v=l==null?void 0:l.history)==null?void 0:v.length)===0&&x(!1),((t=l==null?void 0:l.history)==null?void 0:t.length)===10?m(!0):m(!1)},[l==null?void 0:l.history]),s.jsxs("div",{className:C.membersContainer,children:[(d=j.historyList)==null?void 0:d.map((v,t)=>{var r;return((r=j.historyList)==null?void 0:r.length)===t+1?s.jsx("div",{ref:a,className:C.limember,children:s.jsx(Z,{status:"memberdetail",book:v})},t):s.jsx("div",{className:C.limember,children:s.jsx(Z,{status:"memberdetail",book:v})},t)}),f&&s.jsx(E,{}),!f&&((u=j.historyList)==null?void 0:u.length)===0&&s.jsx("div",{className:C.noData,children:s.jsx("img",{src:"/images/nodata.jpg",alt:""})})]})}function Tt({mid:e}){var w,S,N,y,L,q,P,O,M,A,k,R,H,os,ls;const{t:a}=$(),[o,i]=c.useState(0),[n,h]=B(),[m,f]=c.useState(1),[x,j]=c.useState(!0),[_,l]=c.useState(!1),[p,d]=c.useState(!0),[u,v]=c.useState({student:"",issueList:[]}),{getMemberBooklist:t,getMemberBookListRefetch:r}=Es({data:{sid:e,page:u.student!==e?1:m,limit:10},skip:!e});c.useEffect(()=>{h&&x&&f(K=>K+1)},[h,x]),c.useEffect(()=>{e&&(d(!0),r())},[m,e,r]),c.useEffect(()=>{var K,ds,rs,ms,hs,_s,us,fs;(K=t==null?void 0:t.student)!=null&&K.borrow?(u.student===((ds=t==null?void 0:t.student)==null?void 0:ds._id)?_?(v(X=>{var z;return{...X,issueList:[...(z=t==null?void 0:t.student)==null?void 0:z.borrow]}}),l(!1)):v(X=>{var z;return{...X,issueList:[...new Set([...X.issueList,...(z=t==null?void 0:t.student)==null?void 0:z.borrow].map(JSON.stringify))].map(JSON.parse)}}):v({student:(rs=t==null?void 0:t.student)==null?void 0:rs._id,issueList:[...(ms=t==null?void 0:t.student)==null?void 0:ms.borrow]}),d(!1)):((_s=(hs=t==null?void 0:t.student)==null?void 0:hs.borrow)==null?void 0:_s.length)===0&&d(!1),((fs=(us=t==null?void 0:t.student)==null?void 0:us.borrow)==null?void 0:fs.length)===10?j(!0):j(!1)},[(w=t==null?void 0:t.student)==null?void 0:w.borrow]);const g=()=>{f(1),l(!0),d(!0),r()};return s.jsxs("div",{className:C.memberdetails,children:[s.jsxs("div",{className:C.memberdetailstop,children:[s.jsx("div",{className:C.issuedBookItemMidleft,children:s.jsx("div",{className:C.imgcontainer,children:s.jsx("img",{src:((S=t==null?void 0:t.student)==null?void 0:S.photoId)!=="1"?`${Q}/${(N=t==null?void 0:t.student)==null?void 0:N.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:""})})}),s.jsxs("div",{className:C.issuedBookItemMidright,children:[s.jsx("h6",{children:`${(y=t==null?void 0:t.student)==null?void 0:y.studentFirstName} ${(L=t==null?void 0:t.student)!=null&&L.studentMiddleName?(q=t==null?void 0:t.student)==null?void 0:q.studentMiddleName:""} ${(P=t==null?void 0:t.student)==null?void 0:P.studentLastName}`}),s.jsxs("p",{children:[a("index_no")," : ",(O=t==null?void 0:t.student)==null?void 0:O.studentGRNO]})]})]}),s.jsx("div",{className:C.tabs,children:s.jsx(wt,{activeIndex:o,setActiveIndex:i})}),o===0&&s.jsx($t,{showingDataLoading:p,ref:n,borrowList:u.issueList,member:{photoId:(M=t==null?void 0:t.student)==null?void 0:M.photoId,studentFirstName:(A=t==null?void 0:t.student)==null?void 0:A.studentFirstName,studentGRNO:(k=t==null?void 0:t.student)==null?void 0:k.studentGRNO,studentLastName:(R=t==null?void 0:t.student)==null?void 0:R.studentLastName,studentMiddleName:(H=t==null?void 0:t.student)==null?void 0:H.studentMiddleName,studentProfilePhoto:(os=t==null?void 0:t.student)==null?void 0:os.studentProfilePhoto,_id:(ls=t==null?void 0:t.student)==null?void 0:ls._id},onRefetchWhenBookCollect:g}),o===1&&s.jsx(Lt,{mid:e})]})}function qt(){const{t:e}=$(),a=W(t=>t.libraryChange.lid),[o,i]=B(),[n,h]=c.useState([]),[m,f]=c.useState(1),[x,j]=c.useState(!0),[_,l]=c.useState(!0),[p,d]=c.useState(""),{getMemberslist:u,getMembersListRefetch:v}=Ps({data:{lid:a,page:m,limit:10},skip:!a});return c.useEffect(()=>{i&&x&&f(t=>t+1)},[i,x]),c.useEffect(()=>{a&&(l(!0),v())},[m,a,v]),c.useEffect(()=>{var t,r;u!=null&&u.members?(h(g=>[...new Set([...g,...u==null?void 0:u.members].map(JSON.stringify))].map(JSON.parse)),l(!1)):((t=u==null?void 0:u.members)==null?void 0:t.length)===0&&l(!1),((r=u==null?void 0:u.members)==null?void 0:r.length)===10?j(!0):j(!1)},[u==null?void 0:u.members]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:C.searchContainerr,children:s.jsxs("div",{className:C.searchContainer,children:[s.jsx("img",{alt:"",src:"/images/search-dept-icon.svg"}),s.jsx("input",{type:"text",placeholder:e("search-label"),required:!0})]})}),s.jsx("div",{className:C.remainingFees,children:s.jsxs("div",{className:p?`${C.completeApplicationSplit}`:"",children:[s.jsx("div",{className:p?`${C.remainingFeesBottom} ${C.half}`:C.remainingFeesBottom,children:s.jsxs("div",{className:C.itemsContainer,children:[n==null?void 0:n.map((t,r)=>(n==null?void 0:n.length)===r+1?s.jsx("div",{ref:o,className:C.limember,children:s.jsx(js,{member:t,setMid:d,mid:p,index:r+1})},r):s.jsx("div",{className:C.limember,children:s.jsx(js,{member:t,setMid:d,mid:p,index:r+1})},r)),_&&s.jsx(E,{}),!_&&(n==null?void 0:n.length)===0&&s.jsx("div",{className:C.noData,children:s.jsx("img",{src:"/images/nodata.jpg",alt:""})})]})}),p&&s.jsx("div",{className:C.itemsDetails,children:s.jsx(Tt,{mid:p})})]})})]})}const ss=({studentFine:e,is_last:a,lid:o,onRefetch:i})=>{var j,_,l,p,d,u,v,t,r,g,w,S,N,y,L,q;const{t:n}=$(),[h,m]=c.useState(!1),[f]=Os(),x=()=>{var P,O,M,A;(P=e==null?void 0:e.book)!=null&&P._id&&((O=e==null?void 0:e.student)!=null&&O._id)&&o&&(m(k=>!k),f({lid:o,sid:(M=e==null?void 0:e.student)==null?void 0:M._id,bid:(A=e==null?void 0:e.book)==null?void 0:A._id,collectData:{amount:(e==null?void 0:e.fine_charge)??0,prid:e==null?void 0:e._id}}).then(()=>{i(),m(k=>!k)}).catch({}))};return s.jsxs("div",{className:b.issuedBookItem,style:{width:a?"100%":"49%",marginBottom:a?"0":"1rem"},children:[s.jsxs("div",{className:b.issuedBookItemTop,children:[s.jsx("div",{className:b.issuedBookItemTopleft,children:s.jsx("img",{className:b.bookItemImg,src:(j=e==null?void 0:e.book)!=null&&j.photo?`${Q}/${(_=e==null?void 0:e.book)==null?void 0:_.photo}`:"/images/defaultBook.png",alt:"book avatar",loading:"lazy"})}),s.jsxs("div",{className:b.issuedBookItemTopright,children:[s.jsx("h6",{className:b.title,children:((p=(l=e==null?void 0:e.book)==null?void 0:l.bookName)==null?void 0:p.length)>=18?`${(u=(d=e==null?void 0:e.book)==null?void 0:d.bookName)==null?void 0:u.match(/.{1,18}/g)[0]} ...`:(v=e==null?void 0:e.book)==null?void 0:v.bookName}),s.jsxs("p",{className:b.author,children:[(t=e==null?void 0:e.book)==null?void 0:t.author,"  ",s.jsx("span",{className:b.authorLabel,children:n("author")})]}),s.jsxs("p",{className:b.booklang,children:[" ",(r=e==null?void 0:e.book)==null?void 0:r.language]})]})]}),s.jsxs("div",{className:b.issuedBookItemMid,children:[s.jsx("div",{className:b.issuedBookItemMidleft,children:s.jsx("div",{className:b.imgcontainer,children:s.jsx("img",{src:(g=e==null?void 0:e.student)!=null&&g.studentProfilePhoto?`${Q}/${(w=e==null?void 0:e.student)==null?void 0:w.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"book avatar",loading:"lazy"})})}),s.jsxs("div",{className:b.issuedBookItemMidright,children:[s.jsxs("h6",{children:[" ",`${((S=e==null?void 0:e.student)==null?void 0:S.studentFirstName)??""} ${((N=e==null?void 0:e.student)==null?void 0:N.studentMiddleName)??""} ${((y=e==null?void 0:e.student)==null?void 0:y.studentLastName)??""}`]}),s.jsxs("p",{children:[n("gr_no")," ",((L=e==null?void 0:e.student)==null?void 0:L.studentGRNO)??""," "]})]})]}),s.jsxs("div",{className:b.issuedBookItemBottom,children:[s.jsxs("div",{className:b.issuedBookItemBottomLeft,children:[s.jsxs("p",{children:[(e==null?void 0:e.fine_type)??""," Book Fine Amount"]}),s.jsxs("h6",{children:[n("rs"),". ",(e==null?void 0:e.fine_charge)??0]})]}),(e==null?void 0:e.status)==="Paid"?s.jsx("div",{className:b.issuedBookItemBottomLeft,children:s.jsx(Us,{rid:(q=e==null?void 0:e.fee_receipt)==null?void 0:q._id})}):s.jsx("div",{className:b.collectbtn,onClick:x,children:n("collect_fine")})]}),h&&s.jsx(cs,{})]})},Rt=({lid:e})=>{const[a,o]=c.useState(!0),[i,n]=c.useState(1),[h,m]=B(),[f,x]=c.useState([]),[j,_]=c.useState(!0),[l,p]=c.useState(!1),{libraryFineCharge:d,libraryFineChargeRefetch:u}=gs({data:{lid:e,page:i,limit:10,flow:"Remaining"},skip:!e});c.useEffect(()=>{e&&(_(!0),u())},[i,e,u]),c.useEffect(()=>{m&&a&&n(t=>t+1)},[m,a]),c.useEffect(()=>{var t,r;l?(x(d==null?void 0:d.all_student),p(!1),_(!1)):d!=null&&d.all_student?(x(g=>[...new Set([...g,...d==null?void 0:d.all_student].map(JSON.stringify))].map(JSON.parse)),_(!1)):((t=d==null?void 0:d.all_student)==null?void 0:t.length)===0&&_(!1),((r=d==null?void 0:d.all_student)==null?void 0:r.length)===10?o(!0):o(!1)},[d==null?void 0:d.all_student]);const v=()=>{n(1),p(!0),u()};return s.jsx("div",{className:U.library_out_container,children:s.jsxs("div",{className:U.data_container,children:[f==null?void 0:f.map((t,r)=>(f==null?void 0:f.length)===r+1?s.jsx("div",{ref:h,style:{width:"49%",marginBottom:"1rem"},children:s.jsx(ss,{studentFine:t,is_last:!0,lid:e,onRefetch:v})},t==null?void 0:t._id):s.jsx(ss,{studentFine:t,lid:e,onRefetch:v},t==null?void 0:t._id)),!j&&!f.length&&s.jsx(vs,{customStyleContainer:{marginTop:"9rem"},title:"No outstanding records found."}),j&&s.jsx(E,{status:"white"})]})})},Dt=({lid:e})=>{const[a,o]=c.useState(!0),[i,n]=c.useState(1),[h,m]=B(),[f,x]=c.useState([]),[j,_]=c.useState(!0),{libraryFineCharge:l,libraryFineChargeRefetch:p}=gs({data:{lid:e,page:i,limit:10,flow:"Paid"},skip:!e});return c.useEffect(()=>{e&&(_(!0),p())},[i,e,p]),c.useEffect(()=>{m&&a&&n(d=>d+1)},[m,a]),c.useEffect(()=>{var d,u;l!=null&&l.all_student?(x(i===1?l==null?void 0:l.all_student:v=>[...new Set([...v,...l==null?void 0:l.all_student].map(JSON.stringify))].map(JSON.parse)),_(!1)):((d=l==null?void 0:l.all_student)==null?void 0:d.length)===0&&_(!1),((u=l==null?void 0:l.all_student)==null?void 0:u.length)===10?o(!0):o(!1)},[l==null?void 0:l.all_student]),s.jsx("div",{className:U.library_out_container,children:s.jsxs("div",{className:U.data_container,children:[f==null?void 0:f.map((d,u)=>(f==null?void 0:f.length)===u+1?s.jsx("div",{ref:h,style:{width:"49%"},children:s.jsx(ss,{studentFine:d,is_last:!0})},d==null?void 0:d._id):s.jsx(ss,{studentFine:d},d==null?void 0:d._id)),!j&&!f.length&&s.jsx(vs,{customStyleContainer:{marginTop:"9rem"},title:"No received records found."}),j&&s.jsx(E,{status:"white"})]})})},kt=({carryParentState:e})=>{var n,h,m,f,x,j;const{t:a}=$(),o=es(),i=[{name:a("outstanding"),id:0,url:"member/library?a=charge"},{name:a("received"),id:1,url:"member/library?a=charge&collect"}];return s.jsxs(s.Fragment,{children:[s.jsx("h6",{className:U.fine_heading,children:a("fine_history")}),s.jsx(as,{customStyle:{width:"100%",marginTop:"0.2rem"}}),s.jsx(Ns,{tabList:i,showAs:!0,carryParentState:e,activeIndexTab:((n=o.search)==null?void 0:n.substring(3))==="charge"?0:1,customStyleLink:{width:"50%"},customStyleTab:{width:"100%"}}),s.jsx(as,{customStyle:{width:"100%",marginBottom:"1rem"}}),((h=o.search)==null?void 0:h.substring(3))==="charge"?s.jsx(Rt,{lid:(f=(m=o.state)==null?void 0:m.onClickValue)==null?void 0:f._id}):s.jsx(Dt,{lid:(j=(x=o.state)==null?void 0:x.onClickValue)==null?void 0:j._id})]})},Bt=["add","detail","edit"];function Et({insId:e,carryParentState:a}){var h,m,f,x,j,_,l,p,d,u;const{t:o}=$(),i=es(),n=[{name:o("all_books"),id:0,url:"member/library?a=book"},{name:o("issued_books"),id:1,url:"member/library?a=issue"},{name:o("collected_logs"),id:2,url:"member/library?a=collect"},{name:o("members"),id:3,url:"member/library?a=member"},{name:o("library_fine"),id:4,url:"member/library?a=charge"}];return s.jsxs("div",{className:U.admisionApplication,children:[!Bt.includes((h=i.search)==null?void 0:h.substring(10))&&s.jsx(Ns,{tabList:n,showAs:!0,carryParentState:a,activeIndexTab:((m=i.search)==null?void 0:m.substring(3,7))==="book"?0:((f=i.search)==null?void 0:f.substring(3))==="issue"?1:((x=i.search)==null?void 0:x.substring(3))==="collect"?2:((j=i.search)==null?void 0:j.substring(3))==="member"?3:4,customStyleLink:{width:"20%"},customStyleTab:{width:"100%"}}),s.jsx(as,{customStyle:{width:"100%",marginBottom:"1rem"}}),s.jsxs("div",{className:U.applicationBody,children:[((_=i.search)==null?void 0:_.substring(3,7))==="book"&&s.jsx(Ls,{getQuery:i,carryParentState:a}),((l=i.search)==null?void 0:l.substring(3))==="issue"&&s.jsx(ye,{insId:e}),((p=i.search)==null?void 0:p.substring(3))==="collect"&&s.jsx(zs,{}),((d=i.search)==null?void 0:d.substring(3))==="member"&&s.jsx(qt,{}),((u=i.search)==null?void 0:u.substring(3,9))==="charge"&&s.jsx(kt,{carryParentState:a})]})]})}const Pt="_MiddleContent_beuob_1",Ot="_MiddleContentLeft_beuob_15",Mt="_tabs_beuob_24",At="_item_beuob_27",Jt="_MiddleContentRight_beuob_50",Vt="_MiddleContentRightHead_beuob_57",Gt="_pItem_beuob_71",Qt="_text_beuob_90",Ut="_addbtn_beuob_124",Wt="_menu_beuob_143",Ht="_menuItem_beuob_148",Yt="_itemIcon_beuob_163",zt="_classList_beuob_185",Kt="_classListItem_beuob_187",D={MiddleContent:Pt,MiddleContentLeft:Ot,tabs:Mt,item:At,MiddleContentRight:Jt,MiddleContentRightHead:Vt,pItem:Gt,text:Qt,addbtn:Ut,menu:Wt,menuItem:Ht,itemIcon:Yt,classList:zt,classListItem:Kt},Xt="_studentMCQ_1981l_1",Zt="_mcqToptabs_1981l_4",Ft="_mcqTop_1981l_4",sa="_mcqTopItem_1981l_22",ea="_active_1981l_38",G={studentMCQ:Xt,mcqToptabs:Zt,mcqTop:Ft,mcqTopItem:sa,active:ea};function ta({activeIndex:e,setActiveIndex:a}){const{t:o}=$();return s.jsx("div",{className:G.mcqTop,children:s.jsxs("div",{className:G.mcqToptabs,children:[s.jsx("div",{className:e===0?`${G.mcqTopItem} ${G.active}`:G.mcqTopItem,onClick:()=>a(0),children:o("menu")}),s.jsx("div",{className:e===1?`${G.mcqTopItem} ${G.active}`:G.mcqTopItem,onClick:()=>a(1),children:o("funds")})]})})}const aa="_funds_12e30_1",ia="_funds2_12e30_5",ca="_fundshead_12e30_8",na="_fundscontent_12e30_32",oa="_sidebarbottomitem_12e30_43",la="_namee_12e30_58",da="_dueActive_12e30_69",ra="_desig_12e30_74",ma="_balanceItem_12e30_85",ha="_recover_btn_12e30_103",_a="_submitbtn_12e30_127",ua="_disabled_12e30_154",T={funds:aa,funds2:ia,fundshead:ca,fundscontent:na,sidebarbottomitem:oa,namee:la,dueActive:da,desig:ra,balanceItem:ma,recover_btn:ha,submitbtn:_a,disabled:ua};function ts({bal:e,value:a}){return s.jsxs("div",{className:T.balanceItem,children:[s.jsxs("p",{children:[e,":"]}),s.jsxs("p",{children:["Rs. ",a]})]})}function fa({carryParentState:e,library:a,getLibraryDetailRefetch:o}){const{t:i}=$(),n=W(j=>j.libraryChange),[h]=Ms(),[m,f]=ps.useState(!1),x=()=>{f(j=>!j),h({lid:n==null?void 0:n.lid,fine:{amount:a==null?void 0:a.collectedFine}}).then(()=>{o(),f(j=>!j)}).catch(()=>{f(j=>!j)})};return console.info("library",a),s.jsxs("div",{className:T.funds,children:[s.jsxs("div",{className:T.fundshead,children:[s.jsxs("h6",{children:[" ",i("lib_fines")," "]}),s.jsx("img",{src:"/images/finance/filter-icon.svg",alt:""})]}),s.jsxs("div",{className:T.fundscontent,children:[s.jsxs("div",{className:T.sidebarbottomitem,children:[s.jsx("img",{alt:"not found",src:"/images/finance/doller-icon.svg"}),s.jsxs("div",{children:[s.jsx("p",{className:T.namee,children:`Rs. ${a==null?void 0:a.totalFine}`}),s.jsx("p",{className:T.desig,children:i("total_fine_collected")})]})]}),s.jsx(ts,{check:"false",bal:i("cash_fine"),value:a==null?void 0:a.offlineFine}),s.jsx(ts,{check:"false",bal:i("bank_fine"),value:a==null?void 0:a.onlineFine}),s.jsx(ts,{check:"true",bal:i("cash_with_me"),value:a==null?void 0:a.collectedFine}),(a==null?void 0:a.requestStatus)==="Pending"&&(a==null?void 0:a.collectedFine)>0?s.jsxs("button",{className:T.submitbtn,disabled:m,onClick:x,children:[i("sublit_to_finance"),m&&s.jsx("div",{style:{marginTop:"0.7vw"},children:s.jsx(Ws,{})})]}):(a==null?void 0:a.requestStatus)==="Requested"?s.jsx("button",{className:`${T.submitbtn} ${T.disabled}`,children:i("request_to_finance")}):s.jsx("button",{className:`${T.submitbtn} ${T.disabled}`,children:i("sublit_to_finance")}),s.jsx(Y,{carryParentState:e,activeTab:"charge",children:s.jsxs("div",{className:T.recover_btn,children:[i("total_pending_fees"),": ",i("rs"),". ",(a==null?void 0:a.remainFine)??0]})})]}),m&&s.jsx(cs,{})]})}function xa({library:e,getLibraryDetailRefetch:a,carryParentState:o}){const[i,n]=c.useState(0),{t:h}=$();return s.jsx("div",{className:D.MiddleContent,children:s.jsxs("div",{className:D.MiddleContentLeft,children:[s.jsx("div",{className:D.tabs,children:s.jsx(ta,{activeIndex:i,setActiveIndex:n})}),i===0&&s.jsxs("div",{className:D.item,children:[s.jsx(Y,{carryParentState:o,activeTab:"book",children:s.jsxs("div",{className:D.itemIcon,children:[s.jsx("img",{src:"/images/member_tab/library/library-allbook-icon.svg",alt:"Class Catalog"}),s.jsx("p",{children:h("all_books")})]})}),s.jsx(Y,{carryParentState:o,activeTab:"issue",children:s.jsxs("div",{className:D.itemIcon,children:[s.jsx("img",{src:"/images/member_tab/library/library-issue-icon.svg",alt:"issued books"}),s.jsx("p",{children:h("issued_books")})]})}),s.jsx(Y,{carryParentState:o,activeTab:"collect",children:s.jsxs("div",{className:D.itemIcon,children:[s.jsx("img",{src:"/images/member_tab/library/library-collect-icon.svg",alt:"collected logs"}),s.jsx("p",{children:h("collected_logs")})]})}),s.jsx(Y,{carryParentState:o,activeTab:"charge",children:s.jsxs("div",{className:D.itemIcon,children:[s.jsx("img",{src:"/images/member_tab/library/library-fine-icon.svg",alt:"members"}),s.jsx("p",{children:h("library_fine")})]})}),s.jsx(Y,{carryParentState:o,activeTab:"member",children:s.jsxs("div",{className:D.itemIcon,children:[s.jsx("img",{src:"/images/member_tab/library/library-member-icon.svg",alt:"members"}),s.jsx("p",{children:h("members")})]})})]}),i===1&&s.jsx("div",{className:D.classList,children:s.jsx(fa,{library:e,carryParentState:o,getLibraryDetailRefetch:a})})]})})}const ja=({carryParentState:e})=>{var g,w,S,N,y,L,q,P,O,M,A,k;const{t:a}=$(),o=Cs(),i=W(R=>R.libraryChange),[n,h]=c.useState(""),[m,f]=c.useState(""),[x,j]=c.useState(!1),[_,l]=c.useState(!1),[p,d]=c.useState(""),[u]=As();c.useEffect(()=>{if(_){let R=new FormData;R.append("file",m),u({file:R,lid:i==null?void 0:i.lid}).then(H=>{}).catch({})}},[_,m]);const v=R=>{const H=URL.createObjectURL(R.target.files[0]);f(R.target.files[0]),d(H),h(H),j(!0)},{getLibraryDetail:t,getLibraryDetailRefetch:r}=Js({lid:i==null?void 0:i.lid,skip:!(i!=null&&i.lid)});return s.jsxs(s.Fragment,{children:[s.jsx(bs,{coverKey:(g=t==null?void 0:t.library)==null?void 0:g.cover,coverId:(w=t==null?void 0:t.library)==null?void 0:w.coverId,defaultCover:"/images/profileAndCover/library-cover.png",textLarge:a("librarian"),textSmall:`${(N=(S=t==null?void 0:t.library)==null?void 0:S.libraryHead)==null?void 0:N.staffFirstName} ${(L=(y=t==null?void 0:t.library)==null?void 0:y.libraryHead)!=null&&L.staffMiddleName?(P=(q=t==null?void 0:t.library)==null?void 0:q.libraryHead)==null?void 0:P.staffMiddleName:""} ${(M=(O=t==null?void 0:t.library)==null?void 0:O.libraryHead)==null?void 0:M.staffLastName}`,count1:(A=t==null?void 0:t.library)==null?void 0:A.bookCount,count1label:a("books"),count2:(k=t==null?void 0:t.library)==null?void 0:k.memberCount,count2label:a("members"),profilePhoto:p,profileChange:v,openCrop:x,setOpenCrop:j,setPhotoURL:h,photoURL:n,setFile:f,setUpload:l,setProfilePhoto:d,viewAs:!0,redirectUrl:`/q/${o.username}/member/library?a=site`,carryParentState:e}),s.jsx(xa,{library:t==null?void 0:t.library,getLibraryDetailRefetch:r,carryParentState:e})]})};function pa({onClickValue:e,carryParentState:a}){const o=es();return s.jsxs("div",{className:Ys.departmenthead,children:[!o.search&&s.jsx(ja,{carryParentState:a}),o.search&&s.jsx(Et,{carryParentState:a,insId:e==null?void 0:e.institute})]})}const Ya=()=>{var o,i,n,h,m,f;const e=es(),a=ys();return c.useEffect(()=>{var x,j,_,l,p;a(ws.libraryQuery({lid:(j=(x=e==null?void 0:e.state)==null?void 0:x.onClickValue)==null?void 0:j._id,lhead:(p=(l=(_=e==null?void 0:e.state)==null?void 0:_.onClickValue)==null?void 0:l.libraryHead)==null?void 0:p._id}))},[]),s.jsx(s.Fragment,{children:((o=e==null?void 0:e.search)==null?void 0:o.substring(3))==="site"?s.jsx(Ts,{lid:(n=(i=e==null?void 0:e.state)==null?void 0:i.onClickValue)==null?void 0:n._id}):s.jsx($s,{index:"8",sid:((h=e==null?void 0:e.state)==null?void 0:h.sid)??"",onClickValue:((m=e==null?void 0:e.state)==null?void 0:m.onClickValue)??"",children:s.jsx(pa,{onClickValue:((f=e==null?void 0:e.state)==null?void 0:f.onClickValue)??"",carryParentState:e==null?void 0:e.state})})})};export{Ya as default};
