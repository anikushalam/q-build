import{u as A,r as d,j as e,U as z,Q,e as J,S as G}from"./index-0ca76035.js";import{s as V}from"./Hostel.module-50da11fe.js";import{a1 as K,a2 as Y,a3 as H}from"./class-api-bd140bb6.js";import{P as X}from"./PopupWrapper-2578092d.js";import{J as W}from"./JoinFormInput-82706177.js";import{s as w}from"./HostelFeeStructure.module-5a40a31e.js";import{B as Z}from"./BorderBottom-1dc6f53e.js";import{s as C}from"./JoinForm.module-212f9bb3.js";import{s as F}from"./PromoteDepartment.module-1bdd3b1d.js";import{s as R}from"./EditConfirm.module-344fbdb9.js";import{S as b}from"./SearchModalBackdrop-c4f123e6.js";import{O as M}from"./Overlay-c8100e0a.js";import{E as ss}from"./EmptyInfo-dd58cebb.js";const es="_admin_acadmic_text_n2cma_1",cs="_admin_academic_container_n2cma_16",is="_admin_academic_btn_n2cma_23",ts="_subject_academic_title_n2cma_43",as="_days_container_n2cma_62",rs="_days_container_child_n2cma_71",ns="_days_container_child_active_n2cma_81",p={admin_acadmic_text:es,admin_academic_container:cs,admin_academic_btn:is,subject_academic_title:ts,days_container:as,days_container_child:rs,days_container_child_active:ns},os=({selectLabel:s,onClick:o,selectedValue:a,options:l,customStyleContainer:f,customLabelStyle:r,customListStyle:j,openAs:t,errorShow:x,defalutValue:g,viewAs:u})=>{const{t:h}=A(),[_,S]=d.useState(!1),[c,$]=d.useState(""),v=()=>{S(i=>!i)};d.useEffect(()=>{u==="NORMAL_FILTER"&&$(g)},[u,g]);const E=i=>{o(i),v()};return e.jsxs("div",{className:C.join_form_container,style:{...f},children:[e.jsxs("p",{className:C.join_form_select_paragraph,style:{...r},children:[s,x&&e.jsxs("span",{style:{color:"red",marginLeft:"15px"},children:["* ",h("form_require_label")]})]}),e.jsxs("section",{className:C.join_form_select_custom,onClick:v,children:[c?e.jsx("p",{className:C.join_form_select_custom_paragraph,children:c??""}):e.jsx("p",{className:C.join_form_select_custom_paragraph,children:a}),e.jsx("img",{className:C.join_form_select_custom_icon,src:"/images/down-icon.svg",alt:"categor icon"})]}),_&&e.jsx(e.Fragment,{children:e.jsx("section",{className:C.join_form_select_custom_list,style:j?{...j}:(l==null?void 0:l.length)>2?{overflowY:"scroll"}:{backgroundColor:"#ffffff"},children:l==null?void 0:l.map((i,T)=>{var y,O;return e.jsx("p",{onClick:()=>{var k,L;E(t==="PROMOTE"?i:i!=null&&i._id?i==null?void 0:i._id:i),u==="FINANCE_BANK"||$(i!=null&&i.subjectName?`${i==null?void 0:i.subjectName} ${(k=i==null?void 0:i.selected_batch_query)!=null&&k.batchName?`(${(L=i==null?void 0:i.selected_batch_query)==null?void 0:L.batchName})`:""}`:i)},className:C.join_form_select_custom_paragraph_option,children:i!=null&&i.subjectName?`${i==null?void 0:i.subjectName} ${(y=i==null?void 0:i.selected_batch_query)!=null&&y.batchName?`(${(O=i==null?void 0:i.selected_batch_query)==null?void 0:O.batchName})`:""}`:i},T)})})})]})},U=({onClose:s,openAs:o,clsId:a,day:l,onRefetch:f,dayMenu:r,onCloseParent:j})=>{var L,D,P,I,B;const{t}=A(),[x,g]=d.useState(!1),[u,h]=d.useState(""),[_,S]=d.useState({from:"",to:""}),[c,$]=d.useState(""),{oneClassAllSubject:v,oneClassAllSubjectRefetch:E}=z({cid:a,skip:!a}),[i]=K();d.useEffect(()=>{a&&E()},[a,E]),d.useEffect(()=>{var m,n;o==="EDIT"&&(S({from:((m=r==null?void 0:r.from)==null?void 0:m.substring(0,5))||"",to:((n=r==null?void 0:r.to)==null?void 0:n.substring(0,5))||""}),$(r==null?void 0:r.subject))},[o,r]);const T=m=>{$(m)},y=m=>{const n=m==null?void 0:m.split(":");let N="";return n[0]>12?(N="Pm",n[0]-=12):n[0]<12?(N="Am",n[0]===0&&(n[0]=12)):N="Pm",`${n[0]>9?n[0]:`0${+n[0]}`}:${n[1]} ${N}`},O=m=>{const n={};for(let N in m)m[N]||(n[N]=`${N} is required!`);return n},k=()=>{if(a&&(c!=null&&c._id)){const m=O(_);let n=!1;for(let N in m)if(N){n=!0;break}n?h(m):(g(N=>!N),i({cid:a,sfid:r==null?void 0:r.sfid,timetableBody:{day:l,from:y(_.from),to:y(_.to),subjectId:c==null?void 0:c._id}}).then(()=>{f(),o==="EDIT"?j():s()}).catch({}))}};return e.jsx(X,{onClose:s,children:e.jsxs("div",{className:w.add_category_modal,style:{width:"30rem"},children:[e.jsxs("div",{className:w.add_category_modal_title,children:[e.jsx("h6",{children:t(o==="EDIT"?"upadate_time_table":"add_new_time_table")}),e.jsx("img",{src:"/images/close-post-icon.svg",onClick:s,alt:""})]}),e.jsx(Z,{customStyle:{width:"100%",marginBlock:"0.5rem"}}),e.jsx(os,{selectLabel:t("select_subject"),selectedValue:t("please_select_subject"),options:((L=v==null?void 0:v.classes)==null?void 0:L.subject)??[],onClick:T,value:`${c==null?void 0:c.subjectName} ${(D=c==null?void 0:c.selected_batch_query)!=null&&D.batchName?`(${(P=c==null?void 0:c.selected_batch_query)==null?void 0:P.batchName})`:""}`??"",defalutValue:c!=null&&c.subjectName?`${c==null?void 0:c.subjectName} ${(I=c==null?void 0:c.selected_batch_query)!=null&&I.batchName?`(${(B=c==null?void 0:c.selected_batch_query)==null?void 0:B.batchName})`:""}`:"",viewAs:"NORMAL_FILTER",openAs:"PROMOTE"}),e.jsx(W,{labelText:t("from"),placeholder:"00:00",name:"from",value:_==null?void 0:_.from,type:"time",onChange:m=>S(n=>({...n,from:m.target.value})),errorShow:u.from}),e.jsx(W,{labelText:t("to"),placeholder:"00:00",name:"to",value:_==null?void 0:_.to,type:"time",onChange:m=>S(n=>({...n,to:m.target.value})),errorShow:u.to}),e.jsx("button",{className:w.set_fees_structure_btn,title:"Add Time Table",onClick:k,style:{justifyContent:"center"},children:t(o==="EDIT"?"update":"create")}),x&&e.jsx(Q,{})]})})},ms=({onClose:s,onRefetch:o,dayMenu:a,clsId:l,day:f})=>{const[r,j]=d.useState(!1),[t,x]=d.useState(!1),[g]=Y(),u=()=>{a!=null&&a.tid&&(a!=null&&a.sfid)&&(j(h=>!h),g({tid:a==null?void 0:a.tid,scid:a==null?void 0:a.sfid,flow:"PARTICULAR"}).then(()=>{o(),s(),j(h=>!h)}).catch({}))};return e.jsx(e.Fragment,{children:t?e.jsx(U,{onCloseParent:s,onClose:()=>x(!1),openAs:"EDIT",dayMenu:a,clsId:l,day:f,onRefetch:o}):e.jsxs(e.Fragment,{children:[e.jsx(b,{onClose:s}),e.jsxs(M,{customStyle:{zIndex:"1200"},children:[e.jsxs("div",{className:R.edit_modal_container,style:{width:"200px"},children:[e.jsx("h6",{className:R.edit,onClick:()=>x(h=>!h),children:"Edit"}),e.jsx("h6",{className:R.remove,onClick:u,children:"Delete"})]}),r&&e.jsx(Q,{})]})]})})},_s=({table:s,clsId:o,day:a,onRefetch:l,tid:f})=>{var x,g,u,h,_,S,c,$,v,E,i,T,y;const[r,j]=d.useState(""),t=()=>{j({tid:f,from:s==null?void 0:s.from,to:s==null?void 0:s.to,sfid:s==null?void 0:s._id,subject:{subjectName:s==null?void 0:s.subjectName,...s==null?void 0:s.subject}})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:F.class_container,style:{flexDirection:"column",alignItems:"flex-start",gap:"0"},children:[e.jsxs("div",{style:{width:"100%",display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[e.jsx("img",{src:"/images/member_tab/class/class-time-icon.svg",alt:"time icon"}),e.jsxs("p",{children:[s==null?void 0:s.from," "," to ",s==null?void 0:s.to]})]}),e.jsx("img",{src:"/images/member_tab/class/class-edit-icon.svg",alt:"time icon",style:{cursor:"pointer"},onClick:t})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("img",{className:F.oneRowImage,src:(x=s==null?void 0:s.assignStaff)!=null&&x.staffProfilePhoto?`${J}/${(g=s==null?void 0:s.assignStaff)==null?void 0:g.staffProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"staff avatr"}),e.jsxs("div",{className:F.class_container_text,children:[e.jsxs("h6",{children:[(s==null?void 0:s.subjectName)??""," ",(u=s==null?void 0:s.subject)!=null&&u.subject_category?`(${(h=s==null?void 0:s.subject)==null?void 0:h.subject_category})`:"",(S=(_=s==null?void 0:s.subject)==null?void 0:_.selected_batch_query)!=null&&S.batchName?e.jsxs("span",{style:{fontWeight:"400",fontSize:"12px"},children:[" ","(",($=(c=s==null?void 0:s.subject)==null?void 0:c.selected_batch_query)==null?void 0:$.batchName,")"]}):null," ",((v=s==null?void 0:s.subject)==null?void 0:v.subjectOptional)==="Optional"&&`(${(E=s==null?void 0:s.subject)==null?void 0:E.subjectOptional})`]}),e.jsx("p",{children:`${((i=s==null?void 0:s.assignStaff)==null?void 0:i.staffFirstName)??""} ${((T=s==null?void 0:s.assignStaff)==null?void 0:T.staffMiddleName)??""} ${((y=s==null?void 0:s.assignStaff)==null?void 0:y.staffLastName)??""}`})]})]})]}),r&&e.jsx(ms,{onClose:()=>j(""),dayMenu:r,clsId:o,day:a,onRefetch:l})]})},ds=({clsId:s,day:o})=>{var u,h,_,S;const{t:a}=A(),[l,f]=d.useState(!1),[r,j]=d.useState(!0),{getDayTimetable:t,getDayTimetableRefetch:x}=H({data:{status:o,cid:s},skip:!s});d.useEffect(()=>{s&&(j(!0),x())},[s,o,x]),d.useEffect(()=>{var c;(t!=null&&t.dayList||((c=t==null?void 0:t.dayList)==null?void 0:c.length)===0)&&j(!1)},[t==null?void 0:t.dayList]);const g=()=>{f(c=>!c)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:V.add_container,children:e.jsx("p",{className:V.add_new_category,onClick:g,children:a("add_time_table")})}),(h=(u=t==null?void 0:t.dayList)==null?void 0:u.schedule)==null?void 0:h.map(c=>{var $;return e.jsx(_s,{table:c,clsId:s,day:o,onRefetch:x,tid:($=t==null?void 0:t.dayList)==null?void 0:$._id},c==null?void 0:c._id)}),l&&e.jsx(U,{clsId:s,onClose:g,day:o,onRefetch:x}),r&&e.jsx(G,{status:"white"}),!r&&!((S=(_=t==null?void 0:t.dayList)==null?void 0:_.schedule)!=null&&S.length)&&e.jsx(ss,{customStyleContainer:{marginTop:"5rem",height:"inherit"},title:"No time table created yet for this day."})]})},q=["Monday","Tuesday","Wednesday","Thursday","Firday","Saturday"],Ts=({clsId:s})=>{const[o,a]=d.useState("Monday"),l=f=>{a(r=>f)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:p.days_container,children:q==null?void 0:q.map(f=>e.jsx("h5",{className:o===f?`${p.days_container_child} ${p.days_container_child_active}`:p.days_container_child,onClick:()=>l(f),children:f??""},f))}),e.jsx(ds,{day:o,clsId:s})]})};export{Ts as A,p as s};
