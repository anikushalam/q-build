import{u as M,r as c,k as U,g as z,q as G,j as e,e as J,bS as K}from"./index-731451a5.js";/* empty css                         */import{P as V}from"./PollsModal-4269a4f7.js";import{L as X}from"./LoaderButton-71df50a7.js";import{B as Y}from"./post-api-f57ebb8f.js";import{i as Z}from"./constant_value-4cd2b3e0.js";import{P as ee,a as te}from"./PostFooterIcon-e68dad22.js";import"./Avatar-c600f05e.js";import"./Avatar.module-fb7ee634.js";import"./FormToggle-bf5ca79b.js";import"./UniversalForm.module-19614663.js";import"./Switch-81e70f2f.js";import"./SwitchBase-2ba5f868.js";const ne="_postTitle_1n1ek_1",oe="_QAns_1n1ek_27",se="_length_1n1ek_31",le="_postDesc_1n1ek_41",ae="_pollTextarea_1n1ek_46",ie="_validBorder_1n1ek_72",ce="_validcolor_1n1ek_76",re="_pollInput_1n1ek_80",de="_duration_1n1ek_109",pe="_addOption_1n1ek_134",_e="_btn_1n1ek_146",me="_upload_1n1ek_164",ue="_Container_1n1ek_168",he="_selectedImg_1n1ek_173",ge="_addfiles_1n1ek_181",fe="_tille_1n1ek_199",ve="_description_1n1ek_208",xe="_afterbtn_1n1ek_217",ke="_hashtag_1n1ek_221",je="_border2_1n1ek_225",be="_border3_1n1ek_230",Ie="_mainbody_1n1ek_248",Oe="_optionDiv_1n1ek_256",s={postTitle:ne,QAns:oe,length:se,postDesc:le,pollTextarea:ae,validBorder:ie,validcolor:ce,pollInput:re,duration:de,addOption:pe,btn:_e,upload:me,Container:ue,selectedImg:he,addfiles:ge,tille:fe,description:ve,afterbtn:xe,hashtag:ke,border2:je,border3:be,mainbody:Ie,optionDiv:Oe};function Ee({setPostType:x,onPostTypeChange:p}){var N,P,S;const{t:r}=M(),[k,T]=c.useState(!0),[y,A]=c.useState(!1),[j,b]=c.useState(!1),[m,h]=c.useState(!1),o=U(t=>t.idChange),B=z(),[d,$]=c.useState(""),[u,w]=c.useState(""),[l,g]=c.useState([{content:""},{content:""}]),[I,O]=c.useState("On"),f=30,v=140,{oneInstituteDashboard:i,oneInstituteDashboardRefetch:C}=G({id:o==null?void 0:o.id,skip:!(o!=null&&o.id)});c.useEffect(()=>{o!=null&&o.id&&C()},[o==null?void 0:o.id,C]);const[D]=Y(),_=document.querySelector("textarea");_==null||_.addEventListener("keyup",t=>{_.style.height="auto";let n=t.target.scrollHeight;_.style.height=`${n}px`});const Q=(t,n)=>{const a=[...l];a[t][n.target.name]=n.target.value,g(a)},E=()=>{g([...l,{content:""}])},H=t=>{if((l==null?void 0:l.length)>2){const n=[...l];n.splice(t,1),g([...n])}},L=()=>{var t;if(d!==""&&((t=u==null?void 0:u.current)==null?void 0:t.value)!==""){let n=!1;for(let a of l)if((a==null?void 0:a.content)==="")return n=!0;n?h(!m):(h(!m),b(!0),D({post:{poll_question:d,trend_category:u,day:7,pollAnswer:l,comment_turned:I},id:o==null?void 0:o.id,viewAs:Z}).then(a=>{var q;B(K.addCreatedPost({post:(q=a.data)==null?void 0:q.post})),b(!1),p("post")}).catch({}))}else h(!m)},F=()=>{p("newPost"),x("text")},R=()=>{p("newPost"),x("image")},W=t=>{t.target.checked?O("Off"):O("On")};return e.jsxs(ee,{postTitle:r("create_poll"),onClose:()=>p("post"),dynamicImage:((N=i==null?void 0:i.institute)==null?void 0:N.photoId)!=="1"?`${J}/${(P=i==null?void 0:i.institute)==null?void 0:P.insProfilePhoto}`:"/images/ins_default_profile.svg",name:(S=i==null?void 0:i.institute)==null?void 0:S.insName,privateImage:y,setPrivateImage:A,onToggleHandler:W,checkedToggle:I,children:[e.jsxs("div",{className:s.QAns,children:[e.jsx("h6",{children:r("question_")}),e.jsx("textarea",{className:d.length===v?`${s.pollTextarea} ${s.validBorder}`:s.pollTextarea,id:"pollTextArea",type:"text",required:!0,maxlength:"140",placeholder:r("ask_question"),value:d,onChange:t=>$(t.target.value)}),e.jsx("div",{className:s.length,children:e.jsxs("p",{className:d.length===v?s.validcolor:"",children:[d.length,"/",v]})}),l.map((t,n)=>e.jsxs("div",{className:s.options,children:[e.jsxs("div",{className:s.optionDiv,children:[e.jsxs("h6",{children:["Option ",n+1]}),n>1?e.jsx("p",{onClick:()=>H(n),children:"Remove"}):""]}),e.jsx("input",{name:"content",placeholder:r("add_option_"),className:t.length===f?`${s.pollInput} ${s.validBorder}`:s.pollInput,type:"text",maxlength:"30",required:!0,value:t.content,onChange:a=>{Q(n,a)}}),e.jsx("div",{className:s.length,children:e.jsxs("p",{className:t.content.length===f?s.validcolor:"",children:[t.content.length>0?t.content.length:0,"/",f]})})]},n)),l.length<=4&&e.jsxs("div",{className:s.addOption,onClick:E,children:[r("add_option_")," +"]})]}),m&&e.jsx("div",{style:{color:"red"},children:r("please_add")}),e.jsxs("button",{className:s.btn,disabled:j,onClick:L,children:[e.jsx("p",{children:r("post")}),j&&e.jsx("div",{children:e.jsx(X,{})})]}),e.jsx(te,{onEditIocn:F,onPostTypeChange:p,activeIcon:5,addFileToggle:!1,children:e.jsx("div",{children:e.jsx("img",{src:"/images/img-post-icon.svg",onClick:R,alt:"file upload icon",title:"Create Image Post"})})}),k&&e.jsx(V,{open:k,setOpen:T,setTrendCategoryRef:w})]})}export{Ee as default};
