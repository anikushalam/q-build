import{R as D,_ as E,u as L,k,r,c as C,n as R,j as e,N as w}from"./index-0ca76035.js";import{C as P}from"./CustomSuspense-25f8db15.js";import{d as B,e as T}from"./institute-staff-student-api-7114d611.js";import{L as q}from"./LoaderButton-56f541f9.js";import{s as o}from"./Certificates-e3e1db6d.js";import"./pdf-convertor-function-4fe9e778.js";import"./main.certificate.pdf.worker-fdc20546.js";import"./numberToWords.min-081ca735.js";import"./CertificateModal-916ba92a.js";import"./JoinFormFileEdit-10928ae7.js";import"./JoinForm.module-212f9bb3.js";import"./ViewFileDialog-f7d48575.js";import"./Overlay-c8100e0a.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalBackdrop-c4f123e6.js";import"./SearchHeader.module-b69c8942.js";import"./PopupWrapper-2578092d.js";import"./SearchModalWrapper-0fa3f9a3.js";import"./StringLength-ef31e6b8.js";import"./StringLength.module-75a6e080.js";import"./JoinFormInput-82706177.js";const A=D.lazy(()=>E(()=>import("./CertificateModal-916ba92a.js"),["assets/CertificateModal-916ba92a.js","assets/index-0ca76035.js","assets/index-4d24e8f6.css","assets/institute-staff-student-api-7114d611.js","assets/JoinFormFileEdit-10928ae7.js","assets/JoinForm.module-212f9bb3.js","assets/JoinForm-e988a09c.css","assets/ViewFileDialog-f7d48575.js","assets/Overlay-c8100e0a.js","assets/Overlay.module-9133d1bb.js","assets/Overlay-6f7772cd.css","assets/SearchModalBackdrop-c4f123e6.js","assets/SearchHeader.module-b69c8942.js","assets/SearchHeader-d07f850c.css","assets/PopupWrapper-2578092d.js","assets/SearchModalWrapper-0fa3f9a3.js","assets/StringLength-ef31e6b8.js","assets/StringLength.module-75a6e080.js","assets/StringLength-7b1d3ded.css","assets/JoinFormInput-82706177.js","assets/CertificateModal-dc584326.css"])),re=({student:m,viewAs:d,instituteId:t,status:p})=>{const{t:i}=L(),n=k(s=>s.idChange.id),[u,g]=r.useState(!1),[f,h]=r.useState(!1),j=C(),b=R(),[a,_]=r.useState({number:"",reason:"",previous:m==null?void 0:m.studentPreviousSchool,study:"",behaviour:"",remarks:"",udise:""}),[v,x]=r.useState({msg:"",run:!1}),[S]=B(),{getEditable:c,getEditableRefetch:l}=T({id:t||n,skip:d==="DESIGNATION_SIDE"?!t:!n});r.useEffect(()=>{t&&l()},[n,t,l]);const N=()=>{h(s=>!s),S({id:t||n,gr:a.number,leavingFeedback:a}).then(s=>{h(y=>!y),j(`/q/${b.username}/student/certificate/form`,{state:{student:s.data.student,download:s.data.download,instituteId:t,is_leaving:p}})}).catch(()=>{x({msg:"something went wrong",run:!0})})};return e.jsxs("div",{className:o.complaintDetails,children:[e.jsxs("div",{className:o.detailsHeader,children:[p==="transfer"?e.jsx("p",{children:i("transfer_certificate")}):e.jsx("p",{children:i("leaving")}),e.jsx("img",{src:"/images/menu-dots-dark-icon.svg",alt:"",onClick:()=>g(!0)})]}),e.jsxs("div",{className:o.detailsBody,children:[e.jsx("div",{className:o.gr,children:e.jsx("input",{type:"tel",placeholder:i("enter_gr"),onChange:s=>_({...a,number:s.target.value}),required:!0})}),(a==null?void 0:a.number)!==""&&e.jsxs("button",{type:"submit",disabled:f,className:o.getBtn,onClick:N,children:[e.jsx("p",{children:i("cer_preview")}),f&&e.jsx(q,{})]})]}),u&&e.jsx(P,{children:e.jsx(A,{hideModal:s=>g(s),addDisplay:u,editableData:c==null?void 0:c.detail,viewAs:d,instituteId:t,onRefetch:l})}),e.jsx(w,{msg:v.msg,run:v.run,setRun:()=>x({msg:"",run:!1}),postiton:"bottom",type:"error"})]})};export{re as default};
