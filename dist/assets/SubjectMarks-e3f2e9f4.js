import{R as W,_ as B,r as s,j as a,e as R,U as Q,S as G,u as q,am as J}from"./index-731451a5.js";import{s as _}from"./PromoteDepartment.module-1bdd3b1d.js";import{A as K}from"./AcademicAdministatorTabChange-5486b59e.js";import{D as X}from"./DepartmentTabChangeLink-58880b09.js";import{C as Y}from"./CustomSuspense-e90dc607.js";import{i as Z,j as w,k as V}from"./subject-api-215ccf27.js";import{f as l,M as b,g as u}from"./McqWrapper-6c60f442.js";import{s as n}from"./Markdetails.module-89b9535e.js";const ee=W.lazy(()=>B(()=>import("./CreateSubject-3688fd32.js"),["assets/CreateSubject-3688fd32.js","assets/index-731451a5.js","assets/index-4d24e8f6.css","assets/LoaderButton-71df50a7.js","assets/LoaderButton-43b48c5c.css","assets/AssignStaffModal-61be8e90.js","assets/search-api-15f7f9f9.js","assets/AssignStaffModal.module-a60b32e1.js","assets/AssignStaffModal-60e26c07.css","assets/StringLength-222a9fd1.js","assets/StringLength.module-75a6e080.js","assets/StringLength-7b1d3ded.css","assets/MarkValue-3df2c354.js","assets/CustomSelectDepartment-a5dd9a35.js","assets/JoinForm.module-212f9bb3.js","assets/JoinForm-e988a09c.css","assets/class-api-ec8ace00.js","assets/CreateSubject-4367438b.css","assets/AddDisplay-fea182d7.css"])),ae=({sub:e,carryParentState:i,isView:d,did:h,cid:o,instituteId:t,onRefetch:m})=>{var p,N,x,g,v,k,O,$,T,c,y,M,S,E,D,P,L,A,F,I,C,H,U;const[r,j]=s.useState(""),f=z=>{z.preventDefault(),j(e==null?void 0:e._id)};return a.jsxs(a.Fragment,{children:[d==="DEPARTMENT_HEAD"?a.jsx(X,{carryParentState:{...i,subjectId:e==null?void 0:e._id,subjectName:`${e==null?void 0:e.subjectName} ${e!=null&&e.subject_category?`(${e==null?void 0:e.subject_category})`:""} ${(p=e==null?void 0:e.selected_batch_query)!=null&&p.batchName?`(${(N=e==null?void 0:e.selected_batch_query)==null?void 0:N.batchName})`:""} ${(e==null?void 0:e.subjectOptional)==="Optional"?`(${e==null?void 0:e.subjectOptional})`:""}`,batchId:(x=e==null?void 0:e.selected_batch_query)==null?void 0:x._id,subjectTeacherName:`${((g=e==null?void 0:e.subjectTeacherName)==null?void 0:g.staffFirstName)??""} ${((v=e==null?void 0:e.subjectTeacherName)==null?void 0:v.staffMiddleName)??""} ${((k=e==null?void 0:e.subjectTeacherName)==null?void 0:k.staffLastName)??""}`},activeTab:"subject-detail",children:a.jsxs("div",{className:_.class_container,style:{justifyContent:"space-between"},children:[a.jsxs("div",{className:_.moderator_container_title,children:[a.jsx("img",{className:_.oneRowImage,src:(O=e==null?void 0:e.subjectTeacherName)!=null&&O.staffProfilePhoto?`${R}/${($=e==null?void 0:e.subjectTeacherName)==null?void 0:$.staffProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"staff avatr"}),a.jsxs("div",{className:_.class_container_text,children:[a.jsxs("h6",{children:[(e==null?void 0:e.subjectName)??""," ",e!=null&&e.subject_category?`(${e==null?void 0:e.subject_category})`:"",(T=e==null?void 0:e.selected_batch_query)!=null&&T.batchName?a.jsxs("span",{style:{fontWeight:"400",fontSize:"12px"},children:[" ","(",((c=e==null?void 0:e.selected_batch_query)==null?void 0:c.batchName)??"",")"]}):null,(e==null?void 0:e.subjectOptional)==="Optional"&&`(${e==null?void 0:e.subjectOptional})`]}),a.jsx("p",{children:`${((y=e==null?void 0:e.subjectTeacherName)==null?void 0:y.staffFirstName)??""} ${((M=e==null?void 0:e.subjectTeacherName)==null?void 0:M.staffMiddleName)??""} ${((S=e==null?void 0:e.subjectTeacherName)==null?void 0:S.staffLastName)??""}`})]})]}),a.jsx("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:f,title:"Menu",style:{cursor:"pointer",height:"1.5rem"}})]})}):a.jsx(K,{carryParentState:{...i,subjectId:e==null?void 0:e._id,subjectName:`${e==null?void 0:e.subjectName} ${e!=null&&e.subject_category?`(${e==null?void 0:e.subject_category})`:""} ${(E=e==null?void 0:e.selected_batch_query)!=null&&E.batchName?`(${(D=e==null?void 0:e.selected_batch_query)==null?void 0:D.batchName})`:""} ${(e==null?void 0:e.subjectOptional)==="Optional"?`(${e==null?void 0:e.subjectOptional})`:""}`,batchId:(P=e==null?void 0:e.selected_batch_query)==null?void 0:P._id,isView:"ADMINISTRATOR"},activeTab:"subject-menu",children:a.jsxs("div",{className:_.class_container,children:[a.jsx("img",{className:_.oneRowImage,src:(L=e==null?void 0:e.subjectTeacherName)!=null&&L.staffProfilePhoto?`${R}/${(A=e==null?void 0:e.subjectTeacherName)==null?void 0:A.staffProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:"staff avatr"}),a.jsxs("div",{className:_.class_container_text,children:[a.jsxs("h6",{children:[(e==null?void 0:e.subjectName)??""," ",e!=null&&e.subject_category?`(${e==null?void 0:e.subject_category})`:"",(F=e==null?void 0:e.selected_batch_query)!=null&&F.batchName?a.jsxs("span",{style:{fontWeight:"400",fontSize:"12px"},children:[" ","(",((I=e==null?void 0:e.selected_batch_query)==null?void 0:I.batchName)??"",")"]}):null,(e==null?void 0:e.subjectOptional)==="Optional"&&`(${e==null?void 0:e.subjectOptional})`]}),a.jsx("p",{children:`${((C=e==null?void 0:e.subjectTeacherName)==null?void 0:C.staffFirstName)??""} ${((H=e==null?void 0:e.subjectTeacherName)==null?void 0:H.staffMiddleName)??""} ${((U=e==null?void 0:e.subjectTeacherName)==null?void 0:U.staffLastName)??""}`})]})]})}),a.jsx(Y,{children:r&&a.jsx(ee,{departmentModal:!!r,hideModal:()=>j(""),id:t,did:h,cid:o,edit:r,setEdit:j,editSubject:r,isEditBy:"DEPARTMENT_HEAD",onRefetch:m})})]})},ce=({subjects:e,carryParentState:i,isView:d,cid:h,instituteId:o,did:t,onRefetch:m})=>a.jsx(a.Fragment,{children:e==null?void 0:e.map(r=>a.jsx(ae,{sub:r,carryParentState:i,isView:d,cid:h,instituteId:o,did:t,onRefetch:m},r==null?void 0:r._id))}),Ne=({carryParentState:e,clsId:i,isView:d,instituteId:h,did:o})=>{var f,p;const[t,m]=s.useState(!0),{oneClassAllSubject:r,oneClassAllSubjectRefetch:j}=Q({cid:i,skip:!i});return s.useEffect(()=>{var N;(N=r==null?void 0:r.classes)!=null&&N.subject&&m(!1)},[(f=r==null?void 0:r.classes)==null?void 0:f.subject]),s.useEffect(()=>{i&&j()},[i,j]),a.jsxs(a.Fragment,{children:[a.jsx(ce,{subjects:((p=r==null?void 0:r.classes)==null?void 0:p.subject)??[],carryParentState:e,isView:d||"ADMINISTRATOR",cid:i,instituteId:h,did:o,onRefetch:j}),t&&a.jsx(G,{})]})};function te({examView:e}){var o;const{t:i}=q(),{subjectMcqTestsetAlloted:d,subjectMcqTestsetAllotedRefetch:h}=Z({data:{atsid:e==null?void 0:e._id,page:1,limit:50},skip:!(e!=null&&e._id)});return s.useEffect(()=>{e!=null&&e._id&&h()},[e==null?void 0:e._id,h]),a.jsxs("div",{className:n.markDetails,children:[a.jsx("div",{className:n.markDetailsHeader,children:a.jsxs("h6",{children:[a.jsxs("span",{className:n.span,children:[" ",i("exam")," : "]})," ",e==null?void 0:e.testExamName]})}),a.jsx("div",{className:n.markDetailsHeader2,children:a.jsxs("h6",{children:[a.jsxs("span",{className:n.span2,children:[" ",i("maximum_marks")," : "]})," ",e==null?void 0:e.testTotalNumber]})}),a.jsx("div",{className:n.table,children:a.jsxs("table",{children:[a.jsx("thead",{className:n.thead,children:a.jsxs("tr",{className:n.tr,children:[a.jsx("th",{className:n.th,children:i("roll_no")}),a.jsx("th",{className:n.th,children:i("name")}),a.jsx("th",{className:`${n.th} ${n.thMargin}`,children:i("ob")})]})}),a.jsx("tbody",{className:n.tbody,children:(o=d==null?void 0:d.studentList)==null?void 0:o.map(t=>{var m,r;return a.jsxs("tr",{className:n.tr,children:[a.jsx("td",{className:n.td,children:t==null?void 0:t.studentROLLNO}),a.jsx("td",{className:n.td,children:a.jsxs("div",{className:n.student,children:[a.jsx("img",{src:t!=null&&t.studentProfilePhoto?`${R}/${t==null?void 0:t.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",alt:""}),a.jsxs("h6",{children:[t==null?void 0:t.studentFirstName," ",t!=null&&t.studentMiddleName?t==null?void 0:t.studentMiddleName:" "," ",t==null?void 0:t.studentLastName]})]})}),a.jsx("td",{className:n.td,children:a.jsx("input",{type:"number",name:"student",defaultValue:(r=(m=t==null?void 0:t.testSet)==null?void 0:m[0])==null?void 0:r.testObtainMarks,readOnly:!0,disabled:!0})})]},t==null?void 0:t._id)})})]})})]})}function re({exam:e,onExamView:i}){const{t:d}=q();return a.jsxs("div",{className:l.sidebarheader,onClick:()=>i(e),title:"See exam",children:[a.jsx("div",{className:l.dot}),a.jsx("img",{src:"/images/members/exam-icon.svg",alt:""}),a.jsxs("div",{className:l.text,children:[a.jsx("div",{className:l.insName,children:a.jsx("h6",{children:e==null?void 0:e.examName})}),(e==null?void 0:e.examType)==="Final"?"":a.jsx("div",{className:l.insUserName,children:a.jsxs("p",{children:[d("weightage"),": ",e==null?void 0:e.examWeight," %"]})})]}),a.jsxs("div",{className:l.date,children:[a.jsxs("h6",{children:[" ",d("total_marks")," ",e==null?void 0:e.totalMarks]}),a.jsx("p",{children:e==null?void 0:e.examType})]})]})}function se({sid:e,isDepartment:i}){var $,T;const{t:d}=q(),[h,o]=W.useState(0),[t,m]=s.useState(null),[r,j]=s.useState(!1),[f,p]=s.useState(""),{subjectAllExam:N,subjectAllExamRefetch:x}=w({data:{sid:e,page:1,limit:50},skip:!e}),{subjectMcqTestsetTakenList:g,subjectMcqTestsetTakenListRefetch:v}=V({data:{sid:e,page:1,limit:50},skip:!e});s.useEffect(()=>{e&&(x(),v())},[e,x,v]);const k=c=>{o(1),m(c)},O=c=>{o(2),m(c)};return a.jsxs(a.Fragment,{children:[h===0&&a.jsx("div",{className:l.exam_tab_space,children:a.jsx(b,{isDepartment:i,children:a.jsxs("div",{className:l.all_exam_main_container,children:[a.jsxs("div",{className:l.exam_container,children:[a.jsx("h4",{className:l.exam_heading,children:d("exams")}),($=N==null?void 0:N.subject)==null?void 0:$.map(c=>a.jsx(re,{exam:c,onExamView:k},c==null?void 0:c._id))]}),a.jsxs("div",{className:l.exam_container,children:[a.jsx("h4",{className:l.exam_heading,children:d("mcq_mock_test")}),(T=g==null?void 0:g.allotedTestSet)==null?void 0:T.map(c=>{var y,M,S,E;return a.jsxs("div",{className:l.sidebarheader,onClick:()=>O(c),children:[a.jsx("img",{src:"/images/members/mcq-exam-icon1.svg",alt:""}),a.jsx("div",{className:l.text,children:a.jsxs("div",{className:l.insName,children:[a.jsx("h6",{children:c==null?void 0:c.testExamName}),a.jsx("p",{className:l.exam_mcq_date,style:{marginTop:"0.1vw"},children:c==null?void 0:c.testDate})]})}),a.jsxs("div",{className:l.date,children:[a.jsx("h6",{children:c==null?void 0:c.testTotalNumber}),a.jsxs("p",{children:[`${(y=c==null?void 0:c.testStart)==null?void 0:y.substr(0,5)} ${(M=c==null?void 0:c.testStart)==null?void 0:M.substr(9)}`," ","to"," ",`${(S=c==null?void 0:c.testEnd)==null?void 0:S.substr(0,5)} ${(E=c==null?void 0:c.testEnd)==null?void 0:E.substr(9)}`]})]})]},c==null?void 0:c._id)})]})]})})}),h===1&&a.jsx(u,{examView:t,sid:e,isDepartment:i}),h===2&&a.jsx(te,{examView:t}),a.jsx(J,{msg:f,run:r,setRun:j})]})}export{Ne as A,se as S};
