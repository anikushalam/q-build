import{u as g,j as r,k as Ts,r as y,ob as zs,W as Ws,D as Xs,C as Zs,N as Fs,Q as ws,c as xs,ov as bs,ow as gs}from"./index-0ca76035.js";import{s as l}from"./JoinForm.module-212f9bb3.js";import{j as ks,k as Is,l as As,p as Ps,q as Ds,T as Ss,U as vs,V as ns,W as ys,g as is,h as Ls}from"./constant_value-4cd2b3e0.js";import{J as O}from"./JoinFormInput-82706177.js";import{J as b}from"./JoinFormSelect-7025a8a4.js";import{J as sr}from"./JoinFormTextArea-394bf055.js";import{J as Cs}from"./JoinFormFile-a00a41cd.js";import{J as rr}from"./JoinFormToggle-341f166d.js";import{B as D}from"./BorderBottom-1dc6f53e.js";import{B as Bs}from"./ButtonWithTypeSubmit-5c11ae9c.js";import{F as or}from"./FormCheckbox-35f4f970.js";import{J as P}from"./JoinFormInputView-2b5b0bdd.js";import{J as Ns}from"./JoinFormFileView-e4856af3.js";import{w as er}from"./timeComparison-f15c3247.js";import{J as fr}from"./JoinFormCalender-d186c4ef.js";import{J as tr}from"./JoinFormExistingSelect-8e1c1d85.js";import{aN as hr}from"./admission-api-925391d9.js";import{u as cr}from"./use-login-cbfdffab.js";import{J as pr}from"./institute-staff-student-api-7114d611.js";import"./LoaderButton-56f541f9.js";import"./UniversalForm.module-19614663.js";import"./FormControlLabel-b4cb2fc2.js";import"./SwitchBase-e3c2ff35.js";import"./Checkbox-d3fc23de.js";import"./ViewFileDialog-f7d48575.js";import"./Overlay-c8100e0a.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalBackdrop-c4f123e6.js";import"./SearchHeader.module-b69c8942.js";import"./DatePicker-c6d0e911.js";import"./verifyUserNameSpaces-1eb95efa.js";function ur({staffForm:d,dynamicForm:T,formData:t,dynamicFormDocument:j,dynamicDocument:h,fileUrl:v,formSetting:n,onApplyStaffForm:U,location:w,staffPhoneNumberAdd:B,showingExistingUser:A,selectedUser:G}){var f;const{t:m}=g(),H=c=>{c.preventDefault(),U()};return r.jsx(r.Fragment,{children:r.jsx("form",{onSubmit:H,children:r.jsxs("div",{className:l.form_container,children:[(w==null?void 0:w.openAs)==="INSTITUTE_SIDE"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:l.form_other_field,children:[r.jsx(P,{labelText:m("form_mobile_no_label"),value:B,customStyleContainer:{width:"49.5%"},customStyleLabel:{marginRight:"0"}}),A==null?void 0:A.map(c=>(c==null?void 0:c._id)===G?r.jsx(P,{labelText:m("existing_account"),value:`${c==null?void 0:c.userLegalName} - (${c==null?void 0:c.username})`,customStyleContainer:{width:"49.5%"}}):"")]}),r.jsx(D,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}})]}),r.jsxs("h4",{children:[m("form_personal_info_label"),":"]}),r.jsxs("div",{className:l.form_container_profile,children:[r.jsxs("div",{style:{width:"86%"},children:[r.jsx(P,{labelText:m("form_name_label"),value:`${t==null?void 0:t.staffFirstName} ${t!=null&&t.staffMiddleName?t==null?void 0:t.staffMiddleName:""} ${t==null?void 0:t.staffLastName}`,customStyleContainer:{width:"100%"}}),r.jsxs("div",{style:{width:"100%",display:"flex"},children:[r.jsx(P,{labelText:m("form_gender_label"),value:t.staffGender,customStyleContainer:{width:"49.5%"}}),r.jsx(P,{labelText:m("form_date_of_birth_label"),value:t.staffDOB,customStyleContainer:{width:"49.5%"}})]})]}),r.jsx("div",{className:l.form_container_profile_image,children:r.jsx("label",{htmlFor:"profile",className:l.form_container_profile_image_label,children:r.jsx("img",{className:l.form_container_profile_photo,src:v||"/images/ins_default_profile.svg",alt:"staff avatar"})})})]}),r.jsx("div",{className:l.form_profile_info,children:r.jsx(P,{labelText:m("form_mother_name_label"),value:t.staffMotherName})}),r.jsx(D,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}}),(n==null?void 0:n.otherPersonalInfo)&&r.jsxs(r.Fragment,{children:[r.jsxs("h4",{children:[m("form_other_personal_info_label"),":"]}),r.jsx("div",{className:l.form_other_field,children:T==null?void 0:T.map(c=>ks.map(e=>{var N;return((N=e==null?void 0:e.lists)==null?void 0:N.includes(c))&&(e!=null&&e.type?r.jsx(P,{labelText:m(e==null?void 0:e.label),value:d[c],customStyleContainer:{width:"49.5%"}},e==null?void 0:e.id):r.jsx(P,{labelText:m(e==null?void 0:e.label),value:d[c],customStyleContainer:{width:"49.5%"}},e==null?void 0:e.id))}))}),r.jsx(D,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}})]}),(n==null?void 0:n.identityDetails)&&r.jsxs(r.Fragment,{children:[r.jsxs("h4",{children:[m("form_identity_details_label"),":"]}),r.jsx("div",{className:l.form_other_field,children:T==null?void 0:T.map(c=>Is.map(e=>{var N;return((N=e==null?void 0:e.lists)==null?void 0:N.includes(c))&&(e!=null&&e.type?r.jsx(P,{labelText:m(e==null?void 0:e.label),value:d[c],customStyleContainer:{width:"49.5%"}},e==null?void 0:e.id):r.jsx(P,{labelText:m(e==null?void 0:e.label),value:d[c],customStyleContainer:{width:"49.5%"}},e==null?void 0:e.id))}))}),r.jsx(D,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}})]}),(n==null?void 0:n.addressInfo)&&r.jsxs(r.Fragment,{children:[r.jsxs("h4",{children:[m("form_address_info_label"),":"]}),r.jsx("div",{className:l.form_other_field,children:T==null?void 0:T.map(c=>As.map(e=>{var N;return((N=e==null?void 0:e.lists)==null?void 0:N.includes(c))&&(e!=null&&e.type?r.jsx(P,{labelText:m(e==null?void 0:e.label),value:d[c],customStyleContainer:{width:"49.5%"}},e==null?void 0:e.id):e!=null&&e.checkbox?"":r.jsx(P,{labelText:m(e==null?void 0:e.label),value:d[c],customStyleContainer:{width:"49.5%"}},e==null?void 0:e.id))}))}),r.jsx(D,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}})]}),((f=n==null?void 0:n.previousSchoolAndDocument)==null?void 0:f.previousSchoolDocument)&&r.jsxs(r.Fragment,{children:[r.jsxs("h4",{children:[m("form_previous_school_document_label"),":"]}),r.jsx("div",{className:l.form_other_field,children:j==null?void 0:j.map(c=>Ps.map(e=>{var N;return((N=e==null?void 0:e.lists)==null?void 0:N.includes(c))&&(e!=null&&e.fileType?r.jsx(Ns,{labelText:m(e==null?void 0:e.label),value:h[c],customStyleContainer:{width:"49.5%"}},e==null?void 0:e.id):e!=null&&e.checkbox?"":!(h!=null&&h.previousSchoolDocument)&&r.jsx(P,{labelText:m(e==null?void 0:e.label),value:h[c],customStyleContainer:{width:"49.5%"}},e==null?void 0:e.id))}))}),r.jsx(D,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}})]}),(n==null?void 0:n.bankDetails)&&r.jsxs(r.Fragment,{children:[r.jsxs("h4",{children:[m("form_staff_bank_details_label"),":"]}),r.jsx("div",{className:l.form_other_field,children:T==null?void 0:T.map(c=>Ds.map(e=>{var N;return((N=e==null?void 0:e.lists)==null?void 0:N.includes(c))&&(e!=null&&e.fileType?r.jsx(Ns,{labelText:m(e==null?void 0:e.label),value:d[c],customStyleContainer:{width:"49.5%"}},e==null?void 0:e.id):r.jsx(P,{labelText:m(e==null?void 0:e.label),value:d[c],customStyleContainer:{width:"49.5%"}},e==null?void 0:e.id))}))})]}),r.jsx(Bs,{type:"submit",buttonText:m("submit"),customStyleButton:{marginTop:"1.5vw"}})]})})})}const mr=({preview:d,setPreview:T,location:t,onApplyForm:j})=>{var hs,cs,ps,us,ms,ds,ls,_s,as,js;const{t:h}=g(),v=Ts(o=>o.idChange),[n,U]=y.useState(""),[w,B]=y.useState({}),[A,G]=y.useState(""),[m,H]=y.useState([]),[f,c]=y.useState({staffFirstName:"",staffMiddleName:"",staffLastName:"",staffDOB:"",staffGender:"",staffMotherName:""}),[e,N]=y.useState([]),[p,E]=y.useState({}),[K,Q]=y.useState(!1),[$,q]=y.useState(""),[W,i]=y.useState(!1),[dr,L]=y.useState(""),[X,ss]=y.useState(""),[rs,Z]=y.useState({msg:"",run:!1}),[k,Es]=y.useState({}),[Vs,os]=y.useState(""),[F,Js]=y.useState(""),{instituteStaffForm:_,instituteStaffFormRefetch:es}=zs({id:(t==null?void 0:t.openAs)==="INSTITUTE_SIDE"?v==null?void 0:v.id:(t==null?void 0:t.openAs)==="DIRECT"?t==null?void 0:t.instituteId:(hs=v.searchProfile)==null?void 0:hs.id,skip:(t==null?void 0:t.openAs)==="INSTITUTE_SIDE"?!(v!=null&&v.id):(t==null?void 0:t.openAs)==="DIRECT"?!(t!=null&&t.instituteId):!((cs=v.searchProfile)!=null&&cs.id)}),[Us]=Ws();y.useEffect(()=>{var o;((o=v.searchProfile)!=null&&o.id||v!=null&&v.id||t!=null&&t.openAs)&&es()},[(ps=v.searchProfile)==null?void 0:ps.id,v==null?void 0:v.id,t==null?void 0:t.openAs,es]),y.useEffect(()=>{var o,s,u,S,a;if(_!=null&&_.staffFormSetting){const J=[];for(let V in _.staffFormSetting)if(V==="previousSchoolAndDocument"){let I=(o=_==null?void 0:_.staffFormSetting)==null?void 0:o.previousSchoolAndDocument,C=[];for(let Y in I)I[Y]&&(Y==="aadharCard"?(E(z=>({...z,addharFrontCard:"",addharBackCard:""})),C.push("addharFrontCard","addharBackCard")):Y==="previousSchoolDocument"?(E(z=>({...z,staffPreviousSchool:"",previousSchoolDocument:""})),C.push("previousSchoolDocument","staffPreviousSchool")):(E(z=>({...z,[Y]:""})),C.push(Y)));N([...C])}else _.staffFormSetting[V]&&(V==="otherPersonalInfo"?(B(I=>{var C;return{...I,...(C=Ss)==null?void 0:C.withValue}}),J.push(...(s=Ss)==null?void 0:s.keys)):V==="identityDetails"?(B(I=>{var C;return{...I,...(C=vs)==null?void 0:C.withValue}}),J.push(...(u=vs)==null?void 0:u.keys)):V==="addressInfo"?(B(I=>{var C;return{...I,...(C=ns)==null?void 0:C.withValue}}),J.push(...(S=ns)==null?void 0:S.keys)):V==="bankDetails"&&(B(I=>{var C;return{...I,...(C=ys)==null?void 0:C.withValue}}),J.push(...(a=ys)==null?void 0:a.keys)));H([...J])}},[_==null?void 0:_.staffFormSetting]),y.useEffect(()=>{if(n){const o=n.split(" ");o.length>=3?c(s=>({...s,staffFirstName:o[0],staffMiddleName:o[1],staffLastName:o.slice(2).toString().replaceAll(","," ")})):c(s=>({...s,staffFirstName:o[0],staffMiddleName:"",staffLastName:o[1]===void 0?"":o[1]}))}},[n]);const Rs=o=>{const s=URL.createObjectURL(o.target.files[0]);q(o.target.files[0]),L(s),ss(s),i(!0)};y.useEffect(()=>{K&&x({target:{name:"file",files:[$]}})},[K,$]);const{getAccountWithNumber:R,getAccountWithNumberRefetch:$s}=hr({phoneKey:A,skip:(A==null?void 0:A.length)!==10}),Os=(o,s)=>{const u={};$||(Z({msg:"Please Select Image",run:!0}),u.file="profile image is required!"),s||(u.staffPhoneNumberAdd="* required");for(let S in o)S==="staffMiddleName"||S==="staffMotherName"||o[S]||(u[S]=`${S} is required!`);return u},Ms=(o,s,u)=>{const S={};$||(S.file="profile image is required!",Z({msg:h("form_select_image_label"),run:!0})),s.staffBankAccount&&s.staffBankAccount!==s.staffBankReAccount&&(S.staffBankReAccount=`${h("form_account_dose_not_match_label")}`);for(let a in o)a==="staffMiddleName"||o[a]||(S[a]=`${a} is required!`);for(let a in s)s[a]||(S[a]=`${a} is required!`);for(let a in u)a==="previousSchoolDocument"||(a==="staffPreviousSchool"?u.previousSchoolDocument||u[a]||(S[a]=`${a} is required!`):u[a]||(S[a]=`${a} is required!`));return S},fs=o=>{c(s=>({...s,[o.target.name]:o.target.value}))},M=o=>{B(s=>({...s,[o.target.name]:o.target.value}))},ts=o=>{o.target.name==="previousSchoolDocument"?E(s=>({...s,[o.target.name]:o.target.value})):o.target.name==="staffPreviousSchool"?E(s=>({...s,[o.target.name]:o.target.value})):E(s=>({...s,[o.target.name]:o.target.files[0]}))},qs=o=>{o.target.checked?B(s=>({...s,asSameAddress:o.target.checked,staffAddress:s.staffCurrentAddress,staffPincode:s.staffCurrentPincode})):B(s=>({...s,asSameAddress:o.target.checked,staffAddress:"",staffPincode:""}))},x=o=>{os(u=>!u);const s=new FormData;s.append("file",o.target.files[0]),Us({fileUpload:s}).then(u=>{var S,a;o.target.name==="file"?(Q(!1),q({name:o.target.name,key:(S=u.data)==null?void 0:S.imageKey,type:(a=o.target.files[0])==null?void 0:a.type})):o.target.name==="bankPassbook"?B(J=>{var V,I,C;return{...J,[o.target.name]:{originalName:(V=o.target.files[0])==null?void 0:V.name,name:o.target.name,key:(I=u.data)==null?void 0:I.imageKey,type:(C=o.target.files[0])==null?void 0:C.type}}}):E(J=>{var V,I,C;return{...J,[o.target.name]:{originalName:(V=o.target.files[0])==null?void 0:V.name,name:o.target.name,key:(I=u.data)==null?void 0:I.imageKey,type:(C=o.target.files[0])==null?void 0:C.type}}}),os(J=>!J)}).catch({})},Gs=o=>{o.preventDefault();const s=(t==null?void 0:t.openAs)==="INSTITUTE_SIDE"?Os(f,A):Ms(f,w,p);let u=!1;for(let S in s){u=!0;break}u?Es(s):T(S=>!S)},Hs=o=>{if(er(o)){let u=o==null?void 0:o.split("/"),S=`${u[2]}-${u[1]}-${u[0]}`;c(a=>({...a,staffDOB:S}))}else Z({msg:`You cannot select upcoming date ${o}`,run:!0})},Ks=o=>{var s;G(o.target.value),((s=o.target.value)==null?void 0:s.length)===10&&(t==null?void 0:t.openAs)==="INSTITUTE_SIDE"&&$s()},Qs=o=>{Js(o.target.value)},Ys=()=>{j({staffPhoneNumberAdd:A,file:$,formData:f,staffForm:w,dynamicDocument:p,selectedUser:F})};return r.jsxs(r.Fragment,{children:[d?r.jsx(ur,{staffForm:w,dynamicForm:m,formData:f,dynamicFormDocument:e,dynamicDocument:p,fileUrl:X,formSetting:_==null?void 0:_.staffFormSetting,onApplyStaffForm:Ys,location:t,staffPhoneNumberAdd:A,showingExistingUser:R==null?void 0:R.all_account,selectedUser:F}):r.jsxs("form",{onSubmit:Gs,children:[r.jsxs("div",{className:l.form_container,children:[(t==null?void 0:t.openAs)==="INSTITUTE_SIDE"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:l.form_other_field,children:[r.jsx(O,{labelText:h("form_mobile_no_label"),placeholder:h("form_staff_mobile_number_placeholder"),name:"mobileNumber",value:A,type:"text",onChange:Ks,customStyleContainer:{width:"49.5%"},errorShow:k.staffPhoneNumberAdd}),(us=R==null?void 0:R.all_account)!=null&&us.length?r.jsx(tr,{selectLabel:h("existing_account"),selectedValue:h("select_existing_account"),value:F,name:"user",onChange:Qs,options:R==null?void 0:R.all_account,customStyleContainer:{width:"49.5%"}}):""]}),r.jsx(D,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}})]}),r.jsxs("h4",{children:[h("form_personal_info_label"),":"]}),r.jsxs("div",{className:l.form_container_profile,children:[r.jsx(O,{labelText:h("form_name_label"),placeholder:h("form_name_placeholder"),name:"fullname",value:n,type:"text",onChange:o=>U(o.target.value),customStyleContainer:{width:"86%"},errorShow:k.staffFirstName||k.staffLastName}),r.jsxs("div",{className:l.form_container_profile_image,children:[r.jsxs("label",{htmlFor:"profile",className:l.form_container_profile_image_label,children:[r.jsx("img",{className:l.form_container_profile_photo,src:X||"/images/ins_default_profile.svg",alt:"student avatar"}),r.jsx("img",{src:"/images/user-pencil-edit-transparent.svg",alt:"edit icon",className:l.form_edit_icon})]}),r.jsx("input",{type:"file",id:"profile",name:"file",onChange:Rs,style:{display:"none"}})]})]}),r.jsxs("div",{className:l.form_profile_info,children:[r.jsx(b,{selectLabel:h("form_gender_label"),selectedValue:h("form_gender_placeholder"),value:f.staffGender,name:"staffGender",onChange:fs,options:is,optionsValue:Ls,errorShow:k.staffGender}),r.jsx(fr,{labelText:h("form_date_of_birth_label"),placeholder:h("form_date_of_birth_placeholder"),name:"staffDOB",value:f.staffDOB,onDateFunction:Hs,errorShow:k.staffDOB,customStyleContainer:{position:"relative"}}),r.jsx(O,{labelText:h("form_mother_name_label"),placeholder:h("form_mother_name_placeholder"),name:"staffMotherName",value:f.staffMotherName,type:"text",onChange:fs,errorShow:k.staffMotherName})]}),r.jsx(D,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}}),((ms=_==null?void 0:_.staffFormSetting)==null?void 0:ms.otherPersonalInfo)&&r.jsxs(r.Fragment,{children:[r.jsxs("h4",{children:[h("form_other_personal_info_label"),":"]}),r.jsx("div",{className:l.form_other_field,children:m==null?void 0:m.map(o=>ks.map(s=>{var u;return((u=s==null?void 0:s.lists)==null?void 0:u.includes(o))&&(s!=null&&s.type?r.jsx(b,{selectLabel:h(s==null?void 0:s.label),selectedValue:h(s==null?void 0:s.placeHolder),value:w[o],name:o,onChange:M,options:s==null?void 0:s.chooseOptions,optionsValue:s==null?void 0:s.chooseOptionsValue,customStyleContainer:{width:"49.5%"},errorShow:k[o]},s==null?void 0:s.id):r.jsx(O,{labelText:h(s==null?void 0:s.label),placeholder:h(s==null?void 0:s.placeHolder),name:o,value:w[o],type:["staffPhoneNumber","staffAadharNumber"].includes(o)?"tel":"text",inputLength:o==="staffPhoneNumber"?10:12,onChange:M,customStyleContainer:{width:"49.5%"},errorShow:k[o]},s==null?void 0:s.id))}))}),r.jsx(D,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}})]}),((ds=_==null?void 0:_.staffFormSetting)==null?void 0:ds.identityDetails)&&r.jsxs(r.Fragment,{children:[r.jsxs("h4",{children:[h("form_identity_details_label"),":"]}),r.jsx("div",{className:l.form_other_field,children:m==null?void 0:m.map(o=>Is.map(s=>{var u;return((u=s==null?void 0:s.lists)==null?void 0:u.includes(o))&&(s!=null&&s.type?r.jsx(b,{selectLabel:h(s==null?void 0:s.label),selectedValue:h(s==null?void 0:s.placeHolder),value:w[o],onChange:M,options:s==null?void 0:s.chooseOptions,optionsValue:s==null?void 0:s.chooseOptionsValue,name:o,customStyleContainer:{width:"49.5%"},errorShow:k[o]},s==null?void 0:s.id):r.jsx(O,{labelText:h(s==null?void 0:s.label),placeholder:h(s==null?void 0:s.placeHolder),name:o,value:w[o],type:"text",onChange:M,customStyleContainer:{width:"49.5%"},errorShow:k[o]},s==null?void 0:s.id))}))}),r.jsx(D,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}})]}),((ls=_==null?void 0:_.staffFormSetting)==null?void 0:ls.addressInfo)&&r.jsxs(r.Fragment,{children:[r.jsxs("h4",{children:[h("form_address_info_label"),":"]}),r.jsx("div",{className:l.form_other_field,children:m==null?void 0:m.map(o=>As.map(s=>{var u;return((u=s==null?void 0:s.lists)==null?void 0:u.includes(o))&&(s!=null&&s.type?r.jsx(sr,{labelText:h(s==null?void 0:s.label),placeholder:h(s==null?void 0:s.placeHolder),name:o,value:w[o],type:"text",onChange:M,customStyleContainer:{width:"49.5%"},errorShow:k[o]},s==null?void 0:s.id):s!=null&&s.checkbox?r.jsx(or,{checkLabel:h(s==null?void 0:s.label),checkedValue:w.asSameAddress,onCheckboxAction:qs,customStyle:{display:"block",width:"100%",marginLeft:"0"}},s==null?void 0:s.id):r.jsx(O,{labelText:h(s==null?void 0:s.label),placeholder:h(s==null?void 0:s.placeHolder),name:o,value:w[o],onChange:M,type:["staffCurrentPincode","staffPincode"].includes(o)?"tel":"text",inputLength:6,customStyleContainer:{width:"49.5%"},errorShow:k[o]},s==null?void 0:s.id))}))}),r.jsx(D,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}})]}),((as=(_s=_==null?void 0:_.staffFormSetting)==null?void 0:_s.previousSchoolAndDocument)==null?void 0:as.previousSchoolDocument)&&r.jsxs(r.Fragment,{children:[r.jsxs("h4",{children:[h("form_previous_school_document_label"),":"]}),r.jsx("div",{className:l.form_other_field,children:e==null?void 0:e.map(o=>Ps.map(s=>{var u;return((u=s==null?void 0:s.lists)==null?void 0:u.includes(o))&&(s!=null&&s.fileType?r.jsx(Cs,{labelText:h(s==null?void 0:s.label),name:o,value:p[o],onChange:x,customStyleContainer:{width:"49.5%"},errorShow:k[o]},s==null?void 0:s.id):s!=null&&s.checkbox?r.jsx(rr,{labelText:h(s==null?void 0:s.label),name:o,value:p[o],onChange:ts,customStyleContainer:{width:"49.5%"}},s==null?void 0:s.id):!(p!=null&&p.previousSchoolDocument)&&r.jsx(O,{labelText:h(s==null?void 0:s.label),placeholder:h(s==null?void 0:s.placeHolder),name:o,value:p[o],type:"text",onChange:ts,customStyleContainer:{width:"49.5%"},errorShow:k[o]},s==null?void 0:s.id))}))}),r.jsx(D,{customStyle:{width:"104.5%",marginTop:"15px",marginLeft:"-24px"}})]}),((js=_==null?void 0:_.staffFormSetting)==null?void 0:js.bankDetails)&&r.jsxs(r.Fragment,{children:[r.jsxs("h4",{children:[h("form_staff_bank_details_label"),":"]}),r.jsx("div",{className:l.form_other_field,children:m==null?void 0:m.map(o=>Ds.map(s=>{var u;return((u=s==null?void 0:s.lists)==null?void 0:u.includes(o))&&(s!=null&&s.fileType?r.jsx(Cs,{labelText:h(s==null?void 0:s.label),name:o,value:w[o],onChange:x,customStyleContainer:{width:"49.5%"},errorShow:k[o]},s==null?void 0:s.id):r.jsx(O,{labelText:h(s==null?void 0:s.label),placeholder:h(s==null?void 0:s.placeHolder),name:o,value:w[o],type:["staffBankAccount","staffBankReAccount"].includes(o)?"tel":"text",reAccount:o==="staffBankReAccount"?k[o]:"",inputLength:50,onChange:M,customStyleContainer:{width:"49.5%"},errorShow:k[o]},s==null?void 0:s.id))}))})]}),r.jsx(Bs,{type:"submit",buttonText:h("form_preview"),customStyleButton:{marginTop:"1.5vw"}})]}),W&&r.jsx(Xs,{open:W,children:r.jsx(Zs,{setPhotoURL:ss,photoURL:X,setFile:q,setOpenCrop:i,setProfilePhoto:L,setUpload:Q,first:1,second:1})}),r.jsx(Fs,{msg:rs.msg,run:rs.run,setRun:()=>Z({msg:"",run:!1}),postiton:"bottom",type:"error"})]}),Vs&&r.jsx(ws,{})]})};function Yr({location:d}){const T=xs(),{t}=g(),j=Ts(f=>f.idChange),[h,v]=y.useState(!1),[n,U]=y.useState(!1),[w]=bs(),[B]=gs(),[A]=pr(),{existingAccountLogin:G}=cr();y.useEffect(()=>{var f;(f=document.getElementById("scrollView"))==null||f.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},[h]);const m=()=>{h?v(f=>!f):T(-1)},H=f=>{var e,N;U(!n);const c={staffCode:d==null?void 0:d.joinCode,fileArray:[]};c.fileArray.push(f==null?void 0:f.file);for(let p in f==null?void 0:f.formData)c[p]=f==null?void 0:f.formData[p];for(let p in f==null?void 0:f.staffForm)p==="asSameAddress"||(p==="bankPassbook"?f!=null&&f.staffForm[p]&&c.fileArray.push(f==null?void 0:f.staffForm[p]):c[p]=f==null?void 0:f.staffForm[p]);for(let p in f==null?void 0:f.dynamicDocument)p==="previousSchoolDocument"||(p==="staffPreviousSchool"?c[p]=f==null?void 0:f.dynamicDocument[p]:f!=null&&f.dynamicDocument[p]&&c.fileArray.push(f==null?void 0:f.dynamicDocument[p]));(d==null?void 0:d.openAs)==="DIRECT"&&(d!=null&&d.verifyNumber)?B({phoneNumber:d==null?void 0:d.verifyNumber,direct_staff:c}).then(p=>{var E,K,Q,$,q;U(W=>!W),G({token:(E=p==null?void 0:p.data)==null?void 0:E.token,_id:(Q=(K=p==null?void 0:p.data)==null?void 0:K.user)==null?void 0:Q._id,username:(q=($=p==null?void 0:p.data)==null?void 0:$.user)==null?void 0:q.username})}).catch({}):(d==null?void 0:d.openAs)==="INSTITUTE_SIDE"&&(j!=null&&j.id)?A({phoneNumber:f==null?void 0:f.staffPhoneNumberAdd,id:j==null?void 0:j.id,existingUser:(f==null?void 0:f.selectedUser)??"",addStaff:c}).then(()=>{U(p=>!p),T(-1)}).catch({}):(e=j==null?void 0:j.searchProfile)!=null&&e.id&&(j!=null&&j.id)&&(d!=null&&d.joinCode)?w({insId:(N=j==null?void 0:j.searchProfile)==null?void 0:N.id,staffData:c,uid:j==null?void 0:j.id}).then(p=>{p.data.status&&(U(E=>!E),T(`/q/${d==null?void 0:d.urlUsername}/memberstab`))}):U(p=>!p)};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:l.goback_container,id:"scrollView",children:r.jsxs("div",{className:l.goback_container_text,onClick:m,children:[r.jsx("img",{src:"/images/arr-left-white.svg",alt:"go back icon"}),r.jsx("h6",{className:l.goback_container_text_go,children:t("go_back")})]})}),r.jsxs("div",{className:l.student_from_container,children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h6",{className:l.student_from_fill,children:[" ",t("form_fill_staff")]}),h&&r.jsx("h6",{className:l.student_from_fill_edit,onClick:()=>v(f=>!f),children:t("edit_")})]}),r.jsx(D,{customStyle:{width:"100%"}}),r.jsx(mr,{preview:h,setPreview:v,location:d,onApplyForm:H})]}),n&&r.jsx(ws,{})]})}export{Yr as default};
