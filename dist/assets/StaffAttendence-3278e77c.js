import{r as D,j as e,u as b,R as N}from"./index-731451a5.js";import{u as F}from"./attendance-api-b2a2423b.js";const S="_staffAttendence_63tii_1",Y="_calendar_63tii_7",k="_arrColors_63tii_17",w="_colours_63tii_25",R="_clr_63tii_36",O="_present_63tii_52",P="_absent_63tii_57",E="_holiday_63tii_62",I="_leave_63tii_68",L="_percentage_63tii_74",J="_presentcount_63tii_78",T="_absentcount_63tii_87",o={staffAttendence:S,calendar:Y,arrColors:k,colours:w,clr:R,present:O,absent:P,holiday:E,leave:I,percentage:L,presentcount:J,absentcount:T};const C=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],W=["January","February","March","April","May","June","July","August","September","October","November","December"],H=(h=C,u=W)=>{const c=new Date,d=`${c.getDate()}-${c.getMonth()+1}-${c.getFullYear()}`,x=[1,2,3,4,5,6,0],[a,j]=D.useState(c),s=new Date(a.getFullYear(),a.getMonth()+1,0),_=new Date(a.getFullYear(),a.getMonth(),0),$=s.getDate(),v=new Date(a.getFullYear(),a.getMonth(),1).getDay(),r=x.indexOf(v)+1;let i=_.getDate()-x.indexOf(v)+1,t=1,m=1;const p=6,g=7,l={};for(let n=1;n<p+1;n++)for(let y=1;y<g+1;y++)l[n]||(l[n]=[]),n===1?y<r?(l[n]=[...l[n],{classes:"in-prev-month",date:`${i}-${a.getMonth()===0?12:a.getMonth()}-${a.getMonth()===0?a.getFullYear()-1:a.getFullYear()}`,value:i}],i++):(l[n]=[...l[n],{classes:"",date:`${t}-${a.getMonth()+1}-${a.getFullYear()}`,value:t}],t++):n>1&&t<$+1?(l[n]=[...l[n],{classes:"",date:`${t}-${a.getMonth()+1}-${a.getFullYear()}`,value:t}],t++):(l[n]=[...l[n],{classes:"in-next-month",date:`${m}-${a.getMonth()+2===13?1:a.getMonth()+2}-${a.getMonth()+2===13?a.getFullYear()+1:a.getFullYear()}`,value:m}],m++);return{daysShort:h,monthNames:u,todayFormatted:d,calendarRows:l,selectedDate:a,getPrevMonth:()=>{j(n=>new Date(n.getFullYear(),n.getMonth()-1,1))},getNextMonth:()=>{j(n=>new Date(n.getFullYear(),n.getMonth()+1,1))}}},q=({presentArr:h,absentArr:u,holidayArr:c,leavesArr:d})=>{const{calendarRows:x,selectedDate:a,todayFormatted:j,daysShort:s,monthNames:_,getNextMonth:$,getPrevMonth:v}=H(),r=i=>{const t=i.split("-"),m=t[0]>9?t[0]:`0${t[0]}`,p=t[1]>9?t[1]:`0${t[1]}`,g=t[2];return`${m}/${p}/${g}`};return e.jsxs(D.Fragment,{children:[e.jsxs("div",{className:"calenderheader",children:[e.jsx("div",{className:"monthbtn",onClick:v,children:e.jsx("img",{alt:"not found",src:"/images/members/arrow-left.svg"})}),e.jsxs("div",{className:"yearmonth",children:[e.jsx("h6",{children:`${_[a.getMonth()]}`}),e.jsx("p",{children:`${a.getFullYear()}`})]}),e.jsx("div",{className:"monthbtn",onClick:$,children:e.jsx("img",{alt:"not found",src:"/images/members/arrow-right.svg"})})]}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsx("tr",{children:s.map(i=>e.jsx("th",{className:"day",children:i},i))})}),e.jsx("tbody",{children:Object.values(x).map(i=>e.jsx("tr",{children:i.map(t=>t.date===j?d!=null&&d.includes(r(t.date))?e.jsx("td",{className:`${t.classes} date `,children:e.jsx("div",{className:"datediv aaji leave",children:t.value})},t.date):h!=null&&h.includes(r(t.date))?e.jsx("td",{className:`${t.classes} date `,children:e.jsx("div",{className:"datediv aaji",children:t.value})},t.date):u!=null&&u.includes(r(t.date))?e.jsx("td",{className:`${t.classes} date `,children:e.jsx("div",{className:"datediv aaji absent",children:t.value})},t.date):c!=null&&c.includes(r(t.date))?e.jsx("td",{className:`${t.classes} date `,children:e.jsx("div",{className:"datediv aaji holiday",children:t.value})},t.date):e.jsx("td",{className:`${t.classes} date `,children:e.jsx("div",{className:"datediv aaji",children:t.value})},t.date):h!=null&&h.includes(r(t.date))?e.jsx("td",{className:`${t.classes} date`,children:e.jsx("div",{className:"datediv present",children:t.value})},t.date):u!=null&&u.includes(r(t.date))?e.jsx("td",{className:`${t.classes} date`,children:e.jsx("div",{className:"datediv absent",children:t.value})},t.date):c!=null&&c.includes(r(t.date))?e.jsx("td",{className:`${t.classes} date`,children:e.jsx("div",{className:"datediv holiday",children:t.value})},t.date):d!=null&&d.includes(r(t.date))?e.jsx("td",{className:`${t.classes} date`,children:e.jsx("div",{className:"datediv leave",children:t.value})},t.date):e.jsx("td",{className:`${t.classes} date`,children:e.jsx("div",{className:"datediv",children:t.value})},t.date))},i[0].date))})]})]})};function G({sid:h}){var l,f;const u=new Date,{t:c}=b(),d=u.toISOString().split("-"),x=+d[1]>9?+d[1]:`0${+d[1]}`,[a,j]=N.useState("Month"),{staffCalenderAttendance:s,staffCalenderAttendanceRefetch:_}=F({sid:h,month:a==="Month"?x:"",year:+d[0]}),[$,v]=N.useState([]),[r,i]=N.useState([]),[t,m]=N.useState([]),p=[];N.useEffect(()=>{if(s&&(v([...s==null?void 0:s.presentArray]),i([...s==null?void 0:s.absentArray]),s!=null&&s.leaves)){const M=[];for(let n of s==null?void 0:s.leaves)M.push(...n.date);m(M)}},[s]),N.useEffect(()=>{_()},[a]);const g=M=>{j(M)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:o.staffAttendence,children:[e.jsxs("div",{className:o.calendar,children:[e.jsx(q,{presentArr:$,absentArr:r,holidayArr:p,leavesArr:t}),e.jsxs("div",{className:o.arrColors,children:[e.jsx("div",{className:`${o.clr} ${o.absent}`,children:c("absent")}),e.jsx("div",{className:`${o.clr} ${o.holiday}`,children:c("holiday_")}),e.jsx("div",{className:`${o.clr} ${o.leave}`,children:c("leave")})]})]}),e.jsxs("div",{className:o.colours,children:[e.jsxs("div",{class:"form-check",onClick:()=>g("Month"),children:[e.jsx("input",{class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault1",checked:!0}),e.jsx("label",{class:"form-check-label",for:"flexRadioDefault1",children:c("monthly")})]}),e.jsxs("div",{class:"form-check",onClick:()=>g("Year"),children:[e.jsx("input",{class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault2"}),e.jsx("label",{class:"form-check-label",for:"flexRadioDefault2",children:c("yearly")})]})]})]}),e.jsxs("div",{className:o.percentage,children:[e.jsxs("div",{className:o.presentcount,children:[e.jsx("p",{children:c("present_count")}),e.jsxs("p",{children:[(l=s==null?void 0:s.presentArray)==null?void 0:l.length," ",c("days")," "]}),e.jsxs("p",{children:[s==null?void 0:s.present,"%"]})]}),e.jsxs("div",{className:o.absentcount,children:[e.jsx("p",{children:c("absent_count")}),e.jsxs("p",{children:[(f=s==null?void 0:s.absentArray)==null?void 0:f.length," ",c("days")]}),e.jsxs("p",{children:[s==null?void 0:s.absent,"%"]})]})]})]})}export{G as default};
