import{u as R,r as l,t as U,j as e,S as k}from"./index-731451a5.js";import{P as B}from"./PopupWrapper-ffbaef7a.js";import{s as n}from"./FeesStructure.module-7a88fbbc.js";import{g as O}from"./hostel-api-4d11cb04.js";import{A as V}from"./ApplicationPreviewDetail-fd29a331.js";const L=({onClose:d,onSelectedStudent:c,hostelId:r,asOpen:m,batchId:N,classMasterId:S})=>{const{t:_}=R(),[w,o]=l.useState(""),[A,p]=U(),[x,P]=l.useState(1),[u,j]=l.useState(!0),[b,h]=l.useState(!0),[a,C]=l.useState([]),[t,v]=l.useState(""),{getHostelFeeStructureList:i,getHostelFeeStructureListRefetch:T}=O({data:{hid:r,page:x,limit:10,filter_by:N,master_by:S??""},skip:!r});l.useEffect(()=>{r&&(h(!0),T())},[r,x,T]),l.useEffect(()=>{p&&u&&P(s=>s+1)},[p,u]),l.useEffect(()=>{var s,f;i!=null&&i.all_structures?(C(I=>[...new Set([...I,...i==null?void 0:i.all_structures].map(JSON.stringify))].map(JSON.parse)),h(!1)):((s=i==null?void 0:i.all_structures)==null?void 0:s.length)===0&&h(!1),((f=i==null?void 0:i.all_structures)==null?void 0:f.length)===10?j(!0):j(!1)},[i==null?void 0:i.all_structures]);const D=s=>{c({fee_struct:t==null?void 0:t._id,...s}),d()},E=s=>{m==="STUDENT_VIEW_STRUCTURE"?c(s==null?void 0:s._id):m==="HOSTEL_APPLICATION"?c(s):(o(s==null?void 0:s._id),v(s))};return e.jsx(e.Fragment,{children:w?e.jsx(V,{structureId:t==null?void 0:t._id,viewAs:"HOSTEL_APPLICATION_TAB",setStructureId:o,onSelectedApplicant:D}):e.jsx(B,{onClose:d,children:e.jsxs("div",{className:n.add_category_modal,style:{width:"40rem",minHeight:"10rem",maxHeight:"35rem",overflowY:"auto",overflowX:"hidden",scrollBehavior:"smooth"},children:[e.jsxs("section",{className:n.add_category_modal_title_left,style:{marginBottom:"1.2rem"},children:[e.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:d,alt:"back arrow"}),e.jsx("h6",{children:_(m==="SELECTED_TAB"?"edit_fee_structure":m==="STUDENT_VIEW_STRUCTURE"?"admission_fees":m==="HOSTEL_APPLICATION"?"select_fee_structure_for_application":"select_fee_structure_of_student")})]}),a==null?void 0:a.map((s,f)=>(a==null?void 0:a.length)===f+1?e.jsxs("div",{className:`${n.fees_card} ${n.fees_card_hover}`,ref:A,onClick:()=>E(s),children:[e.jsx("img",{src:"/images/fees-category-icon.svg",alt:"categor icon"}),e.jsxs("div",{className:n.fees_card_text,children:[e.jsx("h6",{children:(s==null?void 0:s.unique_structure_name)??""}),e.jsxs("div",{className:n.fees_card_text_bottom,style:{marginTop:"0.3rem"},children:[e.jsxs("h6",{children:[_("applicable_fees_only")," ",_("rs"),".",(s==null?void 0:s.applicable_fees)??0]}),e.jsxs("h6",{children:[_("total_admission_fees")," "," : "," ",_("rs"),".",(s==null?void 0:s.total_admission_fees)??0]})]})]})]},s==null?void 0:s._id):e.jsxs("div",{className:`${n.fees_card} ${n.fees_card_hover}`,onClick:()=>E(s),children:[e.jsx("img",{src:"/images/fees-category-icon.svg",alt:"categor icon"}),e.jsxs("div",{className:n.fees_card_text,children:[e.jsx("h6",{children:(s==null?void 0:s.unique_structure_name)??""}),e.jsxs("div",{className:n.fees_card_text_bottom,style:{marginTop:"0.3rem"},children:[e.jsxs("h6",{children:[_("applicable_fees_only")," ",_("rs"),".",(s==null?void 0:s.applicable_fees)??0]}),e.jsxs("h6",{children:[_("total_admission_fees")," "," : "," ",_("rs"),".",(s==null?void 0:s.total_admission_fees)??0]})]})]})]},s==null?void 0:s._id)),b&&e.jsx(k,{})]})})})};export{L as S};
