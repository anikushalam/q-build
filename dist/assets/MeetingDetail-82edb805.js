import{u as $,j as s,e as D,r as i,S as L,Q as H,n as Q,a1 as A,L as U,t as W,c as z,d as K}from"./index-731451a5.js";import{s as B}from"./AdmissionApplicationRequest.module-43e4e129.js";import{s as X,ac as Y,ad as Z,ae as M}from"./department-api-a4f0b4b7.js";import{P as O}from"./PopupWrapper-ffbaef7a.js";import{B as G}from"./BorderBottom-47800983.js";import{J as V}from"./JoinFormTextArea-7f6dded0.js";import{s as I}from"./SeatingArrangement.module-3f4ae6aa.js";import{J as ss}from"./JoinFormInput-8e74a0e0.js";import{F as as}from"./FormToggle-bf5ca79b.js";import{U as rs}from"./UniversalTab-d4f2174c.js";import{M as ts,s as R}from"./MentorTabChangeLink-67adf924.js";import{s as C}from"./Hostel.module-50da11fe.js";import{J as F}from"./JoinFormInputView-879755fe.js";const J=({mentee:a,viewAs:l,onPresent:e,onAbsent:n,isVisible:h,absent:f,present:t,isPresent:x})=>{const{t:p}=$();return s.jsxs("div",{className:B.applicant_card_container,children:[s.jsxs("div",{className:B.applicant_card_inner,style:{width:"90%"},children:[s.jsx("img",{alt:"Student Request Avatar",src:a!=null&&a.studentProfilePhoto?`${D}/${a==null?void 0:a.studentProfilePhoto}`:"/images/member_tab/class/default_avatar.svg",loading:"lazy"}),s.jsxs("div",{className:B.applicant_card_inner_info,children:[s.jsx("h6",{children:`${a==null?void 0:a.studentFirstName} ${a!=null&&a.studentMiddleName?a==null?void 0:a.studentMiddleName:""} ${a==null?void 0:a.studentLastName}`}),l==="ATTENDANCE"||l==="MEETING_DETAIL"?null:s.jsxs("p",{children:[`${(a==null?void 0:a.total_query)??0} `," ",p("pending")]})]})]}),l==="ATTENDANCE"?h==="PRESENT"?t!=null&&t.includes(a==null?void 0:a._id)?s.jsx("img",{src:"/images/members/radio-btn-green.svg",alt:"radio",onClick:()=>e(a==null?void 0:a._id)}):s.jsx("img",{src:"/images/members/radio-btn.svg",alt:"radio",onClick:()=>e(a==null?void 0:a._id)}):f!=null&&f.includes(a==null?void 0:a._id)?s.jsx("img",{src:"/images/members/radio-btn-red.svg",alt:"radio",onClick:()=>n(a==null?void 0:a._id)}):s.jsx("img",{src:"/images/members/radio-btn.svg",alt:"radio",onClick:()=>n(a==null?void 0:a._id)}):l==="MEETING_DETAIL"?x?s.jsx("img",{src:"/images/members/radio-btn-green.svg",alt:"radio"}):s.jsx("img",{src:"/images/members/radio-btn-red.svg",alt:"radio"}):null]})},cs=({onPresentHandler:a,onAbsentHandler:l})=>{const{t:e}=$(),[n,h]=i.useState(0),f=[{name:e("present"),id:0},{name:e("absent"),id:1}],t=x=>{x===1?l():a(),h(x)};return s.jsxs(s.Fragment,{children:[s.jsx(rs,{tabList:f,activeIndexTab:n,customStyleTab:{width:"100%"},customStyleLink:{width:"50%"},setActiveIndexTab:t}),s.jsx(G,{customStyle:{width:"100%",marginBottom:"0.7rem"}})]})},os=({mid:a,onClose:l,onAddMeeting:e})=>{var k;const{t:n}=$(),[h,f]=i.useState(!0),[t,x]=i.useState([]),[p,_]=i.useState([]),[S,E]=i.useState("PRESENT"),{getOneMentorMenteeList:o,getOneMentorMenteeListRefetch:T}=X({data:{mid:a,page:1,limit:1e3},skip:!a});i.useEffect(()=>{a&&(f(!0),T())},[a,T]);const v=()=>{var c,u;let r=[];for(let N=0;N<((c=o==null?void 0:o.all_mentees)==null?void 0:c.length);N++)r.push((u=o==null?void 0:o.all_mentees[N])==null?void 0:u._id);_(r),x([]),E("PRESENT")};i.useEffect(()=>{var r;o!=null&&o.all_mentees?(v(),f(!1)):((r=o==null?void 0:o.all_mentees)==null?void 0:r.length)===0&&f(!1)},[o==null?void 0:o.all_mentees]);const b=()=>{var c,u;let r=[];for(let N=0;N<((c=o==null?void 0:o.all_mentees)==null?void 0:c.length);N++)r.push((u=o==null?void 0:o.all_mentees[N])==null?void 0:u._id);_([]),x(r),E("ABSENT")},d=r=>{t!=null&&t.includes(r)?(x(c=>c==null?void 0:c.filter(u=>u!==r)),_(c=>[...c,r])):(x(c=>[...c,r]),_(c=>c==null?void 0:c.filter(u=>u!==r)))},y=r=>{p!=null&&p.includes(r)?(_(c=>c==null?void 0:c.filter(u=>u!==r)),x(c=>[...c,r])):(_(c=>[...c,r]),x(c=>c==null?void 0:c.filter(u=>u!==r)))},w=()=>{e({present:t,absent:p})};return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:I.seating_modal_title_left,style:{width:"100%",justifyContent:"space-between"},children:[s.jsxs("div",{className:I.attendance_text,children:[s.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:l,alt:""}),s.jsx("h6",{children:n("mark_attendance")})]}),s.jsx("div",{className:I.attendance_next_btn,style:{marginTop:"0",width:"80px",padding:"0.5rem",height:"auto",cursor:"pointer"},onClick:w,children:n("add")})]}),s.jsx(G,{customStyle:{width:"100%",marginBottom:"1rem"}}),s.jsx(cs,{onPresentHandler:v,onAbsentHandler:b}),(k=o==null?void 0:o.all_mentees)==null?void 0:k.map(r=>s.jsx(J,{mentee:r,viewAs:"ATTENDANCE",isVisible:S,absent:p,present:t,onPresent:d,onAbsent:y},r==null?void 0:r._id)),h&&s.jsx(L,{})]})},ls=({onRefetch:a,onClose:l,mid:e})=>{const{t:n}=$(),[h,f]=i.useState(""),[t,x]=i.useState(!1),[p,_]=i.useState(!1),[S,E]=i.useState({agenda:"",discussion:"",summary:"",meeting_alert:!0}),[o]=Y(),T=d=>{E(y=>({...y,[d.target.name]:d.target.value}))},v=()=>{_(d=>!d)},b=d=>{e&&(x(y=>!y),o({meetingData:{...S,mid:e,p_array:d==null?void 0:d.present,a_array:d==null?void 0:d.absent}}).then(()=>{a(),l()}).catch({}))};return s.jsx(O,{onClose:l,children:s.jsxs("div",{className:I.seating_modal,style:{width:"40rem"},children:[p?s.jsx(os,{mid:e,onClose:v,onAddMeeting:b}):s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:I.seating_modal_title_left,style:{position:"relative"},children:[s.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:l,alt:""}),s.jsx("h6",{children:n("add_meeting")})]}),s.jsx(G,{customStyle:{width:"100%",marginBottom:"1rem"}}),s.jsx(as,{labelHeading:n("add_meeting_alert"),labelDescription:"",defaultLabel:!1,customContainer:{padding:"0"},checkedToggle:S.meeting_alert,onToggleHandler:d=>E(y=>({...y,meeting_alert:d.target.checked}))}),s.jsx(ss,{labelText:n("agenda"),placeholder:n("agenda_placeholder"),name:"agenda",value:S.agenda,type:"text",onChange:T,errorShow:h.agenda}),s.jsx(V,{labelText:n("summary"),placeholder:n("summary_placeholder"),name:"summary",value:S.summary,type:"text",onChange:T,customStyleContainer:{width:"100%"},errorShow:h.summary}),s.jsx(V,{labelText:n("discussion"),placeholder:n("discussion_placeholder"),name:"discussion",value:S.discussion,type:"text",onChange:T,customStyleContainer:{width:"100%"},errorShow:h.discussion}),s.jsx("button",{className:I.start_arrangement_btn,onClick:v,children:n("mark_attendance")})]}),t&&s.jsx(H,{})]})})},q=({meeting_detail:a,carryParentState:l,queryFlow:e})=>{const n=Q();return s.jsx(s.Fragment,{children:e==="By_Mentor"?s.jsx(ts,{carryParentState:{...l,meid:a==null?void 0:a._id},activeTab:"meeting-detail",children:s.jsxs("div",{className:R.mentor_card_container,style:{marginBottom:"0.7rem"},children:[s.jsx("img",{src:"/images/member_tab/student/student-query-icon.svg",style:{borderRadius:"50%"},alt:"mentor avatar"}),s.jsxs("div",{className:R.mentor_container_inner,style:{gap:"0.6rem"},children:[s.jsx("h6",{children:(a==null?void 0:a.agenda)??""}),s.jsxs("p",{children:[A(a==null?void 0:a.created_at).format("DD MMM yyyy"),",",A(a==null?void 0:a.created_at).format("LT")]})]})]})}):s.jsx(U,{to:`/q/${n.username}/member/student/class?a=mentor&n=meeting-detail`,state:{...l,meid:a==null?void 0:a._id},activeTab:"mentor&n=queries&query",children:s.jsxs("div",{className:R.mentor_card_container,style:{marginBottom:"0.7rem"},children:[s.jsx("img",{src:"/images/member_tab/student/student-query-icon.svg",style:{borderRadius:"50%"},alt:"mentor avatar"}),s.jsxs("div",{className:R.mentor_container_inner,style:{gap:"0.6rem"},children:[s.jsx("h6",{children:(a==null?void 0:a.agenda)??""}),s.jsxs("p",{children:[A(a==null?void 0:a.created_at).format("DD MMM yyyy"),",",A(a==null?void 0:a.created_at).format("LT")]})]})]})})})},bs=({mid:a,carryParentState:l,queryFlow:e})=>{const{t:n}=$(),[h,f]=i.useState(!1),[t,x]=i.useState(""),[p,_]=W({skip:t}),[S,E]=i.useState(1),[o,T]=i.useState(!0),[v,b]=i.useState(!0),[d,y]=i.useState(!1),[w,k]=i.useState([]),{getAllMeetingByMentor:r,getAllMeetingByMentorRefetch:c}=Z({data:{mid:a,limit:10,search:t,page:S},skip:!a});i.useEffect(()=>{a&&(b(!0),c())},[a,S,t,c]),i.useEffect(()=>{_&&o&&E(m=>m+1)},[_,o]),i.useEffect(()=>{var m,g;d?(k(r==null?void 0:r.all_meet),b(!1),y(!1)):t?(k(r==null?void 0:r.all_meet),b(!1)):r!=null&&r.all_meet?(k(P=>[...new Set([...P,...r==null?void 0:r.all_meet].map(JSON.stringify))].map(JSON.parse)),b(!1)):((m=r==null?void 0:r.all_meet)==null?void 0:m.length)===0&&b(!1),((g=r==null?void 0:r.all_meet)==null?void 0:g.length)===10?T(!0):T(!1)},[r==null?void 0:r.all_meet]);const u=()=>{f(m=>!m)},N=()=>{E(1),y(!0),b(!0),c()};return s.jsxs(s.Fragment,{children:[e==="By_Student"?null:s.jsx("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:s.jsx("p",{className:B.add_new_category,onClick:u,children:n("add_new_meeting")})}),w==null?void 0:w.map((m,g)=>(w==null?void 0:w.length)===g+1?s.jsx("div",{ref:p,children:s.jsx(q,{queryFlow:e,meeting_detail:m,carryParentState:l})},m==null?void 0:m._id):s.jsx(q,{queryFlow:e,meeting_detail:m,carryParentState:l},m==null?void 0:m._id)),v&&s.jsx(L,{}),h&&s.jsx(ls,{onClose:u,mid:a,onRefetch:N})]})},ys=({queryFlow:a})=>{var S,E,o,T,v,b,d,y,w,k,r,c,u,N,m,g,P;const{t:l}=$(),e=z(),n=K(),[h,f]=i.useState(""),{getOneMeetingDetail:t,getOneMeetingDetailRefetch:x}=M({meid:(S=n.state)==null?void 0:S.meid,skip:!((E=n.state)!=null&&E.meid)});i.useEffect(()=>{var j;(j=n.state)!=null&&j.meid&&x()},[(o=n.state)==null?void 0:o.qid,x]);const p=()=>{e(-1)},_=j=>{f(j===h?"":j)};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:C.with_search,style:{justifyContent:"flex-start",gap:"1rem"},children:[s.jsx("img",{src:"/images/arrow-left-fees-icon.svg",onClick:p,alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),s.jsx("h6",{children:l("meeting_detail")})]}),s.jsx(G,{customStyle:{width:"100%",marginBottom:"0.5rem"}}),s.jsx(F,{labelText:`${l("agenda")}: `,value:((T=t==null?void 0:t.all_meet)==null?void 0:T.agenda)??""}),s.jsx(F,{labelText:`${l("summary")}: `,value:((v=t==null?void 0:t.all_meet)==null?void 0:v.summary)??"",customStyleValue:{width:"100%",whiteSpace:"break-spaces"},customStyleContainer:{alignItems:"flex-start"}}),s.jsx(F,{labelText:`${l("discussion")}: `,value:((b=t==null?void 0:t.all_meet)==null?void 0:b.discussion)??"",customStyleValue:{width:"100%",whiteSpace:"break-spaces"},customStyleContainer:{alignItems:"flex-start"}}),s.jsx(F,{labelText:`${l("date")}: `,value:A((d=t==null?void 0:t.all_meet)==null?void 0:d.created_at).format("DD MMM,yyyy")}),a==="By_Student"?null:s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:C.mentor_attendance_container,children:[s.jsxs("div",{className:h==="PRESENT"?`${C.mentor_attendance_btn} ${C.mentor_attendance_btn_active}`:C.mentor_attendance_btn,onClick:()=>_("PRESENT"),children:[s.jsxs("h6",{children:[`${l("present")}: `,((y=t==null?void 0:t.all_meet)==null?void 0:y.mentees_present_count)??0]}),s.jsx("img",{src:"/images/forward-right-icon.svg",alt:"view academics"})]}),s.jsxs("div",{className:h==="ABSENT"?`${C.mentor_attendance_btn} ${C.mentor_attendance_btn_active}`:C.mentor_attendance_btn,onClick:()=>_("ABSENT"),children:[s.jsxs("h6",{children:[`${l("absent")}: `,((w=t==null?void 0:t.all_meet)==null?void 0:w.mentees_absent_count)??0]}),s.jsx("img",{src:"/images/forward-right-icon.svg",alt:"view academics"})]})]}),h==="PRESENT"?s.jsxs("div",{style:{marginTop:"1rem"},children:[s.jsx("p",{children:((r=(k=t==null?void 0:t.all_meet)==null?void 0:k.present_mentees)==null?void 0:r.length)>0?l("present_mentee_list"):l("no_present_mentee_list")}),(u=(c=t==null?void 0:t.all_meet)==null?void 0:c.present_mentees)==null?void 0:u.map(j=>s.jsx(J,{mentee:j,viewAs:"MEETING_DETAIL",isPresent:!0},j==null?void 0:j._id))]}):h==="ABSENT"?s.jsxs("div",{style:{marginTop:"1rem"},children:[s.jsx("p",{children:((m=(N=t==null?void 0:t.all_meet)==null?void 0:N.absent_mentees)==null?void 0:m.length)>0?l("absent_mentee_list"):l("no_absent_mentee_list")}),(P=(g=t==null?void 0:t.all_meet)==null?void 0:g.absent_mentees)==null?void 0:P.map(j=>s.jsx(J,{mentee:j,viewAs:"MEETING_DETAIL"},j==null?void 0:j._id))]}):null]})]})};export{ys as M,bs as S,J as a};
