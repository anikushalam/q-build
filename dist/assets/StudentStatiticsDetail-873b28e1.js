import{u as b,n as I,c as O,d as E,j as e,lH as g,r as h,oz as A}from"./index-0ca76035.js";import{n as $,ad as R,l as U,U as N,s as p,r as V,C as B,B as D,Q as P}from"./FinanceConfig-24ef7fd2.js";import{s as x}from"./PendingFees.module-8beea404.js";const z=({student:a})=>{var _;const{t:s}=b(),i=I(),l=O(),d=E(),n=()=>{l(`/q/${i.username}/student/profile`,{state:{sid:a==null?void 0:a._id}})};return e.jsxs("div",{className:x.pending_fees_card,onClick:n,children:[e.jsxs("div",{className:x.pending_fees_card_container,children:[e.jsx("img",{alt:"Student Avatar",src:a!=null&&a.studentProfilePhoto?`${g}/${a==null?void 0:a.studentProfilePhoto}`:`${$}/feed-user-avatar.svg`,loading:"lazy"}),e.jsxs("div",{className:x.pending_fees_card_inner,children:[e.jsx("h6",{style:{fontSize:"13px",margin:"0"},children:(a==null?void 0:a.valid_full_name)??""}),e.jsxs("p",{style:{fontSize:"11px"},children:[s("roll_no")," "," : ",(a==null?void 0:a.studentROLLNO)??""]}),e.jsxs("p",{style:{fontSize:"11px"},children:[s("gr_number")," : ",(a==null?void 0:a.studentGRNO)??""]})]})]}),((_=d.state)==null?void 0:_.openAs)==="ADMISSION_OVERVIEW"?e.jsxs("div",{className:x.statistics_balance,children:[e.jsxs("div",{children:[e.jsxs("h5",{style:{color:"#008000"},children:[s("rs")," ",(a==null?void 0:a.total_paid_fees)??0]}),e.jsx("h6",{children:s("total_fees_paid")}),e.jsxs("h5",{style:{color:"#121212"},children:[s("rs")," ",(a==null?void 0:a.total_os_fees)??0]}),e.jsx("h6",{children:s("total_outs")})]}),e.jsxs("div",{children:[e.jsxs("h5",{style:{color:"#121212"},children:[s("rs")," ",(a==null?void 0:a.applicable_os_fees)??0]}),e.jsx("h6",{children:s("applicable_outs")}),e.jsxs("h5",{style:{color:"#121212"},children:[s("rs")," ",(a==null?void 0:a.government_os_fees)??0]}),e.jsx("h6",{children:s("government_outs")})]})]}):null]})},G=()=>{var m,f,j;const{t:a}=b(),s=E(),[i,l]=h.useState([]),[d,n]=h.useState(!1),[_]=R();h.useEffect(()=>{var r,c,t;(c=(r=s==null?void 0:s.state)==null?void 0:r.studentList)!=null&&c.length&&l((t=s==null?void 0:s.state)==null?void 0:t.studentList)},[(m=s==null?void 0:s.state)==null?void 0:m.studentList]);const L=r=>{var c,t;if(r.target.value){let o=W((c=s==null?void 0:s.state)==null?void 0:c.studentList,r.target.value);l(()=>o)}else l((t=s==null?void 0:s.state)==null?void 0:t.studentList)},C=h.useCallback(()=>{var c,t;n(o=>!o);let r=[];for(let o of i)r.push(o==null?void 0:o._id);_({exportBody:{all_arr:r,batch:(c=s==null?void 0:s.state)==null?void 0:c.batchId,depart:(t=s==null?void 0:s.state)==null?void 0:t.departmentId}}).then(o=>{var S,v;(S=o==null?void 0:o.data)!=null&&S.data&&(n(w=>!w),window.open(`${A}/${(v=o==null?void 0:o.data)==null?void 0:v.data}`,"_blank","noreferrer"))}).catch({})},[i]);return e.jsxs(e.Fragment,{children:[e.jsxs(U,{children:[e.jsx(N,{children:e.jsxs("div",{className:p.fm_header_container,children:[e.jsx("h6",{children:a(((f=s==null?void 0:s.state)==null?void 0:f.openAs)==="OVERVIEW"?"overview_statistics_detail":((j=s==null?void 0:s.state)==null?void 0:j.openAs)==="ADMISSION_OVERVIEW"?"admission_statistics_detail":"student_statistics_detail")}),e.jsxs("div",{className:p.fm_search,children:[e.jsx("section",{className:p.fm_search_container,children:e.jsxs("div",{className:p.fm_search_container_inner,children:[e.jsx("img",{className:p.fm_search_icon,alt:"search icon",src:`${V}/navbar-search.svg`}),e.jsx("input",{type:"text",placeholder:a("search"),onChange:L})]})}),e.jsx(B,{label:"export",customStyle:{margin:"0",paddingBlock:"0.61rem"},onAction:C})]})]})}),e.jsx(D,{}),e.jsx(N,{customStyle:{paddingTop:"0"},children:i==null?void 0:i.map(r=>e.jsx(z,{student:r},r==null?void 0:r._id))})]}),d&&e.jsx(P,{})]})},W=(a,s)=>a==null?void 0:a.filter(i=>{var l,d,n,_;return(d=(l=i==null?void 0:i.valid_full_name)==null?void 0:l.toLowerCase())!=null&&d.includes(s==null?void 0:s.toLowerCase())||(_=(n=i==null?void 0:i.studentGRNO)==null?void 0:n.toLowerCase())!=null&&_.includes(s==null?void 0:s.toLowerCase())?i:null});export{G as default};
