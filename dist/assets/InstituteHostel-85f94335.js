import{u as w,t as xe,r as p,l as je,j as t,S as ge,b as pe,R as ue,_ as fe,n as he,G as be,o as ve,e as Ie,p as R,d as Ne,k as Te,s as Se}from"./index-731451a5.js";import{o as ye,p as Ee}from"./hostel-api-4d11cb04.js";import{s as C}from"./InsFinance.module-24741212.js";import{s as o}from"./InstituteHostel.module-b6b254cc.js";import{s as l,C as U}from"./CommonLinkTab-7c8e0314.js";import{H as le,I as x,a as we,U as Re}from"./UnitRoomInfo-274b0ae5.js";import{B as _e}from"./BorderBottom-47800983.js";import{C as Ce}from"./CustomSuspense-e90dc607.js";import{H as Ue,I as Ae,a as He,b as Oe,c as Me,d as Be,e as Ve,f as ke,g as Le,h as $e}from"./HostelFeeStructure-c05f171c.js";import{H as qe}from"./HostelAnnouncement-32bcf874.js";import{H as Fe}from"./HostelUnit-77f00467.js";import"./Tabs.module-fb9ec0a6.js";import"./Hostel.module-50da11fe.js";import"./CustomNormalSelectInput-9ec7329b.js";import"./JoinForm.module-212f9bb3.js";import"./JoinFormInput-8e74a0e0.js";import"./PopupWrapper-ffbaef7a.js";import"./Overlay-07ce6f88.js";import"./Overlay.module-9133d1bb.js";import"./SearchModalWrapper-6e85c9f3.js";import"./SearchModalBackdrop-5b309d60.js";import"./SearchHeader.module-b69c8942.js";import"./HostelFeeStructure.module-5a40a31e.js";import"./HostelSiteInfo.module-332fbdef.js";import"./JoinFormTextArea-7f6dded0.js";import"./JoinFormFileEdit-e41481d6.js";import"./ViewFileDialog-0c131c06.js";import"./StringLength-222a9fd1.js";import"./StringLength.module-75a6e080.js";import"./EditConfirm.module-344fbdb9.js";import"./UniversalTab-d4f2174c.js";import"./AssignStaffModal-61be8e90.js";import"./search-api-15f7f9f9.js";import"./AssignStaffModal.module-a60b32e1.js";import"./AdmissionModerator.module-e8abdfd3.js";import"./AdmisisonRefund.module-c6c85188.js";import"./Funds.module-95df49a8.js";import"./CustomSelectDepartment-a5dd9a35.js";import"./finance-api-5c6c5671.js";import"./constant_value-4cd2b3e0.js";import"./FormCheckbox-3a5ba026.js";import"./UniversalForm.module-19614663.js";import"./FormControlLabel-1c6af80c.js";import"./SwitchBase-2ba5f868.js";import"./Checkbox-1498c124.js";import"./FormToggle-bf5ca79b.js";import"./Switch-81e70f2f.js";import"./admission-api-56b87fde.js";import"./AdmissionApplicationCalender-28d9a66e.js";import"./Attendence.module-a5391855.js";import"./AdmissionApplicationRequest.module-43e4e129.js";import"./SelectHostelFeeStrucutre-6ca88b34.js";import"./FeesStructure.module-7a88fbbc.js";import"./ApplicationPreviewDetail-fd29a331.js";import"./JoinFormInputView-879755fe.js";import"./DatePicker-305f3dc6.js";import"./SeatingArrangement.module-3f4ae6aa.js";import"./transport-api-9ab21e71.js";import"./JoinFormCalender-5158d888.js";import"./PaymentModeType-cf3d04e2.js";import"./pdf-convertor-function-e794de58.js";import"./main.receipt.pdf.worker-5753b302.js";import"./numberToWords.min-dbca819b.js";import"./CreateAdmissionApplication-3142beca.js";import"./JoinFormFile-110be590.js";import"./department-api-a4f0b4b7.js";import"./ClassCard-ebc64e14.js";import"./SelectFeeStructure-05d0a31f.js";import"./FeesCategoryList-8131ad8c.js";import"./ButtonWithAction-805b1066.js";import"./LoaderButton-71df50a7.js";import"./HostelFeesStructureList-0cf3dd94.js";import"./NewAnnouncement.module-4f17791a.js";const Ge=({hid:e,instituteId:s})=>{const{t:m}=w(),[i,c]=xe(),[r,n]=p.useState(1),[j,g]=p.useState(!0),[f,u]=p.useState(!0),[_,v]=p.useState([]),[b,N]=p.useState(""),{getHostelHostelitesList:a,getHostelHostelitesListRefetch:I}=ye({data:{hid:e,page:r,limit:10,search:b,filter_by:"",id:s},skip:!e});p.useEffect(()=>{e&&(u(!0),I())},[e,s,r,b,I]),p.useEffect(()=>{c&&j&&n(d=>d+1)},[c,j]),p.useEffect(()=>{var d,h;b?(v(a==null?void 0:a.all_hostalities),u(!1)):a!=null&&a.all_hostalities?(v(y=>[...new Set([...y,...a==null?void 0:a.all_hostalities].map(JSON.stringify))].map(JSON.parse)),u(!1)):((d=a==null?void 0:a.all_hostalities)==null?void 0:d.length)===0&&u(!1),((h=a==null?void 0:a.all_hostalities)==null?void 0:h.length)===10?g(!0):g(!1)},[a==null?void 0:a.all_hostalities]);const T=p.useCallback(je.debounce(d=>N(d),500),[]),S=d=>{T(d.target.value)};return t.jsxs("div",{children:[t.jsxs("div",{className:o.with_search,children:[t.jsx("h6",{children:m("hostelites")}),t.jsx("section",{className:o.search_container,children:t.jsxs("div",{className:o.search_container_input,children:[t.jsx("img",{className:o.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),t.jsx("input",{type:"text",placeholder:"Search warden...",onChange:S})]})})]}),t.jsx(_e,{customStyle:{marginTop:"0.5rem",width:"100%"}}),_==null?void 0:_.map((d,h)=>(_==null?void 0:_.length)===h+1?t.jsx("div",{ref:i,children:t.jsx(le,{hostelites:d,viewAs:"INSTITUTE_SIDE"})},d==null?void 0:d._id):t.jsx(le,{hostelites:d,viewAs:"INSTITUTE_SIDE"},d==null?void 0:d._id)),f&&t.jsx(ge,{})]})};function A({bal:e,value:s}){return t.jsxs("div",{className:o.balanceItem,children:[t.jsxs("p",{children:[e,":"]}),t.jsxs("p",{children:["Rs. ",s]})]})}const Je=({onlineFee:e,offlineFee:s,exemptAmount:m,remainingFeeCount:i})=>{const{t:c}=w();return t.jsx("div",{className:o.funds2,children:t.jsxs("div",{className:o.fundscontent,children:[t.jsx("h6",{className:o.institute_hostel_title,children:c("hostel_fees")}),t.jsx(_e,{customStyle:{width:"100%",marginBottom:"0.7rem"}}),t.jsxs("div",{className:o.sidebarbottomitem,children:[t.jsx("img",{alt:"not found",src:"/images/hostel/rupee-blue-icon.svg"}),t.jsxs("div",{children:[t.jsxs("p",{className:o.namee,children:["Rs."," ",(e||(0+s?s:0)).toFixed(2)]}),t.jsx("p",{className:o.desig,children:c("total_hostel_fees")})]})]}),t.jsx(A,{bal:c("online_fees"),value:(e==null?void 0:e.toFixed(2))??0}),t.jsx(A,{bal:c("offline_fees"),value:(s==null?void 0:s.toFixed(2))??0}),t.jsx(A,{bal:`${c("total_concession_fees")}:`,value:(m==null?void 0:m.toFixed(2))??0}),t.jsxs("div",{className:o.fundbtn,children:[c("total_pending_fees")," : Rs. ",i??0]})]})})},Qe=({carryParentState:e,onlineFee:s,offlineFee:m,exemptAmount:i,remainingFeeCount:c})=>{const{t:r}=w(),[n]=pe();return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:l.finance_tab_tabs,children:[t.jsx(U,{tabLevel:r("menu"),customStyleContainer:{width:"33.3%",marginRight:"2px",borderTopLeftRadius:"6px"},customStyleLevel:{borderTopLeftRadius:"6px"},tabValue:"menu",currentValue:n!=null&&n.get("a")?"other":"menu",carryParentState:e,activeUrl:"hostel"}),t.jsx(U,{tabLevel:r("fees_structure"),customStyleContainer:{width:"33.3%",marginRight:"2px"},customStyleLevel:{borderTopLeftRadius:"6px"},tabValue:"fee",currentValue:(n==null?void 0:n.get("a"))==="fee"?"fee":"other",carryParentState:e,activeUrl:"hostel?a=fee"}),t.jsx(U,{tabLevel:r("funds"),customStyleContainer:{width:"33.3%",borderTopRightRadius:"6px"},customStyleLevel:{borderTopLeftRadius:"6px"},tabValue:"fund",currentValue:(n==null?void 0:n.get("a"))==="fund"?"fund":"other",carryParentState:e,activeUrl:"hostel?a=fund"})]}),n!=null&&n.get("a")?(n==null?void 0:n.get("a"))==="fund"?t.jsx(Je,{carryParentState:e,onlineFee:s,offlineFee:m,exemptAmount:i,remainingFeeCount:c}):null:t.jsxs("div",{className:l.item,children:[t.jsx(x,{carryParentState:e,activeTab:"warden",children:t.jsxs("div",{className:l.itemIcon,children:[t.jsx("img",{src:"/images/member_tab/hostel/hostel-warden-icon.svg",alt:"Class Catalog"}),t.jsx("p",{children:r("staff_room")})]})}),t.jsx(x,{carryParentState:e,activeTab:"unit",children:t.jsxs("div",{className:l.itemIcon,children:[t.jsx("img",{src:"/images/member_tab/hostel/hostel-unit-icon.svg",alt:"completed"}),t.jsx("p",{children:r("hostel_unit")})]})}),t.jsx(x,{carryParentState:e,activeTab:"hostelites",children:t.jsxs("div",{className:l.itemIcon,children:[t.jsx("img",{src:"/images/member_tab/hostel/hostel-hostelite-icon.svg",alt:"completed"}),t.jsx("p",{children:r("total_hostelites")})]})}),t.jsx(x,{carryParentState:e,activeTab:"request",children:t.jsxs("div",{className:l.itemIcon,children:[t.jsx("img",{src:"/images/member_tab/hostel/hostel-renewal-icon.svg",alt:"inquery"}),t.jsx("p",{children:r("admission_renewal")})]})}),t.jsx(x,{carryParentState:e,activeTab:"pending",children:t.jsxs("div",{className:l.itemIcon,children:[t.jsx("img",{src:"/images/member_tab/finance/finance-pending-icon.svg",alt:"completed"}),t.jsx("p",{children:r("pending_fees")})]})}),t.jsx(x,{carryParentState:e,activeTab:"form",children:t.jsxs("div",{className:l.itemIcon,children:[t.jsx("img",{src:"/images/member_tab/hostel/hostel-form-icon.svg",alt:"inquery"}),t.jsx("p",{children:r("hostel_admission_form_details")})]})}),t.jsx(x,{carryParentState:e,activeTab:"export",children:t.jsxs("div",{className:l.itemIcon,children:[t.jsx("img",{src:"/images/member_tab/finance/finance-export-icon.svg",alt:"refund"}),t.jsx("p",{children:r("data_exporting")})]})}),t.jsx(x,{carryParentState:e,activeTab:"moderator",children:t.jsxs("div",{className:l.itemIcon,children:[t.jsx("img",{src:"/images/member_tab/admission/admission-moderator-icon.svg",alt:"moderator icon"}),t.jsx("p",{children:r("hostel_moderator")})]})}),t.jsx(x,{carryParentState:e,activeTab:"batch",children:t.jsxs("div",{className:l.itemIcon,children:[t.jsx("img",{src:"/images/member_tab/hostel/hostel-batch-icon.svg",alt:"completed"}),t.jsx("p",{children:r("hostel_tab_batch")})]})})]})]})},ze=ue.lazy(()=>fe(()=>import("./HostelActivateModal-b52a5e21.js"),["assets/HostelActivateModal-b52a5e21.js","assets/index-731451a5.js","assets/index-4d24e8f6.css","assets/FinanceModal.module-0f0ee470.js","assets/FinanceModal-75f00b2e.css","assets/AssignStaffModal-61be8e90.js","assets/search-api-15f7f9f9.js","assets/AssignStaffModal.module-a60b32e1.js","assets/AssignStaffModal-60e26c07.css","assets/hostel-api-4d11cb04.js","assets/Divider-6278282f.js"])),We=({hostel:e,onRefetch:s})=>{var j,g,f;const{t:m}=w(),[i,c]=ue.useState(!1),r=he(),n=()=>{c(u=>!u)};return t.jsxs("div",{style:{position:"sticky",top:"77px",height:"fit-content",width:"30%"},children:[t.jsx(be,{whichType:"PREVIOUS_GO"}),t.jsx(ve,{dynamicImage:e!=null&&e.hostel_photo?`${Ie}/${e==null?void 0:e.hostel_photo}`:"/images/profileAndCover/hostel-cover.svg",edit:!0,onEditAction:n,redirectUrl:`/q/${r.username}/hostel?a=site`,isSiteInfo:"HOSTEL",carryParentState:{hid:e==null?void 0:e._id}}),t.jsx(R,{cardAsHead:!0,heading:` ${((j=e==null?void 0:e.hostel_manager)==null?void 0:j.staffFirstName)??""} ${((g=e==null?void 0:e.hostel_manager)==null?void 0:g.staffMiddleName)??""} ${((f=e==null?void 0:e.hostel_manager)==null?void 0:f.staffLastName)??""}`,description:m("hostel_manager"),customStyleCard:{borderRadius:"18px 18px 0px 0px",border:"none",marginTop:"-1.49vw"}}),t.jsx(R,{cardAsHead:!1,heading:m("hostel_beds"),description:m("hostel_beds_label"),count:(e==null?void 0:e.bed_count)??0}),t.jsx(R,{cardAsHead:!1,heading:m("hostel_rooms"),description:m("hostel_rooms_label"),count:(e==null?void 0:e.room_count)??0,customStyleCard:{borderRadius:"0 0 12px 12px",borderBottom:"0.4px solid rgba(0, 0, 0, 0.15)"}}),t.jsx(Ce,{children:t.jsx(ze,{hostelModal:i,hideModal:n,edit:!0,hostelManagerName:e==null?void 0:e.hostel_manager,onParentRefetch:s})})]})},ui=()=>{var r,n,j,g,f,u,_,v,b,N,a,I,T,S,d,h,y,H,O,M,B,V,k,L,$,q,F,G,J,Q,z,W,K,X,Y,Z,D,P,ee,te,ie,se,ne,oe,ae,re,de,ce,me;const[e]=pe(),s=Ne(),m=Te(E=>E.idChange.id),{hostelDetail:i,hostelDetailRefetch:c}=Ee({data:{hid:(r=s.state)==null?void 0:r.hid,mod_id:""},skip:!((n=s.state)!=null&&n.hid)});return p.useEffect(()=>{var E;(E=s.state)!=null&&E.hid&&c()},[(j=s.state)==null?void 0:j.hid,c]),t.jsxs("div",{className:C.bgContainer,children:[t.jsx("div",{className:C.navbar,children:t.jsx(Se,{status:"home"})}),((g=s.search)==null?void 0:g.substring(3))==="site"?t.jsx(Ue,{hid:(f=s.state)==null?void 0:f.hid,viewAs:"INSTITUTE"}):t.jsx("div",{className:C.editContainer,children:t.jsxs("div",{className:l.main,children:[t.jsx(We,{hostel:i==null?void 0:i.one_hostel,onRefetch:c}),t.jsxs("div",{className:!(e!=null&&e.get("a"))||(e==null?void 0:e.get("a"))==="fund"||(e==null?void 0:e.get("a"))==="fee"?l.finance_container:l.finance_container_other,children:[(!(e!=null&&e.get("a"))||(e==null?void 0:e.get("a"))==="fund"||(e==null?void 0:e.get("a"))==="fee")&&t.jsx(Qe,{carryParentState:s.state,onlineFee:(u=i==null?void 0:i.one_hostel)==null?void 0:u.onlineFee,offlineFee:(_=i==null?void 0:i.one_hostel)==null?void 0:_.offlineFee,exemptAmount:(v=i==null?void 0:i.one_hostel)==null?void 0:v.exemptAmount,remainingFeeCount:(b=i==null?void 0:i.one_hostel)==null?void 0:b.remainingFeeCount}),(e==null?void 0:e.get("a"))==="warden"&&t.jsx("div",{className:o.institute_hostel_container_border,children:t.jsx(Ae,{hid:(N=s.state)==null?void 0:N.hid})}),(e==null?void 0:e.get("a"))==="unit"&&(["info","hostelites","menu","room"].includes(e==null?void 0:e.get("n"))?t.jsx(we,{carryParentState:s.state,pageOpenAs:"INSTITUTE"}):t.jsx("div",{className:o.institute_hostel_container_border,children:t.jsx(Fe,{hid:(a=s.state)==null?void 0:a.hid,carryParentState:s.state,instituteId:(T=(I=i==null?void 0:i.one_hostel)==null?void 0:I.institute)==null?void 0:T._id,pageOpenAs:"INSTITUTE"})})),(e==null?void 0:e.get("a"))==="room"&&t.jsx(Re,{carryParentState:s.state,viewAs:"INSTITUTE"}),(e==null?void 0:e.get("a"))==="notice"&&t.jsx("div",{className:o.institute_hostel_container_border,children:t.jsx(qe,{hid:(S=s.state)==null?void 0:S.hid,carryParentState:s.state})}),(e==null?void 0:e.get("a"))==="hostelites"&&t.jsx("div",{className:o.institute_hostel_container_border,children:t.jsx(Ge,{hid:(d=s.state)==null?void 0:d.hid,instituteId:m})}),(e==null?void 0:e.get("a"))==="request"&&t.jsx("div",{className:o.institute_hostel_container_border,children:t.jsx(He,{hid:(h=s.state)==null?void 0:h.hid,carryParentState:s.state,pageOpenAs:"INSTITUTE",instituteId:m})}),(e==null?void 0:e.get("a"))==="pending"&&t.jsx("div",{className:o.institute_hostel_container_border,children:t.jsx(Oe,{hid:(y=s.state)==null?void 0:y.hid,id:m})}),(e==null?void 0:e.get("a"))==="form"&&t.jsx("div",{className:o.institute_hostel_container_border,children:t.jsx(Me,{hostelId:(H=i==null?void 0:i.one_hostel)==null?void 0:H._id})}),(e==null?void 0:e.get("a"))==="export"&&t.jsx("div",{className:o.institute_hostel_container_border,children:t.jsx(Be,{hostelId:(O=i==null?void 0:i.one_hostel)==null?void 0:O._id,instituteId:(k=(V=(B=(M=i==null?void 0:i.one_hostel)==null?void 0:M.institute)==null?void 0:B.financeDepart)==null?void 0:V[0])==null?void 0:k._id})}),(e==null?void 0:e.get("a"))==="moderator"&&t.jsx("div",{className:o.institute_hostel_container_border,children:t.jsx(Ve,{hid:(L=i==null?void 0:i.one_hostel)==null?void 0:L._id,instituteId:(q=($=i==null?void 0:i.one_hostel)==null?void 0:$.institute)==null?void 0:q._id})}),(e==null?void 0:e.get("a"))==="batch"&&t.jsx("div",{className:o.institute_hostel_container_border,children:t.jsx(ke,{hid:(F=i==null?void 0:i.one_hostel)==null?void 0:F._id,selectedBacthId:(G=i==null?void 0:i.one_hostel)==null?void 0:G.departmentSelectBatch,onMasterApiRefetch:c,carryParentState:s.state,pageOpenAs:"INSTITUTE",instituteId:(W=(z=(Q=(J=i==null?void 0:i.one_hostel)==null?void 0:J.institute)==null?void 0:Q.financeDepart)==null?void 0:z[0])==null?void 0:W._id})}),(e==null?void 0:e.get("a"))==="standard"&&t.jsx("div",{className:o.institute_hostel_container_border,children:t.jsx(Le,{hid:(K=i==null?void 0:i.one_hostel)==null?void 0:K._id,carryParentState:s.state,pageOpenAs:"INSTITUTE"})}),(e==null?void 0:e.get("a"))==="fee"&&t.jsx("div",{style:{marginTop:"1rem"},children:t.jsx($e,{financeId:(D=(Z=(Y=(X=i==null?void 0:i.one_hostel)==null?void 0:X.institute)==null?void 0:Y.financeDepart)==null?void 0:Z[0])==null?void 0:D._id,fees_category_count:(ie=(te=(ee=(P=i==null?void 0:i.one_hostel)==null?void 0:P.institute)==null?void 0:ee.financeDepart)==null?void 0:te[0])==null?void 0:ie.fees_category_count,fee_master_array_count:(ae=(oe=(ne=(se=i==null?void 0:i.one_hostel)==null?void 0:se.institute)==null?void 0:ne.financeDepart)==null?void 0:oe[0])==null?void 0:ae.fee_master_array_count,fee_structure_count:(re=i==null?void 0:i.one_hostel)==null?void 0:re.fees_structures_count,carryParentState:s.state,hostelId:(de=i==null?void 0:i.one_hostel)==null?void 0:de._id,instituteId:(me=(ce=i==null?void 0:i.one_hostel)==null?void 0:ce.institute)==null?void 0:me._id,pageOpenAs:"INSTITUTE"})})]})]})})]})};export{ui as default};
