import{u as H,g as L,R as F,k as E,j as n,bS as R,n as J,r as w,L as k,e as M,A as W}from"./index-0ca76035.js";import{C as K,a as X,M as Y,R as ee,N as ne,S as ae,A as ie}from"./NeedHelp-0b224024.js";import{f as Z}from"./index-c08ef366.js";import{d as ce,e as oe,f as se}from"./post-api-b04eb54b.js";import{G as p}from"./constant_value-4cd2b3e0.js";const re="_eachpost_1opyz_1",te="_eachposthead_1opyz_16",le="_imgcontainer_1opyz_24",me="_iimg_1opyz_41",he="_eachpostUserName_1opyz_47",de="_eachpostUserTime_1opyz_57",_e="_bars_1opyz_79",ue="_postText_1opyz_85",je="_text_1opyz_91",xe="_textDes_1opyz_100",qe="_hashtag_1opyz_103",ge="_postImg_1opyz_109",ve="_index_1opyz_116",Ce="_menu_1opyz_129",Ie="_videoContainer_1opyz_137",Ne="_comment_1opyz_140",fe="_showMore_1opyz_146",ke="_barContainer_1opyz_194",ye="_barContainer2_1opyz_195",$e="_barContainerVote_1opyz_212",Be="_bar_1opyz_79",Ue="_reactions_1opyz_276",be="_reactionsleft_1opyz_285",Pe="_viewComments_1opyz_291",Se="_reactionsright_1opyz_307",ze="_commentCount_1opyz_338",Te="_pollQuestion_1opyz_349",l={eachpost:re,public:"_public_1opyz_12",eachposthead:te,imgcontainer:le,iimg:me,eachpostUserName:he,eachpostUserTime:de,bars:_e,postText:ue,text:je,textDes:xe,hashtag:qe,postImg:ge,index:ve,menu:Ce,videoContainer:Ie,comment:Ne,showMore:fe,barContainer:ke,barContainer2:ye,barContainerVote:$e,bar:Be,reactions:Ue,reactionsleft:be,viewComments:Pe,reactionsright:Se,commentCount:ze,pollQuestion:Te},Ae="_viewComments_qxy03_1",Oe="_questionBottom_qxy03_16",we="_questionBottomBorder_qxy03_21",Re="_pollVote_qxy03_37",He="_questionBottomIcon_qxy03_42",Ve="_questionBottomIconOne_qxy03_50",De="_answerIcon_qxy03_64",v={viewComments:Ae,questionBottom:Oe,questionBottomBorder:we,pollVote:Re,questionBottomIcon:He,questionBottomIconOne:Ve,answerIcon:De};const Fe="_likke_14dw5_1",Me="_likeImage_14dw5_7",Qe="_bookmarkImage_14dw5_11",Q={likke:Fe,likeImage:Me,bookmarkImage:Qe},Le=({parentStyle:e,endUserLike:m,pid:j,type:h})=>{const{t:d}=H(),_=L(),[o,u]=F.useState(!0),s=E(q=>q.idChange),[x,r]=F.useState(m==null?void 0:m.some(q=>q===(s==null?void 0:s.id))),{postLikeRefetch:C}=ce({data:{pid:j,viewAs:p},skip:o}),I=()=>{_(R.addLike({pid:j,id:s==null?void 0:s.id})),r(!0),u(!1),C()},N=()=>{_(R.removeLike({pid:j,id:s==null?void 0:s.id})),r(!1),u(!1),C()};return n.jsx(n.Fragment,{children:x?n.jsxs("div",{className:e,onClick:N,children:[n.jsx("img",{src:h!=="Poll"?"/images/unlike-icon.svg":"/images/poll-recommended.svg",alt:"unlike",className:Q.likeImage}),n.jsx("p",{children:d(h!=="Poll"?"like":"recommend")})]}):n.jsxs("div",{className:e,onClick:I,children:[n.jsx("img",{src:h!=="Poll"?"/images/like-icon.svg":"/images/poll-recommend.svg",alt:"like",className:Q.likeImage}),n.jsx("p",{children:d(h!=="Poll"?"like":"recommend")})]})})},Ee=({endUserSave:e,pid:m,parentStyle:j})=>{const[h,d]=F.useState(!0),{t:_}=H(),o=E(N=>N.idChange),u=L(),[s,x]=F.useState(e==null?void 0:e.some(N=>N===(o==null?void 0:o.id))),{postSaveRefetch:r}=oe({data:{pid:m,viewAs:p},skip:h}),C=()=>{u(R.addSave({pid:m,id:o==null?void 0:o.id})),d(!1),x(!0),r()},I=()=>{u(R.removeSave({pid:m,id:o==null?void 0:o.id})),d(!1),x(!1),r()};return n.jsx(n.Fragment,{children:s?n.jsxs("div",{className:j,onClick:I,children:[n.jsx("img",{src:"/images/unbookmark-icon.svg",alt:"",className:Q.bookmarkImage}),n.jsx("p",{children:_("save")})]}):n.jsxs("div",{className:j,onClick:C,children:[n.jsx("img",{src:"/images/bookmark-icon.svg",alt:"",className:Q.bookmarkImage}),n.jsx("p",{children:_("save")})]})})};function Ge({likeCount:e,endUserLike:m,endUserSave:j,pid:h,setCommentOpen:d,commentOpen:_,commentCount:o,type:u,total_votes:s}){const x=()=>{d(!_)},{t:r}=H();return n.jsx(n.Fragment,{children:n.jsxs("div",{className:v.questionBottom,children:[u!=="Poll"?n.jsxs("div",{className:v.questionBottomBorder,children:[n.jsxs("p",{className:v.needCount,children:[e," ",r("likes")," "]}),n.jsxs("p",{children:[o," ",r("comments_")," "]})]}):n.jsxs("div",{className:v.questionBottomBorder,children:[n.jsxs("p",{className:v.pollVote,children:[s," ",r("votes")," "]}),n.jsxs("p",{children:[e," ",r("recommend")," | ",o," ",r("comments_")]})]}),n.jsxs("div",{className:v.questionBottomIcon,children:[n.jsx("div",{className:v.questionBottomIconOne,children:n.jsx(Le,{endUserLike:m,pid:h,parentStyle:v.questionBottomIconOne,type:u})}),n.jsxs("div",{className:v.questionBottomIconOne,onClick:x,children:[n.jsx("img",{src:"/images/comment-icon.svg",alt:""}),n.jsx("p",{children:r("comment")})]}),n.jsx("div",{className:v.questionBottomIconOne,children:n.jsx(Ee,{endUserSave:j,pid:h,parentStyle:v.questionBottomIconOne})})]})]})})}function fn({post:e,profilePost:m,allPosts:j,selectOptions:h,dotsClicked:d,setDotsClicked:_,closeMenu:o,viewAs:u}){var t,f,B,T,A,U;const s=J(),[x,r]=w.useState(!1),[C,I]=w.useState(!1),{t:N}=H(),[q,g]=w.useState(!1),i=E(a=>a.idChange),z=L(),[G]=se(),b=a=>{var y,$;a&&!(($=(y=e==null?void 0:e.poll_query)==null?void 0:y.answeredUser)!=null&&$.includes(i==null?void 0:i.id))&&(z(R.pollVote({pid:e==null?void 0:e._id,aid:a,id:i==null?void 0:i.id})),G({pid:e==null?void 0:e._id,vote:{answerId:a}}).then(S=>{}).catch({}))},V=a=>{(a==null?void 0:a.status)==="Report"&&(g(a==null?void 0:a.data),I(!0))},P=(a,y)=>{z(W.searchId({id:a,type:"ID",searchAs:y}))};return n.jsxs("div",{className:l.eachpost,children:[n.jsxs("div",{className:l.eachposthead,children:[n.jsx("div",{className:l.imgcontainer,children:(e==null?void 0:e.author)===(i==null?void 0:i.id)?n.jsx(k,{to:`/q/${e==null?void 0:e.authorUserName}/profile`,children:n.jsx("img",{alt:"not found",src:e.authorPhotoId!=="1"?`${M}/${e.authorProfilePhoto}`:"/images/ins_default_profile.svg",className:e.authorPhotoId!=="1"?"":l.iimg})}):n.jsx(k,{to:`/q/${e==null?void 0:e.authorUserName}/profile`,onClick:()=>P(e==null?void 0:e.author,(e==null?void 0:e.isInstitute)||(e==null?void 0:e.isUser)),children:n.jsx("img",{alt:"not found",src:e.authorPhotoId!=="1"?`${M}/${e.authorProfilePhoto}`:"/images/ins_default_profile.svg",className:e.authorPhotoId!=="1"?"":l.iimg})})}),n.jsxs("div",{className:l.eachpostUserName,children:[(e==null?void 0:e.author)===(i==null?void 0:i.id)?n.jsx(k,{to:`/q/${e.authorUserName}/profile`,children:n.jsx("h6",{children:e.authorUserName})}):n.jsx(k,{to:`/q/${e==null?void 0:e.authorUserName}/profile`,onClick:()=>P(e==null?void 0:e.author,(e==null?void 0:e.isInstitute)||(e==null?void 0:e.isUser)),children:n.jsx("h6",{children:e.authorUserName})}),n.jsx("div",{className:l.eachpostUserTime,style:{display:"flex",gap:"0.5vw",alignItems:"center"},children:n.jsx("p",{children:Z(e==null?void 0:e.createdAt)})})]})]}),n.jsx("p",{className:l.pollQuestion,children:N("poll_question")}),n.jsx("div",{className:l.postText,children:n.jsx("p",{className:l.text,children:(B=(f=(t=e==null?void 0:e.poll_query)==null?void 0:t.poll_question)==null?void 0:f.split(" "))==null?void 0:B.map((a,y)=>{var $,S,O;return a.startsWith("#",0)?n.jsx(k,{to:`/q/${s==null?void 0:s.username}/hashtag/${a.slice(1,a.length)}`,onClick:()=>P(a.slice(1,a.length)),style:{color:"#436DFA"},state:{hid:(O=(S=($=e==null?void 0:e.hash_tag)==null?void 0:$.filter(D=>(D==null?void 0:D.hashtag_name)===a?D:""))==null?void 0:S[0])==null?void 0:O._id},children:` ${a} `},y):n.jsx("span",{children:` ${a} `},y)})})}),n.jsx("div",{className:l.bars,children:(A=(T=e==null?void 0:e.poll_query)==null?void 0:T.poll_answer)==null?void 0:A.map((a,y)=>{var $,S,O;return n.jsxs("div",{className:($=a==null?void 0:a.users)!=null&&$.includes(i==null?void 0:i.id)?`${l.barContainerVote} ${l.barContainer}`:l.barContainer,onClick:()=>b(a==null?void 0:a._id),children:[n.jsx("h6",{children:a==null?void 0:a.content}),n.jsxs("p",{children:[(S=a==null?void 0:a.percent_vote)==null?void 0:S.toFixed(0),"%"]}),n.jsx("div",{className:l.bar,style:{width:`${a==null?void 0:a.percent_vote}%`,backgroundColor:(O=a==null?void 0:a.users)!=null&&O.includes(i==null?void 0:i.id)?"rgba(75, 26, 133, 0.1)":"#F2F2F2"}})]},y)})}),n.jsx(Ge,{likeCount:e==null?void 0:e.likeCount,endUserLike:e==null?void 0:e.endUserLike,endUserSave:e==null?void 0:e.endUserSave,pid:e==null?void 0:e._id,setCommentOpen:r,commentOpen:x,commentCount:e==null?void 0:e.commentCount,type:"Poll",total_votes:(U=e==null?void 0:e.poll_query)==null?void 0:U.total_votes}),n.jsx(K,{pid:e==null?void 0:e._id,commentCount:e==null?void 0:e.commentCount,setCommentOpen:r,commentOpen:x,type:"not repost"}),u==="HASHTAG"?"":n.jsx("img",{src:"/images/menu-dots-icon.svg",alt:"",className:l.menu,onClick:()=>_(!d)}),d&&n.jsx(X,{closeMenu:o,children:n.jsx(Y,{setDotsClicked:_,options:h,switchOption:V,pid:e==null?void 0:e._id,authorId:e==null?void 0:e.author,profilePost:m,status:e==null?void 0:e.postStatus,closeMenu:o,allPosts:j,popup:!1,postType:e==null?void 0:e.postType,reportType:(e==null?void 0:e.isInstitute)||(e==null?void 0:e.isUser)})}),C&&n.jsx(ee,{report:C,hideModal:a=>I(a),id:i==null?void 0:i.id,reportId:q})]})}const We="_eachpost_ojqq7_1",Je="_viewComments_ojqq7_14",Ke="_eachposthead_ojqq7_28",Xe="_imgcontainer_ojqq7_37",Ye="_iimg_ojqq7_54",Ze="_eachpostUserName_ojqq7_60",pe="_eachpostUserTime_ojqq7_68",en="_postText_ojqq7_91",nn="_text_ojqq7_97",an="_textDes_ojqq7_110",cn="_hashtag_ojqq7_113",on="_postImg_ojqq7_119",sn="_index_ojqq7_126",rn="_hr_ojqq7_139",tn="_menu_ojqq7_143",ln="_videoContainer_ojqq7_151",mn="_comment_ojqq7_154",hn="_showMore_ojqq7_160",dn="_questionBottom_ojqq7_205",_n="_questionBottomBorder_ojqq7_210",un="_needCount_ojqq7_226",jn="_questionBottomIcon_ojqq7_230",xn="_questionBottomIconOne_ojqq7_238",qn="_answerIcon_ojqq7_252",c={eachpost:We,public:"_public_ojqq7_10",viewComments:Je,eachposthead:Ke,imgcontainer:Xe,iimg:Ye,eachpostUserName:Ze,eachpostUserTime:pe,postText:en,text:nn,textDes:an,hashtag:cn,postImg:on,index:sn,hr:rn,menu:tn,videoContainer:ln,comment:mn,showMore:hn,questionBottom:dn,questionBottomBorder:_n,needCount:un,questionBottomIcon:jn,questionBottomIconOne:xn,answerIcon:qn};function kn({post:e,profilePost:m,allPosts:j,selectOptions:h,switchOption:d,dotsClicked:_,setDotsClicked:o,closeMenu:u,viewAs:s}){var V,P;const[x,r]=w.useState(!1),[C,I]=w.useState(!1),N=L(),{t:q}=H(),g=E(t=>t.idChange),i=J(),z=t=>{var f;I(!1),N(W.openQuestionWithAnswer({repost:"repost",post:e._id,type:"question",otherOption:{profilePost:m,selectOptions:h,directAnswer:t},search:((f=g==null?void 0:g.searchProfile)==null?void 0:f.id)!==""?"search":"not search"})),r(B=>!B)},G=()=>{I(t=>!t),r(!1)},b=(t,f)=>{N(W.searchId({id:t,type:"ID",searchAs:f}))};return n.jsxs("div",{className:c.eachpost,children:[n.jsxs("div",{className:c.eachposthead,children:[n.jsx("div",{className:c.imgcontainer,children:(e==null?void 0:e.author)===(g==null?void 0:g.id)?n.jsx(k,{to:`/q/${e==null?void 0:e.authorUserName}/profile`,onClick:b,children:n.jsx("img",{alt:"not found",src:e.authorPhotoId!=="1"?`${M}/${e.authorProfilePhoto}`:"/images/ins_default_profile.svg",className:e.authorPhotoId!=="1"?"":c.iimg})}):n.jsx(k,{to:`/q/${e==null?void 0:e.authorUserName}/profile`,onClick:()=>b(e==null?void 0:e.author,(e==null?void 0:e.isInstitute)||(e==null?void 0:e.isUser)),children:n.jsx("img",{alt:"not found",src:e.authorPhotoId!=="1"?`${M}/${e.authorProfilePhoto}`:"/images/ins_default_profile.svg",className:e.authorPhotoId!=="1"?"":c.iimg})})}),n.jsxs("div",{className:c.eachpostUserName,children:[(e==null?void 0:e.author)===(g==null?void 0:g.id)?n.jsx(k,{to:`/q/${e.authorUserName}/profile`,children:n.jsx("h6",{children:e.authorUserName})}):n.jsx(k,{to:`/q/${e==null?void 0:e.authorUserName}/profile`,onClick:()=>b(e==null?void 0:e.author,(e==null?void 0:e.isInstitute)||(e==null?void 0:e.isUser)),children:n.jsx("h6",{children:e.authorUserName})}),n.jsx("div",{className:c.eachpostUserTime,style:{display:"flex",gap:"0.5vw",alignItems:"center"},children:n.jsx("p",{children:Z(e==null?void 0:e.createdAt)})})]})]}),n.jsx("div",{className:c.postText,children:n.jsx("p",{className:c.text,"data-toggle":"tooltip","data-placement":"top",title:"See All Answers...",children:(P=(V=e==null?void 0:e.postQuestion)==null?void 0:V.split(" "))==null?void 0:P.map((t,f)=>{var B,T,A;return t.startsWith("#",0)?n.jsx(k,{to:`/q/${i==null?void 0:i.username}/hashtag/${t.slice(1,t.length)}`,onClick:()=>b(t.slice(1,t.length)),style:{color:"#436DFA"},state:{hid:(A=(T=(B=e==null?void 0:e.hash_tag)==null?void 0:B.filter(U=>(U==null?void 0:U.hashtag_name)===t?U:""))==null?void 0:T[0])==null?void 0:A._id},children:` ${t} `},f):n.jsx("span",{onClick:()=>z(!1),children:` ${t} `},f)})})}),n.jsxs("div",{className:c.questionBottom,children:[n.jsxs("div",{className:c.questionBottomBorder,children:[n.jsxs("p",{className:c.needCount,children:[e==null?void 0:e.needCount," ",q("needs_help")," "]}),n.jsxs("p",{children:[e==null?void 0:e.commentCount," ",q("comments")," | ",e==null?void 0:e.answerCount," ",q("Answers")]})]}),n.jsxs("div",{className:c.questionBottomIcon,children:[n.jsx("div",{className:c.questionBottomIconOne,children:n.jsx(ne,{answerIcon:c.answerIcon,needCount:e==null?void 0:e.needCount,needUser:e==null?void 0:e.needUser,pid:e==null?void 0:e._id,parentStyle:c.questionBottomIconOne})}),n.jsxs("div",{className:c.questionBottomIconOne,onClick:G,children:[n.jsx("img",{src:"/images/comment-icon.svg",alt:""}),n.jsx("p",{children:q("comment")})]}),n.jsxs("div",{className:c.questionBottomIconOne,onClick:()=>z(!0),children:[n.jsx("img",{src:"/images/repeat.svg",alt:""}),n.jsx("p",{children:q("answer")})]}),n.jsx("div",{className:c.questionBottomIconOne,children:n.jsx(ae,{endUserSave:e==null?void 0:e.endUserSave,pid:e==null?void 0:e._id,status:"yes",parentStyle:c.questionBottomIconOne})})]})]}),C&&n.jsx(K,{pid:e==null?void 0:e._id,commentCount:e==null?void 0:e.commentCount,setCommentOpen:I,commentOpen:C,type:"not repost"}),x&&n.jsx("div",{className:c.comment,children:n.jsx(ie,{pid:e==null?void 0:e._id,setViewIns:r,answerPostType:"notRepost"})}),s==="HASHTAG"?"":n.jsx("img",{src:"/images/menu-dots-icon.svg",alt:"",className:c.menu,onClick:()=>o(!_)}),_&&n.jsx(X,{closeMenu:u,children:n.jsx(Y,{setDotsClicked:o,options:h,switchOption:d,pid:e==null?void 0:e._id,authorId:e==null?void 0:e.author,profilePost:m,status:e==null?void 0:e.postStatus,closeMenu:u,allPosts:j,popup:!1,postType:e==null?void 0:e.postType,reportType:(e==null?void 0:e.isInstitute)||(e==null?void 0:e.isUser)})})]})}export{kn as E,Ge as R,Ee as S,fn as a};
