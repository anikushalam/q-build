import{u as g,r as t,k as y,w as E,l as M,j as r,L as v}from"./index-731451a5.js";import{S as C}from"./SearchModalBackdrop-5b309d60.js";import{S as b,a as L}from"./SearchCardWrapper-a1cd80c4.js";import{s as l}from"./SearchStyle.module-ded1a888.js";import{M as N,U as Q}from"./MentorList-b2d47150.js";import{u as R}from"./search-api-15f7f9f9.js";import"./SearchHeader.module-b69c8942.js";const I=({onCloseSearch:n})=>{var d,i,p;const{t:h}=g(),[x,j]=t.useState(!0),[c,m]=t.useState(""),s=y(e=>e.idChange),{userAllSearch:o,userAllSearchRefetch:S}=R({skip:x,search:{search:c,page:1,id:s==null?void 0:s.id,limit:6,filter:"all"}}),{data:a,refetch:u}=E(s==null?void 0:s.id,{skip:!(s!=null&&s.id)});t.useEffect(()=>{s.id&&u()},[s==null?void 0:s.id,u]),t.useEffect(()=>{c&&_()},[c]);const _=()=>{j(!1),S()},k=t.useCallback(M.debounce(e=>m(e),500),[]),U=e=>{k(e)};return r.jsxs(r.Fragment,{children:[r.jsx(C,{onClose:n}),r.jsxs(b,{children:[r.jsx(L,{setSearchQuery:U,username:(d=a==null?void 0:a.user)==null?void 0:d.username,onClose:n,searchQuery:c}),r.jsx("hr",{className:l.search_hr}),r.jsxs("div",{className:l.search_result_container,children:[r.jsxs("div",{className:l.search_result_container_heading,children:[r.jsx("p",{children:h("search_result")}),r.jsx(v,{to:`/q/${(i=a==null?void 0:a.user)==null?void 0:i.username}/search`,state:{search:c},onClick:n,children:r.jsx("p",{children:h("view_all")})})]}),(p=o==null?void 0:o.universalArrayUser)==null?void 0:p.map((e,f)=>e!=null&&e.hashtag_name?"":e!=null&&e.user?r.jsx(N,{staff:e},f):r.jsx(Q,{item:e,hideModal:n,userId:s==null?void 0:s.id},f))]})]})]})};export{I as default};
