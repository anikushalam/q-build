"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[92667],{63775:(e,l,i)=>{i.r(l),i.d(l,{default:()=>M});var n=i(39230),o=i(16871),t=i(63687),a=i(21348),d=i(90904),v=i(56959),s=i(36132),c=i(43504),r=i(72791),u=i(38668),m=i(20659),f=i(2350),h=i(80184);const _=e=>{var l,i;let{leaveTypeToggle:t}=e;const{t:a}=(0,n.$G)(),d=(0,o.TH)(),v=(0,o.UO)(),_=(0,o.s0)(),[x]=(0,c.lr)(),[g,y]=(0,r.useState)(u.bA),{lmsStaffLeaveOverviewCount:j}=(0,s.fn)({data:{sid:null===(l=d.state)||void 0===l?void 0:l.staffId},skip:!(null!==(i=d.state)&&void 0!==i&&i.staffId)});(0,r.useEffect)((()=>{if(null!==j&&void 0!==j&&j.staff){let e=null===j||void 0===j?void 0:j.staff,l=u.bA;l[1].count=null===e||void 0===e?void 0:e.casual_leave,l[2].count=null===e||void 0===e?void 0:e.medical_leave,l[3].count=null===e||void 0===e?void 0:e.sick_leave,l[4].count=null===e||void 0===e?void 0:e.c_off_leave,l[5].count=null===e||void 0===e?void 0:e.off_duty_leave,l[6].count=null===e||void 0===e?void 0:e.lwp_leave,l[7].count=null===e||void 0===e?void 0:e.commuted_leave,l[8].count=null===e||void 0===e?void 0:e.maternity_leave,l[9].count=null===e||void 0===e?void 0:e.paternity_leave,l[10].count=null===e||void 0===e?void 0:e.quarantine_leave,l[11].count=null===e||void 0===e?void 0:e.half_pay_leave,l[12].count=null===e||void 0===e?void 0:e.study_leave,l[13].count=null===e||void 0===e?void 0:e.sabbatical_leave,l[14].count=null===e||void 0===e?void 0:e.special_disability_leave,l[15].count=null===e||void 0===e?void 0:e.winter_vacation_leave,l[16].count=null===e||void 0===e?void 0:e.summer_vacation_leave,l[17].count=null===e||void 0===e?void 0:e.child_adoption_leave,l[18].count=null===e||void 0===e?void 0:e.bereavement_leave,y(l)}}),[null===j||void 0===j?void 0:j.staff]);const p=e=>{var l,i;let n="Institute"===(null===(l=d.state)||void 0===l?void 0:l.urlOffSet)?"/q/".concat(v.username,"/institute/member/lms/?type=staff-overview&category=").concat(e):"Staff"===(null===(i=d.state)||void 0===i?void 0:i.urlOffSet)?"/q/".concat(v.username,"/member?a=leave&n=overview&category=").concat(e):"/q/".concat(v.username,"/member/staff/lms/?type=staff-overview&category=").concat(e);_(n,{state:d.state})};return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(m.Z,{customTileContainer:{flexWrap:"wrap",marginBottom:"1rem"},children:null===g||void 0===g?void 0:g.map((e=>"All Leave"===e.key?(0,h.jsx)(f.Z,{tile:e,onTile:p,customTileChild:{height:"2.5rem"},activeTile:x.get("category"),children:(0,h.jsx)("h6",{children:a(null===e||void 0===e?void 0:e.name)})}):t[null===e||void 0===e?void 0:e.isActive]&&(0,h.jsxs)(f.Z,{tile:e,onTile:p,customTileChild:"All Leave"===e.key?{height:"2.5rem"}:{flexDirection:"All Leave"===e.key?"row":"column",alignItems:"flex-start"},activeTile:x.get("category"),children:[(0,h.jsx)("h6",{children:a(null===e||void 0===e?void 0:e.name)}),(null===e||void 0===e?void 0:e.count)>=0?(0,h.jsxs)("p",{children:[a("available")," ",": "," ",null===e||void 0===e?void 0:e.count," "]}):null]})))})})},x=(0,r.memo)(_);var g=i(23441),y=i(91427),j=i(1669),p=i(2651),b=i(98684),w=i(97892),N=i.n(w),T=i(82824),k=i(1095),Z=i(55050);const L=e=>{var l,i,o,t,a,d,v,s,c,r,u,m,f,_,x,g,y,j,p,w,L,Y,M,S,D,F,C,q,A,I,O,W,E,J,G,H,$,U,B,z;let{leave:K}=e;const{t:P}=(0,n.$G)();return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:Z.Z.lmsr_card,children:[(0,h.jsx)("div",{className:Z.Z.lmsrc_card,children:(0,h.jsxs)("div",{className:Z.Z.lmsrc_card_inner,children:[(0,h.jsx)("img",{src:"".concat(b.D3,"/leave-raise.svg"),alt:"leave icon"}),(0,h.jsxs)("div",{className:Z.Z.lmsrci_text,children:[(0,h.jsxs)("h6",{style:{fontWeight:"400"},children:[P("leave_type")," "," : ",null===K||void 0===K?void 0:K.leave_type]}),(0,h.jsxs)("p",{children:[P("raised_on")," ",(0,T.J)(null===K||void 0===K?void 0:K.createdAt,"LT"),","," ",N()(null===K||void 0===K?void 0:K.createdAt).format("DD MMM YYYY")]}),(0,h.jsxs)("p",{children:[P("for_dates")," "," : ",null===K||void 0===K||null===(l=K.date)||void 0===l?void 0:l.map((e=>(0,h.jsxs)("span",{children:[e,", "," "]},e)))]})]})]})}),null!==K&&void 0!==K&&null!==(i=K.recommend)&&void 0!==i&&null!==(o=i.recommend_by)&&void 0!==o&&o.staffFirstName?(0,h.jsx)("div",{className:Z.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,h.jsxs)("p",{children:[P("recomend_on")," ",(0,T.J)(null===K||void 0===K||null===(t=K.recommend)||void 0===t?void 0:t.recommend_on,"LT"),","," ",N()(null===K||void 0===K||null===(a=K.recommend)||void 0===a?void 0:a.recommend_on).format("DD MMM YYYY"),", ",P("recomending_by"),"".concat(null!==(d=null===K||void 0===K||null===(v=K.recommend)||void 0===v||null===(s=v.recommend_by)||void 0===s?void 0:s.staffFirstName)&&void 0!==d?d:""," ").concat(null!==(c=null===K||void 0===K||null===(r=K.recommend)||void 0===r||null===(u=r.recommend_by)||void 0===u?void 0:u.staffMiddleName)&&void 0!==c?c:""," ").concat(null!==(m=null===K||void 0===K||null===(f=K.recommend)||void 0===f||null===(_=f.recommend_by)||void 0===_?void 0:_.staffLastName)&&void 0!==m?m:"")]})}):null,null!==K&&void 0!==K&&null!==(x=K.review)&&void 0!==x&&null!==(g=x.review_by)&&void 0!==g&&g.staffFirstName?(0,h.jsx)("div",{className:Z.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,h.jsxs)("p",{children:[P("reviewed_on")," ",(0,T.J)(null===K||void 0===K||null===(y=K.review)||void 0===y?void 0:y.review_on,"LT"),","," ",N()(null===K||void 0===K||null===(j=K.review)||void 0===j?void 0:j.review_on).format("DD MMM YYYY"),", ",P("reviewing_by"),"".concat(null!==(p=null===K||void 0===K||null===(w=K.review)||void 0===w||null===(L=w.review_by)||void 0===L?void 0:L.staffFirstName)&&void 0!==p?p:""," ").concat(null!==(Y=null===K||void 0===K||null===(M=K.review)||void 0===M||null===(S=M.review_by)||void 0===S?void 0:S.staffMiddleName)&&void 0!==Y?Y:""," ").concat(null!==(D=null===K||void 0===K||null===(F=K.review)||void 0===F||null===(C=F.review_by)||void 0===C?void 0:C.staffLastName)&&void 0!==D?D:"")]})}):null,null!==K&&void 0!==K&&null!==(q=K.sanction)&&void 0!==q&&null!==(A=q.sanction_by)&&void 0!==A&&A.staffFirstName?(0,h.jsx)("div",{className:Z.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,h.jsxs)("p",{children:[P("sanction_on")," ",(0,T.J)(null===K||void 0===K||null===(I=K.sanction)||void 0===I?void 0:I.sanction_on,"LT"),","," ",N()(null===K||void 0===K||null===(O=K.sanction)||void 0===O?void 0:O.sanction_on).format("DD MMM YYYY"),", ",P("sanctioning_by"),"".concat(null!==(W=null===K||void 0===K||null===(E=K.sanction)||void 0===E||null===(J=E.sanction_by)||void 0===J?void 0:J.staffFirstName)&&void 0!==W?W:""," ").concat(null!==(G=null===K||void 0===K||null===(H=K.sanction)||void 0===H||null===($=H.sanction_by)||void 0===$?void 0:$.staffMiddleName)&&void 0!==G?G:""," ").concat(null!==(U=null===K||void 0===K||null===(B=K.sanction)||void 0===B||null===(z=B.sanction_by)||void 0===z?void 0:z.staffLastName)&&void 0!==U?U:"")]})}):null,(0,h.jsx)("div",{className:Z.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,h.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[P("reason")," "," : ",null===K||void 0===K?void 0:K.reason]})}),(null===K||void 0===K?void 0:K.attach)&&(0,h.jsx)("div",{className:Z.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,h.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[P("attachment")," "," : ",(0,h.jsx)("a",{href:"".concat(k.q2,"/").concat(null===K||void 0===K?void 0:K.attach),target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,h.jsx)("span",{className:Z.Z.lmsrc_date,children:P("view_attachment")})})]})})]})})},Y=()=>{var e,l,i,n;const t=(0,o.TH)(),[a]=(0,c.lr)(),[d,v]=(0,r.useState)(1),[u,m]=(0,r.useState)(!0),[f,_]=(0,g.YD)(),{lmsStaffLeaveOverviewList:x,lmsStaffLeaveOverviewListLoading:b}=(0,s.xC)({data:{sid:null===(e=t.state)||void 0===e?void 0:e.staffId,page:d,limit:10,category:"All Leave"===a.get("category")?"":a.get("category")},skip:!(null!==(l=t.state)&&void 0!==l&&l.staffId)});return(0,r.useEffect)((()=>{_&&u&&v((e=>e+1))}),[_,u]),(0,r.useEffect)((()=>{var e;if(null!==x&&void 0!==x&&null!==(e=x.list)&&void 0!==e&&e.length){var l;let e=(0,y.f)(null===x||void 0===x||null===(l=x.list)||void 0===l?void 0:l.length);m((()=>e))}}),[null===x||void 0===x?void 0:x.list]),(0,r.useEffect)((()=>{a.get("category")&&v((e=>1))}),[a.get("category")]),(0,h.jsxs)(h.Fragment,{children:[null===x||void 0===x||null===(i=x.list)||void 0===i?void 0:i.map(((e,l)=>{var i;return(null===x||void 0===x||null===(i=x.list)||void 0===i?void 0:i.length)===l+1?(0,h.jsx)("div",{ref:f,children:(0,h.jsx)(L,{leave:e})},null===e||void 0===e?void 0:e._id):(0,h.jsx)(L,{leave:e},null===e||void 0===e?void 0:e._id)})),b?(0,h.jsx)(j.Z,{}):0===(null===x||void 0===x||null===(n=x.list)||void 0===n?void 0:n.length)&&(0,h.jsx)(p.Z,{title:"No ".concat(a.get("category")," taken.")})]})},M=e=>{var l,i,c,u,m,f,_,g;let{isStaff:y,leaveTypeToggle:j}=e;const{t:p}=(0,n.$G)(),w=(0,o.TH)(),N=(0,o.UO)(),T=(0,o.s0)(),{lmsStaffLeaveOverviewCount:k}=(0,s.fn)({data:{sid:null===(l=w.state)||void 0===l?void 0:l.staffId},skip:!(null!==(i=w.state)&&void 0!==i&&i.staffId)}),Z=(0,r.useCallback)((()=>{var e;let l="Institute"===(null===(e=w.state)||void 0===e?void 0:e.urlOffSet)?"/q/".concat(N.username,"/institute/member/lms"):"/q/".concat(N.username,"/member/staff/lms");T(l,{state:w.state})}),[T,w.state,N.username]);return(0,h.jsx)(h.Fragment,{children:y?(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(a.default,{children:[(0,h.jsx)(x,{leaveTypeToggle:j}),(0,h.jsx)(Y,{})]})}):(0,h.jsxs)(t.default,{children:[(0,h.jsx)(a.default,{children:(0,h.jsxs)("div",{className:v.Z.fm_header_container,children:[(0,h.jsxs)("div",{className:v.Z.fm_header_start_container,children:[(0,h.jsx)("img",{alt:"search icon",src:"".concat(b.Fk,"/back.svg"),style:{height:"2rem",width:"2rem"},onClick:Z}),(0,h.jsxs)("h6",{children:[(0,h.jsx)("span",{style:{fontWeight:"400"},children:p("name")}),": ",null!==(c=null===w||void 0===w||null===(u=w.state)||void 0===u?void 0:u.staffName)&&void 0!==c?c:""]})]}),(0,h.jsxs)("div",{className:v.Z.fm_header_container,style:{gap:"1rem"},children:[(0,h.jsxs)("h6",{children:[(0,h.jsx)("span",{style:{fontWeight:"400"},children:p("total_leave_available")}),": ",null!==(m=null===k||void 0===k||null===(f=k.overview)||void 0===f?void 0:f.total_leave_available)&&void 0!==m?m:0]}),(0,h.jsxs)("h6",{children:[(0,h.jsx)("span",{style:{fontWeight:"400"},children:p("total_leave_taken")}),": ",null!==(_=null===k||void 0===k||null===(g=k.overview)||void 0===g?void 0:g.total_leave_taken)&&void 0!==_?_:0]})]})]})}),(0,h.jsx)(d.Z,{}),(0,h.jsxs)(a.default,{children:[(0,h.jsx)(x,{leaveTypeToggle:j}),(0,h.jsx)(Y,{})]})]})})}}}]);
//# sourceMappingURL=92667.01ed9871.chunk.js.map