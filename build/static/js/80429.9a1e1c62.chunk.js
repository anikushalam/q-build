"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[80429],{38986:(e,l,t)=>{t.d(l,{Z:()=>d});var n=t(72791),i=t(52245),o=t(39230),s=t(1095),a=t(80184);const d=e=>{let{label:l,name:t,value:d,onChange:r,errorShow:c,disabled:u,customFormFileContainer:v,customFormFileLabel:_,customFormFile:m,type:h,multiple:f}=e;const{t:p}=(0,o.$G)(),x=(0,n.useCallback)((()=>{const e=window.open("".concat(s.yI,"/").concat(null===d||void 0===d?void 0:d.key),"_blank","noopener,noreferrer");e&&(e.opener=null)}),[null===d||void 0===d?void 0:d.key]);return(0,a.jsxs)("div",{className:i.Z.form_input_container,style:{...v},children:[l&&(0,a.jsxs)("label",{className:i.Z.form_input_label,style:_,children:[l,c?(0,a.jsxs)("span",{className:i.Z.form_input_label_error,children:["* ",p("form_require_label")]}):null]}),(0,a.jsxs)("div",{className:i.Z.form_file_container,style:m,children:[(0,a.jsx)("label",{className:d?"".concat(i.Z.form_file_choose," ").concat(i.Z.form_file_choose_active):i.Z.form_file_choose,htmlFor:t,children:p(""!==d?"file_choosen":"choose_file")}),(0,a.jsx)("label",{className:i.Z.form_file_choosen,onClick:x,children:""!==d?null!==d&&void 0!==d&&d.name?null===d||void 0===d?void 0:d.name:p("view"):p("no_file_chosen")})]}),(0,a.jsx)("input",{type:"file",multiple:!!f,accept:h||"image/*, .doc,.docx, application/pdf,.csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",name:t,id:t,style:{display:"none"},onChange:r,disabled:u})]})}},11468:(e,l,t)=>{t.d(l,{Z:()=>a});var n=t(39230),i=t(52245),o=t(80184);const s=e=>{var l;return e?(null===e||void 0===e||null===(l=e.split("\n"))||void 0===l?void 0:l.length)+3:2},a=e=>{let{label:l,name:t,type:a,value:d,onChange:r,placeholder:c,errorShow:u,disabled:v,customFormInputContainer:_,customFormInputLabel:m,customFormInput:h}=e;const{t:f}=(0,n.$G)();return(0,o.jsxs)("div",{className:i.Z.form_input_container,style:_,children:[l&&(0,o.jsxs)("label",{className:i.Z.form_input_label,htmlFor:t,style:m,children:[l,u&&(0,o.jsxs)("span",{className:i.Z.form_input_label_error,children:["* ",f("form_require_label")]})]}),(0,o.jsx)("textarea",{className:i.Z.form_textarea_input,type:a,value:d,onChange:r,name:t,placeholder:c,rows:s(d),disabled:v,style:h?{...h,"--textarea-height":"".concat(20*s(d),"px")}:{"--textarea-height":"".concat(20*s(d),"px")}})]})}},17502:(e,l,t)=>{t.d(l,{Z:()=>c});var n=t(6758),i=t(72791),o=t(39230),s=t(52245),a=t(98684),d=t(80184);const r=e=>{let{selectLabel:l,onClick:t,selectedValue:n,options:r,customStyleContainer:c,customLabelStyle:u,customListStyle:v,errorShow:_,defalutValue:m,viewAs:h,isFull:f}=e;const{t:p}=(0,o.$G)(),[x,j]=(0,i.useState)(!1),[g,y]=(0,i.useState)(""),b=()=>{j((e=>!e))};(0,i.useEffect)((()=>{"NORMAL_FILTER"===h&&y(m)}),[h,m]),(0,i.useEffect)((()=>{if("CUSTOM_FILTER"===h){let n="";for(let i of r)for(let o of m)if((null===i||void 0===i?void 0:i._id)===o){var e,l,t;let o=null!==(e=null!==(l=null!==(t=null===i||void 0===i?void 0:i.dName)&&void 0!==t?t:null===i||void 0===i?void 0:i.batchName)&&void 0!==l?l:null===i||void 0===i?void 0:i.className)&&void 0!==e?e:"";n=n?n+", "+o:o}y(n)}}),[h,m,r]);return(0,d.jsxs)("div",{className:s.Z.form_input_container,style:{...c},children:[(0,d.jsxs)("p",{className:s.Z.join_form_select_paragraph,style:{...u},children:[l,_&&(0,d.jsxs)("span",{style:{color:"red",marginLeft:"15px"},children:["* ",p("form_require_label")]})]}),(0,d.jsxs)("section",{className:s.Z.join_form_select_custom,onClick:b,children:[g?(0,d.jsx)("p",{className:s.Z.join_form_select_custom_paragraph,children:null!==g&&void 0!==g?g:""}):(0,d.jsx)("p",{className:s.Z.join_form_select_custom_paragraph,children:n}),x?(0,d.jsx)("img",{className:s.Z.join_form_select_custom_rotate_icon,src:"".concat(a.J7,"/down.svg"),alt:"categor icon"}):(0,d.jsx)("img",{className:s.Z.join_form_select_custom_icon,src:"".concat(a.J7,"/down.svg"),alt:"categor icon"})]}),x&&(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("section",{className:s.Z.join_form_select_custom_list,style:v,children:null===r||void 0===r?void 0:r.map(((e,l)=>{var n;return(0,d.jsx)("p",{onClick:()=>(e=>{var l;t(f?e:null===e||void 0===e?void 0:e._id),b(),y(null!==(l=null===e||void 0===e?void 0:e.finance_bank_account_name)&&void 0!==l?l:e)})(e),className:s.Z.join_form_select_custom_paragraph_option,children:null!==(n=null===e||void 0===e?void 0:e.finance_bank_account_name)&&void 0!==n?n:e},l)}))})})]})},c=e=>{var l;let{fid:t,onSelect:i,errorShow:s,viewAs:a,defalutValue:c,customStyleContainer:u,customListStyle:v}=e;const{t:_}=(0,o.$G)(),{financeAllBank:m}=(0,n.iB)({data:{fid:t,page:1,limit:1e3,search:""},skip:!t});return(0,d.jsx)(r,{selectLabel:_("bank_account"),selectedValue:_("bank_account_placeholder"),options:(null===m||void 0===m||null===(l=m.list)||void 0===l?void 0:l.length)>0?[...null===m||void 0===m?void 0:m.list]:[],onClick:i,isFull:!0,errorShow:s,defalutValue:c,viewAs:a,customStyleContainer:u,customListStyle:v})}},96898:(e,l,t)=>{t.d(l,{Z:()=>a});var n=t(4007),i=t(98684),o=t(39230),s=t(80184);const a=e=>{var l,t,a,d,r,c;let{structure:u,selectedStructure:v,onSelect:_,isShow:m,customContainerStyle:h}=e;const{t:f}=(0,o.$G)();return(0,s.jsx)(s.Fragment,{children:"YES"===m?(0,s.jsxs)("div",{className:n.Z.fees_card,style:h,children:[(0,s.jsx)("img",{src:"".concat(i.J7,"/category.svg"),alt:"categor icon"}),(0,s.jsxs)("div",{className:n.Z.fees_card_text,children:[(0,s.jsx)("div",{className:n.Z.fees_card_text_bottom,children:(0,s.jsx)("h6",{children:null!==(l=null===u||void 0===u?void 0:u.unique_structure_name)&&void 0!==l?l:""})}),(0,s.jsxs)("div",{className:n.Z.fees_card_text_bottom,children:[(0,s.jsxs)("h6",{children:[f("applicable_fees_only")," ",f("rs_only"),null!==(t=null===u||void 0===u?void 0:u.applicable_fees)&&void 0!==t?t:0]}),(0,s.jsxs)("h6",{children:[f("total_admission_fees")," "," : "," ",f("rs_only"),null!==(a=null===u||void 0===u?void 0:u.total_admission_fees)&&void 0!==a?a:0]})]})]})]}):(0,s.jsxs)("div",{className:v===(null===u||void 0===u?void 0:u._id)?"".concat(n.Z.fees_card," ").concat(n.Z.fees_card_hover_active):"".concat(n.Z.fees_card," ").concat(n.Z.fees_card_hover),onClick:()=>{_(u)},style:{cursor:"pointer"},children:[(0,s.jsx)("img",{src:"".concat(i.J7,"/category.svg"),alt:"categor icon"}),(0,s.jsxs)("div",{className:n.Z.fees_card_text,children:[(0,s.jsx)("div",{className:n.Z.fees_card_text_bottom,children:(0,s.jsx)("h6",{children:null!==(d=null===u||void 0===u?void 0:u.unique_structure_name)&&void 0!==d?d:""})}),(0,s.jsxs)("div",{className:n.Z.fees_card_text_bottom,children:[(0,s.jsxs)("h6",{children:[f("applicable_fees_only")," ",f("rs_only"),null!==(r=null===u||void 0===u?void 0:u.applicable_fees)&&void 0!==r?r:0]}),(0,s.jsxs)("h6",{children:[f("total_admission_fees")," "," : "," ",f("rs_only"),null!==(c=null===u||void 0===u?void 0:u.total_admission_fees)&&void 0!==c?c:0]})]})]})]})})}},91241:(e,l,t)=>{t.r(l),t.d(l,{default:()=>fe});var n=t(39230),i=t(56959),o=t(63687),s=t(21348),a=t(90904),d=t(98684),r=t(16871),c=t(43504),u=t(72791),v=t(98967),_=t(63162),m=t(23441),h=t(6758),f=t(91427),p=t(93638),x=t(2651),j=t(55336),g=t(1669),y=t(38857),b=t(4007),Z=t(61055),S=t(17502),N=t(66659),C=t(43172),F=t(97800),k=t(99183),O=t(57588),I=t(96898),E=t(80184);const A=e=>{var l,t,i,o,r,c,v;let{fid:_,onClose:Z,selectedStructure:S,onSelectedStrucutre:N,title:C,oneStep:F}=e;const{t:k}=(0,n.$G)(),[A,w]=(0,u.useState)(""),[T,L]=(0,u.useState)(1),[R,P]=(0,u.useState)(!0),[G,Y]=(0,m.YD)({skip:A}),[q,D]=(0,u.useState)(""),{financeAllNotFilterFeeStructure:M,financeAllNotFilterFeeStructureLoading:B}=(0,h.Xt)({data:{fid:_,page:T,limit:10,search:A},skip:!_});(0,u.useEffect)((()=>{Y&&R&&L((e=>e+1))}),[Y,R]),(0,u.useEffect)((()=>{var e;if(null!==M&&void 0!==M&&null!==(e=M.list)&&void 0!==e&&e.length){var l;let e=(0,f.f)(null===M||void 0===M||null===(l=M.list)||void 0===l?void 0:l.length);P((()=>e))}}),[null===M||void 0===M||null===(l=M.list)||void 0===l?void 0:l.length]);const H=(0,u.useCallback)((0,O.J)((e=>{L((()=>1)),w(e)}),500),[]),J=e=>{F&&N(e),D(e)};return(0,E.jsx)(E.Fragment,{children:q?(0,E.jsx)(y.Z,{onClose:Z,children:(0,E.jsxs)("div",{className:b.Z.modal_container,children:[(0,E.jsx)(s.default,{children:(0,E.jsxs)("div",{className:b.Z.modal_container_outer_header,children:[(0,E.jsx)("div",{className:b.Z.modal_container_header,children:(0,E.jsx)("h6",{children:k("fee_structure")})}),(0,E.jsx)("img",{src:"".concat(d.J7,"/close.svg"),alt:"close icon",onClick:()=>J("")})]})}),(0,E.jsx)(a.Z,{}),(0,E.jsxs)(s.default,{customStyle:{paddingTop:"0.3rem"},children:[(0,E.jsxs)("div",{className:b.Z.fee_middle_section,children:[(0,E.jsx)("p",{children:k("fee_structure_of_student_is")}),(0,E.jsx)("h6",{children:null===q||void 0===q||null===(r=q.category_master)||void 0===r?void 0:r.category_name}),(0,E.jsxs)("p",{children:[" ",k("total_admission_fees")," "," : "," ",k("rs")," ",(0,E.jsx)("span",{style:{fontWeight:"600"},children:null!==(c=null===q||void 0===q?void 0:q.total_admission_fees)&&void 0!==c?c:0})]}),(0,E.jsxs)("p",{children:[k("applicable_fees_amount")," "," : "," ",k("rs")," ",(0,E.jsx)("span",{style:{fontWeight:"600"},children:null!==(v=null===q||void 0===q?void 0:q.applicable_fees)&&void 0!==v?v:0})]})]}),(0,E.jsx)(p.Z,{label:"confirm",onAction:()=>N(q)})]})]})}):(0,E.jsx)(y.Z,{onClose:Z,children:(0,E.jsxs)("div",{className:b.Z.modal_container,style:{maxWidth:"40rem"},children:[(0,E.jsx)(s.default,{children:(0,E.jsxs)("div",{className:b.Z.modal_container_outer_header,children:[(0,E.jsx)("div",{className:b.Z.modal_container_header,children:(0,E.jsx)("h6",{children:k(null!==C&&void 0!==C?C:"edit_fees_structure")})}),(0,E.jsx)("img",{src:"".concat(d.J7,"/close.svg"),alt:"close icon",onClick:Z})]})}),(0,E.jsx)(a.Z,{}),(0,E.jsxs)(s.default,{customStyle:{paddingTop:"0.3rem"},children:[(0,E.jsxs)("div",{className:b.Z.fm_search_full_container_inner,style:{marginBottom:"0.6rem"},children:[(0,E.jsx)("input",{type:"text",placeholder:k("search"),className:b.Z.fm_search_full_container_inner,onChange:e=>{e.target.value?H(e.target.value):(L((()=>1)),w(""))}}),(0,E.jsx)("img",{src:"".concat(d.dB,"/navbar-search.svg"),alt:"search icon",className:b.Z.fm_search_full_icon})]}),null===M||void 0===M||null===(t=M.list)||void 0===t?void 0:t.map(((e,l)=>{var t;return(null===M||void 0===M||null===(t=M.list)||void 0===t?void 0:t.length)===l+1?(0,E.jsx)("div",{ref:G,children:(0,E.jsx)(I.Z,{structure:e,selectedStructure:S,onSelect:J})},null===e||void 0===e?void 0:e._id):(0,E.jsx)(I.Z,{structure:e,selectedStructure:S,onSelect:J},null===e||void 0===e?void 0:e._id)})),B?A?(0,E.jsx)(j.default,{}):(0,E.jsx)(g.Z,{}):A?0===(null===M||void 0===M||null===(i=M.list)||void 0===i?void 0:i.length)&&(0,E.jsx)(x.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No fee structure found related this search."}):0===(null===M||void 0===M||null===(o=M.list)||void 0===o?void 0:o.length)&&(0,E.jsx)(x.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No fee structure added."})]})]})})})};var w=t(16925),T=t(60924),L=t(43997),R=t(50518),P=t(60307),G=t(71439),Y=t(64499),q=t(85794),D=t(97892),M=t.n(D);const B=e=>{var l,t,i,o,c,v,_;let{onClose:m,applicant:h,financeId:f,isOtherFees:x,onGrabCollectFees:g,instituteId:b,ofid:S}=e;const{t:N}=(0,n.$G)(),[C,F]=(0,u.useState)(!1),O=(0,r.UO)(),[I,A]=(0,u.useState)({amount:"",mode:"",fee_payment_mode:"",fee_payment_amount:"",transaction_date:M()().format("DD/MM/YYYY"),fee_bank_name:"",fee_bank_holder:"",fee_utr_reference:""}),[D,B]=(0,u.useState)(""),[H,J]=(0,u.useState)({open:!1,msg:"",variant:"error"}),[$,U]=(0,u.useState)({amount:0,type:"Other",isTransaction:!1}),{studentInstituteCharges:V}=(0,P.xY)({data:{id:b},skip:!b});(0,u.useEffect)((()=>{var e,l,t;if("OTHER_FEES"===x)A((e=>{var l,t,n,i;return{...e,amount:+(null===h||void 0===h||null===(l=h.heads)||void 0===l||null===(t=l[0])||void 0===t?void 0:t.head_amount),fee_payment_amount:+(null===h||void 0===h||null===(n=h.heads)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.head_amount)}})),U({amount:null!==(e=+(null===h||void 0===h||null===(l=h.heads)||void 0===l||null===(t=l[0])||void 0===t?void 0:t.head_amount))&&void 0!==e?e:0,type:"Other",isTransaction:!1});else if("SUBJECT_OTHER_FEES"===x){var n,i,o;if(null!==h&&void 0!==h&&null!==(n=h.struct)&&void 0!==n&&n.applicable_fees)A((e=>{var l,t;return{...e,amount:+(null===h||void 0===h||null===(l=h.struct)||void 0===l?void 0:l.applicable_fees),fee_payment_amount:+(null===h||void 0===h||null===(t=h.struct)||void 0===t?void 0:t.applicable_fees)}})),U({amount:null!==(i=+(null===h||void 0===h||null===(o=h.struct)||void 0===o?void 0:o.applicable_fees))&&void 0!==i?i:0,type:"Other",isTransaction:!1})}}),[x,null===h||void 0===h?void 0:h.heads,null===h||void 0===h||null===(l=h.struct)||void 0===l?void 0:l.applicable_fees]);const W=e=>{A((l=>({...l,[e.target.name]:e.target.value})))};return(0,E.jsxs)(E.Fragment,{children:[$.isTransaction?(0,E.jsx)(G.Z,{onClose:m,allContent:{...$,platform_charges:null===V||void 0===V||null===(t=V.platform_charges)||void 0===t?void 0:t.percentage},checkoutAdmissionHandler:()=>{var e,l,t,n,i,o,s,a,d,r,c,u,v;let _=2.1*+(null===$||void 0===$?void 0:$.amount)/100,m=_+18*+_/100;const f=parseInt(null===$||void 0===$?void 0:$.amount);var p=Math.ceil(f+ +m.toFixed(2));(0,Y.oU)({amount:null!==(e=+(null===I||void 0===I?void 0:I.amount))&&void 0!==e?e:10,amount_nocharges:null!==(l=+p)&&void 0!==l?l:0,type:"Other",paidBy:null===h||void 0===h||null===(t=h.students)||void 0===t||null===(n=t[0])||void 0===n?void 0:n._id,paidTo:b,moduleId:null!==S&&void 0!==S?S:null,ad_status_id:null,payment_installment:null,ad_install:null,month:null,payment_remain_1:null,payment_card_type:null,payment_book_id:null,name:O.username,isApk:"web",payment_card_id:null,payment_remain_fees:null,charge:{num_platform_percent:null!==(i=null===V||void 0===V||null===(o=V.platform_charges)||void 0===o?void 0:o.percentage)&&void 0!==i?i:0,num_platform_max:null!==(s=null===V||void 0===V||null===(a=V.platform_charges)||void 0===a?void 0:a.maximum)&&void 0!==s?s:0,num_trans_pecent:null!==(d=null===V||void 0===V||null===(r=V.transaction_charges)||void 0===r?void 0:r.percentage)&&void 0!==d?d:0,num_trans_max:null!==(c=null===V||void 0===V||null===(u=V.transaction_charges)||void 0===u?void 0:u.maximum)&&void 0!==c?c:0,num_app_max:null!==(v=null===V||void 0===V?void 0:V.application_charges)&&void 0!==v?v:0},nsid:null}).then((e=>{var l,t;window.onScriptLoad(null===e||void 0===e||null===(l=e.response)||void 0===l||null===(t=l.body)||void 0===t?void 0:t.txnToken,null===e||void 0===e?void 0:e.order,null===e||void 0===e?void 0:e.amount)})).catch((e=>{console.info(e)}))},isOptimzed:!0}):(0,E.jsx)(y.Z,{onClose:m,children:(0,E.jsxs)("div",{className:w.Z.modal_container,children:[(0,E.jsx)(s.default,{children:(0,E.jsxs)("div",{className:w.Z.modal_container_outer_header,children:[(0,E.jsx)("div",{className:w.Z.modal_container_header,children:(0,E.jsx)("h6",{children:N("collect_fees")})}),(0,E.jsx)("img",{src:"".concat(d.J7,"/close.svg"),alt:"close icon",onClick:m})]})}),(0,E.jsx)(a.Z,{}),(0,E.jsxs)(s.default,{customStyle:{paddingTop:"0"},children:["OTHER_FEES"===x?(0,E.jsxs)("div",{className:w.Z.admission_fees_row,children:[(0,E.jsxs)("h6",{children:[N("applicable_amount")," :"]}),(0,E.jsxs)("h6",{children:[N("rs_only")," ",null!==(i=null===h||void 0===h||null===(o=h.heads)||void 0===o||null===(c=o[0])||void 0===c?void 0:c.head_amount)&&void 0!==i?i:0]})]}):(0,E.jsxs)("div",{className:w.Z.admission_fees_row,children:[(0,E.jsxs)("h6",{children:[N("applicable_amount")," :"]}),(0,E.jsxs)("h6",{children:[N("rs_only")," ",null!==(v=null===h||void 0===h||null===(_=h.struct)||void 0===_?void 0:_.applicable_fees)&&void 0!==v?v:0]})]}),(0,E.jsx)(Z.Z,{label:N("amount"),placeholder:N("amoute_details_collect"),name:"amount",value:I.amount,type:"tel",onChange:e=>{A((l=>({...l,amount:+e.target.value,fee_payment_amount:+e.target.value}))),U((l=>({...l,amount:+e.target.value})))},errorShow:D.amount,msg:D.rest_issue}),(0,E.jsx)(R.Z,{paymentHeading:N("payment_type_mode"),selectLabel:N("mode_placeholder"),onClick:e=>{A((l=>({...l,mode:"Online",fee_payment_mode:e})))},errorShow:D.fee_payment_mode,defalutValue:I.fee_payment_mode,selectedValue:N("please_select_payment_mode"),isAuthority:"admissionCollectModePg",customLabelStyle:{marginTop:"0"}}),"Payment Gateway"===I.fee_payment_mode?(0,E.jsx)(p.Z,{label:"collect",onAction:()=>{let e=(0,k.l)({amount:$.amount});var l,t;(0,k.x)(e)?null!==V&&void 0!==V&&V.institute?b&&null!==h&&void 0!==h&&null!==(l=h.students)&&void 0!==l&&null!==(t=l[0])&&void 0!==t&&t._id&&f&&S&&U((e=>({...e,isTransaction:!0}))):J({open:!0,msg:"Online Payment Not Activated",variant:"error"}):B(e)}}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(T.Z,{label:N("select_date_of_transaction"),placeholder:N("please_select_date"),name:"transaction_date",value:I.transaction_date,onChange:e=>{A((l=>({...l,transaction_date:(0,L.jh)(e)})))},errorShow:D.transaction_date}),"Cash"===I.fee_payment_mode?null:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(Z.Z,{label:N("bank_name_collect"),placeholder:N("please_enter_bank_name"),name:"fee_bank_name",value:I.fee_bank_name,type:"text",onChange:W}),(0,E.jsx)(Z.Z,{label:N("banke_holder_name"),placeholder:N("please_enter_name_of_bank_holder"),name:"fee_bank_holder",value:I.fee_bank_holder,type:"text",onChange:W}),(0,E.jsx)(Z.Z,{label:N("cheque_dd_neft"),placeholder:N("please_enter_utr_ref_number"),name:"fee_utr_reference",value:I.fee_utr_reference,type:"text",onChange:W})]}),(0,E.jsx)(p.Z,{label:"collect",onAction:()=>{let e=(0,k.l)(I,["mode","fee_payment_amount","fee_bank_name","fee_bank_holder","fee_utr_reference"]);var l,t,n,i,o,s,a,d,r,c,u,v,_,h;(0,k.x)(e)?"OTHER_FEES"===x?(g({amount:null!==(l=null===I||void 0===I?void 0:I.amount)&&void 0!==l?l:0,mode:"Cash"===(null===I||void 0===I?void 0:I.fee_payment_mode)?"Offline":null!==(t=null===I||void 0===I?void 0:I.mode)&&void 0!==t?t:"",fee_payment_mode:"Cash"===(null===I||void 0===I?void 0:I.fee_payment_mode)?"By Cash":null===I||void 0===I?void 0:I.fee_payment_mode,fee_payment_amount:null!==(n=null===I||void 0===I?void 0:I.fee_payment_amount)&&void 0!==n?n:0,transaction_date:null!==(i=(0,L._1)(I.transaction_date))&&void 0!==i?i:"",fee_bank_name:null!==(o=null===I||void 0===I?void 0:I.fee_bank_name)&&void 0!==o?o:"",fee_bank_holder:null!==(s=null===I||void 0===I?void 0:I.fee_bank_holder)&&void 0!==s?s:"",fee_utr_reference:null!==(a=null===I||void 0===I?void 0:I.fee_utr_reference)&&void 0!==a?a:""}),m()):(g({amount:null!==(d=null===I||void 0===I?void 0:I.amount)&&void 0!==d?d:0,mode:"Cash"===(null===I||void 0===I?void 0:I.fee_payment_mode)?"Offline":null!==(r=null===I||void 0===I?void 0:I.mode)&&void 0!==r?r:"",fee_payment_mode:"Cash"===(null===I||void 0===I?void 0:I.fee_payment_mode)?"By Cash":null===I||void 0===I?void 0:I.fee_payment_mode,fee_payment_amount:null!==(c=null===I||void 0===I?void 0:I.fee_payment_amount)&&void 0!==c?c:0,transaction_date:null!==(u=(0,L._1)(I.transaction_date))&&void 0!==u?u:"",fee_bank_name:null!==(v=null===I||void 0===I?void 0:I.fee_bank_name)&&void 0!==v?v:"",fee_bank_holder:null!==(_=null===I||void 0===I?void 0:I.fee_bank_holder)&&void 0!==_?_:"",fee_utr_reference:null!==(h=null===I||void 0===I?void 0:I.fee_utr_reference)&&void 0!==h?h:""}),m()):B(e)}})]})]})]})}),C&&(0,E.jsx)(j.default,{}),(0,E.jsx)(q.Z,{eventState:H,eventStateHandler:J})]})};var H=t(52245);const J=e=>{let{selectLabel:l,onClick:t,selectedValue:i,options:o,customStyleContainer:s,customLabelStyle:a,customListStyle:r,errorShow:c,defalutValue:v,isFull:_,isDenied:m,isFilter:h,filterId:f}=e;const{t:p}=(0,n.$G)(),[x,j]=(0,u.useState)(!1),[g,y]=(0,u.useState)(""),b=()=>{m||j((e=>!e))};(0,u.useEffect)((()=>{y(v)}),[v]);const Z=e=>{var l,n;t(_?e:null===e||void 0===e?void 0:e._id),b(),y("".concat(null!==(l=null===e||void 0===e?void 0:e.master_name)&&void 0!==l?l:""," - \n    ").concat(null!==(n=null===e||void 0===e?void 0:e.master_amount)&&void 0!==n?n:0))};return(0,E.jsxs)("div",{className:H.Z.form_input_container,style:{...s},children:[(0,E.jsxs)("p",{className:H.Z.join_form_select_paragraph,style:{...a},children:[l,c&&(0,E.jsxs)("span",{style:{color:"red",marginLeft:"15px"},children:["* ",p("form_require_label")]})]}),(0,E.jsxs)("section",{className:H.Z.join_form_select_custom,onClick:b,children:[g?(0,E.jsx)("p",{className:H.Z.join_form_select_custom_paragraph,children:null!==g&&void 0!==g?g:""}):(0,E.jsx)("p",{className:H.Z.join_form_select_custom_paragraph,children:i}),x?(0,E.jsx)("img",{className:H.Z.join_form_select_custom_rotate_icon,src:"".concat(d.J7,"/down.svg"),alt:"categor icon"}):(0,E.jsx)("img",{className:H.Z.join_form_select_custom_icon,src:"".concat(d.J7,"/down.svg"),alt:"categor icon"})]}),x&&(0,E.jsx)(E.Fragment,{children:(0,E.jsx)("section",{className:H.Z.join_form_select_custom_list,style:r,children:h?(0,E.jsx)(E.Fragment,{children:null===o||void 0===o?void 0:o.map(((e,l)=>{var t,n;return null!==f&&void 0!==f&&f.includes(null===e||void 0===e?void 0:e._id)?(0,E.jsxs)("p",{onClick:()=>Z(e),className:H.Z.join_form_select_custom_paragraph_option,children:[null!==(t=null===e||void 0===e?void 0:e.master_name)&&void 0!==t?t:""," "," - ",null!==(n=null===e||void 0===e?void 0:e.master_amount)&&void 0!==n?n:0]},l):null}))}):(0,E.jsx)(E.Fragment,{children:null===o||void 0===o?void 0:o.map(((e,l)=>{var t,n;return(0,E.jsxs)("p",{onClick:()=>Z(e),className:H.Z.join_form_select_custom_paragraph_option,children:[null!==(t=null===e||void 0===e?void 0:e.master_name)&&void 0!==t?t:""," "," - ",null!==(n=null===e||void 0===e?void 0:e.master_amount)&&void 0!==n?n:0]},l)}))})})})]})},$=e=>{var l;let{title:t,fid:i,onSelect:o,errorShow:s,defalutValue:a,isDenied:d,customStyleContainer:r,isFilter:c,filterId:u}=e;const{t:v}=(0,n.$G)(),{financeAllOtherFeeHeadMaster:_,financeAllOtherFeeHeadMasterLoading:m}=(0,h.sx)({data:{fid:i,page:1,limit:1e3,search:""},skip:!i});return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(J,{selectLabel:v(null!==t&&void 0!==t?t:"select_other_fee_master"),selectedValue:v("select_other_fee_master_placeholder"),options:(null===_||void 0===_||null===(l=_.list)||void 0===l?void 0:l.length)>0?null===_||void 0===_?void 0:_.list:[],onClick:o,isFull:!0,errorShow:s,defalutValue:a,isDenied:d,customStyleContainer:r,isFilter:c,filterId:u}),m&&(0,E.jsx)(g.Z,{})]})},U=e=>{var l,t,i,o,r,c,v,_,m,f;let{onClose:x,fid:g,instituteId:O,onRefetch:w,whichOtherFees:T}=e;const{t:L}=(0,n.$G)(),[R,P]=(0,u.useState)(0),[G,Y]=(0,u.useState)(""),[q,D]=(0,u.useState)(!1),[M,H]=(0,u.useState)({students:[],other_fees_name:"",other_fees_type:"",bank_account:"",struct:""}),[J,U]=(0,u.useState)({not_exist:!1,name:""}),[V,W]=(0,u.useState)(0),[K,z]=(0,u.useState)([]),[X,Q]=(0,u.useState)([]),[ee]=(0,h.Lp)(),[le]=(0,h.wF)();(0,u.useEffect)((()=>{T&&H((e=>({...e,other_fees_type:T})))}),[T]),(0,u.useEffect)((()=>{if(K){let l=0;for(let t=0;t<(null===K||void 0===K?void 0:K.length);t++){var e;l+=+(null===(e=K[t])||void 0===e?void 0:e.head_amount)}W(l)}}),[K]);const te=()=>{P(0)},ne=()=>{let e=null;J.not_exist?(e=(0,k.l)({...M,student_name:J.name},["students","struct","other_fees_name"]),(0,k.x)(e)&&(null===K||void 0===K?void 0:K.length)>0?P(4):Y(e)):(e=(0,k.l)(M,["students","struct","other_fees_name"]),(0,k.x)(e)&&(null===K||void 0===K?void 0:K.length)>0?P(4):Y(e))},ie=()=>{let e=null;var l,t;J.not_exist?(e=(0,k.l)({...M,student_name:J.name},["students","bank_account","other_fees_name"]),(0,k.x)(e)&&null!==M&&void 0!==M&&null!==(l=M.struct)&&void 0!==l&&l._id?P(5):Y(e)):(e=(0,k.l)(M,["students","bank_account","other_fees_name"]),(0,k.x)(e)&&null!==M&&void 0!==M&&null!==(t=M.struct)&&void 0!==t&&t._id?P(5):Y(e))};return(0,E.jsx)(E.Fragment,{children:0===R?(0,E.jsx)(y.Z,{onClose:()=>{},children:(0,E.jsxs)("div",{className:b.Z.modal_container,children:[(0,E.jsx)(s.default,{children:(0,E.jsxs)("div",{className:b.Z.modal_container_outer_header,children:[(0,E.jsx)("div",{className:b.Z.modal_container_header,children:(0,E.jsx)("h6",{children:L("Normal Other Fees"===T?"add_normal_other_fees":"Subject Other Fees"===T?"add_subject_other_fees":"EXAM_FEES"===T?"add_exam_other_fees":"add_other_fees")})}),(0,E.jsx)("img",{src:"".concat(d.J7,"/close.svg"),alt:"close icon",onClick:x})]})}),(0,E.jsx)(a.Z,{}),(0,E.jsxs)(s.default,{customStyle:{paddingTop:"0",marginBottom:"1rem"},children:[(0,E.jsx)(Z.Z,{label:L("fees_name"),placeholder:L("fees_name_placeholder"),name:"other_fees_name",value:M.other_fees_name,type:"text",onChange:e=>{H((l=>({...l,[e.target.name]:e.target.value})))},errorShow:G.other_fees_name}),"Subject Other Fees"===T?null:(0,E.jsx)(S.Z,{fid:g,onSelect:e=>{H((l=>({...l,bank_account:e})))},errorShow:G.bank_account,viewAs:"NORMAL_FILTER",defalutValue:null!==(l=null===M||void 0===M||null===(t=M.bank_account)||void 0===t?void 0:t.finance_bank_account_name)&&void 0!==l?l:""}),"Normal Other Fees"===M.other_fees_type||"EXAM_FEES"===M.other_fees_type?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)($,{fid:g,onSelect:e=>{const l={head_name:null===e||void 0===e?void 0:e.master_name,head_amount:null===e||void 0===e?void 0:e.master_amount,master:null===e||void 0===e?void 0:e._id,head_type:"BY_OTHER_FEES"};z([l]),Q([null===e||void 0===e?void 0:e._id])},errorShow:G.bank_account,viewAs:"NORMAL_FILTER",isFilter:(null===M||void 0===M||null===(i=M.bank_account)||void 0===i||null===(o=i.heads_list)||void 0===o?void 0:o.length)>0,filterId:null!==(r=null===M||void 0===M||null===(c=M.bank_account)||void 0===c?void 0:c.heads_list)&&void 0!==r?r:[]}),(0,E.jsx)("div",{style:{paddingInline:"1rem",marginTop:"1rem"},children:(0,E.jsxs)("section",{className:b.Z.table_container,style:{margin:"0"},children:[(0,E.jsxs)("div",{className:b.Z.table_heading,children:[(0,E.jsx)("h6",{children:L("fee_heads")}),(0,E.jsx)("h6",{children:L("amount")})]}),(0,E.jsx)("div",{className:b.Z.table_body,children:null===K||void 0===K?void 0:K.map(((e,l)=>(0,E.jsxs)("div",{className:b.Z.table_body_list,children:[(0,E.jsx)("input",{type:"text",value:null===e||void 0===e?void 0:e.head_name,onChange:e=>((e,l)=>{const t=[...K];for(let n=0;n<(null===t||void 0===t?void 0:t.length);n++)n===l&&(t[n].head_name=e.target.value);z(t)})(e,l),className:b.Z.fee_head_name_input}),(0,E.jsx)("input",{type:"number",value:null===e||void 0===e?void 0:e.head_amount,onChange:e=>((e,l)=>{const t=[...K];for(let n=0;n<(null===t||void 0===t?void 0:t.length);n++)n===l&&(t[n].head_amount=+e.target.value);z(t)})(e,l),className:b.Z.fee_head_amount_input})]},l)))}),(0,E.jsx)("div",{className:b.Z.table_body,children:(0,E.jsxs)("div",{className:b.Z.table_body_list,style:{borderTopColor:"rgba(18, 18, 18, 0.5)",borderTopWidth:"0.5px",borderTopStyle:"solid"},children:[(0,E.jsx)("h6",{className:b.Z.fees_total,children:L("subtotal")}),(0,E.jsx)("h6",{className:b.Z.fees_total,children:V})]})})]})})]}):"Subject Other Fees"===M.other_fees_type?(0,E.jsx)(E.Fragment,{children:M.struct?(0,E.jsx)(I.Z,{structure:M.struct,isShow:"YES",customContainerStyle:{marginTop:"1rem"}}):(0,E.jsx)(N.Z,{label:"select_fee_structure",onAction:()=>P(3)})}):null,"Normal Other Fees"===M.other_fees_type||"EXAM_FEES"===M.other_fees_type?(0,E.jsxs)("div",{style:1===(null===M||void 0===M||null===(v=M.students)||void 0===v?void 0:v.length)?{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"}:{display:"block"},children:[J.not_exist?(0,E.jsx)(p.Z,{label:"collect_fees",onAction:ne}):(0,E.jsx)(p.Z,{label:"request",onAction:()=>{let e=(0,k.l)(M,["students","struct","other_fees_name"]);var l,t;"EXAM_FEES"===T?(0,k.x)(e)&&g&&(null===K||void 0===K?void 0:K.length)>0?(D((e=>!e)),ee({fid:g,bodyParameter:{...M,bank_account:null===M||void 0===M||null===(l=M.bank_account)||void 0===l?void 0:l._id,heads:K,payable_amount:V,struct:null,is_collect:"No"}}).then((()=>{w(),D((e=>!e)),x()})).catch((()=>{D((e=>!e))}))):Y(e):(0,k.x)(e)&&g&&(null===K||void 0===K?void 0:K.length)>0?(D((e=>!e)),ee({fid:g,bodyParameter:{...M,bank_account:null===M||void 0===M||null===(t=M.bank_account)||void 0===t?void 0:t._id,heads:K,payable_amount:V,struct:null,is_collect:"No"}}).then((()=>{w(),D((e=>!e)),x()})).catch((()=>{D((e=>!e))}))):Y(e)}}),1===(null===M||void 0===M||null===(_=M.students)||void 0===_?void 0:_.length)?(0,E.jsx)(p.Z,{label:"collect_fees",onAction:ne}):null]}):"Subject Other Fees"===M.other_fees_type?(0,E.jsxs)("div",{style:1===(null===M||void 0===M||null===(m=M.students)||void 0===m?void 0:m.length)?{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"}:{display:"block"},children:[J.not_exist?(0,E.jsx)(p.Z,{label:"collect_fees",onAction:ie}):(0,E.jsx)(p.Z,{label:"request",onAction:()=>{var e;let l=(0,k.l)(M,["students","bank_account","other_fees_name"]);var t,n;(0,k.x)(l)&&g&&null!==M&&void 0!==M&&null!==(e=M.struct)&&void 0!==e&&e._id?(D((e=>!e)),ee({fid:g,bodyParameter:{...M,bank_account:null,heads:[],payable_amount:null===M||void 0===M||null===(t=M.struct)||void 0===t?void 0:t.applicable_fees,struct:null===M||void 0===M||null===(n=M.struct)||void 0===n?void 0:n._id,is_collect:"No"}}).then((()=>{w(),D((e=>!e)),x()})).catch((()=>{D((e=>!e))}))):Y(l)}}),1===(null===M||void 0===M||null===(f=M.students)||void 0===f?void 0:f.length)?(0,E.jsx)(p.Z,{label:"collect_fees",onAction:ie}):null]}):null]}),q&&(0,E.jsx)(j.default,{})]})}):1===R?(0,E.jsx)(C.Z,{title:L("select_student"),onClose:te,instituteId:O,isMultiSelect:!0,onMultiSelect:e=>{var l;null!==M&&void 0!==M&&null!==(l=M.students)&&void 0!==l&&l.includes(null===e||void 0===e?void 0:e._id)?H((l=>{var t;return{...l,students:null===l||void 0===l||null===(t=l.students)||void 0===t?void 0:t.filter((l=>l!==(null===e||void 0===e?void 0:e._id)))}})):H((l=>({...l,students:[...null===l||void 0===l?void 0:l.students,null===e||void 0===e?void 0:e._id]})))},onDone:te,selectList:M.students}):2===R?(0,E.jsx)(F.Z,{fid:g,onClose:te,setFeeHead:z,setFeeHeadId:Q,feeHeadId:X,isSegment:"BY_OTHER_FEES",isOne:"Normal Other Fees"===M.other_fees_type}):3===R?(0,E.jsx)(A,{title:"select_fee_structure",onClose:te,onSelectedStrucutre:e=>{H((l=>({...l,struct:e}))),te()},fid:g,oneStep:!0}):4===R?(0,E.jsx)(B,{onClose:te,onGrabCollectFees:e=>{var l,t;J.not_exist?g&&(null===K||void 0===K?void 0:K.length)>0&&J.name&&(D((e=>!e)),le({fid:g,bodyParameter:{...M,...e,bank_account:null===M||void 0===M||null===(l=M.bank_account)||void 0===l?void 0:l._id,heads:K,payable_amount:V,is_collect:"Yes",struct:null,student_name:J.name}}).then((()=>{w(),D((e=>!e)),x()})).catch((()=>{D((e=>!e))}))):g&&(null===K||void 0===K?void 0:K.length)>0&&(D((e=>!e)),ee({fid:g,bodyParameter:{...M,...e,bank_account:null===M||void 0===M||null===(t=M.bank_account)||void 0===t?void 0:t._id,heads:K,payable_amount:V,is_collect:"Yes",struct:null}}).then((()=>{w(),D((e=>!e)),x()})).catch((()=>{D((e=>!e))})))},applicant:{...M,heads:K},isOtherFees:"OTHER_FEES",financeId:g,instituteId:O}):5===R?(0,E.jsx)(B,{onClose:te,onGrabCollectFees:e=>{var l,t,n,i,o,s;J.not_exist?g&&null!==M&&void 0!==M&&null!==(l=M.struct)&&void 0!==l&&l._id&&J.name&&(D((e=>!e)),le({fid:g,bodyParameter:{...M,...e,bank_account:null,heads:[],payable_amount:null===M||void 0===M||null===(t=M.struct)||void 0===t?void 0:t.applicable_fees,struct:null===M||void 0===M||null===(n=M.struct)||void 0===n?void 0:n._id,is_collect:"Yes",student_name:J.name}}).then((()=>{w(),D((e=>!e)),x()})).catch((()=>{D((e=>!e))}))):g&&null!==M&&void 0!==M&&null!==(i=M.struct)&&void 0!==i&&i._id&&(D((e=>!e)),ee({fid:g,bodyParameter:{...M,...e,bank_account:null,heads:[],payable_amount:null===M||void 0===M||null===(o=M.struct)||void 0===o?void 0:o.applicable_fees,struct:null===M||void 0===M||null===(s=M.struct)||void 0===s?void 0:s._id,is_collect:"Yes"}}).then((()=>{w(),D((e=>!e)),x()})).catch((()=>{D((e=>!e))})))},applicant:{...M,heads:K},isOtherFees:"SUBJECT_OTHER_FEES",financeId:g,instituteId:O}):null})};var V=t(9228),W=t(89064);const K=e=>{let{onClose:l,onEditAction:t,menuData:i}=e;const{t:o}=(0,n.$G)(),[r,c]=(0,u.useState)(""),[v,_]=(0,u.useState)({other_fees_name:""});(0,u.useEffect)((()=>{null!==i&&void 0!==i&&i.other_fees_name&&_((e=>({...e,other_fees_name:null===i||void 0===i?void 0:i.other_fees_name})))}),[null===i||void 0===i?void 0:i.other_fees_name]);return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(y.Z,{onClose:l,children:(0,E.jsxs)("div",{className:w.Z.modal_container,children:[(0,E.jsx)(s.default,{children:(0,E.jsxs)("div",{className:w.Z.modal_container_outer_header,children:[(0,E.jsx)("div",{className:w.Z.modal_container_header,children:(0,E.jsx)("h6",{children:o("update_other_fees")})}),(0,E.jsx)("img",{src:"".concat(d.J7,"/close.svg"),alt:"close icon",onClick:l})]})}),(0,E.jsx)(a.Z,{}),(0,E.jsxs)(s.default,{customStyle:{paddingTop:"0"},children:[(0,E.jsx)(Z.Z,{label:o("fees_name"),placeholder:o("fees_name_placeholder"),name:"other_fees_name",value:v.other_fees_name,type:"text",onChange:e=>{_((l=>({...l,[e.target.name]:e.target.value})))},errorShow:r.other_fees_name}),(0,E.jsx)(p.Z,{label:"update",onAction:()=>{let e=(0,k.l)(v,[]);(0,k.x)(e)?t(v):c(e)}})]})]})})})},z=e=>{let{onClose:l,menuData:t,onRefetch:i}=e;const{t:o}=(0,n.$G)(),[s,a]=(0,u.useState)(!1),[d,r]=(0,u.useState)(""),[c]=(0,h.oT)(),v=()=>{r("")};return(0,E.jsx)(E.Fragment,{children:1===d?(0,E.jsx)(K,{onEditAction:e=>{null!==t&&void 0!==t&&t._id&&(v(),a((e=>!e)),c({ofid:null===t||void 0===t?void 0:t._id,bodyParameter:{...e}}).then((()=>{i(),a((e=>!e)),l()})).catch({}))},menuData:t,onClose:v}):(0,E.jsx)(W.Z,{onClose:l,disabled:s,children:(0,E.jsx)("h6",{onClick:()=>r(1),children:o("edit")})})})};var X=t(1095),Q=t(13182),ee=t(27976),le=t(73711);const te=e=>{var l,t,i,o,s,a,c,v,_,m,f,x;let{fees:g,onRefetch:y,whichOtherFees:b,instituteId:Z,financeId:S,isCashierAccess:N,collectStaffId:F}=e;const{t:k}=(0,n.$G)(),O=(0,r.TH)(),I=(0,r.UO)(),A=(0,r.s0)(),[w,T]=(0,u.useState)(!1),[L,R]=(0,u.useState)(""),[P,G]=(0,u.useState)(null),[Y,D]=(0,u.useState)(!1),[M,B]=(0,u.useState)({open:!1,msg:"",variant:"error"}),[H]=(0,h.zY)(),[J]=(0,h.UG)(),$=e=>{e&&e.stopPropagation(),T((e=>!e))},U=()=>{R("")};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:V.Z.sf_card,onClick:()=>{if(null!==g&&void 0!==g&&g.student_name);else{var e,l,t,n,i;let o="Institute"===(null===(e=O.state)||void 0===e?void 0:e.urlOffSet)?"/q/".concat(I.username,"/institute/member/finance?type=other-fees-detail"):"/q/".concat(I.username,"/member/staff/finance?type=other-fees-detail");A(o,{state:{...O.state,feesId:null===g||void 0===g?void 0:g._id,feesName:null!==(l=null===g||void 0===g?void 0:g.other_fees_name)&&void 0!==l?l:"",otherData:{paid:null!==(t=null===g||void 0===g?void 0:g.paid_students_count)&&void 0!==t?t:0,rmaining:null!==(n=null===g||void 0===g?void 0:g.remaining_students_count)&&void 0!==n?n:0,payable_amount:null!==(i=null===g||void 0===g?void 0:g.payable_amount)&&void 0!==i?i:0}}})}},children:[(0,E.jsxs)("div",{className:V.Z.sf_card_contatiner,children:[(0,E.jsx)("img",{src:"".concat(d.J7,"/fees-card.svg"),loading:"lazy",alt:"avatar",style:{width:"2.5rem",height:"2.5rem",borderRadius:"0"}}),(0,E.jsxs)("div",{className:V.Z.sf_card_contatiner_inner,children:[(0,E.jsx)("h6",{children:null!==(l=null===g||void 0===g?void 0:g.other_fees_name)&&void 0!==l?l:""}),(0,E.jsxs)("p",{children:[null!==(t=null===g||void 0===g||null===(i=g.fees_heads)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.head_name)&&void 0!==t?t:"",": ",null!==(s=null===g||void 0===g?void 0:g.payable_amount)&&void 0!==s?s:""]}),"Other_fees"===b?(0,E.jsxs)("p",{children:[k("bank_name")," ",": ",null!==(a=null===g||void 0===g||null===(c=g.bank_account)||void 0===c?void 0:c.finance_bank_account_name)&&void 0!==a?a:""]}):(0,E.jsxs)("p",{children:[k("fees_structure")," ",": ",null!==(v=null===g||void 0===g||null===(_=g.fee_structure)||void 0===_?void 0:_.unique_structure_name)&&void 0!==v?v:""]}),null!==g&&void 0!==g&&g.student_name?(0,E.jsxs)("p",{children:[k("student_name"),(0,E.jsxs)("span",{style:{fontWeight:"700"},children:[" ",null!==(m=null===g||void 0===g?void 0:g.student_name)&&void 0!==m?m:""]})]}):null]})]}),(0,E.jsxs)("div",{className:V.Z.sf_card_contatiner,children:[(0,E.jsx)(p.Z,{label:"add_single_student",customStyle:{paddingBlock:"0.4rem",margin:"0",minWidth:"fit-content"},onAction:e=>{e.stopPropagation(),"ALLOW"===N?R(1):B({msg:"You are not Cashier Manager",open:!0,variant:"error"})}}),(0,E.jsx)(p.Z,{label:"add_non_existing_student",customStyle:{paddingBlock:"0.4rem",margin:"0",minWidth:"fit-content"},onAction:e=>{e.stopPropagation(),"ALLOW"===N?R(3):B({msg:"You are not Cashier Manager",open:!0,variant:"error"})}}),null!==g&&void 0!==g&&g.student_name?(null===g||void 0===g||null===(f=g.fee_receipt)||void 0===f?void 0:f.receipt_file)&&(0,E.jsx)("a",{href:"".concat(X.q2,"/").concat(null===g||void 0===g||null===(x=g.fee_receipt)||void 0===x?void 0:x.receipt_file),target:"_blank",rel:"noopener noreferrer",children:(0,E.jsx)("img",{src:"/images/members/receipt-icon.svg",alt:"receipt icon"})}):(0,E.jsx)("img",{src:"".concat(d.J7,"/menu.svg"),alt:"menu icon",onClick:$,style:{height:"1.5rem",width:"1.5rem"}})]})]}),1===L?(0,E.jsx)(C.Z,{title:k("select_student"),onClose:U,instituteId:Z,onSelectStudent:e=>{G(e),R(2)},selectedId:null===P||void 0===P?void 0:P._id,isSearchOnly:!0}):2===L?(0,E.jsx)(Q.Z,{onClose:U,onParentClose:U,instituteId:Z,onGrabCollectFees:e=>{S&&null!==P&&void 0!==P&&P._id&&null!==g&&void 0!==g&&g._id&&(D((e=>!e)),H({fid:S,bodyParameter:{students:[null===P||void 0===P?void 0:P._id],ofid:null===g||void 0===g?void 0:g._id,...e,staff_id:null!==F&&void 0!==F?F:""}}).then((()=>{R(5),D((e=>!e))})).catch({}))},singleStudent:P,isOtherFees:"OTHER_FEES",applicant:{head:null===g||void 0===g?void 0:g.payable_amount},ofid:null===g||void 0===g?void 0:g._id,financeId:S}):3===L?(0,E.jsx)(ee.Z,{onClose:U,singleStudent:P,onNext:e=>{G(e),R(4)}}):4===L?(0,E.jsx)(Q.Z,{onClose:()=>R(3),onParentClose:()=>{},instituteId:Z,onGrabCollectFees:e=>{S&&null!==P&&void 0!==P&&P.student_name&&null!==g&&void 0!==g&&g._id&&(D((e=>!e)),J({fid:S,bodyParameter:{...P,ofid:null===g||void 0===g?void 0:g._id,...e,staff_id:null!==F&&void 0!==F?F:""}}).then((()=>{D((e=>!e)),G(null),U()})).catch({}))},singleStudent:P,isOtherFees:"OTHER_FEES",isNonExisting:!0,applicant:{head:null===g||void 0===g?void 0:g.payable_amount}}):5===L?(0,E.jsx)(le.Z,{applicant:P,onClose:()=>{G(null),U()},ofid:null===g||void 0===g?void 0:g._id}):null,Y&&(0,E.jsx)(j.default,{}),w&&(0,E.jsx)(z,{onClose:$,menuData:g,onRefetch:y}),(0,E.jsx)(q.Z,{eventState:M,eventStateHandler:B})]})},ne=e=>{var l,t,o,r;let{fid:c,instituteId:v,isCashierAccess:_,collectStaffId:y}=e;const{t:b}=(0,n.$G)(),[Z,S]=(0,u.useState)(!1),[N,C]=(0,u.useState)(""),[F,k]=(0,u.useState)(""),[O,I]=(0,u.useState)(1),[A,w]=(0,u.useState)(!0),[T,L]=(0,m.YD)({skip:N}),{financeAllOtherFeesList:R,financeAllOtherFeesListLoading:P,financeAllOtherFeesListRefetch:G}=(0,h.GU)({data:{fid:c,page:O,limit:10,search:N,type:"Normal Other Fees"},skip:!c});(0,u.useEffect)((()=>{L&&A&&I((e=>e+1))}),[L,A]),(0,u.useEffect)((()=>{var e;if(null!==R&&void 0!==R&&null!==(e=R.list)&&void 0!==e&&e.length){var l;let e=(0,f.f)(null===R||void 0===R||null===(l=R.list)||void 0===l?void 0:l.length);w((()=>e))}}),[null===R||void 0===R||null===(l=R.list)||void 0===l?void 0:l.length]);const Y=()=>{S((e=>!e))},q=()=>{I((()=>1)),C(""),G()};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(s.default,{children:(0,E.jsxs)("div",{className:i.Z.fm_search_full,children:[(0,E.jsx)("section",{className:i.Z.fm_search_full_container,children:(0,E.jsxs)("div",{className:i.Z.fm_search_full_container_inner,children:[(0,E.jsx)("img",{className:i.Z.fm_search_full_icon,alt:"search icon",src:"".concat(d.dB,"/navbar-search.svg")}),(0,E.jsx)("input",{type:"text",placeholder:b("search"),onChange:e=>{var l;!P&&(null===R||void 0===R||null===(l=R.list)||void 0===l?void 0:l.length)>=0&&k(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&(I((()=>1)),C(F))},value:F})]})}),(0,E.jsx)(p.Z,{label:"add",customStyle:{paddingBlock:"0.4rem",margin:"0"},onAction:Y})]})}),(0,E.jsx)(a.Z,{}),(0,E.jsxs)(s.default,{customStyle:{paddingTop:"0"},children:[null===R||void 0===R||null===(t=R.list)||void 0===t?void 0:t.map(((e,l)=>{var t;return(null===R||void 0===R||null===(t=R.list)||void 0===t?void 0:t.length)===l+1?(0,E.jsx)("div",{ref:T,children:(0,E.jsx)(te,{fees:e,onRefetch:q,financeId:c,whichOtherFees:"Other_fees",instituteId:v,collectStaffId:y,isCashierAccess:_})},null===e||void 0===e?void 0:e._id):(0,E.jsx)(te,{fees:e,onRefetch:q,financeId:c,whichOtherFees:"Other_fees",instituteId:v,collectStaffId:y,isCashierAccess:_},null===e||void 0===e?void 0:e._id)})),P?N?(0,E.jsx)(j.default,{}):(0,E.jsx)(E.Fragment,{children:1===O?(0,E.jsx)(j.default,{}):(0,E.jsx)(g.Z,{})}):N?0===(null===R||void 0===R||null===(o=R.list)||void 0===o?void 0:o.length)&&(0,E.jsx)(x.Z,{title:"No item found related this search.",customStyleContainer:{marginTop:"1.5rem"}}):0===(null===R||void 0===R||null===(r=R.list)||void 0===r?void 0:r.length)&&(0,E.jsx)(x.Z,{title:"No item.",customStyleContainer:{marginTop:"1.5rem"}})]}),Z&&(0,E.jsx)(U,{onClose:Y,fid:c,onRefetch:q,instituteId:v,whichOtherFees:"Normal Other Fees"})]})},ie=e=>{var l,t,o,r;let{fid:c,instituteId:v}=e;const{t:_}=(0,n.$G)(),[y,b]=(0,u.useState)(!1),[Z,S]=(0,u.useState)(""),[N,C]=(0,u.useState)(""),[F,k]=(0,u.useState)(1),[O,I]=(0,u.useState)(!0),[A,w]=(0,m.YD)({skip:Z}),{financeAllOtherFeesList:T,financeAllOtherFeesListLoading:L,financeAllOtherFeesListRefetch:R}=(0,h.GU)({data:{fid:c,page:F,limit:10,search:Z,type:"Subject Other Fees"},skip:!c});(0,u.useEffect)((()=>{w&&O&&k((e=>e+1))}),[w,O]),(0,u.useEffect)((()=>{var e;if(null!==T&&void 0!==T&&null!==(e=T.list)&&void 0!==e&&e.length){var l;let e=(0,f.f)(null===T||void 0===T||null===(l=T.list)||void 0===l?void 0:l.length);I((()=>e))}}),[null===T||void 0===T||null===(l=T.list)||void 0===l?void 0:l.length]);const P=()=>{b((e=>!e))},G=()=>{k((()=>1)),S(""),R()};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(s.default,{children:(0,E.jsxs)("div",{className:i.Z.fm_search_full,children:[(0,E.jsx)("section",{className:i.Z.fm_search_full_container,children:(0,E.jsxs)("div",{className:i.Z.fm_search_full_container_inner,children:[(0,E.jsx)("img",{className:i.Z.fm_search_full_icon,alt:"search icon",src:"".concat(d.dB,"/navbar-search.svg")}),(0,E.jsx)("input",{type:"text",placeholder:_("search"),onChange:e=>{var l;!L&&(null===T||void 0===T||null===(l=T.list)||void 0===l?void 0:l.length)>=0&&C(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&(k((()=>1)),S(N))},value:N})]})}),(0,E.jsx)(p.Z,{label:"add",customStyle:{paddingBlock:"0.4rem",margin:"0"},onAction:P})]})}),(0,E.jsx)(a.Z,{}),(0,E.jsxs)(s.default,{customStyle:{paddingTop:"0"},children:[null===T||void 0===T||null===(t=T.list)||void 0===t?void 0:t.map(((e,l)=>{var t;return(null===T||void 0===T||null===(t=T.list)||void 0===t?void 0:t.length)===l+1?(0,E.jsx)("div",{ref:A,children:(0,E.jsx)(te,{fees:e,onRefetch:G,fid:c})},null===e||void 0===e?void 0:e._id):(0,E.jsx)(te,{fees:e,onRefetch:G,fid:c},null===e||void 0===e?void 0:e._id)})),L?Z?(0,E.jsx)(j.default,{}):(0,E.jsx)(E.Fragment,{children:1===F?(0,E.jsx)(j.default,{}):(0,E.jsx)(g.Z,{})}):Z?0===(null===T||void 0===T||null===(o=T.list)||void 0===o?void 0:o.length)&&(0,E.jsx)(x.Z,{title:"No item found related this search.",customStyleContainer:{marginTop:"1.5rem"}}):0===(null===T||void 0===T||null===(r=T.list)||void 0===r?void 0:r.length)&&(0,E.jsx)(x.Z,{title:"No item.",customStyleContainer:{marginTop:"1.5rem"}})]}),y&&(0,E.jsx)(U,{onClose:P,fid:c,onRefetch:G,instituteId:v,whichOtherFees:"Subject Other Fees"})]})};var oe=t(76697),se=t(82824);const ae=e=>{var l,t,i,o,s,a,u,v,_,m,h,f,p,x,j,g,y,b,Z,S,N,C,F,k,O,I,A,w,T,L,R,P,G,Y,q,D;let{history:B}=e;const{t:H}=(0,n.$G)(),J=(0,r.UO)(),$=(0,r.TH)();return(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)("div",{className:oe.Z.sidebarheader,style:{gap:"1%"},title:"View Receipt",children:[(0,E.jsxs)("div",{className:oe.Z.history_image_container,style:{width:"50%"},children:[null!==B&&void 0!==B&&null!==(l=B.payment_student)&&void 0!==l&&l.studentProfilePhoto?(0,E.jsx)(c.rU,{to:"/q/".concat(J.username,"/student/profile"),state:{...$.state,sid:null===B||void 0===B||null===(t=B.payment_student)||void 0===t?void 0:t._id},children:(0,E.jsx)("img",{src:"".concat(X.yI,"/").concat(null===B||void 0===B||null===(i=B.payment_student)||void 0===i?void 0:i.studentProfilePhoto),alt:"qr code",style:{width:"60px",height:"60px",borderRadius:"12px"}})}):(0,E.jsx)("img",{src:"".concat(d.p3,"/feed-user-avatar.svg"),alt:"qr code",style:{width:"60px",height:"60px",borderRadius:"12px"}}),null!==B&&void 0!==B&&B.payment_student_detail?(0,E.jsxs)("div",{className:oe.Z.text,children:[(0,E.jsx)("p",{className:oe.Z.rcv,children:H("recived_from")}),(0,E.jsx)("h6",{children:null!==(o=null===B||void 0===B||null===(s=B.fee_receipt)||void 0===s?void 0:s.student_name)&&void 0!==o?o:""}),(0,E.jsxs)("p",{className:oe.Z.rcv,children:[H("batch")," ",": ",null!==(a=null===B||void 0===B||null===(u=B.payment_student_detail)||void 0===u?void 0:u.batch)&&void 0!==a?a:"",","," ",H("student_class"),": ",null===B||void 0===B||null===(v=B.payment_student_detail)||void 0===v?void 0:v.classes,", ",H("roll_number")," ",": ",null!==(_=null===B||void 0===B||null===(m=B.payment_student_detail)||void 0===m?void 0:m.roll_no)&&void 0!==_?_:""]})]}):(0,E.jsxs)("div",{className:oe.Z.text,children:[(0,E.jsx)("p",{className:oe.Z.rcv,children:H("recived_from")}),(0,E.jsx)("h6",{children:null!==B&&void 0!==B&&B.payment_student?"".concat(null!==(h=null===B||void 0===B||null===(f=B.payment_student)||void 0===f?void 0:f.studentFirstName)&&void 0!==h?h:""," ").concat(null!==(p=null===B||void 0===B||null===(x=B.payment_student)||void 0===x?void 0:x.studentMiddleName)&&void 0!==p?p:""," ").concat(null!==(j=null===B||void 0===B||null===(g=B.payment_student)||void 0===g?void 0:g.studentLastName)&&void 0!==j?j:""):null!==(y=null===B||void 0===B||null===(b=B.payment_by_end_user_id)||void 0===b?void 0:b.userLegalName)&&void 0!==y?y:null===B||void 0===B?void 0:B.payment_by_end_user_id_name}),(0,E.jsxs)("p",{className:oe.Z.rcv,children:[H("gr_number")," ",null!==(Z=null===B||void 0===B||null===(S=B.payment_student)||void 0===S?void 0:S.studentGRNO)&&void 0!==Z?Z:""]}),(0,E.jsx)("p",{className:oe.Z.rcv,children:null!==(N=null===B||void 0===B||null===(C=B.payment_student)||void 0===C||null===(F=C.fee_structure)||void 0===F?void 0:F.unique_structure_name)&&void 0!==N?N:""})]})]}),(0,E.jsxs)("div",{className:oe.Z.text,style:{width:"27%"},children:[(0,E.jsx)("p",{className:oe.Z.rcv,style:{width:"100%"},children:H("transaction_id")}),(0,E.jsx)("h6",{style:{width:"100%",wordWrap:"break-word"},children:null!==B&&void 0!==B&&B.razorpay_payment_id?null===B||void 0===B?void 0:B.razorpay_payment_id:null!==B&&void 0!==B&&null!==(k=B.fee_receipt)&&void 0!==k&&k.fee_utr_reference?null===B||void 0===B||null===(O=B.fee_receipt)||void 0===O?void 0:O.fee_utr_reference:"N/A"}),(0,E.jsxs)("p",{className:oe.Z.rcv,style:{width:"100%"},children:[M()(null===B||void 0===B?void 0:B.created_at).format("DD MMM YYYY"),", ",(0,se.J)(null===B||void 0===B?void 0:B.created_at,"LT")]})]}),(0,E.jsxs)("div",{className:oe.Z.text,style:{width:"20%"},children:[(0,E.jsxs)("p",{className:oe.Z.rcv,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[H("invoice_no")," ",null!==(I=null!==(A=null===B||void 0===B||null===(w=B.fee_receipt)||void 0===w?void 0:w.invoice_count)&&void 0!==A?A:null===B||void 0===B?void 0:B.payment_invoice_number)&&void 0!==I?I:"N/A",null!==B&&void 0!==B&&null!==(T=B.fee_receipt)&&void 0!==T&&T.receipt_file?(0,E.jsx)("a",{href:"".concat(X.q2,"/").concat(null===B||void 0===B||null===(L=B.fee_receipt)||void 0===L?void 0:L.receipt_file),target:"_blank",rel:"noopener noreferrer",children:(0,E.jsx)("img",{src:"".concat(d.J7,"/receipt.svg"),alt:"receipt icon",title:"Download Fees Receipt"})}):null]}),(0,E.jsxs)("h6",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[H("rs_only")," ",null===B||void 0===B?void 0:B.payment_amount]}),(0,E.jsx)("p",{className:oe.Z.rcv,style:{width:"100%"},children:"offline"===(null===(R=B.payment_mode)||void 0===R?void 0:R.toLowerCase())?null!==B&&void 0!==B&&null!==(P=B.fee_receipt)&&void 0!==P&&P.fee_payment_mode?"".concat(null===B||void 0===B||null===(G=B.fee_receipt)||void 0===G?void 0:G.fee_payment_mode):"Offline - No Receipt":"online"===(null===(Y=B.payment_mode)||void 0===Y?void 0:Y.toLowerCase())?null!==B&&void 0!==B&&null!==(q=B.fee_receipt)&&void 0!==q&&q.fee_payment_mode?"".concat(null===B||void 0===B||null===(D=B.fee_receipt)||void 0===D?void 0:D.fee_payment_mode):"Online - No Receipt":null===B||void 0===B?void 0:B.payment_mode})]})]})})},de=e=>{var l,t,o,r;let{fid:c,instituteId:v}=e;const{t:_}=(0,n.$G)(),[p,y]=(0,u.useState)(""),[b,Z]=(0,u.useState)(""),[S,N]=(0,u.useState)(1),[C,F]=(0,u.useState)(!0),[k,O]=(0,m.YD)({skip:p}),{financeOtherFeesTransaction:I,financeOtherFeesTransactionLoading:A}=(0,h.zK)({data:{uid:v,page:S,limit:10,search:p,filter:""},skip:!c});(0,u.useEffect)((()=>{O&&C&&N((e=>e+1))}),[O,C]),(0,u.useEffect)((()=>{var e;if(null!==I&&void 0!==I&&null!==(e=I.list)&&void 0!==e&&e.length){var l;let e=(0,f.f)(null===I||void 0===I||null===(l=I.list)||void 0===l?void 0:l.length);F((()=>e))}}),[null===I||void 0===I||null===(l=I.list)||void 0===l?void 0:l.length]);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(s.default,{children:(0,E.jsx)("div",{className:i.Z.fm_search_full,children:(0,E.jsx)("section",{className:i.Z.fm_search_full_container,children:(0,E.jsxs)("div",{className:i.Z.fm_search_full_container_inner,children:[(0,E.jsx)("img",{className:i.Z.fm_search_full_icon,alt:"search icon",src:"".concat(d.dB,"/navbar-search.svg")}),(0,E.jsx)("input",{type:"text",placeholder:_("search"),onChange:e=>{var l;!A&&(null===I||void 0===I||null===(l=I.list)||void 0===l?void 0:l.length)>=0&&Z(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&(N((()=>1)),y(b))},value:b})]})})})}),(0,E.jsx)(a.Z,{}),(0,E.jsxs)(s.default,{customStyle:{paddingTop:"0"},children:[null===I||void 0===I||null===(t=I.list)||void 0===t?void 0:t.map(((e,l)=>{var t;return(null===I||void 0===I||null===(t=I.list)||void 0===t?void 0:t.length)===l+1?(0,E.jsx)("div",{ref:k,children:(0,E.jsx)(ae,{history:e})},null===e||void 0===e?void 0:e._id):(0,E.jsx)(ae,{history:e},null===e||void 0===e?void 0:e._id)})),A?p?(0,E.jsx)(j.default,{}):(0,E.jsx)(g.Z,{}):p?0===(null===I||void 0===I||null===(o=I.list)||void 0===o?void 0:o.length)&&(0,E.jsx)(x.Z,{title:"No receipts found related this search.",customStyleContainer:{marginTop:"1.5rem"}}):0===(null===I||void 0===I||null===(r=I.list)||void 0===r?void 0:r.length)&&(0,E.jsx)(x.Z,{title:"No receipts added.",customStyleContainer:{marginTop:"1.5rem"}})]})]})},re=e=>{var l,t,o,r;let{fid:c,instituteId:v,isCashierAccess:_,collectStaffId:y}=e;const{t:b}=(0,n.$G)(),[Z,S]=(0,u.useState)(!1),[N,C]=(0,u.useState)(""),[F,k]=(0,u.useState)(""),[O,I]=(0,u.useState)(1),[A,w]=(0,u.useState)(!0),[T,L]=(0,m.YD)({skip:N}),{financeAllOtherExamFeesList:R,financeAllOtherExamFeesListLoading:P,financeAllOtherExamFeesListRefetch:G}=(0,h.Q5)({data:{fid:c,page:O,limit:10,search:N},skip:!c});(0,u.useEffect)((()=>{L&&A&&I((e=>e+1))}),[L,A]),(0,u.useEffect)((()=>{var e;if(null!==R&&void 0!==R&&null!==(e=R.list)&&void 0!==e&&e.length){var l;let e=(0,f.f)(null===R||void 0===R||null===(l=R.list)||void 0===l?void 0:l.length);w((()=>e))}}),[null===R||void 0===R||null===(l=R.list)||void 0===l?void 0:l.length]);const Y=()=>{S((e=>!e))},q=()=>{I((()=>1)),C(""),G()};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(s.default,{children:(0,E.jsxs)("div",{className:i.Z.fm_search_full,children:[(0,E.jsx)("section",{className:i.Z.fm_search_full_container,children:(0,E.jsxs)("div",{className:i.Z.fm_search_full_container_inner,children:[(0,E.jsx)("img",{className:i.Z.fm_search_full_icon,alt:"search icon",src:"".concat(d.dB,"/navbar-search.svg")}),(0,E.jsx)("input",{type:"text",placeholder:b("search"),onChange:e=>{var l;!P&&(null===R||void 0===R||null===(l=R.list)||void 0===l?void 0:l.length)>=0&&k(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&(I((()=>1)),C(F))},value:F})]})}),(0,E.jsx)(p.Z,{label:"add",customStyle:{paddingBlock:"0.4rem",margin:"0"},onAction:Y})]})}),(0,E.jsx)(a.Z,{}),(0,E.jsxs)(s.default,{customStyle:{paddingTop:"0"},children:[null===R||void 0===R||null===(t=R.list)||void 0===t?void 0:t.map(((e,l)=>{var t;return(null===R||void 0===R||null===(t=R.list)||void 0===t?void 0:t.length)===l+1?(0,E.jsx)("div",{ref:T,children:(0,E.jsx)(te,{fees:e,onRefetch:q,financeId:c,whichOtherFees:"Other_fees",instituteId:v,collectStaffId:y,isCashierAccess:_})},null===e||void 0===e?void 0:e._id):(0,E.jsx)(te,{fees:e,onRefetch:q,financeId:c,whichOtherFees:"Other_fees",instituteId:v,collectStaffId:y,isCashierAccess:_},null===e||void 0===e?void 0:e._id)})),P?N?(0,E.jsx)(j.default,{}):(0,E.jsx)(E.Fragment,{children:1===O?(0,E.jsx)(j.default,{}):(0,E.jsx)(g.Z,{})}):N?0===(null===R||void 0===R||null===(o=R.list)||void 0===o?void 0:o.length)&&(0,E.jsx)(x.Z,{title:"No item found related this search.",customStyleContainer:{marginTop:"1.5rem"}}):0===(null===R||void 0===R||null===(r=R.list)||void 0===r?void 0:r.length)&&(0,E.jsx)(x.Z,{title:"No item.",customStyleContainer:{marginTop:"1.5rem"}})]}),Z&&(0,E.jsx)(U,{onClose:Y,fid:c,onRefetch:q,instituteId:v,whichOtherFees:"EXAM_FEES"})]})};var ce=t(89891),ue=t(21625),ve=t(11468),_e=t(38986);const me=e=>{let{onClose:l,onRefetch:t,fid:i,menuData:o}=e;const{t:r}=(0,n.$G)(),[c,v]=(0,u.useState)(!1),[_,m]=(0,u.useState)(""),[f,x]=(0,u.useState)({alarm_mode:"APP_NOTIFICATION",content:"",m_title:"",m_doc:""}),[g,Z]=(0,u.useState)(""),[S]=(0,ue.FL)(),[N]=(0,h.Jq)();(0,u.useEffect)((()=>{null!==o&&void 0!==o&&o._id&&x((e=>{var l,t,n,i;return{...e,alarm_mode:null!==(l=null===o||void 0===o?void 0:o.message_type)&&void 0!==l?l:"APP_NOTIFICATION",content:null!==(t=null===o||void 0===o?void 0:o.message)&&void 0!==t?t:"",m_title:null!==(n=null===o||void 0===o?void 0:o.message_title)&&void 0!==n?n:"",m_doc:null!==(i=null===o||void 0===o?void 0:o.message_document)&&void 0!==i?i:""}}))}),[o]);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(y.Z,{children:(0,E.jsxs)("div",{className:b.Z.modal_container,children:[(0,E.jsx)(s.default,{children:(0,E.jsxs)("div",{className:b.Z.modal_container_outer_header,children:[(0,E.jsx)("div",{className:b.Z.modal_container_header,children:(0,E.jsx)("h6",{children:r("miscellaneous_message")})}),(0,E.jsx)("img",{src:"".concat(d.J7,"/close.svg"),alt:"close icon",onClick:l})]})}),(0,E.jsx)(a.Z,{}),(0,E.jsxs)(s.default,{customStyle:{paddingTop:"0"},children:[(0,E.jsxs)("section",{className:b.Z.notify_container,onClick:()=>x((e=>({...e,alarm_mode:"APP_NOTIFICATION"}))),children:[(0,E.jsx)("img",{src:"APP_NOTIFICATION"===f.alarm_mode?"".concat(d.Fk,"/radio-blue.svg"):"".concat(d.Fk,"/radio-grey.svg"),alt:"icon"}),(0,E.jsxs)("div",{className:b.Z.notify_text,children:[(0,E.jsx)("h6",{children:r("Notify_with_In_app_Notification")}),(0,E.jsx)("p",{children:r("Notify_with_In_app_Notification_note")})]})]}),(0,E.jsxs)("section",{className:b.Z.notify_container,onClick:()=>x((e=>({...e,alarm_mode:"EMAIL_NOTIFICATION"}))),children:[(0,E.jsx)("img",{src:"EMAIL_NOTIFICATION"===f.alarm_mode?"".concat(d.Fk,"/radio-blue.svg"):"".concat(d.Fk,"/radio-grey.svg"),alt:"icon"}),(0,E.jsxs)("div",{className:b.Z.notify_text,children:[(0,E.jsx)("h6",{children:r("Notify_On_Email_and_SMS")}),(0,E.jsx)("p",{children:r("Notify_On_Email_and_SMS_note")})]})]}),(0,E.jsx)(ve.Z,{label:r("student_title_label"),placeholder:r("student_title_label_placeholder"),name:"m_title",value:f.m_title,type:"text",onChange:e=>x((l=>({...l,m_title:e.target.value}))),errorShow:_.m_title}),(0,E.jsx)(ve.Z,{label:r("student_message_label"),placeholder:r("student_message_label_placeholder"),name:"content",value:f.content,type:"text",onChange:e=>x((l=>({...l,content:e.target.value})))}),(0,E.jsx)(_e.Z,{label:r("attachment"),name:"document",value:g,onChange:e=>{if(e.target.files[0]){v((e=>!e));const l=new FormData;l.append("file",e.target.files[0]),S({fileUpload:l}).then((l=>{var t,n,i;Z({name:null===(t=e.target.files[0])||void 0===t?void 0:t.name,key:null===(n=l.data)||void 0===n?void 0:n.imageKey,type:null===(i=e.target.files[0])||void 0===i?void 0:i.type}),x((e=>{var t;return{...e,m_doc:null===(t=l.data)||void 0===t?void 0:t.imageKey}})),v((e=>!e))})).catch({})}}}),(0,E.jsx)(p.Z,{label:"confirm",onAction:()=>{let e=(0,k.l)(f,["content","m_doc"]);var n,o;(0,k.x)(e)?f.alarm_mode&&i&&(v((e=>!e)),N({fid:i,alarm_mode:f.alarm_mode,bodyParameter:{type:f.alarm_mode,message:null!==(n=f.content)&&void 0!==n?n:"",m_title:f.m_title,m_doc:null!==(o=f.m_doc)&&void 0!==o?o:null}}).then((()=>{t(),v((e=>!e)),l()})).catch({})):m(e)}})]})]})}),c&&(0,E.jsx)(j.default,{})]})},he={inputProps:{"aria-label":"Switch demo"}},fe=e=>{var l,t,m,f,x,g,y,b;let{fid:Z,instituteId:S,cashAuthority:N,masterData:C,onRefetch:F}=e;const{t:k}=(0,n.$G)(),O=(0,r.TH)(),I=(0,r.UO)(),A=(0,r.s0)(),[w]=(0,c.lr)(),[T,L]=(0,u.useState)(!1),[R,P]=(0,u.useState)({message_bool:!1}),[G,Y]=(0,u.useState)(""),[q]=(0,h.NB)();(0,u.useEffect)((()=>{null!==C&&void 0!==C&&C.message_bool&&P((e=>({...e,message_bool:"On"===(null===C||void 0===C?void 0:C.message_bool)})))}),[null===C||void 0===C?void 0:C.message_bool]);const D=(0,u.useCallback)((()=>{var e;let l="";l="Institute"===(null===(e=O.state)||void 0===e?void 0:e.urlOffSet)?"/q/".concat(I.username,"/institute/member/finance"):"/q/".concat(I.username,"/member/staff/finance"),A(l,{state:O.state})}),[A,O.state,I.username]);(0,u.useCallback)((()=>{var e;let l="";l="Institute"===(null===(e=O.state)||void 0===e?void 0:e.urlOffSet)?"/q/".concat(I.username,"/institute/member/finance?type=miscellaneous-receipt"):"/q/".concat(I.username,"/member/staff/finance?type=miscellaneous-receipt"),A(l,{state:O.state})}),[A,O.state,I.username]);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(o.default,{children:[(0,E.jsx)(s.default,{children:(0,E.jsxs)("div",{className:i.Z.fm_header_container,children:[(0,E.jsxs)("div",{className:i.Z.fm_header_start_container,style:{gap:"0.2rem"},children:[(0,E.jsx)("img",{alt:"search icon",src:"".concat(d.Fk,"/back.svg"),style:{height:"2rem",width:"2rem"},onClick:D}),(0,E.jsx)("h6",{children:k("miscellaneous_fees")})]}),(0,E.jsxs)("div",{className:i.Z.fm_header_start_container,style:{gap:"1rem"},children:[(0,E.jsxs)("div",{children:[(0,E.jsx)(ce.Z,{...he,checked:R.message_bool,onChange:e=>{Z&&(P((l=>({...l,message_bool:e.target.checked}))),L((e=>!e)),q({fid:Z,bodyParameter:{message_bool:e.target.checked?"On":"Off"}}).then((()=>{L((e=>!e))})).catch({}))}}),(0,E.jsx)("span",{children:k("send_miscellaneous_fee_message")})]}),R.message_bool?(0,E.jsx)(p.Z,{label:"message",onAction:()=>Y(1),customStyle:{margin:"0",padding:"0.3rem 1rem"}}):null]})]})}),(0,E.jsx)(a.Z,{}),(0,E.jsx)(v.Z,{children:pe.map((e=>{var l,t;return(0,E.jsx)(_.Z,{tab:e,isLink:!0,isActive:null===(l=e.groupIs)||void 0===l?void 0:l.includes(w.get("n")),parentState:O.state,url:"Institute"===(null===(t=O.state)||void 0===t?void 0:t.urlOffSet)?"/q/".concat(I.username,"/institute/member/finance?type=other-fees").concat(e.urlKey):"/q/".concat(I.username,"/member/staff/finance?type=other-fees").concat(e.urlKey)},null===e||void 0===e?void 0:e.id)}))}),(0,E.jsx)(a.Z,{customStyleBorder:{marginTop:"0"}}),"subject"===w.get("n")?(0,E.jsx)(ie,{fid:Z,instituteId:S,isCashierAccess:null!==N&&void 0!==N&&N.includes(null===O||void 0===O||null===(l=O.state)||void 0===l?void 0:l.sid)?"ALLOW":"DENY",collectStaffId:null===O||void 0===O||null===(t=O.state)||void 0===t?void 0:t.sid}):"history"===w.get("n")?(0,E.jsx)(de,{fid:Z,instituteId:S}):"normal"===w.get("n")?(0,E.jsx)(ne,{fid:Z,instituteId:S,isCashierAccess:null!==N&&void 0!==N&&N.includes(null===O||void 0===O||null===(m=O.state)||void 0===m?void 0:m.sid)?"ALLOW":"DENY",collectStaffId:null===O||void 0===O||null===(f=O.state)||void 0===f?void 0:f.sid}):"exam"===w.get("n")?(0,E.jsx)(re,{fid:Z,instituteId:S,isCashierAccess:null!==N&&void 0!==N&&N.includes(null===O||void 0===O||null===(x=O.state)||void 0===x?void 0:x.sid)?"ALLOW":"DENY",collectStaffId:null===O||void 0===O||null===(g=O.state)||void 0===g?void 0:g.sid}):(0,E.jsx)(ne,{fid:Z,instituteId:S,isCashierAccess:null!==N&&void 0!==N&&N.includes(null===O||void 0===O||null===(y=O.state)||void 0===y?void 0:y.sid)?"ALLOW":"DENY",collectStaffId:null===O||void 0===O||null===(b=O.state)||void 0===b?void 0:b.sid})]}),T&&(0,E.jsx)(j.default,{}),1===G?(0,E.jsx)(me,{onClose:()=>{Y("")},fid:Z,onRefetch:F,menuData:null===C||void 0===C?void 0:C.student_message}):null]})},pe=[{label:"normal_other_fees",id:"normal",urlKey:"",groupIs:["",null]},{label:"exam_other_fees",id:"exam",urlKey:"&n=exam",groupIs:["exam"]},{label:"subject_other_fees",id:"subject",urlKey:"&n=subject",groupIs:["subject"]},{label:"transaction_history",id:"history",urlKey:"&n=history",groupIs:["history"]}]},98278:(e,l,t)=>{t.d(l,{Z:()=>n});const n=t(88637).Z},88637:(e,l,t)=>{t.d(l,{Z:()=>i});var n=t(72791);function i(e){let{controlled:l,default:t,name:i,state:o="value"}=e;const{current:s}=n.useRef(void 0!==l),[a,d]=n.useState(t);return[s?l:a,n.useCallback((e=>{s||d(e)}),[])]}}}]);
//# sourceMappingURL=80429.9a1e1c62.chunk.js.map