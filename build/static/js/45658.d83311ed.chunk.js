"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[45658],{28426:(e,t,n)=>{n.d(t,{Z:()=>b});var i=n(72791),l=n(39230),s=n(16871),o=n(87338),a=n(11105),d=n(98094),u=n(10406),r=n(36665),c=n(87457),_=n(98734),h=n(97655),v=n(72952),m=n(81622),g=n(84959),x=n(80184);const f=e=>{let{openAs:t,onClose:n,hid:s,openRuleMenu:a,onRefetch:d,onEdit:u}=e;const{t:f}=(0,l.$G)(),[p,j]=(0,i.useState)({regulation_headline:"EDIT"===t?null===a||void 0===a?void 0:a.regulation_headline:"",regulation_description:"EDIT"===t?null===a||void 0===a?void 0:a.regulation_description:"",regulation_attachment:"EDIT"===t?null===a||void 0===a?void 0:a.regulation_attachment:""}),[I,N]=(0,i.useState)(""),[S,b]=(0,i.useState)(!1),[Z]=(0,o.XG)(),[w]=(0,g.FL)();(0,i.useEffect)((()=>{"EDIT"===t&&j({regulation_headline:null===a||void 0===a?void 0:a.regulation_headline,regulation_description:null===a||void 0===a?void 0:a.regulation_description,regulation_attachment:null===a||void 0===a?void 0:a.regulation_attachment})}),[t]);const H=e=>{j((t=>({...t,[e.target.name]:e.target.value})))};return(0,x.jsx)(r.Z,{onClose:n,children:(0,x.jsxs)("div",{className:c.Z.add_category_modal,children:[(0,x.jsxs)("div",{className:c.Z.add_category_modal_title,children:[(0,x.jsx)("h6",{children:f("EDIT"===t?"edit_rule":"add_new_rule")}),(0,x.jsx)("img",{src:"/images/close-post-icon.svg",onClick:n,alt:"close"})]}),(0,x.jsx)(h.Z,{labelText:f("rule_headline"),placeholder:f("rule_headline_placeholder"),name:"regulation_headline",value:null===p||void 0===p?void 0:p.regulation_headline,type:"text",onChange:H,errorShow:I.regulation_headline}),(0,x.jsx)(v.Z,{labelText:f("rules_deacription"),placeholder:f("rules_deacription_placeholder"),name:"regulation_description",value:p.regulation_description,type:"text",onChange:H,customStyleContainer:{width:"100%"}}),(0,x.jsx)(m.Z,{labelText:f("attach_rule_pdf"),name:"regulation_attachment",value:p.regulation_attachment,onChange:e=>{b((e=>!e));const t=new FormData;t.append("file",e.target.files[0]),w({fileUpload:t}).then((e=>{var t;null!==(t=e.data)&&void 0!==t&&t.imageKey&&j((t=>{var n;return{...t,regulation_attachment:null===(n=e.data)||void 0===n?void 0:n.imageKey}})),b((e=>!e))})).catch({})},customStyleContainer:{width:"100%"}}),(0,x.jsx)("button",{className:c.Z.set_fees_structure_btn,title:"Add Hostel Rules",onClick:()=>{const e=(e=>{const t={};for(let n in e)"regulation_attachment"===n||"regulation_description"===n||e[n]||(t[n]="".concat(n," is required!"));return t})(p);let i=!1;for(let t in e)if(t){i=!0;break}i?N(e):"EDIT"===t?u(p):(b((e=>!e)),Z({hid:s,addRules:{rules:[{headLine:null===p||void 0===p?void 0:p.regulation_headline,description:null===p||void 0===p?void 0:p.regulation_description,attach:null===p||void 0===p?void 0:p.regulation_attachment}]}}).then((()=>{d(),n(),b((e=>!e))})).catch({}))},style:{justifyContent:"center"},children:f("EDIT"===t?"update":"add")}),S&&(0,x.jsx)(_.Z,{})]})})};var p=n(12072),j=n(84489),I=n(87049);const N=e=>{let{onClose:t,openRuleMenu:n,onRefetch:l,hid:s}=e;const[a,d]=(0,i.useState)(!1),[u,r]=(0,i.useState)(!1),[c]=(0,o.R5)();return(0,x.jsx)(x.Fragment,{children:u?(0,x.jsx)(f,{openRuleMenu:n,onEdit:e=>{r((e=>!e)),d((e=>!e)),c({hid:s,rid:null===n||void 0===n?void 0:n._id,editRules:{existing_rules:{headLine:null===e||void 0===e?void 0:e.regulation_headline,description:null===e||void 0===e?void 0:e.regulation_description,attach:null===e||void 0===e?void 0:e.regulation_attachment}}}).then((()=>{l(),d((e=>!e)),t()})).catch({})},openAs:"EDIT"}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(j.Z,{onClose:t}),(0,x.jsxs)(p.Z,{customStyle:{zIndex:"1200"},children:[(0,x.jsx)("div",{className:I.Z.edit_modal_container,style:{width:"200px"},children:(0,x.jsx)("h6",{className:I.Z.edit,onClick:()=>r((e=>!e)),children:"Edit"})}),a&&(0,x.jsx)(_.Z,{})]})]})})},S=e=>{let{rules:t,setOpenRuleMenu:n,viewAs:i}=e;const{t:s}=(0,l.$G)();return(0,x.jsxs)("div",{className:u.Z.rules_card,children:[(0,x.jsxs)("div",{className:u.Z.rules_card_title,children:[(0,x.jsx)("h6",{children:null===t||void 0===t?void 0:t.regulation_headline}),"HOSTEL_SEARCH"===i?"":(0,x.jsx)("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:e=>n(t),className:u.Z.menu_icon,title:"Menu"})]}),(0,x.jsx)("p",{children:null===t||void 0===t?void 0:t.regulation_description}),(null===t||void 0===t?void 0:t.regulation_attachment)&&(0,x.jsx)("a",{title:"Download Attachment",href:"https://duoxxvrxc30wv.cloudfront.net/".concat(null===t||void 0===t?void 0:t.regulation_attachment),target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,x.jsx)("span",{className:u.Z.download_attachment,children:s("download_attachment")})})]})},b=e=>{var t,n,r;let{hid:c,viewAs:_}=e;const{t:h}=(0,l.$G)(),v=(0,s.s0)(),[m,g]=(0,i.useState)(!1),[p,j]=(0,i.useState)(""),[I,b]=(0,i.useState)(!0),{getHostelRules:Z,getHostelRulesRefetch:w}=(0,o.$F)({hid:c,skip:!c});(0,i.useEffect)((()=>{c&&(b(!0),w())}),[c,w]),(0,i.useEffect)((()=>{var e,t,n;(null!==Z&&void 0!==Z&&null!==(e=Z.one_hostel)&&void 0!==e&&e.rules||0===(null===Z||void 0===Z||null===(t=Z.one_hostel)||void 0===t||null===(n=t.rules)||void 0===n?void 0:n.length))&&b(!1)}),[null===Z||void 0===Z||null===(t=Z.one_hostel)||void 0===t?void 0:t.rules]);const H=()=>{g((e=>!e))};return(0,x.jsxs)(x.Fragment,{children:["HOSTEL_SEARCH"===_?(0,x.jsxs)("div",{className:u.Z.with_search,style:{justifyContent:"flex-start",gap:"1rem"},children:[(0,x.jsx)("img",{src:"/images/arrow-left-fees-icon.svg",onClick:()=>{v(-1)},alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),(0,x.jsx)("h6",{children:h("hostel_rule_and_regulation")})]}):(0,x.jsx)("div",{className:u.Z.with_search,children:(0,x.jsx)("h6",{children:h("hostel_rule_and_regulation")})}),(0,x.jsx)(d.Z,{customStyle:{marginTop:"0.5rem",marginBottom:"0.6rem",width:"100%"}}),"HOSTEL_SEARCH"===_?"":(0,x.jsx)("p",{className:u.Z.add_new_category,onClick:H,children:h("create_new_rule")}),null===Z||void 0===Z||null===(n=Z.one_hostel)||void 0===n||null===(r=n.rules)||void 0===r?void 0:r.map((e=>(0,x.jsx)(S,{rules:e,setOpenRuleMenu:j,viewAs:_},null===e||void 0===e?void 0:e._id))),I&&(0,x.jsx)(a.Z,{}),m&&(0,x.jsx)(f,{onClose:H,hid:c,onRefetch:w}),p&&(0,x.jsx)(N,{onClose:()=>j(""),hid:c,onRefetch:w,openRuleMenu:p})]})}},60080:(e,t,n)=>{n.d(t,{Z:()=>w});var i=n(72791),l=n(39230),s=n(23441),o=n(87338),a=n(763),d=n(11105),u=n(69721),r=n(15214),c=n(55271),_=n(61756),h=n(16871),v=n(43504),m=n(22492),g=n(80184);const x=e=>{var t,n,i,l,s,o,a,d,x,f,p,j,I,N,S,b,Z,w,H,y,E,C,T,A,R,k,D,L;let{hostelUnit:U,carryParentState:F,viewAs:O,callApi:M,pageOpenAs:P}=e;const q=(0,h.UO)();return(0,g.jsx)(g.Fragment,{children:"STUDENT"===O?(0,g.jsx)(_.Z,{carryParentState:{...F,huid:null===U||void 0===U?void 0:U._id},activeTab:"unit&n=menu&n=room",children:(0,g.jsxs)("div",{className:r.Z.hostel_warden_card,children:[(0,g.jsx)("img",{src:null!==U&&void 0!==U&&U.hostel_unit_photo?"".concat(u.yI,"/").concat(null===U||void 0===U?void 0:U.hostel_unit_photo):"/images/member_tab/class/default_avatar.svg",alt:""}),(0,g.jsxs)("div",{className:r.Z.warden_card_text,children:[(0,g.jsx)("h6",{children:null!==(t=null===U||void 0===U?void 0:U.hostel_unit_name)&&void 0!==t?t:""}),(0,g.jsx)("p",{children:"".concat(null!==(n=null===U||void 0===U||null===(i=U.hostel_unit_head)||void 0===i?void 0:i.staffFirstName)&&void 0!==n?n:""," ").concat(null!==(l=null===U||void 0===U||null===(s=U.hostel_unit_head)||void 0===s?void 0:s.staffMiddleName)&&void 0!==l?l:""," ").concat(null!==(o=null===U||void 0===U||null===(a=U.hostel_unit_head)||void 0===a?void 0:a.staffLastName)&&void 0!==o?o:"")})]})]})}):"HOSTEL_SEARCH"===O?(0,g.jsx)(v.rU,{to:"/q/".concat(q.username,"/hostel/profile?a=unit&n=menu&n=room"),state:{...F,huid:null===U||void 0===U?void 0:U._id},children:(0,g.jsxs)("div",{className:r.Z.hostel_warden_card,children:[(0,g.jsx)("img",{src:null!==U&&void 0!==U&&U.hostel_unit_photo?"".concat(u.yI,"/").concat(null===U||void 0===U?void 0:U.hostel_unit_photo):"/images/member_tab/class/default_avatar.svg",alt:""}),(0,g.jsxs)("div",{className:r.Z.warden_card_text,children:[(0,g.jsx)("h6",{children:null!==(d=null===U||void 0===U?void 0:U.hostel_unit_name)&&void 0!==d?d:""}),(0,g.jsx)("p",{children:"".concat(null!==(x=null===U||void 0===U||null===(f=U.hostel_unit_head)||void 0===f?void 0:f.staffFirstName)&&void 0!==x?x:""," ").concat(null!==(p=null===U||void 0===U||null===(j=U.hostel_unit_head)||void 0===j?void 0:j.staffMiddleName)&&void 0!==p?p:""," ").concat(null!==(I=null===U||void 0===U||null===(N=U.hostel_unit_head)||void 0===N?void 0:N.staffLastName)&&void 0!==I?I:"")})]})]})}):"INSTITUTE"===P?(0,g.jsx)(m.Z,{carryParentState:{...F,huid:null===U||void 0===U?void 0:U._id,unitName:null===U||void 0===U?void 0:U.hostel_unit_name},activeTab:"RENEWAL"===O?"request&renewal&application":"unit&n=info",children:(0,g.jsxs)("div",{className:r.Z.hostel_warden_card,children:[(0,g.jsx)("img",{src:null!==U&&void 0!==U&&U.hostel_unit_photo?"".concat(u.yI,"/").concat(null===U||void 0===U?void 0:U.hostel_unit_photo):"/images/member_tab/class/default_avatar.svg",alt:""}),(0,g.jsxs)("div",{className:r.Z.warden_card_text,children:[(0,g.jsx)("h6",{children:null!==(S=null===U||void 0===U?void 0:U.hostel_unit_name)&&void 0!==S?S:""}),(0,g.jsx)("p",{children:"".concat(null!==(b=null===U||void 0===U||null===(Z=U.hostel_unit_head)||void 0===Z?void 0:Z.staffFirstName)&&void 0!==b?b:""," ").concat(null!==(w=null===U||void 0===U||null===(H=U.hostel_unit_head)||void 0===H?void 0:H.staffMiddleName)&&void 0!==w?w:""," ").concat(null!==(y=null===U||void 0===U||null===(E=U.hostel_unit_head)||void 0===E?void 0:E.staffLastName)&&void 0!==y?y:"")})]})]})}):(0,g.jsx)(c.Z,{carryParentState:{...F,huid:null===U||void 0===U?void 0:U._id,unitName:null===U||void 0===U?void 0:U.hostel_unit_name},activeTab:"RENEWAL"===O?"request&renewal&application":"unit&n=info",callApi:M,children:(0,g.jsxs)("div",{className:r.Z.hostel_warden_card,children:[(0,g.jsx)("img",{src:null!==U&&void 0!==U&&U.hostel_unit_photo?"".concat(u.yI,"/").concat(null===U||void 0===U?void 0:U.hostel_unit_photo):"/images/member_tab/class/default_avatar.svg",alt:""}),(0,g.jsxs)("div",{className:r.Z.warden_card_text,children:[(0,g.jsx)("h6",{children:null!==(C=null===U||void 0===U?void 0:U.hostel_unit_name)&&void 0!==C?C:""}),(0,g.jsx)("p",{children:"".concat(null!==(T=null===U||void 0===U||null===(A=U.hostel_unit_head)||void 0===A?void 0:A.staffFirstName)&&void 0!==T?T:""," ").concat(null!==(R=null===U||void 0===U||null===(k=U.hostel_unit_head)||void 0===k?void 0:k.staffMiddleName)&&void 0!==R?R:""," ").concat(null!==(D=null===U||void 0===U||null===(L=U.hostel_unit_head)||void 0===L?void 0:L.staffLastName)&&void 0!==D?D:"")})]})]})})})};var f=n(10406),p=n(98094),j=n(46876),I=n(97655),N=n(98734),S=n(36665),b=n(87457);const Z=e=>{var t,n,s;let{onClose:a,openAs:d,openUnitMenu:r,hid:c,onEdit:_,instituteId:h,onRefetch:v}=e;const{t:m}=(0,l.$G)(),[x,f]=(0,i.useState)({hostel_unit_name:"EDIT"===d?null===r||void 0===r?void 0:r.hostel_unit_name:"",sid:"EDIT"===d?null===r||void 0===r?void 0:r.sid:""}),[p,Z]=(0,i.useState)(!1),[w,H]=(0,i.useState)(""),[y,E]=(0,i.useState)(""),[C,T]=(0,i.useState)(!1),[A]=(0,o.fe)();(0,i.useEffect)((()=>{"EDIT"===d&&f({hostel_unit_name:null===r||void 0===r?void 0:r.hostel_unit_name,sid:null===r||void 0===r?void 0:r.sid})}),[d]);return(0,g.jsxs)(S.Z,{onClose:a,children:[(0,g.jsxs)("div",{className:b.Z.add_category_modal,children:[(0,g.jsxs)("div",{className:b.Z.add_category_modal_title,children:[(0,g.jsx)("h6",{children:m("EDIT"===d?"edit_fee_head":"add_new_unit")}),(0,g.jsx)("img",{src:"/images/close-post-icon.svg",onClick:a,alt:""})]}),(0,g.jsx)(I.Z,{labelText:m("hoste_unit_name"),placeholder:m("hoste_unit_name_placeholder"),name:"hostel_unit_name",value:null===x||void 0===x?void 0:x.hostel_unit_name,type:"text",onChange:e=>f((t=>({...t,hostel_unit_name:e.target.value}))),errorShow:y.hostel_unit_name}),(0,g.jsxs)("div",{className:b.Z.leading_person_container,onClick:()=>Z(!0),children:[(0,g.jsx)("img",{src:null!==w&&void 0!==w&&w.staffProfilePhoto?"".concat(u.yI,"/").concat(w.staffProfilePhoto):"/images/user-icon.svg",alt:"avatar"}),(0,g.jsxs)("div",{className:b.Z.leading_person_text,children:[(0,g.jsx)("h6",{children:w?"".concat(null!==(t=null===w||void 0===w?void 0:w.staffFirstName)&&void 0!==t?t:""," \n                  ").concat(null!==(n=null===w||void 0===w?void 0:w.staffMiddleName)&&void 0!==n?n:"","\n                  ").concat(null!==(s=null===w||void 0===w?void 0:w.staffLastName)&&void 0!==s?s:""," "):m("secect_hostel_unit_head")}),(0,g.jsxs)("p",{children:[m("search_joined_list")," ",y.sid&&(0,g.jsxs)("span",{style:{color:"red",marginLeft:"15px"},children:["* ",m("form_require_label")]})]})]})]}),(0,g.jsx)("button",{className:b.Z.set_fees_structure_btn,title:"Add Hostel Unit",onClick:()=>{const e=(e=>{const t={};for(let n in e)e[n]||(t[n]="".concat(n," is required!"));return t})(x);let t=!1;for(let n in e)if(n){t=!0;break}t?E(e):"EDIT"===d?_(x):(T((e=>!e)),A({hid:c,addHostel:x}).then((()=>{v(),a(),T((e=>!e))})).catch({}))},style:{justifyContent:"center"},children:m("EDIT"===d?"update":"create")}),C&&(0,g.jsx)(N.Z,{})]}),p&&(0,g.jsx)(j.default,{assignHead:p,headSelect:e=>{H(e),f((t=>({...t,sid:null===e||void 0===e?void 0:e._id}))),Z((e=>!e))},title:m("secect_hostel_unit_head"),onClose:()=>Z((e=>!e)),viewAs:"ADMISSION_ADMIN",instituteId:h})]})},w=e=>{let{hid:t,instituteId:n,carryParentState:u,viewAs:r,callApi:c,pageOpenAs:_}=e;const{t:h}=(0,l.$G)(),[v,m]=(0,i.useState)(!1),[j,I]=(0,s.YD)(),[N,S]=(0,i.useState)(1),[b,w]=(0,i.useState)(!0),[H,y]=(0,i.useState)(!0),[E,C]=(0,i.useState)([]),[T,A]=(0,i.useState)(""),[R,k]=(0,i.useState)(!1),{getHostelUnitList:D,getHostelUnitListRefetch:L}=(0,o.RO)({data:{hid:t,page:N,limit:10,search:T},skip:!t});(0,i.useEffect)((()=>{t&&(y(!0),L())}),[t,N,T,L]),(0,i.useEffect)((()=>{I&&b&&S((e=>e+1))}),[I,b]),(0,i.useEffect)((()=>{var e,t;R?(C(null===D||void 0===D?void 0:D.all_units),y(!1),k(!1)):T?(C(null===D||void 0===D?void 0:D.all_units),y(!1)):null!==D&&void 0!==D&&D.all_units?(C((e=>{var t,n;return null===(t=[...new Set(null===(n=[...e,...null===D||void 0===D?void 0:D.all_units])||void 0===n?void 0:n.map(JSON.stringify))])||void 0===t?void 0:t.map(JSON.parse)})),y(!1)):0===(null===D||void 0===D||null===(t=D.all_units)||void 0===t?void 0:t.length)&&y(!1);10===(null===D||void 0===D||null===(e=D.all_units)||void 0===e?void 0:e.length)?w(!0):w(!1)}),[null===D||void 0===D?void 0:D.all_units]);const U=(0,i.useCallback)((0,a.debounce)((e=>A(e)),500),[]),F=()=>{m((e=>!e))};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:f.Z.with_search,children:[(0,g.jsx)("h6",{children:h("hostel_units")}),(0,g.jsx)("section",{className:f.Z.search_container,children:(0,g.jsxs)("div",{className:f.Z.search_container_input,children:[(0,g.jsx)("img",{className:f.Z.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),(0,g.jsx)("input",{type:"text",placeholder:"Search hostel units...",onChange:e=>{U(e.target.value)}})]})})]}),(0,g.jsx)(p.Z,{customStyle:{marginTop:"0.5rem",marginBottom:"0.6rem",width:"100%"}}),"STUDENT"===r||"HOSTEL_SEARCH"===r||"RENEWAL"===r?"":(0,g.jsx)("p",{className:f.Z.add_new_category,onClick:F,children:h("create_new_unit")}),null===E||void 0===E?void 0:E.map(((e,t)=>(null===E||void 0===E?void 0:E.length)===t+1?(0,g.jsx)("div",{ref:j,children:(0,g.jsx)(x,{hostelUnit:e,carryParentState:u,viewAs:r,callApi:c,pageOpenAs:_})},null===e||void 0===e?void 0:e._id):(0,g.jsx)(x,{hostelUnit:e,carryParentState:u,viewAs:r,callApi:c,pageOpenAs:_},null===e||void 0===e?void 0:e._id))),H&&(0,g.jsx)(d.Z,{}),v&&(0,g.jsx)(Z,{onClose:F,hid:t,instituteId:n,onRefetch:()=>{S(1),k(!0),y(!0),L()}})]})}},15214:(e,t,n)=>{n.d(t,{Z:()=>i});const i={navbarr:"InstituteHostel_navbarr__wZjxN",mainbody:"InstituteHostel_mainbody__bd1xS",sidebar:"InstituteHostel_sidebar__4a950",rightbody:"InstituteHostel_rightbody__uUUef",admission_tab_tabs:"InstituteHostel_admission_tab_tabs__Uu9aY",item:"InstituteHostel_item__9ZoQd",itemIcon:"InstituteHostel_itemIcon__NShBD",funds2:"InstituteHostel_funds2__BHTCi",fundscontent:"InstituteHostel_fundscontent__HeoyA",sidebarbottomitem:"InstituteHostel_sidebarbottomitem__+Xvnw",namee:"InstituteHostel_namee__Y5L8H",desig:"InstituteHostel_desig__gHfIt",balanceItem:"InstituteHostel_balanceItem__W2AJ1",fundbtn:"InstituteHostel_fundbtn__h4c6p",institute_hostel_container:"InstituteHostel_institute_hostel_container__QKng2",institute_hostel_container_border:"InstituteHostel_institute_hostel_container_border__XBL5F",institute_hostel_title:"InstituteHostel_institute_hostel_title__U31Id",hostel_warden_card:"InstituteHostel_hostel_warden_card__vs093",warden_card_text:"InstituteHostel_warden_card_text__kFeau",with_search:"InstituteHostel_with_search__shUwR",search_container:"InstituteHostel_search_container__s6aFf",search_container_input:"InstituteHostel_search_container_input__Z7rCU",searchIcon:"InstituteHostel_searchIcon__eabuR",student_cerfificate_container:"InstituteHostel_student_cerfificate_container__HGcvy",student_issued_btn:"InstituteHostel_student_issued_btn__hrgB6"}}}]);
//# sourceMappingURL=45658.d83311ed.chunk.js.map