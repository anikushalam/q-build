"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[3775],{63775:function(e,l,i){i.r(l),i.d(l,{default:function(){return S}});var n=i(39230),o=i(16871),t=i(63687),a=i(21348),d=i(90904),v=i(56959),s=i(36132),c=i(29439),r=i(43504),u=i(72791),m=i(38668),f=i(20659),_=i(2350),h=i(80184),x=function(){var e,l,i=(0,n.$G)().t,t=(0,o.TH)(),a=(0,o.UO)(),d=(0,o.s0)(),v=(0,r.lr)(),x=(0,c.Z)(v,1)[0],j=(0,u.useState)(m.b),g=(0,c.Z)(j,2),y=g[0],p=g[1],b=(0,s.fn)({data:{sid:null===(e=t.state)||void 0===e?void 0:e.staffId},skip:!(null!==(l=t.state)&&void 0!==l&&l.staffId)}).lmsStaffLeaveOverviewCount;(0,u.useEffect)((function(){if(null!==b&&void 0!==b&&b.staff){var e=null===b||void 0===b?void 0:b.staff,l=m.b;l[1].count=null===e||void 0===e?void 0:e.casual_leave,l[2].count=null===e||void 0===e?void 0:e.medical_leave,l[3].count=null===e||void 0===e?void 0:e.sick_leave,l[4].count=null===e||void 0===e?void 0:e.c_off_leave,l[5].count=null===e||void 0===e?void 0:e.off_duty_leave,l[6].count=null===e||void 0===e?void 0:e.lwp_leave,l[7].count=null===e||void 0===e?void 0:e.commuted_leave,l[8].count=null===e||void 0===e?void 0:e.maternity_leave,l[9].count=null===e||void 0===e?void 0:e.paternity_leave,l[10].count=null===e||void 0===e?void 0:e.quarantine_leave,l[11].count=null===e||void 0===e?void 0:e.half_pay_leave,l[12].count=null===e||void 0===e?void 0:e.study_leave,l[13].count=null===e||void 0===e?void 0:e.sabbatical_leave,l[14].count=null===e||void 0===e?void 0:e.special_disability_leave,l[15].count=null===e||void 0===e?void 0:e.winter_vacation_leave,l[16].count=null===e||void 0===e?void 0:e.summer_vacation_leave,l[17].count=null===e||void 0===e?void 0:e.child_adoption_leave,l[18].count=null===e||void 0===e?void 0:e.bereavement_leave,p(l)}}),[null===b||void 0===b?void 0:b.staff]);var w=function(e){var l,i,n="Institute"===(null===(l=t.state)||void 0===l?void 0:l.urlOffSet)?"/q/".concat(a.username,"/institute/member/lms/?type=staff-overview&category=").concat(e):"Staff"===(null===(i=t.state)||void 0===i?void 0:i.urlOffSet)?"/q/".concat(a.username,"/member?a=leave&n=overview&category=").concat(e):"/q/".concat(a.username,"/member/staff/lms/?type=staff-overview&category=").concat(e);d(n,{state:t.state})};return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(f.Z,{customTileContainer:{flexWrap:"wrap",marginBottom:"1rem"},children:null===y||void 0===y?void 0:y.map((function(e){return(0,h.jsxs)(_.Z,{tile:e,onTile:w,customTileChild:"All Leave"===e.key?{height:"2.5rem"}:{flexDirection:"All Leave"===e.key?"row":"column",alignItems:"flex-start"},activeTile:x.get("category"),children:[(0,h.jsx)("h6",{children:i(null===e||void 0===e?void 0:e.name)}),(null===e||void 0===e?void 0:e.count)>=0?(0,h.jsxs)("p",{children:[i("available")," ",": "," ",null===e||void 0===e?void 0:e.count," "]}):null]})}))})})},j=(0,u.memo)(x),g=i(23441),y=i(91427),p=i(1669),b=i(2651),w=i(98684),Z=i(97892),N=i.n(Z),k=i(82824),L=i(1095),Y=i(55050),T=function(e){var l,i,o,t,a,d,v,s,c,r,u,m,f,_,x,j,g,y,p,b,Z,T,M,S,D,F,q,C,I,O,W,A,E,J,G,H,$,U,B,z,K=e.leave,P=(0,n.$G)().t;return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:Y.Z.lmsr_card,children:[(0,h.jsx)("div",{className:Y.Z.lmsrc_card,children:(0,h.jsxs)("div",{className:Y.Z.lmsrc_card_inner,children:[(0,h.jsx)("img",{src:"".concat(w.D3,"/leave-raise.svg"),alt:"leave icon"}),(0,h.jsxs)("div",{className:Y.Z.lmsrci_text,children:[(0,h.jsxs)("h6",{style:{fontWeight:"400"},children:[P("leave_type")," "," : ",null===K||void 0===K?void 0:K.leave_type]}),(0,h.jsxs)("p",{children:[P("raised_on")," ",(0,k.J)(null===K||void 0===K?void 0:K.createdAt,"LT"),","," ",N()(null===K||void 0===K?void 0:K.createdAt).format("DD MMM YYYY")]}),(0,h.jsxs)("p",{children:[P("for_dates")," "," : ",null===K||void 0===K||null===(l=K.date)||void 0===l?void 0:l.map((function(e){return(0,h.jsxs)("span",{children:[e,", "," "]},e)}))]})]})]})}),null!==K&&void 0!==K&&null!==(i=K.recommend)&&void 0!==i&&null!==(o=i.recommend_by)&&void 0!==o&&o.staffFirstName?(0,h.jsx)("div",{className:Y.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,h.jsxs)("p",{children:[P("recomend_on")," ",(0,k.J)(null===K||void 0===K||null===(t=K.recommend)||void 0===t?void 0:t.recommend_on,"LT"),","," ",N()(null===K||void 0===K||null===(a=K.recommend)||void 0===a?void 0:a.recommend_on).format("DD MMM YYYY"),", ",P("recomending_by"),"".concat(null!==(d=null===K||void 0===K||null===(v=K.recommend)||void 0===v||null===(s=v.recommend_by)||void 0===s?void 0:s.staffFirstName)&&void 0!==d?d:""," ").concat(null!==(c=null===K||void 0===K||null===(r=K.recommend)||void 0===r||null===(u=r.recommend_by)||void 0===u?void 0:u.staffMiddleName)&&void 0!==c?c:""," ").concat(null!==(m=null===K||void 0===K||null===(f=K.recommend)||void 0===f||null===(_=f.recommend_by)||void 0===_?void 0:_.staffLastName)&&void 0!==m?m:"")]})}):null,null!==K&&void 0!==K&&null!==(x=K.review)&&void 0!==x&&null!==(j=x.review_by)&&void 0!==j&&j.staffFirstName?(0,h.jsx)("div",{className:Y.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,h.jsxs)("p",{children:[P("reviewed_on")," ",(0,k.J)(null===K||void 0===K||null===(g=K.review)||void 0===g?void 0:g.review_on,"LT"),","," ",N()(null===K||void 0===K||null===(y=K.review)||void 0===y?void 0:y.review_on).format("DD MMM YYYY"),", ",P("reviewing_by"),"".concat(null!==(p=null===K||void 0===K||null===(b=K.review)||void 0===b||null===(Z=b.review_by)||void 0===Z?void 0:Z.staffFirstName)&&void 0!==p?p:""," ").concat(null!==(T=null===K||void 0===K||null===(M=K.review)||void 0===M||null===(S=M.review_by)||void 0===S?void 0:S.staffMiddleName)&&void 0!==T?T:""," ").concat(null!==(D=null===K||void 0===K||null===(F=K.review)||void 0===F||null===(q=F.review_by)||void 0===q?void 0:q.staffLastName)&&void 0!==D?D:"")]})}):null,null!==K&&void 0!==K&&null!==(C=K.sanction)&&void 0!==C&&null!==(I=C.sanction_by)&&void 0!==I&&I.staffFirstName?(0,h.jsx)("div",{className:Y.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,h.jsxs)("p",{children:[P("sanction_on")," ",(0,k.J)(null===K||void 0===K||null===(O=K.sanction)||void 0===O?void 0:O.sanction_on,"LT"),","," ",N()(null===K||void 0===K||null===(W=K.sanction)||void 0===W?void 0:W.sanction_on).format("DD MMM YYYY"),", ",P("sanctioning_by"),"".concat(null!==(A=null===K||void 0===K||null===(E=K.sanction)||void 0===E||null===(J=E.sanction_by)||void 0===J?void 0:J.staffFirstName)&&void 0!==A?A:""," ").concat(null!==(G=null===K||void 0===K||null===(H=K.sanction)||void 0===H||null===($=H.sanction_by)||void 0===$?void 0:$.staffMiddleName)&&void 0!==G?G:""," ").concat(null!==(U=null===K||void 0===K||null===(B=K.sanction)||void 0===B||null===(z=B.sanction_by)||void 0===z?void 0:z.staffLastName)&&void 0!==U?U:"")]})}):null,(0,h.jsx)("div",{className:Y.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,h.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[P("reason")," "," : ",null===K||void 0===K?void 0:K.reason]})}),(null===K||void 0===K?void 0:K.attach)&&(0,h.jsx)("div",{className:Y.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,h.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[P("attachment")," "," : ",(0,h.jsx)("a",{href:"".concat(L.q2,"/").concat(null===K||void 0===K?void 0:K.attach),target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,h.jsx)("span",{className:Y.Z.lmsrc_date,children:P("view_attachment")})})]})})]})})},M=function(){var e,l,i,n,t=(0,o.TH)(),a=(0,r.lr)(),d=(0,c.Z)(a,1)[0],v=(0,u.useState)(1),m=(0,c.Z)(v,2),f=m[0],_=m[1],x=(0,u.useState)(!0),j=(0,c.Z)(x,2),w=j[0],Z=j[1],N=(0,g.YD)(),k=(0,c.Z)(N,2),L=k[0],Y=k[1],M=(0,s.xC)({data:{sid:null===(e=t.state)||void 0===e?void 0:e.staffId,page:f,limit:10,category:"All Leave"===d.get("category")?"":d.get("category")},skip:!(null!==(l=t.state)&&void 0!==l&&l.staffId)}),S=M.lmsStaffLeaveOverviewList,D=M.lmsStaffLeaveOverviewListLoading;return(0,u.useEffect)((function(){Y&&w&&_((function(e){return e+1}))}),[Y,w]),(0,u.useEffect)((function(){var e;if(null!==S&&void 0!==S&&null!==(e=S.list)&&void 0!==e&&e.length){var l,i=(0,y.f)(null===S||void 0===S||null===(l=S.list)||void 0===l?void 0:l.length);Z((function(){return i}))}}),[null===S||void 0===S?void 0:S.list]),(0,u.useEffect)((function(){d.get("category")&&_((function(e){return 1}))}),[d.get("category")]),(0,h.jsxs)(h.Fragment,{children:[null===S||void 0===S||null===(i=S.list)||void 0===i?void 0:i.map((function(e,l){var i;return(null===S||void 0===S||null===(i=S.list)||void 0===i?void 0:i.length)===l+1?(0,h.jsx)("div",{ref:L,children:(0,h.jsx)(T,{leave:e})},null===e||void 0===e?void 0:e._id):(0,h.jsx)(T,{leave:e},null===e||void 0===e?void 0:e._id)})),D?(0,h.jsx)(p.Z,{}):0===(null===S||void 0===S||null===(n=S.list)||void 0===n?void 0:n.length)&&(0,h.jsx)(b.Z,{title:"No ".concat(d.get("category")," taken.")})]})},S=function(e){var l,i,c,r,m,f,_,x,g=e.isStaff,y=(0,n.$G)().t,p=(0,o.TH)(),b=(0,o.UO)(),Z=(0,o.s0)(),N=(0,s.fn)({data:{sid:null===(l=p.state)||void 0===l?void 0:l.staffId},skip:!(null!==(i=p.state)&&void 0!==i&&i.staffId)}).lmsStaffLeaveOverviewCount,k=(0,u.useCallback)((function(){var e,l="Institute"===(null===(e=p.state)||void 0===e?void 0:e.urlOffSet)?"/q/".concat(b.username,"/institute/member/lms"):"/q/".concat(b.username,"/member/staff/lms");Z(l,{state:p.state})}),[Z,p.state,b.username]);return(0,h.jsx)(h.Fragment,{children:g?(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(a.Z,{children:[(0,h.jsx)(j,{}),(0,h.jsx)(M,{})]})}):(0,h.jsxs)(t.Z,{children:[(0,h.jsx)(a.Z,{children:(0,h.jsxs)("div",{className:v.Z.fm_header_container,children:[(0,h.jsxs)("div",{className:v.Z.fm_header_start_container,children:[(0,h.jsx)("img",{alt:"search icon",src:"".concat(w.Fk,"/back.svg"),style:{height:"2rem",width:"2rem"},onClick:k}),(0,h.jsxs)("h6",{children:[(0,h.jsx)("span",{style:{fontWeight:"400"},children:y("name")}),": ",null!==(c=null===p||void 0===p||null===(r=p.state)||void 0===r?void 0:r.staffName)&&void 0!==c?c:""]})]}),(0,h.jsxs)("div",{className:v.Z.fm_header_container,style:{gap:"1rem"},children:[(0,h.jsxs)("h6",{children:[(0,h.jsx)("span",{style:{fontWeight:"400"},children:y("total_leave_available")}),": ",null!==(m=null===N||void 0===N||null===(f=N.overview)||void 0===f?void 0:f.total_leave_available)&&void 0!==m?m:0]}),(0,h.jsxs)("h6",{children:[(0,h.jsx)("span",{style:{fontWeight:"400"},children:y("total_leave_taken")}),": ",null!==(_=null===N||void 0===N||null===(x=N.overview)||void 0===x?void 0:x.total_leave_taken)&&void 0!==_?_:0]})]})]})}),(0,h.jsx)(d.Z,{}),(0,h.jsxs)(a.Z,{children:[(0,h.jsx)(j,{}),(0,h.jsx)(M,{})]})]})})}}}]);
//# sourceMappingURL=3775.f5bc4f1a.chunk.js.map