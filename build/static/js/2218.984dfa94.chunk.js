"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[2218],{2218:(i,l,o)=>{o.r(l),o.d(l,{default:()=>r});var d=o(72791),t=o(9447),e=o(12923),n=o(41716),s=o(39230),v=o(95048),u=o(16256),a=o(70092),c=o(39480),h=o(80184);const r=i=>{var l,o,r,f;let{institute:p}=i;const{t:k}=(0,s.$G)(),[w,_]=(0,d.useState)(!1),b=(0,v.v9)((i=>i.idChange)),m=(0,v.v9)((i=>i.postChange.dashboardPosts)),g=(0,v.I0)(),[I]=(0,e.VN)(),[x]=(0,e.yx)(),[j]=(0,t.KW)(),[C]=(0,t.n6)(),{allDashPost:F,allDashPostRefetch:P}=(0,t.hZ)({data:{id:null===b||void 0===b?void 0:b.id,viewAs:u.UJ},skip:!1}),{oneInstituteProfileRefetch:N}=(0,c.p0)({data:{id:null===p||void 0===p?void 0:p._id,type:"ID"},skip:!(null!==p&&void 0!==p&&p._id)}),{instituteOwnFollowingList:Z,instituteOwnFollowingListRefetch:L}=(0,e.d5)({data:{page:1,id:null===p||void 0===p?void 0:p._id,limit:100},skip:!(null!==p&&void 0!==p&&p._id)}),{instituteFollowList:R,instituteFollowListRefetch:y}=(0,e.Tv)({list:{page:1,id:null===p||void 0===p?void 0:p._id,limit:100},skip:!(null!==p&&void 0!==p&&p._id)});(0,d.useEffect)((()=>{null!==p&&void 0!==p&&p._id&&(y(),L())}),[null===p||void 0===p?void 0:p._id]),(0,d.useEffect)((()=>{null!==F&&void 0!==F&&F.post&&g(a.p.followPost({post:null===F||void 0===F?void 0:F.post,profilePost:"dash"}))}),[null===F||void 0===F?void 0:F.post]);return(0,h.jsx)(h.Fragment,{children:null!==p&&void 0!==p&&null!==(l=p.blockedBy)&&void 0!==l&&l.includes(null===b||void 0===b?void 0:b.id)?(0,h.jsx)("div",{className:n.Z.profileedit,title:"Unblock Institute",children:(0,h.jsx)("button",{onClick:()=>{_(!0),C({blockId:null===p||void 0===p?void 0:p._id}).then((()=>{N(),_(!1)})).catch({})},children:k("blocked")})}):null!==Z&&void 0!==Z&&null!==(o=Z.following)&&void 0!==o&&o.some((i=>(null===i||void 0===i?void 0:i._id)===(null===b||void 0===b?void 0:b.id)))?(0,h.jsx)("div",{className:n.Z.profileedit,title:"Block Institute",children:(0,h.jsx)("button",{onClick:()=>{_(!0),j({blockId:null===p||void 0===p?void 0:p._id}).then((()=>{N(),_(!1)})).catch({})},children:k("block")})}):null!==p&&void 0!==p&&null!==(r=p.follower)&&void 0!==r&&r.includes(null===b||void 0===b?void 0:b.id)||null!==R&&void 0!==R&&null!==(f=R.iFollowers)&&void 0!==f&&f.some((i=>(null===i||void 0===i?void 0:i._id)===(null===b||void 0===b?void 0:b.id)))?(0,h.jsx)("div",{className:n.Z.profileedit,title:"Unfollow Institute",children:(0,h.jsx)("button",{onClick:()=>{_(!0);const i=(i=>{const l=[];for(let o=0;o<(null===m||void 0===m?void 0:m.length);o++)m[o].author!==i&&l.push(m[o]);return l})(null===p||void 0===p?void 0:p._id);g(a.p.unfollowPost({posts:i})),x({followId:null===p||void 0===p?void 0:p._id}).then((i=>{i.data.message&&(y(),_(!1))})).catch({})},disabled:w,children:k("unfollow")})}):(0,h.jsx)("div",{className:n.Z.profileedit,title:"Follow Institute",children:(0,h.jsx)("button",{onClick:()=>{_(!0),I({followId:null===p||void 0===p?void 0:p._id}).then((i=>{i.data.message&&(y(),P(),_(!1))})).catch({})},disabled:w,children:k("follow")})})})}}}]);
//# sourceMappingURL=2218.984dfa94.chunk.js.map