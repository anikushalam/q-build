"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[83058],{47184:(e,t,n)=>{n.d(t,{Z:()=>a});n(72791);var o=n(46807),i=n(80184);const a=e=>{let{dynamicImage:t,customStyle:n}=e;return(0,i.jsx)("img",{src:t,alt:"Avatar icon",style:{...n},className:o.Z.avatar_image})}},8793:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(72791),i=n(11105),a=n(80184);const m=e=>{let{children:t}=e;return(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)(i.Z,{}),children:t})}},83058:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var o=n(72791),i=n(39230),a=n(95048),m=n(23441),l=n(9447),c=n(70092);const d={addComment:"AllComments_addComment__rGs-z",imgcontainer:"AllComments_imgcontainer__Klc4u",inputContainer:"AllComments_inputContainer__kbuUj",hr:"AllComments_hr__lGcA1",icons:"AllComments_icons__LaS0W",btn:"AllComments_btn__6H38+",comment_not_open:"AllComments_comment_not_open__EwMnj"};var s=n(69721);const r={eachComment:"EachComment_eachComment__tPduK",imgcontainer:"EachComment_imgcontainer__FiCLj",commentText:"EachComment_commentText__p-lso",likeReply:"EachComment_likeReply__yBW6e",eachCommentContainer:"EachComment_eachCommentContainer__Ed4yT",dots:"EachComment_dots__rL2SC",time:"EachComment_time__jOd3S"};var v=n(13688),u=n(16256),h=n(8793),_=n(80184);const C=o.lazy((()=>n.e(5407).then(n.bind(n,5407))));const p=function(e){let{comment:t,pid:n}=e;const[m,d]=(0,o.useState)(!1),[p,j]=o.useState(!0),{t:x}=(0,i.$G)(),g=(0,a.v9)((e=>e.idChange)),f=(0,a.I0)(),{commentLike:k,commentLikeRefetch:N}=(0,l.uD)({ids:{cid:null===t||void 0===t?void 0:t._id,id:null===g||void 0===g?void 0:g.id,viewAs:u.UJ},skip:p});return o.useEffect((()=>{k&&(j(!0),f(c.p.addCommentLike({postId:n,commentId:null===t||void 0===t?void 0:t._id,like:k.allLikeCount})))}),[k]),(0,_.jsxs)("div",{className:r.eachCommentContainer,children:[(0,_.jsxs)("div",{className:r.eachComment,children:[(0,_.jsx)("div",{className:r.imgcontainer,children:(0,_.jsx)("img",{src:"1"!==(null===t||void 0===t?void 0:t.authorPhotoId)?"".concat(s.yI,"/").concat(t.authorProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:""})}),(0,_.jsxs)("div",{className:r.commentText,children:[(0,_.jsx)("h6",{children:null===t||void 0===t?void 0:t.authorUserName}),(0,_.jsx)("p",{children:null===t||void 0===t?void 0:t.commentDescription})]})]}),(0,_.jsxs)("div",{className:r.likeReply,children:[(0,_.jsxs)("p",{onClick:()=>{j(!1),N()},children:[x("Like")," ",(0,_.jsx)("span",{children:null===t||void 0===t?void 0:t.allLikeCount})]}),(0,_.jsxs)("p",{onClick:()=>d(!m),children:[x("reply")," ",(0,_.jsx)("span",{children:null===t||void 0===t?void 0:t.allChildCommentCount})," "]})]}),(0,_.jsx)("div",{className:r.nested,children:(0,_.jsx)(h.Z,{children:m&&(null===t||void 0===t?void 0:t._id)&&(0,_.jsx)(C,{pcid:null===t||void 0===t?void 0:t._id,pid:n,allChildCommentCount:null===t||void 0===t?void 0:t.allChildCommentCount})})}),(0,_.jsx)("div",{className:r.dots,children:(0,_.jsx)("p",{className:r.time,children:(0,v.WU)(null===t||void 0===t?void 0:t.createdAt)})})]})};var j=n(47184),x=n(39480);const g=e=>{var t,n;let{pid:r,commentCount:v,commentCountIncrement:h}=e;const[C,g]=(0,o.useState)(1),{t:f}=(0,i.$G)(),k=(0,o.useRef)(""),[N,A]=(0,m.YD)(),[I,y]=(0,o.useState)(!0),E=(0,a.I0)(),P=(0,a.v9)((e=>e.postChange.comments)),b=(0,a.v9)((e=>e.idChange.id)),{allPostComment:L,allPostCommentRefetch:R}=(0,l.RR)({data:{pid:r||"",viewAs:u.UJ,page:C,limit:10},skip:!1}),[S]=(0,l.es)(),{oneInstituteDashboard:U,oneInstituteDashboardRefetch:w}=(0,x.gq)({id:b,skip:!b});(0,o.useEffect)((()=>{b&&w()}),[b,w]),(0,o.useEffect)((()=>{A&&I&&g((e=>e+1))}),[A,I]),(0,o.useEffect)((()=>{R()}),[C,R]),(0,o.useEffect)((()=>{null!==L&&void 0!==L&&L.comment&&E(c.p.addComment({postId:r,comment:null===L||void 0===L?void 0:L.comment})),10===(null===L||void 0===L?void 0:L.comment.length)?y(!0):y(!1)}),[null===L||void 0===L?void 0:L.comment,E,r]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:d.addComment,children:[(0,_.jsx)("div",{className:d.imgcontainer,children:(0,_.jsx)(j.Z,{dynamicImage:"1"!==(null===U||void 0===U||null===(t=U.institute)||void 0===t?void 0:t.photoId)?"".concat(s.yI,"/").concat(null===U||void 0===U||null===(n=U.institute)||void 0===n?void 0:n.insProfilePhoto):"/images/ins_default_profile.svg"})}),(0,_.jsxs)("div",{className:d.inputContainer,children:[(0,_.jsx)("input",{type:"text",ref:k,placeholder:f("all_comment"),className:"form-control ".concat(d.searchinput)}),(0,_.jsxs)("div",{className:d.icons,children:[(0,_.jsx)("img",{src:"/images/img-icon.svg",alt:""}),(0,_.jsx)("img",{src:"/images/emoji-icon.svg",alt:""})]})]})]}),(0,_.jsx)("div",{className:d.btn,onClick:()=>{h(++v),S({comment:{commentDescription:k.current.value},pid:r,viewAs:u.UJ}).then((e=>{var t,n,o,i,a,m,l,d,s,v;E(c.p.addCreatedComment({postId:r,comment:{allChildCommentCount:null===(t=e.data)||void 0===t?void 0:t.comment.allChildCommentCount,allLikeCount:null===(n=e.data)||void 0===n?void 0:n.comment.allLikeCount,author:null===(o=e.data)||void 0===o?void 0:o.comment.author,authorName:null===(i=e.data)||void 0===i?void 0:i.comment.authorName,authorPhotoId:null===(a=e.data)||void 0===a?void 0:a.comment.authorPhotoId,authorProfilePhoto:null===(m=e.data)||void 0===m?void 0:m.comment.authorProfilePhoto,authorUserName:null===(l=e.data)||void 0===l?void 0:l.comment.authorUserName,commentDescription:null===(d=e.data)||void 0===d?void 0:d.comment.commentDescription,createdAt:null===(s=e.data)||void 0===s?void 0:s.comment.createdAt,_id:null===(v=e.data)||void 0===v?void 0:v.comment._id}}))})).catch({}),k.current.value=""},children:f("post")}),null===P||void 0===P?void 0:P.map((e=>{var t;return e.postId===r?null===e||void 0===e||null===(t=e.comment)||void 0===t?void 0:t.map(((t,n)=>{var o;return(null===e||void 0===e||null===(o=e.comment)||void 0===o?void 0:o.length)===n+1?(0,_.jsxs)("div",{className:d.eachComment,ref:N,children:[(0,_.jsx)(p,{comment:t,pid:r}),(0,_.jsx)("hr",{})]},n):(0,_.jsxs)("div",{className:d.eachComment,children:[(0,_.jsx)(p,{comment:t,pid:r}),(0,_.jsx)("hr",{})]},n)})):""}))]})};const f=function(e){let{pid:t,commentCount:n,commentOpen:a,comment_turned:m}=e;const[l,c]=(0,o.useState)(n),{t:s}=(0,i.$G)();return(0,_.jsx)(_.Fragment,{children:a&&("On"!==m?(0,_.jsx)("section",{className:d.comment_not_open,children:s("comment_is_not_open_for_this_post")}):(0,_.jsx)("div",{style:{padding:"1vw"},children:(0,_.jsx)(g,{pid:t,commentCount:l,commentCountIncrement:e=>{c(e)}})}))})}},46807:(e,t,n)=>{n.d(t,{Z:()=>o});const o={avatar_image:"Avatar_avatar_image__orRwR",custom_avatar_container:"Avatar_custom_avatar_container__f4BAI",custom_avatar_one:"Avatar_custom_avatar_one__XYFtg",custom_avatar_content:"Avatar_custom_avatar_content__E1nUO"}}}]);
//# sourceMappingURL=83058.690319b9.chunk.js.map