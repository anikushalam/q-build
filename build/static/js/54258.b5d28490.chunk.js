"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[54258],{21625:(e,t,a)=>{a.d(t,{Dr:()=>d,Dv:()=>v,FL:()=>i,J9:()=>h,KB:()=>g,Ne:()=>u,OF:()=>o,Pv:()=>s,b5:()=>_,bB:()=>m,d4:()=>r,gS:()=>c,rY:()=>f,vM:()=>x,xk:()=>l});var n=a(63950);const i=()=>{const[e]=(0,n.rk)();return[e]},l=()=>{const[e]=(0,n.Zz)();return[e]},s=()=>{const[e]=(0,n.Sm)();return[e]},r=()=>{const[e]=(0,n.G1)();return[e]},o=()=>{const[e]=(0,n.lI)();return[e]},d=()=>{const[e]=(0,n.CT)();return[e]},c=()=>{const[e]=(0,n.b)();return[e]},u=()=>{const[e]=(0,n.x0)();return[e]},_=()=>{const[e]=(0,n.kA)();return[e]},m=()=>{const[e]=(0,n.rz)();return[e]},h=()=>{const[e]=(0,n.Pi)();return[e]},v=()=>{const[e]=(0,n.qz)();return[e]},f=()=>{const[e]=(0,n._C)();return[e]},g=()=>{const[e]=(0,n.qG)();return[e]},x=e=>{const{data:t,refetch:a,isLoading:i}=(0,n.tz)(null===e||void 0===e?void 0:e.phoneKey,{skip:e.skip});return{authGetAccountWithMobileNumber:t,authGetAccountWithMobileNumberRefetch:a,authGetAccountWithMobileNumberLoading:i}}},63950:(e,t,a)=>{a.d(t,{qG:()=>L,tz:()=>P,qz:()=>D,_C:()=>T,rz:()=>G,Pi:()=>E,Zz:()=>C,YY:()=>z,x0:()=>w,kA:()=>q,lI:()=>k,CT:()=>I,Sm:()=>A,G1:()=>M,b:()=>U,rk:()=>N});var n=a(28328),i=a(94811);const l=e=>e.mutation({query:e=>({url:"/all-images/onefile/web",method:i.Q0,body:e.fileUpload})}),s=e=>e.query({query:e=>"/auth/username/search?u_name=".concat(e)}),r=e=>e.query({query:e=>"/auth/email/check/redundant?email=".concat(e)}),o=e=>e.mutation({query:e=>({url:"/auth/login",method:i.a4,body:e.login})}),d=e=>e.mutation({query:e=>({url:"/auth/user-detail",method:i.a4,body:e})}),c=e=>e.mutation({query:e=>{var t;return{url:"/auth/user-detail-verify/".concat(e.userPhoneNumber,"?u_name=").concat(null!==(t=null===e||void 0===e?void 0:e.u_name)&&void 0!==t?t:""),method:i.a4,body:e}}}),u=e=>e.mutation({query:e=>({url:"/auth/user/forgot",method:i.a4,body:e.forgot})}),_=e=>e.mutation({query:e=>({url:"/auth/user/forgot/".concat(e.uid),method:i.a4,body:e.otp})}),m=e=>e.mutation({query:e=>({url:"/auth/user/reset/password/".concat(e.uid),method:i.a4,body:e.password})}),h=(e,t)=>e.mutation({query:e=>({url:"/auth/profile-creation/".concat(e.userPhoneNumber),method:i.a4,body:e.profileCreation})}),v=(e,t)=>e.mutation({query:e=>({url:"/auth/create-user-password/".concat(e.uid),method:i.a4,body:e.password})}),f=(e,t)=>e.mutation({query:e=>({url:"/auth/ins-detail",method:i.a4,body:e.phone})}),g=(e,t)=>e.mutation({query:e=>({url:"/auth/ins-detail-verify/".concat(e.insPhoneNumber),method:i.a4,body:e.verify})}),x=(e,t)=>e.mutation({query:e=>({url:"/auth/ins/register",method:i.a4,body:e.profileCreation})}),p=(e,t)=>e.mutation({query:e=>({url:"/auth/ins/create-password/".concat(e.id),method:i.a4,body:e.password})}),j=e=>e.mutation({query:e=>({url:"/auth/direct/confirm/join/".concat(e.phoneNumber,"/apply/").concat(e.aid,"?existingUser=").concat(e.uid),method:i.a4,body:e.addStudent})}),y=e=>e.query({query:e=>"/auth/select/account?phoneKey=".concat(e),transformResponse:e=>null===e||void 0===e?void 0:e.all_account,serializeQueryArgs:e=>{let{endpointName:t}=e;return t},forceRefetch(e){let{currentArg:t,previousArg:a}=e;return t!==a}}),Z=e=>e.mutation({query:e=>({url:"/admission/".concat(e.uid,"/user/").concat(e.aid,"/apply"),method:"POST",body:e.apply_data})}),b=n.i.injectEndpoints({endpoints:e=>({fileUpload:l(e),authUniqueUsername:s(e),authUniqueEmail:r(e),authLogin:o(e),authUserNumber:d(e),authUserNumberVerify:c(e),authUserForget:u(e),authUserForgetOtp:_(e),authUserSetPassword:m(e),authUserCreateAccount:h(e),authUserCreatePassword:v(e),authInstituteNumber:f(e),authInstituteNumberVerify:g(e),authInstituteCreateAccount:x(e),authInstituteCreatePassword:p(e),authDirectJoinFormAdmissionApplication:j(e),authGetAccountWithMobileNumber:y(e),authUserApplyOneApplication:Z(e)})}),{useFileUploadMutation:N,useAuthUniqueUsernameQuery:F,useAuthUniqueEmailQuery:S,useAuthLoginMutation:C,useAuthUserNumberMutation:A,useAuthUserNumberVerifyMutation:M,useAuthUserForgetMutation:k,useAuthUserForgetOtpMutation:I,useAuthUserSetPasswordMutation:U,useAuthUserCreateAccountMutation:w,useAuthUserCreatePasswordMutation:q,useAuthInstituteNumberMutation:G,useAuthInstituteNumberVerifyMutation:E,useAuthInstituteCreateAccountMutation:D,useAuthInstituteCreatePasswordMutation:T,useAuthDirectJoinFormAdmissionApplicationMutation:L,useAuthGetAccountWithMobileNumberQuery:P,useAuthUserApplyOneApplicationMutation:z}=b},44226:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(39230),i=a(98684),l=a(80476),s=a(80184);const r=e=>{let{onExcelFileUpload:t,acceptType:a,label:r,dynamicKey:o,title:d,assestUrl:c,customStyle:u,customStyleLabel:_}=e;const{t:m}=(0,n.$G)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("label",{className:l.Z.upload_excel_file,htmlFor:null!==o&&void 0!==o?o:"uploadExcel",style:u,children:[(0,s.jsx)("img",{src:c||"".concat(i.J7,"/upload-xslx.svg"),alt:"add student icon",title:null!==d&&void 0!==d?d:"Upload excel file"}),r&&(0,s.jsx)("h6",{style:_,children:m(r)})]}),(0,s.jsx)("input",{type:"file",id:null!==o&&void 0!==o?o:"uploadExcel",accept:a,onChange:t,style:{display:"none"}})]})}},63162:(e,t,a)=>{a.d(t,{Z:()=>d});var n=a(39230),i=a(51416),l=a(43504),s=a(72791),r=a(80184);const o=e=>{let{tab:t,isActive:a,isLink:s,parentState:o,onAction:d,url:c}=e;const{t:u}=(0,n.$G)();return s?(0,r.jsx)(l.rU,{className:a?i.Z.horizontal_tab_card_active:i.Z.horizontal_tab_card,to:c,state:o,children:(0,r.jsx)("h6",{children:u(null===t||void 0===t?void 0:t.label)})}):(0,r.jsx)("div",{className:a?i.Z.horizontal_tab_card_active:i.Z.horizontal_tab_card,onClick:()=>{d(null===t||void 0===t?void 0:t.id)},children:(0,r.jsx)("h6",{children:u(null===t||void 0===t?void 0:t.label)})})},d=(0,s.memo)(o)},98967:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(51416),i=a(80184);const l=e=>{let{children:t}=e;return(0,i.jsx)("div",{className:n.Z.horizontal_tab_wrapper,children:t})}},23558:(e,t,a)=>{a.d(t,{Z:()=>d});var n=a(39230),i=a(51416),l=a(72791),s=a(43504),r=a(80184);const o=e=>{let{label:t,onClick:a,isActive:o,isLink:d,url:c,parentState:u,isAuthorized:_}=e;const{t:m}=(0,n.$G)(),h=(0,l.useCallback)((()=>(a&&a(),null)),[a]);return(0,r.jsx)(r.Fragment,{children:d?(0,r.jsx)(r.Fragment,{children:_?(0,r.jsx)(s.rU,{className:o?i.Z.rectangle_tab_card_active:i.Z.rectangle_tab_card,to:c,state:u,children:m(t)}):(0,r.jsx)("div",{className:i.Z.rectangle_tab_card,style:{opacity:"0.5"},children:m(t)})}):(0,r.jsx)("div",{className:o?i.Z.rectangle_tab_card_active:i.Z.rectangle_tab_card,onClick:h,children:m(t)})})},d=(0,l.memo)(o)},53277:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(51416),i=a(80184);const l=e=>{let{customStyle:t,children:a}=e;return(0,i.jsx)("div",{className:n.Z.rectangle_tab_wrapper,style:t,children:a})}},60724:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(39230),i=a(51416),l=a(43504),s=a(80184);const r=e=>{let{label:t,iconUrl:a,url:r,state:o,isAuthorized:d,isVisible:c,authorizedKey:u,customStyleContainer:_}=e;const{t:m}=(0,n.$G)();return r?(0,s.jsx)(s.Fragment,{children:d?c&&c[u]&&(0,s.jsxs)(l.rU,{className:i.Z.square_tab_card,to:r,state:o,style:_,children:[(0,s.jsx)("img",{src:a,alt:"card icon",className:i.Z.square_tab_card_icon}),(0,s.jsx)("p",{children:m(t)})]}):c&&c[u]&&(0,s.jsxs)("div",{className:i.Z.square_tab_card,style:{opacity:"0.5",..._},children:[(0,s.jsx)("img",{src:a,alt:"card icon",className:i.Z.square_tab_card_icon}),(0,s.jsx)("p",{children:m(t)})]})}):(0,s.jsxs)("div",{className:i.Z.square_tab_card,style:_,children:[(0,s.jsx)("img",{src:a,alt:"card icon"}),(0,s.jsx)("p",{children:m(t)})]})}},98167:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(51416),i=a(80184);const l=e=>{let{dynamicId:t,customStyle:a,children:l}=e;return(0,i.jsx)("div",{className:n.Z.square_tab_wrapper,id:t,style:a,children:l})}},87979:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(59393),i=a(80184);const l=e=>{let{customStyle:t,children:a}=e;return(0,i.jsx)("div",{className:n.Z.user_member_tabs_wrapper,style:t,children:a})}},30534:(e,t,a)=>{a.d(t,{Z:()=>ae});var n=a(43504),i=a(39230),l=a(4007),s=a(43677),r=a(6758),o=a(98684),d=a(1669),c=a(80184);const u=e=>{let{fid:t,carryParentState:a,accessRole:n,callApi:u,viewAs:_}=e;const{t:m}=(0,i.$G)(),{instituteAllDepartment:h,instituteAllDepartmentLoading:v}=(0,r.Jv)({fid:t,skip:!t});return(0,c.jsxs)("div",{className:l.Z.department_container,children:[v&&(0,c.jsx)(d.Z,{}),null===h||void 0===h?void 0:h.map((e=>{var t;return(0,c.jsx)(s.Z,{parentState:{...a,did:null===e||void 0===e?void 0:e._id,dName:null===e||void 0===e?void 0:e.dName},activeUrl:"type=fees&n=structure&u=batch",accessRole:n,callApi:u,children:(0,c.jsxs)("div",{className:l.Z.department_card_container,children:[(0,c.jsx)("img",{src:"".concat(o.J7,"/department.svg"),alt:"department avatar",className:l.Z.department_card_image}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h6",{className:l.Z.department_card_name,children:(null===e||void 0===e?void 0:e.dName)||""}),(0,c.jsxs)("p",{className:l.Z.department_card_head,style:{fontSize:"13px",marginTop:"0.3rem"},children:[m("total_masters")," "," : "," ",null!==(t=null===e||void 0===e?void 0:e.classMasterCount)&&void 0!==t?t:0]})]})]})},null===e||void 0===e?void 0:e._id)}))]})};var _=a(16871);const m=e=>{let{instituteId:t,categoryCount:a,masterCount:n,fid:r}=e;const{t:d}=(0,i.$G)(),m=(0,_.TH)();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.Z,{parentState:m.state,activeUrl:"type=fees&n=category",children:(0,c.jsxs)("div",{className:l.Z.fees_category,children:[(0,c.jsx)("div",{className:l.Z.fees_category_icon,children:(0,c.jsx)("img",{src:"".concat(o.J7,"/category.svg"),alt:"categor icon"})}),(0,c.jsxs)("div",{className:l.Z.fees_category_text,children:[(0,c.jsx)("h6",{children:d("fees_master")}),(0,c.jsxs)("p",{children:[d("fees_total")," "," : "," ",a+n]})]})]})}),(0,c.jsx)(u,{fid:r,instituteId:t,carryParentState:m.state})]})};var h=a(56959),v=a(98967),f=a(63162),g=a(90904),x=a(44226),p=a(93638),j=a(72791),y=a(21625),Z=a(89064),b=a(48293),N=a(21348);const F=e=>{let{fid:t,selectedId:a,onSecondary:n,onClose:s}=e;const{t:d}=(0,i.$G)(),{financeAllFeesCategory:u,financeAllFeesCategoryLoading:_}=(0,r.QD)({fid:t,skip:!t});return(0,c.jsx)(b.Z,{onClose:s,children:(0,c.jsxs)("div",{className:l.Z.modal_container,children:[(0,c.jsx)(N.Z,{children:(0,c.jsxs)("div",{className:l.Z.modal_container_outer_header,children:[(0,c.jsx)("div",{className:l.Z.modal_container_header,children:(0,c.jsx)("h6",{children:d("select_secondary_category")})}),(0,c.jsx)("img",{src:"".concat(o.J7,"/close.svg"),alt:"close icon",onClick:s})]})}),(0,c.jsx)(g.Z,{}),(0,c.jsx)(N.Z,{customStyle:{paddingTop:"0"},children:null===u||void 0===u?void 0:u.map((e=>{var t;return(null===e||void 0===e?void 0:e._id)===a?"":(0,c.jsxs)("div",{className:"".concat(l.Z.category_card," ").concat(l.Z.add_category_modal_title_active),onClick:()=>n(null===e||void 0===e?void 0:e._id),children:[(0,c.jsx)("img",{src:"".concat(o.J7,"/category.svg"),alt:"categor icon"}),(0,c.jsx)("h6",{children:null!==(t=null===e||void 0===e?void 0:e.category_name)&&void 0!==t?t:""})]},null===e||void 0===e?void 0:e._id)}))})]})})};var S=a(1095);const C=e=>{let{fid:t,openCategoryMenu:a,onClose:n,allowScholarship:l}=e;const{t:s}=(0,i.$G)(),[o,d]=(0,j.useState)(!1),[u]=(0,r.wJ)(),[_]=(0,r.Es)(),[m]=(0,r.ZE)(),[h]=(0,r.dP)(),[v,f]=(0,j.useState)(!1),g=e=>{let t="Yes"===e;a&&(d((e=>!e)),m({fcid:a,applicable:{scholarship_applicable:t}}).then((()=>{n(),d((e=>!e))})).catch({}))};return(0,c.jsx)(c.Fragment,{children:v?(0,c.jsx)(F,{selectedId:a,fid:t,onSecondary:e=>{t&&a&&(f(!1),d((e=>!e)),_({fid:t,secondaryData:{old_category:a,fee_category:e}}).then((()=>{n(),d((e=>!e))})).catch({}))},onClose:()=>f(!1)}):(0,c.jsxs)(Z.Z,{onClose:n,disabled:o,customStyle:{width:"18rem"},children:[(0,c.jsx)("h6",{onClick:()=>{f((e=>!e))},children:s("mark_as_secondary")}),l?(0,c.jsx)("h6",{onClick:g,children:s("no_scholarship_freeship")}):(0,c.jsx)("h6",{onClick:()=>g("Yes"),children:s("scholarship_freeship")}),(0,c.jsx)("h6",{onClick:()=>{a&&(d((e=>!e)),h({frid:a}).then((e=>{var t;if(null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.data){var a;d((e=>!e));const t=window.open("".concat(S.q2,"/").concat(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data),"_blank","noopener,noreferrer");t&&(t.opener=null),n()}else d((e=>!e)),n()})).catch({}))},children:s("export")}),(0,c.jsx)("h6",{onClick:()=>{a&&(d((e=>!e)),u({cid:a}).then((()=>{n(),d((e=>!e))})).catch({}))},children:s("delete")})]})})},A=e=>{var t,a,n,i;let{category:s,fid:r}=e;const[d,u]=(0,j.useState)("");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:l.Z.category_card,children:[(0,c.jsx)("img",{src:"".concat(o.J7,"/category.svg"),alt:"categor icon"}),(0,c.jsxs)("h6",{children:[null!==(t=null===s||void 0===s?void 0:s.category_name)&&void 0!==t?t:""," ",null!==s&&void 0!==s&&null!==(a=s.secondary_category)&&void 0!==a&&a.category_name?(0,c.jsxs)("span",{style:{fontSize:"11px",fontWeight:"400"},children:["(",null!==(n=null===s||void 0===s||null===(i=s.secondary_category)||void 0===i?void 0:i.category_name)&&void 0!==n?n:"",")"]}):""]}),(0,c.jsx)("img",{src:"".concat(o.J7,"/menu.svg"),alt:"menu icon",onClick:()=>{u(null===s||void 0===s?void 0:s._id)},className:l.Z.menu_icon,title:"Menu"})]}),d&&(0,c.jsx)(C,{fid:r,onClose:()=>{u("")},openCategoryMenu:d,allowScholarship:null===s||void 0===s?void 0:s.scholarship_applicable})]})};var M=a(55336),k=a(61055);const I=e=>{let{onClose:t,fid:a}=e;const{t:n}=(0,i.$G)(),[s,d]=(0,j.useState)(""),[u,_]=(0,j.useState)(!1),[m,h]=(0,j.useState)(""),[v]=(0,r.d5)();return(0,c.jsx)(b.Z,{onClose:t,children:(0,c.jsxs)("div",{className:l.Z.modal_container,children:[(0,c.jsx)(N.Z,{children:(0,c.jsxs)("div",{className:l.Z.modal_container_outer_header,children:[(0,c.jsx)("div",{className:l.Z.modal_container_header,children:(0,c.jsx)("h6",{children:n("add_new_category")})}),(0,c.jsx)("img",{src:"".concat(o.J7,"/close.svg"),alt:"close icon",onClick:t})]})}),(0,c.jsx)(g.Z,{}),(0,c.jsxs)(N.Z,{customStyle:{paddingTop:"0"},children:[(0,c.jsx)(k.Z,{label:n("category_name"),placeholder:n("category_name_placeholder"),name:"category",value:s,type:"text",onChange:e=>{var t;(null===(t=e.target.value)||void 0===t?void 0:t.length)<=30&&d(e.target.value)},errorShow:m.categoryName}),(0,c.jsx)(p.Z,{label:"create",onAction:()=>{s&&a?(_((e=>!e)),v({fid:a,createCategory:{category_name:s}}).then((()=>{t(),_((e=>!e))})).catch((()=>{_((e=>!e))}))):h({categoryName:"* required"})}})]}),u&&(0,c.jsx)(M.Z,{})]})})},U=e=>{let{fid:t}=e;const[a,n]=(0,j.useState)(!1),[i,s]=(0,j.useState)(!1),[o]=(0,y.FL)(),[u]=(0,r.M7)(),{financeAllFeesCategory:_,financeAllFeesCategoryLoading:m}=(0,r.QD)({fid:t,skip:!t}),h=()=>{s((e=>!e))};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:l.Z.upload_excel_container,children:[(0,c.jsx)(x.Z,{onExcelFileUpload:e=>{if(e.target.files[0]){n((e=>!e));const a=new FormData;a.append("file",e.target.files[0]),o({fileUpload:a}).then((e=>{var a,i;null!==(a=e.data)&&void 0!==a&&a.imageKey?u({fid:t,excelFile:{excel_file:null===(i=e.data)||void 0===i?void 0:i.imageKey}}).then((()=>{n((e=>!e))})).catch({}):n((e=>!e))})).catch({})}}}),(0,c.jsx)(p.Z,{label:"add_new_category",customStyle:{paddingBlock:"0.4rem",margin:"0",marginBottom:"0.5rem"},onAction:h})]}),null===_||void 0===_?void 0:_.map((e=>(0,c.jsx)(A,{category:e,fid:t},null===e||void 0===e?void 0:e._id))),m&&(0,c.jsx)(d.Z,{}),a&&(0,c.jsx)(M.Z,{}),i&&(0,c.jsx)(I,{onClose:h,fid:t})]})};var w=a(99183);const q=e=>{let{onClose:t,fid:a,openFeeHeadMenu:n,openAs:s,onEdit:d,onRefetch:u}=e;const{t:_}=(0,i.$G)(),[m,h]=(0,j.useState)({master_name:"EDIT"===s?null===n||void 0===n?void 0:n.master_name:"",master_amount:"EDIT"===s?null===n||void 0===n?void 0:n.master_amount:""}),[v,f]=(0,j.useState)(!1),[x,y]=(0,j.useState)(""),[Z]=(0,r.bQ)();(0,j.useEffect)((()=>{"EDIT"===s&&h({master_name:null===n||void 0===n?void 0:n.master_name,master_amount:null===n||void 0===n?void 0:n.master_amount})}),[s]);const F=e=>{var t;"master_name"===e.target.name?(null===(t=e.target.value)||void 0===t?void 0:t.length)<=30&&h((t=>({...t,[e.target.name]:e.target.value}))):h((t=>({...t,[e.target.name]:+e.target.value})))};return(0,c.jsx)(b.Z,{onClose:t,children:(0,c.jsxs)("div",{className:l.Z.modal_container,children:[(0,c.jsx)(N.Z,{children:(0,c.jsxs)("div",{className:l.Z.modal_container_outer_header,children:[(0,c.jsx)("div",{className:l.Z.modal_container_header,children:(0,c.jsx)("h6",{children:_("EDIT"===s?"edit_fee_head":"add_new_fee_head")})}),(0,c.jsx)("img",{src:"".concat(o.J7,"/close.svg"),alt:"close icon",onClick:t})]})}),(0,c.jsx)(g.Z,{}),(0,c.jsxs)(N.Z,{customStyle:{paddingTop:"0"},children:[(0,c.jsx)(k.Z,{label:_("head_name"),placeholder:_("head_name_placeholder"),name:"master_name",value:m.master_name,type:"text",onChange:F,errorShow:x.master_name}),(0,c.jsx)(k.Z,{label:_("amount"),placeholder:_("amount_placeholder"),name:"master_amount",value:m.master_amount,type:"tel",onChange:F}),(0,c.jsx)(p.Z,{label:"EDIT"===s?"update":"create",onAction:()=>{if(a){let e=(0,w.l)(m,["master_amount"]);(0,w.x)(e)?"EDIT"===s?d({master_name:null===m||void 0===m?void 0:m.master_name,master_amount:null!==m&&void 0!==m&&m.master_amount?null===m||void 0===m?void 0:m.master_amount:0}):(f((e=>!e)),Z({fid:a,addFeeHead:{master_name:null===m||void 0===m?void 0:m.master_name,master_amount:null!==m&&void 0!==m&&m.master_amount?null===m||void 0===m?void 0:m.master_amount:0}}).then((()=>{u(),f((e=>!e)),t()})).catch((()=>{f((e=>!e))}))):y(e)}}})]}),v&&(0,c.jsx)(M.Z,{})]})})},G=e=>{let{fid:t,openFeeHeadMenu:a,onClose:n,onRefetch:l}=e;const{t:s}=(0,i.$G)(),[o,d]=(0,j.useState)(!1),[u]=(0,r.hx)(),[_]=(0,r.dA)(),[m,h]=(0,j.useState)(!1),v=()=>{h((e=>!e))};return(0,c.jsx)(c.Fragment,{children:m?(0,c.jsx)(q,{onClose:v,openFeeHeadMenu:a,openAs:"EDIT",onEdit:e=>{null!==a&&void 0!==a&&a._id&&(d((e=>!e)),h(!1),_({fmid:null===a||void 0===a?void 0:a._id,updateFeeHead:e}).then((()=>{l(),d((e=>!e)),n()})).catch({}))},fid:t}):(0,c.jsxs)(Z.Z,{onClose:n,disabled:o,children:[(0,c.jsx)("h6",{onClick:v,children:s("edit")}),(0,c.jsx)("h6",{onClick:()=>{null!==a&&void 0!==a&&a._id&&t&&(d((e=>!e)),u({fhid:null===a||void 0===a?void 0:a._id,fid:t}).then((()=>{l(),d((e=>!e)),n()})).catch({}))},children:s("delete")})]})})},E=e=>{var t,a;let{feeHead:n,fid:s,onRefetch:r}=e;const{t:d}=(0,i.$G)(),[u,_]=(0,j.useState)("");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:l.Z.category_card,children:[(0,c.jsx)("img",{style:{height:"36px",width:"36px"},src:"".concat(o.J7,"/category.svg"),alt:"categor icon"}),(0,c.jsxs)("div",{className:l.Z.category_card_fee,children:[(0,c.jsx)("h6",{style:{marginBottom:"0.3rem"},children:null!==(t=null===n||void 0===n?void 0:n.master_name)&&void 0!==t?t:""}),(0,c.jsxs)("h6",{style:{color:"rgba(18, 18, 18, 0.5)"},children:[d("rs_only"),null!==(a=null===n||void 0===n?void 0:n.master_amount)&&void 0!==a?a:0]})]}),["Hostel Linked","Linked","Transport Linked"].includes(null===n||void 0===n?void 0:n.master_status)?"":(0,c.jsx)("img",{src:"".concat(o.J7,"/menu.svg"),alt:"menu icon",onClick:()=>{_(n)},className:l.Z.menu_icon,title:"Menu"})]},null===n||void 0===n?void 0:n._id),u&&(0,c.jsx)(G,{fid:s,onClose:()=>{_("")},openFeeHeadMenu:u,onRefetch:r})]})};var D=a(23441),T=a(91427),L=a(57588),P=a(2651);const z=e=>{var t,a,n,s;let{fid:u}=e;const{t:_}=(0,i.$G)(),[m,v]=(0,j.useState)(!1),[f,g]=(0,j.useState)(!1),[Z,b]=(0,j.useState)(""),[N,F]=(0,j.useState)(1),[S,C]=(0,j.useState)(!0),[A,k]=(0,D.YD)({skip:Z}),[I]=(0,y.FL)(),[U]=(0,r.yJ)(),{financeAllFeeHeadMaster:w,financeAllFeeHeadMasterLoading:G,financeAllFeeHeadMasterRefetch:z}=(0,r.an)({data:{fid:u,page:N,limit:10,search:Z},skip:!u});(0,j.useEffect)((()=>{k&&S&&F((e=>e+1))}),[k,S]),(0,j.useEffect)((()=>{var e;if(null!==w&&void 0!==w&&null!==(e=w.list)&&void 0!==e&&e.length){var t;let e=(0,T.f)(null===w||void 0===w||null===(t=w.list)||void 0===t?void 0:t.length);C((()=>e))}}),[null===w||void 0===w||null===(t=w.list)||void 0===t?void 0:t.length]);const R=(0,j.useCallback)((0,L.J)((e=>{F((()=>1)),b(e)}),500),[]),B=()=>{g((e=>!e))},J=()=>{F((()=>1)),b(""),z()};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:h.Z.fm_search_full,style:{marginBottom:"0.5rem"},children:(0,c.jsxs)("section",{className:h.Z.fm_search_full_container,children:[(0,c.jsxs)("div",{className:h.Z.fm_search_full_container_inner,style:{flex:"1.5 1.5"},children:[(0,c.jsx)("img",{className:h.Z.fm_search_full_icon,alt:"search icon",src:"".concat(o.dB,"/navbar-search.svg")}),(0,c.jsx)("input",{type:"text",placeholder:_("search"),onChange:e=>{e.target.value?R(e.target.value):(F((()=>1)),b(""))}})]}),(0,c.jsxs)("div",{className:l.Z.upload_excel_container,style:{flex:"1 1"},children:[(0,c.jsx)(x.Z,{onExcelFileUpload:e=>{if(e.target.files[0]){v((e=>!e));const t=new FormData;t.append("file",e.target.files[0]),I({fileUpload:t}).then((e=>{var t,a;null!==(t=e.data)&&void 0!==t&&t.imageKey?U({fid:u,excelFile:{excel_file:null===(a=e.data)||void 0===a?void 0:a.imageKey}}).then((()=>{v((e=>!e))})).catch({}):v((e=>!e))})).catch({})}}}),(0,c.jsx)(p.Z,{label:"add_new_fee_head",customStyle:{paddingBlock:"0.4rem",margin:"0"},onAction:B})]})]})}),null===w||void 0===w||null===(a=w.list)||void 0===a?void 0:a.map(((e,t)=>{var a;return(null===w||void 0===w||null===(a=w.list)||void 0===a?void 0:a.length)===t+1?(0,c.jsx)("div",{ref:A,children:(0,c.jsx)(E,{feeHead:e,fid:u,onRefetch:J})},null===e||void 0===e?void 0:e._id):(0,c.jsx)(E,{feeHead:e,fid:u,onRefetch:J},null===e||void 0===e?void 0:e._id)})),G?Z?(0,c.jsx)(M.Z,{}):(0,c.jsx)(d.Z,{}):Z?0===(null===w||void 0===w||null===(n=w.list)||void 0===n?void 0:n.length)&&(0,c.jsx)(P.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No fee heads found related this search."}):0===(null===w||void 0===w||null===(s=w.list)||void 0===s?void 0:s.length)&&(0,c.jsx)(P.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No fee heads added."}),m&&(0,c.jsx)(M.Z,{}),f&&(0,c.jsx)(q,{onClose:B,fid:u,onRefetch:J})]})},R=[{label:"category",id:"category",urlKey:"&n=category"},{label:"fees_heads",id:"head",urlKey:"&n=head"}],B=e=>{let{fid:t}=e;const{t:a}=(0,i.$G)(),[l]=(0,n.lr)(),s=(0,_.TH)(),r=(0,_.UO)();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:h.Z.fm_header_container,children:(0,c.jsx)("h6",{children:a("fees_master")})}),(0,c.jsx)(v.Z,{children:R.map((e=>{var t;return(0,c.jsx)(f.Z,{tab:e,isLink:!0,isActive:l.get("n")===e.id,parentState:s.state,url:"Institute"===(null===(t=s.state)||void 0===t?void 0:t.urlOffSet)?"/q/".concat(r.username,"/institute/member/finance?type=fees").concat(e.urlKey):"/q/".concat(r.username,"/member/staff/finance?type=fees").concat(e.urlKey)},null===e||void 0===e?void 0:e.id)}))}),(0,c.jsx)(g.Z,{customStyleBorder:{marginTop:"0"}}),"category"===l.get("n")?(0,c.jsx)(U,{fid:t}):(0,c.jsx)(z,{fid:t})]})},J="FeesConfig_class_container__7EIlk",K="FeesConfig_class_container_text__BXhQD",H="FeesConfig_oneRowImage__GaV1n";var $=a(97892),Y=a.n($);const W=e=>{let{departmentId:t,carryParentState:a}=e;const{t:n}=(0,i.$G)(),{departmentAllBatch:l,departmentAllBatchLoading:u}=(0,r._m)({did:t,skip:!t});return(0,c.jsxs)(c.Fragment,{children:[null===l||void 0===l?void 0:l.map((e=>(0,c.jsx)(s.Z,{parentState:{...a,batchId:null===e||void 0===e?void 0:e._id,batchName:null===e||void 0===e?void 0:e.batchName},activeUrl:"type=fees&n=structure&u=standard",children:(0,c.jsxs)("div",{className:J,children:[(0,c.jsx)("img",{className:H,src:"".concat(o.J7,"/class.svg"),alt:"batch icon"}),(0,c.jsxs)("div",{className:K,children:[(0,c.jsx)("h6",{children:null===e||void 0===e?void 0:e.batchName}),(0,c.jsxs)("p",{children:[n("created_on")," : ",Y()(e.createdAt).format("DD MMM YYYY")]})]})]})},null===e||void 0===e?void 0:e._id))),u&&(0,c.jsx)(d.Z,{})]})},O=e=>{let{carryParentState:t,departmentId:a,instituteId:n}=e;const{departmentAllClassMaster:i,departmentAllClassMasterLoading:l}=(0,r.lj)({data:{id:n,did:a},skip:a?!n:!a});return(0,c.jsxs)(c.Fragment,{children:[null===i||void 0===i?void 0:i.map((e=>(0,c.jsx)(s.Z,{parentState:{...t,clsId:null===e||void 0===e?void 0:e._id,clsName:null===e||void 0===e?void 0:e.className},activeUrl:"type=fees&n=structure",children:(0,c.jsxs)("div",{className:J,children:[(0,c.jsx)("img",{className:H,src:"".concat(o.J7,"/class.svg"),alt:"batch icon"}),(0,c.jsx)("div",{className:K,children:(0,c.jsx)("h6",{children:null===e||void 0===e?void 0:e.className})})]})},null===e||void 0===e?void 0:e._id))),l&&(0,c.jsx)(d.Z,{})]})};var Q=a(76390);const V=e=>{var t,a,n,s,r;let{structure:d,instituteId:u,fid:_,did:m,onRefetch:h}=e;const{t:v}=(0,i.$G)(),[f,g]=(0,j.useState)("");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:l.Z.fees_card,onClick:()=>{g(null===d||void 0===d?void 0:d._id)},style:{cursor:"pointer"},children:[(0,c.jsx)("img",{src:"".concat(o.J7,"/category.svg"),alt:"categor icon"}),(0,c.jsxs)("div",{className:l.Z.fees_card_text,children:[(0,c.jsxs)("div",{className:l.Z.fees_card_text_bottom,children:[(0,c.jsx)("h6",{children:null!==(t=null===d||void 0===d||null===(a=d.category_master)||void 0===a?void 0:a.category_name)&&void 0!==t?t:""}),(0,c.jsx)("h6",{children:"(".concat(v("rs_only")," ").concat(null!==(n=null===d||void 0===d?void 0:d.applicable_fees)&&void 0!==n?n:0,")")})]}),(0,c.jsxs)("div",{className:l.Z.fees_card_text_bottom,children:[(0,c.jsx)("h6",{children:null!==(s=null===d||void 0===d?void 0:d.structure_name)&&void 0!==s?s:""}),(0,c.jsxs)("h6",{children:[v("rs_only"),null!==(r=null===d||void 0===d?void 0:d.total_admission_fees)&&void 0!==r?r:0]})]})]})]}),f&&(0,c.jsx)(Q.Z,{onClose:()=>{g("")},structureId:f,instituteId:u,fid:_,did:m,onRefetch:h})]})};var X=a(90802);const ee=e=>{var t,a,n,l,s,u,_;let{instituteId:m,financeId:v,getQuery:f}=e;const{t:g}=(0,i.$G)(),[Z,b]=(0,j.useState)(""),[N,F]=(0,j.useState)(1),[S,C]=(0,j.useState)(!0),[A,k]=(0,D.YD)({skip:Z}),[I,U]=(0,j.useState)(!1),[w,q]=(0,j.useState)(!1),[G]=(0,y.FL)(),[E]=(0,r.dn)(),{financeAllFeeStructure:z,financeAllFeeStructureLoading:R,financeAllFeeStructureRefetch:B}=(0,r.P)({data:{did:null===f||void 0===f?void 0:f.did,page:N,limit:10,search:Z,filterBy:null===f||void 0===f?void 0:f.clsId,batchBy:null===f||void 0===f?void 0:f.batchId},skip:!(null!==f&&void 0!==f&&f.did)});(0,j.useEffect)((()=>{k&&S&&F((e=>e+1))}),[k,S]),(0,j.useEffect)((()=>{var e;if(null!==z&&void 0!==z&&null!==(e=z.list)&&void 0!==e&&e.length){var t;let e=(0,T.f)(null===z||void 0===z||null===(t=z.list)||void 0===t?void 0:t.length);C((()=>e))}}),[null===z||void 0===z||null===(t=z.list)||void 0===t?void 0:t.length]);const J=(0,j.useCallback)((0,L.J)((e=>{F((()=>1)),b(e)}),500),[]),K=()=>{U((e=>!e))},H=(0,j.useCallback)((()=>{F((()=>1)),b(""),B()}),[B]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:h.Z.fm_header_container,children:[(0,c.jsxs)("h6",{children:[null!==(a=null===f||void 0===f?void 0:f.dName)&&void 0!==a?a:"",null!==f&&void 0!==f&&f.batchName?(0,c.jsxs)("span",{style:{fontWeight:"400",fontSize:"13px"},children:[" ","(",null!==(n=null===f||void 0===f?void 0:f.batchName)&&void 0!==n?n:"",")"]}):null,null!==f&&void 0!==f&&f.clsName?(0,c.jsxs)("span",{style:{fontWeight:"400",fontSize:"13px"},children:[" - ","(",null!==(l=null===f||void 0===f?void 0:f.clsName)&&void 0!==l?l:"",")"]}):null]}),(0,c.jsxs)("div",{className:h.Z.fm_add_button,style:{alignItems:"center"},children:[(0,c.jsx)(x.Z,{onExcelFileUpload:e=>{var t;if(null!==(t=e.target.files)&&void 0!==t&&t.length&&null!==f&&void 0!==f&&f.did&&v){q((e=>!e));const t=new FormData;t.append("file",e.target.files[0]),G({fileUpload:t}).then((e=>{var t,a;null!==(t=e.data)&&void 0!==t&&t.imageKey?E({fid:v,did:null===f||void 0===f?void 0:f.did,excelFile:{excel_file:null===(a=e.data)||void 0===a?void 0:a.imageKey}}).then((()=>{q((e=>!e))})).catch({}):q((e=>!e))})).catch({})}}}),(0,c.jsx)(p.Z,{label:"add_new_fees_structure",customStyle:{marginBlock:"0.5rem"},onAction:K})]})]}),(0,c.jsx)("div",{className:h.Z.fm_search_full,style:{marginBottom:"0.7rem"},children:(0,c.jsx)("section",{className:h.Z.fm_search_full_container,children:(0,c.jsxs)("div",{className:h.Z.fm_search_full_container_inner,children:[(0,c.jsx)("img",{className:h.Z.fm_search_full_icon,alt:"search icon",src:"".concat(o.dB,"/navbar-search.svg")}),(0,c.jsx)("input",{type:"text",placeholder:g("search"),onChange:e=>{e.target.value?J(e.target.value):(F((()=>1)),b(""))}})]})})}),null===z||void 0===z||null===(s=z.list)||void 0===s?void 0:s.map(((e,t)=>{var a;return(null===z||void 0===z||null===(a=z.list)||void 0===a?void 0:a.length)===t+1?(0,c.jsx)("div",{ref:A,children:(0,c.jsx)(V,{structure:e,instituteId:m,fid:v,did:null===f||void 0===f?void 0:f.did,onRefetch:H})},null===e||void 0===e?void 0:e._id):(0,c.jsx)(V,{structure:e,instituteId:m,fid:v,did:null===f||void 0===f?void 0:f.did,onRefetch:H},null===e||void 0===e?void 0:e._id)})),R?Z?(0,c.jsx)(M.Z,{}):(0,c.jsx)(d.Z,{}):Z?0===(null===z||void 0===z||null===(u=z.list)||void 0===u?void 0:u.length)&&(0,c.jsx)(P.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No fee structure found related this search."}):0===(null===z||void 0===z||null===(_=z.list)||void 0===_?void 0:_.length)&&(0,c.jsx)(P.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No fee structure added."}),I&&(0,c.jsx)(X.Z,{instituteId:m,fid:v,did:null===f||void 0===f?void 0:f.did,onClose:K,onRefetch:H,isRefetch:!0}),w&&(0,c.jsx)(M.Z,{})]})},te=e=>{var t,a,i,s,o,d,u,m,h,v,f,Z,b;let{fid:N,instituteId:F}=e;const C=(0,_.TH)(),[A]=(0,n.lr)(),[k,I]=(0,j.useState)(!1),[U,w]=(0,j.useState)(!1),[q]=(0,y.FL)(),[G]=(0,r.dn)(),[E]=(0,r.Is)(),D=()=>{I((e=>!e))};return(0,c.jsxs)(c.Fragment,{children:[A.get("u")?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:l.Z.structure_container_title,children:[(0,c.jsxs)("h6",{children:[null!==(t=null===(a=C.state)||void 0===a?void 0:a.dName)&&void 0!==t?t:"",null!==(i=C.state)&&void 0!==i&&i.batchName?(0,c.jsxs)("span",{style:{fontWeight:"400",fontSize:"13px"},children:[" ","(",null!==(s=null===(o=C.state)||void 0===o?void 0:o.batchName)&&void 0!==s?s:"",")"]}):null,null!==(d=C.state)&&void 0!==d&&d.clsName?(0,c.jsxs)("span",{style:{fontWeight:"400",fontSize:"13px"},children:[" - ","(",null!==(u=null===(m=C.state)||void 0===m?void 0:m.clsName)&&void 0!==u?u:"",")"]}):null]}),(0,c.jsxs)("div",{className:l.Z.upload_excel_container,children:[(0,c.jsx)(x.Z,{onExcelFileUpload:e=>{var t,a;if(null!==(t=e.target.files)&&void 0!==t&&t.length&&N&&null!==(a=C.state)&&void 0!==a&&a.did){w((e=>!e));const t=new FormData;t.append("file",e.target.files[0]),q({fileUpload:t}).then((e=>{var t,a,n;null!==(t=e.data)&&void 0!==t&&t.imageKey?G({fid:N,did:null===(a=C.state)||void 0===a?void 0:a.did,excelFile:{excel_file:null===(n=e.data)||void 0===n?void 0:n.imageKey}}).then((()=>{w((e=>!e))})).catch({}):w((e=>!e))})).catch({})}}}),(0,c.jsx)(p.Z,{label:"add_new_fees_structure",customStyle:{marginBlock:"0.5rem"},onAction:D}),(0,c.jsx)(p.Z,{label:"export_structure",customStyle:{marginBlock:"0.5rem"},onAction:()=>{var e,t;null!==C&&void 0!==C&&null!==(e=C.state)&&void 0!==e&&e.did&&(w((e=>!e)),E({did:null===C||void 0===C||null===(t=C.state)||void 0===t?void 0:t.did}).then((e=>{var t;if(null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.data){var a;w((e=>!e));const t=window.open("".concat(S.q2,"/").concat(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data),"_blank","noopener,noreferrer");t&&(t.opener=null)}})).catch({}))}})]})]}),(0,c.jsx)(g.Z,{})]}):null,A.get("u")?"batch"===A.get("u")?(0,c.jsx)(W,{departmentId:null!==(h=null===C||void 0===C||null===(v=C.state)||void 0===v?void 0:v.did)&&void 0!==h?h:"",carryParentState:null===C||void 0===C?void 0:C.state}):"standard"===A.get("u")?(0,c.jsx)(O,{departmentId:null!==(f=null===C||void 0===C||null===(Z=C.state)||void 0===Z?void 0:Z.did)&&void 0!==f?f:"",instituteId:F,carryParentState:null===C||void 0===C?void 0:C.state}):null:(0,c.jsx)(ee,{financeId:N,instituteId:F,getQuery:C.state}),U&&(0,c.jsx)(M.Z,{}),k&&(0,c.jsx)(X.Z,{instituteId:F,fid:N,did:null===C||void 0===C||null===(b=C.state)||void 0===b?void 0:b.did,onClose:D})]})},ae=e=>{let{fid:t,instituteId:a,categoryCount:i,masterCount:s}=e;const[r]=(0,n.lr)();return(0,c.jsx)("div",{className:l.Z.fess_container,children:["category","head"].includes(r.get("n"))?(0,c.jsx)(B,{fid:t}):"structure"===r.get("n")?(0,c.jsx)(te,{instituteId:a,fid:t}):"fees"===r.get("type")?(0,c.jsx)(m,{instituteId:a,masterCount:s,categoryCount:i,fid:t}):null})}},43677:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(16871),i=a(43504),l=a(80184);const s=e=>{var t;let{activeUrl:a,parentState:s,children:r}=e;const o=(0,n.UO)(),d=(0,n.TH)();return(0,l.jsx)(i.rU,{to:"Institute"===(null===(t=d.state)||void 0===t?void 0:t.urlOffSet)?"/q/".concat(o.username,"/institute/member/finance?").concat(a):"/q/".concat(o.username,"/member/staff/finance?").concat(a),state:s,children:r})}},56959:(e,t,a)=>{a.d(t,{Z:()=>n});const n={fm_header_container:"FinanceManager_fm_header_container__4809h",fm_header_start_container:"FinanceManager_fm_header_start_container__MIMYE",fm_title_heading:"FinanceManager_fm_title_heading__K-4lB",fm_search:"FinanceManager_fm_search__42NnY",fm_search_container:"FinanceManager_fm_search_container__23+f8",fm_search_container_inner:"FinanceManager_fm_search_container_inner__YySAp",fm_search_icon:"FinanceManager_fm_search_icon__WftS9",fm_all_time_data_container:"FinanceManager_fm_all_time_data_container__jIgPj",fm_all_time_data:"FinanceManager_fm_all_time_data__Re+uG",fm_total_amount:"FinanceManager_fm_total_amount__wAS13",fm_both_filter:"FinanceManager_fm_both_filter__25sOi",fm_both_filter_with_name:"FinanceManager_fm_both_filter_with_name__-29YH",fm_add_button:"FinanceManager_fm_add_button__9h09Q",fm_search_full:"FinanceManager_fm_search_full__vDPwG",fm_search_full_container:"FinanceManager_fm_search_full_container__PVgHt",fm_search_full_container_inner:"FinanceManager_fm_search_full_container_inner__tmOa6",fm_search_full_icon:"FinanceManager_fm_search_full_icon__BaRMK",fm_fs_container:"FinanceManager_fm_fs_container__cQS8l",fm_fs_container_inner:"FinanceManager_fm_fs_container_inner__eLCO6",fm_fs_refetch_container:"FinanceManager_fm_fs_refetch_container__W3BMl",fm_fs_refetch_container_inner:"FinanceManager_fm_fs_refetch_container_inner__y6kWF",fm_fund_card:"FinanceManager_fm_fund_card__Xo-wt",fm_fund_total:"FinanceManager_fm_fund_total__Z-m5Y",fm_fund_total_inner:"FinanceManager_fm_fund_total_inner__WjTx9",fm_flex:"FinanceManager_fm_flex__KK95u",fm_other_admission:"FinanceManager_fm_other_admission__m7mDo",lms_rule_container:"FinanceManager_lms_rule_container__8hkCA",fm_header_paragraph:"FinanceManager_fm_header_paragraph__x9942",ossa_form:"FinanceManager_ossa_form__trk++"}}}]);
//# sourceMappingURL=54258.b5d28490.chunk.js.map