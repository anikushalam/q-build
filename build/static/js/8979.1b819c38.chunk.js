"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[8979],{82512:(e,o,i)=>{i.r(o),i.d(o,{default:()=>Q});var l=i(72791);const t={navbar:"UserProfile_navbar__FsWP+"};var s=i(79872),n=i(49010);const d="UserMain_mainbody__lZCbM",a="UserMain_mainbodyedit__lvkgt",r="UserMain_mainbodysplit__iu4+j";var c=i(95048),u=i(91007),v=i(48673),h=i(77356),_=i(62271);const p="MiddleBody_middleBodyGap__MdJHS";var f=i(34057),m=i(85702),x=i(91419),j=i(9447),P=i(23441),g=i(70092),C=i(16256),y=i(80184);const b=function(e){var o,i,t,s,n,d;let{profilePost:a,profileData:r}=e;const u=(0,c.v9)((e=>e.idChange)),v=(0,c.v9)((e=>e.postChange)),h=(0,c.I0)(),_=localStorage.getItem("_searchId"),[p,f]=(0,l.useState)(!0),[b,N]=(0,P.YD)(),[S,k]=(0,l.useState)(!0),[M,Z]=(0,l.useState)(1),{allProfilePost:B,allProfilePostRefetch:E}=(0,j.N0)({data:{id:null!==u&&void 0!==u&&null!==(o=u.searchProfile)&&void 0!==o&&o.id?null===u||void 0===u||null===(i=u.searchProfile)||void 0===i?void 0:i.id:_,page:M,limit:10,viewAs:C.Xe},skip:!a});return(0,l.useEffect)((()=>{var e;null!==u&&void 0!==u&&null!==(e=u.searchProfile)&&void 0!==e&&e.id&&(h(g.p.removeSearchPost({search:[]})),Z(1),k(!0))}),[h,null===u||void 0===u||null===(t=u.searchProfile)||void 0===t?void 0:t.id]),(0,l.useEffect)((()=>{N&&S&&a&&Z((e=>e+1))}),[N,a,S]),(0,l.useEffect)((()=>{E()}),[M,a,E]),(0,l.useEffect)((()=>{var e,o;h(g.p.addPost({post:a&&(null===B||void 0===B||null===(e=B.post)||void 0===e||null===(o=e[0])||void 0===o?void 0:o.author)===(null===u||void 0===u?void 0:u.searchProfile.id)?null===B||void 0===B?void 0:B.post:[],profilePost:a?"search":"dash"})),10===(null===B||void 0===B?void 0:B.post.length)?k(!0):k(!1)}),[null===B||void 0===B?void 0:B.post,h,a,null===u||void 0===u||null===(s=u.searchProfile)||void 0===s?void 0:s.id]),(0,l.useEffect)((()=>{setTimeout((()=>{f(!1)}),5e3)}),[]),(0,y.jsx)("div",{className:m.Z.posts,children:null!==v&&void 0!==v&&null!==(n=v.searchPosts)&&void 0!==n&&n.length||!a||!p?null===v||void 0===v||null===(d=v.searchPosts)||void 0===d?void 0:d.map(((e,o)=>{var i;return(null===v||void 0===v||null===(i=v.searchPosts)||void 0===i?void 0:i.length)===o+1?(0,y.jsx)("div",{ref:b,children:(0,y.jsx)(x.Z,{post:e,profilePost:a,allPosts:[],profileData:r},o)},o):(0,y.jsx)(x.Z,{post:e,profilePost:a,allPosts:[],profileData:r},o)})):(0,y.jsx)("div",{className:m.Z.loader,children:(0,y.jsx)("img",{src:"/images/loader/loader.gif",alt:""})})})},N="MiddleBodyMain_container__gjMlC",S="MiddleBodyMain_header__6ZfiA",k="MiddleBodyMain_headerText__wAMzM",M="MiddleBodyMain_headerTextActive__Ob817",Z="MiddleBodyMain_headerLink__RpWv0",B="MiddleBodyMain_headerLinkActive__GwH1i";var E=i(39230);const U=e=>{let{state:o}=e;const[i,t]=(0,l.useState)("my"),{t:s}=(0,E.$G)(),n=(0,c.v9)((e=>e.idChange));return(0,y.jsxs)("div",{className:N,children:[(0,y.jsxs)("div",{className:S,children:[(0,y.jsx)("div",{className:"my"===i?M:k,onClick:()=>{t("my"),o(!1)},children:(0,y.jsx)("p",{className:"my"===i?"".concat(Z," ").concat(B):Z,children:"Posts"})}),(0,y.jsx)("div",{className:"tag"===i?M:k,onClick:()=>{null!==n&&void 0!==n&&n.searchProfile.id||(t("tag"),o(!1))},children:(0,y.jsx)("p",{className:"tag"===i?"".concat(Z," ").concat(B):Z,children:"Tag Posts"})}),null!==n&&void 0!==n&&n.searchProfile.id?"":(0,y.jsx)("div",{className:"save"===i?M:k,onClick:()=>{null!==n&&void 0!==n&&n.searchProfile.id||(t("save"),o(!1))},children:(0,y.jsx)("p",{className:"save"===i?"".concat(Z," ").concat(B):Z,children:"Saved"})})]}),null!==n&&void 0!==n&&n.searchProfile.id?(0,y.jsx)(b,{profilePost:!0}):(0,y.jsx)(f.Z,{profilePost:!0,profileSavedPost:i})]})},w="MiddleBodyRight_middleBodyRight__0Z538",I="MiddleBodyRight_middleBodyRightTop__xLwoe",R="MiddleBodyRight_middleBodyRightbottom__NzAtP",D=e=>{let{questionCount:o,answerQuestionCount:i,upVote:l}=e;const{t:t}=(0,E.$G)();return(0,y.jsxs)("div",{className:w,children:[(0,y.jsxs)("div",{className:I,children:[" ",t("know_s")," (",t("knowledge_score"),")"]}),(0,y.jsxs)("div",{className:R,children:[(0,y.jsxs)("h6",{children:[t("total_questions_asked")," : ",o]}),(0,y.jsxs)("h6",{children:[t("questions_answered")," : ",i]}),(0,y.jsxs)("h6",{children:[t("total_upward")," : ",l]})]})]})},T=e=>{let{state:o,profileBody:i,upVote:l,status:t}=e;return(0,y.jsxs)("div",{className:p,children:[(0,y.jsx)(U,{state:e=>{o(e)},status:t}),(0,y.jsx)(D,{questionCount:null===i||void 0===i?void 0:i.questionCount,answerQuestionCount:null===i||void 0===i?void 0:i.answerQuestionCount,upVote:l})]})};var A=i(75070),L=i(30705),q=i(12072),F=i(84489),$=i(87049),G=i(98734);const O=e=>{let{onClose:o,userId:i,onSearchRefetch:t,loginUserId:s,blockedBy:n}=e;const{t:d}=(0,E.$G)(),[a,r]=(0,l.useState)(!1),[c]=(0,j.Wi)(),[u]=(0,j.z9)(),[v]=(0,j.Kj)();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(F.Z,{onClose:o}),(0,y.jsxs)(q.Z,{customStyle:{zIndex:"1200"},children:[(0,y.jsxs)("div",{className:$.Z.edit_modal_container,style:{width:"200px"},children:[null!==n&&void 0!==n&&n.includes(s)?(0,y.jsxs)("h6",{className:$.Z.edit,onClick:()=>{r(!0),u({blockId:i}).then((()=>{t(),r(!1),o()})).catch({})},children:[d("unblocked")," ",d("account")]}):(0,y.jsxs)("h6",{className:$.Z.edit,onClick:()=>{r(!0),c({blockId:i}).then((()=>{t(),r(!1),o()})).catch({})},children:[d("block")," ",d("account")]}),(0,y.jsx)("h6",{className:$.Z.remove,onClick:()=>{r(!0),v({rid:i,id:s,accountStatus:"Malicious"}).then((()=>{r(!1),o()})).catch({})},children:d("report_acount")})]}),a&&(0,y.jsx)(G.Z,{})]})]})},z=e=>{let{onClose:o,profileChange:i,onUploadType:l}=e;const{t:t}=(0,E.$G)();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(F.Z,{onClose:o}),(0,y.jsx)(q.Z,{customStyle:{zIndex:"1200"},children:(0,y.jsxs)("div",{className:$.Z.edit_modal_container,style:{width:"300px"},children:[(0,y.jsx)("label",{htmlFor:"photo",children:(0,y.jsx)("h6",{className:$.Z.edit,onClick:()=>l("ONLY_USER"),children:t("update_only_profile_photo")})}),(0,y.jsx)("label",{htmlFor:"photo",children:(0,y.jsx)("h6",{className:$.Z.edit,onClick:()=>l("USER_AND_STUDENT"),children:t("update_user_student_profile_photo")})}),(0,y.jsx)("input",{id:"photo",name:"file",onChange:i,type:"file",style:{display:"none"},accept:"image/gif, image/jpeg, image/png",required:!0})]})})]})};const V=function(){var e,o,i,t,s,n,p,f,m,x,j,P,g,C,b,N,S,k;const M=(0,c.v9)((e=>e.idChange)),Z=(0,c.I0)(),[B,E]=(0,l.useState)(!1),[U,w]=(0,l.useState)(!1),{data:I,refetch:R}=(0,u.pu)(null!==M&&void 0!==M&&null!==(e=M.searchProfile)&&void 0!==e&&e.id?null===M||void 0===M||null===(o=M.searchProfile)||void 0===o?void 0:o.id:null===M||void 0===M?void 0:M.id,{skip:"USERNAME"===M.searchProfile.type}),{data:D,refetch:q}=(0,u.QS)(null===M||void 0===M||null===(i=M.searchProfile)||void 0===i?void 0:i.id,{skip:"ID"===M.searchProfile.type});(0,l.useEffect)((()=>{"USERNAME"===M.searchProfile.type?q():"ID"===M.searchProfile.type&&R()}),[M.searchProfile.type,null===M||void 0===M||null===(t=M.searchProfile)||void 0===t?void 0:t.id]),(0,l.useEffect)((()=>{var e;null!==D&&void 0!==D&&D.user&&"USERNAME"===M.searchProfile.type&&Z(v.S.searchId({id:null===D||void 0===D||null===(e=D.user)||void 0===e?void 0:e._id,type:"ID"}))}),[null===D||void 0===D?void 0:D.user]);const F=""!==(null===M||void 0===M||null===(s=M.searchProfile)||void 0===s?void 0:s.id)?null===M||void 0===M||null===(n=M.searchProfile)||void 0===n?void 0:n.id:null===M||void 0===M?void 0:M.id,[$,G]=(0,l.useState)(!1),[V,Q]=(0,l.useState)(!1),[W,H]=(0,l.useState)(""),[J,K]=(0,l.useState)(""),[X,Y]=(0,l.useState)(""),[ee,oe]=(0,l.useState)(""),[ie,le]=(0,l.useState)(!1),[te,se]=(0,l.useState)(!1),[ne,de]=(0,l.useState)(""),[ae,re]=(0,l.useState)(!1),[ce,ue]=(0,l.useState)(""),[ve]=(0,L.w1)(),[he]=(0,L.Ru)();return(0,l.useEffect)((()=>{if($){let e=new FormData;e.append("file",W),he({cover:e,id:null===M||void 0===M?void 0:M.id}).then((()=>{})).catch({})}}),[$,W]),(0,l.useEffect)((()=>{if(V){let e=new FormData;e.append("file",J),ve({photo:e,id:null===M||void 0===M?void 0:M.id,role:ce}).then((()=>{})).catch({})}}),[V,J]),(0,y.jsxs)(y.Fragment,{children:[I&&"post"===(null===M||void 0===M||null===(p=M.repostQuestion)||void 0===p?void 0:p.repostStatus)&&(B?(0,y.jsx)("div",{className:a,children:(0,y.jsx)(A.Z,{setEdit:E})}):(0,y.jsxs)("div",{className:d,children:[(0,y.jsx)(h.Z,{resultId:F,insID:null===M||void 0===M?void 0:M.id,profileData:null===I||void 0===I?void 0:I.user,searchId:null===M||void 0===M||null===(f=M.searchProfile)||void 0===f?void 0:f.id,profile:M,status:"userProfile",setEdit:E,openCrop:ie,openCropCover:te,setOpenCrop:le,setOpenCropCover:se,coverChange:e=>{const o=URL.createObjectURL(e.target.files[0]);H(e.target.files[0]),Y(o),de(o),le(!0)},profileChange:()=>{re(!0)},photoURL:ne,setPhotoURL:de,coverPhoto:X,profilePhoto:ee,setUpload:G,setUploadProfile:Q,setFile:H,setFileProfile:K,setCoverPhoto:Y,setProfilePhoto:oe,setOpenBlock:w,blockedBy:null!==(m=null===I||void 0===I||null===(x=I.user)||void 0===x?void 0:x.blockedBy)&&void 0!==m?m:[],loginUserId:null!==(j=null===M||void 0===M?void 0:M.id)&&void 0!==j?j:"",userId:null!==(P=null===M||void 0===M||null===(g=M.searchProfile)||void 0===g?void 0:g.id)&&void 0!==P?P:""}),(0,y.jsxs)("div",{className:r,children:[(0,y.jsx)(_.Z,{userData:null===I||void 0===I?void 0:I.user,status:"profile"}),(0,y.jsx)(T,{profileBody:I&&(null===I||void 0===I?void 0:I.user),upVote:(null===I||void 0===I?void 0:I.upVote)||0,status:"profile"}),U&&(0,y.jsx)(O,{userId:null!==(C=null===M||void 0===M||null===(b=M.searchProfile)||void 0===b?void 0:b.id)&&void 0!==C?C:"",onClose:()=>w((e=>!e)),onSearchRefetch:R,blockedBy:null!==(N=null===I||void 0===I||null===(S=I.user)||void 0===S?void 0:S.blockedBy)&&void 0!==N?N:[],loginUserId:null!==(k=null===M||void 0===M?void 0:M.id)&&void 0!==k?k:""})]})]})),ae&&(0,y.jsx)(z,{onClose:()=>re(!1),profileChange:e=>{var o;if(null!==(o=e.target.files)&&void 0!==o&&o.length){re(!1);const o=URL.createObjectURL(e.target.files[0]);K(e.target.files[0]),oe(o),de(o),se(!0)}},onUploadType:e=>{ue((o=>e))}})]})};const Q=function(){var e,o,i,l,d;const a=localStorage.getItem("user"),r=(0,c.v9)((e=>e.idChange.searchProfile)),{data:v}=(0,u.pu)(a);return(0,y.jsxs)("div",{className:t.Profile,children:[(0,y.jsx)("div",{className:t.navbar,children:(0,y.jsx)(s.default,{status:"profile",profileData:null===v||void 0===v?void 0:v.user,username:null===v||void 0===v||null===(e=v.user)||void 0===e?void 0:e.username,name:null===v||void 0===v||null===(o=v.user)||void 0===o?void 0:o.userLegalName,photoId:null===v||void 0===v||null===(i=v.user)||void 0===i?void 0:i.photoId,profilePhoto:null===v||void 0===v||null===(l=v.user)||void 0===l?void 0:l.profilePhoto})}),"institute"===(null===r||void 0===r?void 0:r.searchAs)?(0,y.jsx)(n.Z,{applicantUserName:null===v||void 0===v||null===(d=v.user)||void 0===d?void 0:d.username}):(0,y.jsx)(V,{profileData:null===v||void 0===v?void 0:v.user})]})}},93638:(e,o,i)=>{i.d(o,{Z:()=>n});var l=i(39230),t=i(80476),s=i(80184);const n=e=>{let{label:o,count:i,onAction:n,customStyle:d,isTranslate:a}=e;const{t:r}=(0,l.$G)();return a?(0,s.jsxs)("div",{className:t.Z.create_btn_container,onClick:n,style:d,children:[i>0?(0,s.jsxs)("span",{children:[i," "]}):null,o]}):(0,s.jsxs)("div",{className:t.Z.create_btn_container,onClick:n,style:d,children:[i>0?(0,s.jsxs)("span",{children:[i," "]}):null,r(o)]})}},13688:(e,o,i)=>{i.d(o,{WU:()=>r});var l=["second","minute","hour","day","week","month","year"];var t=["\u79d2","\u5206\u949f","\u5c0f\u65f6","\u5929","\u5468","\u4e2a\u6708","\u5e74"];var s={},n=function(e,o){s[e]=o},d=[60,60,24,7,365/7/12,12];function a(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}var r=function(e,o,i){var l=function(e,o){return(+(o?a(o):new Date)-+a(e))/1e3}(e,i&&i.relativeDate);return function(e,o){for(var i=e<0?1:0,l=e=Math.abs(e),t=0;e>=d[t]&&t<d.length;t++)e/=d[t];return(e=Math.floor(e))>(0===(t*=2)?9:1)&&(t+=1),o(e,t,l)[i].replace("%s",e.toString())}(l,function(e){return s[e]||s.en_US}(o))};n("en_US",(function(e,o){if(0===o)return["just now","right now"];var i=l[Math.floor(o/2)];return e>1&&(i+="s"),[e+" "+i+" ago","in "+e+" "+i]})),n("zh_CN",(function(e,o){if(0===o)return["\u521a\u521a","\u7247\u523b\u540e"];var i=t[~~(o/2)];return[e+" "+i+"\u524d",e+" "+i+"\u540e"]}))},87049:(e,o,i)=>{i.d(o,{Z:()=>l});const l={edit_modal_container:"EditConfirm_edit_modal_container__WfbTq",modal_header:"EditConfirm_modal_header__4sq5J",edit:"EditConfirm_edit__ziVGP",remove:"EditConfirm_remove__PCXLs",xlsx_update_btn:"EditConfirm_xlsx_update_btn__H3yM8",save_stop_btn:"EditConfirm_save_stop_btn__9NiZ5",update_to_btn:"EditConfirm_update_to_btn__ExCJv"}},80476:(e,o,i)=>{i.d(o,{Z:()=>l});const l={btn_wrapper:"Button_btn_wrapper__ihT7O",btn_container:"Button_btn_container__OaH2t",create_btn_container:"Button_create_btn_container__JuZrx",upload_excel_file:"Button_upload_excel_file__a7d0K",set_btn_container:"Button_set_btn_container__RvfRG",ccb_button:"Button_ccb_button__Mjv4T"}}}]);
//# sourceMappingURL=8979.1b819c38.chunk.js.map