"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[71870],{71870:(e,i,l)=>{l.r(i),l.d(i,{default:()=>O});var t=l(56959),n=l(63687),a=l(21348),s=l(39230),o=l(90904),r=l(43504),d=l(16871),c=l(98967),u=l(63162),v=l(72791),_=l(55336),m=l(23441),h=l(91427),p=l(57588),f=l(98684),j=l(1669),x=l(2651),g=l(43317);const y="PaymentVerification_request_card_info_name__F217G",Z="PaymentVerification_request_card_container__kdJMq",N="PaymentVerification_request_card_info__4dTd3",C="PaymentVerification_request_card_info_date__kvaK6",b="PaymentVerification_request_card_utr__PDrya",k="PaymentVerification_request_card_info_image__SzKv7",S="PaymentVerification_fee_request_detail__XPezI",E="PaymentVerification_fee_request_detail_name__9jdBC",q="PaymentVerification_fee_request_detail_amount__-SBvM",P="PaymentVerification_fee_request_detail_date__0hGfn",T="PaymentVerification_reason_for_rejection__xoM3S",L="PaymentVerification_payment_acknowledge_btn__quTx1";var R=l(1095),V=l(97892),A=l.n(V),D=l(93638),B=l(48293),M=l(16925),J=l(53277),F=l(23558),Y=l(61055),w=l(99183),G=l(80184);const K=e=>{var i,l,t,n,r,d,c,u,m,h,p,j,x,y,Z,N;let{onClose:C,aid:b,onRefetch:k,receipt:T,isAccess:V}=e;const{t:K}=(0,s.$G)(),[U,$]=(0,v.useState)(!1),[Q,I]=(0,v.useState)(1),[O,z]=(0,v.useState)(""),[H,W]=(0,v.useState)(""),[X]=(0,g.Wl)(),ee=()=>{},ie=(0,v.useCallback)((()=>{var e;const i=window.open("".concat(R.LS,"/").concat(null===T||void 0===T||null===(e=T.receipt)||void 0===e?void 0:e.fee_payment_acknowledge),"_blank","noopener,noreferrer");i&&(i.opener=null)}),[R.LS,null===T||void 0===T||null===(i=T.receipt)||void 0===i?void 0:i.fee_payment_acknowledge]);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(B.Z,{onClose:C,children:(0,G.jsxs)("div",{className:M.Z.modal_container,children:[(0,G.jsx)(a.Z,{children:(0,G.jsxs)("div",{className:M.Z.modal_container_outer_header,children:[(0,G.jsx)("div",{className:M.Z.modal_container_header,children:(0,G.jsxs)("h6",{children:[" ",K("fee_receipt_request")]})}),(0,G.jsx)("img",{src:"".concat(f.J7,"/close.svg"),alt:"close icon",onClick:C})]})}),(0,G.jsx)(o.Z,{}),(0,G.jsxs)(a.Z,{customStyle:{paddingTop:"0",marginBottom:"1rem"},children:[(0,G.jsxs)(J.Z,{children:[(0,G.jsx)(F.Z,{label:"accept",onClick:()=>{I(1)},isActive:1===Q}),(0,G.jsx)(F.Z,{label:"reject",onClick:()=>{I(2)},isActive:2===Q})]}),(0,G.jsxs)("section",{className:S,children:[(0,G.jsxs)("h6",{className:E,children:[K("name")," "," : "," ","".concat(null===T||void 0===T||null===(l=T.receipt)||void 0===l||null===(t=l.student)||void 0===t?void 0:t.studentFirstName," ").concat(null!==T&&void 0!==T&&null!==(n=T.receipt)&&void 0!==n&&null!==(r=n.student)&&void 0!==r&&r.studentMiddleName?null===T||void 0===T||null===(d=T.receipt)||void 0===d||null===(c=d.student)||void 0===c?void 0:c.studentMiddleName:""," ").concat(null===T||void 0===T||null===(u=T.receipt)||void 0===u||null===(m=u.student)||void 0===m?void 0:m.studentLastName)]}),(0,G.jsxs)("h6",{className:q,children:[K("amount")," "," : "," ",K("rs")," ",null!==(h=null===T||void 0===T||null===(p=T.receipt)||void 0===p?void 0:p.fee_payment_amount)&&void 0!==h?h:0]}),(0,G.jsx)("h6",{className:P,children:A()(null===T||void 0===T||null===(j=T.receipt)||void 0===j?void 0:j.created_at).format("DD MMM YYYY")})]}),1===Q?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Y.Z,{label:K("bank_name_collect"),name:"fee_bank_name",type:"tel",value:null===T||void 0===T||null===(x=T.receipt)||void 0===x?void 0:x.fee_bank_name,onChange:ee,placeholder:K("please_enter_bank_name"),customStyleLabel:{marginTop:"6px",marginBottom:"7px"}}),(0,G.jsx)(Y.Z,{label:K("banke_holder_name"),name:"fee_bank_holder",type:"tel",value:null===T||void 0===T||null===(y=T.receipt)||void 0===y?void 0:y.fee_bank_holder,onChange:ee,placeholder:K("please_enter_name_of_bank_holder"),customStyleLabel:{marginTop:"6px",marginBottom:"7px"}}),(0,G.jsx)(Y.Z,{label:K("cheque_dd_neft"),name:"fee_utr_reference",type:"tel",value:null===T||void 0===T||null===(Z=T.receipt)||void 0===Z?void 0:Z.fee_utr_reference,onChange:ee,placeholder:K("please_enter_utr_ref_number"),customStyleLabel:{marginTop:"6px",marginBottom:"7px"}}),null!==T&&void 0!==T&&null!==(N=T.receipt)&&void 0!==N&&N.fee_payment_acknowledge?(0,G.jsx)("button",{className:L,onClick:ie,children:K("payment_acknowledge")}):null]}):(0,G.jsx)(Y.Z,{label:K("reason_for_rejection_receipt"),name:"reason",type:"text",value:O,onChange:e=>z(e.target.value),placeholder:K("please_reason_for_rejection_receipt"),errorShow:H.reason}),(0,G.jsx)(D.Z,{label:1===Q?"confirm":"confirm_reject",onAction:()=>{let e=!0;var i,l;(2===Q&&(e=(0,w.l)({reason:O},[])),(0,w.x)(e))?b&&null!==T&&void 0!==T&&null!==(i=T.receipt)&&void 0!==i&&i._id&&null!==T&&void 0!==T&&T._id&&($((e=>!e)),X({aid:b,rid:null===T||void 0===T||null===(l=T.receipt)||void 0===l?void 0:l._id,reqId:null===T||void 0===T?void 0:T._id,status:"REJECTED"===V?1===Q?"Over_Rejection":"Rejection_Notify":1===Q?"Approved":"Rejected",receiptAction:{reason:O}}).then((()=>{k(),$((e=>!e)),C()})).catch({})):W(e)}})]})]})}),U&&(0,G.jsx)(_.Z,{})]})},U=e=>{var i,l,t,n,a,o,r,d,c,u,_,m,h,p,j,x,g,S,E,q,P;let{receipt:L,isAccess:V,aid:B,onRefetch:M}=e;const{t:J}=(0,s.$G)(),[F,Y]=(0,v.useState)(!1),w=(0,v.useCallback)((()=>{var e;("REQUEST"===V||"REJECTED"===V&&null!==L&&void 0!==L&&null!==(e=L.receipt)&&void 0!==e&&e.re_apply)&&Y((e=>!e))}),[V,null===L||void 0===L||null===(i=L.receipt)||void 0===i?void 0:i.re_apply]);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)("section",{className:Z,onClick:null!==L&&void 0!==L&&null!==(l=L.receipt)&&void 0!==l&&l.re_apply?()=>{}:w,style:{cursor:"REQUEST"===V?"pointer":"default"},children:[(0,G.jsxs)("div",{className:N,children:[(0,G.jsx)("img",{src:null!==L&&void 0!==L&&null!==(t=L.receipt)&&void 0!==t&&null!==(n=t.student)&&void 0!==n&&n.studentProfilePhoto?"".concat(R.yI,"/").concat(null===L||void 0===L||null===(a=L.receipt)||void 0===a||null===(o=a.student)||void 0===o?void 0:o.studentProfilePhoto):"".concat(f.p3,"/feed-user-avatar.svg"),alt:"avatar",className:k}),(0,G.jsxs)("div",{children:[(0,G.jsx)("h6",{className:y,children:"".concat(null!==(r=null===L||void 0===L||null===(d=L.receipt)||void 0===d||null===(c=d.student)||void 0===c?void 0:c.studentFirstName)&&void 0!==r?r:""," ").concat(null!==L&&void 0!==L&&null!==(u=L.receipt)&&void 0!==u&&null!==(_=u.student)&&void 0!==_&&_.studentMiddleName?null===L||void 0===L||null===(m=L.receipt)||void 0===m||null===(h=m.student)||void 0===h?void 0:h.studentMiddleName:""," ").concat(null!==(p=null===L||void 0===L||null===(j=L.receipt)||void 0===j||null===(x=j.student)||void 0===x?void 0:x.studentLastName)&&void 0!==p?p:"")}),(0,G.jsxs)("p",{className:y,children:[J("amount")," : ",J("rs_only")," ",(null===L||void 0===L||null===(g=L.receipt)||void 0===g?void 0:g.fee_payment_amount)||0]}),(0,G.jsx)("p",{className:C,children:A()(null===L||void 0===L?void 0:L.created_at).format("DD MMM YYYY")})]})]}),(0,G.jsxs)("h6",{className:b,children:[J("utr_number")," ",null===L||void 0===L||null===(S=L.receipt)||void 0===S?void 0:S.fee_utr_reference]}),"REJECTED"===V&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)("h6",{className:T,children:[J("reason_for_rejection")," ",null!==(E=null===L||void 0===L||null===(q=L.receipt)||void 0===q?void 0:q.reason)&&void 0!==E?E:null===L||void 0===L?void 0:L.reason]}),(null===L||void 0===L||null===(P=L.receipt)||void 0===P?void 0:P.re_apply)&&(0,G.jsx)(D.Z,{label:"re_requested",onAction:w})]})]}),F&&(0,G.jsx)(K,{onClose:w,aid:B,receipt:L,onRefetch:M,isAccess:V})]})},$=e=>{var i,l,n;let{aid:a,requestedCount:o}=e;const{t:r}=(0,s.$G)(),[d,c]=(0,v.useState)(""),[u,y]=(0,v.useState)(1),[Z,N]=(0,v.useState)(!0),[C,b]=(0,m.YD)({skip:d}),{admissionPaymentVerifyList:k,admissionPaymentVerifyListLoading:S,admissionPaymentVerifyListRefetch:E}=(0,g.jD)({data:{aid:a,page:u,limit:10,search:d,filterBy:"ALL_REQUEST",over_filter:""},skip:!a});(0,v.useEffect)((()=>{b&&Z&&y((e=>e+1))}),[b,Z]),(0,v.useEffect)((()=>{var e;if(null!==k&&void 0!==k&&null!==(e=k.list)&&void 0!==e&&e.length){var i;let e=(0,h.f)(null===k||void 0===k||null===(i=k.list)||void 0===i?void 0:i.length);N((()=>e))}}),[null===k||void 0===k?void 0:k.list]);const q=(0,v.useCallback)((0,p.J)((e=>{y((()=>1)),c(e)}),1500),[]),P=(0,v.useCallback)((()=>{y((()=>1)),E()}),[E]);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)("div",{className:t.Z.fm_header_container,children:[(0,G.jsxs)("h6",{children:[r("total_request")," : "," ",null!==o&&void 0!==o?o:0]}),(0,G.jsx)("div",{className:t.Z.fm_search,children:(0,G.jsx)("section",{className:t.Z.fm_search_container,children:(0,G.jsxs)("div",{className:t.Z.fm_search_container_inner,children:[(0,G.jsx)("img",{className:t.Z.fm_search_icon,alt:"search icon",src:"".concat(f.dB,"/navbar-search.svg")}),(0,G.jsx)("input",{type:"text",placeholder:r("search"),onChange:e=>{e.target.value?q(e.target.value):(y((()=>1)),c(""))}})]})})})]}),null===k||void 0===k||null===(i=k.list)||void 0===i?void 0:i.map(((e,i)=>{var l;return(null===k||void 0===k||null===(l=k.list)||void 0===l?void 0:l.length)===i+1?(0,G.jsx)("div",{ref:C,children:(0,G.jsx)(U,{receipt:e,isAccess:"REQUEST",aid:a,onRefetch:P})},null===e||void 0===e?void 0:e._id):(0,G.jsx)(U,{receipt:e,isAccess:"REQUEST",aid:a,onRefetch:P},null===e||void 0===e?void 0:e._id)})),S?d?(0,G.jsx)(_.Z,{}):(0,G.jsx)(j.Z,{}):d?0===(null===k||void 0===k||null===(l=k.list)||void 0===l?void 0:l.length)&&(0,G.jsx)(x.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No request found related this search."}):0===(null===k||void 0===k||null===(n=k.list)||void 0===n?void 0:n.length)&&(0,G.jsx)(x.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No request found."})]})},Q=e=>{var i,l,n;let{aid:a,rejectCount:o}=e;const{t:r}=(0,s.$G)(),[d,c]=(0,v.useState)(""),[u,y]=(0,v.useState)(1),[Z,N]=(0,v.useState)(!0),[C,b]=(0,m.YD)({skip:d}),{admissionPaymentVerifyList:k,admissionPaymentVerifyListLoading:S,admissionPaymentVerifyListRefetch:E}=(0,g.jD)({data:{aid:a,page:u,limit:10,search:d,filterBy:"ALL_REJECT",over_filter:""},skip:!a});(0,v.useEffect)((()=>{b&&Z&&y((e=>e+1))}),[b,Z]),(0,v.useEffect)((()=>{var e;if(null!==k&&void 0!==k&&null!==(e=k.list)&&void 0!==e&&e.length){var i;let e=(0,h.f)(null===k||void 0===k||null===(i=k.list)||void 0===i?void 0:i.length);N((()=>e))}}),[null===k||void 0===k?void 0:k.list]);const q=(0,v.useCallback)((0,p.J)((e=>{y((()=>1)),c(e)}),1500),[]),P=(0,v.useCallback)((()=>{y((()=>1)),E()}),[E]);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)("div",{className:t.Z.fm_header_container,children:[(0,G.jsxs)("h6",{children:[r("total_rejected")," : "," ",null!==o&&void 0!==o?o:0]}),(0,G.jsx)("div",{className:t.Z.fm_search,children:(0,G.jsx)("section",{className:t.Z.fm_search_container,children:(0,G.jsxs)("div",{className:t.Z.fm_search_container_inner,children:[(0,G.jsx)("img",{className:t.Z.fm_search_icon,alt:"search icon",src:"".concat(f.dB,"/navbar-search.svg")}),(0,G.jsx)("input",{type:"text",placeholder:r("search"),onChange:e=>{e.target.value?q(e.target.value):(y((()=>1)),c(""))}})]})})})]}),null===k||void 0===k||null===(i=k.list)||void 0===i?void 0:i.map(((e,i)=>{var l;return(null===k||void 0===k||null===(l=k.list)||void 0===l?void 0:l.length)===i+1?(0,G.jsx)("div",{ref:C,children:(0,G.jsx)(U,{receipt:e,isAccess:"REJECTED",aid:a,onRefetch:P})},null===e||void 0===e?void 0:e._id):(0,G.jsx)(U,{receipt:e,isAccess:"REJECTED",aid:a,onRefetch:P},null===e||void 0===e?void 0:e._id)})),S?d?(0,G.jsx)(_.Z,{}):(0,G.jsx)(j.Z,{}):d?0===(null===k||void 0===k||null===(l=k.list)||void 0===l?void 0:l.length)&&(0,G.jsx)(x.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No receipts found related this search."}):0===(null===k||void 0===k||null===(n=k.list)||void 0===n?void 0:n.length)&&(0,G.jsx)(x.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No receipts found."})]})},I=e=>{var i,l,n;let{aid:a,approvedCount:o}=e;const{t:r}=(0,s.$G)(),[d,c]=(0,v.useState)(""),[u,y]=(0,v.useState)(1),[Z,N]=(0,v.useState)(!0),[C,b]=(0,m.YD)({skip:d}),{admissionPaymentVerifyList:k,admissionPaymentVerifyListLoading:S}=(0,g.jD)({data:{aid:a,page:u,limit:10,search:d,filterBy:"ALL_APPROVE",over_filter:""},skip:!a});(0,v.useEffect)((()=>{b&&Z&&y((e=>e+1))}),[b,Z]),(0,v.useEffect)((()=>{var e;if(null!==k&&void 0!==k&&null!==(e=k.list)&&void 0!==e&&e.length){var i;let e=(0,h.f)(null===k||void 0===k||null===(i=k.list)||void 0===i?void 0:i.length);N((()=>e))}}),[null===k||void 0===k?void 0:k.list]);const E=(0,v.useCallback)((0,p.J)((e=>{y((()=>1)),c(e)}),1500),[]);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)("div",{className:t.Z.fm_header_container,children:[(0,G.jsxs)("h6",{children:[r("total_accepted")," "," : "," ",null!==o&&void 0!==o?o:0]}),(0,G.jsx)("div",{className:t.Z.fm_search,children:(0,G.jsx)("section",{className:t.Z.fm_search_container,children:(0,G.jsxs)("div",{className:t.Z.fm_search_container_inner,children:[(0,G.jsx)("img",{className:t.Z.fm_search_icon,alt:"search icon",src:"".concat(f.dB,"/navbar-search.svg")}),(0,G.jsx)("input",{type:"text",placeholder:r("search"),onChange:e=>{e.target.value?E(e.target.value):(y((()=>1)),c(""))}})]})})})]}),null===k||void 0===k||null===(i=k.list)||void 0===i?void 0:i.map(((e,i)=>{var l;return(null===k||void 0===k||null===(l=k.list)||void 0===l?void 0:l.length)===i+1?(0,G.jsx)("div",{ref:C,children:(0,G.jsx)(U,{receipt:e})},null===e||void 0===e?void 0:e._id):(0,G.jsx)(U,{receipt:e},null===e||void 0===e?void 0:e._id)})),S?d?(0,G.jsx)(_.Z,{}):(0,G.jsx)(j.Z,{}):d?0===(null===k||void 0===k||null===(l=k.list)||void 0===l?void 0:l.length)&&(0,G.jsx)(x.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No receipts found related this search."}):0===(null===k||void 0===k||null===(n=k.list)||void 0===n?void 0:n.length)&&(0,G.jsx)(x.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No receipts found."})]})},O=e=>{let{aid:i,requestedCount:l,approvedCount:m,rejectCount:h}=e;const{t:p}=(0,s.$G)(),[j]=(0,r.lr)(),x=(0,d.TH)(),g=(0,d.UO)();return(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(n.Z,{children:[(0,G.jsx)(a.Z,{children:(0,G.jsxs)("div",{className:t.Z.fm_header_container,children:[(0,G.jsx)("h6",{children:p("fee_receipts_request")}),(0,G.jsx)("img",{src:"".concat(f.J7,"/filter.svg"),alt:"filter icon"})]})}),(0,G.jsx)(o.Z,{}),(0,G.jsxs)(a.Z,{customStyle:{paddingTop:"0"},children:[(0,G.jsx)(c.Z,{children:z.map((e=>{var i;return(0,G.jsx)(u.Z,{tab:e,isLink:!0,isActive:"requested"===e.id&&!j.get("n")||j.get("n")===e.id,parentState:x.state,url:"Institute"===(null===(i=x.state)||void 0===i?void 0:i.urlOffSet)?"/q/".concat(g.username,"/institute/member/finance?type=verification").concat(e.urlKey):"/q/".concat(g.username,"/member/staff/finance?type=verification").concat(e.urlKey)},null===e||void 0===e?void 0:e.id)}))}),(0,G.jsx)(o.Z,{customStyleBorder:{marginTop:"0"}})]}),(0,G.jsx)(a.Z,{customStyle:{paddingTop:"0"},children:(0,G.jsx)(v.Suspense,{fallback:(0,G.jsx)(_.Z,{}),children:"accepted"===j.get("n")?(0,G.jsx)(I,{aid:i,approvedCount:m}):"rejected"===j.get("n")?(0,G.jsx)(Q,{aid:i,rejectCount:h}):(0,G.jsx)($,{aid:i,requestedCount:l})})})]})})},z=[{label:"all_request",id:"requested",urlKey:""},{label:"accepted",id:"accepted",urlKey:"&n=accepted"},{label:"rejected",id:"rejected",urlKey:"&n=rejected"}]}}]);
//# sourceMappingURL=71870.66b65c16.chunk.js.map