"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[1371,4258],{7254:function(e,l,n){var i=n(29439),t=n(72791),o=n(55336),s=n(98684),d=n(97892),a=n.n(d),c=n(82824),r=n(1095),v=n(55050),u=n(93638),f=n(36132),m=n(39230),h=n(45445),x=n(80184);l.Z=function(e){var l,n,d,g,Z,p,w,N,b,y,M,R,S,k,Y,q,A,L,F,D,C,T,I,J,P,W,B,E,G=e.leave,$=e.onRefetch,z=e.modId,H=e.flow,K=e.whichAccess,O=(0,m.$G)().t,Q=(0,f.Sr)(),U=(0,i.Z)(Q,1)[0],V=(0,t.useState)(!1),X=(0,i.Z)(V,2),ee=X[0],le=X[1],ne=(0,t.useState)(!1),ie=(0,i.Z)(ne,2),te=ie[0],oe=ie[1],se=function(e){null!==G&&void 0!==G&&G._id&&H&&z&&(le((function(e){return!e})),U({lid:null===G||void 0===G?void 0:G._id,requestLeave:{leave_from:H,staff_mod:z,status:e}}).then((function(){$(),le((function(e){return!e}))})).catch({}))},de=function(){oe((function(e){return!e}))};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:v.Z.lmsr_card,children:[(0,x.jsxs)("div",{className:v.Z.lmsrc_card,children:[(0,x.jsxs)("div",{className:v.Z.lmsrc_card_inner,children:[(0,x.jsx)("img",{src:null!==G&&void 0!==G&&null!==(l=G.staff)&&void 0!==l&&l.staffProfilePhoto?"".concat(r.yI,"/").concat(null===G||void 0===G||null===(n=G.staff)||void 0===n?void 0:n.staffProfilePhoto):"".concat(s.p3,"/feed-user-avatar.svg"),alt:"staff icon"}),(0,x.jsxs)("div",{className:v.Z.lmsrci_text,children:[(0,x.jsx)("h6",{children:"".concat(null===G||void 0===G||null===(d=G.staff)||void 0===d?void 0:d.staffFirstName," ").concat(null!==G&&void 0!==G&&null!==(g=G.staff)&&void 0!==g&&g.staffMiddleName?null===G||void 0===G||null===(Z=G.staff)||void 0===Z?void 0:Z.staffMiddleName:""," ").concat(null===G||void 0===G||null===(p=G.staff)||void 0===p?void 0:p.staffLastName)}),(0,x.jsxs)("p",{children:["Sactioning"===K?(0,x.jsxs)(x.Fragment,{children:[O("reviewed_on")," ",(0,c.J)(null===G||void 0===G||null===(w=G.review)||void 0===w?void 0:w.review_on,"LT"),","," ",a()(null===G||void 0===G||null===(N=G.review)||void 0===N?void 0:N.review_on).format("DD MMM YYYY")]}):"Reviewing"===K?(0,x.jsxs)(x.Fragment,{children:[O("recomend_on"),(0,c.J)(null===G||void 0===G||null===(b=G.recommend)||void 0===b?void 0:b.recommend_on,"LT"),","," ",a()(null===G||void 0===G||null===(y=G.recommend)||void 0===y?void 0:y.recommend_on).format("DD MMM YYYY")]}):(0,x.jsxs)(x.Fragment,{children:[O("raised_on"),(0,c.J)(null===G||void 0===G?void 0:G.createdAt,"LT"),", ",a()(null===G||void 0===G?void 0:G.createdAt).format("DD MMM YYYY"),", "]}),(0,x.jsx)("span",{className:v.Z.lmsrc_date,onClick:de,children:O("for_dates")})]}),(0,x.jsx)("p",{children:"Sactioning"===K?(0,x.jsxs)(x.Fragment,{children:[O("reviewing_by"),"".concat(null!==(M=null===G||void 0===G||null===(R=G.review)||void 0===R||null===(S=R.review_by)||void 0===S?void 0:S.staffFirstName)&&void 0!==M?M:""," ").concat(null!==(k=null===G||void 0===G||null===(Y=G.review)||void 0===Y||null===(q=Y.review_by)||void 0===q?void 0:q.staffMiddleName)&&void 0!==k?k:""," ").concat(null!==(A=null===G||void 0===G||null===(L=G.review)||void 0===L||null===(F=L.review_by)||void 0===F?void 0:F.staffLastName)&&void 0!==A?A:"")]}):"Reviewing"===K?(0,x.jsxs)(x.Fragment,{children:[O("recomending_by"),"".concat(null!==(D=null===G||void 0===G||null===(C=G.recommend)||void 0===C||null===(T=C.recommend_by)||void 0===T?void 0:T.staffFirstName)&&void 0!==D?D:""," ").concat(null!==(I=null===G||void 0===G||null===(J=G.recommend)||void 0===J||null===(P=J.recommend_by)||void 0===P?void 0:P.staffMiddleName)&&void 0!==I?I:""," ").concat(null!==(W=null===G||void 0===G||null===(B=G.recommend)||void 0===B||null===(E=B.recommend_by)||void 0===E?void 0:E.staffLastName)&&void 0!==W?W:"")]}):null})]})]}),(0,x.jsx)("div",{className:v.Z.lmsrc_btn,children:"Request"===(null===G||void 0===G?void 0:G.status)?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(u.Z,{label:O("reject"),onAction:function(){return se("Rejected")},customStyle:_}),(0,x.jsx)(u.Z,{label:O("approve"),onAction:function(){return se("Accepted")},customStyle:j})]}):null})]}),(0,x.jsx)("div",{className:v.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,x.jsxs)("h6",{style:{fontWeight:"400"},children:[O("leave_type")," "," : ",null===G||void 0===G?void 0:G.leave_type]})}),(0,x.jsx)("div",{className:v.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,x.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[O("reason")," "," : ",null===G||void 0===G?void 0:G.reason]})}),(null===G||void 0===G?void 0:G.attach)&&(0,x.jsx)("div",{className:v.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,x.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[O("attachment")," "," : ",(0,x.jsx)("a",{href:"".concat(r.q2,"/").concat(null===G||void 0===G?void 0:G.attach),target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,x.jsx)("span",{className:v.Z.lmsrc_date,children:O("view_attachment")})})]})})]}),te&&(0,x.jsx)(h.Z,{onClose:de,allDate:null===G||void 0===G?void 0:G.date}),ee&&(0,x.jsx)(o.Z,{})]})};var _={"--bg-button":"#e7e7e7","--color-button":"#6f727c","--color-white":"#ffffff",margin:"0",padding:"0.2rem 0.8rem"},j={margin:"0",padding:"0.2rem 0.8rem"}},95209:function(e,l,n){n.r(l);var i=n(29439),t=n(72791),o=n(56959),s=n(23441),d=n(91427),a=n(57588),c=n(63687),r=n(21348),v=n(90904),u=n(55336),f=n(1669),m=n(2651),h=n(36132),x=n(39230),_=n(98684),j=n(7254),g=n(80184);l.default=function(e){var l,n,Z,p=e.modId,w=(0,x.$G)().t,N=(0,t.useState)(""),b=(0,i.Z)(N,2),y=b[0],M=b[1],R=(0,t.useState)(1),S=(0,i.Z)(R,2),k=S[0],Y=S[1],q=(0,t.useState)(!0),A=(0,i.Z)(q,2),L=A[0],F=A[1],D=(0,s.YD)({skip:y}),C=(0,i.Z)(D,2),T=C[0],I=C[1],J=(0,h.B8)({data:{mid:p,page:k,limit:10,search:y,flow:"Review_Section"},skip:!p}),P=J.lmsModeratorAllRequestList,W=J.lmsModeratorAllRequestListLoading,B=J.lmsModeratorAllRequestListRefetch;(0,t.useEffect)((function(){I&&L&&Y((function(e){return e+1}))}),[I,L]),(0,t.useEffect)((function(){var e;if(null!==P&&void 0!==P&&null!==(e=P.list)&&void 0!==e&&e.length){var l,n=(0,d.f)(null===P||void 0===P||null===(l=P.list)||void 0===l?void 0:l.length);F((function(){return n}))}}),[null===P||void 0===P?void 0:P.list]);var E=(0,t.useCallback)((0,a.J)((function(e){Y((function(){return 1})),M(e)}),1500),[]),G=(0,t.useCallback)((function(){Y((function(){return 1})),M(""),B()}),[B]);return(0,g.jsxs)(c.Z,{children:[(0,g.jsx)(r.Z,{children:(0,g.jsxs)("div",{className:o.Z.fm_header_container,children:[(0,g.jsx)("h6",{children:w("leave_request")}),(0,g.jsx)("div",{className:o.Z.fm_search,children:(0,g.jsx)("section",{className:o.Z.fm_search_container,children:(0,g.jsxs)("div",{className:o.Z.fm_search_container_inner,children:[(0,g.jsx)("img",{className:o.Z.fm_search_icon,alt:"search icon",src:"".concat(_.dB,"/navbar-search.svg")}),(0,g.jsx)("input",{type:"text",placeholder:w("search"),onChange:function(e){e.target.value?E(e.target.value):(Y((function(){return 1})),M(""))}})]})})})]})}),(0,g.jsx)(v.Z,{}),(0,g.jsxs)(r.Z,{children:[null===P||void 0===P||null===(l=P.list)||void 0===l?void 0:l.map((function(e,l){var n;return(null===P||void 0===P||null===(n=P.list)||void 0===n?void 0:n.length)===l+1?(0,g.jsx)("div",{ref:T,children:(0,g.jsx)(j.Z,{leave:e,onRefetch:G,modId:p,flow:"Review_Section",whichAccess:"Reviewing"})},null===e||void 0===e?void 0:e._id):(0,g.jsx)(j.Z,{leave:e,onRefetch:G,modId:p,flow:"Review_Section",whichAccess:"Reviewing"},null===e||void 0===e?void 0:e._id)})),W?y?(0,g.jsx)(u.Z,{}):(0,g.jsx)(f.Z,{}):y?0===(null===P||void 0===P||null===(n=P.list)||void 0===n?void 0:n.length)&&(0,g.jsx)(m.Z,{title:"No staff leave request found related this search."}):0===(null===P||void 0===P||null===(Z=P.list)||void 0===Z?void 0:Z.length)&&(0,g.jsx)(m.Z,{title:"No staff leave request."})]})]})}}}]);
//# sourceMappingURL=1371.f7bb9f68.chunk.js.map