"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[3877],{37570:function(e,t,n){var s=n(74165),a=n(15861),i=n(1413),l=n(37762),d=n(4942),c=n(29439),r=n(72791),o=n(36665),u=n(25313),v=n(98734),m=n(39230),h=n(98472),x=n(98094),j=n(33992),g=n(33710),Z=n(72420),b=n(59965),p=n(80184);t.Z=function(e){var t=e.onClose,n=e.cid,f=e.className,N=(0,m.$G)().t,y=(0,r.useState)(!1),S=(0,c.Z)(y,2),_=S[0],A=S[1],T=(0,r.useState)(!1),k=(0,c.Z)(T,2),I=k[0],C=k[1],P=(0,r.useState)(!1),D=(0,c.Z)(P,2),R=D[0],F=D[1],w=(0,r.useState)([]),M=(0,c.Z)(w,2),L=M[0],E=M[1],O=(0,r.useState)(""),q=(0,c.Z)(O,2),G=q[0],H=q[1],U=(0,r.useState)({startRange:"",endRange:""}),$=(0,c.Z)(U,2),V=$[0],Y=$[1],W=(0,g.Z)(),B=W.daysInMonth,J=W.selectedDate,z=W.monthNames,X=W.getNextMonth,K=W.getPrevMonth,Q=(0,j.R0)(),ee=(0,c.Z)(Q,1)[0];(0,r.useEffect)((function(){R&&(document.getElementById("attendance_download_file").click(),F(!1),E([]),A((function(e){return!e})))}),[R]);var te=function(e){if("ALL"===G){var t,n,s,a=(t={GRNO:"",RollNo:"",Name:"",Gender:""},(0,d.Z)(t,e.className,""),(0,d.Z)(t,"Class Overall Percentage",""),t),c=(0,l.Z)(null===e||void 0===e?void 0:e.mapSubject);try{for(c.s();!(s=c.n()).done;){var r=s.value;a[r.subjectName]="",a["".concat(r.subjectName," Overall Percentage")]=""}}catch(v){c.e(v)}finally{c.f()}a["Overall Percentage"]="";var o=null===e||void 0===e||null===(n=e.students)||void 0===n?void 0:n.map((function(e){var t,n,s=0,d=(0,i.Z)({},a);d.GRNO=null!==(t=null===e||void 0===e?void 0:e.studentGRNO)&&void 0!==t?t:"N/A",d.RollNo=null===e||void 0===e?void 0:e.studentROLLNO,d.Name="".concat((null===e||void 0===e?void 0:e.studentFirstName)+" "+(null===e||void 0===e?void 0:e.studentMiddleName)+" "+(null===e||void 0===e?void 0:e.studentLastName)),d.Gender=null===e||void 0===e?void 0:e.studentGender,d[e.className]="".concat(e.classWise.presentCount,"/").concat(e.classWise.totalCount),d["Class Overall Percentage"]=e.classWise.totalPercentage;var c,r=(0,l.Z)(null===e||void 0===e?void 0:e.subjects);try{for(r.s();!(c=r.n()).done;){var o=c.value;d[o.subjectName]="".concat(o.presentCount,"/").concat(o.totalCount),d["".concat(o.subjectName," Overall Percentage")]=o.totalPercentage,o.totalPercentage&&(s+=o.totalPercentage)}}catch(v){r.e(v)}finally{r.f()}return d["Overall Percentage"]=(s/(null===e||void 0===e||null===(n=e.subjects)||void 0===n?void 0:n.length)).toFixed(2),d}));return o}var u=new Date("".concat(B," ").concat(z[J.getMonth()]," ").concat(J.getFullYear()));return u=u.toISOString(),null===e||void 0===e?void 0:e.map((function(e){var t,n={};if("RANGE"===G)for(var s=1;s<=B;s++)n["".concat(s,"/").concat(u.substring(5,7),"/").concat(u.substring(0,4))]="";else if("All"===G)for(var a=1;a<=B;a++)n["".concat(a,"/").concat(u.substring(5,7),"/").concat(u.substring(0,4))]="";else for(var d=1;d<=B;d++)d<10?n["0".concat(d,"/").concat(u.substring(5,7),"/").concat(u.substring(0,4))]="":n["".concat(d,"/").concat(u.substring(5,7),"/").concat(u.substring(0,4))]="";var c,r=(0,l.Z)(null===e||void 0===e?void 0:e.availablity);try{for(r.s();!(c=r.n()).done;){var o=c.value;n["".concat(null===o||void 0===o?void 0:o.date)]=null===o||void 0===o?void 0:o.status}}catch(v){r.e(v)}finally{r.f()}return(0,i.Z)({GRNO:null!==(t=null===e||void 0===e?void 0:e.studentGRNO)&&void 0!==t?t:"N/A",RollNo:null===e||void 0===e?void 0:e.studentROLLNO,Name:(null===e||void 0===e?void 0:e.studentFirstName)+" "+(null===e||void 0===e?void 0:e.studentMiddleName)+" "+(null===e||void 0===e?void 0:e.studentLastName),Gender:null===e||void 0===e?void 0:e.studentGender},n)}))},ne=function(e){H(e)};return(0,p.jsxs)(o.Z,{onClose:t,children:[(0,p.jsxs)("div",{className:u.Z.filter_container,style:{minHeight:"15rem"},children:[(0,p.jsx)("h6",{className:u.Z.filter_title,children:N("filter_and_export_student_attendance")}),(0,p.jsx)(x.Z,{customStyle:{width:"100%"}}),(0,p.jsxs)("section",{className:Z.Z.tile_tile_container,style:{marginTop:"1rem"},children:[(0,p.jsx)("div",{className:""===G?Z.Z.tile_tile_active:Z.Z.tile_tile,onClick:function(){return ne("")},children:N("month")}),(0,p.jsx)("div",{className:"ALL"===G?Z.Z.tile_tile_active:Z.Z.tile_tile,onClick:function(){return ne("ALL")},children:N("all")})]}),G?"ALL"===G?null:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(b.Z,{labelText:N("filter_from"),placeholder:N("select_date"),name:"from",value:V.startRange,onDateFunction:function(e){Y((function(t){return(0,i.Z)((0,i.Z)({},t),{},{startRange:e})}))},errorShow:I.startRange,customStyleContainer:{position:"relative",width:"100%"},datePickerPosition:{top:"-1rem"}}),(0,p.jsx)(b.Z,{labelText:N("filter_to"),placeholder:N("select_date"),name:"to",value:V.endRange,onDateFunction:function(e){Y((function(t){return(0,i.Z)((0,i.Z)({},t),{},{endRange:e})}))},errorShow:I.endRange,customStyleContainer:{position:"relative",width:"100%"},datePickerPosition:{top:"-1rem",left:"-7rem"}})]}):(0,p.jsxs)("section",{className:u.Z.fees_head_title,children:[(0,p.jsx)("img",{src:"/images/members/back-icon-white.svg",style:{cursor:"pointer"},onClick:function(){K()}}),(0,p.jsxs)("h6",{className:"".concat(u.Z.yearmonth),children:["".concat(z[J.getMonth()])," ","".concat(J.getFullYear())]}),(0,p.jsx)("img",{src:"/images/members/forward-icon-white.svg",style:{cursor:"pointer"},onClick:function(){X()}})]}),(0,p.jsx)("button",{className:u.Z.next_btn,onClick:function(){var e=!1,t="";if("RANGE"===G){for(var i in t=function(e){var t={};for(var n in e)e[n]||(t[n]="".concat(n," is required!"));return t}(V))if(i){e=!0;break}}else e=!1;if(e)C(t);else{A((function(e){return!e}));var l=new Date("".concat(B," ").concat(z[J.getMonth()]," ").concat(J.getFullYear()));l=l.toISOString(),ee({cid:n,is_type:G,month:"".concat(l.substring(5,7)),year:"".concat(l.substring(0,4)),zipData:V}).then(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(null===(n=t.data)||void 0===n?void 0:n.attendance_zip);case 2:a=e.sent,E((function(){return a})),F(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){}))}},style:{marginTop:"3rem"},children:N("export_data")}),(0,p.jsx)(h.CSVLink,{data:L,filename:"".concat(f),id:"attendance_download_file"})]}),_&&(0,p.jsx)(v.Z,{})]})}},23664:function(e,t,n){var s=n(29439),a=n(72791),i=n(16871),l=n(43504),d=n(24582),c=n(39230),r=n(69721),o=n(34586),u=n(80184);t.Z=function(e){var t,n=e.cid,v=e.openAs,m=e.isDepartment,h=(0,i.UO)(),x=(0,c.$G)().t,j=(0,a.useState)([]),g=(0,s.Z)(j,2),Z=g[0],b=g[1],p=(0,d.EY)({data:{cid:n,page:1,limit:30},skip:!n}),f=p.classAllStudent,N=p.classAllStudentRefetch;(0,a.useEffect)((function(){n&&N()}),[n,N]),(0,a.useEffect)((function(){var e,t;null!==f&&void 0!==f&&null!==(e=f.classes)&&void 0!==e&&e.ApproveStudent&&b(null===f||void 0===f||null===(t=f.classes)||void 0===t?void 0:t.ApproveStudent)}),[null===f||void 0===f||null===(t=f.classes)||void 0===t?void 0:t.ApproveStudent]);return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:o.Z.catalog,style:{border:m?"none":"0.5px solid #cacaca"},children:[(0,u.jsx)("div",{className:o.Z.searchContainerr,children:(0,u.jsxs)("div",{className:o.Z.searchContainer,style:{width:"100%"},children:[(0,u.jsx)("img",{alt:"",src:"/images/search-dept-icon.svg"}),(0,u.jsx)("input",{type:"text",placeholder:x("search-label"),onChange:function(e){if(e.target.value){var t,n,s=null===f||void 0===f||null===(t=f.classes)||void 0===t||null===(n=t.ApproveStudent)||void 0===n?void 0:n.filter((function(t){var n,s,a;return null!==(n="".concat(null===t||void 0===t?void 0:t.studentFirstName," ").concat(null!==t&&void 0!==t&&t.studentMiddleName?(null===t||void 0===t?void 0:t.studentMiddleName)+" ":"").concat(null===t||void 0===t?void 0:t.studentLastName))&&void 0!==n&&null!==(s=n.toLowerCase())&&void 0!==s&&s.includes(null===(a=e.target.value)||void 0===a?void 0:a.toLowerCase())?t:null}));b(s)}else{var a;b(null===f||void 0===f||null===(a=f.classes)||void 0===a?void 0:a.ApproveStudent)}}})]})}),(0,u.jsx)("div",{className:o.Z.itemsContainer,children:null===Z||void 0===Z?void 0:Z.map((function(e){var t;return(0,u.jsx)(l.rU,{to:"/q/".concat(h.username,"/student/profile"),state:{sid:null===e||void 0===e?void 0:e._id,viewAs:v||"INSTITUTE"},children:(0,u.jsxs)("div",{className:o.Z.item,children:[(0,u.jsx)("p",{children:null===e||void 0===e?void 0:e.studentROLLNO}),(0,u.jsx)("img",{alt:"",src:null!==e&&void 0!==e&&e.studentProfilePhoto?"".concat(r.yI,"/").concat(null===e||void 0===e?void 0:e.studentProfilePhoto):"/images/demo_users/user1.svg"}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("p",{children:[null===e||void 0===e?void 0:e.studentFirstName," ",null!==e&&void 0!==e&&e.studentMiddleName?null===e||void 0===e?void 0:e.studentMiddleName:" "," ",null===e||void 0===e?void 0:e.studentLastName]}),(0,u.jsxs)("p",{style:{marginTop:"0.3rem"},children:[x("gr_number")," ",null!==(t=null===e||void 0===e?void 0:e.studentGRNO)&&void 0!==t?t:""]})]})]})})}))})]})})}},893:function(e,t,n){n.d(t,{Z:function(){return N}});var s=n(93433),a=n(37762),i=n(29439),l=n(72791),d=n(16313),c=n(53967),r=n(94721),o=n(89261),u=n(62921),v=n(17758),m=n(39230),h=n(24582),x=n(98734),j=n(37570),g=n(78687),Z=n(99376),b=n(36721),p=n(80184),f=function(e){var t=e.today,n=e.alreadyMark,s=e.allIdsArray,c=e.clickedIndex,r=e.setClickedIndex,o=e.idPresentArray,u=e.idAbsentArray,v=e.setIdPresentArray,f=e.setIdAbsentArray,N=e.cid,y=e.isDepartment,S=e.className,_=e.setIsRefetch,A=l.useState(!1),T=(0,i.Z)(A,2),k=T[0],I=T[1],C=l.useState(!1),P=(0,i.Z)(C,2),D=P[0],R=P[1],F=(0,h.b6)(),w=(0,i.Z)(F,1)[0],M=(0,h.wf)(),L=(0,i.Z)(M,1)[0],E=(0,m.$G)().t,O=(0,l.useState)(!1),q=(0,i.Z)(O,2),G=q[0],H=q[1],U=(0,g.useDispatch)(),$=(0,l.useState)({msg:"",run:!1}),V=(0,i.Z)($,2),Y=V[0],W=V[1];l.useEffect((function(){null!==o&&void 0!==o&&o.length||null!==u&&void 0!==u&&u.length?I(!0):I(!1)}),[o,u]);var B=function(){H((function(e){return!e}))};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:"1.5rem"},children:[(0,p.jsx)("div",{className:d.Z.buttons,children:(0,p.jsx)("div",{className:d.Z.save,onClick:B,children:E("export_zip_attendance")})}),(0,p.jsx)("div",{className:d.Z.buttons,children:0!==c?k&&!y&&(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:d.Z.save,onClick:function(){R((function(e){return!e}));var e=t.split("-"),i=e[0]>9?e[0]:"0".concat(e[0]),l=e[1]>9?e[1]:"0".concat(e[1]);if(null!==n&&void 0!==n&&n._id)U(Z.R.updateClassAttendance({clsId:N,ldate:"".concat(i,"/").concat(l,"/").concat(e[2]),presentStudent:null!==o&&void 0!==o&&o.length?o:[],absentStudent:null!==u&&void 0!==u&&u.length?u:[],alreadyMark:null===n||void 0===n?void 0:n._id})),L({said:null===n||void 0===n?void 0:n._id,attendanceUpdate:{date:"".concat(i,"/").concat(l,"/").concat(e[2]),present:null!==o&&void 0!==o&&o.length?o:[],absent:null!==u&&void 0!==u&&u.length?u:[]}}).then((function(){_(!0),r(0),R((function(e){return!e})),v([]),f([])})).catch({});else{var d=[];null===s||void 0===s||s.map((function(e){return d.push(e._id)}));var c=[],m=[];if(null!==o&&void 0!==o&&o.length){var h,x=(0,a.Z)(d);try{for(x.s();!(h=x.n()).done;){var j=h.value;null!==o&&void 0!==o&&o.includes(j)||m.push(j),1}}catch(y){x.e(y)}finally{x.f()}}else{var g,b=(0,a.Z)(d);try{for(b.s();!(g=b.n()).done;){var p=g.value;null!==u&&void 0!==u&&u.includes(p)||c.push(p),1}}catch(y){b.e(y)}finally{b.f()}}w({cid:N,attendance:{date:"".concat(i,"/").concat(l,"/").concat(e[2]),present:null!==o&&void 0!==o&&o.length?o:c,absent:null!==u&&void 0!==u&&u.length?u:m}}).then((function(t){var n,s;"Today will be holiday Provided by department Admin or already marked attendance"===(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)?W({msg:"Today will be holiday Provided by department Admin or already marked attendance",run:!0}):U(Z.R.addClassAttendance({clsId:N,ldate:"".concat(i,"/").concat(l,"/").concat(e[2]),presentStudent:null!==o&&void 0!==o&&o.length?o:c,absentStudent:null!==u&&void 0!==u&&u.length?u:m,alreadyMark:null===t||void 0===t||null===(s=t.data)||void 0===s?void 0:s.alreadyMark}));r(0),R((function(e){return!e})),v([]),f([])})).catch({})}},children:E("save")})}):""})]}),D&&(0,p.jsx)(x.Z,{}),G&&(0,p.jsx)(j.Z,{cid:N,onClose:B,className:S}),Y.run&&(0,p.jsx)(b.Ch,{msg:Y.msg,run:Y.run,setRun:function(){return W({msg:"",run:!1})},postiton:"bottom",type:"error"})]})};var N=function(e){var t,n,x,j,Z,b,N,y,S,_,A,T,k,I,C=e.cid,P=e.isDepartment,D=e.className,R=(0,c.Z)(),F=R.calendarData,w=R.selectedDate,M=R.todayFormatted,L=R.switchMonth,E=R.monthNames,O=R.getNextMonth,q=R.getPrevMonth,G=(0,l.useState)(M),H=(0,i.Z)(G,2),U=H[0],$=H[1],V=U.split("-"),Y=V[0]>9?V[0]:"0".concat(V[0]),W=V[1]>9?V[1]:"0".concat(V[1]),B=(0,m.$G)().t,J=(0,g.useSelector)((function(e){return e.attendanceStore.classTeacher})),z=(0,l.useState)(""),X=(0,i.Z)(z,2),K=X[0],Q=X[1],ee=(0,l.useState)(!1),te=(0,i.Z)(ee,2),ne=te[0],se=te[1],ae=(0,h.EY)({data:{cid:C,page:1,limit:30},skip:!C}),ie=ae.classAllStudent,le=ae.classAllStudentRefetch,de=(0,h.Px)({cid:C,date:"".concat(Y,"/").concat(W,"/").concat(V[2])}),ce=de.classStudentCurrentAttendance,re=de.classStudentCurrentAttendanceRefetch;(0,l.useEffect)((function(){if((null===J||void 0===J?void 0:J.length)>0){var e,t=U.split("-"),n=t[0]>9?t[0]:"0".concat(t[0]),s=t[1]>9?t[1]:"0".concat(t[1]),i="",l=(0,a.Z)(J);try{for(l.s();!(e=l.n()).done;){var d=e.value;if((null===d||void 0===d?void 0:d.ldate)==="".concat(n,"/").concat(s,"/").concat(t[2])){if((null===d||void 0===d?void 0:d.clsId)===C){i=d;break}se(!1)}else se(!1)}}catch(c){l.e(c)}finally{l.f()}Q(i)}}),[J,U,C,ne]),(0,l.useEffect)((function(){C&&(le(),re())}),[C,re,le]);var oe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ue=Math.floor(F.map((function(e){return e.date})).indexOf(U)/10),ve=(0,l.useState)(ue),me=(0,i.Z)(ve,2),he=me[0],xe=me[1],je=10*he,ge=Math.ceil(F.length/10),Ze=F.slice(je,je+10).map((function(e,t){return(0,p.jsxs)("div",{className:e.date===U?"".concat(d.Z.date," ").concat(d.Z.clickedDate):d.Z.date,onClick:function(){return $(e.date)},children:[(0,p.jsx)("h6",{children:e.date.split("-")[0]}),(0,p.jsx)("p",{children:oe[e.day]})]},t)})),be=(0,l.useState)(0),pe=(0,i.Z)(be,2),fe=pe[0],Ne=pe[1],ye=(0,l.useState)([]),Se=(0,i.Z)(ye,2),_e=Se[0],Ae=Se[1],Te=(0,l.useState)([]),ke=(0,i.Z)(Te,2),Ie=ke[0],Ce=ke[1],Pe=l.useState([]),De=(0,i.Z)(Pe,2),Re=De[0],Fe=De[1],we=l.useState([]),Me=(0,i.Z)(we,2),Le=Me[0],Ee=Me[1],Oe=(0,l.useState)(!1),qe=(0,i.Z)(Oe,2),Ge=qe[0],He=qe[1];l.useEffect((function(){var e,t;Ae(null===ie||void 0===ie||null===(e=ie.classes)||void 0===e?void 0:e.ApproveStudent),Ce(null===ie||void 0===ie||null===(t=ie.classes)||void 0===t?void 0:t.ApproveStudent)}),[null===ie||void 0===ie||null===(t=ie.classes)||void 0===t?void 0:t.ApproveStudent]),l.useEffect((function(){Fe([]),Ee([])}),[fe]);var Ue=function(e){var t=(0,s.Z)(Re);if(null!==t&&void 0!==t&&t.includes(e)){var n=t.indexOf(e);t.splice(n,1),Fe((function(){return(0,s.Z)(t)}))}else Fe((function(t){return[].concat((0,s.Z)(t),[e])}))},$e=function(e){var t=(0,s.Z)(Le);if(null!==t&&void 0!==t&&t.includes(e)){var n=t.indexOf(e);t.splice(n,1),Ee((function(){return(0,s.Z)(t)}))}else Ee((function(t){return[].concat((0,s.Z)(t),[e])}))};return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:d.Z.attendence,style:{border:P?"none":"0.5px solid #cacaca"},children:[(0,p.jsxs)("div",{className:d.Z.attendencehead,children:[(0,p.jsxs)("div",{className:d.Z.attendenceBtns,children:[(0,p.jsxs)("div",{className:d.Z.changemonth,onClick:function(){return He(!Ge)},children:[(0,p.jsxs)("h6",{children:[E[w.getMonth()]," ",w.getFullYear()]}),(0,p.jsx)("img",{alt:"not found",src:"/images/dropdown-icon.svg"}),Ge&&(0,p.jsx)("div",{className:d.Z.selectMonthList,children:["January","February","March","April","May","June","July","August","September","October","November","December"].map((function(e,t){return(0,p.jsx)("div",{className:d.Z.month,onClick:function(){L(t),He(!1)},children:e},t)}))})]}),(0,p.jsx)(f,{alreadyMark:K?{_id:null===K||void 0===K?void 0:K.alreadyMark}:null===ce||void 0===ce||null===(n=ce.classes)||void 0===n||null===(x=n.attendenceDate)||void 0===x?void 0:x[0],today:U,allIdsArray:null===ie||void 0===ie||null===(j=ie.classes)||void 0===j?void 0:j.ApproveStudent,classStudentCurrentAttendanceRefetch:re,clickedIndex:fe,setClickedIndex:Ne,idPresentArray:Re,idAbsentArray:Le,setIdPresentArray:Fe,setIdAbsentArray:Ee,cid:C,isDepartment:P,className:D,setIsRefetch:se})]}),(0,p.jsxs)("div",{className:d.Z.calender,children:[(0,p.jsx)("div",{className:d.Z.arrowbtn,onClick:function(){he>0?xe((function(e){return e-1})):(xe(ge-1),q())},children:(0,p.jsx)("img",{alt:"not found",src:"/images/members/left-icon.svg"})}),(0,p.jsx)("div",{className:d.Z.dates,children:Ze}),(0,p.jsx)("div",{className:d.Z.arrowbtn,onClick:function(){he+1<ge?xe((function(e){return e+1})):(xe(0),O())},children:(0,p.jsx)("img",{alt:"not found",src:"/images/members/right-icon.svg"})})]})]}),(0,p.jsx)(r.Z,{}),(0,p.jsxs)("div",{className:d.Z.tabs,children:[(0,p.jsxs)("div",{className:0===fe?"".concat(d.Z.tab," ").concat(d.Z.purple):"".concat(d.Z.tab," ").concat(d.Z.grey),onClick:function(){return Ne(0)},children:[B("total")," ",null===ie||void 0===ie||null===(Z=ie.classes)||void 0===Z||null===(b=Z.ApproveStudent)||void 0===b?void 0:b.length]}),(0,p.jsxs)("div",{className:1===fe?"".concat(d.Z.tab," ").concat(d.Z.tabgreen):"".concat(d.Z.tab," ").concat(d.Z.light),onClick:function(){return Ne(1)},children:[B("present")," ",K?null!==(N=null===K||void 0===K?void 0:K.presentCount)&&void 0!==N?N:0:null===ce||void 0===ce||null===(y=ce.classes)||void 0===y||null===(S=y.attendenceDate[0])||void 0===S?void 0:S.presentTotal]}),(0,p.jsxs)("div",{className:2===fe?"".concat(d.Z.tab," ").concat(d.Z.red):"".concat(d.Z.tab," ").concat(d.Z.rose),onClick:function(){return Ne(2)},children:[B("absent")," ",K?null!==(_=null===K||void 0===K?void 0:K.absentCount)&&void 0!==_?_:0:null===ce||void 0===ce||null===(A=ce.classes)||void 0===A||null===(T=A.attendenceDate[0])||void 0===T?void 0:T.absentTotal]})]}),(0,p.jsxs)("div",{className:d.Z.list,children:[0===fe&&(null===ie||void 0===ie||null===(k=ie.classes)||void 0===k||null===(I=k.ApproveStudent)||void 0===I?void 0:I.map((function(e,t){var n,s,a,i,l,c,r,u;return K?null!==K&&void 0!==K&&null!==(n=K.presentStudent)&&void 0!==n&&n.includes(e._id)?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.Z,{student:e,status:"present"},t),(0,p.jsx)("div",{className:d.Z.divider})]}):null!==K&&void 0!==K&&null!==(s=K.absentStudent)&&void 0!==s&&s.includes(e._id)?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.Z,{student:e,status:"absent"},t),(0,p.jsx)("div",{className:d.Z.divider})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.Z,{student:e,status:"initial"},t),(0,p.jsx)("div",{className:d.Z.divider})]}):null!==ce&&void 0!==ce&&null!==(a=ce.classes)&&void 0!==a&&null!==(i=a.attendenceDate[0])&&void 0!==i&&null!==(l=i.presentStudent)&&void 0!==l&&l.includes(e._id)?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.Z,{student:e,status:"present"},t),(0,p.jsx)("div",{className:d.Z.divider})]}):null!==ce&&void 0!==ce&&null!==(c=ce.classes)&&void 0!==c&&null!==(r=c.attendenceDate[0])&&void 0!==r&&null!==(u=r.absentStudent)&&void 0!==u&&u.includes(e._id)?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.Z,{student:e,status:"absent"},t),(0,p.jsx)("div",{className:d.Z.divider})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.Z,{student:e,status:"initial"},t),(0,p.jsx)("div",{className:d.Z.divider})]})}))),1===fe&&(null===_e||void 0===_e?void 0:_e.length)>0&&(null===_e||void 0===_e?void 0:_e.map((function(e,t){var n,s,a,i;return K?null!==K&&void 0!==K&&null!==(n=K.presentStudent)&&void 0!==n&&n.includes(e._id)?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(u.Z,{student:e,status:"present",presentTabHandler:Ue},t),(0,p.jsx)("div",{className:d.Z.divider})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(u.Z,{student:e,presentTabHandler:Ue,status:"absent"},t),(0,p.jsx)("div",{className:d.Z.divider})]}):null!==ce&&void 0!==ce&&null!==(s=ce.classes)&&void 0!==s&&null!==(a=s.attendenceDate[0])&&void 0!==a&&null!==(i=a.presentStudent)&&void 0!==i&&i.includes(e._id)?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(u.Z,{student:e,status:"present",presentTabHandler:Ue},t),(0,p.jsx)("div",{className:d.Z.divider})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(u.Z,{student:e,presentTabHandler:Ue,status:"absent"},t),(0,p.jsx)("div",{className:d.Z.divider})]})}))),2===fe&&(null===Ie||void 0===Ie?void 0:Ie.length)>0&&(null===Ie||void 0===Ie?void 0:Ie.map((function(e,t){var n,s,a,i;return K?null!==K&&void 0!==K&&null!==(n=K.absentStudent)&&void 0!==n&&n.includes(e._id)?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(v.Z,{student:e,status:"absent",absentTabHandler:$e},t),(0,p.jsx)("div",{className:d.Z.divider})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(v.Z,{student:e,status:"present",absentTabHandler:$e},t),(0,p.jsx)("div",{className:d.Z.divider})]}):null!==ce&&void 0!==ce&&null!==(s=ce.classes)&&void 0!==s&&null!==(a=s.attendenceDate[0])&&void 0!==a&&null!==(i=a.absentStudent)&&void 0!==i&&i.includes(e._id)?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(v.Z,{student:e,status:"absent",absentTabHandler:$e},t),(0,p.jsx)("div",{className:d.Z.divider})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(v.Z,{student:e,status:"present",absentTabHandler:$e},t),(0,p.jsx)("div",{className:d.Z.divider})]})})))]})]})})}},13877:function(e,t,n){n.d(t,{Z:function(){return M}});var s=n(29439),a=n(72791),i=n(16871),l=n(43504),d=n(39230),c=n(22984),r=n(80184);var o=function(e){var t,n,s,a=e.carryParentState,o=(0,d.$G)().t,u=(0,i.TH)(),v=(0,i.UO)();return(0,r.jsx)("div",{className:c.Z.mcqTop,style:{padding:"0"},children:(0,r.jsxs)("div",{className:c.Z.mcqToptabs,children:[(0,r.jsx)(l.rU,{to:"/q/".concat(v.username,"/member/department/").concat(v.deptname,"?a=class-detail"),state:a,className:"class-detail"===(null===(t=u.search)||void 0===t?void 0:t.substring(3))?"".concat(c.Z.mcqTopItem," ").concat(c.Z.active):c.Z.mcqTopItem,children:(0,r.jsx)("div",{children:o("students")})}),(0,r.jsx)(l.rU,{to:"/q/".concat(v.username,"/member/department/").concat(v.deptname,"?a=class-attendance"),state:a,className:"class-attendance"===(null===(n=u.search)||void 0===n?void 0:n.substring(3))?"".concat(c.Z.mcqTopItem," ").concat(c.Z.active):c.Z.mcqTopItem,children:(0,r.jsx)("div",{children:o("attendance")})}),(0,r.jsx)(l.rU,{to:"/q/".concat(v.username,"/member/department/").concat(v.deptname,"?a=class-subject"),state:a,className:"class-subject"===(null===(s=u.search)||void 0===s?void 0:s.substring(3))?"".concat(c.Z.mcqTopItem," ").concat(c.Z.active):c.Z.mcqTopItem,children:(0,r.jsx)("div",{children:o("subjects")})})]})})},u=n(33148),v=n(23664),m=n(65408),h=n(60943),x=n(893),j=n(8148),g=n(11806),Z=n(60726),b=function(e){var t=e.carryParentState,n=e.isDepartment,s=(0,d.$G)().t;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:g.Z.MiddleContentLeft,style:{border:"none"},children:"CLASS_TEACHER"===n?(0,r.jsxs)("div",{className:g.Z.item,style:{paddingLeft:"2vw"},children:[(0,r.jsx)(Z.Z,{carryParentState:t,activeTab:"subject-catalog",children:(0,r.jsxs)("div",{className:g.Z.itemIcon,children:[(0,r.jsx)("img",{src:"/images/member_tab/class/class-catalog-icon.svg",alt:"Class Catalog"}),(0,r.jsx)("p",{children:s("catalog")})]})}),(0,r.jsx)(Z.Z,{carryParentState:t,activeTab:"subject-attendance",children:(0,r.jsxs)("div",{className:g.Z.itemIcon,children:[(0,r.jsx)("img",{src:"/images/member_tab/class/class-attendance-icon.svg",alt:"attendence"}),(0,r.jsxs)("p",{children:[" ",s("attendance")," "]})]})}),(0,r.jsx)(Z.Z,{carryParentState:t,activeTab:"subject-assignment",children:(0,r.jsxs)("div",{className:g.Z.itemIcon,children:[(0,r.jsx)("img",{src:"/images/member_tab/subject/subject-assignment-icon.svg",alt:"assignment"}),(0,r.jsx)("p",{children:s("assigmnent")})]})}),(0,r.jsx)(Z.Z,{carryParentState:t,activeTab:"subject-exam",children:(0,r.jsxs)("div",{className:g.Z.itemIcon,children:[(0,r.jsx)("img",{src:"/images/member_tab/department/department-examination-icon.svg",alt:"attendence"}),(0,r.jsx)("p",{children:s("examinations")})]})}),(0,r.jsx)(Z.Z,{carryParentState:t,activeTab:"subject-academic",children:(0,r.jsxs)("div",{className:g.Z.itemIcon,children:[(0,r.jsx)("img",{src:"/images/member_tab/subject/subject-daily-update-icon.svg",alt:"student Request"}),(0,r.jsx)("p",{style:{textAlign:"center"},children:s("academics_teachings")})]})})]}):(0,r.jsxs)("div",{className:g.Z.item,style:{paddingLeft:"2vw"},children:[(0,r.jsx)(j.Z,{carryParentState:t,activeTab:"subject-catalog",children:(0,r.jsxs)("div",{className:g.Z.itemIcon,children:[(0,r.jsx)("img",{src:"/images/member_tab/class/class-catalog-icon.svg",alt:"Class Catalog"}),(0,r.jsx)("p",{children:s("catalog")})]})}),(0,r.jsx)(j.Z,{carryParentState:t,activeTab:"subject-attendance",children:(0,r.jsxs)("div",{className:g.Z.itemIcon,children:[(0,r.jsx)("img",{src:"/images/member_tab/class/class-attendance-icon.svg",alt:"attendence"}),(0,r.jsxs)("p",{children:[" ",s("attendance")," "]})]})}),(0,r.jsx)(j.Z,{carryParentState:t,activeTab:"subject-assignment",children:(0,r.jsxs)("div",{className:g.Z.itemIcon,children:[(0,r.jsx)("img",{src:"/images/member_tab/subject/subject-assignment-icon.svg",alt:"assignment"}),(0,r.jsx)("p",{children:s("assigmnent")})]})}),(0,r.jsx)(j.Z,{carryParentState:t,activeTab:"subject-exam",children:(0,r.jsxs)("div",{className:g.Z.itemIcon,children:[(0,r.jsx)("img",{src:"/images/member_tab/department/department-examination-icon.svg",alt:"attendence"}),(0,r.jsx)("p",{children:s("examinations")})]})}),(0,r.jsx)(j.Z,{carryParentState:t,activeTab:"subject-academic",children:(0,r.jsxs)("div",{className:g.Z.itemIcon,children:[(0,r.jsx)("img",{src:"/images/member_tab/subject/subject-daily-update-icon.svg",alt:"student Request"}),(0,r.jsx)("p",{style:{textAlign:"center"},children:s("academics_teachings")})]})})]})})})},p=n(81411),f=n(11457),N=n(40444),y=n(36721),S=n(99612),_=n(69721),A=n(71342);var T=function(e){var t,n=e.examView,s=(0,d.$G)().t,i=(0,N.dn)({data:{atsid:null===n||void 0===n?void 0:n._id,page:1,limit:50},skip:!(null!==n&&void 0!==n&&n._id)}),l=i.subjectMcqTestsetAlloted,c=i.subjectMcqTestsetAllotedRefetch;return(0,a.useEffect)((function(){null!==n&&void 0!==n&&n._id&&c()}),[null===n||void 0===n?void 0:n._id,c]),(0,r.jsxs)("div",{className:A.Z.markDetails,children:[(0,r.jsx)("div",{className:A.Z.markDetailsHeader,children:(0,r.jsxs)("h6",{children:[(0,r.jsxs)("span",{className:A.Z.span,children:[" ",s("exam")," : "]})," ",null===n||void 0===n?void 0:n.testExamName]})}),(0,r.jsx)("div",{className:A.Z.markDetailsHeader2,children:(0,r.jsxs)("h6",{children:[(0,r.jsxs)("span",{className:A.Z.span2,children:[" ",s("maximum_marks")," : "]})," ",null===n||void 0===n?void 0:n.testTotalNumber]})}),(0,r.jsx)("div",{className:A.Z.table,children:(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{className:A.Z.thead,children:(0,r.jsxs)("tr",{className:A.Z.tr,children:[(0,r.jsx)("th",{className:A.Z.th,children:s("roll_no")}),(0,r.jsx)("th",{className:A.Z.th,children:s("name")}),(0,r.jsx)("th",{className:"".concat(A.Z.th," ").concat(A.Z.thMargin),children:s("ob")})]})}),(0,r.jsx)("tbody",{className:A.Z.tbody,children:null===l||void 0===l||null===(t=l.studentList)||void 0===t?void 0:t.map((function(e){var t,n;return(0,r.jsxs)("tr",{className:A.Z.tr,children:[(0,r.jsx)("td",{className:A.Z.td,children:null===e||void 0===e?void 0:e.studentROLLNO}),(0,r.jsx)("td",{className:A.Z.td,children:(0,r.jsxs)("div",{className:A.Z.student,children:[(0,r.jsx)("img",{src:null!==e&&void 0!==e&&e.studentProfilePhoto?"".concat(_.yI,"/").concat(null===e||void 0===e?void 0:e.studentProfilePhoto):"/images/demo_users/user1.svg",alt:""}),(0,r.jsxs)("h6",{children:[null===e||void 0===e?void 0:e.studentFirstName," ",null!==e&&void 0!==e&&e.studentMiddleName?null===e||void 0===e?void 0:e.studentMiddleName:" "," ",null===e||void 0===e?void 0:e.studentLastName]})]})}),(0,r.jsx)("td",{className:A.Z.td,children:(0,r.jsx)("input",{type:"number",name:"student",defaultValue:null===e||void 0===e||null===(t=e.testSet)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.testObtainMarks,readOnly:!0,disabled:!0})})]},null===e||void 0===e?void 0:e._id)}))})]})})]})},k=n(53478),I=n(7280);var C=function(e){var t=e.exam,n=e.onExamView,s=(0,d.$G)().t;return(0,r.jsxs)("div",{className:k.Z.sidebarheader,onClick:function(){return n(t)},title:"See exam",children:[(0,r.jsx)("div",{className:k.Z.dot}),(0,r.jsx)("img",{src:"/images/members/exam-icon.svg",alt:""}),(0,r.jsxs)("div",{className:k.Z.text,children:[(0,r.jsx)("div",{className:k.Z.insName,children:(0,r.jsx)("h6",{children:null===t||void 0===t?void 0:t.examName})}),"Final"===(null===t||void 0===t?void 0:t.examType)?"":(0,r.jsx)("div",{className:k.Z.insUserName,children:(0,r.jsxs)("p",{children:[s("weightage"),": ",null===t||void 0===t?void 0:t.examWeight," %"]})})]}),(0,r.jsxs)("div",{className:k.Z.date,children:[(0,r.jsxs)("h6",{children:[" ",s("total_marks")," ",null===t||void 0===t?void 0:t.totalMarks]}),(0,r.jsx)("p",{children:null===t||void 0===t?void 0:t.examType})]})]})};var P=function(e){var t,n,i=e.sid,l=e.isDepartment,c=(0,d.$G)().t,o=a.useState(0),u=(0,s.Z)(o,2),v=u[0],m=u[1],h=(0,a.useState)(null),x=(0,s.Z)(h,2),j=x[0],g=x[1],Z=(0,a.useState)(!1),b=(0,s.Z)(Z,2),p=b[0],f=b[1],_=(0,a.useState)(""),A=(0,s.Z)(_,2),P=A[0],D=(A[1],(0,N.vZ)({data:{sid:i,page:1,limit:50},skip:!i})),R=D.subjectAllExam,F=D.subjectAllExamRefetch,w=(0,N.LX)({data:{sid:i,page:1,limit:50},skip:!i}),M=w.subjectMcqTestsetTakenList,L=w.subjectMcqTestsetTakenListRefetch;(0,a.useEffect)((function(){i&&(F(),L())}),[i,F,L]);var E=function(e){m(1),g(e)};return(0,r.jsxs)(r.Fragment,{children:[0===v&&(0,r.jsx)("div",{className:k.Z.exam_tab_space,children:(0,r.jsx)(I.Z,{isDepartment:l,children:(0,r.jsxs)("div",{className:k.Z.all_exam_main_container,children:[(0,r.jsxs)("div",{className:k.Z.exam_container,children:[(0,r.jsx)("h4",{className:k.Z.exam_heading,children:c("exams")}),null===R||void 0===R||null===(t=R.subject)||void 0===t?void 0:t.map((function(e){return(0,r.jsx)(C,{exam:e,onExamView:E},null===e||void 0===e?void 0:e._id)}))]}),(0,r.jsxs)("div",{className:k.Z.exam_container,children:[(0,r.jsx)("h4",{className:k.Z.exam_heading,children:c("mcq_mock_test")}),null===M||void 0===M||null===(n=M.allotedTestSet)||void 0===n?void 0:n.map((function(e){var t,n,s,a;return(0,r.jsxs)("div",{className:k.Z.sidebarheader,onClick:function(){return t=e,m(2),void g(t);var t},children:[(0,r.jsx)("img",{src:"/images/members/mcq-exam-icon1.svg",alt:""}),(0,r.jsx)("div",{className:k.Z.text,children:(0,r.jsxs)("div",{className:k.Z.insName,children:[(0,r.jsx)("h6",{children:null===e||void 0===e?void 0:e.testExamName}),(0,r.jsx)("p",{className:k.Z.exam_mcq_date,style:{marginTop:"0.1vw"},children:null===e||void 0===e?void 0:e.testDate})]})}),(0,r.jsxs)("div",{className:k.Z.date,children:[(0,r.jsx)("h6",{children:null===e||void 0===e?void 0:e.testTotalNumber}),(0,r.jsxs)("p",{children:["".concat(null===e||void 0===e||null===(t=e.testStart)||void 0===t?void 0:t.substr(0,5)," ").concat(null===e||void 0===e||null===(n=e.testStart)||void 0===n?void 0:n.substr(9))," ","to"," ","".concat(null===e||void 0===e||null===(s=e.testEnd)||void 0===s?void 0:s.substr(0,5)," ").concat(null===e||void 0===e||null===(a=e.testEnd)||void 0===a?void 0:a.substr(9))]})]})]},null===e||void 0===e?void 0:e._id)}))]})]})})}),1===v&&(0,r.jsx)(S.Z,{examView:j,sid:i,isDepartment:l}),2===v&&(0,r.jsx)(T,{examView:j}),(0,r.jsx)(y.SY,{msg:P,run:p,setRun:f})]})},D=n(60463),R=n(46480),F=n(6763),w=n(61587),M=function(e){var t,n,a,c,j,g,Z,N,y,S,_,A,T,k,I,C,M,L,E,O,q,G,H,U,$,V,Y=e.carryParentState,W=e.viewAs,B=e.did,J=e.instituteId,z=(0,d.$G)().t,X=(0,i.TH)(),K=(0,l.lr)(),Q=(0,s.Z)(K,1)[0];return(0,r.jsx)(r.Fragment,{children:"subject-academic-detail"===Q.get("a")?(0,r.jsx)(R.Z,{}):"assignment-detail"===Q.get("a")?(0,r.jsx)(F.Z,{isDepartment:W,carryParentState:Y}):"assignment-student-detail"===Q.get("a")?(0,r.jsx)(w.Z,{isDepartment:W}):(0,r.jsx)("div",{className:u.Z.departmenthead,children:(0,r.jsxs)("div",{className:u.Z.demaprtment_list,children:[(0,r.jsx)("div",{className:u.Z.with_search,style:{marginBottom:"0.7rem",alignItems:"flex-start",flexDirection:"column"},children:"subject"===(null===(t=Q.get("a"))||void 0===t?void 0:t.substring(0,7))?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h6",{children:[z("subject_name")," : ",null!==(n=null===(a=X.state)||void 0===a?void 0:a.subjectName)&&void 0!==n?n:""]}),(0,r.jsxs)("h6",{children:[z("subject_teacher")," : ",null!==(c=null===(j=X.state)||void 0===j?void 0:j.subjectTeacherName)&&void 0!==c?c:""]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h6",{children:[z("class_name")," : ",null!==(g=null===(Z=X.state)||void 0===Z?void 0:Z.clsName)&&void 0!==g?g:""]}),(0,r.jsxs)("h6",{children:[z("class_teacher")," : ",null!==(N=null===(y=X.state)||void 0===y?void 0:y.teacherName)&&void 0!==N?N:""]})]})}),"subject-detail"===Q.get("a")?(0,r.jsx)(b,{carryParentState:Y,isDepartment:W}):"subject-catalog"===Q.get("a")?(0,r.jsx)(h.Z,{cid:null===(S=X.state)||void 0===S?void 0:S.clsId,bid:null===(_=X.state)||void 0===_?void 0:_.batchId,isDepartment:W,sid:null===(A=X.state)||void 0===A?void 0:A.subjectId}):"subject-attendance"===Q.get("a")?(0,r.jsx)(p.Z,{sid:null===(T=X.state)||void 0===T?void 0:T.subjectId,bid:null===(k=X.state)||void 0===k?void 0:k.batchId,isDepartment:W,subjectName:null!==(I=null===(C=X.state)||void 0===C?void 0:C.subjectName)&&void 0!==I?I:""}):"subject-assignment"===Q.get("a")?(0,r.jsx)(f.Z,{sid:null===(M=X.state)||void 0===M?void 0:M.subjectId,cid:null===(L=X.state)||void 0===L?void 0:L.clsId,carryParentState:Y,bid:null===(E=X.state)||void 0===E?void 0:E.batchId,isDepartment:W}):"subject-exam"===Q.get("a")?(0,r.jsx)(P,{sid:null===(O=X.state)||void 0===O?void 0:O.subjectId,cid:null===(q=X.state)||void 0===q?void 0:q.clsId,isDepartment:W}):"subject-academic"===Q.get("a")?(0,r.jsx)(D.Z,{sid:null===(G=X.state)||void 0===G?void 0:G.subjectId,carryParentState:Y,isDepartment:W}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o,{carryParentState:Y}),"class-detail"===Q.get("a")&&(0,r.jsx)(v.Z,{cid:X.state.clsId,openAs:"SUBJECT_TEACHER",isDepartment:!0}),"class-subject"===Q.get("a")&&(0,r.jsx)(m.Z,{carryParentState:Y,clsId:null===(H=X.state)||void 0===H?void 0:H.clsId,isView:"DEPARTMENT_HEAD",instituteId:J,did:B}),"class-attendance"===Q.get("a")&&(0,r.jsx)(x.Z,{cid:null===(U=X.state)||void 0===U?void 0:U.clsId,isDepartment:!0,className:null!==($=null===(V=X.state)||void 0===V?void 0:V.clsName)&&void 0!==$?$:""})]})]})})})}}}]);
//# sourceMappingURL=3877.081db977.chunk.js.map