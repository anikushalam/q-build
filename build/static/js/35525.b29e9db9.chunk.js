"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[35525],{35525:(e,t,n)=>{n.r(t),n.d(t,{default:()=>V});var l=n(63687),i=n(56959),o=n(16871),a=n(43504),d=n(21348),s=n(90904),r=n(98967),c=n(63162),u=n(93638),v=n(72791),m=n(55336),_=n(6758),h=n(39230),f=n(23441),p=n(91427),x=n(98684),j=n(2651),y=n(1669),g=n(76697),Z=n(97892),b=n.n(Z),S=n(82824),I=n(1095),C=n(80184);const N=e=>{var t,n,l,i,d,s,r,c,u,v,m,_,f,p,j,y,Z,N,k,O,w,F,T,R,A,L,P,q,M,Y,D,E,G,H,J,U;let{history:$}=e;const{t:K}=(0,h.$G)(),z=(0,o.UO)(),B=(0,o.TH)();return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("div",{className:g.Z.sidebarheader,style:{gap:"1%"},title:"View Receipt",children:[(0,C.jsxs)("div",{className:g.Z.history_image_container,style:{width:"50%"},children:[null!==$&&void 0!==$&&null!==(t=$.payment_student)&&void 0!==t&&t.studentProfilePhoto?(0,C.jsx)(a.rU,{to:"/q/".concat(z.username,"/student/profile"),state:{...B.state,sid:null===$||void 0===$||null===(n=$.payment_student)||void 0===n?void 0:n._id},children:(0,C.jsx)("img",{src:"".concat(I.yI,"/").concat(null===$||void 0===$||null===(l=$.payment_student)||void 0===l?void 0:l.studentProfilePhoto),alt:"qr code",style:{width:"60px",height:"60px",borderRadius:"12px"}})}):(0,C.jsx)("img",{src:"".concat(x.p3,"/feed-user-avatar.svg"),alt:"qr code",style:{width:"60px",height:"60px",borderRadius:"12px"}}),null!==$&&void 0!==$&&$.payment_student_detail?(0,C.jsxs)("div",{className:g.Z.text,children:[(0,C.jsx)("p",{className:g.Z.rcv,children:K("recived_from")}),(0,C.jsx)("h6",{children:null!==(i=null===$||void 0===$||null===(d=$.fee_receipt)||void 0===d?void 0:d.student_name)&&void 0!==i?i:""}),(0,C.jsxs)("p",{className:g.Z.rcv,children:[K("batch")," ",": ",null!==(s=null===$||void 0===$||null===(r=$.payment_student_detail)||void 0===r?void 0:r.batch)&&void 0!==s?s:"",","," ",K("student_class"),": ",null===$||void 0===$||null===(c=$.payment_student_detail)||void 0===c?void 0:c.classes,", ",K("roll_number")," ",": ",null!==(u=null===$||void 0===$||null===(v=$.payment_student_detail)||void 0===v?void 0:v.roll_no)&&void 0!==u?u:""]})]}):(0,C.jsxs)("div",{className:g.Z.text,children:[(0,C.jsx)("p",{className:g.Z.rcv,children:K("recived_from")}),(0,C.jsx)("h6",{children:null!==$&&void 0!==$&&$.payment_student?"".concat(null!==(m=null===$||void 0===$||null===(_=$.payment_student)||void 0===_?void 0:_.studentFirstName)&&void 0!==m?m:""," ").concat(null!==(f=null===$||void 0===$||null===(p=$.payment_student)||void 0===p?void 0:p.studentMiddleName)&&void 0!==f?f:""," ").concat(null!==(j=null===$||void 0===$||null===(y=$.payment_student)||void 0===y?void 0:y.studentLastName)&&void 0!==j?j:""):null!==(Z=null===$||void 0===$||null===(N=$.payment_by_end_user_id)||void 0===N?void 0:N.userLegalName)&&void 0!==Z?Z:null===$||void 0===$?void 0:$.payment_by_end_user_id_name}),(0,C.jsxs)("p",{className:g.Z.rcv,children:[K("gr_number")," ",null!==(k=null===$||void 0===$||null===(O=$.payment_student)||void 0===O?void 0:O.studentGRNO)&&void 0!==k?k:""]}),(0,C.jsx)("p",{className:g.Z.rcv,children:null!==(w=null===$||void 0===$||null===(F=$.payment_student)||void 0===F||null===(T=F.fee_structure)||void 0===T?void 0:T.unique_structure_name)&&void 0!==w?w:""})]})]}),(0,C.jsxs)("div",{className:g.Z.text,style:{width:"27%"},children:[(0,C.jsx)("p",{className:g.Z.rcv,style:{width:"100%"},children:K("transaction_id")}),(0,C.jsx)("h6",{style:{width:"100%",wordWrap:"break-word"},children:null!==$&&void 0!==$&&$.razorpay_payment_id?null===$||void 0===$?void 0:$.razorpay_payment_id:null!==$&&void 0!==$&&null!==(R=$.fee_receipt)&&void 0!==R&&R.fee_utr_reference?null===$||void 0===$||null===(A=$.fee_receipt)||void 0===A?void 0:A.fee_utr_reference:"N/A"}),(0,C.jsxs)("p",{className:g.Z.rcv,style:{width:"100%"},children:[b()(null===$||void 0===$?void 0:$.created_at).format("DD MMM YYYY"),", ",(0,S.J)(null===$||void 0===$?void 0:$.created_at,"LT")]})]}),(0,C.jsxs)("div",{className:g.Z.text,style:{width:"20%"},children:[(0,C.jsxs)("p",{className:g.Z.rcv,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[K("invoice_no")," ",null!==(L=null!==(P=null===$||void 0===$||null===(q=$.fee_receipt)||void 0===q?void 0:q.invoice_count)&&void 0!==P?P:null===$||void 0===$?void 0:$.payment_invoice_number)&&void 0!==L?L:"N/A",null!==$&&void 0!==$&&null!==(M=$.fee_receipt)&&void 0!==M&&M.receipt_file?(0,C.jsx)("a",{href:"".concat(I.q2,"/").concat(null===$||void 0===$||null===(Y=$.fee_receipt)||void 0===Y?void 0:Y.receipt_file),target:"_blank",rel:"noopener noreferrer",children:(0,C.jsx)("img",{src:"".concat(x.J7,"/receipt.svg"),alt:"receipt icon",title:"Download Fees Receipt"})}):null]}),(0,C.jsxs)("h6",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[K("rs_only")," ",null===$||void 0===$?void 0:$.payment_amount]}),(0,C.jsx)("p",{className:g.Z.rcv,style:{width:"100%"},children:"offline"===(null===(D=$.payment_mode)||void 0===D?void 0:D.toLowerCase())?null!==$&&void 0!==$&&null!==(E=$.fee_receipt)&&void 0!==E&&E.fee_payment_mode?"".concat(null===$||void 0===$||null===(G=$.fee_receipt)||void 0===G?void 0:G.fee_payment_mode):"Offline - No Receipt":"online"===(null===(H=$.payment_mode)||void 0===H?void 0:H.toLowerCase())?null!==$&&void 0!==$&&null!==(J=$.fee_receipt)&&void 0!==J&&J.fee_payment_mode?"".concat(null===$||void 0===$||null===(U=$.fee_receipt)||void 0===U?void 0:U.fee_payment_mode):"Online - No Receipt":null===$||void 0===$?void 0:$.payment_mode})]})]})})},k=e=>{var t,n,l,o;let{instituteId:a,ofid:r}=e;const{t:c}=(0,h.$G)(),[u,g]=(0,v.useState)(""),[Z,b]=(0,v.useState)(""),[S,I]=(0,v.useState)(1),[k,O]=(0,v.useState)(!0),[w,F]=(0,f.YD)({skip:u}),{financeOtherOneFeesTransaction:T,financeOtherOneFeesTransactionLoading:R}=(0,_.ok)({data:{uid:a,page:S,limit:10,search:u,filter:"",ofid:r},skip:a?!r:!a});(0,v.useEffect)((()=>{F&&k&&I((e=>e+1))}),[F,k]),(0,v.useEffect)((()=>{var e;if(null!==T&&void 0!==T&&null!==(e=T.list)&&void 0!==e&&e.length){var t;let e=(0,p.f)(null===T||void 0===T||null===(t=T.list)||void 0===t?void 0:t.length);O((()=>e))}}),[null===T||void 0===T||null===(t=T.list)||void 0===t?void 0:t.length]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.default,{children:(0,C.jsx)("div",{className:i.Z.fm_search_full,children:(0,C.jsx)("section",{className:i.Z.fm_search_full_container,children:(0,C.jsxs)("div",{className:i.Z.fm_search_full_container_inner,children:[(0,C.jsx)("img",{className:i.Z.fm_search_full_icon,alt:"search icon",src:"".concat(x.dB,"/navbar-search.svg")}),(0,C.jsx)("input",{type:"text",placeholder:c("search"),onChange:e=>{var t;!R&&(null===T||void 0===T||null===(t=T.list)||void 0===t?void 0:t.length)>=0&&b(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&(I((()=>1)),g(Z))},value:Z})]})})})}),(0,C.jsx)(s.Z,{}),(0,C.jsxs)(d.default,{customStyle:{paddingTop:"0"},children:[null===T||void 0===T||null===(n=T.list)||void 0===n?void 0:n.map(((e,t)=>{var n;return(null===T||void 0===T||null===(n=T.list)||void 0===n?void 0:n.length)===t+1?(0,C.jsx)("div",{ref:w,children:(0,C.jsx)(N,{history:e})},null===e||void 0===e?void 0:e._id):(0,C.jsx)(N,{history:e},null===e||void 0===e?void 0:e._id)})),R?u?(0,C.jsx)(m.default,{}):(0,C.jsx)(y.Z,{}):u?0===(null===T||void 0===T||null===(l=T.list)||void 0===l?void 0:l.length)&&(0,C.jsx)(j.Z,{title:"No receipts found related this search.",customStyleContainer:{marginTop:"1.5rem"}}):0===(null===T||void 0===T||null===(o=T.list)||void 0===o?void 0:o.length)&&(0,C.jsx)(j.Z,{title:"No receipts added.",customStyleContainer:{marginTop:"1.5rem"}})]})]})};var O=n(27976),w=n(13182),F=n(43172),T=n(73711),R=n(85794),A=n(9228),L=n(38857),P=n(16925),q=n(61055),M=n(60924),Y=n(43997),D=n(50518),E=n(99183),G=n(60307),H=n(71439),J=n(64499);const U=e=>{var t,n;let{onClose:l,financeId:i,onRefetch:a,otherFeesId:r,student:c,instituteId:f,isNonExisting:p,collectStaffId:j}=e;const{t:y}=(0,h.$G)(),[g,Z]=(0,v.useState)(!1),S=(0,o.UO)(),[I,N]=(0,v.useState)({amount:"",mode:"",fee_payment_mode:"",fee_payment_amount:"",transaction_date:b()().format("DD/MM/YYYY"),fee_bank_name:"",fee_bank_holder:"",fee_utr_reference:""}),[k,O]=(0,v.useState)(""),[w,F]=(0,v.useState)({open:!1,msg:"",variant:"error"}),[T,A]=(0,v.useState)({amount:0,type:"Other",isTransaction:!1}),{studentInstituteCharges:U}=(0,G.xY)({data:{id:f},skip:!f}),[$]=(0,_.iJ)();(0,v.useEffect)((()=>{null!==c&&void 0!==c&&c.other_fees_remain_price&&(N((e=>({...e,amount:+(null===c||void 0===c?void 0:c.other_fees_remain_price),fee_payment_amount:+(null===c||void 0===c?void 0:c.other_fees_remain_price)}))),A({amount:+(null===c||void 0===c?void 0:c.other_fees_remain_price),type:"Other",isTransaction:!1}))}),[c]);const K=e=>{N((t=>({...t,[e.target.name]:e.target.value})))};return(0,C.jsxs)(C.Fragment,{children:[T.isTransaction?(0,C.jsx)(H.Z,{onClose:l,allContent:{...T,platform_charges:null===U||void 0===U||null===(t=U.platform_charges)||void 0===t?void 0:t.percentage},checkoutAdmissionHandler:()=>{var e,t,n,l,i,o,a,d,s,u,v;let m=2.1*+(null===T||void 0===T?void 0:T.amount)/100,_=m+18*+m/100;const h=parseInt(null===T||void 0===T?void 0:T.amount);var p=Math.ceil(h+ +_.toFixed(2));(0,J.oU)({amount:null!==(e=+(null===I||void 0===I?void 0:I.amount))&&void 0!==e?e:10,amount_nocharges:null!==(t=+p)&&void 0!==t?t:0,type:"Other",paidBy:null===c||void 0===c?void 0:c._id,paidTo:f,moduleId:r,ad_status_id:null,payment_installment:null,ad_install:null,month:null,payment_remain_1:null,payment_card_type:null,payment_book_id:null,name:S.username,isApk:"web",payment_card_id:null,payment_remain_fees:null,charge:{num_platform_percent:null!==(n=null===U||void 0===U||null===(l=U.platform_charges)||void 0===l?void 0:l.percentage)&&void 0!==n?n:0,num_platform_max:null!==(i=null===U||void 0===U||null===(o=U.platform_charges)||void 0===o?void 0:o.maximum)&&void 0!==i?i:0,num_trans_pecent:null!==(a=null===U||void 0===U||null===(d=U.transaction_charges)||void 0===d?void 0:d.percentage)&&void 0!==a?a:0,num_trans_max:null!==(s=null===U||void 0===U||null===(u=U.transaction_charges)||void 0===u?void 0:u.maximum)&&void 0!==s?s:0,num_app_max:null!==(v=null===U||void 0===U?void 0:U.application_charges)&&void 0!==v?v:0},nsid:null}).then((e=>{var t,n;window.onScriptLoad(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.body)||void 0===n?void 0:n.txnToken,null===e||void 0===e?void 0:e.order,null===e||void 0===e?void 0:e.amount)})).catch((e=>{console.info(e)}))},isOptimzed:!0}):(0,C.jsx)(L.Z,{onClose:l,children:(0,C.jsxs)("div",{className:P.Z.modal_container,children:[(0,C.jsx)(d.default,{children:(0,C.jsxs)("div",{className:P.Z.modal_container_outer_header,children:[(0,C.jsx)("div",{className:P.Z.modal_container_header,children:(0,C.jsx)("h6",{children:y("collect_fees")})}),(0,C.jsx)("img",{src:"".concat(x.J7,"/close.svg"),alt:"close icon",onClick:l})]})}),(0,C.jsx)(s.Z,{}),(0,C.jsxs)(d.default,{customStyle:{paddingTop:"0"},children:[(0,C.jsxs)("div",{className:P.Z.admission_fees_row,children:[(0,C.jsxs)("h6",{children:[y("applicable_amount")," :"]}),(0,C.jsxs)("h6",{children:[y("rs_only")," ",null!==(n=null===c||void 0===c?void 0:c.other_fees_remain_price)&&void 0!==n?n:0]})]}),(0,C.jsx)(q.Z,{label:y("amount"),placeholder:y("amoute_details_collect"),name:"amount",value:I.amount,type:"tel",onChange:e=>{N((t=>({...t,amount:+e.target.value,fee_payment_amount:+e.target.value}))),A((t=>({...t,amount:+e.target.value})))},errorShow:k.amount,msg:k.rest_issue}),(0,C.jsx)(D.Z,{paymentHeading:y("payment_type_mode"),selectLabel:y("mode_placeholder"),onClick:e=>{N((t=>({...t,mode:"Online",fee_payment_mode:e})))},errorShow:k.fee_payment_mode,defalutValue:I.fee_payment_mode,selectedValue:y("please_select_payment_mode"),isAuthority:p?"admissionCollectMode":"admissionCollectModePg",customLabelStyle:{marginTop:"0"}}),"Payment Gateway"===I.fee_payment_mode?(0,C.jsx)(u.Z,{label:"collect",onAction:()=>{let e=(0,E.l)({amount:T.amount});(0,E.x)(e)?null!==U&&void 0!==U&&U.institute?i&&r&&null!==c&&void 0!==c&&c._id&&!p&&A((e=>({...e,isTransaction:!0}))):F({open:!0,msg:"Online Payment Not Activated",variant:"error"}):O(e)}}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(M.Z,{label:y("select_date_of_transaction"),placeholder:y("please_select_date"),name:"transaction_date",value:I.transaction_date,onChange:e=>{N((t=>({...t,transaction_date:(0,Y.jh)(e)})))},errorShow:k.transaction_date}),"Cash"===I.fee_payment_mode?null:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(q.Z,{label:y("bank_name_collect"),placeholder:y("please_enter_bank_name"),name:"fee_bank_name",value:I.fee_bank_name,type:"text",onChange:K}),(0,C.jsx)(q.Z,{label:y("banke_holder_name"),placeholder:y("please_enter_name_of_bank_holder"),name:"fee_bank_holder",value:I.fee_bank_holder,type:"text",onChange:K}),(0,C.jsx)(q.Z,{label:y("cheque_dd_neft"),placeholder:y("please_enter_utr_ref_number"),name:"fee_utr_reference",value:I.fee_utr_reference,type:"text",onChange:K})]}),(0,C.jsx)(u.Z,{label:"collect",onAction:()=>{let e=(0,E.l)(I,["mode","fee_payment_amount","fee_bank_name","fee_bank_holder","fee_utr_reference"]);var t,n,o,d,s,u,v;(0,E.x)(e)&&null!==c&&void 0!==c&&c._id&&r?(Z((e=>!e)),$({fid:i,bodyParameter:{ofid:r,sid:null===c||void 0===c?void 0:c._id,amount:null!==(t=null===I||void 0===I?void 0:I.amount)&&void 0!==t?t:0,mode:"Cash"===(null===I||void 0===I?void 0:I.fee_payment_mode)?"Offline":null!==(n=null===I||void 0===I?void 0:I.mode)&&void 0!==n?n:"",fee_payment_mode:"Cash"===(null===I||void 0===I?void 0:I.fee_payment_mode)?"By Cash":null===I||void 0===I?void 0:I.fee_payment_mode,fee_payment_amount:null!==(o=null===I||void 0===I?void 0:I.fee_payment_amount)&&void 0!==o?o:0,transaction_date:null!==(d=(0,Y._1)(I.transaction_date))&&void 0!==d?d:"",fee_bank_name:null!==(s=null===I||void 0===I?void 0:I.fee_bank_name)&&void 0!==s?s:"",fee_bank_holder:null!==(u=null===I||void 0===I?void 0:I.fee_bank_holder)&&void 0!==u?u:"",fee_utr_reference:null!==(v=null===I||void 0===I?void 0:I.fee_utr_reference)&&void 0!==v?v:"",staff_id:null!==j&&void 0!==j?j:""}}).then((()=>{a(),Z((e=>!e)),l()})).catch({})):O(e)}})]})]})]})}),g&&(0,C.jsx)(m.default,{}),(0,C.jsx)(R.Z,{eventState:w,eventStateHandler:F})]})};var $=n(89064);const K=e=>{let{ofid:t,onClose:n,menuData:l,onRefetch:i,feeReceiptId:o,isFee:a}=e;const{t:r}=(0,h.$G)(),[c,m]=(0,v.useState)(!1),[f,p]=(0,v.useState)({open:!1,msg:"",variant:"error"}),[j,y]=(0,v.useState)(""),[g,Z]=(0,v.useState)({query:""}),[b,S]=(0,v.useState)(!1),[I]=(0,_.M0)(),[N]=(0,_.dM)();return(0,C.jsxs)(C.Fragment,{children:[b?(0,C.jsx)(L.Z,{onClose:()=>S(!1),children:(0,C.jsxs)("div",{className:P.Z.modal_container,children:[(0,C.jsx)(d.default,{children:(0,C.jsxs)("div",{className:P.Z.modal_container_outer_header,children:[(0,C.jsx)("div",{className:P.Z.modal_container_header,children:(0,C.jsx)("h6",{children:r("are_your_sure_to_delete_fee_receipt")})}),(0,C.jsx)("img",{src:"".concat(x.J7,"/close.svg"),alt:"close icon",onClick:()=>S(!1)})]})}),(0,C.jsx)(s.Z,{}),(0,C.jsxs)(d.default,{customStyle:{paddingTop:"0"},children:[(0,C.jsx)(q.Z,{label:r("type_confirm_to_continue"),placeholder:r("type_confirm_to_continue"),name:"query",value:g.query,type:"text",onChange:e=>{Z((t=>({...t,[e.target.name]:e.target.value})))},errorShow:j.query}),(0,C.jsx)(u.Z,{label:"confirm",onAction:()=>{let e=(0,E.l)(g);(0,E.x)(e)?"Confirm"===g.query&&o&&t&&(S(!1),m((e=>!e)),N({fid:o,ofid:t}).then((e=>{i(),m((e=>!e)),n()})).catch({})):y(e)}})]})]})}):(0,C.jsx)($.Z,{onClose:n,disabled:c,children:a?(0,C.jsx)("h6",{onClick:()=>S(!0),children:r("delete")}):(0,C.jsx)("h6",{onClick:()=>{null!==l&&void 0!==l&&l._id&&t&&(m((e=>!e)),I({ofid:t,bodyParameter:{students:[null===l||void 0===l?void 0:l._id]}}).then((e=>{p({open:!0,msg:"Time out of request...",variant:"error"}),i(),m((e=>!e)),n()})).catch({}))},children:r("remove")})}),(0,C.jsx)(R.Z,{eventState:f,eventStateHandler:p})]})},z=e=>{var t,n,l,i,o,a,d,s,r,c;let{student:m,financeId:_,onRefetch:f,otherFeesId:p,instituteId:j,ofid:y,isCashierAccess:g,collectStaffId:Z}=e;const{t:b}=(0,h.$G)(),[S,N]=(0,v.useState)(""),[k,O]=(0,v.useState)({open:!1,msg:"",variant:"error"}),w=()=>{N("")};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:A.Z.iadcc_card_hover,children:[(0,C.jsxs)("div",{className:A.Z.sf_card_contatiner,children:[(0,C.jsx)("img",{src:null!==m&&void 0!==m&&m.studentProfilePhoto?"".concat(I.yI,"/").concat(m.studentProfilePhoto):"".concat(x.p3,"/feed-user-avatar.svg"),loading:"lazy",alt:"avatar",style:{width:"2.5rem",height:"2.5rem"}}),(0,C.jsxs)("div",{className:A.Z.sf_card_contatiner_inner,children:[(0,C.jsx)("h6",{children:"".concat(null!==(t=null===m||void 0===m?void 0:m.studentFirstName)&&void 0!==t?t:""," ").concat(null!==(n=null===m||void 0===m?void 0:m.studentMiddleName)&&void 0!==n?n:""," ").concat(null!==(l=null===m||void 0===m?void 0:m.studentLastName)&&void 0!==l?l:"")}),(0,C.jsxs)("p",{children:[b("gr_number")," ",": ",null!==(i=null===m||void 0===m?void 0:m.studentGRNO)&&void 0!==i?i:""]})]})]}),"Paid"===(null===m||void 0===m||null===(o=m.other_fees_obj)||void 0===o?void 0:o.status)?(0,C.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[(0,C.jsxs)("div",{className:A.Z.sf_card_contatiner_inner,children:[(0,C.jsxs)("h6",{children:["Rs. ",null!==(a=null===m||void 0===m?void 0:m.other_fees_remain_price)&&void 0!==a?a:0]}),(0,C.jsx)("p",{children:b("amount")})]}),(0,C.jsx)("div",{className:A.Z.sf_card_contatiner_inner,children:null!==m&&void 0!==m&&null!==(d=m.other_fees_obj)&&void 0!==d&&d.receipt_file?(0,C.jsx)("a",{href:"".concat(I.q2,"/").concat(null===m||void 0===m||null===(s=m.other_fees_obj)||void 0===s?void 0:s.receipt_file),target:"_blank",rel:"noopener noreferrer",children:(0,C.jsx)("img",{src:"".concat(x.J7,"/receipt.svg"),alt:"receipt icon",style:{height:"1.5rem"}})}):null}),(0,C.jsx)("img",{src:"".concat(x.J7,"/menu.svg"),alt:"menu icon",onClick:()=>N(3)})]}):(0,C.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[(0,C.jsxs)("div",{className:A.Z.sf_card_contatiner_inner,children:[(0,C.jsxs)("h6",{children:["Rs. ",null!==(r=null===m||void 0===m?void 0:m.other_fees_remain_price)&&void 0!==r?r:0]}),(0,C.jsx)("p",{children:b("amount")})]}),(0,C.jsx)(u.Z,{label:"collect_fees",onAction:()=>{"ALLOW"===g?N(1):O({msg:"You are not Cashier Manager",open:!0,variant:"error"})},customStyle:{margin:"0",padding:"0.4rem 1rem"}}),(0,C.jsx)("img",{src:"".concat(x.J7,"/menu.svg"),alt:"menu icon",onClick:e=>{N(2)}})]})]}),1===S?(0,C.jsx)(U,{financeId:_,onClose:w,onRefetch:f,student:m,otherFeesId:p,instituteId:j,collectStaffId:Z}):2===S?(0,C.jsx)(K,{onClose:w,onRefetch:f,menuData:m,ofid:y}):3===S?(0,C.jsx)(K,{onClose:w,onRefetch:f,menuData:m,ofid:y,feeReceiptId:null===m||void 0===m||null===(c=m.other_fees_obj)||void 0===c?void 0:c.fee_receipt,isFee:!0}):null,(0,C.jsx)(R.Z,{eventState:k,eventStateHandler:O})]})},B=e=>{var t,n,l,o;let{ofid:a,instituteId:r,financeId:c,isCashierAccess:u,collectStaffId:g}=e;const{t:Z}=(0,h.$G)(),[b,S]=(0,v.useState)(""),[I,N]=(0,v.useState)(""),[k,O]=(0,v.useState)(1),[w,F]=(0,v.useState)(!0),[T,R]=(0,f.YD)({skip:b}),{financeOneOtherFeesStudentList:A,financeOneOtherFeesStudentListLoading:L,financeOneOtherFeesStudentListRefetch:P}=(0,_.Jo)({data:{ofid:a,page:k,limit:10,search:b,type:""},skip:!a});(0,v.useEffect)((()=>{R&&w&&O((e=>e+1))}),[R,w]),(0,v.useEffect)((()=>{var e;if(null!==A&&void 0!==A&&null!==(e=A.list)&&void 0!==e&&e.length){var t;let e=(0,p.f)(null===A||void 0===A||null===(t=A.list)||void 0===t?void 0:t.length);F((()=>e))}}),[null===A||void 0===A||null===(t=A.list)||void 0===t?void 0:t.length]);const q=(0,v.useCallback)((()=>{O((()=>1)),P()}),[]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.default,{children:(0,C.jsx)("div",{className:i.Z.fm_search_full,children:(0,C.jsx)("section",{className:i.Z.fm_search_full_container,children:(0,C.jsxs)("div",{className:i.Z.fm_search_full_container_inner,children:[(0,C.jsx)("img",{className:i.Z.fm_search_full_icon,alt:"search icon",src:"".concat(x.dB,"/navbar-search.svg")}),(0,C.jsx)("input",{type:"text",placeholder:Z("search"),onChange:e=>{var t;!L&&(null===A||void 0===A||null===(t=A.list)||void 0===t?void 0:t.length)>=0&&N(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&(O((()=>1)),S(I))},value:I})]})})})}),(0,C.jsx)(s.Z,{}),(0,C.jsxs)(d.default,{customStyle:{paddingTop:"0"},children:[null===A||void 0===A||null===(n=A.list)||void 0===n?void 0:n.map(((e,t)=>{var n;return(null===A||void 0===A||null===(n=A.list)||void 0===n?void 0:n.length)===t+1?(0,C.jsx)("div",{ref:T,children:(0,C.jsx)(z,{student:null===e||void 0===e?void 0:e.student,financeId:c,instituteId:r,otherFeesId:a,onRefetch:q,ofid:a,isCashierAccess:u,collectStaffId:g})},"".concat(null===e||void 0===e?void 0:e._id).concat(t)):(0,C.jsx)(z,{student:null===e||void 0===e?void 0:e.student,financeId:c,instituteId:r,otherFeesId:a,onRefetch:q,ofid:a,isCashierAccess:u,collectStaffId:g},"".concat(null===e||void 0===e?void 0:e._id).concat(t))})),L?b?(0,C.jsx)(m.default,{}):(0,C.jsx)(y.Z,{}):b?0===(null===A||void 0===A||null===(l=A.list)||void 0===l?void 0:l.length)&&(0,C.jsx)(j.Z,{title:"No receipts found related this search.",customStyleContainer:{marginTop:"1.5rem"}}):0===(null===A||void 0===A||null===(o=A.list)||void 0===o?void 0:o.length)&&(0,C.jsx)(j.Z,{title:"No receipts added.",customStyleContainer:{marginTop:"1.5rem"}})]})]})},V=e=>{var t,n,f,p,x,j,y,g,Z,b,S,I,N,A,L,P,q,M,Y,D;let{fid:E,instituteId:G,cashAuthority:H}=e;const{t:J}=(0,h.$G)(),U=(0,o.TH)(),$=(0,o.UO)(),K=(0,o.s0)(),[z]=(0,a.lr)(),[V,Q]=(0,v.useState)(!1),[X,ee]=(0,v.useState)(""),[te,ne]=(0,v.useState)(null),[le,ie]=(0,v.useState)([]),[oe,ae]=(0,v.useState)({open:!1,msg:"",variant:"error"}),[de]=(0,_.P_)(),[se]=(0,_.UG)(),[re]=(0,_.YC)(),[ce]=(0,_.zY)(),{financeOneOtherFeesStudentList:ue,financeOneOtherFeesStudentListRefetch:ve}=(0,_.Jo)({data:{ofid:null===(t=U.state)||void 0===t?void 0:t.feesId,page:1,limit:10,search:"",type:""},skip:!(null!==(n=U.state)&&void 0!==n&&n.feesId)}),{financeOtherOneFeesTransaction:me,financeOtherOneFeesTransactionRefetch:_e}=(0,_.ok)({data:{uid:G,page:1,limit:10,search:"",filter:"",ofid:null===(f=U.state)||void 0===f?void 0:f.feesId},skip:G?!(null!==(p=U.state)&&void 0!==p&&p.feesId):!G}),he=()=>{ee("")};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(l.default,{children:[(0,C.jsx)(d.default,{children:(0,C.jsxs)("div",{className:i.Z.fm_header_container,children:[(0,C.jsxs)("h6",{children:[null!==(x=null===(j=U.state)||void 0===j?void 0:j.feesName)&&void 0!==x?x:""," ","(",(0,C.jsx)("span",{style:{color:"#00f"},children:null===(y=U.state)||void 0===y||null===(g=y.otherData)||void 0===g?void 0:g.paid}),"/",null===(Z=U.state)||void 0===Z||null===(b=Z.otherData)||void 0===b?void 0:b.rmaining,")"]}),(0,C.jsxs)("div",{className:i.Z.fm_header_start_container,children:[(0,C.jsx)(u.Z,{label:"add_single_student",customStyle:{margin:"0",padding:"0.4rem 0.5rem",width:"fit-content"},onAction:()=>{var e;null!==H&&void 0!==H&&H.includes(null===U||void 0===U||null===(e=U.state)||void 0===e?void 0:e.sid)?ee(4):ae({msg:"You are not Cashier Manager",open:!0,variant:"error"})}}),(0,C.jsx)(u.Z,{label:"add_student",customStyle:{margin:"0",padding:"0.4rem 0.5rem",width:"fit-content"},onAction:()=>{ee(3)}}),(0,C.jsx)(u.Z,{label:"add_non_existing_student",customStyle:{margin:"0",padding:"0.4rem 0.5rem",width:"fit-content"},onAction:()=>{var e;null!==H&&void 0!==H&&H.includes(null===U||void 0===U||null===(e=U.state)||void 0===e?void 0:e.sid)?ee(1):ae({msg:"You are not Cashier Manager",open:!0,variant:"error"})}}),(0,C.jsx)(u.Z,{label:"export",customStyle:{margin:"0",padding:"0.4rem 0.5rem",width:"fit-content"},onAction:()=>{var e,t;null!==(e=U.state)&&void 0!==e&&e.feesId&&(Q((e=>!e)),de({ofid:null===(t=U.state)||void 0===t?void 0:t.feesId}).then((()=>{var e;let t="Institute"===(null===(e=U.state)||void 0===e?void 0:e.urlOffSet)?"/q/".concat($.username,"/institute/member/finance?type=export"):"/q/".concat($.username,"/member/staff/finance?type=export");K(t,{state:U.state})})).catch({}))}})]})]})}),(0,C.jsx)(s.Z,{}),(0,C.jsx)(r.Z,{children:W.map((e=>{var t,n;return(0,C.jsx)(c.Z,{tab:e,isLink:!0,isActive:null===(t=e.groupIs)||void 0===t?void 0:t.includes(z.get("n")),parentState:U.state,url:"Institute"===(null===(n=U.state)||void 0===n?void 0:n.urlOffSet)?"/q/".concat($.username,"/institute/member/finance?type=other-fees-detail").concat(e.urlKey):"/q/".concat($.username,"/member/staff/finance?type=other-fees-detail").concat(e.urlKey)},null===e||void 0===e?void 0:e.id)}))}),(0,C.jsx)(s.Z,{customStyleBorder:{marginTop:"0"}}),"transaction"===z.get("n")?(0,C.jsx)(k,{ofid:null===(S=U.state)||void 0===S?void 0:S.feesId,instituteId:G}):(0,C.jsx)(B,{ofid:null===(I=U.state)||void 0===I?void 0:I.feesId,instituteId:G,financeId:E,isCashierAccess:null!==H&&void 0!==H&&H.includes(null===U||void 0===U||null===(N=U.state)||void 0===N?void 0:N.sid)?"ALLOW":"DENY",collectStaffId:null===U||void 0===U||null===(A=U.state)||void 0===A?void 0:A.sid})]}),V&&(0,C.jsx)(m.default,{}),1===X?(0,C.jsx)(O.Z,{onClose:he,singleStudent:te,onNext:e=>{ne(e),ee(2)}}):2===X?(0,C.jsx)(w.Z,{onClose:()=>ee(1),onParentClose:()=>{},instituteId:G,onGrabCollectFees:e=>{var t,n,l,i;E&&null!==te&&void 0!==te&&te.student_name&&null!==(t=U.state)&&void 0!==t&&t.feesId&&(Q((e=>!e)),se({fid:E,bodyParameter:{...te,ofid:null===(n=U.state)||void 0===n?void 0:n.feesId,...e,staff_id:null!==(l=null===U||void 0===U||null===(i=U.state)||void 0===i?void 0:i.sid)&&void 0!==l?l:""}}).then((()=>{ne(null),Q((e=>!e)),he()})).catch({}))},singleStudent:te,isOtherFees:"OTHER_FEES",isNonExisting:!0,applicant:{head:null===(L=U.state)||void 0===L||null===(P=L.otherData)||void 0===P?void 0:P.payable_amount}}):3===X?(0,C.jsx)(F.Z,{title:J("select_student"),onClose:he,instituteId:G,isMultiSelect:!0,onMultiSelect:e=>{null!==le&&void 0!==le&&le.includes(null===e||void 0===e?void 0:e._id)?ie((t=>null===t||void 0===t?void 0:t.filter((t=>t!==(null===e||void 0===e?void 0:e._id))))):ie((t=>[...t,null===e||void 0===e?void 0:e._id]))},onDone:()=>{var e,t;E&&(null===le||void 0===le?void 0:le.length)>0&&null!==(e=U.state)&&void 0!==e&&e.feesId&&(Q((e=>!e)),re({fid:E,bodyParameter:{students:le,ofid:null===(t=U.state)||void 0===t?void 0:t.feesId}}).then((()=>{ve(),Q((e=>!e)),he(),ie([]),ne(null)})).catch({}))},selectList:le,buttonTitle:"add",isSearchOnly:!0}):4===X?(0,C.jsx)(F.Z,{title:J("select_student"),onClose:he,instituteId:G,onSelectStudent:e=>{ne(e),ee(5)},selectedId:null===te||void 0===te?void 0:te._id,isSearchOnly:!0}):5===X?(0,C.jsx)(w.Z,{onClose:he,onParentClose:()=>{},instituteId:G,onGrabCollectFees:e=>{var t,n,l,i;E&&null!==te&&void 0!==te&&te._id&&null!==(t=U.state)&&void 0!==t&&t.feesId&&(Q((e=>!e)),ce({fid:E,bodyParameter:{students:[null===te||void 0===te?void 0:te._id],ofid:null===(n=U.state)||void 0===n?void 0:n.feesId,...e,staff_id:null!==(l=null===U||void 0===U||null===(i=U.state)||void 0===i?void 0:i.sid)&&void 0!==l?l:""}}).then((e=>{ee(6),Q((e=>!e))})).catch({}))},singleStudent:te,isOtherFees:"OTHER_FEES",applicant:{head:null===(q=U.state)||void 0===q||null===(M=q.otherData)||void 0===M?void 0:M.payable_amount},ofid:null===(Y=U.state)||void 0===Y?void 0:Y.feesId,financeId:E}):6===X?(0,C.jsx)(T.Z,{applicant:te,onClose:()=>{ne(null),he()},ofid:null===(D=U.state)||void 0===D?void 0:D.feesId}):null,(0,C.jsx)(R.Z,{eventState:oe,eventStateHandler:ae})]})},W=[{label:"receipt",id:"receipt",urlKey:"",groupIs:["",null]},{label:"transaction",id:"transaction",urlKey:"&n=transaction",groupIs:["transaction"]}]}}]);
//# sourceMappingURL=35525.b29e9db9.chunk.js.map