"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[56212],{56212:(e,n,a)=>{a.r(n),a.d(n,{default:()=>y});var l=a(39230),o=a(38857),d=a(21348),t=a(16925),i=a(90904),_=a(72791),r=a(98684),s=a(55336),u=a(93638),m=a(61055),c=a(60924),v=a(43997),f=a(50518),p=a(99183),h=a(60307),b=a(80184);const y=e=>{var n;let{onClose:a,applicant:y,admission:x,onParentClose:j}=e;const{t:k}=(0,l.$G)(),[g,Z]=(0,_.useState)(!1),[C,S]=(0,_.useState)({amount:"",mode:"",fee_payment_mode:"",fee_payment_amount:"",transaction_date:"",fee_bank_name:"",fee_bank_holder:"",fee_utr_reference:""}),[w,N]=(0,_.useState)(""),[A,I]=(0,_.useState)(0),[q]=(0,h.bJ)();(0,_.useEffect)((()=>{var e,n;if((null===x||void 0===x||null===(e=x.applicable_card)||void 0===e||null===(n=e.remaining_array)||void 0===n?void 0:n.length)>0){var a;let e=0;for(let n of null===x||void 0===x||null===(l=x.applicable_card)||void 0===l?void 0:l.remaining_array){var l;"Paid"===(null===n||void 0===n?void 0:n.status)&&(e+=null===n||void 0===n?void 0:n.remainAmount)}I(null!==(a=e)&&void 0!==a?a:0)}}),[null===x||void 0===x||null===(n=x.applicable_card)||void 0===n?void 0:n.remaining_array]);const F=e=>{S((n=>({...n,[e.target.name]:e.target.value})))};return console.info("applicant",x),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Z,{onClose:a,children:(0,b.jsxs)("div",{className:t.Z.modal_container,children:[(0,b.jsx)(d.Z,{children:(0,b.jsxs)("div",{className:t.Z.modal_container_outer_header,children:[(0,b.jsx)("div",{className:t.Z.modal_container_header,children:(0,b.jsx)("h6",{children:k("cancel_addmission")})}),(0,b.jsx)("img",{src:"".concat(r.J7,"/close.svg"),alt:"close icon",onClick:a})]})}),(0,b.jsx)(i.Z,{}),(0,b.jsxs)(d.Z,{customStyle:{paddingTop:"0"},children:[(0,b.jsxs)("div",{className:t.Z.admission_fees_row,children:[(0,b.jsxs)("h6",{children:[k("fees_paid")," :"]}),(0,b.jsxs)("h6",{children:[k("rs_only")," ",A]})]}),(0,b.jsx)(m.Z,{label:"".concat(k("refund_amount")),placeholder:k("please_enter_refund_amount"),name:"amount",value:C.amount,type:"tel",onChange:e=>{S((n=>({...n,amount:+e.target.value,fee_payment_amount:+e.target.value})))},errorShow:w.amount}),(0,b.jsx)(f.Z,{paymentHeading:k("refund_payment_type_mode"),selectLabel:k("mode_placeholder"),onClick:e=>{S((n=>({...n,mode:"Cash"===e?"Offline":"Online",fee_payment_mode:e})))},errorShow:w.fee_payment_mode,defalutValue:C.fee_payment_mode,selectedValue:k("please_select_payment_mode"),isAuthority:"admissionCollectMode"}),(0,b.jsx)(c.Z,{label:k("select_date_of_transaction"),placeholder:k("please_select_date"),name:"transaction_date",value:C.transaction_date,onChange:e=>{S((n=>({...n,transaction_date:(0,v.jh)(e)})))},errorShow:w.transaction_date}),"Cash"===C.fee_payment_mode?null:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:t.Z.admission_fees_row,style:{margin:0},children:(0,b.jsx)("h6",{style:{margin:0,marginTop:"1rem"},children:k("paid_to")})}),(0,b.jsx)(m.Z,{label:k("bank_name_collect"),placeholder:k("please_enter_bank_name"),name:"fee_bank_name",value:C.fee_bank_name,type:"text",onChange:F}),(0,b.jsx)(m.Z,{label:k("banke_holder_name"),placeholder:k("please_enter_name_of_bank_holder"),name:"fee_bank_holder",value:C.fee_bank_holder,type:"text",onChange:F}),(0,b.jsx)(m.Z,{label:k("cheque_dd_neft"),placeholder:k("please_enter_utr_ref_number"),name:"fee_utr_reference",value:C.fee_utr_reference,type:"text",onChange:F})]}),(0,b.jsx)(u.Z,{label:"confirm",onAction:()=>{let e=(0,p.l)(C,["mode","fee_payment_amount","fee_bank_name","fee_bank_holder","fee_utr_reference"]);var n,a,l,o,d,t,i,_,r,s,u,m,c,f,h,b,y,k;(0,p.x)(e)?null!==x&&void 0!==x&&null!==(n=x.student)&&void 0!==n&&n._id&&null!==x&&void 0!==x&&null!==(a=x.appId)&&void 0!==a&&a._id&&null!==x&&void 0!==x&&null!==(l=x.fee_structure)&&void 0!==l&&l._id&&(Z((e=>!e)),q({sid:null===x||void 0===x||null===(o=x.student)||void 0===o?void 0:o._id,appId:null===x||void 0===x||null===(d=x.appId)||void 0===d?void 0:d._id,payment:{struct:null===x||void 0===x||null===(t=x.fee_structure)||void 0===t?void 0:t._id,amount:null!==(i=null===C||void 0===C?void 0:C.amount)&&void 0!==i?i:"",mode:null!==(_=null===C||void 0===C?void 0:C.mode)&&void 0!==_?_:"",fee_payment_mode:null!==(r=null===C||void 0===C?void 0:C.fee_payment_mode)&&void 0!==r?r:"",fee_payment_amount:null!==(s=null===C||void 0===C?void 0:C.fee_payment_amount)&&void 0!==s?s:"",transaction_date:null!==(u=(0,v._1)(C.transaction_date))&&void 0!==u?u:"",fee_bank_name:null!==(m=null===C||void 0===C?void 0:C.fee_bank_name)&&void 0!==m?m:"",fee_bank_holder:null!==(c=null===C||void 0===C?void 0:C.fee_bank_holder)&&void 0!==c?c:"",fee_utr_reference:null!==(f=null===C||void 0===C?void 0:C.fee_utr_reference)&&void 0!==f?f:"",remainAmount:null!==(h=(null===x||void 0===x?void 0:x.applicable_fee)-A)&&void 0!==h?h:0,classId:null!==(b=null===x||void 0===x||null===(y=x.student)||void 0===y||null===(k=y.studentClass)||void 0===k?void 0:k._id)&&void 0!==b?b:null}}).then((()=>{Z((e=>!e)),j()})).catch({})):N(e)}})]})]})}),g&&(0,b.jsx)(s.Z,{})]})}}}]);
//# sourceMappingURL=56212.3f17cc11.chunk.js.map