"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[5350],{5350:function(i,n,t){t.r(n);var e=t(1413),o=t(93433),a=t(29439),r=t(72791),d=t(5574),s=t(94721),l=t(27301),u=t(91007),c=t(39230),f=t(69721),v=t(16871),m=t(46500),h=t(55581),p=t(95048),Z=t(23441),g=t(57387),x=t(39480),k=t(80184);function N(i){var n=i.img,t=i.photoId,e=i.name,o=i.index,a=i.setIndex,r=i.assignAdmissionHead;return(0,k.jsxs)("div",{className:l.Z.sidebarbottomitem,onClick:function(){r(),a(o)},children:[(0,k.jsx)("img",{alt:"not found",src:"1"!==t?"".concat(f.yI,"/").concat(n):"/images/member_tab/class/default_avatar.svg"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:l.Z.namee,children:e}),(0,k.jsx)("p",{className:l.Z.desig,children:o})]})]})}n.default=function(i){var n=i.libraryModal,t=i.hideModal,b=i.edit,j=i.librarian,I=i.onParentRefetch,y=(0,c.$G)().t,M=(0,r.useState)(!1),_=(0,a.Z)(M,2),L=_[0],R=_[1],C=(0,p.v9)((function(i){return i.idChange})),B=(0,r.useState)(!1),P=(0,a.Z)(B,2),F=P[0],S=P[1],O=(0,r.useState)(!1),E=(0,a.Z)(O,2),A=E[0],D=E[1],H=(0,r.useState)(1),q=(0,a.Z)(H,2),w=q[0],G=q[1],U=(0,r.useState)([]),X=(0,a.Z)(U,2),Q=X[0],T=X[1],W=(0,Z.YD)(),Y=(0,a.Z)(W,2),J=(Y[0],Y[1]),K=(0,h.IO)(),V=(0,a.Z)(K,1)[0],z=(0,h.qF)(),$=(0,a.Z)(z,1)[0],ii=(0,p.I0)(),ni=(0,u.OU)({id:null===C||void 0===C?void 0:C.id,page:w,limit:10},{skip:!(null!==C&&void 0!==C&&C.id)}),ti=ni.data,ei=ni.refetch;(0,r.useEffect)((function(){null!==C&&void 0!==C&&C.id&&ei()}),[null===C||void 0===C?void 0:C.id,ei]);var oi=(0,x.gq)({id:null===C||void 0===C?void 0:C.id},{skip:!(null!==C&&void 0!==C&&C.id)}),ai=oi.oneInstituteDashboard,ri=oi.oneInstituteDashboardRefetch;(0,r.useEffect)((function(){null!==C&&void 0!==C&&C.id&&ri()}),[null===C||void 0===C?void 0:C.id,ri]),(0,r.useEffect)((function(){ti&&(ti.staffIns?T([].concat((0,o.Z)(Q),(0,o.Z)(ti.staffIns))):w>1&&S(!0))}),[ti]),(0,r.useEffect)((function(){J&&(F||G(w+1))}),[J]),(0,r.useEffect)((function(){setTimeout((function(){D(!A)}),3e3)}),[]);var di=(0,v.s0)(),si=(0,r.useState)(!1),li=(0,a.Z)(si,2),ui=li[0],ci=li[1],fi=(0,r.useState)(!1),vi=(0,a.Z)(fi,2),mi=vi[0],hi=vi[1],pi=(0,r.useState)({sid:"",name:"",index:"",photoId:"",profilePhoto:""}),Zi=(0,a.Z)(pi,2),gi=Zi[0],xi=Zi[1],ki=null===Q||void 0===Q?void 0:Q.filter((function(i){return(null===i||void 0===i?void 0:i._id)!==(null===j||void 0===j?void 0:j._id)}));return(0,k.jsx)(d.Z,{open:n,onClose:function(){return t(!1)},children:(0,k.jsxs)("div",{className:l.Z.admissionModal,children:[(0,k.jsxs)("div",{className:l.Z.admissionModalhead,children:[(0,k.jsx)("h6",{children:y(b?"edit_library":"activate_library")}),(0,k.jsx)("img",{onClick:function(){return t(!1)},src:"/images/close-post-icon.svg",alt:""})]}),(0,k.jsx)(s.Z,{}),(0,k.jsxs)("div",{className:l.Z.admissionModalbody,children:[!ui&&!b&&(0,k.jsxs)("div",{className:l.Z.assignDesignation,onClick:function(){return ci(!0)},children:[(0,k.jsx)("img",{className:l.Z.assignManager,src:"/images/sports/avatar-circle.svg",alt:""}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h6",{children:y("assign_lib_head")}),(0,k.jsx)("p",{children:y("search_from_joined_list")})]})]}),!ui&&b&&(0,k.jsxs)("div",{className:l.Z.sidebarbottomitem,onClick:function(){return ci(!0)},children:[(0,k.jsx)("img",{alt:"not found",src:"1"!==(null===j||void 0===j?void 0:j.photoId)?"".concat(f.yI,"/").concat(null===j||void 0===j?void 0:j.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:l.Z.namee,children:"".concat((null===j||void 0===j?void 0:j.staffFirstName)||""," ").concat(null!==j&&void 0!==j&&j.staffMiddleName?null===j||void 0===j?void 0:j.staffMiddleName:""," ").concat((null===j||void 0===j?void 0:j.staffLastName)||"")}),(0,k.jsxs)("p",{className:l.Z.desig,children:[" ",y("index_no")," ",null===j||void 0===j?void 0:j.index]})]})]}),ui&&!mi&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:l.Z.searchbar,children:[(0,k.jsx)("input",{type:"text",placeholder:y("search"),className:"form-control ".concat(l.Z.searchinput)}),(0,k.jsx)("img",{className:l.Z.searchIcon,alt:"img",src:"/images/search-dash-icon.svg"})]}),(0,k.jsx)("div",{className:l.Z.items,children:b?null===ki||void 0===ki?void 0:ki.map((function(i){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(N,{img:i.staffProfilePhoto,photoId:i.photoId,name:"".concat(i.staffFirstName," ").concat(i.staffMiddleName?i.staffMiddleName:""," ").concat(i.staffLastName),index:i.staffROLLNO,setIndex:function(i){return hi(!0)},assignAdmissionHead:function(){xi((0,e.Z)((0,e.Z)({},gi),{},{sid:null===i||void 0===i?void 0:i._id,name:"".concat(null===i||void 0===i?void 0:i.staffFirstName," ").concat(null!==i&&void 0!==i&&i.staffMiddleName?null===i||void 0===i?void 0:i.staffMiddleName:""," ").concat(null===i||void 0===i?void 0:i.staffLastName),index:null===i||void 0===i?void 0:i.staffROLLNO,photoId:null===i||void 0===i?void 0:i.photoId,profilePhoto:null===i||void 0===i?void 0:i.staffProfilePhoto}))}}),(0,k.jsx)(s.Z,{})]})})):null===Q||void 0===Q?void 0:Q.map((function(i){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(N,{img:i.staffProfilePhoto,photoId:i.photoId,name:"".concat(i.staffFirstName," ").concat(i.staffMiddleName?i.staffMiddleName:""," ").concat(i.staffLastName),index:i.staffROLLNO,setIndex:function(i){return hi(!0)},assignAdmissionHead:function(){xi((0,e.Z)((0,e.Z)({},gi),{},{sid:null===i||void 0===i?void 0:i._id,name:"".concat(null===i||void 0===i?void 0:i.staffFirstName," ").concat(null!==i&&void 0!==i&&i.staffMiddleName?null===i||void 0===i?void 0:i.staffMiddleName:""," ").concat(null===i||void 0===i?void 0:i.staffLastName),index:null===i||void 0===i?void 0:i.staffROLLNO,photoId:null===i||void 0===i?void 0:i.photoId,profilePhoto:null===i||void 0===i?void 0:i.staffProfilePhoto}))}}),(0,k.jsx)(s.Z,{})]})}))})]}),ui&&mi&&(0,k.jsxs)("div",{className:l.Z.sidebarbottomitem,children:[(0,k.jsx)("img",{alt:"not found",src:"1"!==gi.photoId?"".concat(f.yI,"/").concat(gi.profilePhoto):"/images/member_tab/class/default_avatar.svg"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:l.Z.namee,children:gi.name}),(0,k.jsxs)("p",{className:l.Z.desig,children:["Index No. ",gi.index]})]})]})]}),(0,k.jsx)("div",{className:l.Z.admissionModalfooter,children:(0,k.jsx)("div",{children:(0,k.jsx)(g.Z,{disabled:L,shwoLoader:!0,buttonText:y(b?"edit_":"activate"),customStyleButton:{minHeight:"2rem",marginTop:"0rem"},onAction:b?function(){gi.sid&&null!==j&&void 0!==j&&j._id&&(R(!0),$({osid:null===j||void 0===j?void 0:j._id,nsid:gi.sid}).then((function(i){var n;ii(m.X.libraryQuery({lid:null===(n=i.data)||void 0===n?void 0:n.library,lhead:gi.sid})),I(),xi((0,e.Z)((0,e.Z)({},gi),{},{sid:""})),hi(!mi),ci(!ui),R(!1),t()})))}:function(){var i;""!==(null===C||void 0===C?void 0:C.id)&&(R(!0),V({activate:{sid:null!==(i=null===gi||void 0===gi?void 0:gi.sid)&&void 0!==i?i:""},id:null===C||void 0===C?void 0:C.id}).then((function(i){var n,t;i.data.status&&(R(!1),ii(m.X.libraryQuery({lid:null===(n=i.data)||void 0===n?void 0:n.library,lhead:gi.sid})),di("/q/".concat(null===ai||void 0===ai||null===(t=ai.institute)||void 0===t?void 0:t.name,"/library")))})))}})})})]})})}},55581:function(i,n,t){t.d(n,{B6:function(){return O},CU:function(){return x},EI:function(){return f},Ef:function(){return g},Fy:function(){return S},H:function(){return j},I4:function(){return p},IO:function(){return a},LN:function(){return h},O_:function(){return s},QJ:function(){return Z},SN:function(){return N},Se:function(){return k},XJ:function(){return _},Yv:function(){return P},Zj:function(){return C},_s:function(){return R},a8:function(){return B},aA:function(){return c},ar:function(){return E},dH:function(){return F},eQ:function(){return b},iJ:function(){return u},mU:function(){return m},n9:function(){return v},nY:function(){return l},oW:function(){return L},qF:function(){return r},qw:function(){return I},sl:function(){return M},xK:function(){return y},yX:function(){return d}});var e=t(29439),o=t(41311),a=function(){var i=(0,o.CW)();return[(0,e.Z)(i,1)[0]]},r=function(){var i=(0,o.UO)();return[(0,e.Z)(i,1)[0]]},d=function(i){var n=(0,o.dA)(null===i||void 0===i?void 0:i.lid,{skip:null===i||void 0===i?void 0:i.skip});return{getLibraryDetail:n.data,getLibraryDetailRefetch:n.refetch}},s=function(i){var n=(0,o.Zo)(i.data,{skip:null===i||void 0===i?void 0:i.skip});return{getBooklist:n.data,getBookListRefetch:n.refetch}},l=function(){var i=(0,o.i9)();return[(0,e.Z)(i,1)[0]]},u=function(i){var n=(0,o.wT)(null===i||void 0===i?void 0:i.bid,{skip:null===i||void 0===i?void 0:i.skip});return{getBookDetail:n.data,getBookDetailRefetch:n.refetch}},c=function(i){var n=(0,o.z2)(i.data,{skip:null===i||void 0===i?void 0:i.skip});return{getIssuedBooklist:n.data,getIssuedBookListRefetch:n.refetch}},f=function(){var i=(0,o.pM)();return[(0,e.Z)(i,1)[0]]},v=function(){var i=(0,o.nv)();return[(0,e.Z)(i,1)[0]]},m=function(i){var n=(0,o.jX)(i.data,{skip:null===i||void 0===i?void 0:i.skip});return{getCollectedBooklist:n.data,getCollectedBookListRefetch:n.refetch}},h=function(){var i=(0,o.Gh)();return[(0,e.Z)(i,1)[0]]},p=function(i){var n=(0,o.NM)(i.data,{skip:null===i||void 0===i?void 0:i.skip});return{getMemberslist:n.data,getMembersListRefetch:n.refetch}},Z=function(i){var n=(0,o.yp)(i.data,{skip:null===i||void 0===i?void 0:i.skip});return{getMemberBooklist:n.data,getMemberBookListRefetch:n.refetch}},g=function(i){var n=(0,o.A8)(i.data,{skip:null===i||void 0===i?void 0:i.skip});return{getMemberHistorylist:n.data,getMemberHistoryListRefetch:n.refetch}},x=function(){var i=(0,o.YG)();return[(0,e.Z)(i,1)[0]]},k=function(){var i=(0,o.Rn)();return[(0,e.Z)(i,1)[0]]},N=function(i){var n=(0,o.du)(null===i||void 0===i?void 0:i.cid,{skip:null===i||void 0===i?void 0:i.skip});return{getCollectedBookDetail:n.data,getCollectedBookDetailRefetch:n.refetch}},b=function(){var i=(0,o.I1)();return[(0,e.Z)(i,1)[0]]},j=function(i){var n=(0,o.ZS)(i.lid,{skip:null===i||void 0===i?void 0:i.skip});return{libraryGetSiteInfo:n.data,libraryGetSiteInfoRefetch:n.refetch}},I=function(){var i=(0,o.Xr)();return[(0,e.Z)(i,1)[0]]},y=function(i){var n=(0,o.Gw)(i.data,{skip:null===i||void 0===i?void 0:i.skip});return{libraryFineCharge:n.data,libraryFineChargeRefetch:n.refetch}},M=function(){var i=(0,o.UV)();return[(0,e.Z)(i,1)[0]]},_=function(){var i=(0,o.Mb)();return[(0,e.Z)(i,1)[0]]},L=function(i){var n=(0,o.BF)(i.data,{skip:null===i||void 0===i?void 0:i.skip});return{libraryAllExcelExport:n.data,libraryAllExcelExportRefetch:n.refetch}},R=function(){var i=(0,o.Ww)();return[(0,e.Z)(i,1)[0]]},C=function(){var i=(0,o.NQ)();return[(0,e.Z)(i,1)[0]]},B=function(){var i=(0,o.WK)();return[(0,e.Z)(i,1)[0]]},P=function(){var i=(0,o.aA)();return[(0,e.Z)(i,1)[0]]},F=function(){var i=(0,o.V8)();return[(0,e.Z)(i,1)[0]]},S=function(){var i=(0,o.d6)();return[(0,e.Z)(i,1)[0]]},O=function(){var i=(0,o.iL)();return[(0,e.Z)(i,1)[0]]},E=function(){var i=(0,o.aU)();return[(0,e.Z)(i,1)[0]]}}}]);
//# sourceMappingURL=5350.71a5f712.chunk.js.map