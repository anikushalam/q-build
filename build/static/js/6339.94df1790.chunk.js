"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[6339],{47167:function(e,t,i){var a=i(1413),n=(i(72791),i(16871)),s=i(43504),l=i(23769),c=i(45639),d=i(80184);t.Z=function(e){var t=e.tabList,i=e.activeIndexTab,r=e.setActiveIndexTab,o=e.customStyleTab,v=e.carryParentState,f=e.showAs,u=e.customStyleLink,_=(0,n.UO)();return(0,d.jsx)("div",{className:c.Z.universal_container,children:f?null===t||void 0===t?void 0:t.map((function(e,t){return"disabled"===(null===e||void 0===e?void 0:e.is_active)?(0,d.jsx)("div",{className:i===(null===e||void 0===e?void 0:e.id)?"".concat(c.Z.universal_container_item," ").concat(c.Z.universal_container_item_active):c.Z.universal_container_item,style:(0,a.Z)((0,a.Z)({},u),{},{opacity:"0.5"}),children:(0,d.jsx)(l.Z,{children:null===e||void 0===e?void 0:e.name})},t):(0,d.jsx)(s.rU,{to:"/q/".concat(_.username,"/").concat(null===e||void 0===e?void 0:e.url),state:(0,a.Z)({},v),style:(0,a.Z)({},u),children:(0,d.jsx)("div",{className:i===(null===e||void 0===e?void 0:e.id)?"".concat(c.Z.universal_container_item," ").concat(c.Z.universal_container_item_active):c.Z.universal_container_item,style:(0,a.Z)({},o),children:(0,d.jsx)(l.Z,{children:null===e||void 0===e?void 0:e.name})})},t)})):null===t||void 0===t?void 0:t.map((function(e,t){return(0,d.jsx)("div",{className:i===(null===e||void 0===e?void 0:e.id)?"".concat(c.Z.universal_container_item," ").concat(c.Z.universal_container_item_active):c.Z.universal_container_item,onClick:function(){return r(null===e||void 0===e?void 0:e.id)},style:(0,a.Z)({},o),children:(0,d.jsx)(l.Z,{children:null===e||void 0===e?void 0:e.name})},t)}))})}},23769:function(e,t,i){i.d(t,{Z:function(){return l}});var a=i(29439),n=i(72791),s=i(80184);var l=function(e){var t=e.children,i=e.onclick,l=(0,n.useState)(!1),c=(0,a.Z)(l,2),d=c[0],r=c[1],o=(0,n.useState)({x:-1,y:-1}),v=(0,a.Z)(o,2),f=v[0],u=v[1];return(0,n.useEffect)((function(){-1!==f.x&&-1!==f.y?(r(!0),setTimeout((function(){return r(!1)}),1e3)):r(!1)}),[f]),(0,n.useEffect)((function(){d||u({x:-1,y:-1})}),[d]),(0,s.jsxs)("div",{className:"ripple_btn",onClick:function(e){u({x:e.clientX-e.target.offsetLeft,y:e.clientY-e.target.offsetTop}),i&&i(e)},children:[d?(0,s.jsx)("span",{className:"ripple"}):"",(0,s.jsx)("span",{className:"content",children:t})]})}},6339:function(e,t,i){i.r(t),i.d(t,{default:function(){return z}});var a=i(29439),n=i(72791),s="LeavesTransfer_complaints__d-Y+H",l="LeavesTransfer_complaintList__LIquD",c="LeavesTransfer_complaintDetail__Budn8",d="LeavesTab_complaintList__sDWs8",r="LeavesTab_listHead__UwvVn",o=i(39230),v="Leaves_item__NgSvu",f="Leaves_leaves__tHjre",u="Leaves_itemHead__wF5RS",_="Leaves_left__zckTY",m="Leaves_text__WivxN",h="Leaves_right__uAQzd",p="Leaves_btn__paNmR",x="Leaves_activeBtn__lDdeV",j="Leaves_reason__29vz2",L="Leaves_divider__6JQy3",N="Leaves_viewAll__ZHrmb",S=i(95048),Z=i(6245),b=i(11105),y=i(35395),T=i(69721),g=i(98734),k=i(74289),I=i(98684),R=i(80184),w=n.lazy((function(){return i.e(2520).then(i.bind(i,92520))})),C=function(e){var t,i,s,l,c,d,r=e.leave,f=e.onStaffLeaveListRefetch,S=e.viewBy,b=(0,Z.Gh)(),C=(0,a.Z)(b,1)[0],V=(0,k.Pv)(),B=(0,a.Z)(V,1)[0],A=(0,n.useState)(!1),F=(0,a.Z)(A,2),M=F[0],q=F[1],H=(0,n.useState)(!1),P=(0,a.Z)(H,2),U=P[0],D=P[1],z=(0,o.$G)().t,G=function(e){var t,i;(q((function(e){return!e})),"COFF"===S&&null!==r&&void 0!==r&&null!==(t=r.staff)&&void 0!==t&&t._id)?B({lid:null===r||void 0===r?void 0:r._id,cConfig:{sid:null===r||void 0===r||null===(i=r.staff)||void 0===i?void 0:i._id}}).then((function(){f(),q((function(e){return!e}))})):C({id:null===r||void 0===r?void 0:r._id,leaveAction:{status:e}}).then((function(){f(),q((function(e){return!e}))}))};return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("div",{className:v,children:[(0,R.jsxs)("div",{className:u,children:[(0,R.jsxs)("div",{className:_,children:[(0,R.jsx)("img",{src:"1"!==(null===r||void 0===r||null===(t=r.staff)||void 0===t?void 0:t.photoId)?"".concat(T.yI,"/").concat(null===r||void 0===r||null===(i=r.staff)||void 0===i?void 0:i.staffProfilePhoto):"".concat(I.p3,"/feed-user-avatar.svg"),alt:""}),(0,R.jsxs)("div",{className:m,children:[(0,R.jsx)("h6",{children:"".concat(null===r||void 0===r||null===(s=r.staff)||void 0===s?void 0:s.staffFirstName," ").concat(null!==r&&void 0!==r&&null!==(l=r.staff)&&void 0!==l&&l.staffMiddleName?null===r||void 0===r||null===(c=r.staff)||void 0===c?void 0:c.staffMiddleName:""," ").concat(null===r||void 0===r||null===(d=r.staff)||void 0===d?void 0:d.staffLastName)}),1===(null===r||void 0===r?void 0:r.date.length)?(0,R.jsx)("p",{children:null===r||void 0===r?void 0:r.date[0]}):(0,R.jsxs)("p",{children:[null===r||void 0===r?void 0:r.date[0]," ",!U&&(0,R.jsxs)("span",{className:N,onClick:function(){return D(!0)},children:["..",z("view_all_")]})]}),U&&(0,R.jsx)(y.Z,{children:(0,R.jsx)(w,{open:U,hideModal:function(e){return D(e)},dates:null===r||void 0===r?void 0:r.date})})]})]}),(0,R.jsxs)("div",{className:h,children:[(null===r||void 0===r?void 0:r.attach)&&(0,R.jsx)("a",{href:"".concat(T.r3,"/").concat(null===r||void 0===r?void 0:r.attach),target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,R.jsx)("img",{src:"/images/members/receipt-icon.svg",alt:"receipt icon",style:{height:"1.5rem"}})}),"Request"===(null===r||void 0===r?void 0:r.status)?(0,R.jsxs)(R.Fragment,{children:["COFF"===S?null:(0,R.jsx)("div",{className:x,onClick:function(){G("Rejected")},children:z("reject")}),(0,R.jsx)("div",{className:"".concat(x),onClick:function(){G("Accepted")},children:z("approve")})]}):(0,R.jsx)("div",{className:p,style:"Rejected"===(null===r||void 0===r?void 0:r.status)?{color:"red"}:{color:"#14ab50"},children:null===r||void 0===r?void 0:r.status})]})]}),(0,R.jsxs)("div",{className:j,style:{marginBottom:"0.3rem"},children:[" ",z("leave_type")," "," : ",null===r||void 0===r?void 0:r.leave_type]}),(0,R.jsxs)("div",{className:j,children:[" ",z("reason")," "," : ",null===r||void 0===r?void 0:r.reason]})]}),(0,R.jsx)("div",{className:L}),M&&(0,R.jsx)(g.Z,{})]})};var V=function(){var e,t=(0,S.v9)((function(e){return e.idChange.id})),i=(0,n.useState)(!0),s=(0,a.Z)(i,2),l=s[0],c=s[1],d=(0,Z.eJ)({data:{id:t,page:1,limit:10},skip:!t}),r=d.staffLeaveList,o=d.staffLeaveListRefetch;return(0,n.useEffect)((function(){t&&(c(!0),o())}),[t,o]),(0,n.useEffect)((function(){null!==r&&void 0!==r&&r.allLeave&&c(!1)}),[null===r||void 0===r?void 0:r.allLeave]),(0,R.jsxs)("div",{className:f,children:[null===r||void 0===r||null===(e=r.allLeave)||void 0===e?void 0:e.map((function(e,t){return(0,R.jsx)(C,{leave:e,onStaffLeaveListRefetch:o},t)})),l&&(0,R.jsx)(b.Z,{})]})},B={item:"Transfer_item__7r6ls",leaves:"Transfer_leaves__S0GpB",itemHead:"Transfer_itemHead__-fdF9",left:"Transfer_left__KgdOP",text:"Transfer_text__7ylZm",right:"Transfer_right__PyVy+",btn:"Transfer_btn__cs49i",activeBtn:"Transfer_activeBtn__V4uUp",reason:"Transfer_reason__W1Xj3",divider:"Transfer_divider__SOUhC",replacebtn:"Transfer_replacebtn__BGVcp",replacedbtn:"Transfer_replacedbtn__mZxCb"},A=i(72426),F=i.n(A);function M(e){var t=e.img,i=e.photoId,a=e.name,n=e.from,s=(e.replacedBy,e.reason),l=e.index,c=(e.replaced,e.setStaffListView),d=e.replacedStaff,r=e.setReplaceStaffId,v=e.setClickedIndex,f=e.clickedIndex,u=e.status,_=e.pid,m=e.aid,h=e.transId,p=e.MarkApprove,x=e.MarkReject,j=(0,o.$G)().t;return(0,R.jsxs)("div",{className:B.item,children:[(0,R.jsxs)("div",{className:B.itemHead,children:[(0,R.jsxs)("div",{className:B.left,children:[(0,R.jsx)("img",{src:"1"!==i?"".concat(T.yI,"/").concat(t):"".concat(I.p3,"/feed-user-avatar.svg"),alt:""}),(0,R.jsxs)("div",{className:B.text,children:[(0,R.jsx)("h6",{children:a}),(0,R.jsx)("p",{children:n})]})]}),"Requested"===u?(0,R.jsxs)("div",{className:B.right,children:[(!d||f!==l)&&(0,R.jsx)("div",{className:"".concat(B.btn),children:j("reject")}),(!d||f!==l)&&(0,R.jsx)("div",{className:"".concat(B.btn),children:j("approve")}),d&&f===l&&(0,R.jsx)("div",{onClick:function(){x("Rejected",h)},className:"".concat(B.activeBtn),children:j("reject")}),d&&f===l&&(0,R.jsx)("div",{onClick:function(){p("Approved",_,m,h)},className:"".concat(B.activeBtn),children:j("approve")})]}):""]}),(0,R.jsx)("div",{className:B.reason,children:s}),"Requested"===u&&(0,R.jsx)("div",{onClick:function(){c(!0),r(_),v(l)},className:B.replacebtn,children:j("replacement")}),"Requested"!==u&&(0,R.jsxs)("div",{className:B.replacedbtn,children:[j("replacement")," ",u]})]})}var q=function(e){e.staffListView;var t=e.setStaffListView,i=e.replacedStaff,s=e.setReplaceStaffId,l=e.transferData,c=e.fetch,d=(0,n.useState)(),r=(0,a.Z)(d,2),o=r[0],v=r[1],f=(0,Z.rp)(),u=(0,a.Z)(f,1)[0],_=(0,Z.qz)(),m=(0,a.Z)(_,1)[0],h=(0,n.useState)(!1),p=(0,a.Z)(h,2),x=p[0],j=p[1],L=function(e,i,a,n){""!==e&&""!==i&&""!==a&&""!==n&&(j((function(e){return!e})),u({tid:n&&n,status:e&&e,previousStaff:i&&i,assignedStaff:a&&a}).then((function(){c(),t(!1),j((function(e){return!e}))})).catch((function(e){j((function(e){return!e}))})))},N=function(e,i){""!==e&&""!==i&&(j((function(e){return!e})),m({tid:i&&i,status:e&&e}).then((function(e){c(),t(!1),j((function(e){return!e}))})).catch((function(e){j((function(e){return!e}))})))};return(0,R.jsxs)("div",{className:B.leaves,children:[null===l||void 0===l?void 0:l.map((function(e,a){var n,l,c,d,r,f,u;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(M,{index:a,img:null===e||void 0===e||null===(n=e.staff)||void 0===n?void 0:n.staffProfilePhoto,photoId:null===e||void 0===e||null===(l=e.staff)||void 0===l?void 0:l.photoId,from:F()(null===e||void 0===e?void 0:e.createdAt).format("LL"),replaced:e.replaced,replacedBy:e.replacedBy,name:"".concat(null===e||void 0===e||null===(c=e.staff)||void 0===c?void 0:c.staffFirstName," ").concat(null!==e&&void 0!==e&&null!==(d=e.staff)&&void 0!==d&&d.staffMiddleName?null===e||void 0===e||null===(r=e.staff)||void 0===r?void 0:r.staffMiddleName:""," ").concat(null===e||void 0===e||null===(f=e.staff)||void 0===f?void 0:f.staffLastName),reason:null===e||void 0===e?void 0:e.transferReason,setStaffListView:t,replacedStaff:i,setReplaceStaffId:s,clickedIndex:o,setClickedIndex:v,status:null===e||void 0===e?void 0:e.transferStatus,pid:null===e||void 0===e||null===(u=e.staff)||void 0===u?void 0:u._id,aid:null===i||void 0===i?void 0:i._id,transId:null===e||void 0===e?void 0:e._id,MarkApprove:L,MarkReject:N},a),(0,R.jsx)("div",{className:B.divider})]})})),x&&(0,R.jsx)(g.Z,{})]})},H=i(98094),P=i(47167);var U=function(e){var t=e.staffListView,i=e.setStaffListView,s=e.replacedStaff,l=e.setReplaceStaffId,c=(0,S.v9)((function(e){return e.idChange.id})),v=(0,o.$G)().t,f=(0,Z.X_)({id:c,skip:!c}),u=f.transferList,_=f.transferListRefetch;(0,n.useEffect)((function(){c&&_()}),[c]);var m=(0,n.useState)(0),h=(0,a.Z)(m,2),p=h[0],x=h[1],j=[{name:v("leaves"),id:0},{name:v("transfer"),id:1}];return(0,R.jsx)("div",{className:d,children:(0,R.jsxs)("div",{className:r,children:[(0,R.jsx)(P.Z,{tabList:j,activeIndexTab:p,setActiveIndexTab:x,customStyleTab:{width:"100%"}}),(0,R.jsx)(H.Z,{customStyle:{width:"100%"}}),0===p&&(0,R.jsx)(V,{}),1===p&&(0,R.jsx)(q,{staffListView:t,setStaffListView:i,replacedStaff:s,setReplaceStaffId:l,transferData:u&&(null===u||void 0===u?void 0:u.transfers),fetch:_})]})})},D=n.lazy((function(){return i.e(5493).then(i.bind(i,75493))}));var z=function(){var e=(0,n.useState)(!1),t=(0,a.Z)(e,2),i=t[0],d=t[1],r=(0,n.useState)(),o=(0,a.Z)(r,2),v=o[0],f=o[1],u=(0,n.useState)(""),_=(0,a.Z)(u,2),m=_[0],h=_[1];return(0,R.jsxs)("div",{className:s,children:[(0,R.jsx)("div",{className:l,children:(0,R.jsx)(U,{staffListView:i,setStaffListView:d,replacedStaff:v,setReplaceStaffId:h})}),(0,R.jsx)("div",{className:c,children:i&&(0,R.jsx)(y.Z,{children:(0,R.jsx)(D,{staffListView:i,setStaffListView:d,setReplacedStaff:f,replaceStaffId:m,replacedStaff:v})})})]})}},45639:function(e,t){t.Z={universal_container:"UniversalTab_universal_container__uxTOR",universal_container_item:"UniversalTab_universal_container_item__M0pS7",universal_container_item_active:"UniversalTab_universal_container_item_active__3u3Wt"}}}]);
//# sourceMappingURL=6339.94df1790.chunk.js.map