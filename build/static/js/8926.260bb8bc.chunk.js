"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[8926],{33030:function(e,o,n){var t=n(39230),i=n(80476),l=n(80184);o.Z=function(e){var o=e.label,n=e.onAction,s=e.customStyle,a=(0,t.$G)().t;return(0,l.jsx)("div",{className:i.Z.btn_container,onClick:function(){n()},style:s,children:a(o)})}},17958:function(e,o,n){n.r(o),n.d(o,{default:function(){return V}});var t=n(29439),i=n(84975),l=n(98684),s=n(90904),a=n(33030),d=n(63687),c=n(21348),r=n(57588),u=n(91427),v=n(72791),f=n(39230),_=n(23441),S="FinanceModerator_moderator_card__Ktx0m",h="FinanceModerator_moderator_card_text_container__APCb1",m="FinanceModerator_menu_icon__mkR4i",C="FinanceModerator_selected_staff_container__SvASN",x="FinanceModerator_selected_staff_text__Bb0K6",A="FinanceModerator_modal_container__Sn82A",E="FinanceModerator_modal_container_header__LNXAG",j=n(1095),p=n(89064),N=n(1413),Z=n(48293),I=n(19056),g=n(93638),T=n(80184),P=function(e){var o,n=e.onCloseEdit,t=e.setActivePopup,i=e.selectedStaff,a=e.moderatorState,d=e.onSelectRole,r=e.onUpdateModerator,u=(0,f.$G)().t;return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(Z.Z,{onClose:n,children:(0,T.jsxs)("div",{className:A,children:[(0,T.jsx)(c.Z,{children:(0,T.jsx)("div",{className:E,children:(0,T.jsx)("h6",{children:u("update_role_to_moderator")})})}),(0,T.jsx)(s.Z,{}),(0,T.jsxs)(c.Z,{customStyle:{paddingTop:"0"},children:[(0,T.jsxs)("section",{className:C,onClick:function(){return t("OPEN_STAFF_LIST")},style:{cursor:"pointer"},children:[(0,T.jsx)("img",{src:null!==i&&void 0!==i&&i.staffProfilePhoto?"".concat(j.yI,"/").concat(null===i||void 0===i?void 0:i.staffProfilePhoto):"".concat(l.p3,"/feed-user-avatar.svg"),alt:"staff profile avatar"}),(0,T.jsxs)("div",{className:x,children:[(0,T.jsx)("h6",{children:"".concat(null===i||void 0===i?void 0:i.staffFirstName," ").concat(null!==(o=null===i||void 0===i?void 0:i.staffMiddleName)&&void 0!==o?o:""," ").concat(null===i||void 0===i?void 0:i.staffLastName)}),(0,T.jsxs)("p",{children:[u("index_number")," "," : ",null===i||void 0===i?void 0:i.staffROLLNO]})]})]}),(0,T.jsx)(I.Z,{selectLabel:u("select_role_of_moderator"),selectedValue:u("please_select_role"),options:["Cash Receipt Section","Inventories Section","Fees Master Section","Payroll Section","Deposit Section","Bank Account Section","Data Export Authority","Scholarship Administrator"],defalutValue:"CASH_RECEIPT_ACCESS"===(null===a||void 0===a?void 0:a.mod_role)?"Cash Receipt Section":"INVENTORY_ACCESS"===(null===a||void 0===a?void 0:a.mod_role)?"Inventories Section":"FEE_MASTER_ACCESS"===(null===a||void 0===a?void 0:a.mod_role)?"Fees Master Section":"PAYROLL_ACCESS"===(null===a||void 0===a?void 0:a.mod_role)?"Payroll Section":"DEPOSIT_ACCESS"===(null===a||void 0===a?void 0:a.mod_role)?"Deposit Section":"BANK_ACCOUNT_ACCESS"===(null===a||void 0===a?void 0:a.mod_role)?"Bank Account Section":"DATA_EXPORT_ACCESS"===(null===a||void 0===a?void 0:a.mod_role)?"Data Export Authority":"DATA_EXPORT_ACCESS"===(null===a||void 0===a?void 0:a.mod_role)?"Scholarship Administrator":"",onClick:d}),(0,T.jsx)(g.Z,{label:"update",onAction:r})]})]})})})},R=n(55336),O=n(49806),M=function(e){var o,n,t,i=e.staff,a=e.selectedId,d=e.onSelect,c=(0,f.$G)().t;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:O.Z.assign_show_list_each,style:a===(null===i||void 0===i?void 0:i._id)?{backgroundColor:"rgba(75, 26, 133, 0.1)"}:null,onClick:function(){d(i)},children:[(0,T.jsx)("img",{src:null!==i&&void 0!==i&&i.staffProfilePhoto?"".concat(j.yI,"/").concat(i.staffProfilePhoto):"".concat(l.p3,"/feed-staff-avatar.svg"),alt:"profile avatar"}),(0,T.jsxs)("div",{className:O.Z.assign_each_paragraph,children:[(0,T.jsx)("h6",{children:"".concat(null!==(o=null===i||void 0===i?void 0:i.staffFirstName)&&void 0!==o?o:""," ").concat(null!==(n=null===i||void 0===i?void 0:i.staffMiddleName)&&void 0!==n?n:""," ").concat(null!==(t=null===i||void 0===i?void 0:i.staffLastName)&&void 0!==t?t:"")}),(0,T.jsxs)("p",{children:[c("index")," "," : ",null===i||void 0===i?void 0:i.staffROLLNO]})]})]}),(0,T.jsx)(s.Z,{customStyleBorder:{margin:"0"}})]})},F=function(e){var o=e.onClose,n=e.selectedId,a=e.onSelectStaff,d=e.instituteId,S=(0,f.$G)().t,h=(0,v.useState)(""),m=(0,t.Z)(h,2),C=m[0],x=m[1],A=(0,v.useState)(1),E=(0,t.Z)(A,2),j=E[0],p=E[1],N=(0,v.useState)(!0),I=(0,t.Z)(N,2),g=I[0],P=I[1],R=(0,_.YD)({skip:C}),F=(0,t.Z)(R,2),D=F[0],L=F[1],y=(0,i.nb)({data:{id:d,page:j,limit:10,search:C},skip:!d}),k=y.instituteAllStaff;y.instituteAllStaffLoading;(0,v.useEffect)((function(){L&&g&&p((function(e){return e+1}))}),[L,g]),(0,v.useEffect)((function(){null!==k&&void 0!==k&&k.length&&(0,u.f)(null===k||void 0===k?void 0:k.length,P)}),[null===k||void 0===k?void 0:k.length]);var b=(0,v.useCallback)((0,r.J)((function(e){return x(e)}),500),[]),B=function(e){n===(null===e||void 0===e?void 0:e._id)||a(e)};return(0,T.jsx)(Z.Z,{onClose:o,children:(0,T.jsxs)("div",{className:O.Z.modal_container,children:[(0,T.jsx)(c.Z,{children:(0,T.jsxs)("div",{className:O.Z.modal_container_outer_header,children:[(0,T.jsx)("div",{className:O.Z.modal_container_header,children:(0,T.jsx)("h6",{children:S("staff_list")})}),(0,T.jsx)("img",{src:"".concat(l.J7,"/close.svg"),alt:"close icon",onClick:o})]})}),(0,T.jsx)(s.Z,{}),(0,T.jsxs)(c.Z,{customStyle:{paddingBottom:"1rem"},children:[(0,T.jsxs)("div",{className:O.Z.assign_search_container,style:{marginBottom:"1rem"},children:[(0,T.jsx)("input",{type:"text",placeholder:S("search"),className:O.Z.assign_search_input,onChange:function(e){b(e.target.value)}}),(0,T.jsx)("img",{src:"".concat(l.dB,"/navbar-search.svg"),alt:"search icon"})]}),null===k||void 0===k?void 0:k.map((function(e,o){return(null===k||void 0===k?void 0:k.length)===o+1?(0,T.jsx)("div",{ref:D,children:(0,T.jsx)(M,{staff:e,selectedId:n,onSelect:B})},null===e||void 0===e?void 0:e._id):(0,T.jsx)(M,{staff:e,selectedId:n,onSelect:B},null===e||void 0===e?void 0:e._id)}))]})]})})},D=function(e){var o,n,a=e.instituteId,d=e.fid,r=e.onClose,u=e.openModeratorMenu,_=e.openAs,S=e.onEdit,h=(0,f.$G)().t,m=(0,v.useState)("EDIT"===_?"PREVIEW_FORM":"OPEN_STAFF_LIST"),p=(0,t.Z)(m,2),O=p[0],M=p[1],D=(0,v.useState)("EDIT"===_?null===u||void 0===u?void 0:u.access_staff:""),L=(0,t.Z)(D,2),y=L[0],k=L[1],b=(0,v.useState)({mod_role:"EDIT"===_?null===u||void 0===u?void 0:u.access_role:"",sid:"EDIT"===_?null===u||void 0===u||null===(o=u.access_staff)||void 0===o?void 0:o._id:""}),B=(0,t.Z)(b,2),G=B[0],V=B[1],Y=(0,i.iM)(),X=(0,t.Z)(Y,1)[0];(0,v.useEffect)((function(){var e;"EDIT"===_&&(k(null===u||void 0===u?void 0:u.access_staff),V({mod_role:null===u||void 0===u?void 0:u.access_role,sid:null===u||void 0===u||null===(e=u.access_staff)||void 0===e?void 0:e._id}),M("PREVIEW_FORM"))}),[_]);var $=function(e){V((function(o){return(0,N.Z)((0,N.Z)({},o),{},{mod_role:"Cash Receipt Section"===e?"CASH_RECEIPT_ACCESS":"Inventories Section"===e?"INVENTORY_ACCESS":"Fees Master Section"===e?"FEE_MASTER_ACCESS":"Payroll Section"===e?"PAYROLL_ACCESS":"Deposit Section"===e?"DEPOSIT_ACCESS":"Bank Account Section"===e?"BANK_ACCOUNT_ACCESS":"Data Export Authority"===e||"Scholarship Administrator"===e?"DATA_EXPORT_ACCESS":""})}))};return(0,T.jsxs)(T.Fragment,{children:["OPEN_STAFF_LIST"===O&&(0,T.jsx)(F,{onSelectStaff:function(e){k(e),V((function(o){return(0,N.Z)((0,N.Z)({},o),{},{sid:null===e||void 0===e?void 0:e._id})})),M("EDIT"===_?"PREVIEW_FORM":"ASSIGN_ROLE")},onClose:r,instituteId:a}),"ASSIGN_ROLE"===O&&(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(Z.Z,{onClose:r,children:(0,T.jsxs)("div",{className:A,children:[(0,T.jsx)(c.Z,{children:(0,T.jsx)("div",{className:E,children:(0,T.jsx)("h6",{children:h("assign_role_to_moderator")})})}),(0,T.jsx)(s.Z,{}),(0,T.jsxs)(c.Z,{customStyle:{paddingTop:"0"},children:[(0,T.jsxs)("section",{className:C,children:[(0,T.jsx)("img",{src:null!==y&&void 0!==y&&y.staffProfilePhoto?"".concat(j.yI,"/").concat(null===y||void 0===y?void 0:y.staffProfilePhoto):"".concat(l.p3,"/feed-user-avatar.svg"),alt:"staff profile avatar"}),(0,T.jsxs)("div",{className:x,children:[(0,T.jsx)("h6",{children:"".concat(null===y||void 0===y?void 0:y.staffFirstName," ").concat(null!==(n=null===y||void 0===y?void 0:y.staffMiddleName)&&void 0!==n?n:""," ").concat(null===y||void 0===y?void 0:y.staffLastName)}),(0,T.jsxs)("p",{children:[h("index_no"),null===y||void 0===y?void 0:y.staffROLLNO]})]})]}),(0,T.jsx)(I.Z,{selectLabel:h("select_role_of_moderator"),selectedValue:h("please_select_role"),options:["Cash Receipt Section","Inventories Section","Fees Master Section","Payroll Section","Deposit Section","Bank Account Section","Data Export Authority","Scholarship Administrator"],defalutValue:"CASH_RECEIPT_ACCESS"===(null===G||void 0===G?void 0:G.mod_role)?"Cash Receipt Section":"INVENTORY_ACCESS"===(null===G||void 0===G?void 0:G.mod_role)?"Inventories Section":"FEE_MASTER_ACCESS"===(null===G||void 0===G?void 0:G.mod_role)?"Fees Master Section":"PAYROLL_ACCESS"===(null===G||void 0===G?void 0:G.mod_role)?"Payroll Section":"DEPOSIT_ACCESS"===(null===G||void 0===G?void 0:G.mod_role)?"Deposit Section":"BANK_ACCOUNT_ACCESS"===(null===G||void 0===G?void 0:G.mod_role)?"Bank Account Section":"DATA_EXPORT_ACCESS"===(null===G||void 0===G?void 0:G.mod_role)?"Data Export Authority":"DATA_EXPORT_ACCESS"===(null===G||void 0===G?void 0:G.mod_role)?"Scholarship Administrator":"",onClick:$}),(0,T.jsx)(g.Z,{label:"assign",onAction:function(){M("LOADING"),X({fid:d,addModerator:G}).then((function(){M(""),r()})).catch({})}})]}),"LOADING"===O&&(0,T.jsx)(R.Z,{})]})})}),"PREVIEW_FORM"===O&&(0,T.jsx)(P,{onCloseEdit:function(){r()},setActivePopup:M,selectedStaff:y,moderatorState:G,onSelectRole:$,onUpdateModerator:function(){S(G)}}),"LOADING"===O&&(0,T.jsx)(R.Z,{})]})},L=function(e){var o=e.onClose,n=e.financeId,l=e.openModeratorMenu,s=e.instituteId,a=(0,f.$G)().t,d=(0,v.useState)(!1),c=(0,t.Z)(d,2),r=c[0],u=c[1],_=(0,v.useState)(!1),S=(0,t.Z)(_,2),h=S[0],m=S[1],C=(0,i.G8)(),x=(0,t.Z)(C,1)[0],A=(0,i.E6)(),E=(0,t.Z)(A,1)[0],j=function(){m((function(e){return!e}))};return(0,T.jsx)(T.Fragment,{children:h?(0,T.jsx)(D,{onClose:j,onEdit:function(e){u((function(e){return!e})),j(),E({modId:null===l||void 0===l?void 0:l._id,updateModerator:{role:null===e||void 0===e?void 0:e.mod_role,staffId:null===e||void 0===e?void 0:e.sid}}).then((function(){u((function(e){return!e})),o()})).catch({})},openModeratorMenu:l,openAs:"EDIT",fid:n,instituteId:s}):(0,T.jsxs)(p.Z,{onClose:o,disabled:r,children:[(0,T.jsx)("h6",{onClick:j,children:a("edit")}),(0,T.jsx)("h6",{onClick:function(){u((function(e){return!e})),x({fid:n,modId:null===l||void 0===l?void 0:l._id}).then((function(){o(),u((function(e){return!e}))})).catch({})},children:a("delete")})]})})},y=function(e){var o,n,i,s,a,d,c,r=e.moderator,u=e.instituteId,_=e.financeId,C=(0,f.$G)().t,x=(0,v.useState)(""),A=(0,t.Z)(x,2),E=A[0],p=A[1];return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:S,children:[(0,T.jsx)("img",{src:null!==r&&void 0!==r&&null!==(o=r.access_staff)&&void 0!==o&&o.staffProfilePhoto?"".concat(j.yI,"/").concat(null===r||void 0===r||null===(n=r.access_staff)||void 0===n?void 0:n.staffProfilePhoto):"".concat(l.p3,"/feed-user-avatar.svg"),alt:"moderator avatar"}),(0,T.jsxs)("section",{className:h,children:[(0,T.jsx)("h6",{children:"".concat(null===r||void 0===r||null===(i=r.access_staff)||void 0===i?void 0:i.staffFirstName," ").concat(null!==(s=null===r||void 0===r||null===(a=r.access_staff)||void 0===a?void 0:a.staffMiddleName)&&void 0!==s?s:""," ").concat(null===r||void 0===r||null===(d=r.access_staff)||void 0===d?void 0:d.staffLastName)}),(0,T.jsxs)("p",{children:[C("index_number")," "," : ",null===r||void 0===r||null===(c=r.access_staff)||void 0===c?void 0:c.staffROLLNO]}),(0,T.jsx)("p",{children:"CASH_RECEIPT_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Cash Receipt Section":"INVENTORY_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Inventories Section":"FEE_MASTER_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Fees Master Section":"PAYROLL_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Payroll Section":"DEPOSIT_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Deposit Section":"BANK_ACCOUNT_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Bank Account Section":"DATA_EXPORT_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Data Export Authority":"DATA_EXPORT_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Scholarship Administrator":""})]}),(0,T.jsx)("img",{src:"".concat(l.J7,"/menu.svg"),alt:"menu icon",onClick:function(){p(r)},className:m,title:"Menu"})]}),E&&(0,T.jsx)(L,{onClose:function(){p("")},financeId:_,openModeratorMenu:E,instituteId:u})]})},k=n(93405),b=n(23984),B=n(1669),G=n(2651),V=function(e){var o,n,S,h,m=e.fid,C=e.instituteId,x=(0,f.$G)().t,A=(0,v.useState)(""),E=(0,t.Z)(A,2),j=E[0],p=E[1],N=(0,v.useState)(1),Z=(0,t.Z)(N,2),I=Z[0],g=Z[1],P=(0,v.useState)(!0),O=(0,t.Z)(P,2),M=O[0],F=O[1],L=(0,_.YD)({skip:j}),V=(0,t.Z)(L,2),Y=V[0],X=V[1],$=(0,v.useState)(!1),K=(0,t.Z)($,2),U=K[0],w=K[1],H=(0,i.NK)({data:{fid:m,page:I,limit:10,search:j},skip:!m}),J=H.financeModerator,W=H.financeModeratorLoading;(0,v.useEffect)((function(){X&&M&&g((function(e){return e+1}))}),[X,M]),(0,v.useEffect)((function(){var e;if(null!==J&&void 0!==J&&null!==(e=J.list)&&void 0!==e&&e.length){var o,n=(0,u.f)(null===J||void 0===J||null===(o=J.list)||void 0===o?void 0:o.length);F((function(){return n}))}}),[null===J||void 0===J||null===(o=J.list)||void 0===o?void 0:o.length]);var q=(0,v.useCallback)((0,r.J)((function(e){g((function(){return 1})),p(e)}),500),[]),z=function(){w((function(e){return!e}))};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(d.Z,{children:[(0,T.jsx)(c.Z,{children:(0,T.jsxs)("div",{className:k.Z.fm_header_container,children:[(0,T.jsx)("h6",{children:x("finance_moderators")}),(0,T.jsx)("div",{className:k.Z.fm_search,children:(0,T.jsx)("section",{className:k.Z.fm_search_container,children:(0,T.jsxs)("div",{className:k.Z.fm_search_container_inner,children:[(0,T.jsx)("img",{className:k.Z.fm_search_icon,alt:"search icon",src:"".concat(l.dB,"/navbar-search.svg")}),(0,T.jsx)("input",{type:"text",placeholder:x("search"),onChange:function(e){e.target.value?q(e.target.value):(g((function(){return 1})),p(""))}})]})})})]})}),(0,T.jsx)(s.Z,{}),(0,T.jsxs)(c.Z,{customStyle:{paddingTop:"0.2rem"},children:[(0,T.jsx)(b.Z,{children:(0,T.jsx)(a.Z,{label:"add_new_moderator",onAction:z})}),null===J||void 0===J||null===(n=J.list)||void 0===n?void 0:n.map((function(e,o){var n;return(null===J||void 0===J||null===(n=J.list)||void 0===n?void 0:n.length)===o+1?(0,T.jsx)("div",{ref:Y,children:(0,T.jsx)(y,{moderator:e,financeId:m,instituteId:C})},null===e||void 0===e?void 0:e._id):(0,T.jsx)(y,{moderator:e,financeId:m,instituteId:C},null===e||void 0===e?void 0:e._id)})),W?j?(0,T.jsx)(R.Z,{}):(0,T.jsx)(B.Z,{}):j?!(null!==J&&void 0!==J&&null!==(S=J.list)&&void 0!==S&&S.length)&&(0,T.jsx)(G.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No moderator fuond related this search."}):!(null!==J&&void 0!==J&&null!==(h=J.list)&&void 0!==h&&h.length)&&(0,T.jsx)(G.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No moderator added."})]})]}),U&&(0,T.jsx)(D,{instituteId:C,fid:m,onClose:z})]})}}}]);
//# sourceMappingURL=8926.260bb8bc.chunk.js.map