"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[76433],{76433:(e,i,n)=>{n.r(i),n.d(i,{default:()=>S});var s=n(72791),o=n(39230),t=n(23441),c=n(95048),l=n(11105),a=n(14304);const d={incomeForm:"IncomeForm_incomeForm__W0gSL",top:"IncomeForm_top__GGkX6",mid:"IncomeForm_mid__8365k",row:"IncomeForm_row__rEE2P",input:"IncomeForm_input__Mw-NN",down:"IncomeForm_down__pxSP2",options:"IncomeForm_options__yGnkn",option:"IncomeForm_option__XmUaM",aadhar:"IncomeForm_aadhar__s2Dpw",btn:"IncomeForm_btn__f3m-H",row_search:"IncomeForm_row_search__Zc2Tu"};var r=n(14124),m=n(98734),v=n(80184);const h={position:"relative",zIndex:1},u={position:"absolute",right:"0",top:"2.2vw",zIndex:10},_={position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10};function x(e){let{setIncomeData:i,open:n,onClose:s,incomeData:t,setIsOpen:c}=e;const{t:l}=(0,o.$G)();return n?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{onClick:s,style:_}),(0,v.jsxs)("div",{style:u,className:d.options,children:[(0,v.jsx)("div",{className:d.option,onClick:()=>{i({...t,tMode:"By Cash"}),c(!1)},children:l("by_cash")}),(0,v.jsx)("div",{className:d.option,onClick:()=>{i({...t,tMode:"By Bank"}),c(!1)},children:l("by_bank")})]})]}):null}const p=function(e){let{onRefetchWhenCreateIncome:i,setViewIndex:n}=e;const{t:t}=(0,o.$G)(),l=(0,c.v9)((e=>e.financeChange)),[u]=(0,a.pq)(),[_,p]=(0,s.useState)(!1),[f,j]=(0,s.useState)(!1),[g,I]=(0,s.useState)(""),[N,k]=(0,s.useState)(!1),C=document.querySelector("textarea");null===C||void 0===C||C.addEventListener("keyup",(e=>{C.style.height="auto";let i=e.target.scrollHeight;C.style.height="".concat(i,"px")}));const[S,w]=(0,s.useState)({tMode:""}),[b,F]=(0,s.useState)(""),[y,L]=(0,s.useState)({incomeFrom:"",incomeAmount:"",incomePurpose:"",incomeDesc:""});return(0,v.jsxs)("div",{className:d.incomeForm,children:[(0,v.jsx)("div",{className:d.top,children:t("add_receipt")}),(0,v.jsx)("form",{onSubmit:e=>{e.preventDefault(),k((e=>!e));const s=new FormData;s.append("incomeAmount",y.incomeAmount),g||s.append("incomeFrom",y.incomeFrom),s.append("incomeDesc",y.incomeDesc),s.append("incomeAccount",S.tMode),s.append("file",b),s&&u({fData:s,fid:null===l||void 0===l?void 0:l.fid,user_query:g}).then((e=>{e.data.status&&(i(),n(0),k((e=>!e)))})).catch((()=>{k((e=>!e))}))},children:(0,v.jsxs)("div",{className:d.mid,children:[(0,v.jsxs)("div",{className:d.row,children:[(0,v.jsx)("h6",{children:t("select_transaction_mode")}),(0,v.jsxs)("div",{className:d.input,style:h,children:[(0,v.jsxs)("div",{children:[""!==(null===S||void 0===S?void 0:S.tMode)?(0,v.jsx)("h6",{onClick:()=>p(!0),children:S.tMode}):(0,v.jsxs)("h6",{onClick:()=>p(!0),children:[" ",t("please_select_transaction_mode")]}),(0,v.jsx)("img",{className:d.down,src:"/images/downn-icon.svg",alt:""})]}),(0,v.jsx)(x,{open:_,onClose:()=>p(!1),setIncomeData:w,incomeData:S,setIsOpen:p})]})]}),(0,v.jsxs)("div",{className:d.row,children:[(0,v.jsx)("h6",{children:t("amount")}),(0,v.jsx)("input",{type:"number",name:"incomeAmount",min:"1",placeholder:t("enter_amount"),value:y.incomeAmount,onChange:e=>L({...y,incomeAmount:e.target.value}),required:!0})]}),(0,v.jsxs)("div",{className:d.row,children:[(0,v.jsxs)("h6",{children:[t("from")," ",(0,v.jsxs)("span",{className:d.row_search,onClick:()=>j(!0),children:[(0,v.jsx)("img",{style:{width:"16px",height:"16px"},src:"/images/search-icon.svg",alt:"search icon"}),"Search & Select"]})]}),(0,v.jsx)("input",{type:"text",name:"incomeFrom",placeholder:t("enter_income_from"),value:y.incomeFrom,onChange:e=>{L({...y,incomeFrom:e.target.value}),I("")},required:!0})]}),(0,v.jsxs)("div",{className:d.row,children:[(0,v.jsx)("h6",{children:t("description")}),(0,v.jsx)("textarea",{className:d.postTextarea,type:"text",name:"incomeDesc",placeholder:t("description_details"),value:y.incomeDesc,onChange:e=>L({...y,incomeDesc:e.target.value})})]}),(0,v.jsxs)("div",{className:d.row,children:[(0,v.jsx)("h6",{children:t("ack_rcpt")}),(0,v.jsx)("input",{type:"file",className:d.aadhar,name:"file",onChange:e=>{F((()=>e.target.files[0]))}})]}),(0,v.jsx)("button",{type:"submit",className:d.btn,children:t("save_receipt")})]})}),f&&(0,v.jsx)(r.Z,{onClose:()=>j(!1),title:"Search User",disabledId:g,assignHead:f,headSelect:e=>{I(null===e||void 0===e?void 0:e._id),j(!1),L((i=>({...i,incomeFrom:null===e||void 0===e?void 0:e.userLegalName})))}}),N&&(0,v.jsx)(m.Z,{})]})};var f=n(72426),j=n.n(f);const g={incomeContainer:"Incomes_incomeContainer__SbU4O",income:"Incomes_income__FOTMn",incomeLeft:"Incomes_incomeLeft__V-9-L",incomeRight:"Incomes_incomeRight__idEvU",incomeLeftt:"Incomes_incomeLeftt__OjpuZ",itemsContainer:"Incomes_itemsContainer__fQImV",rcv:"Incomes_rcv__OS+XD",text:"Incomes_text__6tzWh",btn_sticky:"Incomes_btn_sticky__1or9D",btn:"Incomes_btn__VYWDG",history:"Incomes_history__-f28a",incomeRightt:"Incomes_incomeRightt__sbwF1",incomeTop:"Incomes_incomeTop__BnNrk",right:"Incomes_right__Zne0r",rightHead:"Incomes_rightHead__TN2-s",rightBody:"Incomes_rightBody__AgRhB",detail:"Incomes_detail__39li9",detailTop:"Incomes_detailTop__rTMHm",detailTopLeft:"Incomes_detailTopLeft__130S7",detailTopMid:"Incomes_detailTopMid__MZnqL",visibility:"Incomes_visibility__jRBCa",detailTopRight:"Incomes_detailTopRight__ElMKB",detailContent:"Incomes_detailContent__EjNa6",imagediv:"Incomes_imagediv__KHFNi",backh:"Incomes_backh__9dehK",invoice_number:"Incomes_invoice_number__UPxeM",card_container:"Incomes_card_container__QBJaT",sidebarheader:"Incomes_sidebarheader__Qardc"};function I(e){var i;let{income:n,setDetailView:s,setIncomeId:t,all:c}=e;const{t:l}=(0,o.$G)();return(0,v.jsxs)("div",{onClick:()=>{s(!0),t(n)},className:g.card_container,children:[(0,v.jsxs)("h6",{className:g.invoice_number,children:["Invoice No: ",null===c||void 0===c?void 0:c.invoice_number]}),(0,v.jsxs)("div",{className:g.sidebarheader,children:[(0,v.jsxs)("div",{className:g.text,children:[(0,v.jsx)("p",{className:g.rcv,children:l("recived_from")}),(0,v.jsx)("h6",{children:null!==c&&void 0!==c&&c.incomeFrom?null===c||void 0===c?void 0:c.incomeFrom:null===c||void 0===c||null===(i=c.incomeFromUser)||void 0===i?void 0:i.userLegalName}),(0,v.jsx)("p",{className:g.rcv,children:j()(null===c||void 0===c?void 0:c.createdAt).format("LL")})]}),(0,v.jsxs)("div",{className:g.text,children:[(0,v.jsx)("p",{className:g.rcv1}),(0,v.jsxs)("h6",{children:["Rs. ",null===c||void 0===c?void 0:c.incomeAmount]}),(0,v.jsx)("p",{className:g.rcv,children:null===c||void 0===c?void 0:c.incomeAccount})]})]})]})}const N=s.forwardRef(((e,i)=>{var n;return(0,v.jsxs)("div",{className:g.incomeLeftt,children:[!(null!==e&&void 0!==e&&e.fId)&&(0,v.jsx)("div",{className:"".concat(g.btn," ").concat(g.btn_sticky),onClick:null===e||void 0===e?void 0:e.viewForm,children:(0,v.jsx)("img",{src:"/images/addplus.svg",alt:""})}),(0,v.jsx)("div",{className:g.itemsContainer,children:null===e||void 0===e||null===(n=e.allIncome)||void 0===n?void 0:n.map(((n,s)=>{var o;return(null===e||void 0===e||null===(o=e.allIncome)||void 0===o?void 0:o.length)===s+1?(0,v.jsx)("div",{ref:i,children:(0,v.jsx)(I,{setDetailView:null===e||void 0===e?void 0:e.setDetailView,setIncomeId:null===e||void 0===e?void 0:e.setIncomeId,all:n})},s):(0,v.jsx)(I,{income:"".concat(null===n||void 0===n?void 0:n._id),setDetailView:null===e||void 0===e?void 0:e.setDetailView,setIncomeId:null===e||void 0===e?void 0:e.setIncomeId,all:n},s)}))})]})}));const k=function(e){var i,n,s,t,c,l,d,r,m;let{detailview:h,iBalance:u,incomeId:_,setIncomeId:x,setDetailView:p}=e;const{data:f}=(0,a.gP)("".concat(_),{skip:!_}),{t:I}=(0,o.$G)();return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:g.incomeRightt,children:h?(0,v.jsxs)("div",{className:g.detail,children:[(0,v.jsxs)("div",{className:g.detailTop,children:[(0,v.jsx)("div",{className:g.detailTopLeft,children:(0,v.jsx)("h6",{onClick:()=>p(!1),children:I("back")})}),(0,v.jsx)("div",{className:g.detailTopMid,children:(0,v.jsx)("h6",{children:null!==f&&void 0!==f&&null!==(i=f.oneIncome)&&void 0!==i&&i.incomeFrom?null===f||void 0===f||null===(n=f.oneIncome)||void 0===n?void 0:n.incomeFrom:null===f||void 0===f||null===(s=f.oneIncome)||void 0===s||null===(t=s.incomeFromUser)||void 0===t?void 0:t.userLegalName})}),(0,v.jsx)("div",{className:g.detailTopRight,children:(0,v.jsxs)("h6",{children:["Rs. ",null===f||void 0===f||null===(c=f.oneIncome)||void 0===c?void 0:c.incomeAmount]})})]}),(0,v.jsxs)("div",{className:g.detailContent,children:[(0,v.jsx)("p",{children:I("transaction_mode")}),(0,v.jsxs)("h6",{children:[null===f||void 0===f||null===(l=f.oneIncome)||void 0===l?void 0:l.incomeAccount," ",I("payment")," "]})]}),(0,v.jsxs)("div",{className:g.detailContent,children:[(0,v.jsx)("p",{children:I("reason")}),(0,v.jsx)("h6",{children:null===f||void 0===f||null===(d=f.oneIncome)||void 0===d?void 0:d.incomePurpose})]}),(0,v.jsxs)("div",{className:g.detailContent,children:[(0,v.jsx)("p",{children:I("description")}),(0,v.jsx)("h6",{children:null===f||void 0===f||null===(r=f.oneIncome)||void 0===r?void 0:r.incomeDesc})]}),(0,v.jsxs)("div",{className:g.detailContent,children:[(0,v.jsx)("p",{children:I("day_date")}),(0,v.jsx)("h6",{children:j()(null===f||void 0===f||null===(m=f.oneIncome)||void 0===m?void 0:m.createdAt).format("LL")})]}),(0,v.jsxs)("div",{className:g.detailContent,children:[(0,v.jsx)("p",{children:I("acknowlegement")}),(0,v.jsxs)("div",{className:g.imagediv,children:[(0,v.jsx)("img",{src:"/images/image-icon.svg",alt:""}),(0,v.jsx)("p",{children:"img07.png"})]})]})]}):(0,v.jsxs)("div",{className:g.right,children:[(0,v.jsxs)("div",{className:g.rightHead,children:[(0,v.jsx)("h6",{children:I("total_income")}),(0,v.jsxs)("h6",{children:["Rs."," ",(null===u||void 0===u?void 0:u.financeIncomeCashBalance)+(null===u||void 0===u?void 0:u.financeIncomeBankBalance)]})]}),(0,v.jsxs)("div",{className:g.rightBody,children:[(0,v.jsxs)("h6",{children:[" ",I("by_cash")," : Rs. ",null===u||void 0===u?void 0:u.financeIncomeCashBalance]}),(0,v.jsxs)("h6",{children:[" ",I("by_bank")," : Rs. ",null===u||void 0===u?void 0:u.financeIncomeBankBalance]})]})]})})})};var C=n(65543);const S=function(e){let{fId:i}=e;const{t:n}=(0,o.$G)(),[d,r]=(0,s.useState)(0),[m,h]=(0,s.useState)(!1),[u,_]=(0,s.useState)(""),[x,f]=(0,s.useState)(1),[j,I]=(0,s.useState)(!0),[S,w]=(0,t.YD)(),[b,F]=s.useState([]),[y,L]=(0,s.useState)(!0),[D,R]=(0,s.useState)(!1),U=(0,c.v9)((e=>e.financeChange)),{data:T,refetch:A}=(0,a.g3)("".concat(null!==U&&void 0!==U&&U.fid?null===U||void 0===U?void 0:U.fid:i)),{data:B,refetch:E}=(0,a.GP)({fid:"".concat(null!==U&&void 0!==U&&U.fid?null===U||void 0===U?void 0:U.fid:i),page:x,limit:10},{skip:null!==U&&void 0!==U&&U.fid?!(null!==U&&void 0!==U&&U.fid):!i}),{scrollToTop:M}=(0,C.u)();return(0,s.useEffect)((()=>{M()}),[]),(0,s.useEffect)((()=>{w&&j&&f((e=>e+1))}),[w,j]),(0,s.useEffect)((()=>{D&&f(1)}),[D]),(0,s.useEffect)((()=>{(i||null!==U&&void 0!==U&&U.fid)&&(L(!0),E())}),[x,i,null===U||void 0===U?void 0:U.fid,E]),(0,s.useEffect)((()=>{D&&null!==U&&void 0!==U&&U.fid&&(L(!0),E())}),[D,null===U||void 0===U?void 0:U.fid,E]),(0,s.useEffect)((()=>{var e,i;if(D)F(null===B||void 0===B?void 0:B.allIncome),R(!1),L(!1);else if(null!==B&&void 0!==B&&B.allIncome){const e=[...b,...null===B||void 0===B?void 0:B.allIncome],i=[...new Set(e.map(JSON.stringify))].map(JSON.parse);F(i),L(!1)}else 0===(null===B||void 0===B||null===(i=B.allIncome)||void 0===i?void 0:i.length)&&L(!1);10===(null===B||void 0===B||null===(e=B.allIncome)||void 0===e?void 0:e.length)?I(!0):I(!1)}),[null===B||void 0===B?void 0:B.allIncome]),(0,v.jsxs)(v.Fragment,{children:[1===d&&(0,v.jsx)("div",{className:g.income,children:(0,v.jsx)(p,{setViewIndex:r,onRefetchWhenCreateIncome:()=>{R(!0),A()}})}),0===d&&(0,v.jsxs)("div",{className:g.incomeContainer,children:[(0,v.jsx)("div",{className:g.incomeTop,children:(0,v.jsx)("div",{className:g.history,children:n("income_history")})}),(0,v.jsxs)("div",{className:g.income,children:[(0,v.jsxs)("div",{className:g.incomeLeft,children:[(0,v.jsx)(N,{viewForm:()=>r(1),setDetailView:h,allIncome:b,setIncomeId:_,fId:i,ref:S}),y&&(0,v.jsx)(l.Z,{})]}),(0,v.jsx)("div",{className:g.incomeRight,children:(0,v.jsx)(k,{detailview:m,iBalance:null===T||void 0===T?void 0:T.incomeBalance,incomeId:u,setIncomeId:_,setDetailView:h})})]})]})]})}},14124:(e,i,n)=>{n.d(i,{Z:()=>f});var s=n(72791),o=n(23441),t=n(95048),c=n(763);const l="SearchUniversalUser_assign_title__UztZK",a="SearchUniversalUser_assign_search_container__kPO7h",d="SearchUniversalUser_assign_search_input__iF9F8",r="SearchUniversalUser_assign_show_list__-wdiL",m="SearchUniversalUser_assign_show_list_each__IWoKL",v="SearchUniversalUser_assign_each_paragraph__8oEu6";var h=n(5574),u=n(39230),_=n(12923),x=n(69721),p=n(80184);const f=e=>{let{onClose:i,title:n,headSelect:f,assignHead:j,disabledId:g}=e;const{t:I}=(0,u.$G)(),[N,k]=(0,s.useState)(1),[C,S]=(0,s.useState)(!0),[w,b]=(0,o.YD)(),[F,y]=(0,s.useState)(""),[L,D]=s.useState([]),R=(0,t.v9)((e=>e.idChange)),{universalUser:U,universalUserRefetch:T}=(0,_.Em)({search:F,page:N,limit:10});s.useEffect((()=>{null!==R&&void 0!==R&&R.id&&T()}),[null===R||void 0===R?void 0:R.id,T,N]),(0,s.useEffect)((()=>{b&&C&&k((e=>e+1))}),[b,C]),s.useEffect((()=>{if(null!==U&&void 0!==U&&U.user)if(F)D(null===U||void 0===U?void 0:U.user);else{const e=[...L,...null===U||void 0===U?void 0:U.user],i=[...new Set(e.map(JSON.stringify))].map(JSON.parse);D(i)}10===(null===U||void 0===U?void 0:U.user.length)?S(!0):S(!1)}),[null===U||void 0===U?void 0:U.user]),(0,s.useEffect)((()=>{F&&A()}),[F]);const A=()=>{T()},B=(0,s.useCallback)((0,c.debounce)((e=>y(e)),500),[]),E=e=>{g===(null===e||void 0===e?void 0:e._id)||(f(e),i())};return(0,p.jsx)(h.Z,{open:j,onClose:i,children:(0,p.jsxs)("div",{style:{backgroundColor:"#FAFAFA"},children:[(0,p.jsxs)("div",{className:l,children:[(0,p.jsx)("h5",{children:n}),(0,p.jsx)("img",{src:"/images/close-post-icon.svg",onClick:i,alt:"staff assign pop close icon"})]}),(0,p.jsxs)("div",{className:a,children:[(0,p.jsx)("input",{type:"text",placeholder:I("search"),className:d,onChange:e=>{return i=e.target.value,void B(i);var i}}),(0,p.jsx)("img",{src:"/images/search-dash-icon.svg",alt:"search icon"})]}),(0,p.jsx)("div",{className:r,children:null===L||void 0===L?void 0:L.map(((e,i)=>(null===L||void 0===L?void 0:L.length)===i+1?(0,p.jsxs)("div",{ref:w,children:[(0,p.jsxs)("div",{className:m,style:g===e._id?{backgroundColor:"rgba(75, 26, 133, 0.1)"}:{backgroundColor:"inherit"},onClick:()=>E(e),children:[(0,p.jsx)("img",{src:null!==e&&void 0!==e&&e.profilePhoto?"".concat(x.yI,"/").concat(e.profilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),(0,p.jsxs)("div",{className:v,children:[(0,p.jsx)("h6",{children:null===e||void 0===e?void 0:e.userLegalName}),(0,p.jsx)("p",{children:null===e||void 0===e?void 0:e.username})]})]}),(0,p.jsx)("hr",{})]},e._id):(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:m,style:g===e._id?{backgroundColor:"rgba(75, 26, 133, 0.1)"}:{backgroundColor:"inherit"},onClick:()=>E(e),children:[(0,p.jsx)("img",{src:null!==e&&void 0!==e&&e.profilePhoto?"".concat(x.yI,"/").concat(e.profilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),(0,p.jsxs)("div",{className:v,children:[(0,p.jsx)("h6",{children:null===e||void 0===e?void 0:e.userLegalName}),(0,p.jsx)("p",{children:null===e||void 0===e?void 0:e.username})]})]}),(0,p.jsx)("hr",{})]},e._id)))})]})})}},12923:(e,i,n)=>{n.d(i,{Ec:()=>j,Em:()=>N,JM:()=>h,NS:()=>t,Pg:()=>u,Q_:()=>f,RH:()=>v,Tv:()=>a,U_:()=>p,VN:()=>c,Wj:()=>r,ZS:()=>m,_8:()=>g,d5:()=>d,tB:()=>x,vI:()=>I,yx:()=>l,zO:()=>_});var s=n(91007),o=n(58208);const t=e=>{const{data:i,refetch:n}=(0,o.YD)(e.search,{skip:e.skip});return{instituteAllSearch:i,instituteAllSearchRefetch:n}},c=()=>{const[e]=(0,o.ak)();return[e]},l=()=>{const[e]=(0,o.WL)();return[e]},a=e=>{const{data:i,refetch:n}=(0,o.pH)(e.list,{skip:e.skip});return{instituteFollowList:i,instituteFollowListRefetch:n}},d=e=>{const{data:i,refetch:n}=(0,o.MG)(e.data,{skip:e.skip});return{instituteOwnFollowingList:i,instituteOwnFollowingListRefetch:n}},r=()=>{const[e]=(0,o.Ky)();return[e]},m=e=>{const{data:i,refetch:n}=(0,o.p8)(e.list);return{userFollowList:i,userFollowListRefetch:n}},v=e=>{const{data:i,refetch:n}=(0,o.Wv)(e);return{userFollowingList:i,userFollowingListRefetch:n}},h=e=>{const{data:i,refetch:n}=(0,o.sz)(e.search,{skip:e.skip});return{userAllSearch:i,userAllSearchRefetch:n}},u=()=>{const[e]=(0,o.Mk)();return[e]},_=()=>{const[e]=(0,o.$i)();return[e]},x=()=>{const[e]=(0,o.Do)();return[e]},p=()=>{const[e]=(0,o.He)();return[e]},f=()=>{const[e]=(0,o.vg)();return[e]},j=()=>{const[e]=(0,o.OO)();return[e]},g=e=>{const{data:i,refetch:n}=(0,o.N2)(e);return{userCircleList:i,userCircleListRefetch:n}},I=e=>{const{data:i,refetch:n}=(0,s.x6)(e.search,{skip:e.skip});return{assignSearchStaff:i,assignSearchStaffRefetch:n}},N=e=>{const{data:i,refetch:n}=(0,o.SJ)(e);return{universalUser:i,universalUserRefetch:n}}}}]);
//# sourceMappingURL=76433.2e7a196c.chunk.js.map