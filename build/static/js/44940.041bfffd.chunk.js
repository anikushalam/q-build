"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[44940],{44940:(e,l,t)=>{t.r(l),t.d(l,{default:()=>p});var i=t(72791),s=t(56959),d=t(23441),n=t(91427),a=t(57588),o=t(63687),c=t(21348),r=t(90904),v=t(55336),u=t(1669),f=t(2651),h=t(36132),m=t(39230),_=t(98684),x=t(93638),j=t(90702),S=t(80184);const Z=e=>{let{instituteId:l,modId:t,onRefetch:s,onClose:d}=e;const[n,a]=(0,i.useState)([]),[o,c]=(0,i.useState)([]),[r,u]=(0,i.useState)(!1),[f]=(0,h.J$)();return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(j.Z,{title:"add_staff",onClose:d,instituteId:l,isMultiSelect:!0,onMultiSelect:e=>{null!==n&&void 0!==n&&n.includes(null===e||void 0===e?void 0:e._id)?a((l=>null===l||void 0===l?void 0:l.filter((l=>l!==(null===e||void 0===e?void 0:e._id))))):a((l=>[...l,null===e||void 0===e?void 0:e._id]))},selectList:[...n,...o],onDone:()=>{t&&(null===n||void 0===n?void 0:n.length)>0&&(u((e=>!e)),f({mid:t,addStaff:{flow:"Review_Section",staff_arr:n}}).then((()=>{s(),u((e=>!e)),d()})).catch({}))}}),r&&(0,S.jsx)(v.Z,{})]})};var g=t(59303);const p=e=>{var l,t,j;let{modId:p,instituteId:w}=e;const{t:k}=(0,m.$G)(),[I,R]=(0,i.useState)(""),[C,b]=(0,i.useState)(1),[N,L]=(0,i.useState)(!0),[M,y]=(0,d.YD)({skip:I}),[A,q]=(0,i.useState)(!1),{lmsModeratorAllStaffList:D,lmsModeratorAllStaffListLoading:E,lmsModeratorAllStaffListRefetch:J}=(0,h.Ob)({data:{mid:p,page:C,limit:10,search:I,flow:"Review_Section"},skip:!p});(0,i.useEffect)((()=>{y&&N&&b((e=>e+1))}),[y,N]),(0,i.useEffect)((()=>{var e;if(null!==D&&void 0!==D&&null!==(e=D.list)&&void 0!==e&&e.length){var l;let e=(0,n.f)(null===D||void 0===D||null===(l=D.list)||void 0===l?void 0:l.length);L((()=>e))}}),[null===D||void 0===D?void 0:D.list]);const $=(0,i.useCallback)((0,a.J)((e=>{b((()=>1)),R(e)}),1500),[]),B=(0,i.useCallback)((()=>{b((()=>1)),R(""),J()}),[J]),F=()=>{q((e=>!e))};return(0,S.jsxs)(o.default,{children:[(0,S.jsx)(c.Z,{children:(0,S.jsxs)("div",{className:s.Z.fm_header_container,children:[(0,S.jsx)("h6",{children:k("all_staffs")}),(0,S.jsxs)("div",{className:s.Z.fm_search,children:[(0,S.jsx)("section",{className:s.Z.fm_search_container,children:(0,S.jsxs)("div",{className:s.Z.fm_search_container_inner,children:[(0,S.jsx)("img",{className:s.Z.fm_search_icon,alt:"search icon",src:"".concat(_.dB,"/navbar-search.svg")}),(0,S.jsx)("input",{type:"text",placeholder:k("search"),onChange:e=>{e.target.value?$(e.target.value):(b((()=>1)),R(""))}})]})}),(0,S.jsx)(x.Z,{label:k("add_new_staff"),customStyle:{margin:"0",padding:"0.4rem 1rem"},onAction:F})]})]})}),(0,S.jsx)(r.Z,{}),(0,S.jsxs)(c.Z,{children:[null===D||void 0===D||null===(l=D.list)||void 0===l?void 0:l.map(((e,l)=>{var t;return(null===D||void 0===D||null===(t=D.list)||void 0===t?void 0:t.length)===l+1?(0,S.jsx)("div",{ref:M,children:(0,S.jsx)(g.Z,{staff:e,onRefetch:B,flow:"Review_Section",modId:p})},null===e||void 0===e?void 0:e._id):(0,S.jsx)(g.Z,{staff:e,onRefetch:B,flow:"Review_Section",modId:p},null===e||void 0===e?void 0:e._id)})),E?I?(0,S.jsx)(v.Z,{}):(0,S.jsx)(u.Z,{}):I?0===(null===D||void 0===D||null===(t=D.list)||void 0===t?void 0:t.length)&&(0,S.jsx)(f.Z,{title:"No staff leave history found related this search."}):0===(null===D||void 0===D||null===(j=D.list)||void 0===j?void 0:j.length)&&(0,S.jsx)(f.Z,{title:"No staff leave history."}),A&&(0,S.jsx)(Z,{instituteId:w,modId:p,onRefetch:B,onClose:F})]})]})}}}]);
//# sourceMappingURL=44940.041bfffd.chunk.js.map