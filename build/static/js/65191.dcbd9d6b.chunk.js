"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[65191],{65408:(e,t,s)=>{s.d(t,{Z:()=>h});var a=s(72791),n=s(33992),l=s(11105),i=s(33148),d=s(69721),c=s(74801),o=s(8148),r=s(35395),u=s(80184);const v=a.lazy((()=>Promise.all([s.e(6307),s.e(85054),s.e(82555)]).then(s.bind(s,85054)))),m=e=>{var t,s,n,l,m,j,h,x,g,b,p,_,Z,N,y,f,S,T,I,C,A,k,D,P,E,w,q,F,M,R,U,O,G,H,B,L;let{sub:V,carryParentState:J,isView:K,did:$,cid:z,instituteId:Y,onRefetch:Q}=e;const[W,X]=(0,a.useState)("");return(0,u.jsxs)(u.Fragment,{children:["DEPARTMENT_HEAD"===K?(0,u.jsx)(o.Z,{carryParentState:{...J,subjectId:null===V||void 0===V?void 0:V._id,subjectName:"".concat(null===V||void 0===V?void 0:V.subjectName," ").concat(null!==V&&void 0!==V&&V.subject_category?"(".concat(null===V||void 0===V?void 0:V.subject_category,")"):""," ").concat(null!==V&&void 0!==V&&null!==(t=V.selected_batch_query)&&void 0!==t&&t.batchName?"(".concat(null===V||void 0===V||null===(s=V.selected_batch_query)||void 0===s?void 0:s.batchName,")"):""," ").concat("Optional"===(null===V||void 0===V?void 0:V.subjectOptional)?"(".concat(null===V||void 0===V?void 0:V.subjectOptional,")"):""),batchId:null===V||void 0===V||null===(n=V.selected_batch_query)||void 0===n?void 0:n._id,subjectTeacherName:"".concat(null!==(l=null===V||void 0===V||null===(m=V.subjectTeacherName)||void 0===m?void 0:m.staffFirstName)&&void 0!==l?l:""," ").concat(null!==(j=null===V||void 0===V||null===(h=V.subjectTeacherName)||void 0===h?void 0:h.staffMiddleName)&&void 0!==j?j:""," ").concat(null!==(x=null===V||void 0===V||null===(g=V.subjectTeacherName)||void 0===g?void 0:g.staffLastName)&&void 0!==x?x:"")},activeTab:"subject-detail",children:(0,u.jsxs)("div",{className:i.Z.class_container,style:{justifyContent:"space-between"},children:[(0,u.jsxs)("div",{className:i.Z.moderator_container_title,children:[(0,u.jsx)("img",{className:i.Z.oneRowImage,src:null!==V&&void 0!==V&&null!==(b=V.subjectTeacherName)&&void 0!==b&&b.staffProfilePhoto?"".concat(d.yI,"/").concat(null===V||void 0===V||null===(p=V.subjectTeacherName)||void 0===p?void 0:p.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"staff avatr"}),(0,u.jsxs)("div",{className:i.Z.class_container_text,children:[(0,u.jsxs)("h6",{children:[null!==(_=null===V||void 0===V?void 0:V.subjectName)&&void 0!==_?_:""," ",null!==V&&void 0!==V&&V.subject_category?"(".concat(null===V||void 0===V?void 0:V.subject_category,")"):"",null!==V&&void 0!==V&&null!==(Z=V.selected_batch_query)&&void 0!==Z&&Z.batchName?(0,u.jsxs)("span",{style:{fontWeight:"400",fontSize:"12px"},children:[" ","(",null!==(N=null===V||void 0===V||null===(y=V.selected_batch_query)||void 0===y?void 0:y.batchName)&&void 0!==N?N:"",")"]}):null,"Optional"===(null===V||void 0===V?void 0:V.subjectOptional)&&"(".concat(null===V||void 0===V?void 0:V.subjectOptional,")")]}),(0,u.jsx)("p",{children:"".concat(null!==(f=null===V||void 0===V||null===(S=V.subjectTeacherName)||void 0===S?void 0:S.staffFirstName)&&void 0!==f?f:""," ").concat(null!==(T=null===V||void 0===V||null===(I=V.subjectTeacherName)||void 0===I?void 0:I.staffMiddleName)&&void 0!==T?T:""," ").concat(null!==(C=null===V||void 0===V||null===(A=V.subjectTeacherName)||void 0===A?void 0:A.staffLastName)&&void 0!==C?C:"")})]})]}),(0,u.jsx)("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:e=>{e.preventDefault(),X(null===V||void 0===V?void 0:V._id)},title:"Menu",style:{cursor:"pointer",height:"1.5rem"}})]})}):(0,u.jsx)(c.Z,{carryParentState:{...J,subjectId:null===V||void 0===V?void 0:V._id,subjectName:"".concat(null===V||void 0===V?void 0:V.subjectName," ").concat(null!==V&&void 0!==V&&V.subject_category?"(".concat(null===V||void 0===V?void 0:V.subject_category,")"):""," ").concat(null!==V&&void 0!==V&&null!==(k=V.selected_batch_query)&&void 0!==k&&k.batchName?"(".concat(null===V||void 0===V||null===(D=V.selected_batch_query)||void 0===D?void 0:D.batchName,")"):""," ").concat("Optional"===(null===V||void 0===V?void 0:V.subjectOptional)?"(".concat(null===V||void 0===V?void 0:V.subjectOptional,")"):""),batchId:null===V||void 0===V||null===(P=V.selected_batch_query)||void 0===P?void 0:P._id,isView:"ADMINISTRATOR"},activeTab:"subject-menu",children:(0,u.jsxs)("div",{className:i.Z.class_container,children:[(0,u.jsx)("img",{className:i.Z.oneRowImage,src:null!==V&&void 0!==V&&null!==(E=V.subjectTeacherName)&&void 0!==E&&E.staffProfilePhoto?"".concat(d.yI,"/").concat(null===V||void 0===V||null===(w=V.subjectTeacherName)||void 0===w?void 0:w.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"staff avatr"}),(0,u.jsxs)("div",{className:i.Z.class_container_text,children:[(0,u.jsxs)("h6",{children:[null!==(q=null===V||void 0===V?void 0:V.subjectName)&&void 0!==q?q:""," ",null!==V&&void 0!==V&&V.subject_category?"(".concat(null===V||void 0===V?void 0:V.subject_category,")"):"",null!==V&&void 0!==V&&null!==(F=V.selected_batch_query)&&void 0!==F&&F.batchName?(0,u.jsxs)("span",{style:{fontWeight:"400",fontSize:"12px"},children:[" ","(",null!==(M=null===V||void 0===V||null===(R=V.selected_batch_query)||void 0===R?void 0:R.batchName)&&void 0!==M?M:"",")"]}):null,"Optional"===(null===V||void 0===V?void 0:V.subjectOptional)&&"(".concat(null===V||void 0===V?void 0:V.subjectOptional,")")]}),(0,u.jsx)("p",{children:"".concat(null!==(U=null===V||void 0===V||null===(O=V.subjectTeacherName)||void 0===O?void 0:O.staffFirstName)&&void 0!==U?U:""," ").concat(null!==(G=null===V||void 0===V||null===(H=V.subjectTeacherName)||void 0===H?void 0:H.staffMiddleName)&&void 0!==G?G:""," ").concat(null!==(B=null===V||void 0===V||null===(L=V.subjectTeacherName)||void 0===L?void 0:L.staffLastName)&&void 0!==B?B:"")})]})]})}),(0,u.jsx)(r.Z,{children:W&&(0,u.jsx)(v,{departmentModal:!!W,hideModal:()=>X(""),id:Y,did:$,cid:z,edit:W,setEdit:X,editSubject:W,isEditBy:"DEPARTMENT_HEAD",onRefetch:Q})})]})},j=e=>{let{subjects:t,carryParentState:s,isView:a,cid:n,instituteId:l,did:i,onRefetch:d}=e;return(0,u.jsx)(u.Fragment,{children:null===t||void 0===t?void 0:t.map((e=>(0,u.jsx)(m,{sub:e,carryParentState:s,isView:a,cid:n,instituteId:l,did:i,onRefetch:d},null===e||void 0===e?void 0:e._id)))})},h=e=>{var t,s,i;let{carryParentState:d,clsId:c,isView:o,instituteId:r,did:v}=e;const[m,h]=(0,a.useState)(!0),{oneClassAllSubject:x,oneClassAllSubjectRefetch:g}=(0,n.fk)({cid:c,skip:!c});return(0,a.useEffect)((()=>{var e;null!==x&&void 0!==x&&null!==(e=x.classes)&&void 0!==e&&e.subject&&h(!1)}),[null===x||void 0===x||null===(t=x.classes)||void 0===t?void 0:t.subject]),(0,a.useEffect)((()=>{c&&g()}),[c,g]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j,{subjects:null!==(s=null===x||void 0===x||null===(i=x.classes)||void 0===i?void 0:i.subject)&&void 0!==s?s:[],carryParentState:d,isView:o||"ADMINISTRATOR",cid:c,instituteId:r,did:v,onRefetch:g}),m&&(0,u.jsx)(l.Z,{})]})}},893:(e,t,s)=>{s.d(t,{Z:()=>p});var a=s(72791),n=s(16313),l=s(53967),i=s(94721),d=s(89261),c=s(62921),o=s(17758),r=s(39230),u=s(24582),v=s(98734),m=s(37570),j=s(95048),h=s(99376),x=s(51561),g=s(80184);const b=e=>{let{today:t,alreadyMark:s,allIdsArray:l,clickedIndex:i,setClickedIndex:d,idPresentArray:c,idAbsentArray:o,setIdPresentArray:b,setIdAbsentArray:p,cid:_,isDepartment:Z,className:N,setIsRefetch:y}=e;const[f,S]=a.useState(!1),[T,I]=a.useState(!1),[C]=(0,u.b6)(),[A]=(0,u.wf)(),{t:k}=(0,r.$G)(),[D,P]=(0,a.useState)(!1),E=(0,j.I0)(),[w,q]=(0,a.useState)({msg:"",run:!1});a.useEffect((()=>{null!==c&&void 0!==c&&c.length||null!==o&&void 0!==o&&o.length?S(!0):S(!1)}),[c,o]);const F=()=>{P((e=>!e))};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:"1.5rem"},children:[(0,g.jsx)("div",{className:n.Z.buttons,children:(0,g.jsx)("div",{className:n.Z.save,onClick:F,children:k("export_zip_attendance")})}),(0,g.jsx)("div",{className:n.Z.buttons,children:0!==i?f&&!Z&&(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("div",{className:n.Z.save,onClick:()=>{I((e=>!e));const e=t.split("-"),a=e[0]>9?e[0]:"0".concat(e[0]),n=e[1]>9?e[1]:"0".concat(e[1]);if(null!==s&&void 0!==s&&s._id)E(h.R.updateClassAttendance({clsId:_,ldate:"".concat(a,"/").concat(n,"/").concat(e[2]),presentStudent:null!==c&&void 0!==c&&c.length?c:[],absentStudent:null!==o&&void 0!==o&&o.length?o:[],alreadyMark:null===s||void 0===s?void 0:s._id})),A({said:null===s||void 0===s?void 0:s._id,attendanceUpdate:{date:"".concat(a,"/").concat(n,"/").concat(e[2]),present:null!==c&&void 0!==c&&c.length?c:[],absent:null!==o&&void 0!==o&&o.length?o:[]}}).then((()=>{y(!0),d(0),I((e=>!e)),b([]),p([])})).catch({});else{const t=[];null===l||void 0===l||l.map((e=>t.push(e._id)));const s=[],i=[];if(null!==c&&void 0!==c&&c.length)for(let e of t){let t=0;null!==c&&void 0!==c&&c.includes(e)||i.push(e),t+=1}else for(let e of t){let t=0;null!==o&&void 0!==o&&o.includes(e)||s.push(e),t+=1}C({cid:_,attendance:{date:"".concat(a,"/").concat(n,"/").concat(e[2]),present:null!==c&&void 0!==c&&c.length?c:s,absent:null!==o&&void 0!==o&&o.length?o:i}}).then((t=>{var l,r;"Today will be holiday Provided by department Admin or already marked attendance"===(null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.message)?q({msg:"Today will be holiday Provided by department Admin or already marked attendance",run:!0}):E(h.R.addClassAttendance({clsId:_,ldate:"".concat(a,"/").concat(n,"/").concat(e[2]),presentStudent:null!==c&&void 0!==c&&c.length?c:s,absentStudent:null!==o&&void 0!==o&&o.length?o:i,alreadyMark:null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.alreadyMark}));d(0),I((e=>!e)),b([]),p([])})).catch({})}},children:k("save")})}):""})]}),T&&(0,g.jsx)(v.Z,{}),D&&(0,g.jsx)(m.Z,{cid:_,onClose:F,className:N}),w.run&&(0,g.jsx)(x.Ch,{msg:w.msg,run:w.run,setRun:()=>q({msg:"",run:!1}),postiton:"bottom",type:"error"})]})};const p=function(e){var t,s,v,m,h,x,p,_,Z,N,y,f,S,T;let{cid:I,isDepartment:C,className:A}=e;const{calendarData:k,selectedDate:D,todayFormatted:P,switchMonth:E,monthNames:w,getNextMonth:q,getPrevMonth:F}=(0,l.Z)(),[M,R]=(0,a.useState)(P),U=M.split("-"),O=U[0]>9?U[0]:"0".concat(U[0]),G=U[1]>9?U[1]:"0".concat(U[1]),{t:H}=(0,r.$G)(),B=(0,j.v9)((e=>e.attendanceStore.classTeacher)),[L,V]=(0,a.useState)(""),[J,K]=(0,a.useState)(!1),{classAllStudent:$,classAllStudentRefetch:z}=(0,u.EY)({data:{cid:I,page:1,limit:30},skip:!I}),{classStudentCurrentAttendance:Y,classStudentCurrentAttendanceRefetch:Q}=(0,u.Px)({data:{cid:I,date:"".concat(O,"/").concat(G,"/").concat(U[2])},skip:!I});(0,a.useEffect)((()=>{if((null===B||void 0===B?void 0:B.length)>0){const e=M.split("-"),t=e[0]>9?e[0]:"0".concat(e[0]),s=e[1]>9?e[1]:"0".concat(e[1]);let a="";for(let n of B)if((null===n||void 0===n?void 0:n.ldate)==="".concat(t,"/").concat(s,"/").concat(e[2])){if((null===n||void 0===n?void 0:n.clsId)===I){a=n;break}K(!1)}else K(!1);V(a)}}),[B,M,I,J]),(0,a.useEffect)((()=>{I&&(z(),Q())}),[I,Q,z]);const W=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],X=Math.floor(k.map((function(e){return e.date})).indexOf(M)/10),[ee,te]=(0,a.useState)(X),se=10*ee,ae=Math.ceil(k.length/10),ne=k.slice(se,se+10).map(((e,t)=>(0,g.jsxs)("div",{className:e.date===M?"".concat(n.Z.date," ").concat(n.Z.clickedDate):n.Z.date,onClick:()=>R(e.date),children:[(0,g.jsx)("h6",{children:e.date.split("-")[0]}),(0,g.jsx)("p",{children:W[e.day]})]},t))),[le,ie]=(0,a.useState)(1),[de,ce]=(0,a.useState)([]),[oe,re]=(0,a.useState)([]),[ue,ve]=a.useState([]),[me,je]=a.useState([]),[he,xe]=(0,a.useState)(!1);a.useEffect((()=>{var e,t;ce(null===$||void 0===$||null===(e=$.classes)||void 0===e?void 0:e.ApproveStudent),re(null===$||void 0===$||null===(t=$.classes)||void 0===t?void 0:t.ApproveStudent)}),[null===$||void 0===$||null===(t=$.classes)||void 0===t?void 0:t.ApproveStudent]),a.useEffect((()=>{ve([]),je([])}),[le]);const ge=e=>{const t=[...ue];if(null!==t&&void 0!==t&&t.includes(e)){const s=t.indexOf(e);t.splice(s,1),ve((()=>[...t]))}else ve((t=>[...t,e]))},be=e=>{const t=[...me];if(null!==t&&void 0!==t&&t.includes(e)){const s=t.indexOf(e);t.splice(s,1),je((()=>[...t]))}else je((t=>[...t,e]))};return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:n.Z.attendence,style:{border:C?"none":"0.5px solid #cacaca"},children:[(0,g.jsxs)("div",{className:n.Z.attendencehead,children:[(0,g.jsxs)("div",{className:n.Z.attendenceBtns,children:[(0,g.jsxs)("div",{className:n.Z.changemonth,onClick:()=>xe(!he),children:[(0,g.jsxs)("h6",{children:[w[D.getMonth()]," ",D.getFullYear()]}),(0,g.jsx)("img",{alt:"not found",src:"/images/dropdown-icon.svg"}),he&&(0,g.jsx)("div",{className:n.Z.selectMonthList,children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(((e,t)=>(0,g.jsx)("div",{className:n.Z.month,onClick:()=>{E(t),xe(!1)},children:e},t)))})]}),(0,g.jsx)(b,{alreadyMark:L?{_id:null===L||void 0===L?void 0:L.alreadyMark}:null===Y||void 0===Y||null===(s=Y.classes)||void 0===s||null===(v=s.attendenceDate)||void 0===v?void 0:v[0],today:M,allIdsArray:null===$||void 0===$||null===(m=$.classes)||void 0===m?void 0:m.ApproveStudent,classStudentCurrentAttendanceRefetch:Q,clickedIndex:le,setClickedIndex:ie,idPresentArray:ue,idAbsentArray:me,setIdPresentArray:ve,setIdAbsentArray:je,cid:I,isDepartment:C,className:A,setIsRefetch:K})]}),(0,g.jsxs)("div",{className:n.Z.calender,children:[(0,g.jsx)("div",{className:n.Z.arrowbtn,onClick:()=>{ee>0?te((e=>e-1)):(te(ae-1),F())},children:(0,g.jsx)("img",{alt:"not found",src:"/images/members/left-icon.svg"})}),(0,g.jsx)("div",{className:n.Z.dates,children:ne}),(0,g.jsx)("div",{className:n.Z.arrowbtn,onClick:()=>{ee+1<ae?te((e=>e+1)):(te(0),q())},children:(0,g.jsx)("img",{alt:"not found",src:"/images/members/right-icon.svg"})})]})]}),(0,g.jsx)(i.Z,{}),(0,g.jsxs)("div",{className:n.Z.tabs,children:[(0,g.jsxs)("div",{className:0===le?"".concat(n.Z.tab," ").concat(n.Z.purple):"".concat(n.Z.tab," ").concat(n.Z.grey),onClick:()=>ie(0),children:[H("total")," ",null===$||void 0===$||null===(h=$.classes)||void 0===h||null===(x=h.ApproveStudent)||void 0===x?void 0:x.length]}),(0,g.jsxs)("div",{className:1===le?"".concat(n.Z.tab," ").concat(n.Z.tabgreen):"".concat(n.Z.tab," ").concat(n.Z.light),onClick:()=>ie(1),children:[H("present")," ",L?null!==(p=null===L||void 0===L?void 0:L.presentCount)&&void 0!==p?p:0:null===Y||void 0===Y||null===(_=Y.classes)||void 0===_||null===(Z=_.attendenceDate[0])||void 0===Z?void 0:Z.presentTotal]}),(0,g.jsxs)("div",{className:2===le?"".concat(n.Z.tab," ").concat(n.Z.red):"".concat(n.Z.tab," ").concat(n.Z.rose),onClick:()=>ie(2),children:[H("absent")," ",L?null!==(N=null===L||void 0===L?void 0:L.absentCount)&&void 0!==N?N:0:null===Y||void 0===Y||null===(y=Y.classes)||void 0===y||null===(f=y.attendenceDate[0])||void 0===f?void 0:f.absentTotal]})]}),(0,g.jsxs)("div",{className:n.Z.list,children:[0===le&&(null===$||void 0===$||null===(S=$.classes)||void 0===S||null===(T=S.ApproveStudent)||void 0===T?void 0:T.map(((e,t)=>{var s,a,l,i,c,o,r,u;return L?null!==L&&void 0!==L&&null!==(s=L.presentStudent)&&void 0!==s&&s.includes(e._id)?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.Z,{student:e,status:"present"},t),(0,g.jsx)("div",{className:n.Z.divider})]}):null!==L&&void 0!==L&&null!==(a=L.absentStudent)&&void 0!==a&&a.includes(e._id)?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.Z,{student:e,status:"absent"},t),(0,g.jsx)("div",{className:n.Z.divider})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.Z,{student:e,status:"initial"},t),(0,g.jsx)("div",{className:n.Z.divider})]}):null!==Y&&void 0!==Y&&null!==(l=Y.classes)&&void 0!==l&&null!==(i=l.attendenceDate[0])&&void 0!==i&&null!==(c=i.presentStudent)&&void 0!==c&&c.includes(e._id)?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.Z,{student:e,status:"present"},t),(0,g.jsx)("div",{className:n.Z.divider})]}):null!==Y&&void 0!==Y&&null!==(o=Y.classes)&&void 0!==o&&null!==(r=o.attendenceDate[0])&&void 0!==r&&null!==(u=r.absentStudent)&&void 0!==u&&u.includes(e._id)?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.Z,{student:e,status:"absent"},t),(0,g.jsx)("div",{className:n.Z.divider})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.Z,{student:e,status:"initial"},t),(0,g.jsx)("div",{className:n.Z.divider})]})}))),1===le&&(null===de||void 0===de?void 0:de.length)>0&&(null===de||void 0===de?void 0:de.map(((e,t)=>{var s,a,l,i;return L?null!==L&&void 0!==L&&null!==(s=L.presentStudent)&&void 0!==s&&s.includes(e._id)?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.Z,{student:e,status:"present",presentTabHandler:ge},t),(0,g.jsx)("div",{className:n.Z.divider})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.Z,{student:e,presentTabHandler:ge,status:"absent"},t),(0,g.jsx)("div",{className:n.Z.divider})]}):null!==Y&&void 0!==Y&&null!==(a=Y.classes)&&void 0!==a&&null!==(l=a.attendenceDate[0])&&void 0!==l&&null!==(i=l.presentStudent)&&void 0!==i&&i.includes(e._id)?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.Z,{student:e,status:"present",presentTabHandler:ge},t),(0,g.jsx)("div",{className:n.Z.divider})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.Z,{student:e,presentTabHandler:ge,status:"absent"},t),(0,g.jsx)("div",{className:n.Z.divider})]})}))),2===le&&(null===oe||void 0===oe?void 0:oe.length)>0&&(null===oe||void 0===oe?void 0:oe.map(((e,t)=>{var s,a,l,i;return L?null!==L&&void 0!==L&&null!==(s=L.absentStudent)&&void 0!==s&&s.includes(e._id)?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.Z,{student:e,status:"absent",absentTabHandler:be},t),(0,g.jsx)("div",{className:n.Z.divider})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.Z,{student:e,status:"present",absentTabHandler:be},t),(0,g.jsx)("div",{className:n.Z.divider})]}):null!==Y&&void 0!==Y&&null!==(a=Y.classes)&&void 0!==a&&null!==(l=a.attendenceDate[0])&&void 0!==l&&null!==(i=l.absentStudent)&&void 0!==i&&i.includes(e._id)?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.Z,{student:e,status:"absent",absentTabHandler:be},t),(0,g.jsx)("div",{className:n.Z.divider})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.Z,{student:e,status:"present",absentTabHandler:be},t),(0,g.jsx)("div",{className:n.Z.divider})]})})))]})]})})}},76452:(e,t,s)=>{s.d(t,{Z:()=>S});s(72791);var a=s(16871),n=s(43504),l=s(39230),i=s(22984),d=s(80184);const c=function(e){var t,s,c;let{carryParentState:o}=e;const{t:r}=(0,l.$G)(),u=(0,a.TH)(),v=(0,a.UO)();return(0,d.jsx)("div",{className:i.Z.mcqTop,style:{padding:"0"},children:(0,d.jsxs)("div",{className:i.Z.mcqToptabs,children:[(0,d.jsx)(n.rU,{to:"/q/".concat(v.username,"/member/department/").concat(v.deptname,"?a=class-detail"),state:o,className:"class-detail"===(null===(t=u.search)||void 0===t?void 0:t.substring(3))?"".concat(i.Z.mcqTopItem," ").concat(i.Z.active):i.Z.mcqTopItem,children:(0,d.jsx)("div",{children:r("students")})}),(0,d.jsx)(n.rU,{to:"/q/".concat(v.username,"/member/department/").concat(v.deptname,"?a=class-attendance"),state:o,className:"class-attendance"===(null===(s=u.search)||void 0===s?void 0:s.substring(3))?"".concat(i.Z.mcqTopItem," ").concat(i.Z.active):i.Z.mcqTopItem,children:(0,d.jsx)("div",{children:r("attendance")})}),(0,d.jsx)(n.rU,{to:"/q/".concat(v.username,"/member/department/").concat(v.deptname,"?a=class-subject"),state:o,className:"class-subject"===(null===(c=u.search)||void 0===c?void 0:c.substring(3))?"".concat(i.Z.mcqTopItem," ").concat(i.Z.active):i.Z.mcqTopItem,children:(0,d.jsx)("div",{children:r("subjects")})})]})})};var o=s(33148),r=s(23664),u=s(65408),v=s(36185),m=s(893),j=s(8148),h=s(11806),x=s(60726);const g=e=>{let{carryParentState:t,isDepartment:s}=e;const{t:a}=(0,l.$G)();return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:h.Z.MiddleContentLeft,style:{border:"none"},children:"CLASS_TEACHER"===s?(0,d.jsxs)("div",{className:h.Z.item,style:{paddingLeft:"2vw"},children:[(0,d.jsx)(x.Z,{carryParentState:t,activeTab:"subject-catalog",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/class/class-catalog-icon.svg",alt:"Class Catalog"}),(0,d.jsx)("p",{children:a("catalog")})]})}),(0,d.jsx)(x.Z,{carryParentState:t,activeTab:"subject-attendance",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/class/class-attendance-icon.svg",alt:"attendence"}),(0,d.jsxs)("p",{children:[" ",a("attendance")," "]})]})}),(0,d.jsx)(x.Z,{carryParentState:t,activeTab:"subject-assignment",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/subject/subject-assignment-icon.svg",alt:"assignment"}),(0,d.jsx)("p",{children:a("assigmnent")})]})}),(0,d.jsx)(x.Z,{carryParentState:t,activeTab:"subject-exam",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/department/department-examination-icon.svg",alt:"attendence"}),(0,d.jsx)("p",{children:a("examinations")})]})}),(0,d.jsx)(x.Z,{carryParentState:t,activeTab:"subject-academic",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/subject/subject-daily-update-icon.svg",alt:"student Request"}),(0,d.jsx)("p",{style:{textAlign:"center"},children:a("academics_teachings")})]})})]}):(0,d.jsxs)("div",{className:h.Z.item,style:{paddingLeft:"2vw"},children:[(0,d.jsx)(j.Z,{carryParentState:t,activeTab:"subject-catalog",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/class/class-catalog-icon.svg",alt:"Class Catalog"}),(0,d.jsx)("p",{children:a("catalog")})]})}),(0,d.jsx)(j.Z,{carryParentState:t,activeTab:"subject-attendance",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/class/class-attendance-icon.svg",alt:"attendence"}),(0,d.jsxs)("p",{children:[" ",a("attendance")," "]})]})}),(0,d.jsx)(j.Z,{carryParentState:t,activeTab:"subject-assignment",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/subject/subject-assignment-icon.svg",alt:"assignment"}),(0,d.jsx)("p",{children:a("assigmnent")})]})}),(0,d.jsx)(j.Z,{carryParentState:t,activeTab:"subject-exam",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/department/department-examination-icon.svg",alt:"attendence"}),(0,d.jsx)("p",{children:a("examinations")})]})}),(0,d.jsx)(j.Z,{carryParentState:t,activeTab:"subject-academic",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/subject/subject-daily-update-icon.svg",alt:"student Request"}),(0,d.jsx)("p",{style:{textAlign:"center"},children:a("academics_teachings")})]})})]})})})};var b=s(17121),p=s(11457),_=s(73453),Z=s(60463),N=s(81551),y=s(6763),f=s(61587);const S=e=>{var t,s,i,j,h,x,S,T,I,C,A,k,D,P,E,w,q,F,M,R,U,O,G,H,B,L;let{carryParentState:V,viewAs:J,did:K,instituteId:$}=e;const{t:z}=(0,l.$G)(),Y=(0,a.TH)(),[Q]=(0,n.lr)();return(0,d.jsx)(d.Fragment,{children:"subject-academic-detail"===Q.get("a")?(0,d.jsx)(N.Z,{}):"assignment-detail"===Q.get("a")?(0,d.jsx)(y.Z,{isDepartment:J,carryParentState:V}):"assignment-student-detail"===Q.get("a")?(0,d.jsx)(f.Z,{isDepartment:J}):(0,d.jsx)("div",{className:o.Z.departmenthead,children:(0,d.jsxs)("div",{className:o.Z.demaprtment_list,children:[(0,d.jsx)("div",{className:o.Z.with_search,style:{marginBottom:"0.7rem",alignItems:"flex-start",flexDirection:"column"},children:"subject"===(null===(t=Q.get("a"))||void 0===t?void 0:t.substring(0,7))?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("h6",{children:[z("subject_name")," : ",null!==(s=null===(i=Y.state)||void 0===i?void 0:i.subjectName)&&void 0!==s?s:""]}),(0,d.jsxs)("h6",{children:[z("subject_teacher")," : ",null!==(j=null===(h=Y.state)||void 0===h?void 0:h.subjectTeacherName)&&void 0!==j?j:""]})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("h6",{children:[z("class_name")," : ",null!==(x=null===(S=Y.state)||void 0===S?void 0:S.clsName)&&void 0!==x?x:""]}),(0,d.jsxs)("h6",{children:[z("class_teacher")," : ",null!==(T=null===(I=Y.state)||void 0===I?void 0:I.teacherName)&&void 0!==T?T:""]})]})}),"subject-detail"===Q.get("a")?(0,d.jsx)(g,{carryParentState:V,isDepartment:J}):"subject-catalog"===Q.get("a")?(0,d.jsx)(v.Z,{cid:null===(C=Y.state)||void 0===C?void 0:C.clsId,bid:null===(A=Y.state)||void 0===A?void 0:A.batchId,isDepartment:J,sid:null===(k=Y.state)||void 0===k?void 0:k.subjectId}):"subject-attendance"===Q.get("a")?(0,d.jsx)(b.Z,{sid:null===(D=Y.state)||void 0===D?void 0:D.subjectId,bid:null===(P=Y.state)||void 0===P?void 0:P.batchId,isDepartment:J,subjectName:null!==(E=null===(w=Y.state)||void 0===w?void 0:w.subjectName)&&void 0!==E?E:""}):"subject-assignment"===Q.get("a")?(0,d.jsx)(p.Z,{sid:null===(q=Y.state)||void 0===q?void 0:q.subjectId,cid:null===(F=Y.state)||void 0===F?void 0:F.clsId,carryParentState:V,bid:null===(M=Y.state)||void 0===M?void 0:M.batchId,isDepartment:J}):"subject-exam"===Q.get("a")?(0,d.jsx)(_.Z,{sid:null===(R=Y.state)||void 0===R?void 0:R.subjectId,cid:null===(U=Y.state)||void 0===U?void 0:U.clsId,isDepartment:J}):"subject-academic"===Q.get("a")?(0,d.jsx)(Z.Z,{sid:null===(O=Y.state)||void 0===O?void 0:O.subjectId,carryParentState:V,isDepartment:J}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(c,{carryParentState:V}),"class-detail"===Q.get("a")&&(0,d.jsx)(r.Z,{cid:Y.state.clsId,openAs:"SUBJECT_TEACHER",isDepartment:!0}),"class-subject"===Q.get("a")&&(0,d.jsx)(u.Z,{carryParentState:V,clsId:null===(G=Y.state)||void 0===G?void 0:G.clsId,isView:"DEPARTMENT_HEAD",instituteId:$,did:K}),"class-attendance"===Q.get("a")&&(0,d.jsx)(m.Z,{cid:null===(H=Y.state)||void 0===H?void 0:H.clsId,isDepartment:!0,className:null!==(B=null===(L=Y.state)||void 0===L?void 0:L.clsName)&&void 0!==B?B:""})]})]})})})}},60463:(e,t,s)=>{s.d(t,{Z:()=>p});var a=s(72791),n=s(83401),l=s(39230),i=s(98094),d=s(99532),c=s(23441),o=s(65543),r=s(40444),u=s(34219),v=s(11105),m=s(80184);const j=e=>{var t;let{sid:s,reftechStatus:n,setReftechStatus:l,isDepartment:i}=e;const[j,h]=(0,a.useState)(!0),[x,g]=(0,a.useState)(1),[b,p]=(0,c.YD)(),[_,Z]=(0,a.useState)([]),[N,y]=(0,a.useState)(!0),{scrollToTop:f}=(0,o.u)(),{getAllDailySubject:S,getAllDailySubjectRefetch:T}=(0,r.RX)({data:{sid:s,page:n?1:x,limit:10},skip:!s});(0,a.useEffect)((()=>{n&&(g((e=>1)),l(!1),T())}),[n]),(0,a.useEffect)((()=>{s&&(y(!0),T())}),[s,x,T]),(0,a.useEffect)((()=>{f()}),[f]),(0,a.useEffect)((()=>{p&&j&&g((e=>e+1))}),[p,j]),(0,a.useEffect)((()=>{var e,t;null!==S&&void 0!==S&&S.dailyUpdate?(Z(1===x?null===S||void 0===S?void 0:S.dailyUpdate:e=>[...new Set([...e,...null===S||void 0===S?void 0:S.dailyUpdate].map(JSON.stringify))].map(JSON.parse)),y(!1)):0===(null===S||void 0===S||null===(e=S.dailyUpdate)||void 0===e?void 0:e.length)&&y(!1),10===(null===S||void 0===S||null===(t=S.dailyUpdate)||void 0===t?void 0:t.length)?h(!0):h(!1)}),[null===S||void 0===S?void 0:S.dailyUpdate]);const I=()=>{g((e=>1)),y(!0),T()};return(0,m.jsxs)(m.Fragment,{children:[null===_||void 0===_?void 0:_.map(((e,t)=>(null===_||void 0===_?void 0:_.length)===t+1?(0,m.jsx)("div",{ref:b,children:(0,m.jsx)(d.Z,{daily:e,sid:s,onParentRefetch:I,isView:i?"STUDENT":""})},null===e||void 0===e?void 0:e._id):(0,m.jsx)(d.Z,{daily:e,sid:s,onParentRefetch:I,isView:i?"STUDENT":""},null===e||void 0===e?void 0:e._id))),!N&&!(null!==S&&void 0!==S&&null!==(t=S.dailyUpdate)&&void 0!==t&&t.length)&&(0,m.jsx)(u.Z,{customStyleContainer:{marginTop:"9rem"},title:"No academics found yet."}),N&&(0,m.jsx)(v.Z,{status:"white"})]})};var h=s(10515),x=s(4213),g=s(16871),b=s(43504);const p=e=>{let{sid:t,carryParentState:s,isDepartment:d}=e;const{t:c}=(0,l.$G)(),o=(0,g.UO)(),[r,u]=(0,a.useState)(!1),[v,p]=(0,a.useState)(!1),[_,Z]=(0,a.useState)(!1),N=()=>{u((e=>!e))};return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:n.Z.subject_academic_container,children:[(0,m.jsxs)("div",{className:n.Z.subject_academic_title,children:[(0,m.jsx)("h6",{children:c("academics_teachings")}),(0,m.jsx)("div",{className:n.Z.subject_academic_link,children:"CLASS_TEACHER"===d?(0,m.jsx)(b.rU,{to:"/q/".concat(o.username,"/member/class/").concat(o.cname,"?a=subject-academic-detail"),state:{...s,subjectId:t,isView:"DEPARTMENT_HEAD"},children:(0,m.jsx)("h6",{className:n.Z.add_record_lecture,style:{margin:"0"},children:c("view_academic_detail")})}):"DEPARTMENT_HEAD"===d?(0,m.jsx)(b.rU,{to:"/q/".concat(o.username,"/member/department/").concat(o.deptname,"?a=subject-academic-detail"),state:{...s,subjectId:t,isView:"DEPARTMENT_HEAD"},children:(0,m.jsx)("h6",{className:n.Z.add_record_lecture,style:{margin:"0"},children:c("view_academic_detail")})}):(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(b.rU,{to:"/q/".concat(o.username,"/member/subject/").concat(o.sname,"?a=subject-academic"),state:{...s,subjectId:t,isView:d?"DEPARTMENT_HEAD":"SUBJECT_TEACHER",isSubType:"SUBJECT_TEACHER_INSTITUTE"},children:(0,m.jsx)("h6",{className:n.Z.add_record_lecture,style:{margin:"0"},children:c("view_academic_detail")})})})})]}),(0,m.jsx)(i.Z,{customStyle:{width:"100%",marginTop:"0.7rem",marginBottom:"0.7rem"}}),d?null:(0,m.jsx)("div",{className:n.Z.record_lecture,children:(0,m.jsx)("h6",{className:n.Z.add_record_lecture,onClick:N,children:c("record_lecture_teachings")})}),r&&(0,m.jsx)(h.Z,{onClose:N,sid:t,onRefetch:()=>{Z(!0)}}),v&&(0,m.jsx)(x.Z,{onClose:()=>{p((e=>!e))},sid:t}),(0,m.jsx)(j,{sid:t,reftechStatus:_,setReftechStatus:Z,isDepartment:d})]})})}},99532:(e,t,s)=>{s.d(t,{Z:()=>j});var a=s(72791),n=s(83401),l=s(72426),i=s.n(l),d=s(39230),c=s(69721),o=s(10307),r=s(80184);const u=e=>{var t,s,a,l,u,v,m;let{isView:j,updateDescription:h,upadateImage:x,createdAt:g,subject:b}=e;const{t:p}=(0,d.$G)();return(0,r.jsxs)("div",{className:n.Z.aditional_info_container,children:["STUDENT"===j?(0,r.jsxs)("div",{className:n.Z.aditional_info_dates,children:[(0,r.jsx)("h5",{children:null!==(t=null===b||void 0===b?void 0:b.subjectName)&&void 0!==t?t:""}),(0,r.jsx)("h6",{children:"".concat(null!==(s=null===b||void 0===b||null===(a=b.subjectTeacherName)||void 0===a?void 0:a.staffFirstName)&&void 0!==s?s:""," ").concat(null!==(l=null===b||void 0===b||null===(u=b.subjectTeacherName)||void 0===u?void 0:u.staffMiddleName)&&void 0!==l?l:""," ").concat(null!==(v=null===b||void 0===b||null===(m=b.subjectTeacherName)||void 0===m?void 0:m.staffLastName)&&void 0!==v?v:"")})]}):null,h||(null===x||void 0===x?void 0:x.length)>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h6",{children:p("additional_info")}),(0,r.jsx)("p",{children:h}),(null===x||void 0===x?void 0:x.length)>0?(0,r.jsx)("div",{className:n.Z.aditional_info_images,children:null===x||void 0===x?void 0:x.map((e=>(0,o.Y)(null===e||void 0===e?void 0:e.documentKey)?(0,r.jsx)("a",{title:"view File",href:"".concat(c.r3,"/").concat(null===e||void 0===e?void 0:e.documentKey),target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,r.jsx)("img",{src:"".concat(c.yI,"/").concat(null===e||void 0===e?void 0:e.documentKey),alt:"files"},null===e||void 0===e?void 0:e.documentKey)}):null))}):null]}):null,(0,r.jsxs)("div",{className:n.Z.aditional_info_dates,children:[(0,r.jsx)("p",{children:i()(g).format("DD MMM yyyy")}),(0,r.jsx)("p",{children:i()(g).format("LT")})]})]})};var v=s(61292),m=s(10515);const j=e=>{var t;let{daily:s,sid:l,onParentRefetch:c,isView:o}=e;const{t:j}=(0,d.$G)(),[h,x]=(0,a.useState)("");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:n.Z.academic_card_container,children:[(0,r.jsxs)("div",{className:n.Z.academic_card_top,style:{justifyContent:"space-between"},children:[(0,r.jsxs)("div",{className:n.Z.academic_card_top_text,children:[(0,r.jsx)("img",{src:"/images/member_tab/subject/subject-topic-icon.svg",alt:"topic icon"}),(0,r.jsxs)("h6",{children:[i()(null===s||void 0===s?void 0:s.date).format("Do MMMM, yyyy"),": Topics Covered"]})]}),"STUDENT"===o?null:(0,r.jsxs)("h6",{onClick:()=>x(s),children:["(",j("edit_"),")"]})]}),null===s||void 0===s||null===(t=s.daily_topic)||void 0===t?void 0:t.map((e=>(0,r.jsx)(v.Z,{topic:null===e||void 0===e?void 0:e.topic,topicType:null===e||void 0===e?void 0:e.status,topicCurrentStatus:null===e||void 0===e?void 0:e.current_status,isView:"DAILY"},null===e||void 0===e?void 0:e._id))),(0,r.jsx)(u,{updateDescription:null===s||void 0===s?void 0:s.updateDescription,upadateImage:null===s||void 0===s?void 0:s.upadateImage,createdAt:null===s||void 0===s?void 0:s.createdAt,isView:o,subject:null===s||void 0===s?void 0:s.subject})]}),h&&(0,r.jsx)(m.Z,{onClose:()=>x(""),sid:l,onRefetch:c,dailyMenu:h})]})}},63162:(e,t,s)=>{s.d(t,{Z:()=>o});var a=s(39230),n=s(51416),l=s(43504),i=s(72791),d=s(80184);const c=e=>{let{tab:t,isActive:s,isLink:i,parentState:c,onAction:o,url:r}=e;const{t:u}=(0,a.$G)();return i?(0,d.jsx)(l.rU,{className:s?n.Z.horizontal_tab_card_active:n.Z.horizontal_tab_card,to:r,state:c,children:(0,d.jsx)("h6",{children:u(null===t||void 0===t?void 0:t.label)})}):(0,d.jsx)("div",{className:s?n.Z.horizontal_tab_card_active:n.Z.horizontal_tab_card,onClick:()=>{o(null===t||void 0===t?void 0:t.id)},children:(0,d.jsx)("h6",{children:u(null===t||void 0===t?void 0:t.label)})})},o=(0,i.memo)(c)},98967:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(51416),n=s(80184);const l=e=>{let{children:t}=e;return(0,n.jsx)("div",{className:a.Z.horizontal_tab_wrapper,children:t})}},95078:(e,t,s)=>{s.d(t,{Z:()=>g});var a=s(72791),n=s(83638),l=s(92673),i=s(38857),d=s(21348),c=s(98684),o=s(90904),r=s(93638),u=s(15427),v=s(55336),m=s(16925),j=s(39230),h=s(80184);const x=e=>{let{onParentClose:t,state:s,onClose:n,mid:l,flow:x,onNavigate:g,stid:b}=e;const{t:p}=(0,j.$G)(),[_,Z]=(0,a.useState)(!1),[N]=(0,u.sQ)();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(i.Z,{onClose:n,children:(0,h.jsxs)("div",{className:m.Z.modal_container,children:[(0,h.jsx)(d.Z,{children:(0,h.jsxs)("div",{className:m.Z.modal_container_outer_header,children:[(0,h.jsx)("div",{className:m.Z.modal_container_header,children:(0,h.jsx)("h6",{children:p("confirm_to_request_stock")})}),(0,h.jsx)("img",{src:"".concat(c.J7,"/close.svg"),alt:"close icon",onClick:n})]})}),(0,h.jsx)(o.Z,{customStyleBorder:{marginBottom:"0"}}),(0,h.jsx)(d.Z,{customStyle:{paddingBottom:"1rem"},children:(0,h.jsx)(r.Z,{label:"request_stock",onAction:()=>{var e;l&&null!==s&&void 0!==s&&null!==(e=s.arr)&&void 0!==e&&e.length&&x&&b&&(Z((e=>!e)),N({stid:b,bodyParameter:{arr:null===s||void 0===s?void 0:s.arr,flow:x,request_by:l}}).then((()=>{Z((e=>!e)),g(),t()})).catch({}))}})})]})}),_&&(0,h.jsx)(v.Z,{})]})},g=e=>{let{onClose:t,onNavigate:s,mid:i,stid:d,flow:c}=e;const[o,r]=(0,a.useState)(1),[u,v]=(0,a.useState)({arr:[],goods:[],goodsId:[]});return(0,h.jsx)(h.Fragment,{children:1===o?(0,h.jsx)(n.Z,{onClose:t,stid:d,onGoodsSelect:e=>{v((t=>({...t,goods:null===e||void 0===e?void 0:e.goods,goodsId:null===e||void 0===e?void 0:e.goodsId}))),r(2)},dataState:u}):2===o?(0,h.jsx)(l.Z,{onClose:()=>r(1),state:u,setStep:()=>r(3),setState:v}):3===o?(0,h.jsx)(x,{onClose:()=>r(2),state:u,onParentClose:t,stid:d,onNavigate:s,flow:c,mid:i}):null})}},98148:(e,t,s)=>{s.d(t,{Z:()=>T});var a=s(72791),n=s(38857),l=s(21348),i=s(98684),d=s(90904),c=s(93638),o=s(15427),r=s(55336),u=s(16925),v=s(39230),m=s(80184);const j=e=>{let{onParentClose:t,state:s,onClose:j,mid:h,flow:x,onNavigate:g,stid:b}=e;const{t:p}=(0,v.$G)(),[_,Z]=(0,a.useState)(!1),[N]=(0,o.uq)();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n.Z,{onClose:j,children:(0,m.jsxs)("div",{className:u.Z.modal_container,children:[(0,m.jsx)(l.Z,{children:(0,m.jsxs)("div",{className:u.Z.modal_container_outer_header,children:[(0,m.jsx)("div",{className:u.Z.modal_container_header,children:(0,m.jsx)("h6",{children:p("confirm_to_return_stock")})}),(0,m.jsx)("img",{src:"".concat(i.J7,"/close.svg"),alt:"close icon",onClick:j})]})}),(0,m.jsx)(d.Z,{customStyleBorder:{marginBottom:"0"}}),(0,m.jsx)(l.Z,{customStyle:{paddingBottom:"1rem"},children:(0,m.jsx)(c.Z,{label:"return_stock",onAction:()=>{var e;h&&null!==s&&void 0!==s&&null!==(e=s.arr)&&void 0!==e&&e.length&&x&&b&&(Z((e=>!e)),N({stid:b,bodyParameter:{arr:null===s||void 0===s?void 0:s.arr,flow:x,request_by:h}}).then((()=>{Z((e=>!e)),g(),t()})).catch({}))}})})]})}),_&&(0,m.jsx)(r.Z,{})]})};var h=s(1095),x=s(2034);const g=e=>{var t,s,a;let{goods:n,onSelectGoods:l,selectedId:d}=e;const{t:c}=(0,v.$G)();return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{className:null!==d&&void 0!==d&&d.includes(null===n||void 0===n?void 0:n._id)?"".concat(x.Z.smc_card," ").concat(x.Z.smc_card_active):x.Z.smc_card,onClick:()=>{l(n)},children:(0,m.jsxs)("div",{className:x.Z.smc_card_contatiner,children:[(0,m.jsx)("img",{src:null!==n&&void 0!==n&&n.good_icon?"".concat(h.yI,"/").concat(null===n||void 0===n?void 0:n.good_icon):"".concat(i.J7,"/category.svg"),alt:"categor good_icon"}),(0,m.jsxs)("div",{className:x.Z.smc_card_contatiner_inner,children:[(0,m.jsxs)("h6",{children:[c("name"),": ",null!==(t=null===n||void 0===n?void 0:n.goods_name)&&void 0!==t?t:""]}),(0,m.jsxs)("p",{children:[c("remaining_quantity")," ",": "," ",null!==(s=null===n||void 0===n?void 0:n.goods_volume)&&void 0!==s?s:""]}),(0,m.jsxs)("p",{children:[c("price_per_unit")," ",": "," ",null!==(a=null===n||void 0===n?void 0:n.goods_price)&&void 0!==a?a:""]})]})]})})})};var b=s(23441),p=s(91427),_=s(57588),Z=s(1669),N=s(2651),y=s(49806);const f=e=>{var t,s,u,j;let{onClose:h,stid:x,dataState:f,onGoodsSelect:S}=e;const{t:T}=(0,v.$G)(),[I,C]=(0,a.useState)(""),[A,k]=(0,a.useState)(1),[D,P]=(0,a.useState)(!0),[E,w]=(0,b.YD)({skip:I}),[q,F]=(0,a.useState)({goods:[],goodsId:[]}),{storeAllGoodsList:M,storeAllGoodsListLoading:R}=(0,o.ok)({data:{stid:x,page:A,limit:10,search:I},skip:!x});(0,a.useEffect)((()=>{w&&D&&k((e=>e+1))}),[w,D]),(0,a.useEffect)((()=>{var e;if(null!==M&&void 0!==M&&null!==(e=M.list)&&void 0!==e&&e.length){var t;let e=(0,p.f)(null===M||void 0===M||null===(t=M.list)||void 0===t?void 0:t.length);P((()=>e))}}),[null===M||void 0===M||null===(t=M.list)||void 0===t?void 0:t.length]),(0,a.useEffect)((()=>{var e;null!==f&&void 0!==f&&null!==(e=f.goodsId)&&void 0!==e&&e.length&&F({goods:null===f||void 0===f?void 0:f.goods,goodsId:null===f||void 0===f?void 0:f.goodsId})}),[null===f||void 0===f?void 0:f.goodsId]);const U=(0,a.useCallback)((0,_.J)((e=>{k((()=>1)),C(e)}),1500),[]),O=e=>{var t;null!==(t=q.goodsId)&&void 0!==t&&t.includes(null===e||void 0===e?void 0:e._id)?F((t=>{var s,a;return{...t,goods:null===t||void 0===t||null===(s=t.goods)||void 0===s?void 0:s.filter((t=>(null===t||void 0===t?void 0:t._id)!==(null===e||void 0===e?void 0:e._id))),goodsId:null===t||void 0===t||null===(a=t.goodsId)||void 0===a?void 0:a.filter((t=>t!==(null===e||void 0===e?void 0:e._id)))}})):F((t=>({...t,goods:[...null===t||void 0===t?void 0:t.goods,e],goodsId:[...null===t||void 0===t?void 0:t.goodsId,null===e||void 0===e?void 0:e._id]})))};return(0,m.jsx)(n.Z,{onClose:h,children:(0,m.jsxs)("div",{className:y.Z.modal_container,children:[(0,m.jsx)(l.Z,{children:(0,m.jsxs)("div",{className:y.Z.modal_container_outer_header,children:[(0,m.jsx)("div",{className:y.Z.modal_container_header,children:(0,m.jsx)("h6",{children:T("select_goods")})}),(0,m.jsxs)("div",{className:y.Z.modal_container_btn_container,children:[(0,m.jsx)(c.Z,{label:"next",onAction:()=>{S(q)},customStyle:{margin:"0",padding:"0.1rem 0.5rem"}}),(0,m.jsx)("img",{src:"".concat(i.J7,"/close.svg"),alt:"close icon",onClick:h})]})]})}),(0,m.jsx)(d.Z,{customStyleBorder:{marginBottom:"0"}}),(0,m.jsxs)(l.Z,{customStyle:{paddingBottom:"1rem"},children:[(0,m.jsxs)("div",{className:y.Z.assign_search_container,style:{marginBottom:"1rem"},children:[(0,m.jsx)("input",{type:"text",placeholder:T("search"),className:y.Z.assign_search_input,onChange:e=>{e.target.value?U(e.target.value):(k((()=>1)),C(""))},style:{width:"100%"}}),(0,m.jsx)("img",{src:"".concat(i.dB,"/navbar-search.svg"),alt:"search icon"})]}),null===M||void 0===M||null===(s=M.list)||void 0===s?void 0:s.map(((e,t)=>{var s;return(null===M||void 0===M||null===(s=M.list)||void 0===s?void 0:s.length)===t+1?(0,m.jsx)("div",{ref:E,children:(0,m.jsx)(g,{goods:e,onSelectGoods:O,selectedId:q.goodsId})},null===e||void 0===e?void 0:e._id):(0,m.jsx)(g,{goods:e,onSelectGoods:O,selectedId:q.goodsId},null===e||void 0===e?void 0:e._id)})),R?I?(0,m.jsx)(r.Z,{}):(0,m.jsx)(Z.Z,{}):I?0===(null===M||void 0===M||null===(u=M.list)||void 0===u?void 0:u.length)&&(0,m.jsx)(N.Z,{title:"No goods found related this search.",customStyleContainer:{marginTop:"1.5rem"}}):0===(null===M||void 0===M||null===(j=M.list)||void 0===j?void 0:j.length)&&(0,m.jsx)(N.Z,{title:"No goods.",customStyleContainer:{marginTop:"1.5rem"}})]})]})})};var S=s(92673);const T=e=>{let{onClose:t,onNavigate:s,mid:n,stid:l,flow:i}=e;const[d,c]=(0,a.useState)(1),[o,r]=(0,a.useState)({arr:[],goods:[],goodsId:[]});return(0,m.jsx)(m.Fragment,{children:1===d?(0,m.jsx)(f,{onClose:t,stid:l,onGoodsSelect:e=>{r((t=>({...t,goods:null===e||void 0===e?void 0:e.goods,goodsId:null===e||void 0===e?void 0:e.goodsId}))),c(2)},dataState:o}):2===d?(0,m.jsx)(S.Z,{onClose:()=>c(1),state:o,setStep:()=>c(3),setState:r}):3===d?(0,m.jsx)(j,{onClose:()=>c(2),state:o,onParentClose:t,stid:l,onNavigate:s,flow:i,mid:n}):null})}},70179:(e,t,s)=>{s.d(t,{Z:()=>c});var a=s(43504),n=s(90904),l=s(98967),i=s(63162),d=s(80184);const c=e=>{let{parentState:t,inititalUrl:s}=e;const[c]=(0,a.lr)();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.Z,{children:o.map((e=>{var a;return(0,d.jsx)(i.Z,{tab:e,isLink:!0,isActive:null===(a=e.groupIs)||void 0===a?void 0:a.includes(c.get("n")),parentState:t,url:"".concat(s).concat(e.urlKey)},null===e||void 0===e?void 0:e.id)}))}),(0,d.jsx)(n.Z,{customStyleBorder:{marginBlock:"0"}})]})},o=[{label:"register",id:"register",urlKey:"",groupIs:["",null]},{label:"request",id:"request",urlKey:"&n=request",groupIs:["request"]},{label:"issue",id:"issue",urlKey:"&n=issue",groupIs:["issue"]},{label:"stocktake",id:"stocktake",urlKey:"&n=stocktake",groupIs:["stocktake"]},{label:"consumption",id:"consumption",urlKey:"&n=consumption",groupIs:["consumption"]},{label:"return",id:"return",urlKey:"&n=return",groupIs:["return"]},{label:"maintenance",id:"maintenance",urlKey:"&n=maintenance",groupIs:["maintenance"]}]},22984:(e,t,s)=>{s.d(t,{Z:()=>a});const a={studentMCQ:"Tabs_studentMCQ__JqqjO",mcqToptabs:"Tabs_mcqToptabs__YfEJB",mcqTop:"Tabs_mcqTop__eI5Gu",mcqTopItem:"Tabs_mcqTopItem__KkV+Q",active:"Tabs_active__j6mN9"}}}]);
//# sourceMappingURL=65191.dcbd9d6b.chunk.js.map