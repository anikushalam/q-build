"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[9236],{69236:function(t,n,e){e.r(n),e.d(n,{default:function(){return I}});var i=e(29439),s=e(72791),a="Complaints_complaints__zSm-J",o="Complaints_complaintDetail__FqKdQ",l="Complaints_complaintList__2pa3v",c={complaintList:"ComplaintList_complaintList__AncqY",listcontainer:"ComplaintList_listcontainer__NnO-R",heading:"ComplaintList_heading__dffHT",listHead:"ComplaintList_listHead__ox7DD",tabs:"ComplaintList_tabs__f3YJH",item:"ComplaintList_item__Tw7T-",text:"ComplaintList_text__MQbnE",to:"ComplaintList_to__IEMdc",datetime:"ComplaintList_datetime__PK0+5",solved:"ComplaintList_solved__LTgHh",unsolved:"ComplaintList_unsolved__yztBr",dots:"ComplaintList_dots__XPKxQ",button:"ComplaintList_button__C1xWG",menu:"ComplaintList_menu__0wYna",menuItem:"ComplaintList_menuItem__vh9c6"},m=e(72426),d=e.n(m),p=e(39230),r=e(64540),u=e(80184);function _(t){var n=t.open,e=t.onClose,s=t.cid,a=t.refetch,o=(0,p.$G)().t,l=(0,r.bd)(),m=(0,i.Z)(l,1)[0];if(!n)return null;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{onClick:e,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10}}),(0,u.jsx)("div",{className:c.menu,style:{position:"absolute",zIndex:10},children:(0,u.jsx)("div",{className:c.menuItem,onClick:function(){m(s).then((function(t){a(),e()})).catch({})},children:o("remove_complaint")})})]})}function v(t){var n=t.setShowDetails,e=t.complaint,a=t.setCDetails,o=t.refetch,l=(0,s.useState)(!1),m=(0,i.Z)(l,2),r=m[0],v=m[1],h=(0,p.$G)().t;return(0,u.jsxs)("div",{className:c.item,onClick:function(){n(!0),a(e)},children:[(0,u.jsx)("img",{src:"/images/members/staff-complain-icon.svg",alt:""}),(0,u.jsxs)("div",{className:c.text,children:[(0,u.jsxs)("h6",{children:[null===e||void 0===e?void 0:e.complaintType," Complaint"]}),(0,u.jsxs)("div",{className:c.datetime,children:[(0,u.jsxs)("p",{children:[" ",h("date"),": ",d()(null===e||void 0===e?void 0:e.createdAt).format("LL")]}),"Unsolved"===(null===e||void 0===e?void 0:e.complaintStatus)?(0,u.jsx)("p",{className:c.unsolved,children:null===e||void 0===e?void 0:e.complaintStatus}):(0,u.jsx)("p",{className:c.solved,children:null===e||void 0===e?void 0:e.complaintStatus})]})]}),(0,u.jsx)("img",{className:c.dots,src:"/images/menu-dots-icon.svg",alt:"",onClick:function(){return v(!0)}}),r&&(0,u.jsx)(_,{open:r,onClose:function(){return v(!1)},cid:null===e||void 0===e?void 0:e._id,refetch:o})]})}var h=function(t){var n=t.setShowDetails,e=t.complaints,i=t.setCDetails,s=t.refetch,a=(0,p.$G)().t;return(0,u.jsxs)("div",{className:c.complaintList,children:[(0,u.jsx)("h6",{className:c.heading,children:a("complaint_list")}),(0,u.jsx)("div",{className:c.listcontainer,children:null===e||void 0===e?void 0:e.map((function(t,e){return(0,u.jsx)(v,{complaint:t,setShowDetails:n,setCDetails:i,refetch:s},e)}))}),(0,u.jsx)("div",{className:c.button,onClick:function(){return n(!1)},children:a("make_new_complaint")})]})},x="ComplaintDetails_complaintDetails__-WhJ2",C="ComplaintDetails_detailsheader__W0KOL",f="ComplaintDetails_detailsbody__YEngl",j="ComplaintDetails_footer__TiXAq",N="ComplaintDetails_red__oLLLm";var b=function(t){var n=t.cDetail,e=(0,p.$G)().t;return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:x,children:[(0,u.jsx)("div",{className:C,children:e("complaint")}),(0,u.jsx)("hr",{}),(0,u.jsxs)("div",{className:f,children:[(0,u.jsxs)("h6",{children:[null===n||void 0===n?void 0:n.complaintType,e("complaint")]}),(0,u.jsx)("p",{children:null===n||void 0===n?void 0:n.complaintContent}),(0,u.jsx)("div",{className:j,children:(0,u.jsx)("h6",{className:N,children:null===n||void 0===n?void 0:n.complaintStatus})})]})]})})},y=e(1413),w={newComplain:"NewComplain_newComplain__bmRXA",newComplainheader:"NewComplain_newComplainheader__lTktp",input:"NewComplain_input__2cFBM",down:"NewComplain_down__FeNuz",options:"NewComplain_options__Ql4m1",option:"NewComplain_option__bWUTa",postTextarea:"NewComplain_postTextarea__3iUB6",submitbtn:"NewComplain_submitbtn__y5E6Z",disablebtn:"NewComplain_disablebtn__bOFPG"},g=e(51561),L=(e(68825),e(98734)),D={position:"relative",zIndex:1},k={position:"absolute",left:"14.5vw",top:"9.5vw",zIndex:10},S={position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10};function Z(t){var n=t.setComplaintData,e=t.open,i=t.onClose,s=t.complaintData,a=t.setIsOpen,o=(0,p.$G)().t;return e?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{onClick:i,style:S}),(0,u.jsxs)("div",{style:k,className:w.options,children:[(0,u.jsx)("div",{className:w.option,onClick:function(){n((0,y.Z)((0,y.Z)({},s),{},{type:"Open"})),a(!1)},children:o("open_complaint")}),(0,u.jsx)("div",{className:w.option,onClick:function(){n((0,y.Z)((0,y.Z)({},s),{},{type:"Anonymous"})),a(!1)},children:o("anonymous_complaint")})]})]}):null}var T=function(t){var n=t.staffId,e=t.toast,a=t.setToast,o=(0,s.useState)(!1),l=(0,i.Z)(o,2),c=l[0],m=l[1],d=(0,s.useState)(!1),_=(0,i.Z)(d,2),v=_[0],h=_[1],x=(0,r.N)(),C=(0,i.Z)(x,1)[0],f=(0,p.$G)().t,j=(0,s.useState)(""),N=(0,i.Z)(j,2),b=N[0],k=N[1],S=(0,s.useState)({type:"",content:""}),T=(0,i.Z)(S,2),I=T[0],q=T[1],z=document.querySelector("textarea");return null===z||void 0===z||z.addEventListener("keyup",(function(t){z.style.height="auto";var n=t.target.scrollHeight;z.style.height="".concat(n,"px")})),(0,u.jsxs)("div",{className:w.newComplain,children:[(0,u.jsx)(g.qu,{msg:b,run:e,setRun:a}),(0,u.jsx)("h6",{className:w.newComplainheader,children:f("make_complaint")}),(0,u.jsx)("div",{className:w.input,style:D,children:(0,u.jsxs)("div",{children:["Open"===(null===I||void 0===I?void 0:I.type)?(0,u.jsx)("h6",{onClick:function(){return m(!0)},children:f("open_complaint")}):"Anonymous"===(null===I||void 0===I?void 0:I.type)?(0,u.jsx)("h6",{onClick:function(){return m(!0)},children:f("anonymous_complaint")}):(0,u.jsx)("h6",{onClick:function(){return m(!0)},children:f("comp_type")}),(0,u.jsx)("img",{className:w.down,src:"/images/downn-icon.svg",alt:""})]})}),(0,u.jsx)(Z,{open:c,onClose:function(){return m(!1)},setComplaintData:q,complaintData:I,setIsOpen:m}),(0,u.jsx)("textarea",{className:w.postTextarea,type:"text",required:!0,name:"CreateInsPost",placeholder:f("comp_des"),value:I.content,onChange:function(t){return q((0,y.Z)((0,y.Z)({},I),{},{content:t.target.value}))}}),I.type&&I.content?(0,u.jsx)("div",{className:w.submitbtn,onClick:function(){h((function(t){return!t}));var t=new FormData;t.append("complaintType",I.type),t.append("complaintContent",I.content),C({sid:n&&n,complaintData:{complaintType:I.type,complaintContent:I.content}}).then((function(t){t.data.message&&(k("Successfully Submitted"),a(!0),q((0,y.Z)((0,y.Z)({},I),{},{content:"",type:""})),h((function(t){return!t})))}))},children:f("send_complaint")}):(0,u.jsx)("div",{className:"".concat(w.submitbtn," ").concat(w.disablebtn),children:f("send_complaint")}),v&&(0,u.jsx)(L.Z,{})]})};var I=function(t){var n=t.staffId,e=(0,s.useState)(!1),c=(0,i.Z)(e,2),m=c[0],d=c[1],p=(0,s.useState)(),_=(0,i.Z)(p,2),v=_[0],x=_[1],C=(0,s.useState)(!1),f=(0,i.Z)(C,2),j=f[0],N=f[1],y=(0,r.AO)(n,{skip:!n}),w=y.data,g=y.refetch;return(0,s.useEffect)((function(){g()}),[j]),(0,u.jsxs)("div",{className:a,children:[(0,u.jsxs)("div",{className:o,children:[m&&(0,u.jsx)(b,{cDetail:v}),!m&&(0,u.jsx)(T,{staffId:n,toast:j,setToast:N})]}),(0,u.jsx)("div",{className:l,children:(0,u.jsx)(h,{setShowDetails:d,complaints:null===w||void 0===w?void 0:w.complaints,setCDetails:x,refetch:g})})]})}}}]);
//# sourceMappingURL=9236.0c29f2e8.chunk.js.map