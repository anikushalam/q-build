(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[61695],{65408:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j});var s=n(72791),a=n(33992),i=n(11105),l=n(33148),o=n(69721),c=n(74801),d=n(8148),r=n(35395),u=n(80184);const v=s.lazy((()=>Promise.all([n.e(6307),n.e(85054),n.e(82555)]).then(n.bind(n,85054)))),m=e=>{var t,n,a,i,m,h,j,p,b,f,g,x,y,_,Z,N,S,T,I,C,k,A,w,P,E,O,D,F,R,M,q,U,L,B,H,V;let{sub:G,carryParentState:J,isView:$,did:K,cid:z,instituteId:Y,onRefetch:W}=e;const[Q,X]=(0,s.useState)("");return(0,u.jsxs)(u.Fragment,{children:["DEPARTMENT_HEAD"===$?(0,u.jsx)(d.Z,{carryParentState:{...J,subjectId:null===G||void 0===G?void 0:G._id,subjectName:"".concat(null===G||void 0===G?void 0:G.subjectName," ").concat(null!==G&&void 0!==G&&G.subject_category?"(".concat(null===G||void 0===G?void 0:G.subject_category,")"):""," ").concat(null!==G&&void 0!==G&&null!==(t=G.selected_batch_query)&&void 0!==t&&t.batchName?"(".concat(null===G||void 0===G||null===(n=G.selected_batch_query)||void 0===n?void 0:n.batchName,")"):""," ").concat("Optional"===(null===G||void 0===G?void 0:G.subjectOptional)?"(".concat(null===G||void 0===G?void 0:G.subjectOptional,")"):""),batchId:null===G||void 0===G||null===(a=G.selected_batch_query)||void 0===a?void 0:a._id,subjectTeacherName:"".concat(null!==(i=null===G||void 0===G||null===(m=G.subjectTeacherName)||void 0===m?void 0:m.staffFirstName)&&void 0!==i?i:""," ").concat(null!==(h=null===G||void 0===G||null===(j=G.subjectTeacherName)||void 0===j?void 0:j.staffMiddleName)&&void 0!==h?h:""," ").concat(null!==(p=null===G||void 0===G||null===(b=G.subjectTeacherName)||void 0===b?void 0:b.staffLastName)&&void 0!==p?p:"")},activeTab:"subject-detail",children:(0,u.jsxs)("div",{className:l.Z.class_container,style:{justifyContent:"space-between"},children:[(0,u.jsxs)("div",{className:l.Z.moderator_container_title,children:[(0,u.jsx)("img",{className:l.Z.oneRowImage,src:null!==G&&void 0!==G&&null!==(f=G.subjectTeacherName)&&void 0!==f&&f.staffProfilePhoto?"".concat(o.yI,"/").concat(null===G||void 0===G||null===(g=G.subjectTeacherName)||void 0===g?void 0:g.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"staff avatr"}),(0,u.jsxs)("div",{className:l.Z.class_container_text,children:[(0,u.jsxs)("h6",{children:[null!==(x=null===G||void 0===G?void 0:G.subjectName)&&void 0!==x?x:""," ",null!==G&&void 0!==G&&G.subject_category?"(".concat(null===G||void 0===G?void 0:G.subject_category,")"):"",null!==G&&void 0!==G&&null!==(y=G.selected_batch_query)&&void 0!==y&&y.batchName?(0,u.jsxs)("span",{style:{fontWeight:"400",fontSize:"12px"},children:[" ","(",null!==(_=null===G||void 0===G||null===(Z=G.selected_batch_query)||void 0===Z?void 0:Z.batchName)&&void 0!==_?_:"",")"]}):null,"Optional"===(null===G||void 0===G?void 0:G.subjectOptional)&&"(".concat(null===G||void 0===G?void 0:G.subjectOptional,")")]}),(0,u.jsx)("p",{children:"".concat(null!==(N=null===G||void 0===G||null===(S=G.subjectTeacherName)||void 0===S?void 0:S.staffFirstName)&&void 0!==N?N:""," ").concat(null!==(T=null===G||void 0===G||null===(I=G.subjectTeacherName)||void 0===I?void 0:I.staffMiddleName)&&void 0!==T?T:""," ").concat(null!==(C=null===G||void 0===G||null===(k=G.subjectTeacherName)||void 0===k?void 0:k.staffLastName)&&void 0!==C?C:"")})]})]}),(0,u.jsx)("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:e=>{e.preventDefault(),X(null===G||void 0===G?void 0:G._id)},title:"Menu",style:{cursor:"pointer",height:"1.5rem"}})]})}):(0,u.jsx)(c.Z,{carryParentState:{...J,subjectId:null===G||void 0===G?void 0:G._id,subjectName:"".concat(null===G||void 0===G?void 0:G.subjectName," ").concat(null!==G&&void 0!==G&&G.subject_category?"(".concat(null===G||void 0===G?void 0:G.subject_category,")"):""," ").concat(null!==G&&void 0!==G&&null!==(A=G.selected_batch_query)&&void 0!==A&&A.batchName?"(".concat(null===G||void 0===G||null===(w=G.selected_batch_query)||void 0===w?void 0:w.batchName,")"):""," ").concat("Optional"===(null===G||void 0===G?void 0:G.subjectOptional)?"(".concat(null===G||void 0===G?void 0:G.subjectOptional,")"):""),batchId:null===G||void 0===G||null===(P=G.selected_batch_query)||void 0===P?void 0:P._id,isView:"ADMINISTRATOR"},activeTab:"subject-menu",children:(0,u.jsxs)("div",{className:l.Z.class_container,children:[(0,u.jsx)("img",{className:l.Z.oneRowImage,src:null!==G&&void 0!==G&&null!==(E=G.subjectTeacherName)&&void 0!==E&&E.staffProfilePhoto?"".concat(o.yI,"/").concat(null===G||void 0===G||null===(O=G.subjectTeacherName)||void 0===O?void 0:O.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"staff avatr"}),(0,u.jsxs)("div",{className:l.Z.class_container_text,children:[(0,u.jsxs)("h6",{children:[null!==(D=null===G||void 0===G?void 0:G.subjectName)&&void 0!==D?D:""," ",null!==G&&void 0!==G&&G.subject_category?"(".concat(null===G||void 0===G?void 0:G.subject_category,")"):"",null!==G&&void 0!==G&&null!==(F=G.selected_batch_query)&&void 0!==F&&F.batchName?(0,u.jsxs)("span",{style:{fontWeight:"400",fontSize:"12px"},children:[" ","(",null!==(R=null===G||void 0===G||null===(M=G.selected_batch_query)||void 0===M?void 0:M.batchName)&&void 0!==R?R:"",")"]}):null,"Optional"===(null===G||void 0===G?void 0:G.subjectOptional)&&"(".concat(null===G||void 0===G?void 0:G.subjectOptional,")")]}),(0,u.jsx)("p",{children:"".concat(null!==(q=null===G||void 0===G||null===(U=G.subjectTeacherName)||void 0===U?void 0:U.staffFirstName)&&void 0!==q?q:""," ").concat(null!==(L=null===G||void 0===G||null===(B=G.subjectTeacherName)||void 0===B?void 0:B.staffMiddleName)&&void 0!==L?L:""," ").concat(null!==(H=null===G||void 0===G||null===(V=G.subjectTeacherName)||void 0===V?void 0:V.staffLastName)&&void 0!==H?H:"")})]})]})}),(0,u.jsx)(r.Z,{children:Q&&(0,u.jsx)(v,{departmentModal:!!Q,hideModal:()=>X(""),id:Y,did:K,cid:z,edit:Q,setEdit:X,editSubject:Q,isEditBy:"DEPARTMENT_HEAD",onRefetch:W})})]})},h=e=>{let{subjects:t,carryParentState:n,isView:s,cid:a,instituteId:i,did:l,onRefetch:o}=e;return(0,u.jsx)(u.Fragment,{children:null===t||void 0===t?void 0:t.map((e=>(0,u.jsx)(m,{sub:e,carryParentState:n,isView:s,cid:a,instituteId:i,did:l,onRefetch:o},null===e||void 0===e?void 0:e._id)))})},j=e=>{var t,n,l;let{carryParentState:o,clsId:c,isView:d,instituteId:r,did:v}=e;const[m,j]=(0,s.useState)(!0),{oneClassAllSubject:p,oneClassAllSubjectRefetch:b}=(0,a.fk)({cid:c,skip:!c});return(0,s.useEffect)((()=>{var e;null!==p&&void 0!==p&&null!==(e=p.classes)&&void 0!==e&&e.subject&&j(!1)}),[null===p||void 0===p||null===(t=p.classes)||void 0===t?void 0:t.subject]),(0,s.useEffect)((()=>{c&&b()}),[c,b]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(h,{subjects:null!==(n=null===p||void 0===p||null===(l=p.classes)||void 0===l?void 0:l.subject)&&void 0!==n?n:[],carryParentState:o,isView:d||"ADMINISTRATOR",cid:c,instituteId:r,did:v,onRefetch:b}),m&&(0,u.jsx)(i.Z,{})]})}},893:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var s=n(72791),a=n(16313),i=n(53967),l=n(94721),o=n(89261),c=n(62921),d=n(17758),r=n(39230),u=n(24582),v=n(98734),m=n(37570),h=n(95048),j=n(99376),p=n(51561),b=n(80184);const f=e=>{let{today:t,alreadyMark:n,allIdsArray:i,clickedIndex:l,setClickedIndex:o,idPresentArray:c,idAbsentArray:d,setIdPresentArray:f,setIdAbsentArray:g,cid:x,isDepartment:y,className:_,setIsRefetch:Z}=e;const[N,S]=s.useState(!1),[T,I]=s.useState(!1),[C]=(0,u.b6)(),[k]=(0,u.wf)(),{t:A}=(0,r.$G)(),[w,P]=(0,s.useState)(!1),E=(0,h.I0)(),[O,D]=(0,s.useState)({msg:"",run:!1});s.useEffect((()=>{null!==c&&void 0!==c&&c.length||null!==d&&void 0!==d&&d.length?S(!0):S(!1)}),[c,d]);const F=()=>{P((e=>!e))};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:"1.5rem"},children:[(0,b.jsx)("div",{className:a.Z.buttons,children:(0,b.jsx)("div",{className:a.Z.save,onClick:F,children:A("export_zip_attendance")})}),(0,b.jsx)("div",{className:a.Z.buttons,children:0!==l?N&&!y&&(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{className:a.Z.save,onClick:()=>{I((e=>!e));const e=t.split("-"),s=e[0]>9?e[0]:"0".concat(e[0]),a=e[1]>9?e[1]:"0".concat(e[1]);if(null!==n&&void 0!==n&&n._id)E(j.R.updateClassAttendance({clsId:x,ldate:"".concat(s,"/").concat(a,"/").concat(e[2]),presentStudent:null!==c&&void 0!==c&&c.length?c:[],absentStudent:null!==d&&void 0!==d&&d.length?d:[],alreadyMark:null===n||void 0===n?void 0:n._id})),k({said:null===n||void 0===n?void 0:n._id,attendanceUpdate:{date:"".concat(s,"/").concat(a,"/").concat(e[2]),present:null!==c&&void 0!==c&&c.length?c:[],absent:null!==d&&void 0!==d&&d.length?d:[]}}).then((()=>{Z(!0),o(0),I((e=>!e)),f([]),g([])})).catch({});else{const t=[];null===i||void 0===i||i.map((e=>t.push(e._id)));const n=[],l=[];if(null!==c&&void 0!==c&&c.length)for(let e of t){let t=0;null!==c&&void 0!==c&&c.includes(e)||l.push(e),t+=1}else for(let e of t){let t=0;null!==d&&void 0!==d&&d.includes(e)||n.push(e),t+=1}C({cid:x,attendance:{date:"".concat(s,"/").concat(a,"/").concat(e[2]),present:null!==c&&void 0!==c&&c.length?c:n,absent:null!==d&&void 0!==d&&d.length?d:l}}).then((t=>{var i,r;"Today will be holiday Provided by department Admin or already marked attendance"===(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.message)?D({msg:"Today will be holiday Provided by department Admin or already marked attendance",run:!0}):E(j.R.addClassAttendance({clsId:x,ldate:"".concat(s,"/").concat(a,"/").concat(e[2]),presentStudent:null!==c&&void 0!==c&&c.length?c:n,absentStudent:null!==d&&void 0!==d&&d.length?d:l,alreadyMark:null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.alreadyMark}));o(0),I((e=>!e)),f([]),g([])})).catch({})}},children:A("save")})}):""})]}),T&&(0,b.jsx)(v.Z,{}),w&&(0,b.jsx)(m.Z,{cid:x,onClose:F,className:_}),O.run&&(0,b.jsx)(p.Ch,{msg:O.msg,run:O.run,setRun:()=>D({msg:"",run:!1}),postiton:"bottom",type:"error"})]})};const g=function(e){var t,n,v,m,j,p,g,x,y,_,Z,N,S,T;let{cid:I,isDepartment:C,className:k}=e;const{calendarData:A,selectedDate:w,todayFormatted:P,switchMonth:E,monthNames:O,getNextMonth:D,getPrevMonth:F}=(0,i.Z)(),[R,M]=(0,s.useState)(P),q=R.split("-"),U=q[0]>9?q[0]:"0".concat(q[0]),L=q[1]>9?q[1]:"0".concat(q[1]),{t:B}=(0,r.$G)(),H=(0,h.v9)((e=>e.attendanceStore.classTeacher)),[V,G]=(0,s.useState)(""),[J,$]=(0,s.useState)(!1),{classAllStudent:K,classAllStudentRefetch:z}=(0,u.EY)({data:{cid:I,page:1,limit:30},skip:!I}),{classStudentCurrentAttendance:Y,classStudentCurrentAttendanceRefetch:W}=(0,u.Px)({data:{cid:I,date:"".concat(U,"/").concat(L,"/").concat(q[2])},skip:!I});(0,s.useEffect)((()=>{if((null===H||void 0===H?void 0:H.length)>0){const e=R.split("-"),t=e[0]>9?e[0]:"0".concat(e[0]),n=e[1]>9?e[1]:"0".concat(e[1]);let s="";for(let a of H)if((null===a||void 0===a?void 0:a.ldate)==="".concat(t,"/").concat(n,"/").concat(e[2])){if((null===a||void 0===a?void 0:a.clsId)===I){s=a;break}$(!1)}else $(!1);G(s)}}),[H,R,I,J]),(0,s.useEffect)((()=>{I&&(z(),W())}),[I,W,z]);const Q=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],X=Math.floor(A.map((function(e){return e.date})).indexOf(R)/10),[ee,te]=(0,s.useState)(X),ne=10*ee,se=Math.ceil(A.length/10),ae=A.slice(ne,ne+10).map(((e,t)=>(0,b.jsxs)("div",{className:e.date===R?"".concat(a.Z.date," ").concat(a.Z.clickedDate):a.Z.date,onClick:()=>M(e.date),children:[(0,b.jsx)("h6",{children:e.date.split("-")[0]}),(0,b.jsx)("p",{children:Q[e.day]})]},t))),[ie,le]=(0,s.useState)(1),[oe,ce]=(0,s.useState)([]),[de,re]=(0,s.useState)([]),[ue,ve]=s.useState([]),[me,he]=s.useState([]),[je,pe]=(0,s.useState)(!1);s.useEffect((()=>{var e,t;ce(null===K||void 0===K||null===(e=K.classes)||void 0===e?void 0:e.ApproveStudent),re(null===K||void 0===K||null===(t=K.classes)||void 0===t?void 0:t.ApproveStudent)}),[null===K||void 0===K||null===(t=K.classes)||void 0===t?void 0:t.ApproveStudent]),s.useEffect((()=>{ve([]),he([])}),[ie]);const be=e=>{const t=[...ue];if(null!==t&&void 0!==t&&t.includes(e)){const n=t.indexOf(e);t.splice(n,1),ve((()=>[...t]))}else ve((t=>[...t,e]))},fe=e=>{const t=[...me];if(null!==t&&void 0!==t&&t.includes(e)){const n=t.indexOf(e);t.splice(n,1),he((()=>[...t]))}else he((t=>[...t,e]))};return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:a.Z.attendence,style:{border:C?"none":"0.5px solid #cacaca"},children:[(0,b.jsxs)("div",{className:a.Z.attendencehead,children:[(0,b.jsxs)("div",{className:a.Z.attendenceBtns,children:[(0,b.jsxs)("div",{className:a.Z.changemonth,onClick:()=>pe(!je),children:[(0,b.jsxs)("h6",{children:[O[w.getMonth()]," ",w.getFullYear()]}),(0,b.jsx)("img",{alt:"not found",src:"/images/dropdown-icon.svg"}),je&&(0,b.jsx)("div",{className:a.Z.selectMonthList,children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(((e,t)=>(0,b.jsx)("div",{className:a.Z.month,onClick:()=>{E(t),pe(!1)},children:e},t)))})]}),(0,b.jsx)(f,{alreadyMark:V?{_id:null===V||void 0===V?void 0:V.alreadyMark}:null===Y||void 0===Y||null===(n=Y.classes)||void 0===n||null===(v=n.attendenceDate)||void 0===v?void 0:v[0],today:R,allIdsArray:null===K||void 0===K||null===(m=K.classes)||void 0===m?void 0:m.ApproveStudent,classStudentCurrentAttendanceRefetch:W,clickedIndex:ie,setClickedIndex:le,idPresentArray:ue,idAbsentArray:me,setIdPresentArray:ve,setIdAbsentArray:he,cid:I,isDepartment:C,className:k,setIsRefetch:$})]}),(0,b.jsxs)("div",{className:a.Z.calender,children:[(0,b.jsx)("div",{className:a.Z.arrowbtn,onClick:()=>{ee>0?te((e=>e-1)):(te(se-1),F())},children:(0,b.jsx)("img",{alt:"not found",src:"/images/members/left-icon.svg"})}),(0,b.jsx)("div",{className:a.Z.dates,children:ae}),(0,b.jsx)("div",{className:a.Z.arrowbtn,onClick:()=>{ee+1<se?te((e=>e+1)):(te(0),D())},children:(0,b.jsx)("img",{alt:"not found",src:"/images/members/right-icon.svg"})})]})]}),(0,b.jsx)(l.Z,{}),(0,b.jsxs)("div",{className:a.Z.tabs,children:[(0,b.jsxs)("div",{className:0===ie?"".concat(a.Z.tab," ").concat(a.Z.purple):"".concat(a.Z.tab," ").concat(a.Z.grey),onClick:()=>le(0),children:[B("total")," ",null===K||void 0===K||null===(j=K.classes)||void 0===j||null===(p=j.ApproveStudent)||void 0===p?void 0:p.length]}),(0,b.jsxs)("div",{className:1===ie?"".concat(a.Z.tab," ").concat(a.Z.tabgreen):"".concat(a.Z.tab," ").concat(a.Z.light),onClick:()=>le(1),children:[B("present")," ",V?null!==(g=null===V||void 0===V?void 0:V.presentCount)&&void 0!==g?g:0:null===Y||void 0===Y||null===(x=Y.classes)||void 0===x||null===(y=x.attendenceDate[0])||void 0===y?void 0:y.presentTotal]}),(0,b.jsxs)("div",{className:2===ie?"".concat(a.Z.tab," ").concat(a.Z.red):"".concat(a.Z.tab," ").concat(a.Z.rose),onClick:()=>le(2),children:[B("absent")," ",V?null!==(_=null===V||void 0===V?void 0:V.absentCount)&&void 0!==_?_:0:null===Y||void 0===Y||null===(Z=Y.classes)||void 0===Z||null===(N=Z.attendenceDate[0])||void 0===N?void 0:N.absentTotal]})]}),(0,b.jsxs)("div",{className:a.Z.list,children:[0===ie&&(null===K||void 0===K||null===(S=K.classes)||void 0===S||null===(T=S.ApproveStudent)||void 0===T?void 0:T.map(((e,t)=>{var n,s,i,l,c,d,r,u;return V?null!==V&&void 0!==V&&null!==(n=V.presentStudent)&&void 0!==n&&n.includes(e._id)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Z,{student:e,status:"present"},t),(0,b.jsx)("div",{className:a.Z.divider})]}):null!==V&&void 0!==V&&null!==(s=V.absentStudent)&&void 0!==s&&s.includes(e._id)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Z,{student:e,status:"absent"},t),(0,b.jsx)("div",{className:a.Z.divider})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Z,{student:e,status:"initial"},t),(0,b.jsx)("div",{className:a.Z.divider})]}):null!==Y&&void 0!==Y&&null!==(i=Y.classes)&&void 0!==i&&null!==(l=i.attendenceDate[0])&&void 0!==l&&null!==(c=l.presentStudent)&&void 0!==c&&c.includes(e._id)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Z,{student:e,status:"present"},t),(0,b.jsx)("div",{className:a.Z.divider})]}):null!==Y&&void 0!==Y&&null!==(d=Y.classes)&&void 0!==d&&null!==(r=d.attendenceDate[0])&&void 0!==r&&null!==(u=r.absentStudent)&&void 0!==u&&u.includes(e._id)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Z,{student:e,status:"absent"},t),(0,b.jsx)("div",{className:a.Z.divider})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Z,{student:e,status:"initial"},t),(0,b.jsx)("div",{className:a.Z.divider})]})}))),1===ie&&(null===oe||void 0===oe?void 0:oe.length)>0&&(null===oe||void 0===oe?void 0:oe.map(((e,t)=>{var n,s,i,l;return V?null!==V&&void 0!==V&&null!==(n=V.presentStudent)&&void 0!==n&&n.includes(e._id)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.Z,{student:e,status:"present",presentTabHandler:be},t),(0,b.jsx)("div",{className:a.Z.divider})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.Z,{student:e,presentTabHandler:be,status:"absent"},t),(0,b.jsx)("div",{className:a.Z.divider})]}):null!==Y&&void 0!==Y&&null!==(s=Y.classes)&&void 0!==s&&null!==(i=s.attendenceDate[0])&&void 0!==i&&null!==(l=i.presentStudent)&&void 0!==l&&l.includes(e._id)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.Z,{student:e,status:"present",presentTabHandler:be},t),(0,b.jsx)("div",{className:a.Z.divider})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.Z,{student:e,presentTabHandler:be,status:"absent"},t),(0,b.jsx)("div",{className:a.Z.divider})]})}))),2===ie&&(null===de||void 0===de?void 0:de.length)>0&&(null===de||void 0===de?void 0:de.map(((e,t)=>{var n,s,i,l;return V?null!==V&&void 0!==V&&null!==(n=V.absentStudent)&&void 0!==n&&n.includes(e._id)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Z,{student:e,status:"absent",absentTabHandler:fe},t),(0,b.jsx)("div",{className:a.Z.divider})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Z,{student:e,status:"present",absentTabHandler:fe},t),(0,b.jsx)("div",{className:a.Z.divider})]}):null!==Y&&void 0!==Y&&null!==(s=Y.classes)&&void 0!==s&&null!==(i=s.attendenceDate[0])&&void 0!==i&&null!==(l=i.absentStudent)&&void 0!==l&&l.includes(e._id)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Z,{student:e,status:"absent",absentTabHandler:fe},t),(0,b.jsx)("div",{className:a.Z.divider})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Z,{student:e,status:"present",absentTabHandler:fe},t),(0,b.jsx)("div",{className:a.Z.divider})]})})))]})]})})}},76452:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});n(72791);var s=n(16871),a=n(43504),i=n(39230),l=n(22984),o=n(80184);const c=function(e){var t,n,c;let{carryParentState:d}=e;const{t:r}=(0,i.$G)(),u=(0,s.TH)(),v=(0,s.UO)();return(0,o.jsx)("div",{className:l.Z.mcqTop,style:{padding:"0"},children:(0,o.jsxs)("div",{className:l.Z.mcqToptabs,children:[(0,o.jsx)(a.rU,{to:"/q/".concat(v.username,"/member/department/").concat(v.deptname,"?a=class-detail"),state:d,className:"class-detail"===(null===(t=u.search)||void 0===t?void 0:t.substring(3))?"".concat(l.Z.mcqTopItem," ").concat(l.Z.active):l.Z.mcqTopItem,children:(0,o.jsx)("div",{children:r("students")})}),(0,o.jsx)(a.rU,{to:"/q/".concat(v.username,"/member/department/").concat(v.deptname,"?a=class-attendance"),state:d,className:"class-attendance"===(null===(n=u.search)||void 0===n?void 0:n.substring(3))?"".concat(l.Z.mcqTopItem," ").concat(l.Z.active):l.Z.mcqTopItem,children:(0,o.jsx)("div",{children:r("attendance")})}),(0,o.jsx)(a.rU,{to:"/q/".concat(v.username,"/member/department/").concat(v.deptname,"?a=class-subject"),state:d,className:"class-subject"===(null===(c=u.search)||void 0===c?void 0:c.substring(3))?"".concat(l.Z.mcqTopItem," ").concat(l.Z.active):l.Z.mcqTopItem,children:(0,o.jsx)("div",{children:r("subjects")})})]})})};var d=n(33148),r=n(23664),u=n(65408),v=n(36185),m=n(893),h=n(8148),j=n(11806),p=n(60726);const b=e=>{let{carryParentState:t,isDepartment:n}=e;const{t:s}=(0,i.$G)();return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:j.Z.MiddleContentLeft,style:{border:"none"},children:"CLASS_TEACHER"===n?(0,o.jsxs)("div",{className:j.Z.item,style:{paddingLeft:"2vw"},children:[(0,o.jsx)(p.Z,{carryParentState:t,activeTab:"subject-catalog",children:(0,o.jsxs)("div",{className:j.Z.itemIcon,children:[(0,o.jsx)("img",{src:"/images/member_tab/class/class-catalog-icon.svg",alt:"Class Catalog"}),(0,o.jsx)("p",{children:s("catalog")})]})}),(0,o.jsx)(p.Z,{carryParentState:t,activeTab:"subject-attendance",children:(0,o.jsxs)("div",{className:j.Z.itemIcon,children:[(0,o.jsx)("img",{src:"/images/member_tab/class/class-attendance-icon.svg",alt:"attendence"}),(0,o.jsxs)("p",{children:[" ",s("attendance")," "]})]})}),(0,o.jsx)(p.Z,{carryParentState:t,activeTab:"subject-assignment",children:(0,o.jsxs)("div",{className:j.Z.itemIcon,children:[(0,o.jsx)("img",{src:"/images/member_tab/subject/subject-assignment-icon.svg",alt:"assignment"}),(0,o.jsx)("p",{children:s("assigmnent")})]})}),(0,o.jsx)(p.Z,{carryParentState:t,activeTab:"subject-exam",children:(0,o.jsxs)("div",{className:j.Z.itemIcon,children:[(0,o.jsx)("img",{src:"/images/member_tab/department/department-examination-icon.svg",alt:"attendence"}),(0,o.jsx)("p",{children:s("examinations")})]})}),(0,o.jsx)(p.Z,{carryParentState:t,activeTab:"subject-academic",children:(0,o.jsxs)("div",{className:j.Z.itemIcon,children:[(0,o.jsx)("img",{src:"/images/member_tab/subject/subject-daily-update-icon.svg",alt:"student Request"}),(0,o.jsx)("p",{style:{textAlign:"center"},children:s("academics_teachings")})]})})]}):(0,o.jsxs)("div",{className:j.Z.item,style:{paddingLeft:"2vw"},children:[(0,o.jsx)(h.Z,{carryParentState:t,activeTab:"subject-catalog",children:(0,o.jsxs)("div",{className:j.Z.itemIcon,children:[(0,o.jsx)("img",{src:"/images/member_tab/class/class-catalog-icon.svg",alt:"Class Catalog"}),(0,o.jsx)("p",{children:s("catalog")})]})}),(0,o.jsx)(h.Z,{carryParentState:t,activeTab:"subject-attendance",children:(0,o.jsxs)("div",{className:j.Z.itemIcon,children:[(0,o.jsx)("img",{src:"/images/member_tab/class/class-attendance-icon.svg",alt:"attendence"}),(0,o.jsxs)("p",{children:[" ",s("attendance")," "]})]})}),(0,o.jsx)(h.Z,{carryParentState:t,activeTab:"subject-assignment",children:(0,o.jsxs)("div",{className:j.Z.itemIcon,children:[(0,o.jsx)("img",{src:"/images/member_tab/subject/subject-assignment-icon.svg",alt:"assignment"}),(0,o.jsx)("p",{children:s("assigmnent")})]})}),(0,o.jsx)(h.Z,{carryParentState:t,activeTab:"subject-exam",children:(0,o.jsxs)("div",{className:j.Z.itemIcon,children:[(0,o.jsx)("img",{src:"/images/member_tab/department/department-examination-icon.svg",alt:"attendence"}),(0,o.jsx)("p",{children:s("examinations")})]})}),(0,o.jsx)(h.Z,{carryParentState:t,activeTab:"subject-academic",children:(0,o.jsxs)("div",{className:j.Z.itemIcon,children:[(0,o.jsx)("img",{src:"/images/member_tab/subject/subject-daily-update-icon.svg",alt:"student Request"}),(0,o.jsx)("p",{style:{textAlign:"center"},children:s("academics_teachings")})]})})]})})})};var f=n(17121),g=n(11457),x=n(73453),y=n(60463),_=n(81551),Z=n(6763),N=n(61587);const S=e=>{var t,n,l,h,j,p,S,T,I,C,k,A,w,P,E,O,D,F,R,M,q,U,L,B,H,V;let{carryParentState:G,viewAs:J,did:$,instituteId:K}=e;const{t:z}=(0,i.$G)(),Y=(0,s.TH)(),[W]=(0,a.lr)();return(0,o.jsx)(o.Fragment,{children:"subject-academic-detail"===W.get("a")?(0,o.jsx)(_.Z,{}):"assignment-detail"===W.get("a")?(0,o.jsx)(Z.Z,{isDepartment:J,carryParentState:G}):"assignment-student-detail"===W.get("a")?(0,o.jsx)(N.Z,{isDepartment:J}):(0,o.jsx)("div",{className:d.Z.departmenthead,children:(0,o.jsxs)("div",{className:d.Z.demaprtment_list,children:[(0,o.jsx)("div",{className:d.Z.with_search,style:{marginBottom:"0.7rem",alignItems:"flex-start",flexDirection:"column"},children:"subject"===(null===(t=W.get("a"))||void 0===t?void 0:t.substring(0,7))?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("h6",{children:[z("subject_name")," : ",null!==(n=null===(l=Y.state)||void 0===l?void 0:l.subjectName)&&void 0!==n?n:""]}),(0,o.jsxs)("h6",{children:[z("subject_teacher")," : ",null!==(h=null===(j=Y.state)||void 0===j?void 0:j.subjectTeacherName)&&void 0!==h?h:""]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("h6",{children:[z("class_name")," : ",null!==(p=null===(S=Y.state)||void 0===S?void 0:S.clsName)&&void 0!==p?p:""]}),(0,o.jsxs)("h6",{children:[z("class_teacher")," : ",null!==(T=null===(I=Y.state)||void 0===I?void 0:I.teacherName)&&void 0!==T?T:""]})]})}),"subject-detail"===W.get("a")?(0,o.jsx)(b,{carryParentState:G,isDepartment:J}):"subject-catalog"===W.get("a")?(0,o.jsx)(v.Z,{cid:null===(C=Y.state)||void 0===C?void 0:C.clsId,bid:null===(k=Y.state)||void 0===k?void 0:k.batchId,isDepartment:J,sid:null===(A=Y.state)||void 0===A?void 0:A.subjectId}):"subject-attendance"===W.get("a")?(0,o.jsx)(f.Z,{sid:null===(w=Y.state)||void 0===w?void 0:w.subjectId,bid:null===(P=Y.state)||void 0===P?void 0:P.batchId,isDepartment:J,subjectName:null!==(E=null===(O=Y.state)||void 0===O?void 0:O.subjectName)&&void 0!==E?E:""}):"subject-assignment"===W.get("a")?(0,o.jsx)(g.Z,{sid:null===(D=Y.state)||void 0===D?void 0:D.subjectId,cid:null===(F=Y.state)||void 0===F?void 0:F.clsId,carryParentState:G,bid:null===(R=Y.state)||void 0===R?void 0:R.batchId,isDepartment:J}):"subject-exam"===W.get("a")?(0,o.jsx)(x.Z,{sid:null===(M=Y.state)||void 0===M?void 0:M.subjectId,cid:null===(q=Y.state)||void 0===q?void 0:q.clsId,isDepartment:J}):"subject-academic"===W.get("a")?(0,o.jsx)(y.Z,{sid:null===(U=Y.state)||void 0===U?void 0:U.subjectId,carryParentState:G,isDepartment:J}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c,{carryParentState:G}),"class-detail"===W.get("a")&&(0,o.jsx)(r.Z,{cid:Y.state.clsId,openAs:"SUBJECT_TEACHER",isDepartment:!0}),"class-subject"===W.get("a")&&(0,o.jsx)(u.Z,{carryParentState:G,clsId:null===(L=Y.state)||void 0===L?void 0:L.clsId,isView:"DEPARTMENT_HEAD",instituteId:K,did:$}),"class-attendance"===W.get("a")&&(0,o.jsx)(m.Z,{cid:null===(B=Y.state)||void 0===B?void 0:B.clsId,isDepartment:!0,className:null!==(H=null===(V=Y.state)||void 0===V?void 0:V.clsName)&&void 0!==H?H:""})]})]})})})}},60463:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var s=n(72791),a=n(83401),i=n(39230),l=n(98094),o=n(99532),c=n(23441),d=n(65543),r=n(40444),u=n(34219),v=n(11105),m=n(80184);const h=e=>{var t;let{sid:n,reftechStatus:a,setReftechStatus:i,isDepartment:l}=e;const[h,j]=(0,s.useState)(!0),[p,b]=(0,s.useState)(1),[f,g]=(0,c.YD)(),[x,y]=(0,s.useState)([]),[_,Z]=(0,s.useState)(!0),{scrollToTop:N}=(0,d.u)(),{getAllDailySubject:S,getAllDailySubjectRefetch:T}=(0,r.RX)({data:{sid:n,page:a?1:p,limit:10},skip:!n});(0,s.useEffect)((()=>{a&&(b((e=>1)),i(!1),T())}),[a]),(0,s.useEffect)((()=>{n&&(Z(!0),T())}),[n,p,T]),(0,s.useEffect)((()=>{N()}),[N]),(0,s.useEffect)((()=>{g&&h&&b((e=>e+1))}),[g,h]),(0,s.useEffect)((()=>{var e,t;null!==S&&void 0!==S&&S.dailyUpdate?(y(1===p?null===S||void 0===S?void 0:S.dailyUpdate:e=>[...new Set([...e,...null===S||void 0===S?void 0:S.dailyUpdate].map(JSON.stringify))].map(JSON.parse)),Z(!1)):0===(null===S||void 0===S||null===(e=S.dailyUpdate)||void 0===e?void 0:e.length)&&Z(!1),10===(null===S||void 0===S||null===(t=S.dailyUpdate)||void 0===t?void 0:t.length)?j(!0):j(!1)}),[null===S||void 0===S?void 0:S.dailyUpdate]);const I=()=>{b((e=>1)),Z(!0),T()};return(0,m.jsxs)(m.Fragment,{children:[null===x||void 0===x?void 0:x.map(((e,t)=>(null===x||void 0===x?void 0:x.length)===t+1?(0,m.jsx)("div",{ref:f,children:(0,m.jsx)(o.Z,{daily:e,sid:n,onParentRefetch:I,isView:l?"STUDENT":""})},null===e||void 0===e?void 0:e._id):(0,m.jsx)(o.Z,{daily:e,sid:n,onParentRefetch:I,isView:l?"STUDENT":""},null===e||void 0===e?void 0:e._id))),!_&&!(null!==S&&void 0!==S&&null!==(t=S.dailyUpdate)&&void 0!==t&&t.length)&&(0,m.jsx)(u.Z,{customStyleContainer:{marginTop:"9rem"},title:"No academics found yet."}),_&&(0,m.jsx)(v.Z,{status:"white"})]})};var j=n(10515),p=n(4213),b=n(16871),f=n(43504);const g=e=>{let{sid:t,carryParentState:n,isDepartment:o}=e;const{t:c}=(0,i.$G)(),d=(0,b.UO)(),[r,u]=(0,s.useState)(!1),[v,g]=(0,s.useState)(!1),[x,y]=(0,s.useState)(!1),_=()=>{u((e=>!e))};return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:a.Z.subject_academic_container,children:[(0,m.jsxs)("div",{className:a.Z.subject_academic_title,children:[(0,m.jsx)("h6",{children:c("academics_teachings")}),(0,m.jsx)("div",{className:a.Z.subject_academic_link,children:"CLASS_TEACHER"===o?(0,m.jsx)(f.rU,{to:"/q/".concat(d.username,"/member/class/").concat(d.cname,"?a=subject-academic-detail"),state:{...n,subjectId:t,isView:"DEPARTMENT_HEAD"},children:(0,m.jsx)("h6",{className:a.Z.add_record_lecture,style:{margin:"0"},children:c("view_academic_detail")})}):"DEPARTMENT_HEAD"===o?(0,m.jsx)(f.rU,{to:"/q/".concat(d.username,"/member/department/").concat(d.deptname,"?a=subject-academic-detail"),state:{...n,subjectId:t,isView:"DEPARTMENT_HEAD"},children:(0,m.jsx)("h6",{className:a.Z.add_record_lecture,style:{margin:"0"},children:c("view_academic_detail")})}):(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(f.rU,{to:"/q/".concat(d.username,"/member/subject/").concat(d.sname,"?a=subject-academic"),state:{...n,subjectId:t,isView:o?"DEPARTMENT_HEAD":"SUBJECT_TEACHER",isSubType:"SUBJECT_TEACHER_INSTITUTE"},children:(0,m.jsx)("h6",{className:a.Z.add_record_lecture,style:{margin:"0"},children:c("view_academic_detail")})})})})]}),(0,m.jsx)(l.Z,{customStyle:{width:"100%",marginTop:"0.7rem",marginBottom:"0.7rem"}}),o?null:(0,m.jsx)("div",{className:a.Z.record_lecture,children:(0,m.jsx)("h6",{className:a.Z.add_record_lecture,onClick:_,children:c("record_lecture_teachings")})}),r&&(0,m.jsx)(j.Z,{onClose:_,sid:t,onRefetch:()=>{y(!0)}}),v&&(0,m.jsx)(p.Z,{onClose:()=>{g((e=>!e))},sid:t}),(0,m.jsx)(h,{sid:t,reftechStatus:x,setReftechStatus:y,isDepartment:o})]})})}},99532:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var s=n(72791),a=n(83401),i=n(72426),l=n.n(i),o=n(39230),c=n(69721),d=n(10307),r=n(80184);const u=e=>{var t,n,s,i,u,v,m;let{isView:h,updateDescription:j,upadateImage:p,createdAt:b,subject:f}=e;const{t:g}=(0,o.$G)();return(0,r.jsxs)("div",{className:a.Z.aditional_info_container,children:["STUDENT"===h?(0,r.jsxs)("div",{className:a.Z.aditional_info_dates,children:[(0,r.jsx)("h5",{children:null!==(t=null===f||void 0===f?void 0:f.subjectName)&&void 0!==t?t:""}),(0,r.jsx)("h6",{children:"".concat(null!==(n=null===f||void 0===f||null===(s=f.subjectTeacherName)||void 0===s?void 0:s.staffFirstName)&&void 0!==n?n:""," ").concat(null!==(i=null===f||void 0===f||null===(u=f.subjectTeacherName)||void 0===u?void 0:u.staffMiddleName)&&void 0!==i?i:""," ").concat(null!==(v=null===f||void 0===f||null===(m=f.subjectTeacherName)||void 0===m?void 0:m.staffLastName)&&void 0!==v?v:"")})]}):null,j||(null===p||void 0===p?void 0:p.length)>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h6",{children:g("additional_info")}),(0,r.jsx)("p",{children:j}),(null===p||void 0===p?void 0:p.length)>0?(0,r.jsx)("div",{className:a.Z.aditional_info_images,children:null===p||void 0===p?void 0:p.map((e=>(0,d.Y)(null===e||void 0===e?void 0:e.documentKey)?(0,r.jsx)("a",{title:"view File",href:"".concat(c.r3,"/").concat(null===e||void 0===e?void 0:e.documentKey),target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,r.jsx)("img",{src:"".concat(c.yI,"/").concat(null===e||void 0===e?void 0:e.documentKey),alt:"files"},null===e||void 0===e?void 0:e.documentKey)}):null))}):null]}):null,(0,r.jsxs)("div",{className:a.Z.aditional_info_dates,children:[(0,r.jsx)("p",{children:l()(b).format("DD MMM yyyy")}),(0,r.jsx)("p",{children:l()(b).format("LT")})]})]})};var v=n(61292),m=n(10515);const h=e=>{var t;let{daily:n,sid:i,onParentRefetch:c,isView:d}=e;const{t:h}=(0,o.$G)(),[j,p]=(0,s.useState)("");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:a.Z.academic_card_container,children:[(0,r.jsxs)("div",{className:a.Z.academic_card_top,style:{justifyContent:"space-between"},children:[(0,r.jsxs)("div",{className:a.Z.academic_card_top_text,children:[(0,r.jsx)("img",{src:"/images/member_tab/subject/subject-topic-icon.svg",alt:"topic icon"}),(0,r.jsxs)("h6",{children:[l()(null===n||void 0===n?void 0:n.date).format("Do MMMM, yyyy"),": Topics Covered"]})]}),"STUDENT"===d?null:(0,r.jsxs)("h6",{onClick:()=>p(n),children:["(",h("edit_"),")"]})]}),null===n||void 0===n||null===(t=n.daily_topic)||void 0===t?void 0:t.map((e=>(0,r.jsx)(v.Z,{topic:null===e||void 0===e?void 0:e.topic,topicType:null===e||void 0===e?void 0:e.status,topicCurrentStatus:null===e||void 0===e?void 0:e.current_status,isView:"DAILY"},null===e||void 0===e?void 0:e._id))),(0,r.jsx)(u,{updateDescription:null===n||void 0===n?void 0:n.updateDescription,upadateImage:null===n||void 0===n?void 0:n.upadateImage,createdAt:null===n||void 0===n?void 0:n.createdAt,isView:d,subject:null===n||void 0===n?void 0:n.subject})]}),j&&(0,r.jsx)(m.Z,{onClose:()=>p(""),sid:i,onRefetch:c,dailyMenu:j})]})}},63162:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var s=n(39230),a=n(51416),i=n(43504),l=n(72791),o=n(80184);const c=e=>{let{tab:t,isActive:n,isLink:l,parentState:c,onAction:d,url:r}=e;const{t:u}=(0,s.$G)();return l?(0,o.jsx)(i.rU,{className:n?a.Z.horizontal_tab_card_active:a.Z.horizontal_tab_card,to:r,state:c,children:(0,o.jsx)("h6",{children:u(null===t||void 0===t?void 0:t.label)})}):(0,o.jsx)("div",{className:n?a.Z.horizontal_tab_card_active:a.Z.horizontal_tab_card,onClick:()=>{d(null===t||void 0===t?void 0:t.id)},children:(0,o.jsx)("h6",{children:u(null===t||void 0===t?void 0:t.label)})})},d=(0,l.memo)(c)},98967:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var s=n(51416),a=n(80184);const i=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:s.Z.horizontal_tab_wrapper,children:t})}},95078:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var s=n(72791),a=n(83638),i=n(92673),l=n(38857),o=n(21348),c=n(98684),d=n(90904),r=n(93638),u=n(15427),v=n(55336),m=n(16925),h=n(39230),j=n(80184);const p=e=>{let{onParentClose:t,state:n,onClose:a,mid:i,flow:p,onNavigate:b,stid:f}=e;const{t:g}=(0,h.$G)(),[x,y]=(0,s.useState)(!1),[_]=(0,u.sQ)();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(l.Z,{onClose:a,children:(0,j.jsxs)("div",{className:m.Z.modal_container,children:[(0,j.jsx)(o.Z,{children:(0,j.jsxs)("div",{className:m.Z.modal_container_outer_header,children:[(0,j.jsx)("div",{className:m.Z.modal_container_header,children:(0,j.jsx)("h6",{children:g("confirm_to_request_stock")})}),(0,j.jsx)("img",{src:"".concat(c.J7,"/close.svg"),alt:"close icon",onClick:a})]})}),(0,j.jsx)(d.Z,{customStyleBorder:{marginBottom:"0"}}),(0,j.jsx)(o.Z,{customStyle:{paddingBottom:"1rem"},children:(0,j.jsx)(r.Z,{label:"request_stock",onAction:()=>{var e;i&&null!==n&&void 0!==n&&null!==(e=n.arr)&&void 0!==e&&e.length&&p&&f&&(y((e=>!e)),_({stid:f,bodyParameter:{arr:null===n||void 0===n?void 0:n.arr,flow:p,request_by:i}}).then((()=>{y((e=>!e)),b(),t()})).catch({}))}})})]})}),x&&(0,j.jsx)(v.Z,{})]})},b=e=>{let{onClose:t,onNavigate:n,mid:l,stid:o,flow:c}=e;const[d,r]=(0,s.useState)(1),[u,v]=(0,s.useState)({arr:[],goods:[],goodsId:[]});return(0,j.jsx)(j.Fragment,{children:1===d?(0,j.jsx)(a.Z,{onClose:t,stid:o,onGoodsSelect:e=>{v((t=>({...t,goods:null===e||void 0===e?void 0:e.goods,goodsId:null===e||void 0===e?void 0:e.goodsId}))),r(2)},dataState:u}):2===d?(0,j.jsx)(i.Z,{onClose:()=>r(1),state:u,setStep:()=>r(3),setState:v}):3===d?(0,j.jsx)(p,{onClose:()=>r(2),state:u,onParentClose:t,stid:o,onNavigate:n,flow:c,mid:l}):null})}},98148:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var s=n(72791),a=n(38857),i=n(21348),l=n(98684),o=n(90904),c=n(93638),d=n(15427),r=n(55336),u=n(16925),v=n(39230),m=n(80184);const h=e=>{let{onParentClose:t,state:n,onClose:h,mid:j,flow:p,onNavigate:b,stid:f}=e;const{t:g}=(0,v.$G)(),[x,y]=(0,s.useState)(!1),[_]=(0,d.uq)();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a.Z,{onClose:h,children:(0,m.jsxs)("div",{className:u.Z.modal_container,children:[(0,m.jsx)(i.Z,{children:(0,m.jsxs)("div",{className:u.Z.modal_container_outer_header,children:[(0,m.jsx)("div",{className:u.Z.modal_container_header,children:(0,m.jsx)("h6",{children:g("confirm_to_return_stock")})}),(0,m.jsx)("img",{src:"".concat(l.J7,"/close.svg"),alt:"close icon",onClick:h})]})}),(0,m.jsx)(o.Z,{customStyleBorder:{marginBottom:"0"}}),(0,m.jsx)(i.Z,{customStyle:{paddingBottom:"1rem"},children:(0,m.jsx)(c.Z,{label:"return_stock",onAction:()=>{var e;j&&null!==n&&void 0!==n&&null!==(e=n.arr)&&void 0!==e&&e.length&&p&&f&&(y((e=>!e)),_({stid:f,bodyParameter:{arr:null===n||void 0===n?void 0:n.arr,flow:p,request_by:j}}).then((()=>{y((e=>!e)),b(),t()})).catch({}))}})})]})}),x&&(0,m.jsx)(r.Z,{})]})};var j=n(1095),p=n(2034);const b=e=>{var t,n,s;let{goods:a,onSelectGoods:i,selectedId:o}=e;const{t:c}=(0,v.$G)();return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{className:null!==o&&void 0!==o&&o.includes(null===a||void 0===a?void 0:a._id)?"".concat(p.Z.smc_card," ").concat(p.Z.smc_card_active):p.Z.smc_card,onClick:()=>{i(a)},children:(0,m.jsxs)("div",{className:p.Z.smc_card_contatiner,children:[(0,m.jsx)("img",{src:null!==a&&void 0!==a&&a.good_icon?"".concat(j.yI,"/").concat(null===a||void 0===a?void 0:a.good_icon):"".concat(l.J7,"/category.svg"),alt:"categor good_icon"}),(0,m.jsxs)("div",{className:p.Z.smc_card_contatiner_inner,children:[(0,m.jsxs)("h6",{children:[c("name"),": ",null!==(t=null===a||void 0===a?void 0:a.goods_name)&&void 0!==t?t:""]}),(0,m.jsxs)("p",{children:[c("remaining_quantity")," ",": "," ",null!==(n=null===a||void 0===a?void 0:a.goods_volume)&&void 0!==n?n:""]}),(0,m.jsxs)("p",{children:[c("price_per_unit")," ",": "," ",null!==(s=null===a||void 0===a?void 0:a.goods_price)&&void 0!==s?s:""]})]})]})})})};var f=n(23441),g=n(91427),x=n(57588),y=n(1669),_=n(2651),Z=n(49806);const N=e=>{var t,n,u,h;let{onClose:j,stid:p,dataState:N,onGoodsSelect:S}=e;const{t:T}=(0,v.$G)(),[I,C]=(0,s.useState)(""),[k,A]=(0,s.useState)(1),[w,P]=(0,s.useState)(!0),[E,O]=(0,f.YD)({skip:I}),[D,F]=(0,s.useState)({goods:[],goodsId:[]}),{storeAllGoodsList:R,storeAllGoodsListLoading:M}=(0,d.ok)({data:{stid:p,page:k,limit:10,search:I},skip:!p});(0,s.useEffect)((()=>{O&&w&&A((e=>e+1))}),[O,w]),(0,s.useEffect)((()=>{var e;if(null!==R&&void 0!==R&&null!==(e=R.list)&&void 0!==e&&e.length){var t;let e=(0,g.f)(null===R||void 0===R||null===(t=R.list)||void 0===t?void 0:t.length);P((()=>e))}}),[null===R||void 0===R||null===(t=R.list)||void 0===t?void 0:t.length]),(0,s.useEffect)((()=>{var e;null!==N&&void 0!==N&&null!==(e=N.goodsId)&&void 0!==e&&e.length&&F({goods:null===N||void 0===N?void 0:N.goods,goodsId:null===N||void 0===N?void 0:N.goodsId})}),[null===N||void 0===N?void 0:N.goodsId]);const q=(0,s.useCallback)((0,x.J)((e=>{A((()=>1)),C(e)}),1500),[]),U=e=>{var t;null!==(t=D.goodsId)&&void 0!==t&&t.includes(null===e||void 0===e?void 0:e._id)?F((t=>{var n,s;return{...t,goods:null===t||void 0===t||null===(n=t.goods)||void 0===n?void 0:n.filter((t=>(null===t||void 0===t?void 0:t._id)!==(null===e||void 0===e?void 0:e._id))),goodsId:null===t||void 0===t||null===(s=t.goodsId)||void 0===s?void 0:s.filter((t=>t!==(null===e||void 0===e?void 0:e._id)))}})):F((t=>({...t,goods:[...null===t||void 0===t?void 0:t.goods,e],goodsId:[...null===t||void 0===t?void 0:t.goodsId,null===e||void 0===e?void 0:e._id]})))};return(0,m.jsx)(a.Z,{onClose:j,children:(0,m.jsxs)("div",{className:Z.Z.modal_container,children:[(0,m.jsx)(i.Z,{children:(0,m.jsxs)("div",{className:Z.Z.modal_container_outer_header,children:[(0,m.jsx)("div",{className:Z.Z.modal_container_header,children:(0,m.jsx)("h6",{children:T("select_goods")})}),(0,m.jsxs)("div",{className:Z.Z.modal_container_btn_container,children:[(0,m.jsx)(c.Z,{label:"next",onAction:()=>{S(D)},customStyle:{margin:"0",padding:"0.1rem 0.5rem"}}),(0,m.jsx)("img",{src:"".concat(l.J7,"/close.svg"),alt:"close icon",onClick:j})]})]})}),(0,m.jsx)(o.Z,{customStyleBorder:{marginBottom:"0"}}),(0,m.jsxs)(i.Z,{customStyle:{paddingBottom:"1rem"},children:[(0,m.jsxs)("div",{className:Z.Z.assign_search_container,style:{marginBottom:"1rem"},children:[(0,m.jsx)("input",{type:"text",placeholder:T("search"),className:Z.Z.assign_search_input,onChange:e=>{e.target.value?q(e.target.value):(A((()=>1)),C(""))},style:{width:"100%"}}),(0,m.jsx)("img",{src:"".concat(l.dB,"/navbar-search.svg"),alt:"search icon"})]}),null===R||void 0===R||null===(n=R.list)||void 0===n?void 0:n.map(((e,t)=>{var n;return(null===R||void 0===R||null===(n=R.list)||void 0===n?void 0:n.length)===t+1?(0,m.jsx)("div",{ref:E,children:(0,m.jsx)(b,{goods:e,onSelectGoods:U,selectedId:D.goodsId})},null===e||void 0===e?void 0:e._id):(0,m.jsx)(b,{goods:e,onSelectGoods:U,selectedId:D.goodsId},null===e||void 0===e?void 0:e._id)})),M?I?(0,m.jsx)(r.Z,{}):(0,m.jsx)(y.Z,{}):I?0===(null===R||void 0===R||null===(u=R.list)||void 0===u?void 0:u.length)&&(0,m.jsx)(_.Z,{title:"No goods found related this search.",customStyleContainer:{marginTop:"1.5rem"}}):0===(null===R||void 0===R||null===(h=R.list)||void 0===h?void 0:h.length)&&(0,m.jsx)(_.Z,{title:"No goods.",customStyleContainer:{marginTop:"1.5rem"}})]})]})})};var S=n(92673);const T=e=>{let{onClose:t,onNavigate:n,mid:a,stid:i,flow:l}=e;const[o,c]=(0,s.useState)(1),[d,r]=(0,s.useState)({arr:[],goods:[],goodsId:[]});return(0,m.jsx)(m.Fragment,{children:1===o?(0,m.jsx)(N,{onClose:t,stid:i,onGoodsSelect:e=>{r((t=>({...t,goods:null===e||void 0===e?void 0:e.goods,goodsId:null===e||void 0===e?void 0:e.goodsId}))),c(2)},dataState:d}):2===o?(0,m.jsx)(S.Z,{onClose:()=>c(1),state:d,setStep:()=>c(3),setState:r}):3===o?(0,m.jsx)(h,{onClose:()=>c(2),state:d,onParentClose:t,stid:i,onNavigate:n,flow:l,mid:a}):null})}},70179:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var s=n(43504),a=n(90904),i=n(98967),l=n(63162),o=n(80184);const c=e=>{let{parentState:t,inititalUrl:n}=e;const[c]=(0,s.lr)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.Z,{children:d.map((e=>{var s;return(0,o.jsx)(l.Z,{tab:e,isLink:!0,isActive:null===(s=e.groupIs)||void 0===s?void 0:s.includes(c.get("n")),parentState:t,url:"".concat(n).concat(e.urlKey)},null===e||void 0===e?void 0:e.id)}))}),(0,o.jsx)(a.Z,{customStyleBorder:{marginBlock:"0"}})]})},d=[{label:"register",id:"register",urlKey:"",groupIs:["",null]},{label:"request",id:"request",urlKey:"&n=request",groupIs:["request"]},{label:"issue",id:"issue",urlKey:"&n=issue",groupIs:["issue"]},{label:"stocktake",id:"stocktake",urlKey:"&n=stocktake",groupIs:["stocktake"]},{label:"consumption",id:"consumption",urlKey:"&n=consumption",groupIs:["consumption"]},{label:"return",id:"return",urlKey:"&n=return",groupIs:["return"]},{label:"maintenance",id:"maintenance",urlKey:"&n=maintenance",groupIs:["maintenance"]}]},80888:(e,t,n)=>{"use strict";var s=n(79047);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,l){if(l!==s){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},52007:(e,t,n)=>{e.exports=n(80888)()},79047:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},98472:(e,t,n)=>{e.exports=n(23561)},98015:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=n(72791),l=(s=i)&&s.__esModule?s:{default:s},o=n(51509),c=n(58333);var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"buildURI",value:function(){return o.buildURI.apply(void 0,arguments)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=e.headers,s=e.separator,a=e.enclosingCharacter,i=e.uFEFF,l=e.target,o=e.specs,c=e.replace;this.state.page=window.open(this.buildURI(t,i,n,s,a),l,o,c)}},{key:"getWindow",value:function(){return this.state.page}},{key:"render",value:function(){return null}}]),t}(l.default.Component);d.defaultProps=Object.assign(c.defaultProps,{target:"_blank"}),d.propTypes=c.propTypes,t.default=d},39088:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),l=n(72791),o=(s=l)&&s.__esModule?s:{default:s},c=n(51509),d=n(58333);var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.buildURI=n.buildURI.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"buildURI",value:function(){return c.buildURI.apply(void 0,arguments)}},{key:"handleLegacy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(window.navigator.msSaveOrOpenBlob){e.preventDefault();var n=this.props,s=n.data,a=n.headers,i=n.separator,l=n.filename,o=n.enclosingCharacter,d=n.uFEFF,r=t&&"function"===typeof s?s():s,u=new Blob([d?"\ufeff":"",(0,c.toCSV)(r,a,i,o)]);return window.navigator.msSaveBlob(u,l),!1}}},{key:"handleAsyncClick",value:function(e){var t=this;this.props.onClick(e,(function(n){!1!==n?t.handleLegacy(e,!0):e.preventDefault()}))}},{key:"handleSyncClick",value:function(e){!1===this.props.onClick(e)?e.preventDefault():this.handleLegacy(e)}},{key:"handleClick",value:function(){var e=this;return function(t){if("function"===typeof e.props.onClick)return e.props.asyncOnClick?e.handleAsyncClick(t):e.handleSyncClick(t);e.handleLegacy(t)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,s=t.headers,i=t.separator,l=t.filename,c=t.uFEFF,d=t.children,r=(t.onClick,t.asyncOnClick,t.enclosingCharacter),u=function(e,t){var n={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n}(t,["data","headers","separator","filename","uFEFF","children","onClick","asyncOnClick","enclosingCharacter"]),v="undefined"===typeof window?"":this.buildURI(n,c,s,i,r);return o.default.createElement("a",a({download:l},u,{ref:function(t){return e.link=t},target:"_self",href:v,onClick:this.handleClick()}),d)}}]),t}(o.default.Component);r.defaultProps=d.defaultProps,r.propTypes=d.propTypes,t.default=r},51509:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var a=t.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},i=t.isJsons=function(e){return Array.isArray(e)&&e.every((function(e){return"object"===("undefined"===typeof e?"undefined":n(e))&&!(e instanceof Array)}))},l=t.isArrays=function(e){return Array.isArray(e)&&e.every((function(e){return Array.isArray(e)}))},o=t.jsonsHeaders=function(e){return Array.from(e.map((function(e){return Object.keys(e)})).reduce((function(e,t){return new Set([].concat(s(e),s(t)))}),[]))},c=t.jsons2arrays=function(e,t){var n=t=t||o(e),a=t;i(t)&&(n=t.map((function(e){return e.label})),a=t.map((function(e){return e.key})));var l=e.map((function(e){return a.map((function(t){return d(t,e)}))}));return[n].concat(s(l))},d=t.getHeaderValue=function(e,t){var n=e.replace(/\[([^\]]+)]/g,".$1").split(".").reduce((function(e,t,n,s){var a=e[t];if(void 0!==a&&null!==a)return a;s.splice(1)}),t);return void 0===n?e in t?t[e]:"":n},r=t.elementOrEmpty=function(e){return"undefined"===typeof e||null===e?"":e},u=t.joiner=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'"';return e.filter((function(e){return e})).map((function(e){return e.map((function(e){return r(e)})).map((function(e){return""+n+e+n})).join(t)})).join("\n")},v=t.arrays2csv=function(e,t,n,a){return u(t?[t].concat(s(e)):e,n,a)},m=t.jsons2csv=function(e,t,n,s){return u(c(e,t),n,s)},h=t.string2csv=function(e,t,n,s){return t?t.join(n)+"\n"+e:e.replace(/"/g,'""')},j=t.toCSV=function(e,t,n,s){if(i(e))return m(e,t,n,s);if(l(e))return v(e,t,n,s);if("string"===typeof e)return h(e,t,n);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')};t.buildURI=function(e,t,n,s,i){var l=j(e,n,s,i),o=a()?"application/csv":"text/csv",c=new Blob([t?"\ufeff":"",l],{type:o}),d="data:"+o+";charset=utf-8,"+(t?"\ufeff":"")+l,r=window.URL||window.webkitURL;return"undefined"===typeof r.createObjectURL?d:r.createObjectURL(c)}},23561:(e,t,n)=>{"use strict";t.CSVLink=void 0;var s=i(n(98015)),a=i(n(39088));function i(e){return e&&e.__esModule?e:{default:e}}s.default,t.CSVLink=a.default},58333:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropsNotForwarded=t.defaultProps=t.propTypes=void 0;var s,a=n(72791),i=((s=a)&&s.__esModule,n(52007));t.propTypes={data:(0,i.oneOfType)([i.string,i.array,i.func]).isRequired,headers:i.array,target:i.string,separator:i.string,filename:i.string,uFEFF:i.bool,onClick:i.func,asyncOnClick:i.bool,enclosingCharacter:i.string},t.defaultProps={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},t.PropsNotForwarded=["data","headers"]},22984:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s={studentMCQ:"Tabs_studentMCQ__JqqjO",mcqToptabs:"Tabs_mcqToptabs__YfEJB",mcqTop:"Tabs_mcqTop__eI5Gu",mcqTopItem:"Tabs_mcqTopItem__KkV+Q",active:"Tabs_active__j6mN9"}}}]);
//# sourceMappingURL=61695.923eee40.chunk.js.map