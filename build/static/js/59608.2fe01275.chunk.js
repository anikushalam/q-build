(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[59608],{11728:(e,l,t)=>{"use strict";t.d(l,{F5:()=>o,TW:()=>s,Vf:()=>a,Wt:()=>i,XT:()=>c,sY:()=>n});const i=[{key:"ALL_BATCH",name:"all_batches"},{key:"ACTIVE_BATCH",name:"active_batches"}],n=[{key:"ALL",name:"all_departments"},{key:"PARTICULAR",name:"particular_department"}],s=[{key:"ALL_BATCH",name:"all_batches"},{key:"PARTICULAR_BATCH",name:"particular_batch"}],o=[{key:"All",name:"all_departments"},{key:"Particular",name:"particular_department"}],a=[{key:"All",name:"all_batches"},{key:"Current",name:"current"},{key:"Particular",name:"particular_batch"}],c=[{key:"All",name:"all_batches"},{key:"Current",name:"current"}]},31897:(e,l,t)=>{"use strict";t.d(l,{Z:()=>c});var i=t(72791),n=t(39230),s=t(52245),o=t(98684),a=t(80184);const c=e=>{let{selectLabel:l,onClick:t,selectedValue:c,options:d,customStyleContainer:r,customLabelStyle:u,customListStyle:_,errorShow:v,defalutValue:m,viewAs:h,isFull:f,isDenied:p}=e;const{t:x}=(0,n.$G)(),[j,b]=(0,i.useState)(!1),[g,y]=(0,i.useState)(""),Z=()=>{p||b((e=>!e))};(0,i.useEffect)((()=>{"NORMAL_FILTER"===h&&y(m)}),[h,m]),(0,i.useEffect)((()=>{if("CUSTOM_FILTER"===h){let i="";for(let n of d)for(let s of m)if((null===n||void 0===n?void 0:n._id)===s){var e,l,t;let s=null!==(e=null!==(l=null!==(t=null===n||void 0===n?void 0:n.dName)&&void 0!==t?t:null===n||void 0===n?void 0:n.batchName)&&void 0!==l?l:null===n||void 0===n?void 0:n.className)&&void 0!==e?e:"";i=i?i+", "+s:s}y(i)}}),[h,m,d]);return(0,a.jsxs)("div",{className:s.Z.form_input_container,style:{...r},children:[(0,a.jsxs)("p",{className:s.Z.join_form_select_paragraph,style:{...u},children:[l,v&&(0,a.jsxs)("span",{style:{color:"red",marginLeft:"15px"},children:["* ",x("form_require_label")]})]}),(0,a.jsxs)("section",{className:s.Z.join_form_select_custom,onClick:Z,children:[g?(0,a.jsx)("p",{className:s.Z.join_form_select_custom_paragraph,children:null!==g&&void 0!==g?g:""}):(0,a.jsx)("p",{className:s.Z.join_form_select_custom_paragraph,children:c}),j?(0,a.jsx)("img",{className:s.Z.join_form_select_custom_rotate_icon,src:"".concat(o.J7,"/down.svg"),alt:"categor icon"}):(0,a.jsx)("img",{className:s.Z.join_form_select_custom_icon,src:"".concat(o.J7,"/down.svg"),alt:"categor icon"})]}),j&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("section",{className:s.Z.join_form_select_custom_list,style:_,children:null===d||void 0===d?void 0:d.map(((e,l)=>{var i;return(0,a.jsx)("p",{onClick:()=>(e=>{var l;t(f?e:null===e||void 0===e?void 0:e._id),Z(),y(null!==(l=null===e||void 0===e?void 0:e.dName)&&void 0!==l?l:e)})(e),className:s.Z.join_form_select_custom_paragraph_option,children:null!==(i=null===e||void 0===e?void 0:e.dName)&&void 0!==i?i:e},l)}))})})]})}},26071:(e,l,t)=>{"use strict";t.d(l,{Z:()=>o});var i=t(51416),n=t(39230),s=t(80184);const o=e=>{let{tile:l,onTile:t,activeTile:o,customTileChild:a}=e;const{t:c}=(0,n.$G)();return(0,s.jsx)("div",{className:(null===l||void 0===l?void 0:l.key)===o?i.Z.tile_tile_active:i.Z.tile_tile,onClick:()=>t(null===l||void 0===l?void 0:l.key),style:a,children:c(null===l||void 0===l?void 0:l.name)})}},20659:(e,l,t)=>{"use strict";t.d(l,{Z:()=>o});var i=t(51416),n=t(39230),s=t(80184);const o=e=>{let{label:l,customTileLabel:t,customTileContainer:o,customTileStyle:a,errorShow:c,children:d}=e;const{t:r}=(0,n.$G)();return(0,s.jsxs)("div",{className:i.Z.tile_container,style:a,children:[l&&(0,s.jsxs)("h6",{className:i.Z.tile_label,style:t,children:[r(l),c?(0,s.jsxs)("span",{style:{color:"rgb(231, 75, 75)"},children:["* ",r("form_require_label")]}):null]}),(0,s.jsx)("section",{className:i.Z.tile_tile_container,style:o,children:d})]})}},4339:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>M});var i=t(72791),n=t(39230),s=t(56959),o=t(63687),a=t(21348),c=t(90904),d=t(55336),r=t(98684),u=t(93638),_=t(48293),v=t(16925),m=t(39896),h=t(24620),f=t(72261),p=t(17502),x=t(6758),j=t(20659),b=t(26071),g=t(11728),y=t(80184);const Z=e=>{let{onClose:l,fid:t,instituteId:s,onRefetch:o}=e;const{t:Z}=(0,n.$G)(),[A,L]=(0,i.useState)({activity_status:"",all_depart:"",batch_status:"",master:[],batch:"",depart:"",bank:"",single_student:""}),[k,C]=(0,i.useState)(!1),[T]=(0,x.wL)(),S=(0,i.useCallback)((e=>{null!==e&&void 0!==e&&e._id&&L((l=>({...l,all_depart:"PARTICULAR",depart:null===e||void 0===e?void 0:e._id})))}),[]),N=(0,i.useCallback)((e=>{null!==e&&void 0!==e&&e._id?L((l=>({...l,batch_status:"PARTICULAR_BATCH",batch:null===e||void 0===e?void 0:e._id}))):L((e=>({...e,batch_status:"ALL_BATCH",batch:""})))}),[]),Y=(0,i.useCallback)((e=>{L((l=>({...l,master:[null===e||void 0===e?void 0:e._id]})))}),[]),M=(0,i.useCallback)((e=>{L((l=>({...l,bank:null===e||void 0===e?void 0:e._id})))}),[]),U=e=>{e===A.activity_status?L((e=>({...e,activity_status:"",batch:""}))):L((l=>({...l,activity_status:e,batch:""})))},R=e=>{L((l=>({...l,all_depart:e,depart:""})))},F=e=>{L((l=>({...l,batch_status:e,batch:""})))};return(0,y.jsx)(_.Z,{onClose:l,children:(0,y.jsxs)("div",{className:v.Z.modal_container,children:[(0,y.jsx)(a.Z,{children:(0,y.jsxs)("div",{className:v.Z.modal_container_outer_header,children:[(0,y.jsx)("div",{className:v.Z.modal_container_header,children:(0,y.jsx)("h6",{children:Z("overall_fee_statistics_filter")})}),(0,y.jsx)("img",{src:"".concat(r.J7,"/close.svg"),alt:"close icon",onClick:l})]})}),(0,y.jsx)(c.Z,{}),(0,y.jsxs)(a.Z,{customStyle:{paddingTop:"0"},children:[(0,y.jsx)(j.Z,{label:"activity_type",children:null===g.Wt||void 0===g.Wt?void 0:g.Wt.map((e=>(0,y.jsx)(b.Z,{tile:e,onTile:U,activeTile:A.activity_status},null===e||void 0===e?void 0:e.key)))}),A.activity_status?null:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(j.Z,{label:"department_type",children:null===g.sY||void 0===g.sY?void 0:g.sY.map((e=>(0,y.jsx)(b.Z,{tile:e,onTile:R,activeTile:A.all_depart},null===e||void 0===e?void 0:e.key)))}),"PARTICULAR"===A.all_depart?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.Z,{fid:t,onSelect:S,onlyDepartment:!0}),(0,y.jsx)(j.Z,{label:"batch_type",children:null===g.TW||void 0===g.TW?void 0:g.TW.map((e=>(0,y.jsx)(b.Z,{tile:e,onTile:F,activeTile:A.batch_status},null===e||void 0===e?void 0:e.key)))}),"PARTICULAR_BATCH"===A.batch_status?(0,y.jsx)(h.Z,{did:A.depart,onSelect:N,onlyBatch:!0}):null,(0,y.jsx)(f.Z,{did:A.depart,onSelect:Y,instituteId:s})]}):null,(0,y.jsx)(p.Z,{fid:t,onSelect:M})]}),(0,y.jsx)(u.Z,{label:"filter",onAction:()=>{t&&(C((e=>!e)),T({fid:t,moduleType:"OVERALL_VIEW",statisticsBody:A}).then((()=>{l(),o&&o(),C((e=>!e))})).catch({}))}})]}),k&&(0,y.jsx)(d.Z,{})]})})};var A=t(51136);const L=e=>{let{label:l,amount:t,iconUrl:i,onAction:s,arr:o}=e;const{t:a}=(0,n.$G)();return(0,y.jsxs)("div",{className:A.Z.osc_card,onClick:()=>{s(o)},children:[(0,y.jsx)("img",{src:i,alt:"overal icon"}),(0,y.jsxs)("div",{className:A.Z.osc_card_inner,children:[(0,y.jsxs)("h6",{children:[a("rs_only")," ",null!==t&&void 0!==t?t:0]}),(0,y.jsx)("p",{children:a(l)})]})]})};var k=t(16871);const C=e=>{var l,t,n,s,o,a,c,d,u,_,v,m,h,f,p;let{fnanceOverallFeeStatistics:x}=e;const j=(0,k.s0)(),b=(0,k.UO)(),g=(0,k.TH)(),Z=(0,i.useCallback)((e=>{if((null===e||void 0===e?void 0:e.length)>0){var l;let t="Institute"===(null===(l=g.state)||void 0===l?void 0:l.urlOffSet)?"/q/".concat(b.username,"/institute/member/finance?type=statistics-detail"):"/q/".concat(b.username,"/member/staff/finance?type=statistics-detail");j(t,{state:{...g.state,studentList:e,openAs:"OVERVIEW"}})}}),[j,b,g.state]);return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:A.Z.osc_container,children:[(0,y.jsxs)("div",{className:A.Z.osc_container_inner,children:[(0,y.jsx)(L,{iconUrl:"".concat(r.J7,"/total-fees.svg"),amount:null!==(l=null===x||void 0===x?void 0:x.total_fees)&&void 0!==l?l:0,label:"total_fees_to_be_collected",onAction:Z,arr:null===x||void 0===x?void 0:x.total_fees_arr}),(0,y.jsx)(L,{iconUrl:"".concat(r.J7,"/total-collection.svg"),amount:null!==(t=null===x||void 0===x?void 0:x.total_collect)&&void 0!==t?t:0,label:"total_collection",onAction:Z,arr:null===x||void 0===x?void 0:x.total_collect_arr}),(0,y.jsx)(L,{iconUrl:"".concat(r.J7,"/total-collected.svg"),amount:null!==(n=null===x||void 0===x?void 0:x.total_pending)&&void 0!==n?n:0,label:"total_outstanding",onAction:Z,arr:null===x||void 0===x?void 0:x.total_pending_arr})]}),(0,y.jsxs)("div",{className:A.Z.osc_container_inner,children:[(0,y.jsx)(L,{iconUrl:"".concat(r.J7,"/student-collection.svg"),amount:null!==(s=null===x||void 0===x?void 0:x.fees_to_be_collected_student)&&void 0!==s?s:0,label:"fees_to_be_collected_from_student",onAction:Z,arr:null===x||void 0===x?void 0:x.fees_to_be_collected_student_arr}),(0,y.jsx)(L,{iconUrl:"".concat(r.J7,"/student-collection.svg"),amount:null!==(o=null===x||void 0===x?void 0:x.collect_by_student)&&void 0!==o?o:0,label:"collection_from_student",onAction:Z,arr:null===x||void 0===x?void 0:x.collect_by_student_arr}),(0,y.jsx)(L,{iconUrl:"".concat(r.J7,"/student-pending.svg"),amount:null!==(a=null===x||void 0===x?void 0:x.pending_by_student)&&void 0!==a?a:0,label:"outstanding_from_student",onAction:Z,arr:null===x||void 0===x?void 0:x.pending_by_student_arr})]}),(0,y.jsxs)("div",{className:A.Z.osc_container_inner,children:[(0,y.jsx)(L,{iconUrl:"".concat(r.J7,"/gov-recieve.svg"),amount:null!==(c=null===x||void 0===x?void 0:x.fees_to_be_collected_government)&&void 0!==c?c:0,label:"fees_to_be_receive_as_scholarship",onAction:Z,arr:null===x||void 0===x?void 0:x.fees_to_be_collected_government_arr}),(0,y.jsx)(L,{iconUrl:"".concat(r.J7,"/gov-recieve.svg"),amount:null!==(d=null===x||void 0===x?void 0:x.collect_by_government)&&void 0!==d?d:0,label:"collection_as_scholarship",onAction:Z,arr:null===x||void 0===x?void 0:x.collect_by_government_arr}),(0,y.jsx)(L,{iconUrl:"".concat(r.J7,"/gov-pending.svg"),amount:null!==(u=null===x||void 0===x?void 0:x.pending_from_government)&&void 0!==u?u:0,label:"outstanding_as_scholarship",onAction:Z,arr:null===x||void 0===x?void 0:x.pending_from_government_arr})]}),(0,y.jsxs)("div",{className:A.Z.osc_container_inner,children:[(0,y.jsx)(L,{iconUrl:"".concat(r.J7,"/excess-fee.svg"),amount:null!==(_=null===x||void 0===x?void 0:x.internal_fees)&&void 0!==_?_:0,label:"other_internal_fees_to_be_collected",onAction:()=>{}}),(0,y.jsx)(L,{iconUrl:"".concat(r.J7,"/excess-fee.svg"),amount:null!==(v=null===x||void 0===x?void 0:x.internal_os_fees)&&void 0!==v?v:0,label:"outstanding_internal_fees",onAction:()=>{}}),(0,y.jsx)(L,{iconUrl:"".concat(r.J7,"/excess-fee.svg"),amount:null!==(m=null===x||void 0===x?void 0:x.excess_fees)&&void 0!==m?m:0,label:"excess_fees_paid_by_student",onAction:()=>{}})]}),(0,y.jsxs)("div",{className:A.Z.osc_container_inner,children:[(0,y.jsx)(L,{iconUrl:"".concat(r.J7,"/total-deposit.svg"),amount:null!==(h=null===x||void 0===x?void 0:x.total_deposits)&&void 0!==h?h:0,label:"deposits_to_be_refunded",onAction:()=>{}}),(0,y.jsx)(L,{iconUrl:"".concat(r.J7,"/total-income.svg"),amount:null!==(f=null===x||void 0===x?void 0:x.incomes)&&void 0!==f?f:0,label:"other_incomes",onAction:()=>{}}),(0,y.jsx)(L,{iconUrl:"".concat(r.J7,"/total-expense.svg"),amount:null!==(p=null===x||void 0===x?void 0:x.expenses)&&void 0!==p?p:0,label:"other_expenses",onAction:()=>{}})]})]})})};var T=t(97892),S=t.n(T),N=t(82824);const Y=e=>{var l,t,_,v;let{fid:m,instituteId:h}=e;const{t:f}=(0,n.$G)(),[p,j]=(0,i.useState)(""),[b,g]=(0,i.useState)(!1),[A]=(0,x.wL)(),{fnanceOverallFeeStatistics:L,fnanceOverallFeeStatisticsRefetch:k}=(0,x.Z2)({fid:m,skip:!m}),T=(0,i.useCallback)((()=>{j("")}),[]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(o.Z,{children:[(0,y.jsx)(a.Z,{children:(0,y.jsx)("div",{className:s.Z.fm_header_container,children:(0,y.jsx)("h6",{children:f("overall_fees_statitics")})})}),(0,y.jsx)(c.Z,{}),(0,y.jsxs)(a.Z,{customStyle:{paddingTop:"0.2rem"},children:[(0,y.jsxs)("div",{className:s.Z.fm_fs_container,children:[(0,y.jsxs)("h6",{className:s.Z.fm_title_heading,style:{flex:"2 2"},children:[f("applied_filter")," "," : ",null!==L&&void 0!==L&&null!==(l=L.fees_statistics_filter)&&void 0!==l&&l.department_all?null===L||void 0===L||null===(t=L.fees_statistics_filter)||void 0===t?void 0:t.department_all:null!==L&&void 0!==L&&null!==(_=L.fees_statistics_filter)&&void 0!==_&&_.batch_all?null===L||void 0===L||null===(v=L.fees_statistics_filter)||void 0===v?void 0:v.batch_all:""]}),(0,y.jsxs)("div",{className:s.Z.fm_fs_container_inner,style:{flex:"1 1"},children:[(0,y.jsx)(u.Z,{label:"filter",onAction:()=>{j("FILTER")},customStyle:{margin:"0"}}),(0,y.jsxs)("div",{className:s.Z.fm_fs_refetch_container,onClick:()=>{var e,l,t,i,n,s,o,a,c,d,r,u,_,v,h,f,p,x,j;!m||null!==A&&void 0!==A&&A.loading_status||(g((e=>!e)),A({fid:m,moduleType:"OVERALL_VIEW",statisticsBody:{activity_status:null!==(e=null===L||void 0===L||null===(l=L.fees_statistics_filter)||void 0===l||null===(t=l.bank_level)||void 0===t?void 0:t[0])&&void 0!==e?e:"",all_depart:null!==(i=null===L||void 0===L||null===(n=L.fees_statistics_filter)||void 0===n?void 0:n.department_all)&&void 0!==i?i:"",batch_status:null!==(s=null===L||void 0===L||null===(o=L.fees_statistics_filter)||void 0===o?void 0:o.batch_all)&&void 0!==s?s:"",master:null!==(a=null===L||void 0===L||null===(c=L.fees_statistics_filter)||void 0===c||null===(d=c.master_level)||void 0===d?void 0:d[0])&&void 0!==a?a:[],batch:null!==(r=null===L||void 0===L||null===(u=L.fees_statistics_filter)||void 0===u||null===(_=u.batch_level)||void 0===_?void 0:_[0])&&void 0!==r?r:"",depart:null!==(v=null===L||void 0===L||null===(h=L.fees_statistics_filter)||void 0===h||null===(f=h.department_level)||void 0===f?void 0:f[0])&&void 0!==v?v:"",bank:null!==(p=null===L||void 0===L||null===(x=L.fees_statistics_filter)||void 0===x||null===(j=x.bank_level)||void 0===j?void 0:j[0])&&void 0!==p?p:""}}).then((()=>{k(),g((e=>!e))})).catch({}))},children:[null!==A&&void 0!==A&&A.loading_status?(0,y.jsx)("img",{src:"".concat(r.Uw,"/loading.gif"),alt:"refetch icon"}):(0,y.jsx)("img",{src:"".concat(r.J7,"/refresh.svg"),alt:"refetch icon"}),(0,y.jsxs)("div",{className:s.Z.fm_fs_refetch_container_inner,children:[(0,y.jsx)("h6",{children:f("refetch_data")}),(0,y.jsxs)("p",{children:[f("last_updated")," : ",S()(null===L||void 0===L?void 0:L.last_update).format("DD MMM YYYY"),", ",(0,N.J)(null===L||void 0===L?void 0:L.last_update,"LT")]})]})]})]})]}),(0,y.jsx)(C,{fnanceOverallFeeStatistics:L})]})]}),"FILTER"===p?(0,y.jsx)(Z,{onClose:T,fid:m,instituteId:h,onRefetch:k}):null,b&&(0,y.jsx)(d.Z,{})]})},M=e=>{let{fid:l,instituteId:t}=e;return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(Y,{instituteId:t,fid:l})})}},24620:(e,l,t)=>{"use strict";t.d(l,{Z:()=>a});var i=t(6758),n=t(33880),s=t(39230),o=t(80184);const a=e=>{let{did:l,onSelect:t,onlyBatch:a,errorShow:c,defalutValue:d,isDenied:r}=e;const{t:u}=(0,s.$G)(),{departmentAllBatch:_}=(0,i._m)({did:l,skip:!l});return(0,o.jsx)(o.Fragment,{children:a?(0,o.jsx)(n.Z,{selectLabel:u("select_batch"),selectedValue:u("select_batch_placeholder"),options:(null===_||void 0===_?void 0:_.length)>0?_:[],onClick:t,isFull:!0,errorShow:c,defalutValue:d,isDenied:r}):(0,o.jsx)(n.Z,{selectLabel:u("select_batch"),selectedValue:u("select_batch_placeholder"),options:(null===_||void 0===_?void 0:_.length)>0?["ALL",..._]:["ALL"],onClick:t,isFull:!0,errorShow:c})})}},39896:(e,l,t)=>{"use strict";t.d(l,{Z:()=>a});var i=t(6758),n=t(31897),s=t(39230),o=t(80184);const a=e=>{let{fid:l,onSelect:t,onlyDepartment:a,errorShow:c,defalutValue:d,isDenied:r,customStyleContainer:u}=e;const{t:_}=(0,s.$G)(),{instituteAllDepartment:v}=(0,i.Jv)({fid:l,skip:!l});return(0,o.jsx)(o.Fragment,{children:a?(0,o.jsx)(n.Z,{selectLabel:_("select_department"),selectedValue:_("select_department_placeholder"),options:(null===v||void 0===v?void 0:v.length)>0?v:[],onClick:t,isFull:!0,errorShow:c,defalutValue:d,viewAs:"NORMAL_FILTER",isDenied:r,customStyleContainer:u}):(0,o.jsx)(n.Z,{selectLabel:_("select_department"),selectedValue:_("select_department_placeholder"),options:(null===v||void 0===v?void 0:v.length)>0?["ALL","By Bank","Particular Student",...v]:["ALL","By Bank","Particular Student"],onClick:t,isFull:!0,errorShow:c,customStyleContainer:u})})}},72261:(e,l,t)=>{"use strict";t.d(l,{Z:()=>a});var i=t(6758),n=t(40739),s=t(39230),o=t(80184);const a=e=>{let{instituteId:l,did:t,onSelect:a,errorShow:c,defalutValue:d,isDenied:r}=e;const{t:u}=(0,s.$G)(),{departmentAllClassMaster:_}=(0,i.lj)({data:{id:l,did:t},skip:l?!t:!l});return(0,o.jsx)(n.Z,{selectLabel:u("select_standard"),selectedValue:u("select_standard_placeholder"),options:(null===_||void 0===_?void 0:_.length)>0?[..._]:[],onClick:a,isFull:!0,errorShow:c,defalutValue:d,isDenied:r})}},82824:(e,l,t)=>{"use strict";t.d(l,{J:()=>a,Z:()=>c});var i=t(99893),n=t.n(i),s=t(97892),o=t.n(s);const a=(e,l)=>(o().extend(n()),o()(e).format(l)),c=(e,l,t)=>{var i;return o()()[e]("".concat(null===(i=o()(t))||void 0===i?void 0:i.format("YYYY-MM-DD")),l)}},99893:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(l,t,i){var n=t.prototype,s=n.format;i.en.formats=e,n.format=function(l){void 0===l&&(l="YYYY-MM-DDTHH:mm:ssZ");var t=this.$locale().formats,i=function(l,t){return l.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(l,i,n){var s=n&&n.toUpperCase();return i||t[n]||e[n]||t[s].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,l,t){return l||t.slice(1)}))}))}(l,void 0===t?{}:t);return s.call(this,i)}}}()}}]);
//# sourceMappingURL=59608.2fe01275.chunk.js.map