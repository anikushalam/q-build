"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[78778],{67923:(e,l,i)=>{i.d(l,{Z:()=>n});i(72791);var t=i(38733),o=i(80184);const n=e=>{let{labelText:l,value:i,customStyleContainer:n,customStyleLabel:s,customStyleValue:d}=e;return(0,o.jsxs)("div",{className:t.Z.join_form_container_view,style:{...n},children:[(0,o.jsx)("label",{className:t.Z.join_form_label_view,style:{...s},children:l}),(0,o.jsx)("h6",{className:t.Z.join_form_input_view,style:{...d},children:i})]})}},34219:(e,l,i)=>{i.d(l,{Z:()=>n});i(72791);var t=i(11575),o=i(80184);const n=e=>{let{customStyleContainer:l,title:i,subtitle:n,costomTextTitleStyle:s,costomTextSubtitleStyle:d}=e;return(0,o.jsxs)("div",{className:t.Z.empty_container,style:l,children:[i&&(0,o.jsx)("h6",{style:s,children:i}),n&&(0,o.jsx)("p",{style:d,children:n})]})}},49384:(e,l,i)=>{i.d(l,{Z:()=>n});i(72791);var t=i(6307),o=i(80184);const n=()=>(0,o.jsx)(t.iT,{ariaLabel:"loading-indicator",height:20,width:20,color:"white",secondaryColor:"#1c023b"})},36665:(e,l,i)=>{i.d(l,{Z:()=>s});i(72791);var t=i(12072),o=i(1874),n=i(80184);const s=e=>{let{onClose:l,children:i}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z,{onClose:l}),(0,n.jsx)(t.Z,{children:i})]})}},66233:(e,l,i)=>{i.r(l),i.d(l,{default:()=>Sl});var t=i(72791),o=i(87087),n=i(16871),s=i(95048);const d="LibraryHead_departmenthead__Cbrn7";var a=i(37111),r=i(47630),c=i(39230),u=i(23441),v=i(55581),m=i(11105),_=i(72426),h=i.n(_),f=i(69721),x=i(80184);const g=function(e){var l,i,t,o,n,s,d,a,u,v,m,_,g,b,j,p,k,N,y,S,Z,C,F,M,I;let{book:w}=e;const{t:L}=(0,c.$G)();return(0,x.jsxs)("div",{className:r.Z.clc_card,children:[(0,x.jsxs)("div",{className:r.Z.clc_card_inner,children:[(0,x.jsx)("img",{className:r.Z.bookItemImg,src:null!==w&&void 0!==w&&null!==(l=w.book)&&void 0!==l&&l.photo?"".concat(f.yI,"/").concat(null===w||void 0===w||null===(i=w.book)||void 0===i?void 0:i.photo):"/images/defaultBook.png"}),(0,x.jsxs)("div",{className:r.Z.clc_card_inner_text,children:[(0,x.jsxs)("h6",{children:[" ",(null===w||void 0===w||null===(t=w.book)||void 0===t||null===(o=t.bookName)||void 0===o?void 0:o.length)>=18?"".concat(null===w||void 0===w||null===(n=w.book)||void 0===n||null===(s=n.bookName)||void 0===s?void 0:s.match(/.{1,18}/g)[0]," ..."):null===w||void 0===w||null===(d=w.book)||void 0===d?void 0:d.bookName]}),(0,x.jsxs)("p",{children:[L("accession_number")," ",": ",null!==(a=null===w||void 0===w||null===(u=w.book)||void 0===u?void 0:u.accession_number)&&void 0!==a?a:""]}),(0,x.jsxs)("p",{children:[L("issue_date"),": ",h()(null===w||void 0===w?void 0:w.issuedDate).format("Do MMM YYYY")," ",", ",h()(null===w||void 0===w?void 0:w.issuedDate).format("LT")]})]})]}),null!==w&&void 0!==w&&w.staff_member?(0,x.jsxs)("div",{className:r.Z.clc_card_inner,children:[(0,x.jsx)("img",{className:r.Z.bookItemImg,src:null!==w&&void 0!==w&&null!==(v=w.staff_member)&&void 0!==v&&v.staffProfilePhoto?"".concat(f.yI,"/").concat(null===w||void 0===w||null===(m=w.staff_member)||void 0===m?void 0:m.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg"}),(0,x.jsxs)("div",{className:r.Z.clc_card_inner_text,children:[(0,x.jsx)("h6",{children:"".concat(null===w||void 0===w||null===(_=w.staff_member)||void 0===_?void 0:_.staffFirstName," ").concat(null!==w&&void 0!==w&&null!==(g=w.staff_member)&&void 0!==g&&g.staffMiddleName?null===w||void 0===w||null===(b=w.staff_member)||void 0===b?void 0:b.staffMiddleName:""," ").concat(null===w||void 0===w||null===(j=w.staff_member)||void 0===j?void 0:j.staffLastName)}),(0,x.jsxs)("p",{children:[L("index_number")," ",": ",null!==(p=null===w||void 0===w||null===(k=w.staff_member)||void 0===k?void 0:k.staffROLLNO)&&void 0!==p?p:""]}),(0,x.jsxs)("p",{children:[L("rcv_date"),": ",h()(null===w||void 0===w?void 0:w.createdAt).format("Do MMM YYYY")," ",", ",h()(null===w||void 0===w?void 0:w.createdAt).format("LT")]})]})]}):(0,x.jsxs)("div",{className:r.Z.clc_card_inner,children:[(0,x.jsx)("img",{className:r.Z.bookItemImg,src:null!==w&&void 0!==w&&null!==(N=w.member)&&void 0!==N&&N.studentProfilePhoto?"".concat(f.yI,"/").concat(null===w||void 0===w||null===(y=w.member)||void 0===y?void 0:y.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg"}),(0,x.jsxs)("div",{className:r.Z.clc_card_inner_text,children:[(0,x.jsx)("h6",{children:"".concat(null===w||void 0===w||null===(S=w.member)||void 0===S?void 0:S.studentFirstName," ").concat(null!==w&&void 0!==w&&null!==(Z=w.member)&&void 0!==Z&&Z.studentMiddleName?null===w||void 0===w||null===(C=w.member)||void 0===C?void 0:C.studentMiddleName:""," ").concat(null===w||void 0===w||null===(F=w.member)||void 0===F?void 0:F.studentLastName)}),(0,x.jsxs)("p",{children:[L("gr_number")," ",": ",null!==(M=null===w||void 0===w||null===(I=w.member)||void 0===I?void 0:I.studentGRNO)&&void 0!==M?M:""]}),(0,x.jsxs)("p",{children:[L("rcv_date"),": ",h()(null===w||void 0===w?void 0:w.createdAt).format("Do MMM YYYY")," ",", ",h()(null===w||void 0===w?void 0:w.createdAt).format("LT")]})]})]})]})};var b=i(763);const j=function(){const{t:e}=(0,c.$G)(),l=(0,s.v9)((e=>e.libraryChange.lid)),[i,o]=(0,t.useState)(""),[n,d]=(0,u.YD)({skip:!i}),[a,_]=(0,t.useState)(1),[h,f]=(0,t.useState)([]),[j,p]=(0,t.useState)(!0),[k,N]=(0,t.useState)(!0),{getCollectedBooklist:y,getCollectedBookListRefetch:S}=(0,v.mU)({data:{lid:l,page:a,limit:10,search:i},skip:!l});(0,t.useEffect)((()=>{d&&j&&_((e=>e+1))}),[d,j]),(0,t.useEffect)((()=>{l&&(N(!0),S())}),[a,l,i,S]),(0,t.useEffect)((()=>{var e,l;null!==y&&void 0!==y&&y.collected?i?(f(null===y||void 0===y?void 0:y.collected),N(!1)):(f((e=>{var l,i;return null===(l=[...new Set(null===(i=[...e,...null===y||void 0===y?void 0:y.collected])||void 0===i?void 0:i.map(JSON.stringify))])||void 0===l?void 0:l.map(JSON.parse)})),N(!1)):0===(null===y||void 0===y||null===(e=y.collected)||void 0===e?void 0:e.length)&&N(!1),10===(null===y||void 0===y||null===(l=y.collected)||void 0===l?void 0:l.length)?p(!0):p(!1)}),[null===y||void 0===y?void 0:y.collected]);const Z=(0,t.useCallback)((0,b.debounce)((e=>o(e)),500),[]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:r.Z.searchContainerr,children:(0,x.jsxs)("div",{className:r.Z.searchContainer,children:[(0,x.jsx)("img",{alt:"",src:"/images/search-dept-icon.svg"}),(0,x.jsx)("input",{type:"text",placeholder:e("search-label"),onChange:e=>{return l=e.target.value,void Z(l);var l}})]})}),(0,x.jsx)("div",{className:r.Z.remainingFees,children:(0,x.jsx)("div",{className:r.Z.remainingFeesBottom,children:(0,x.jsxs)("div",{className:r.Z.itemsContainer,children:[null===h||void 0===h?void 0:h.map(((e,l)=>(null===h||void 0===h?void 0:h.length)===l+1?(0,x.jsx)("div",{ref:n,style:{width:"100%"},children:(0,x.jsx)(g,{book:e,status:"memberdetail"})},null===e||void 0===e?void 0:e._id):(0,x.jsx)(g,{book:e,status:"memberdetail"},null===e||void 0===e?void 0:e._id))),k&&(0,x.jsx)(m.Z,{}),!k&&0===(null===h||void 0===h?void 0:h.length)&&(0,x.jsx)("div",{className:r.Z.noData,children:(0,x.jsx)("img",{src:"/images/nodata.jpg",alt:""})})]})})})]})};var p=i(86864),k=i(25629);const N={issue_modal:"AssignBookMember_issue_modal__CsMlG",issueModalbody:"AssignBookMember_issueModalbody__zmjXk",issueModaltop:"AssignBookMember_issueModaltop__FEn0H",issuedBookItem:"AssignBookMember_issuedBookItem__O6ige",imgcontainer:"AssignBookMember_imgcontainer__SNcot",issuedBookItemMidright:"AssignBookMember_issuedBookItemMidright__rHLh0",issuedBookItemBottomLeft:"AssignBookMember_issuedBookItemBottomLeft__iGaQa",textt:"AssignBookMember_textt__asvMa",issueModaltopback:"AssignBookMember_issueModaltopback__mSNrr",issueModaltopsearch:"AssignBookMember_issueModaltopsearch__LOzxC",dash:"AssignBookMember_dash__93bg2",selectedText:"AssignBookMember_selectedText__ClVj+",itembookcontainer:"AssignBookMember_itembookcontainer__p1Vvj",itembookk:"AssignBookMember_itembookk__peZln",itembookcursor:"AssignBookMember_itembookcursor__tmbUD",issueBookk:"AssignBookMember_issueBookk__XKvQd",bookmargin:"AssignBookMember_bookmargin__vGsHh",bluetick:"AssignBookMember_bluetick__MsUzs",issuedDate:"AssignBookMember_issuedDate__lwPu+",issuebtn:"AssignBookMember_issuebtn__Dojwp",searchContainerr:"AssignBookMember_searchContainerr__yC1ub",searchContainer:"AssignBookMember_searchContainer__yk8R1",closeIconContainer:"AssignBookMember_closeIconContainer__ZHAU4",closeIcon:"AssignBookMember_closeIcon__pv9rs",author:"AssignBookMember_author__d7utn",authorLabel:"AssignBookMember_authorLabel__iKeFN"};var y=i(36665),S=i(98734),Z=i(6245);const C=e=>{let{onSearch:l,onBack:i,step:o}=e;const{t:n}=(0,c.$G)(),[s,d]=(0,t.useState)(!1),a=(0,t.useCallback)((0,b.debounce)((e=>l(e)),500),[]);return(0,x.jsx)("div",{className:N.issueModaltop,children:s?(0,x.jsxs)("div",{className:N.searchContainerr,children:[(0,x.jsxs)("div",{className:N.searchContainer,children:[(0,x.jsx)("img",{alt:"",src:"/images/search-dept-icon.svg"}),(0,x.jsx)("input",{type:"text",placeholder:n("search-label"),onChange:e=>{a(e.target.value)}})]}),(0,x.jsx)("div",{className:N.closeIconContainer,children:(0,x.jsx)("img",{onClick:()=>{l(""),d((e=>!e))},className:N.closeIcon,src:"/images/user_signup/close.svg",alt:""})})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("img",{className:N.issueModaltopback,src:"/images/back.svg",alt:"",onClick:i}),(0,x.jsx)("h6",{className:N.issueModaltoph6,children:n(0===o?"select_member":1===o?"select_book":"issued_preview")}),2!==o&&(0,x.jsx)("img",{onClick:()=>{d((e=>!e))},className:N.issueModaltopsearch,src:"/images/search-icon.svg",alt:""})]})})};const F=function(e){let{student:l,onAddMember:i,isStaff:t}=e;const{t:o}=(0,c.$G)();return(0,x.jsxs)("div",{className:N.issuedBookItem,onClick:()=>i(l),children:[(0,x.jsx)("div",{className:N.issuedBookItemMidleft,children:(0,x.jsx)("div",{className:N.imgcontainer,children:t?(0,x.jsx)("img",{src:null!==l&&void 0!==l&&l.staffProfilePhoto?"".concat(f.yI,"/").concat(null===l||void 0===l?void 0:l.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:""}):(0,x.jsx)("img",{src:null!==l&&void 0!==l&&l.studentProfilePhoto?"".concat(f.yI,"/").concat(null===l||void 0===l?void 0:l.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:""})})}),(0,x.jsx)("div",{className:N.issuedBookItemMidright,children:t?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{children:"".concat(null===l||void 0===l?void 0:l.staffFirstName," ").concat(null!==l&&void 0!==l&&l.staffMiddleName?null===l||void 0===l?void 0:l.staffMiddleName:""," ").concat(null===l||void 0===l?void 0:l.staffLastName)}),(0,x.jsxs)("p",{children:[o("index")," ",null===l||void 0===l?void 0:l.staffROLLNO]})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{children:"".concat(null===l||void 0===l?void 0:l.studentFirstName," ").concat(null!==l&&void 0!==l&&l.studentMiddleName?null===l||void 0===l?void 0:l.studentMiddleName:""," ").concat(null===l||void 0===l?void 0:l.studentLastName)}),(0,x.jsxs)("p",{children:[o("gr_no")," ",null===l||void 0===l?void 0:l.studentGRNO]})]})})]})},M=e=>{let{instituteId:l,onAddMember:i,onBack:o,step:n}=e;const[s,d]=(0,t.useState)(""),[a,r]=(0,u.YD)({skip:s}),[c,v]=(0,t.useState)([]),[_,h]=(0,t.useState)(1),[f,g]=(0,t.useState)(!0),[b,j]=(0,t.useState)(!0),{approveStudentList:p,approveStudentListRefetch:k}=(0,Z.Mu)({data:{id:l,page:_,limit:10},skip:!l}),{searchStudent:N,searchStudentRefetch:y}=(0,Z.iR)({data:{search:s,page:1,limit:10,id:l},skip:!s});(0,t.useEffect)((()=>{r&&f&&h((e=>e+1))}),[r,f]),(0,t.useEffect)((()=>{s&&l&&(j(!0),y())}),[s,l,_,y]),(0,t.useEffect)((()=>{l&&(j(!0),k())}),[l,_,k]),(0,t.useEffect)((()=>{var e,l,i;s?null!==N&&void 0!==N&&N.student?(v(1===_?null===N||void 0===N?void 0:N.student:e=>{var l,i;return null===(l=[...new Set(null===(i=[...e,...null===N||void 0===N?void 0:N.student])||void 0===i?void 0:i.map(JSON.stringify))])||void 0===l?void 0:l.map(JSON.parse)}),j(!1)):0===(null===N||void 0===N||null===(l=N.student)||void 0===l?void 0:l.length)&&j(!1):null!==p&&void 0!==p&&p.studentIns?(v(1===_?null===p||void 0===p?void 0:p.studentIns:e=>{var l,i;return null===(l=[...new Set(null===(i=[...e,...null===p||void 0===p?void 0:p.studentIns])||void 0===i?void 0:i.map(JSON.stringify))])||void 0===l?void 0:l.map(JSON.parse)}),j(!1)):0===(null===p||void 0===p||null===(i=p.studentIns)||void 0===i?void 0:i.length)&&j(!1);10===(null===p||void 0===p||null===(e=p.studentIns)||void 0===e?void 0:e.length)?g(!0):g(!1)}),[null===p||void 0===p?void 0:p.studentIns,null===N||void 0===N?void 0:N.student]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(C,{onBack:o,step:n,onSearch:e=>{h((e=>1)),d(e)}}),null===c||void 0===c?void 0:c.map(((e,l)=>(null===c||void 0===c?void 0:c.length)===l+1?(0,x.jsx)("div",{ref:a,children:(0,x.jsx)(F,{student:e,onAddMember:i})},null===e||void 0===e?void 0:e._id):(0,x.jsx)(F,{student:e,onAddMember:i},null===e||void 0===e?void 0:e._id))),b&&(0,x.jsx)(m.Z,{status:"white"})]})};const I=function(e){var l;let{book:i,status:t,onAddBook:o}=e;const{t:n}=(0,c.$G)();return(0,x.jsxs)("div",{className:"issueBook"!==t?"".concat(N.itembookk," ").concat(N.itembookcursor):N.itembookk,onClick:()=>{"selectbook"===t&&o(i)},children:["issueBook"===t&&(0,x.jsx)("img",{className:N.bluetick,src:"/images/library/bluetick.svg",alt:"verified"}),(0,x.jsx)("p",{className:N.selectedText,children:null===i||void 0===i?void 0:i.language}),(0,x.jsx)("img",{src:null!==i&&void 0!==i&&i.photo?"".concat(f.yI,"/").concat(null===i||void 0===i?void 0:i.photo):"/images/defaultBook.png",alt:""}),(0,x.jsxs)("div",{className:N.textt,children:[(0,x.jsx)("h6",{children:null===i||void 0===i?void 0:i.bookName}),(0,x.jsxs)("p",{className:N.author,children:[null===i||void 0===i?void 0:i.author," \xa0",(0,x.jsx)("span",{className:N.authorLabel,children:n("author")})]}),(0,x.jsxs)("p",{className:N.author,children:[n("accession_number")," "," : ",null!==(l=null===i||void 0===i?void 0:i.accession_number)&&void 0!==l?l:""," "]})]})]})},w=e=>{let{member:l,onAddBook:i,onBack:o,step:n,isView:d,role:a,mid:r}=e;const{t:_}=(0,c.$G)(),[h,g]=(0,u.YD)(),[b,j]=(0,t.useState)(1),[p,k]=(0,t.useState)(!0),[y,S]=(0,t.useState)(!0),[Z,F]=(0,t.useState)([]),[M,w]=(0,t.useState)(""),L=(0,s.v9)((e=>e.libraryChange)),{getBooklist:T,getBookListRefetch:D}=(0,v.O_)({data:{lid:null===L||void 0===L?void 0:L.lid,page:b,limit:10,search:M,flow:"ISSUE_BOOK",role:a,mid:r},skip:null!==L&&void 0!==L&&L.lid?!(null!==L&&void 0!==L&&L.lid):!r});(0,t.useEffect)((()=>{(null!==L&&void 0!==L&&L.lid||r||a)&&(S(!0),D())}),[null===L||void 0===L?void 0:L.lid,r,a,b,M,D]),(0,t.useEffect)((()=>{g&&p&&j((e=>e+1))}),[g,p]),(0,t.useEffect)((()=>{var e,l;M?(F(null===T||void 0===T?void 0:T.books),S(!1)):null!==T&&void 0!==T&&T.books?(F(1===b?null===T||void 0===T?void 0:T.books:e=>{var l,i;return null===(l=[...new Set(null===(i=[...e,...null===T||void 0===T?void 0:T.books])||void 0===i?void 0:i.map(JSON.stringify))])||void 0===l?void 0:l.map(JSON.parse)}),S(!1)):0===(null===T||void 0===T||null===(l=T.books)||void 0===l?void 0:l.length)&&S(!1);10===(null===T||void 0===T||null===(e=T.books)||void 0===e?void 0:e.length)?k(!0):k(!1)}),[null===T||void 0===T?void 0:T.books]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(C,{onBack:o,step:n,onSearch:e=>{j((e=>1)),w(e)}}),(0,x.jsxs)("div",{className:N.selectbook,children:[(0,x.jsxs)("div",{className:N.issuedBookItem,children:[(0,x.jsx)("p",{className:N.selectedText,children:_("selected")}),(0,x.jsx)("div",{className:N.issuedBookItemMidleft,children:(0,x.jsx)("div",{className:N.imgcontainer,children:"STAFF"===d?(0,x.jsx)("img",{src:null!==l&&void 0!==l&&l.staffProfilePhoto?"".concat(f.yI,"/").concat(null===l||void 0===l?void 0:l.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:""}):(0,x.jsx)("img",{src:null!==l&&void 0!==l&&l.studentProfilePhoto?"".concat(f.yI,"/").concat(null===l||void 0===l?void 0:l.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:""})})}),(0,x.jsx)("div",{className:N.issuedBookItemMidright,children:"STAFF"===d?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{children:"".concat(null===l||void 0===l?void 0:l.staffFirstName," ").concat(null!==l&&void 0!==l&&l.staffMiddleName?null===l||void 0===l?void 0:l.staffMiddleName:""," ").concat(null===l||void 0===l?void 0:l.staffLastName)}),(0,x.jsxs)("p",{children:[_("index")," ",null===l||void 0===l?void 0:l.staffROLLNO]})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{children:"".concat(null===l||void 0===l?void 0:l.studentFirstName," ").concat(null!==l&&void 0!==l&&l.studentMiddleName?null===l||void 0===l?void 0:l.studentMiddleName:""," ").concat(null===l||void 0===l?void 0:l.studentLastName)}),(0,x.jsxs)("p",{children:[_("gr_no")," ",null===l||void 0===l?void 0:l.studentGRNO]})]})})]}),(0,x.jsx)("div",{className:N.dash}),(0,x.jsxs)("div",{className:N.itembookcontainer,children:[null===Z||void 0===Z?void 0:Z.map(((e,l)=>(null===Z||void 0===Z?void 0:Z.length)===l+1?(0,x.jsx)("div",{ref:h,children:(0,x.jsx)(I,{status:"selectbook",book:e,onAddBook:i})},null===e||void 0===e?void 0:e._id):(0,x.jsx)(I,{status:"selectbook",book:e,onAddBook:i},null===e||void 0===e?void 0:e._id))),y&&(0,x.jsx)(m.Z,{status:"white"})]})]})]})};var L=i(26071),T=i(20659),D=i(61055);const A=e=>{let{member:l,book:i,onBack:o,step:n,onIssueBook:s,isView:d}=e;const{t:a}=(0,c.$G)(),[r,u]=(0,t.useState)({for_days:7,day_overdue_charge:""}),[v,m]=(0,t.useState)("ONE_WEEK"),_=e=>{u((l=>({...l,[e.target.name]:e.target.value})))},g=e=>{m(e),u((l=>({...l,for_days:"ONE_WEEK"===e?7:"ONE_MONTH"===e?30:""})))};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(C,{onBack:o,step:n}),(0,x.jsxs)("div",{className:N.issueBookk,children:[(0,x.jsx)("h6",{children:a("member")}),(0,x.jsxs)("div",{className:"".concat(N.itembookk," ").concat(N.bookmargin),children:[(0,x.jsx)("img",{className:N.bluetick,src:"/images/library/bluetick.svg",alt:"verified"}),(0,x.jsx)("div",{className:N.issuedBookItemMidleft,children:(0,x.jsx)("div",{className:N.imgcontainer,children:"STAFF"===d?(0,x.jsx)("img",{src:null!==l&&void 0!==l&&l.staffProfilePhoto?"".concat(f.yI,"/").concat(null===l||void 0===l?void 0:l.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:""}):(0,x.jsx)("img",{src:null!==l&&void 0!==l&&l.studentProfilePhoto?"".concat(f.yI,"/").concat(null===l||void 0===l?void 0:l.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:""})})}),(0,x.jsx)("div",{className:N.issuedBookItemMidright,children:"STAFF"===d?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{children:"".concat(null===l||void 0===l?void 0:l.staffFirstName," ").concat(null!==l&&void 0!==l&&l.staffMiddleName?null===l||void 0===l?void 0:l.staffMiddleName:""," ").concat(null===l||void 0===l?void 0:l.staffLastName)}),(0,x.jsxs)("p",{children:[a("index")," ",null===l||void 0===l?void 0:l.staffROLLNO]})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{children:"".concat(null===l||void 0===l?void 0:l.studentFirstName," ").concat(null!==l&&void 0!==l&&l.studentMiddleName?null===l||void 0===l?void 0:l.studentMiddleName:""," ").concat(null===l||void 0===l?void 0:l.studentLastName)}),(0,x.jsxs)("p",{children:[a("gr_no")," ",null===l||void 0===l?void 0:l.studentGRNO]})]})})]}),(0,x.jsx)("h6",{children:a("book")}),(0,x.jsx)(I,{book:i,status:"issueBook"}),(0,x.jsxs)("h6",{className:N.issuedDate,children:[a("issue_date")," : ",(0,x.jsx)("span",{children:h()().format("Do MMM YYYY")})]}),"STAFF"!==d?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(T.Z,{label:"duration",children:null===E||void 0===E?void 0:E.map((e=>(0,x.jsx)(L.Z,{tile:e,onTile:g,activeTile:v},null===e||void 0===e?void 0:e.key)))}),"OTHER"===v?(0,x.jsx)(D.Z,{label:a("how_many_days"),placeholder:a("how_many_days_placeholder"),name:"for_days",value:r.for_days,type:"text",onChange:_}):null,(0,x.jsx)(D.Z,{label:a("late_fees_per_day"),placeholder:a("late_fees_per_day_placeholder"),name:"day_overdue_charge",value:r.day_overdue_charge,type:"text",onChange:_,customFormInputContainer:{marginBottom:"1rem"}})]}):null,"STAFF"===d?(0,x.jsx)("button",{className:N.issuebtn,onClick:s,children:a("issue_book")}):(0,x.jsx)("button",{className:N.issuebtn,onClick:()=>{s({...r})},children:a("issue_book")})]})]})},E=[{key:"ONE_WEEK",name:"one_week"},{key:"ONE_MONTH",name:"one_months"},{key:"OTHER",name:"other"}];var B=i(12923);const R=e=>{let{instituteId:l,onAddMember:i,onBack:o,step:n}=e;const[s,d]=(0,t.useState)(""),[a,r]=(0,u.YD)({skip:s}),[c,v]=(0,t.useState)([]),[_,h]=(0,t.useState)(1),[f,g]=(0,t.useState)(!0),[b,j]=(0,t.useState)(!0),{assignSearchStaff:p,assignSearchStaffRefetch:k}=(0,B.vI)({skip:!l,search:{search:s,page:_,id:l,limit:10}});(0,t.useEffect)((()=>{r&&f&&h((e=>e+1))}),[r,f]),(0,t.useEffect)((()=>{l&&(j(!0),k())}),[s,l,_,k]),(0,t.useEffect)((()=>{var e,l,i;s?null!==p&&void 0!==p&&p.staff?(v(null===p||void 0===p?void 0:p.staff),j(!1)):0===(null===p||void 0===p||null===(l=p.staff)||void 0===l?void 0:l.length)&&j(!1):null!==p&&void 0!==p&&p.staff?(v(1===_?null===p||void 0===p?void 0:p.staff:e=>{var l,i;return null===(l=[...new Set(null===(i=[...e,...null===p||void 0===p?void 0:p.staff])||void 0===i?void 0:i.map(JSON.stringify))])||void 0===l?void 0:l.map(JSON.parse)}),j(!1)):0===(null===p||void 0===p||null===(i=p.staff)||void 0===i?void 0:i.length)&&j(!1);10===(null===p||void 0===p||null===(e=p.staff)||void 0===e?void 0:e.length)?g(!0):g(!1)}),[null===p||void 0===p?void 0:p.staff]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(C,{onBack:o,step:n,onSearch:e=>{h((e=>1)),d(e)}}),null===c||void 0===c?void 0:c.map(((e,l)=>(null===c||void 0===c?void 0:c.length)===l+1?(0,x.jsx)("div",{ref:a,children:(0,x.jsx)(F,{student:e,onAddMember:i,isStaff:!0})},null===e||void 0===e?void 0:e._id):(0,x.jsx)(F,{student:e,onAddMember:i,isStaff:!0},null===e||void 0===e?void 0:e._id))),b&&(0,x.jsx)(m.Z,{status:"white"})]})},P=e=>{let{onClose:l,instituteId:i,onRefetchWhenBookIssue:o,isView:n,role:d,mid:a}=e;const r=(0,s.v9)((e=>e.libraryChange)),[c,u]=(0,t.useState)(0),[m,_]=(0,t.useState)(!1),[h,f]=(0,t.useState)(""),[g,b]=(0,t.useState)(""),[j]=(0,v.EI)(),[p]=(0,v.n9)(),k=()=>{0===c?l():u(1===c?0:1)},Z=e=>{f(e),u(1)};return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(y.Z,{onClose:k,children:[(0,x.jsxs)("div",{className:N.issue_modal,children:[0===c&&("STAFF"===n?(0,x.jsx)(R,{instituteId:i,onAddMember:Z,step:c,onBack:k}):(0,x.jsx)(M,{instituteId:i,onAddMember:Z,step:c,onBack:k})),1===c&&(0,x.jsx)(w,{onAddBook:e=>{b(e),u(2)},step:c,onBack:k,member:h,isView:n,role:d,mid:a}),2===c&&(0,x.jsx)(A,{step:c,onBack:k,book:g,member:h,onIssueBook:e=>{null!==r&&void 0!==r&&r.lid&&null!==h&&void 0!==h&&h._id&&null!==g&&void 0!==g&&g._id&&(_(!0),"STAFF"===n?p({lid:null===r||void 0===r?void 0:r.lid,issueData:{memberId:null===h||void 0===h?void 0:h._id,bookId:null===g||void 0===g?void 0:g._id,flow:"Normal"}}).then((()=>{o(),l(!1),_(!1)})).catch((()=>{})):j({lid:null===r||void 0===r?void 0:r.lid,issueData:{memberId:null===h||void 0===h?void 0:h._id,bookId:null===g||void 0===g?void 0:g._id,flow:"Normal",...e}}).then((()=>{o(),l(!1),_(!1)})).catch((()=>{})))},isView:n})]}),m&&(0,x.jsx)(S.Z,{})]})})};const O=function(e){let{insId:l,role:i,mid:o}=e;const{t:n}=(0,c.$G)(),[d,a]=(0,t.useState)(""),[r,_]=(0,u.YD)({skip:!d}),[h,f]=(0,t.useState)(1),[g,j]=(0,t.useState)([]),[N,y]=(0,t.useState)(!0),[S,Z]=(0,t.useState)(!0),[C,F]=(0,t.useState)(!1),[M,I]=(0,t.useState)(!1),[w,L]=(0,t.useState)(!1),T=(0,s.v9)((e=>e.libraryChange.lid)),{getIssuedBooklist:D,getIssuedBookListRefetch:A}=(0,v.aA)({data:{lid:T,page:h,limit:10,search:d},skip:!T});(0,t.useEffect)((()=>{_&&N&&f((e=>e+1))}),[_,N]),(0,t.useEffect)((()=>{T&&(Z(!0),A())}),[h,T,d,A]),(0,t.useEffect)((()=>{var e;if(null!==D&&void 0!==D&&D.issues)if(d)j(null===D||void 0===D?void 0:D.issues),Z(!1);else if(C)j(null===D||void 0===D?void 0:D.issues),Z(!1),F(!1);else{var l;null!==D&&void 0!==D&&D.issues?(j((e=>{var l,i;return null===(l=[...new Set(null===(i=[...e,...null===D||void 0===D?void 0:D.issues])||void 0===i?void 0:i.map(JSON.stringify))])||void 0===l?void 0:l.map(JSON.parse)})),Z(!1)):0===(null===D||void 0===D||null===(l=D.issues)||void 0===l?void 0:l.length)&&Z(!1)}10===(null===D||void 0===D||null===(e=D.issues)||void 0===e?void 0:e.length)?y(!0):y(!1)}),[null===D||void 0===D?void 0:D.issues]);const E=(0,t.useCallback)((0,b.debounce)((e=>a(e)),500),[]),B=()=>{f(1),F(!0),Z(!0),A()};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:p.Z.searchContainerr,children:[(0,x.jsxs)("div",{className:p.Z.searchContainer,children:[(0,x.jsx)("img",{alt:"",src:"/images/search-dept-icon.svg"}),(0,x.jsx)("input",{type:"text",placeholder:n("search-label"),onChange:e=>{return l=e.target.value,void E(l);var l}})]}),(0,x.jsx)("div",{className:p.Z.newBtn,onClick:()=>I(!0),children:n("issue_book")}),(0,x.jsx)("div",{className:p.Z.newBtn,onClick:()=>L(!0),children:n("issue_staff_book")})]}),(0,x.jsx)("div",{className:p.Z.remainingFees,children:(0,x.jsx)("div",{className:p.Z.remainingFeesBottom,children:(0,x.jsxs)("div",{className:p.Z.itemsContainer,children:[null===g||void 0===g?void 0:g.map(((e,l)=>{var i,t;return(null===g||void 0===g?void 0:g.length)===l+1?(0,x.jsx)("div",{ref:r,className:p.Z.itemsRef,children:(0,x.jsx)(k.Z,{book:e,member:null!==(i=null===e||void 0===e?void 0:e.member)&&void 0!==i?i:null===e||void 0===e?void 0:e.staff_member,issueId:null===e||void 0===e?void 0:e._id,onRefetchWhenBookCollect:B})},l):(0,x.jsx)("div",{className:p.Z.itemsRef,children:(0,x.jsx)(k.Z,{book:e,member:null!==(t=null===e||void 0===e?void 0:e.member)&&void 0!==t?t:null===e||void 0===e?void 0:e.staff_member,issueId:null===e||void 0===e?void 0:e._id,onRefetchWhenBookCollect:B})},l)})),S&&(0,x.jsx)(m.Z,{}),!S&&0===(null===g||void 0===g?void 0:g.length)&&(0,x.jsx)("div",{className:p.Z.noData,children:(0,x.jsx)("img",{src:"/images/nodata.jpg",alt:""})})]})})}),M&&(0,x.jsx)(P,{instituteId:l,onClose:()=>I(!1),onRefetchWhenBookIssue:B,role:i,mid:o}),w&&(0,x.jsx)(P,{instituteId:l,onClose:()=>L(!1),onRefetchWhenBookIssue:B,isView:"STAFF",role:i,mid:o})]})};var Y=i(52398),G=i(61969);const W=function(e){let{index:l,member:i,setMid:t,mid:o}=e;const{t:n}=(0,c.$G)();return(0,x.jsxs)("div",{className:(null===i||void 0===i?void 0:i._id)===o?"".concat(G.Z.memberItem," ").concat(G.Z.memberItemactive):G.Z.memberItem,onClick:()=>t(null===i||void 0===i?void 0:i._id),children:[(0,x.jsx)("div",{className:G.Z.issuedBookItemMidleft,children:(0,x.jsx)("div",{className:G.Z.imgcontainer,children:(0,x.jsx)("img",{src:"1"!==(null===i||void 0===i?void 0:i.photoId)?"".concat(f.yI,"/").concat(null===i||void 0===i?void 0:i.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:""})})}),(0,x.jsxs)("div",{className:G.Z.issuedBookItemMidright,children:[(0,x.jsx)("h6",{children:"".concat(null===i||void 0===i?void 0:i.studentFirstName," ").concat(null!==i&&void 0!==i&&i.studentMiddleName?null===i||void 0===i?void 0:i.studentMiddleName:""," ").concat(null===i||void 0===i?void 0:i.studentLastName)}),(0,x.jsxs)("p",{children:[n("index_no")," : ",l," "]})]})]})},z="Tabs_mcqToptabs__ccG7U",J="Tabs_mcqTop__20iW4",V="Tabs_mcqTopItem__oghuj",H="Tabs_active__6c5Pg";const U=function(e){let{activeIndex:l,setActiveIndex:i}=e;const{t:t}=(0,c.$G)();return(0,x.jsx)("div",{className:J,children:(0,x.jsxs)("div",{className:z,children:[(0,x.jsx)("div",{className:0===l?"".concat(V," ").concat(H):V,onClick:()=>i(0),children:t("issued")}),(0,x.jsx)("div",{className:1===l?"".concat(V," ").concat(H):V,onClick:()=>i(1),children:t("history")}),(0,x.jsx)("div",{className:2===l?"".concat(V," ").concat(H):V,onClick:()=>i(2),children:t("in_out_history")})]})})},q=t.forwardRef(((e,l)=>{var i,t;return(0,x.jsxs)("div",{className:G.Z.membersContainer,children:[null===e||void 0===e||null===(i=e.borrowList)||void 0===i?void 0:i.map(((i,t)=>{var o;return(null===e||void 0===e||null===(o=e.borrowList)||void 0===o?void 0:o.length)===t+1?(0,x.jsx)("div",{ref:l,className:G.Z.limember,children:(0,x.jsx)(k.Z,{book:i,member:null===e||void 0===e?void 0:e.member,issueId:null===i||void 0===i?void 0:i._id,onRefetchWhenBookCollect:null===e||void 0===e?void 0:e.onRefetchWhenBookCollect})},t):(0,x.jsx)("div",{className:G.Z.limember,children:(0,x.jsx)(k.Z,{book:i,member:null===e||void 0===e?void 0:e.member,issueId:null===i||void 0===i?void 0:i._id,onRefetchWhenBookCollect:null===e||void 0===e?void 0:e.onRefetchWhenBookCollect})},t)})),(null===e||void 0===e?void 0:e.showingDataLoading)&&(0,x.jsx)(m.Z,{}),!(null!==e&&void 0!==e&&e.showingDataLoading)&&0===(null===e||void 0===e||null===(t=e.borrowList)||void 0===t?void 0:t.length)&&(0,x.jsx)("div",{className:G.Z.noData,children:(0,x.jsx)("img",{src:"/images/nodata.jpg",alt:""})})]})}));var $=i(11053);const K=function(e){var l,i;let{mid:o}=e;const[n,s]=(0,u.YD)(),[d,a]=(0,t.useState)(1),[r,c]=(0,t.useState)(!0),[_,h]=(0,t.useState)(!0),[f,g]=(0,t.useState)({memberId:"",historyList:[]}),{getMemberHistorylist:b,getMemberHistoryListRefetch:j}=(0,v.Ef)({data:{sid:o,page:f.memberId!==o?1:d,limit:10},skip:!o});return(0,t.useEffect)((()=>{s&&r&&a((e=>e+1))}),[s,r]),(0,t.useEffect)((()=>{o&&(h(!0),j())}),[d,o,j]),(0,t.useEffect)((()=>{var e,l;null!==b&&void 0!==b&&b.history?f.memberId===o?(g((e=>{var l,i;return{...e,historyList:null===(l=[...new Set(null===(i=[...e.historyList,...null===b||void 0===b?void 0:b.history])||void 0===i?void 0:i.map(JSON.stringify))])||void 0===l?void 0:l.map(JSON.parse)}})),h(!1)):(g({memberId:o,historyList:[...null===b||void 0===b?void 0:b.history]}),h(!1)):0===(null===b||void 0===b||null===(e=b.history)||void 0===e?void 0:e.length)&&h(!1),10===(null===b||void 0===b||null===(l=b.history)||void 0===l?void 0:l.length)?c(!0):c(!1)}),[null===b||void 0===b?void 0:b.history]),(0,x.jsxs)("div",{className:G.Z.membersContainer,children:[null===(l=f.historyList)||void 0===l?void 0:l.map(((e,l)=>{var i;return(null===(i=f.historyList)||void 0===i?void 0:i.length)===l+1?(0,x.jsx)("div",{ref:n,className:G.Z.limember,children:(0,x.jsx)($.Z,{status:"memberdetail",book:e})},l):(0,x.jsx)("div",{className:G.Z.limember,children:(0,x.jsx)($.Z,{status:"memberdetail",book:e})},l)})),_&&(0,x.jsx)(m.Z,{}),!_&&0===(null===(i=f.historyList)||void 0===i?void 0:i.length)&&(0,x.jsx)("div",{className:G.Z.noData,children:(0,x.jsx)("img",{src:"/images/nodata.jpg",alt:""})})]})};var Q=i(20224);const X=function(e){var l,i,o,n,s,d,a,r,m,_,h,g,b,j,p;let{mid:k}=e;const{t:N}=(0,c.$G)(),[y,S]=(0,t.useState)(0),[Z,C]=(0,u.YD)(),[F,M]=(0,t.useState)(1),[I,w]=(0,t.useState)(!0),[L,T]=(0,t.useState)(!1),[D,A]=(0,t.useState)(!0),[E,B]=(0,t.useState)({student:"",issueList:[]}),{getMemberBooklist:R,getMemberBookListRefetch:P}=(0,v.QJ)({data:{sid:k,page:E.student!==k?1:F,limit:10},skip:!k});return(0,t.useEffect)((()=>{C&&I&&M((e=>e+1))}),[C,I]),(0,t.useEffect)((()=>{k&&(A(!0),P())}),[F,k,P]),(0,t.useEffect)((()=>{var e,l,i,t,o;if(null!==R&&void 0!==R&&null!==(e=R.student)&&void 0!==e&&e.borrow){var n,s,d;if(E.student===(null===R||void 0===R||null===(n=R.student)||void 0===n?void 0:n._id))L?(B((e=>{var l;return{...e,issueList:[...null===R||void 0===R||null===(l=R.student)||void 0===l?void 0:l.borrow]}})),T(!1)):B((e=>{var l,i,t;return{...e,issueList:null===(l=[...new Set(null===(i=[...e.issueList,...null===R||void 0===R||null===(t=R.student)||void 0===t?void 0:t.borrow])||void 0===i?void 0:i.map(JSON.stringify))])||void 0===l?void 0:l.map(JSON.parse)}}));else B({student:null===R||void 0===R||null===(s=R.student)||void 0===s?void 0:s._id,issueList:[...null===R||void 0===R||null===(d=R.student)||void 0===d?void 0:d.borrow]});A(!1)}else 0===(null===R||void 0===R||null===(l=R.student)||void 0===l||null===(i=l.borrow)||void 0===i?void 0:i.length)&&A(!1);10===(null===R||void 0===R||null===(t=R.student)||void 0===t||null===(o=t.borrow)||void 0===o?void 0:o.length)?w(!0):w(!1)}),[null===R||void 0===R||null===(l=R.student)||void 0===l?void 0:l.borrow]),(0,x.jsxs)("div",{className:G.Z.memberdetails,children:[(0,x.jsxs)("div",{className:G.Z.memberdetailstop,children:[(0,x.jsx)("div",{className:G.Z.issuedBookItemMidleft,children:(0,x.jsx)("div",{className:G.Z.imgcontainer,children:(0,x.jsx)("img",{src:"1"!==(null===R||void 0===R||null===(i=R.student)||void 0===i?void 0:i.photoId)?"".concat(f.yI,"/").concat(null===R||void 0===R||null===(o=R.student)||void 0===o?void 0:o.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:""})})}),(0,x.jsxs)("div",{className:G.Z.issuedBookItemMidright,children:[(0,x.jsx)("h6",{children:"".concat(null===R||void 0===R||null===(n=R.student)||void 0===n?void 0:n.studentFirstName," ").concat(null!==R&&void 0!==R&&null!==(s=R.student)&&void 0!==s&&s.studentMiddleName?null===R||void 0===R||null===(d=R.student)||void 0===d?void 0:d.studentMiddleName:""," ").concat(null===R||void 0===R||null===(a=R.student)||void 0===a?void 0:a.studentLastName)}),(0,x.jsxs)("p",{children:[N("index_no")," : ",null===R||void 0===R||null===(r=R.student)||void 0===r?void 0:r.studentGRNO]})]})]}),(0,x.jsx)("div",{className:G.Z.tabs,children:(0,x.jsx)(U,{activeIndex:y,setActiveIndex:S})}),0===y&&(0,x.jsx)(q,{showingDataLoading:D,ref:Z,borrowList:E.issueList,member:{photoId:null===R||void 0===R||null===(m=R.student)||void 0===m?void 0:m.photoId,studentFirstName:null===R||void 0===R||null===(_=R.student)||void 0===_?void 0:_.studentFirstName,studentGRNO:null===R||void 0===R||null===(h=R.student)||void 0===h?void 0:h.studentGRNO,studentLastName:null===R||void 0===R||null===(g=R.student)||void 0===g?void 0:g.studentLastName,studentMiddleName:null===R||void 0===R||null===(b=R.student)||void 0===b?void 0:b.studentMiddleName,studentProfilePhoto:null===R||void 0===R||null===(j=R.student)||void 0===j?void 0:j.studentProfilePhoto,_id:null===R||void 0===R||null===(p=R.student)||void 0===p?void 0:p._id},onRefetchWhenBookCollect:()=>{M(1),T(!0),A(!0),P()}}),1===y&&(0,x.jsx)(K,{mid:k}),2===y&&(0,x.jsx)(Q.Z,{mid:k})]})};const ee=function(){const{t:e}=(0,c.$G)(),l=(0,s.v9)((e=>e.libraryChange.lid)),[i,o]=(0,t.useState)(""),[n,d]=(0,u.YD)({skip:!i}),[a,r]=(0,t.useState)([]),[_,h]=(0,t.useState)(1),[f,g]=(0,t.useState)(!0),[j,p]=(0,t.useState)(!0),[k,N]=(0,t.useState)(""),{getMemberslist:y,getMembersListRefetch:S}=(0,v.I4)({data:{lid:l,page:_,limit:10,search:i},skip:!l});(0,t.useEffect)((()=>{d&&f&&h((e=>e+1))}),[d,f]),(0,t.useEffect)((()=>{l&&(p(!0),S())}),[_,l,i,S]),(0,t.useEffect)((()=>{var e,l;null!==y&&void 0!==y&&y.members?(r(i?null===y||void 0===y?void 0:y.members:e=>{var l,i;return null===(l=[...new Set(null===(i=[...e,...null===y||void 0===y?void 0:y.members])||void 0===i?void 0:i.map(JSON.stringify))])||void 0===l?void 0:l.map(JSON.parse)}),p(!1)):0===(null===y||void 0===y||null===(e=y.members)||void 0===e?void 0:e.length)&&p(!1),10===(null===y||void 0===y||null===(l=y.members)||void 0===l?void 0:l.length)?g(!0):g(!1)}),[null===y||void 0===y?void 0:y.members]);const Z=(0,t.useCallback)((0,b.debounce)((e=>o(e)),500),[]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:G.Z.searchContainerr,children:(0,x.jsxs)("div",{className:G.Z.searchContainer,children:[(0,x.jsx)("img",{alt:"",src:"/images/search-dept-icon.svg"}),(0,x.jsx)("input",{type:"text",placeholder:e("search-label"),onChange:e=>{return l=e.target.value,void Z(l);var l}})]})}),(0,x.jsx)("div",{className:G.Z.remainingFees,children:(0,x.jsxs)("div",{className:k?"".concat(G.Z.completeApplicationSplit):"",children:[(0,x.jsx)("div",{className:k?"".concat(G.Z.remainingFeesBottom," ").concat(G.Z.half):G.Z.remainingFeesBottom,children:(0,x.jsxs)("div",{className:G.Z.itemsContainer,children:[null===a||void 0===a?void 0:a.map(((e,l)=>(null===a||void 0===a?void 0:a.length)===l+1?(0,x.jsx)("div",{ref:n,className:G.Z.limember,children:(0,x.jsx)(W,{member:e,setMid:N,mid:k,index:l+1})},l):(0,x.jsx)("div",{className:G.Z.limember,children:(0,x.jsx)(W,{member:e,setMid:N,mid:k,index:l+1})},l))),j&&(0,x.jsx)(m.Z,{}),!j&&0===(null===a||void 0===a?void 0:a.length)&&(0,x.jsx)("div",{className:G.Z.noData,children:(0,x.jsx)("img",{src:"/images/nodata.jpg",alt:""})})]})}),k&&(0,x.jsx)("div",{className:G.Z.itemsDetails,children:(0,x.jsx)(X,{mid:k})})]})})]})};var le=i(47167),ie=i(98094),te=i(34219),oe=i(47735);const ne=e=>{let{title:l,onClose:i,onCollect:t,amount:o}=e;const{t:n}=(0,c.$G)();return(0,x.jsx)(y.Z,{onClose:i,children:(0,x.jsx)("div",{className:N.issue_modal,children:(0,x.jsxs)("div",{className:N.issueBookk,children:[(0,x.jsxs)("h6",{style:{textAlign:"center"},children:[null!==l&&void 0!==l?l:"",", "," ",n("rs"),". ",null!==o&&void 0!==o?o:0," "]}),(0,x.jsx)("button",{className:N.issuebtn,onClick:t,style:{marginTop:"8rem"},children:n("collect_fine")})]})})})},se=e=>{var l,i,o,n,s,d,a,r,u,m,_,h,g,b,j,k,N,y,Z,C,F,M,I;let{studentFine:w,is_last:L,lid:T,onRefetch:D}=e;const{t:A}=(0,c.$G)(),[E,B]=(0,t.useState)(!1),[R,P]=(0,t.useState)(!1),[O]=(0,v.sl)(),Y=()=>{P((e=>!e))};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:p.Z.issuedBookItem,style:{width:L?"100%":"49%",marginBottom:L?"0":"1rem"},children:[(0,x.jsxs)("div",{className:p.Z.issuedBookItemTop,children:[(0,x.jsx)("div",{className:p.Z.issuedBookItemTopleft,children:(0,x.jsx)("img",{className:p.Z.bookItemImg,src:null!==w&&void 0!==w&&null!==(l=w.book)&&void 0!==l&&l.photo?"".concat(f.yI,"/").concat(null===w||void 0===w||null===(i=w.book)||void 0===i?void 0:i.photo):"/images/defaultBook.png",alt:"book avatar",loading:"lazy"})}),(0,x.jsxs)("div",{className:p.Z.issuedBookItemTopright,children:[(0,x.jsx)("h6",{className:p.Z.title,children:(null===w||void 0===w||null===(o=w.book)||void 0===o||null===(n=o.bookName)||void 0===n?void 0:n.length)>=18?"".concat(null===w||void 0===w||null===(s=w.book)||void 0===s||null===(d=s.bookName)||void 0===d?void 0:d.match(/.{1,18}/g)[0]," ..."):null===w||void 0===w||null===(a=w.book)||void 0===a?void 0:a.bookName}),(0,x.jsxs)("p",{className:p.Z.author,children:[null===w||void 0===w||null===(r=w.book)||void 0===r?void 0:r.author," \xa0",(0,x.jsx)("span",{className:p.Z.authorLabel,children:A("author")})]}),(0,x.jsxs)("p",{className:p.Z.booklang,children:[" ",null===w||void 0===w||null===(u=w.book)||void 0===u?void 0:u.language]})]})]}),(0,x.jsxs)("div",{className:p.Z.issuedBookItemMid,children:[(0,x.jsx)("div",{className:p.Z.issuedBookItemMidleft,children:(0,x.jsx)("div",{className:p.Z.imgcontainer,children:(0,x.jsx)("img",{src:null!==w&&void 0!==w&&null!==(m=w.student)&&void 0!==m&&m.studentProfilePhoto?"".concat(f.yI,"/").concat(null===w||void 0===w||null===(_=w.student)||void 0===_?void 0:_.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"book avatar",loading:"lazy"})})}),(0,x.jsxs)("div",{className:p.Z.issuedBookItemMidright,children:[(0,x.jsxs)("h6",{children:[" ","".concat(null!==(h=null===w||void 0===w||null===(g=w.student)||void 0===g?void 0:g.studentFirstName)&&void 0!==h?h:""," ").concat(null!==(b=null===w||void 0===w||null===(j=w.student)||void 0===j?void 0:j.studentMiddleName)&&void 0!==b?b:""," ").concat(null!==(k=null===w||void 0===w||null===(N=w.student)||void 0===N?void 0:N.studentLastName)&&void 0!==k?k:"")]}),(0,x.jsxs)("p",{children:[A("gr_no")," ",null!==(y=null===w||void 0===w||null===(Z=w.student)||void 0===Z?void 0:Z.studentGRNO)&&void 0!==y?y:""," "]})]})]}),(0,x.jsxs)("div",{className:p.Z.issuedBookItemBottom,children:[(0,x.jsxs)("div",{className:p.Z.issuedBookItemBottomLeft,children:[(0,x.jsxs)("p",{children:[null!==(C=null===w||void 0===w?void 0:w.fine_type)&&void 0!==C?C:""," Book Fine Amount"]}),(0,x.jsxs)("h6",{children:[A("rs"),". ",null!==(F=null===w||void 0===w?void 0:w.fine_charge)&&void 0!==F?F:0]})]}),"Paid"===(null===w||void 0===w?void 0:w.status)?(0,x.jsx)("div",{className:p.Z.issuedBookItemBottomLeft,children:(0,x.jsx)(oe.Z,{rid:null===w||void 0===w||null===(M=w.fee_receipt)||void 0===M?void 0:M._id})}):(0,x.jsx)("div",{className:p.Z.collectbtn,onClick:Y,children:A("collect_fine")})]}),E&&(0,x.jsx)(S.Z,{})]}),R&&(0,x.jsx)(ne,{onCollect:()=>{var e,l,i,t,o;null!==w&&void 0!==w&&null!==(e=w.book)&&void 0!==e&&e._id&&null!==w&&void 0!==w&&null!==(l=w.student)&&void 0!==l&&l._id&&T&&(Y(),B((e=>!e)),O({lid:T,sid:null===w||void 0===w||null===(i=w.student)||void 0===i?void 0:i._id,bid:null===w||void 0===w||null===(t=w.book)||void 0===t?void 0:t._id,collectData:{amount:null!==(o=null===w||void 0===w?void 0:w.fine_charge)&&void 0!==o?o:0,prid:null===w||void 0===w?void 0:w._id}}).then((()=>{D(),B((e=>!e))})).catch({}))},onClose:Y,title:"".concat(null!==(I=null===w||void 0===w?void 0:w.fine_type)&&void 0!==I?I:""," Book Fine Amount"),amount:null===w||void 0===w?void 0:w.fine_charge})]})},de=e=>{let{lid:l}=e;const[i,o]=(0,t.useState)(!0),[n,s]=(0,t.useState)(1),[d,a]=(0,u.YD)(),[r,c]=(0,t.useState)([]),[_,h]=(0,t.useState)(!0),[f,g]=(0,t.useState)(!1),{libraryFineCharge:b,libraryFineChargeRefetch:j}=(0,v.xK)({data:{lid:l,page:n,limit:10,flow:"Remaining"},skip:!l});(0,t.useEffect)((()=>{l&&(h(!0),j())}),[n,l,j]),(0,t.useEffect)((()=>{a&&i&&s((e=>e+1))}),[a,i]),(0,t.useEffect)((()=>{var e,l;f?(c(null===b||void 0===b?void 0:b.all_student),g(!1),h(!1)):null!==b&&void 0!==b&&b.all_student?(c((e=>[...new Set([...e,...null===b||void 0===b?void 0:b.all_student].map(JSON.stringify))].map(JSON.parse))),h(!1)):0===(null===b||void 0===b||null===(l=b.all_student)||void 0===l?void 0:l.length)&&h(!1);10===(null===b||void 0===b||null===(e=b.all_student)||void 0===e?void 0:e.length)?o(!0):o(!1)}),[null===b||void 0===b?void 0:b.all_student]);const p=()=>{s(1),g(!0),j()};return(0,x.jsx)("div",{className:Y.Z.library_out_container,children:(0,x.jsxs)("div",{className:Y.Z.data_container,children:[null===r||void 0===r?void 0:r.map(((e,i)=>(null===r||void 0===r?void 0:r.length)===i+1?(0,x.jsx)("div",{ref:d,style:{width:"49%",marginBottom:"1rem"},children:(0,x.jsx)(se,{studentFine:e,is_last:!0,lid:l,onRefetch:p})},null===e||void 0===e?void 0:e._id):(0,x.jsx)(se,{studentFine:e,lid:l,onRefetch:p},null===e||void 0===e?void 0:e._id))),!_&&!r.length&&(0,x.jsx)(te.Z,{customStyleContainer:{marginTop:"9rem"},title:"No outstanding records found."}),_&&(0,x.jsx)(m.Z,{status:"white"})]})})},ae=e=>{let{lid:l}=e;const[i,o]=(0,t.useState)(!0),[n,s]=(0,t.useState)(1),[d,a]=(0,u.YD)(),[r,c]=(0,t.useState)([]),[_,h]=(0,t.useState)(!0),{libraryFineCharge:f,libraryFineChargeRefetch:g}=(0,v.xK)({data:{lid:l,page:n,limit:10,flow:"Paid"},skip:!l});return(0,t.useEffect)((()=>{l&&(h(!0),g())}),[n,l,g]),(0,t.useEffect)((()=>{a&&i&&s((e=>e+1))}),[a,i]),(0,t.useEffect)((()=>{var e,l;null!==f&&void 0!==f&&f.all_student?(c(1===n?null===f||void 0===f?void 0:f.all_student:e=>[...new Set([...e,...null===f||void 0===f?void 0:f.all_student].map(JSON.stringify))].map(JSON.parse)),h(!1)):0===(null===f||void 0===f||null===(e=f.all_student)||void 0===e?void 0:e.length)&&h(!1),10===(null===f||void 0===f||null===(l=f.all_student)||void 0===l?void 0:l.length)?o(!0):o(!1)}),[null===f||void 0===f?void 0:f.all_student]),(0,x.jsx)("div",{className:Y.Z.library_out_container,children:(0,x.jsxs)("div",{className:Y.Z.data_container,children:[null===r||void 0===r?void 0:r.map(((e,l)=>(null===r||void 0===r?void 0:r.length)===l+1?(0,x.jsx)("div",{ref:d,style:{width:"49%"},children:(0,x.jsx)(se,{studentFine:e,is_last:!0})},null===e||void 0===e?void 0:e._id):(0,x.jsx)(se,{studentFine:e},null===e||void 0===e?void 0:e._id))),!_&&!r.length&&(0,x.jsx)(te.Z,{customStyleContainer:{marginTop:"9rem"},title:"No received records found."}),_&&(0,x.jsx)(m.Z,{status:"white"})]})})},re=e=>{var l,i,t,o,s,d;let{carryParentState:a}=e;const{t:r}=(0,c.$G)(),u=(0,n.TH)(),v=[{name:r("outstanding"),id:0,url:"member/library?a=charge"},{name:r("received"),id:1,url:"member/library?a=charge&collect"}];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{className:Y.Z.fine_heading,children:r("fine_history")}),(0,x.jsx)(ie.Z,{customStyle:{width:"100%",marginTop:"0.2rem"}}),(0,x.jsx)(le.Z,{tabList:v,showAs:!0,carryParentState:a,activeIndexTab:"charge"===(null===(l=u.search)||void 0===l?void 0:l.substring(3))?0:1,customStyleLink:{width:"50%"},customStyleTab:{width:"100%"}}),(0,x.jsx)(ie.Z,{customStyle:{width:"100%",marginBottom:"1rem"}}),"charge"===(null===(i=u.search)||void 0===i?void 0:i.substring(3))?(0,x.jsx)(de,{lid:null===(t=u.state)||void 0===t||null===(o=t.onClickValue)||void 0===o?void 0:o._id}):(0,x.jsx)(ae,{lid:null===(s=u.state)||void 0===s||null===(d=s.onClickValue)||void 0===d?void 0:d._id})]})};var ce=i(29407),ue=i(98684),ve=i(21348),me=i(65543),_e=i(48293),he=i(16925),fe=i(90904),xe=i(60924),ge=i(93638),be=i(55336),je=i(43997);const pe=e=>{let{onClose:l,openFilter:i,lid:o}=e;const{t:n}=(0,c.$G)(),[s,d]=(0,t.useState)(!1),[a,r]=(0,t.useState)({from:"",to:""}),[u]=(0,v._s)(),[m]=(0,v.Zj)(),[_]=(0,v.a8)(),[h]=(0,v.Nd)(),[f]=(0,v.N6)();return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(_e.Z,{onClose:l,children:(0,x.jsxs)("div",{className:he.Z.modal_container,children:[(0,x.jsx)(ve.Z,{children:(0,x.jsxs)("div",{className:he.Z.modal_container_outer_header,children:[(0,x.jsx)("div",{className:he.Z.modal_container_header,children:(0,x.jsx)("h6",{children:n("export_library_excel")})}),(0,x.jsx)("img",{src:"".concat(ue.J7,"/close.svg"),alt:"close icon",onClick:l})]})}),(0,x.jsx)(fe.Z,{}),(0,x.jsxs)(ve.Z,{customStyle:{paddingTop:"0"},children:[(0,x.jsx)(xe.Z,{name:"from",label:n("o__from"),placeholder:n("o__please_select_date"),onChange:e=>{r((l=>({...l,from:(0,je.jh)(e)})))},value:a.from}),(0,x.jsx)(xe.Z,{name:"to",label:n("o__to"),placeholder:n("o__please_select_date"),onChange:e=>{r((l=>({...l,to:(0,je.jh)(e)})))},value:a.to}),(0,x.jsx)(ge.Z,{label:"export",onAction:()=>{if(o)if("BOOK"===i)o&&(d((e=>!e)),u({lid:o,from:null!==a&&void 0!==a&&a.from?(0,je.O_)(a.from):"",to:null!==a&&void 0!==a&&a.to?(0,je.O_)(a.to):""}).then((()=>{d((e=>!e)),l()})).catch({}));else if("ISSUE"===i)o&&null!==a&&void 0!==a&&a.from&&null!==a&&void 0!==a&&a.to&&(d((e=>!e)),_({lid:o,from:null!==a&&void 0!==a&&a.from?(0,je.O_)(a.from):"",to:null!==a&&void 0!==a&&a.to?(0,je.O_)(a.to):""}).then((()=>{d((e=>!e)),l()})).catch({}));else if("COLLECT"===i)o&&null!==a&&void 0!==a&&a.from&&null!==a&&void 0!==a&&a.to&&(d((e=>!e)),m({lid:o,from:null!==a&&void 0!==a&&a.from?(0,je.O_)(a.from):"",to:null!==a&&void 0!==a&&a.to?(0,je.O_)(a.to):""}).then((()=>{d((e=>!e)),l()})).catch({}));else if("ENTRY_LOG"===i)o&&null!==a&&void 0!==a&&a.from&&null!==a&&void 0!==a&&a.to&&(d((e=>!e)),h({lid:o,from:null!==a&&void 0!==a&&a.from?(0,je.O_)(a.from):"",to:null!==a&&void 0!==a&&a.to?(0,je.O_)(a.to):""}).then((()=>{d((e=>!e)),l()})).catch({}));else{if("REVIEW"!==i)return null;o&&null!==a&&void 0!==a&&a.from&&null!==a&&void 0!==a&&a.to&&(d((e=>!e)),f({lid:o,from:null!==a&&void 0!==a&&a.from?(0,je.O_)(a.from):"",to:null!==a&&void 0!==a&&a.to?(0,je.O_)(a.to):""}).then((()=>{d((e=>!e)),l()})).catch({}))}}})]}),s&&(0,x.jsx)(be.Z,{})]})})})},ke=e=>{let{lid:l}=e;const{t:i}=(0,c.$G)(),[o,n]=(0,t.useState)(""),[s,d]=(0,t.useState)(!1),[a,r]=(0,u.YD)(),[_,f]=(0,t.useState)(1),[g,b]=(0,t.useState)(!0),[j,p]=(0,t.useState)(!0),[k,N]=(0,t.useState)([]),[y]=(0,v.Yv)(),{libraryAllExcelExport:Z,libraryAllExcelExportRefetch:C}=(0,v.oW)({data:{lid:l,page:_,limit:10},skip:!l}),{scrollToTop:F}=(0,me.u)();(0,t.useEffect)((()=>{F()}),[]),(0,t.useEffect)((()=>{l&&(p(!0),C())}),[l,_,C]),(0,t.useEffect)((()=>{r&&g&&f((e=>e+1))}),[r,g]),(0,t.useEffect)((()=>{var e,l;null!==Z&&void 0!==Z&&Z.excel_arr?(N((e=>{var l,i;return null===(l=[...new Set(null===(i=[...e,...null===Z||void 0===Z?void 0:Z.excel_arr])||void 0===i?void 0:i.map(JSON.stringify))])||void 0===l?void 0:l.map(JSON.parse)})),p(!1)):0===(null===Z||void 0===Z||null===(e=Z.excel_arr)||void 0===e?void 0:e.length)&&p(!1),10===(null===Z||void 0===Z||null===(l=Z.excel_arr)||void 0===l?void 0:l.length)?b(!0):b(!1)}),[null===Z||void 0===Z?void 0:Z.excel_arr]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(ve.Z,{children:[(0,x.jsxs)("div",{className:ce.Z.refund_container_title,style:{justifyContent:"space-between"},children:[(0,x.jsx)("h6",{children:i("data_export")}),(0,x.jsxs)("div",{className:ce.Z.both_filter,children:[(0,x.jsxs)("div",{onClick:()=>{n("BOOK")},className:ce.Z.both_filter_with_name,children:[(0,x.jsx)("img",{src:"".concat(ue.J7,"/filter.svg"),alt:"filter icon"}),(0,x.jsx)("h6",{children:i("books")})]}),(0,x.jsxs)("div",{onClick:()=>{n("COLLECT")},className:ce.Z.both_filter_with_name,children:[(0,x.jsx)("img",{src:"".concat(ue.J7,"/filter.svg"),alt:"filter icon"}),(0,x.jsx)("h6",{children:i("collected")})]}),(0,x.jsxs)("div",{onClick:()=>{n("ISSUE")},className:ce.Z.both_filter_with_name,children:[(0,x.jsx)("img",{src:"".concat(ue.J7,"/filter.svg"),alt:"filter icon"}),(0,x.jsx)("h6",{children:i("issued")})]}),(0,x.jsxs)("div",{onClick:()=>{l&&(d((e=>!e)),y({lid:l}).then((()=>{d((e=>!e))})).catch({}))},className:ce.Z.both_filter_with_name,children:[(0,x.jsx)("img",{src:"".concat(ue.J7,"/filter.svg"),alt:"filter icon"}),(0,x.jsx)("h6",{children:i("members")})]}),(0,x.jsxs)("div",{onClick:()=>{n("ENTRY_LOG")},className:ce.Z.both_filter_with_name,children:[(0,x.jsx)("img",{src:"".concat(ue.J7,"/filter.svg"),alt:"filter icon"}),(0,x.jsx)("h6",{children:i("entry_logs")})]}),(0,x.jsxs)("div",{onClick:()=>{n("REVIEW")},className:ce.Z.both_filter_with_name,children:[(0,x.jsx)("img",{src:"".concat(ue.J7,"/filter.svg"),alt:"filter icon"}),(0,x.jsx)("h6",{children:i("book_review")})]})]})]}),(0,x.jsx)(ie.Z,{customStyle:{width:"100%",marginTop:"0.2rem"}}),(0,x.jsxs)("div",{className:ce.Z.refund_list,children:[null===k||void 0===k?void 0:k.map(((e,l)=>{var i,t;return(null===k||void 0===k?void 0:k.length)===l+1?(0,x.jsxs)("a",{ref:a,className:ce.Z.export_card,title:"Download File",href:"https://d3dqpu54js2vfl.cloudfront.net/".concat(null===e||void 0===e?void 0:e.excel_file),target:"_blank",rel:"noopener noreferrer",children:[(0,x.jsx)("img",{src:"".concat(ue.J7,"/xsxl.svg"),alt:"excel icon"}),(0,x.jsxs)("section",{className:ce.Z.export_card_text,children:[(0,x.jsx)("h6",{children:null!==(i=null===e||void 0===e?void 0:e.excel_file_name)&&void 0!==i?i:""}),(0,x.jsxs)("div",{className:ce.Z.export_card_date,children:[(0,x.jsx)("h6",{children:h()(null===e||void 0===e?void 0:e.created_at).format("DD MMM yyy")}),(0,x.jsx)("h6",{children:h()(null===e||void 0===e?void 0:e.created_at).format("LT")})]})]})]},null===e||void 0===e?void 0:e._id):(0,x.jsxs)("a",{className:ce.Z.export_card,title:"Download File",href:"https://d3dqpu54js2vfl.cloudfront.net/".concat(null===e||void 0===e?void 0:e.excel_file),target:"_blank",rel:"noopener noreferrer",children:[(0,x.jsx)("img",{src:"".concat(ue.J7,"/xsxl.svg"),alt:"excel icon"}),(0,x.jsxs)("section",{className:ce.Z.export_card_text,children:[(0,x.jsx)("h6",{children:null!==(t=null===e||void 0===e?void 0:e.excel_file_name)&&void 0!==t?t:""}),(0,x.jsxs)("div",{className:ce.Z.export_card_date,children:[(0,x.jsx)("h6",{children:h()(null===e||void 0===e?void 0:e.created_at).format("DD MMM yyy")}),(0,x.jsx)("h6",{children:h()(null===e||void 0===e?void 0:e.created_at).format("LT")})]})]})]},null===e||void 0===e?void 0:e._id)})),j&&(0,x.jsx)(m.Z,{})]})]}),o?(0,x.jsx)(pe,{onClose:()=>{n("")},openFilter:o,lid:l}):null,s&&(0,x.jsx)(S.Z,{})]})};var Ne=i(51561),ye=i(97655);const Se=e=>{let{lid:l,timing:i}=e;const{t:o}=(0,c.$G)(),[n,s]=(0,t.useState)({from:"",to:""}),[d,a]=(0,t.useState)(!1),[r]=(0,v.bi)();(0,t.useEffect)((()=>{i&&s((e=>{var l,t;return{...e,from:null!==(l=null===i||void 0===i?void 0:i.from)&&void 0!==l?l:"",to:null!==(t=null===i||void 0===i?void 0:i.to)&&void 0!==t?t:""}}))}),[i]);const u=e=>{s((l=>({...l,[e.target.name]:e.target.value})))};return(0,x.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"2rem",padding:"1rem"},children:[(0,x.jsx)(ye.Z,{labelText:o("from"),placeholder:"00:00",name:"from",value:Ce(null===n||void 0===n?void 0:n.from),type:"time",onChange:u,customStyleContainer:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:"1rem"}}),(0,x.jsx)(ye.Z,{labelText:o("to"),placeholder:"00:00",name:"to",value:Ce(null===n||void 0===n?void 0:n.to),type:"time",onChange:u,customStyleContainer:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:"1rem"}}),(0,x.jsx)(ge.Z,{onAction:()=>{l&&(a((e=>!e)),r({lid:l,libraryTime:{timing:{from:Ze(null===n||void 0===n?void 0:n.from),to:Ze(null===n||void 0===n?void 0:n.to)}}}).then((()=>{a((e=>!e))})).catch({}))},label:o("update"),customStyle:{margin:"0"}}),d&&(0,x.jsx)(S.Z,{})]})},Ze=e=>{const l=null===e||void 0===e?void 0:e.split(":");let i="";l[0]>12?(i="pm",l[0]-=12):l[0]<12?(i="am",0===l[0]&&(l[0]=12)):i="pm";const t=l[0]>9?l[0]:"0".concat(+l[0]);let o="".concat(t,":").concat(l[1]," ").concat(i);return null===o||void 0===o?void 0:o.substring(0,8)},Ce=e=>{var l;let i=null===e||void 0===e?void 0:e.split(" "),t=null===i||void 0===i||null===(l=i[0])||void 0===l?void 0:l.split(":"),o="";return o="Pm"===(null===i||void 0===i?void 0:i[1])?12===+(null===t||void 0===t?void 0:t[0])?null===t||void 0===t?void 0:t[0]:+(null===t||void 0===t?void 0:t[0])+12:null===t||void 0===t?void 0:t[0],"".concat(o,":").concat(null===t||void 0===t?void 0:t[1])},Fe=e=>{var l,o,n;let{lid:s}=e;const{t:d}=(0,c.$G)(),[a,r]=(0,t.useState)(!1),[u,m]=(0,t.useState)({msg:"",run:!1}),[_]=(0,v.Fy)(),[h]=(0,v.B6)(),[f]=(0,v.x5)(),[g]=(0,v.zz)(),[b]=(0,v.ar)(),{getLibraryDetail:j,getLibraryDetailRefetch:p}=(0,v.yX)({lid:s,skip:!s});(0,t.useEffect)((()=>{s&&p()}),[s,p]);const k=e=>{s&&(r((e=>!e)),_({lid:s,flow:e}).then((e=>{var l;m({msg:null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.message,run:!0}),r((e=>!e))})))};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{className:Y.Z.fine_heading,children:d("qr_code")}),(0,x.jsx)(ie.Z,{customStyle:{width:"100%",marginTop:"0.2rem"}}),(0,x.jsxs)("div",{className:Y.Z.edn,children:[(0,x.jsx)("div",{className:Y.Z.newBtn,onClick:()=>k("STUDENT"),children:d("student_qr")}),(0,x.jsx)("div",{className:Y.Z.newBtn,onClick:()=>k("STAFF"),children:d("staff_qr")}),(0,x.jsx)("div",{className:Y.Z.newBtn,onClick:()=>{s&&(r((e=>!e)),h({lid:s}).then((e=>{var l;m({msg:null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.message,run:!0}),r((e=>!e))})))},children:d("book_qr")}),(0,x.jsx)("div",{className:Y.Z.newBtn,onClick:()=>{s&&(r((e=>!e)),b({lid:s}).then((e=>{var l,t;if(r((e=>!e)),(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(t=l.book_qr)||void 0===t?void 0:t.length)>0){var o;m({msg:"All Book Qr code pdf in process. It will take some time.",run:!0});const l=new Worker(new URL(i.p+i.u(81813),i.b));l.postMessage({book_qr:null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.book_qr}),l.onmessage=e=>{e&&(window.open(e.data,"_blank"),l.terminate())},m({msg:"All Book Qr code pdf  is complete",run:!0})}})).catch({}))},children:d("download_book_qr")})]}),(0,x.jsxs)("div",{style:{marginBlock:"1rem"},children:[(0,x.jsxs)("div",{className:Y.Z.iohc_card_inner,children:[(0,x.jsxs)("div",{className:Y.Z.iohc_card_inner,style:{flexDirection:"column",alignItems:"flex-start"},children:[(0,x.jsx)("h6",{className:Y.Z.fine_heading,style:{marginBottom:"1rem"},children:d("library_qr_code")}),null!==j&&void 0!==j&&null!==(l=j.library)&&void 0!==l&&l.qr_code?(0,x.jsx)("img",{src:"".concat(null===j||void 0===j||null===(o=j.library)||void 0===o?void 0:o.qr_code),alt:"qr icon",className:Y.Z.qr_image}):null]}),(0,x.jsxs)("div",{className:Y.Z.iohc_card_inner,style:{marginRight:"1rem"},children:[(0,x.jsx)("div",{className:Y.Z.newBtn,onClick:()=>{s&&(r((e=>!e)),f({lid:s}).then((e=>{var l,t;if(r((e=>!e)),(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(t=l.all_staff)||void 0===t?void 0:t.length)>0){var o;m({msg:"All Staff Qr code pdf in process. It will take some time.",run:!0});const l=new Worker(new URL(i.p+i.u(70861),i.b));l.postMessage({all_staff:null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.all_staff,isType:"STAFF"}),l.onmessage=e=>{e&&(window.open(e.data,"_blank"),l.terminate())},m({msg:"All Staff Qr code pdf  is complete",run:!0})}})))},style:{width:"auto"},children:d("download_staff_qr")}),(0,x.jsx)("div",{className:Y.Z.newBtn,onClick:()=>{s&&(r((e=>!e)),g({lid:s}).then((e=>{var l,t;if(r((e=>!e)),(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(t=l.all_student)||void 0===t?void 0:t.length)>0){var o;m({msg:"All Student Qr code pdf in process. It will take some time.",run:!0});const l=new Worker(new URL(i.p+i.u(63756),i.b));l.postMessage({all_student:null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.all_student,isType:"STUDENT"}),l.onmessage=e=>{e&&(window.open(e.data,"_blank"),l.terminate())},m({msg:"All Student Qr code pdf  is complete",run:!0})}})))},style:{width:"auto"},children:d("download_student_qr")})]})]}),(0,x.jsx)(Se,{lid:s,timing:null===j||void 0===j||null===(n=j.library)||void 0===n?void 0:n.timing})]}),u.run&&(0,x.jsx)(Ne.Ch,{msg:u.msg,run:u.run,setRun:()=>m({msg:"",run:!1}),postiton:"bottom",type:"success"}),a&&(0,x.jsx)(S.Z,{})]})},Me=e=>{var l,i,t,o,n,s,d,a,r,u,v;let{history:m}=e;const{t:_}=(0,c.$G)();return(0,x.jsxs)("div",{className:Y.Z.iohc_card,children:[(0,x.jsx)("img",{src:null!==m&&void 0!==m&&null!==(l=m.student)&&void 0!==l&&l.studentProfilePhoto?"".concat(f.yI,"/").concat(null===m||void 0===m||null===(i=m.student)||void 0===i?void 0:i.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",loading:"lazy",alt:"icons",style:{width:"3.5rem",height:"3.5rem",borderRadius:"6px"}}),(0,x.jsxs)("div",{className:Y.Z.iohc_card_container,children:[(0,x.jsxs)("div",{className:Y.Z.iohc_card_inner,children:[(0,x.jsx)("h6",{style:{fontWeight:"500"},children:"".concat(null!==(t=null===m||void 0===m||null===(o=m.student)||void 0===o?void 0:o.studentFirstName)&&void 0!==t?t:""," ").concat(null!==(n=null===m||void 0===m||null===(s=m.student)||void 0===s?void 0:s.studentMiddleName)&&void 0!==n?n:""," ").concat(null!==(d=null===m||void 0===m||null===(a=m.student)||void 0===a?void 0:a.studentLastName)&&void 0!==d?d:"")}),(0,x.jsxs)("p",{children:[_("in_time")," "," ",h()(null===m||void 0===m?void 0:m.created_at).format("DD/MM/YYYY"),", ",null===m||void 0===m?void 0:m.in_time]})]}),(0,x.jsxs)("div",{className:Y.Z.iohc_card_inner,children:[(0,x.jsxs)("h6",{style:{fontWeight:"500"},children:[(0,x.jsxs)("span",{style:{fontWeight:"400"},children:[_("gr_number")," "," "]}),null!==(r=null===m||void 0===m||null===(u=m.student)||void 0===u?void 0:u.studentGRNO)&&void 0!==r?r:""]}),"Yes"===(null===m||void 0===m?void 0:m.is_valid)?(0,x.jsxs)("p",{children:[_("out_time")," "," ",h()(null===m||void 0===m?void 0:m.created_at).format("DD/MM/YYYY"),", ",null===m||void 0===m?void 0:m.out_time]}):null]}),"Yes"===(null===m||void 0===m?void 0:m.is_valid)?(0,x.jsxs)("div",{className:Y.Z.iohc_card_inner,children:[(0,x.jsx)("h6",{}),(0,x.jsxs)("p",{children:[_("total_time")," "," "," ",null!==(v=null===m||void 0===m?void 0:m.total_spent_time)&&void 0!==v?v:""," "," hr"]})]}):null]})]})},Ie=e=>{var l;let{lid:i}=e;const{t:o}=(0,c.$G)(),[n,s]=(0,u.YD)(),[d,a]=(0,t.useState)(1),[r,_]=(0,t.useState)(!0),[h,f]=(0,t.useState)(!0),[g,b]=(0,t.useState)([]),{libraryGetInOutHistory:j,libraryGetInOutHistoryRefetch:p}=(0,v.Zd)({data:{lid:i,page:d,limit:10},skip:!i});return(0,t.useEffect)((()=>{s&&r&&a((e=>e+1))}),[s,r]),(0,t.useEffect)((()=>{i&&(f(!0),p())}),[d,i,p]),(0,t.useEffect)((()=>{var e,l;null!==j&&void 0!==j&&j.history?d>1?(b((e=>{var l,i;return null===(l=[...new Set(null===(i=[...e,...null===j||void 0===j?void 0:j.history])||void 0===i?void 0:i.map(JSON.stringify))])||void 0===l?void 0:l.map(JSON.parse)})),f(!1)):(b(null===j||void 0===j?void 0:j.history),f(!1)):0===(null===j||void 0===j||null===(e=j.history)||void 0===e?void 0:e.length)&&f(!1),10===(null===j||void 0===j||null===(l=j.history)||void 0===l?void 0:l.length)?_(!0):_(!1)}),[null===j||void 0===j?void 0:j.history]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{className:Y.Z.fine_heading,children:o("logs")}),(0,x.jsx)(ie.Z,{customStyle:{width:"100%",marginTop:"0.2rem"}}),(0,x.jsxs)("div",{style:{padding:"1rem"},children:[null===g||void 0===g?void 0:g.map(((e,l)=>(null===g||void 0===g?void 0:g.length)===l+1?(0,x.jsx)("div",{ref:n,style:{width:"100%"},children:(0,x.jsx)(Me,{history:e})},null===e||void 0===e?void 0:e._id):(0,x.jsx)(Me,{history:e},null===e||void 0===e?void 0:e._id))),h&&(0,x.jsx)(m.Z,{}),!h&&0===(null===j||void 0===j||null===(l=j.history)||void 0===l?void 0:l.length)&&(0,x.jsx)("div",{className:Y.Z.noData,children:(0,x.jsx)("img",{src:"/images/nodata.jpg",style:{width:"100%"},alt:""})})]})]})},we=e=>{var l,i,t,o;let{history:s}=e;const{t:d}=(0,c.$G)(),a=(0,n.s0)(),r=(0,n.TH)(),u=(0,n.UO)(),v=(e,l)=>{a("/q/".concat(u.username,"/member/library?a=stocktake-detail"),{state:{...r.state,stid:null===s||void 0===s?void 0:s._id,flow:null!==e&&void 0!==e?e:"",count:l}})};return(0,x.jsxs)("div",{className:Y.Z.iohc_card,children:[(0,x.jsx)("img",{src:"/images/member_tab/subject/subject-daily-update-icon.svg",alt:"icons"}),(0,x.jsxs)("div",{className:Y.Z.iohc_card_container,children:[(0,x.jsx)("div",{className:Y.Z.iohc_card_inner,children:(0,x.jsxs)("h6",{style:{fontWeight:"500"},children:[h()(null===s||void 0===s?void 0:s.created_at).format("DD/MM/YYYY"),", ",h()(null===s||void 0===s?void 0:s.created_at).format("LT")]})}),(0,x.jsxs)("div",{className:Y.Z.iohc_btn,children:[(0,x.jsxs)("h6",{onClick:()=>v("book_isssue",null===s||void 0===s?void 0:s.book_isssue_count),children:[d("book_issue"),null!==(l=null===s||void 0===s?void 0:s.book_isssue_count)&&void 0!==l?l:0]}),(0,x.jsxs)("h6",{onClick:()=>v("book_lost",null===s||void 0===s?void 0:s.book_lost_count),children:[d("book_lost"),null!==(i=null===s||void 0===s?void 0:s.book_lost_count)&&void 0!==i?i:0]}),(0,x.jsxs)("h6",{onClick:()=>v("book_at_library",null===s||void 0===s?void 0:s.book_at_library_count),children:[d("book_at_library"),null!==(t=null===s||void 0===s?void 0:s.book_at_library_count)&&void 0!==t?t:0]}),(0,x.jsxs)("h6",{onClick:()=>v("book_missing",null===s||void 0===s?void 0:s.book_missing_count),children:[d("book_missing"),null!==(o=null===s||void 0===s?void 0:s.book_missing_count)&&void 0!==o?o:0]})]})]})]})},Le=e=>{var l;let{lid:i}=e;const{t:o}=(0,c.$G)(),[n,s]=(0,u.YD)(),[d,a]=(0,t.useState)(1),[r,_]=(0,t.useState)(!0),[h,f]=(0,t.useState)(!0),[g,b]=(0,t.useState)([]),{libraryGetStocktakeHistory:j,libraryGetStocktakeHistoryRefetch:p}=(0,v.JH)({data:{lid:i,page:d,limit:10},skip:!i});return(0,t.useEffect)((()=>{s&&r&&a((e=>e+1))}),[s,r]),(0,t.useEffect)((()=>{i&&(f(!0),p())}),[d,i,p]),(0,t.useEffect)((()=>{var e,l;null!==j&&void 0!==j&&j.stocktake?d>1?(b((e=>{var l,i;return null===(l=[...new Set(null===(i=[...e,...null===j||void 0===j?void 0:j.stocktake])||void 0===i?void 0:i.map(JSON.stringify))])||void 0===l?void 0:l.map(JSON.parse)})),f(!1)):(b(null===j||void 0===j?void 0:j.stocktake),f(!1)):0===(null===j||void 0===j||null===(e=j.stocktake)||void 0===e?void 0:e.length)&&f(!1),10===(null===j||void 0===j||null===(l=j.stocktake)||void 0===l?void 0:l.length)?_(!0):_(!1)}),[null===j||void 0===j?void 0:j.stocktake]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{className:Y.Z.fine_heading,children:o("stocktake")}),(0,x.jsx)(ie.Z,{customStyle:{width:"100%",marginTop:"0.2rem"}}),(0,x.jsxs)("div",{style:{padding:"1rem"},children:[null===g||void 0===g?void 0:g.map(((e,l)=>(null===g||void 0===g?void 0:g.length)===l+1?(0,x.jsx)("div",{ref:n,style:{width:"100%"},children:(0,x.jsx)(we,{history:e})},null===e||void 0===e?void 0:e._id):(0,x.jsx)(we,{history:e},null===e||void 0===e?void 0:e._id))),h&&(0,x.jsx)(m.Z,{}),!h&&0===(null===j||void 0===j||null===(l=j.stocktake)||void 0===l?void 0:l.length)&&(0,x.jsx)("div",{className:Y.Z.noData,children:(0,x.jsx)("img",{src:"/images/nodata.jpg",style:{width:"100%"},alt:""})})]})]})};var Te=i(46876),De=i(91022);const Ae={moderator_container:"LibraryModerator_moderator_container__98n6P",moderator_container_title:"LibraryModerator_moderator_container_title__lH0sy",add_new_moderator:"LibraryModerator_add_new_moderator__E7l5M",moderator_card:"LibraryModerator_moderator_card__ZCXKl",moderator_card_text_container:"LibraryModerator_moderator_card_text_container__HXBN1",menu_icon:"LibraryModerator_menu_icon__fN48K",assign_role_container:"LibraryModerator_assign_role_container__BiowP",assign_role_title:"LibraryModerator_assign_role_title__AYVXl",selected_staff_container:"LibraryModerator_selected_staff_container__v59BT",selected_staff_text:"LibraryModerator_selected_staff_text__JEkG3",assign_btn:"LibraryModerator_assign_btn__7gxuj",select_application_btn:"LibraryModerator_select_application_btn__wMVuF",select_btn:"LibraryModerator_select_btn__jPgoo",application_card:"LibraryModerator_application_card__k25bg",application_card_active:"LibraryModerator_application_card_active__DEaUj",application_card_text:"LibraryModerator_application_card_text__zT33Q",application_card_text_bottom:"LibraryModerator_application_card_text_bottom__De6s5"},Ee=e=>{var l;let{onCloseEdit:i,setActivePopup:t,selectedStaff:o,moderatorState:n,onSelectRole:s,onUpdateModerator:d}=e;const{t:a}=(0,c.$G)();return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(y.Z,{onClose:i,children:(0,x.jsxs)("div",{className:Ae.assign_role_container,children:[(0,x.jsxs)("section",{className:Ae.assign_role_title,children:[(0,x.jsx)("img",{src:"/images/arrow-left-fees-icon.svg",onClick:i,alt:"back icon",style:{cursor:"pointer"}}),(0,x.jsx)("h6",{children:a("update_role_to_moderator")})]}),(0,x.jsx)(ie.Z,{customStyle:{width:"100%"}}),(0,x.jsxs)("section",{className:Ae.selected_staff_container,onClick:()=>t("OPEN_STAFF_LIST"),children:[(0,x.jsx)("img",{src:null!==o&&void 0!==o&&o.staffProfilePhoto?"".concat(f.yI,"/").concat(null===o||void 0===o?void 0:o.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),(0,x.jsxs)("div",{className:Ae.selected_staff_text,children:[(0,x.jsx)("h6",{children:"".concat(null===o||void 0===o?void 0:o.staffFirstName," ").concat(null!==(l=null===o||void 0===o?void 0:o.staffMiddleName)&&void 0!==l?l:""," ").concat(null===o||void 0===o?void 0:o.staffLastName)}),(0,x.jsxs)("p",{children:[a("index_number")," ",": ",null===o||void 0===o?void 0:o.staffROLLNO]})]})]}),(0,x.jsxs)("section",{style:{padding:"0.8rem"},children:[(0,x.jsx)(De.Z,{selectLabel:a("select_role_of_moderator"),selectedValue:a("please_select_role"),options:["As Librarian","Department Wise Librarian","Library Fines"],value:"FULL_FUNCTIONALITY"===(null===n||void 0===n?void 0:n.mod_role)?"As Librarian":"DEPARTMENT_WISE"===(null===n||void 0===n?void 0:n.mod_role)?"Department Wise Librarian":"FINE_CHARGE"===(null===n||void 0===n?void 0:n.mod_role)?"Library Fines":"",onClick:s}),(0,x.jsxs)("button",{className:Ae.assign_btn,onClick:d,children:[a("update")," "]})]})]})})})};var Be=i(39896);const Re=e=>{var l,i,o,n,s;let{instituteId:d,lid:a,onClose:r,onRefetchWhenAdd:u,openModeratorMenu:m,openAs:_,onEdit:h,fid:g}=e;const{t:b}=(0,c.$G)(),[j,p]=(0,t.useState)("EDIT"===_?"PREVIEW_FORM":"OPEN_STAFF_LIST"),[k,N]=(0,t.useState)("EDIT"===_?null===m||void 0===m?void 0:m.access_staff:""),[Z,C]=(0,t.useState)({mod_role:"EDIT"===_?null===m||void 0===m?void 0:m.access_role:"",sid:"EDIT"===_?null===m||void 0===m||null===(l=m.access_staff)||void 0===l?void 0:l._id:""}),[F,M]=(0,t.useState)({id:[],depart:[]}),[I]=(0,v.pV)();(0,t.useEffect)((()=>{if("EDIT"===_){var e;N(null===m||void 0===m?void 0:m.access_staff),C({mod_role:null===m||void 0===m?void 0:m.access_role,sid:null===m||void 0===m||null===(e=m.access_staff)||void 0===e?void 0:e._id});let l=[],i=[];for(let e of null===m||void 0===m?void 0:m.department)l.push(null===e||void 0===e?void 0:e._id),i.push(e);M({id:l,depart:i}),p("PREVIEW_FORM")}}),[_]);const w=()=>{p("OPEN_STAFF_LIST")},L=e=>{C((l=>({...l,mod_role:"As Librarian"===e?"FULL_FUNCTIONALITY":"Department Wise Librarian"===e?"DEPARTMENT_WISE":"Library Fines"===e?"FINE_CHARGE":""})))};return(0,x.jsxs)(x.Fragment,{children:["OPEN_STAFF_LIST"===j&&(0,x.jsx)(Te.default,{assignHead:"OPEN_STAFF_LIST"===j,headSelect:e=>{N(e),C((l=>({...l,sid:null===e||void 0===e?void 0:e._id}))),p("EDIT"===_?"PREVIEW_FORM":"ASSIGN_ROLE")},title:b("staff_list"),onClose:r,instituteId:d,viewAs:"ADMISSION_ADMIN"}),"ASSIGN_ROLE"===j&&(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(y.Z,{onClose:w,children:(0,x.jsxs)("div",{className:Ae.assign_role_container,children:[(0,x.jsxs)("section",{className:Ae.assign_role_title,children:[(0,x.jsx)("img",{src:"/images/arrow-left-fees-icon.svg",onClick:w,alt:"back icon",style:{cursor:"pointer"}}),(0,x.jsx)("h6",{children:b("assign_role_to_moderator")})]}),(0,x.jsx)(ie.Z,{customStyle:{width:"100%"}}),(0,x.jsxs)("section",{className:Ae.selected_staff_container,children:[(0,x.jsx)("img",{src:null!==k&&void 0!==k&&k.staffProfilePhoto?"".concat(f.yI,"/").concat(null===k||void 0===k?void 0:k.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),(0,x.jsxs)("div",{className:Ae.selected_staff_text,children:[(0,x.jsx)("h6",{children:"".concat(null===k||void 0===k?void 0:k.staffFirstName," ").concat(null!==(i=null===k||void 0===k?void 0:k.staffMiddleName)&&void 0!==i?i:""," ").concat(null===k||void 0===k?void 0:k.staffLastName)}),(0,x.jsxs)("p",{children:[b("index_number")," ",": ",null===k||void 0===k?void 0:k.staffROLLNO]})]})]}),(0,x.jsxs)("section",{style:{padding:"0.8rem"},children:[(0,x.jsx)(De.Z,{selectLabel:b("select_role_of_moderator"),selectedValue:b("please_select_role"),options:["As Librarian","Department Wise Librarian","Library Fines"],value:"FULL_FUNCTIONALITY"===(null===Z||void 0===Z?void 0:Z.mod_role)?"As Librarian":"DEPARTMENT_WISE"===(null===Z||void 0===Z?void 0:Z.mod_role)?"Department Wise Librarian":"FINE_CHARGE"===(null===Z||void 0===Z?void 0:Z.mod_role)?"Library Fines":"",onClick:L}),"DEPARTMENT_WISE"===Z.mod_role?(0,x.jsx)(Be.Z,{fid:g,onSelect:e=>{var l,i;null!==F&&void 0!==F&&null!==(l=F.id)&&void 0!==l&&l.includes(null===e||void 0===e?void 0:e._id)?M((l=>{var i,t;return{id:null===l||void 0===l||null===(i=l.id)||void 0===i?void 0:i.filter((l=>l!==(null===e||void 0===e?void 0:e._id))),data:null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.filter((l=>(null===l||void 0===l?void 0:l._id)!==(null===e||void 0===e?void 0:e._id)))}})):(null===(i=F.id)||void 0===i?void 0:i.length)>0?M((l=>({id:[...null===l||void 0===l?void 0:l.id,null===e||void 0===e?void 0:e._id],data:[...null===l||void 0===l?void 0:l.data,e]}))):M((()=>({id:[null===e||void 0===e?void 0:e._id],data:[e]})))},onlyDepartment:!0,defalutValue:(null===F||void 0===F||null===(o=F.id)||void 0===o?void 0:o.length)>1?"".concat(null===F||void 0===F||null===(n=F.id)||void 0===n?void 0:n.length," selected"):null!==(s=null===F||void 0===F?void 0:F.dName)&&void 0!==s?s:""}):null,(0,x.jsxs)("button",{className:Ae.assign_btn,onClick:()=>{a&&Z.mod_role&&Z.sid&&(p("LOADING"),I({lid:a,addModerator:{...Z,depart:F.id}}).then((()=>{u(),p(""),r()})).catch({}))},children:[b("assign")," "]})]})]})})}),"PREVIEW_FORM"===j&&(0,x.jsx)(Ee,{onCloseEdit:()=>{r()},setActivePopup:p,selectedStaff:k,moderatorState:Z,onSelectRole:L,onUpdateModerator:()=>{h({...Z,depart:F.id}),r()}}),"LOADING"===j&&(0,x.jsx)(S.Z,{})]})};var Pe=i(12072),Oe=i(84489),Ye=i(87049);const Ge=e=>{let{onClose:l,lid:i,onRefetch:o,openModeratorMenu:n,instituteId:s}=e;const[d,a]=(0,t.useState)(!1),[r,c]=(0,t.useState)(!1),[u]=(0,v.Uc)(),[m]=(0,v.sN)();return(0,x.jsx)(x.Fragment,{children:r?(0,x.jsx)(Re,{onClose:()=>c(!1),fid:i,instituteId:s,onRefetch:o,openAs:"EDIT",openModeratorMenu:n,onEdit:e=>{a((e=>!e)),c(!1),m({modId:null===n||void 0===n?void 0:n._id,updateModerator:{role:null===e||void 0===e?void 0:e.mod_role,staffId:null===e||void 0===e?void 0:e.sid}}).then((()=>{o(),a((e=>!e)),l()})).catch({})}}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Oe.Z,{onClose:l}),(0,x.jsxs)(Pe.Z,{customStyle:{zIndex:"1200"},children:[(0,x.jsxs)("div",{className:Ye.Z.edit_modal_container,style:{width:"200px"},children:[(0,x.jsx)("h6",{className:Ye.Z.edit,onClick:()=>c((e=>!e)),children:"Edit"}),(0,x.jsx)("h6",{className:Ye.Z.remove,onClick:()=>{a((e=>!e)),u({modId:null===n||void 0===n?void 0:n._id}).then((()=>{o(),l(),a((e=>!e))})).catch({})},children:"Delete"})]}),d&&(0,x.jsx)(S.Z,{})]})]})})},We=e=>{var l,i,t,o,n,s,d;let{moderator:a,setOpenModeratorMenu:r}=e;const{t:u}=(0,c.$G)();return(0,x.jsxs)("div",{className:Ae.moderator_card,children:[(0,x.jsx)("img",{src:null!==a&&void 0!==a&&null!==(l=a.access_staff)&&void 0!==l&&l.staffProfilePhoto?"".concat(f.yI,"/").concat(null===a||void 0===a||null===(i=a.access_staff)||void 0===i?void 0:i.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"moderator avatar"}),(0,x.jsxs)("section",{className:Ae.moderator_card_text_container,children:[(0,x.jsx)("h6",{children:"".concat(null===a||void 0===a||null===(t=a.access_staff)||void 0===t?void 0:t.staffFirstName," ").concat(null!==(o=null===a||void 0===a||null===(n=a.access_staff)||void 0===n?void 0:n.staffMiddleName)&&void 0!==o?o:""," ").concat(null===a||void 0===a||null===(s=a.access_staff)||void 0===s?void 0:s.staffLastName)}),(0,x.jsxs)("p",{children:[u("index_number")," ",": ",null===a||void 0===a||null===(d=a.access_staff)||void 0===d?void 0:d.staffROLLNO]}),(0,x.jsx)("p",{children:"FULL_FUNCTIONALITY"===(null===a||void 0===a?void 0:a.access_role)?"As Librarian":"DEPARTMENT_WISE"===(null===a||void 0===a?void 0:a.access_role)?"Department Wise Librarian":"FINE_CHARGE"===(null===a||void 0===a?void 0:a.access_role)?"Library Fines":""})]}),(0,x.jsx)("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:()=>r(a),className:Ae.menu_icon,title:"Menu"})]})},ze=e=>{let{lid:l,instituteId:i,fid:o}=e;const{t:s}=(0,c.$G)(),d=(0,n.s0)(),[a,r]=(0,t.useState)(!1),[_,h]=(0,t.useState)(""),[f,g]=(0,u.YD)(),[b,j]=(0,t.useState)(1),[p,k]=(0,t.useState)(!0),[N,y]=(0,t.useState)(!1),[S,Z]=(0,t.useState)(!0),[C,F]=(0,t.useState)([]),{getModeratorByLibrary:M,getModeratorByLibraryRefetch:I}=(0,v.z2)({data:{lid:l,page:b,limit:10},skip:!l}),{scrollToTop:w}=(0,me.u)();(0,t.useEffect)((()=>{w()}),[]),(0,t.useEffect)((()=>{l&&(Z(!0),I())}),[l,b,I]),(0,t.useEffect)((()=>{g&&p&&j((e=>e+1))}),[g,p]),(0,t.useEffect)((()=>{var e,l;N?(F(null===M||void 0===M?void 0:M.moderator),y(!1),Z(!1)):null!==M&&void 0!==M&&M.moderator?(F((e=>{var l,i;return null===(l=[...new Set(null===(i=[...e,...null===M||void 0===M?void 0:M.moderator])||void 0===i?void 0:i.map(JSON.stringify))])||void 0===l?void 0:l.map(JSON.parse)})),Z(!1)):0===(null===M||void 0===M||null===(l=M.moderator)||void 0===l?void 0:l.length)&&Z(!1);10===(null===M||void 0===M||null===(e=M.moderator)||void 0===e?void 0:e.length)?k(!0):k(!1)}),[null===M||void 0===M?void 0:M.moderator]);const L=()=>{y(!0),j(1),Z(!0),I()};return(0,x.jsxs)("div",{className:Ae.moderator_container,children:[(0,x.jsxs)("section",{className:Ae.moderator_container_title,children:[(0,x.jsx)("img",{src:"/images/arrow-left-fees-icon.svg",onClick:()=>{d(-1)},alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),(0,x.jsx)("h6",{children:s("library_moderator")})]}),(0,x.jsx)(ie.Z,{customStyle:{width:"100%"}}),(0,x.jsx)("h6",{className:Ae.add_new_moderator,onClick:()=>r(!0),children:s("add_new_moderator")}),(0,x.jsxs)("div",{className:Ae.refund_list,children:[null===C||void 0===C?void 0:C.map(((e,l)=>(null===C||void 0===C?void 0:C.length)===l+1?(0,x.jsx)("div",{ref:f,children:(0,x.jsx)(We,{moderator:e,setOpenModeratorMenu:h})},null===e||void 0===e?void 0:e._id):(0,x.jsx)(We,{moderator:e,setOpenModeratorMenu:h},null===e||void 0===e?void 0:e._id))),a&&(0,x.jsx)(Re,{onClose:()=>r((e=>!e)),instituteId:i,lid:l,onRefetchWhenAdd:L,fid:o}),_&&(0,x.jsx)(Ge,{lid:l,instituteId:i,onRefetch:L,onClose:()=>h(""),openModeratorMenu:_,fid:o}),S&&(0,x.jsx)(m.Z,{})]})]})},Je=e=>{var l,i,o,n,s,d,a,r,u,m,_;let{book:h,isType:g,stid:b,onRefetch:j}=e;const{t:p}=(0,c.$G)(),[k,N]=(0,t.useState)(!1),[y]=(0,v.Y)(),Z=e=>{var l;b&&null!==h&&void 0!==h&&h._id&&(N((e=>!e)),y({stid:b,missingBook:{bookId:null===h||void 0===h||null===(l=h.book)||void 0===l?void 0:l._id,card_id:null===h||void 0===h?void 0:h._id,status:e}}).then((()=>{j(),N((e=>!e))})).catch({}))};return(0,x.jsxs)(x.Fragment,{children:["MISSING"===g?(0,x.jsxs)("div",{className:Y.Z.iohc_card,style:{justifyContent:"space-between"},children:[(0,x.jsxs)("div",{className:Y.Z.iohcc_missing,children:[(0,x.jsx)("img",{src:null!==h&&void 0!==h&&null!==(l=h.book)&&void 0!==l&&l.photo?"".concat(f.yI,"/").concat(null===h||void 0===h||null===(i=h.book)||void 0===i?void 0:i.photo):"/images/defaultBook.png",alt:"icons",style:{width:"3rem",height:"3rem"}}),(0,x.jsxs)("div",{className:Y.Z.iohc_card_inner,style:{alignItems:"flex-start",flexDirection:"column",gap:"0"},children:[(0,x.jsxs)("h6",{style:{fontWeight:"500"},children:[p("book_name")," ",": ",null!==(o=null===h||void 0===h||null===(n=h.book)||void 0===n?void 0:n.bookName)&&void 0!==o?o:""]}),(0,x.jsxs)("p",{style:{margin:"0"},children:[p("author_only")," ",": ",null!==(s=null===h||void 0===h||null===(d=h.book)||void 0===d?void 0:d.author)&&void 0!==s?s:""]}),(0,x.jsxs)("p",{style:{margin:"0"},children:[p("accession_number")," ",": ",null!==(a=null===h||void 0===h||null===(r=h.book)||void 0===r?void 0:r.accession_number)&&void 0!==a?a:""]})]})]}),(0,x.jsxs)("div",{className:Y.Z.iohcb_missing,children:[(0,x.jsx)("h6",{onClick:()=>Z("book_isssue"),children:p("book_issue_only")}),(0,x.jsx)("h6",{onClick:()=>Z("book_lost"),children:p("book_lost_only")}),(0,x.jsx)("h6",{onClick:()=>Z("book_at_library"),children:p("book_at_library_only")})]})]}):(0,x.jsxs)("div",{className:Y.Z.iohc_card,children:[(0,x.jsx)("img",{src:null!==h&&void 0!==h&&h.photo?"".concat(f.yI,"/").concat(null===h||void 0===h?void 0:h.photo):"/images/defaultBook.png",alt:"icons",style:{width:"3rem",height:"3rem"}}),(0,x.jsxs)("div",{className:Y.Z.iohc_card_inner,style:{alignItems:"flex-start",flexDirection:"column",gap:"0"},children:[(0,x.jsxs)("h6",{style:{fontWeight:"500"},children:[p("book_name")," ",": ",null!==(u=null===h||void 0===h?void 0:h.bookName)&&void 0!==u?u:""]}),(0,x.jsxs)("p",{style:{margin:"0"},children:[p("author_only")," ",": ",null!==(m=null===h||void 0===h?void 0:h.author)&&void 0!==m?m:""]}),(0,x.jsxs)("p",{style:{margin:"0"},children:[p("accession_number")," ",": ",null!==(_=null===h||void 0===h?void 0:h.accession_number)&&void 0!==_?_:""]})]})]}),k&&(0,x.jsx)(S.Z,{})]})},Ve=()=>{var e,l,i,o,s,d,a,r,_,h,f,g;const{t:b}=(0,c.$G)(),j=(0,n.TH)(),[p,k]=(0,u.YD)(),[N,y]=(0,t.useState)(1),[S,Z]=(0,t.useState)(!0),[C,F]=(0,t.useState)(!0),[M,I]=(0,t.useState)([]),{libraryGetStocktakeOneHistory:w,libraryGetStocktakeOneHistoryRefetch:L}=(0,v.M_)({data:{stid:null===(e=j.state)||void 0===e?void 0:e.stid,page:N,limit:10,flow:null===(l=j.state)||void 0===l?void 0:l.flow},skip:!(null!==(i=j.state)&&void 0!==i&&i.stid)});(0,t.useEffect)((()=>{k&&S&&y((e=>e+1))}),[k,S]),(0,t.useEffect)((()=>{var e;null!==(e=j.state)&&void 0!==e&&e.stid&&(F(!0),L())}),[N,null===(o=j.state)||void 0===o?void 0:o.stid,L]),(0,t.useEffect)((()=>{var e,l;null!==w&&void 0!==w&&w.stocktake_list?N>1?(I((e=>{var l,i;return null===(l=[...new Set(null===(i=[...e,...null===w||void 0===w?void 0:w.stocktake_list])||void 0===i?void 0:i.map(JSON.stringify))])||void 0===l?void 0:l.map(JSON.parse)})),F(!1)):(I(null===w||void 0===w?void 0:w.stocktake_list),F(!1)):0===(null===w||void 0===w||null===(e=w.stocktake_list)||void 0===e?void 0:e.length)&&F(!1),10===(null===w||void 0===w||null===(l=w.stocktake_list)||void 0===l?void 0:l.length)?Z(!0):Z(!1)}),[null===w||void 0===w?void 0:w.stocktake_list]);const T=()=>{y((e=>1)),L()};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("h6",{className:Y.Z.fine_heading,children:[b("stocktake_detail")," (",b(null===(s=j.state)||void 0===s?void 0:s.flow)," ",null!==(d=null===(a=j.state)||void 0===a?void 0:a.count)&&void 0!==d?d:0,")"]}),(0,x.jsx)(ie.Z,{customStyle:{width:"100%",marginTop:"0.2rem"}}),(0,x.jsxs)("div",{style:{padding:"1rem"},children:["book_at_library"===(null===(r=j.state)||void 0===r?void 0:r.flow)||"book_lost"===(null===(_=j.state)||void 0===_?void 0:_.flow)?(0,x.jsx)(x.Fragment,{children:null===M||void 0===M?void 0:M.map(((e,l)=>(null===M||void 0===M?void 0:M.length)===l+1?(0,x.jsx)("div",{ref:p,style:{width:"100%"},children:(0,x.jsx)(Je,{book:e})},null===e||void 0===e?void 0:e._id):(0,x.jsx)(Je,{book:e},null===e||void 0===e?void 0:e._id)))}):"book_missing"===(null===(h=j.state)||void 0===h?void 0:h.flow)?(0,x.jsx)(x.Fragment,{children:null===M||void 0===M?void 0:M.map(((e,l)=>{var i,t;return(null===M||void 0===M?void 0:M.length)===l+1?(0,x.jsx)("div",{ref:p,style:{width:"100%"},children:(0,x.jsx)(Je,{book:e,isType:"MISSING",stid:null===(i=j.state)||void 0===i?void 0:i.stid,onRefetch:T})},null===e||void 0===e?void 0:e._id):(0,x.jsx)(Je,{book:e,isType:"MISSING",stid:null===(t=j.state)||void 0===t?void 0:t.stid,onRefetch:T},null===e||void 0===e?void 0:e._id)}))}):"book_isssue"===(null===(f=j.state)||void 0===f?void 0:f.flow)?(0,x.jsx)(x.Fragment,{children:null===M||void 0===M?void 0:M.map(((e,l)=>(null===M||void 0===M?void 0:M.length)===l+1?(0,x.jsx)("div",{ref:p,style:{width:"100%"},children:(0,x.jsx)(Je,{book:e,isType:"ISSUE"})},null===e||void 0===e?void 0:e._id):(0,x.jsx)(Je,{book:e,isType:"ISSUE"},null===e||void 0===e?void 0:e._id)))}):null,C&&(0,x.jsx)(m.Z,{}),!C&&0===(null===w||void 0===w||null===(g=w.stocktake_list)||void 0===g?void 0:g.length)&&(0,x.jsx)("div",{className:Y.Z.noData,children:(0,x.jsx)("img",{src:"/images/nodata.jpg",alt:"",style:{width:"100%"}})})]})]})};const He=function(e){var l,i,o,s,d,r,c,u,m,_,h,f,g,b,p,k,N,y,S,Z,C,F,M,I,w,L,T,D,A,E,B,R;let{carryParentState:P,role:G,mid:W}=e;const z=(0,n.TH)(),{getLibraryDetail:J,getLibraryDetailRefetch:V}=(0,v.yX)({lid:null===P||void 0===P||null===(l=P.onClickValue)||void 0===l?void 0:l._id,skip:!(null!==P&&void 0!==P&&null!==(i=P.onClickValue)&&void 0!==i&&i._id)});return(0,t.useEffect)((()=>{var e;null!==P&&void 0!==P&&null!==(e=P.onClickValue)&&void 0!==e&&e._id&&V()}),[null===P||void 0===P||null===(o=P.onClickValue)||void 0===o?void 0:o._id]),(0,x.jsx)("div",{className:Y.Z.admisionApplication,children:(0,x.jsxs)("div",{className:Y.Z.applicationBody,children:["book"===(null===(s=z.search)||void 0===s?void 0:s.substring(3,7))&&(0,x.jsx)(a.Z,{getQuery:z,carryParentState:P,fid:null===J||void 0===J||null===(d=J.library)||void 0===d||null===(r=d.institute)||void 0===r||null===(c=r.financeDepart)||void 0===c?void 0:c[0],filterBy:null===J||void 0===J||null===(u=J.library)||void 0===u||null===(m=u.filter_by)||void 0===m?void 0:m.department,role:G,mid:W}),"issue"===(null===(_=z.search)||void 0===_?void 0:_.substring(3))&&(0,x.jsx)(O,{insId:null===J||void 0===J||null===(h=J.library)||void 0===h||null===(f=h.institute)||void 0===f?void 0:f._id,role:G,mid:W}),"collect"===(null===(g=z.search)||void 0===g?void 0:g.substring(3))&&(0,x.jsx)(j,{}),"member"===(null===(b=z.search)||void 0===b?void 0:b.substring(3))&&(0,x.jsx)(ee,{}),"charge"===(null===(p=z.search)||void 0===p?void 0:p.substring(3,9))&&(0,x.jsx)(re,{carryParentState:P}),"export"===(null===(k=z.search)||void 0===k?void 0:k.substring(3,9))&&(0,x.jsx)(ke,{carryParentState:P,lid:null===P||void 0===P||null===(N=P.onClickValue)||void 0===N?void 0:N._id}),"qr"===(null===(y=z.search)||void 0===y?void 0:y.substring(3))&&(0,x.jsx)(Fe,{carryParentState:P,lid:null===P||void 0===P||null===(S=P.onClickValue)||void 0===S?void 0:S._id}),"logs"===(null===(Z=z.search)||void 0===Z?void 0:Z.substring(3))&&(0,x.jsx)(Ie,{carryParentState:P,lid:null===P||void 0===P||null===(C=P.onClickValue)||void 0===C?void 0:C._id}),"stocktake"===(null===(F=z.search)||void 0===F?void 0:F.substring(3))&&(0,x.jsx)(Le,{carryParentState:P,lid:null===P||void 0===P||null===(M=P.onClickValue)||void 0===M?void 0:M._id}),"stocktake-detail"===(null===(I=z.search)||void 0===I?void 0:I.substring(3))&&(0,x.jsx)(Ve,{carryParentState:P,lid:null===P||void 0===P||null===(w=P.onClickValue)||void 0===w?void 0:w._id}),"moderator"===(null===(L=z.search)||void 0===L?void 0:L.substring(3))&&(0,x.jsx)(ze,{lid:null===P||void 0===P||null===(T=P.onClickValue)||void 0===T?void 0:T._id,instituteId:null===J||void 0===J||null===(D=J.library)||void 0===D||null===(A=D.institute)||void 0===A?void 0:A._id,fid:null===J||void 0===J||null===(E=J.library)||void 0===E||null===(B=E.institute)||void 0===B||null===(R=B.financeDepart)||void 0===R?void 0:R[0]})]})})};var Ue=i(21640);const qe="MiddleContent_MiddleContent__WKHNs",$e="MiddleContent_MiddleContentLeft__+wl3w",Ke="MiddleContent_tabs__rNsOO",Qe="MiddleContent_item__HkkSz",Xe="MiddleContent_itemIcon__yR7dj",el="MiddleContent_classList__0STf8",ll="Tabs_mcqToptabs__TZyM2",il="Tabs_mcqTop__DeSKD",tl="Tabs_mcqTopItem__Okqo0",ol="Tabs_active__GRYqn";const nl=function(e){let{activeIndex:l,setActiveIndex:i}=e;const{t:t}=(0,c.$G)();return(0,x.jsx)("div",{className:il,children:(0,x.jsxs)("div",{className:ll,children:[(0,x.jsx)("div",{className:0===l?"".concat(tl," ").concat(ol):tl,onClick:()=>i(0),children:t("menu")}),(0,x.jsx)("div",{className:1===l?"".concat(tl," ").concat(ol):tl,onClick:()=>i(1),children:t("funds")})]})})},sl="Funds_funds__A1w1z",dl="Funds_fundshead__L-ikp",al="Funds_fundscontent__60rTr",rl="Funds_sidebarbottomitem__HxeQl",cl="Funds_namee__F4I2F",ul="Funds_desig__tgpDW",vl="Funds_balanceItem__wygKQ",ml="Funds_recover_btn__AJWzV",_l="Funds_submitbtn__+nZSz",hl="Funds_disabled__NcqJ-";const fl=function(e){let{bal:l,value:i}=e;return(0,x.jsxs)("div",{className:vl,children:[(0,x.jsxs)("p",{children:[l,":"]}),(0,x.jsxs)("p",{children:["Rs. ",i]})]})};var xl=i(49384),gl=i(11237);const bl=function(e){var l;let{carryParentState:i,library:o,getLibraryDetailRefetch:n,role:d}=e;const{t:a}=(0,c.$G)(),r=(0,s.v9)((e=>e.libraryChange)),[u]=(0,v.eQ)(),[m,_]=t.useState(!1);return(0,x.jsxs)("div",{className:sl,children:[(0,x.jsxs)("div",{className:dl,children:[(0,x.jsxs)("h6",{children:[" ",a("lib_fines")," "]}),(0,x.jsx)("img",{src:"/images/finance/filter-icon.svg",alt:""})]}),(0,x.jsxs)("div",{className:al,children:[(0,x.jsxs)("div",{className:rl,children:[(0,x.jsx)("img",{alt:"not found",src:"/images/finance/doller-icon.svg"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:cl,children:"Rs. ".concat(null===o||void 0===o?void 0:o.totalFine)}),(0,x.jsx)("p",{className:ul,children:a("total_fine_collected")})]})]}),(0,x.jsx)(fl,{check:"false",bal:a("cash_fine"),value:null===o||void 0===o?void 0:o.offlineFine}),(0,x.jsx)(fl,{check:"false",bal:a("bank_fine"),value:null===o||void 0===o?void 0:o.onlineFine}),(0,x.jsx)(fl,{check:"true",bal:a("cash_with_me"),value:null===o||void 0===o?void 0:o.collectedFine}),d?(0,x.jsx)(x.Fragment,{children:"Pending"===(null===o||void 0===o?void 0:o.requestStatus)&&(null===o||void 0===o?void 0:o.collectedFine)>0?(0,x.jsxs)("button",{className:_l,disabled:m,onClick:()=>{_((e=>!e)),u({lid:null===r||void 0===r?void 0:r.lid,fine:{amount:null===o||void 0===o?void 0:o.collectedFine}}).then((()=>{n(),_((e=>!e))})).catch((()=>{_((e=>!e))}))},children:[a("sublit_to_finance"),m&&(0,x.jsx)("div",{style:{marginTop:"0.7vw"},children:(0,x.jsx)(xl.Z,{})})]}):"Requested"===(null===o||void 0===o?void 0:o.requestStatus)?(0,x.jsx)("button",{className:"".concat(_l," ").concat(hl),children:a("request_to_finance")}):(0,x.jsx)("button",{className:"".concat(_l," ").concat(hl),children:a("sublit_to_finance")})}):null,(0,x.jsx)(gl.Z,{carryParentState:i,activeTab:"charge",role:d,children:(0,x.jsxs)("div",{className:ml,children:[a("total_pending_fees"),": ",a("rs"),". ",null!==(l=null===o||void 0===o?void 0:o.remainFine)&&void 0!==l?l:0]})})]}),m&&(0,x.jsx)(S.Z,{})]})};const jl=function(e){let{library:l,getLibraryDetailRefetch:i,carryParentState:o,role:n}=e;const[s,d]=(0,t.useState)(0),{t:a}=(0,c.$G)();return(0,x.jsx)("div",{className:qe,children:(0,x.jsxs)("div",{className:$e,children:[(0,x.jsx)("div",{className:Ke,children:(0,x.jsx)(nl,{activeIndex:s,setActiveIndex:d})}),0===s&&(0,x.jsxs)("div",{className:Qe,children:[(0,x.jsx)(gl.Z,{carryParentState:o,activeTab:"book",role:n,children:(0,x.jsxs)("div",{className:Xe,children:[(0,x.jsx)("img",{src:"/images/member_tab/library/library-allbook-icon.svg",alt:"Class Catalog"}),(0,x.jsx)("p",{children:a("all_books")})]})}),(0,x.jsx)(gl.Z,{carryParentState:o,activeTab:"issue",role:n,children:(0,x.jsxs)("div",{className:Xe,children:[(0,x.jsx)("img",{src:"/images/member_tab/library/library-issue-icon.svg",alt:"issued books"}),(0,x.jsx)("p",{children:a("issued_books")})]})}),(0,x.jsx)(gl.Z,{carryParentState:o,activeTab:"collect",role:n,children:(0,x.jsxs)("div",{className:Xe,children:[(0,x.jsx)("img",{src:"/images/member_tab/library/library-collect-icon.svg",alt:"collected logs"}),(0,x.jsx)("p",{children:a("collected_logs")})]})}),(0,x.jsx)(gl.Z,{carryParentState:o,activeTab:"charge",role:n,children:(0,x.jsxs)("div",{className:Xe,children:[(0,x.jsx)("img",{src:"/images/member_tab/library/library-fine-icon.svg",alt:"members"}),(0,x.jsx)("p",{children:a("library_fine")})]})}),(0,x.jsx)(gl.Z,{carryParentState:o,activeTab:"member",role:n,children:(0,x.jsxs)("div",{className:Xe,children:[(0,x.jsx)("img",{src:"/images/member_tab/library/library-member-icon.svg",alt:"members"}),(0,x.jsx)("p",{children:a("members")})]})}),(0,x.jsx)(gl.Z,{carryParentState:o,activeTab:"export",role:n,children:(0,x.jsxs)("div",{className:Xe,children:[(0,x.jsx)("img",{src:"/images/member_tab/finance/finance-export-icon.svg",alt:"refund"}),(0,x.jsx)("p",{children:a("data_export")})]})}),(0,x.jsx)(gl.Z,{carryParentState:o,activeTab:"qr",role:n,children:(0,x.jsxs)("div",{className:Xe,children:[(0,x.jsx)("img",{src:"/images/member_tab/class/class-setting-icon.svg",alt:"refund"}),(0,x.jsx)("p",{children:a("setting")})]})}),(0,x.jsx)(gl.Z,{carryParentState:o,activeTab:"logs",role:n,children:(0,x.jsxs)("div",{className:Xe,children:[(0,x.jsx)("img",{src:"/images/member_tab/subject/subject-daily-update-icon.svg",alt:"refund"}),(0,x.jsx)("p",{children:a("logs")})]})}),(0,x.jsx)(gl.Z,{carryParentState:o,activeTab:"moderator",role:n,children:(0,x.jsxs)("div",{className:Xe,children:[(0,x.jsx)("img",{src:"/images/member_tab/admission/admission-moderator-icon.svg",alt:"refund"}),(0,x.jsx)("p",{children:a("library_moderators")})]})}),(0,x.jsx)(gl.Z,{carryParentState:o,activeTab:"stocktake",role:n,children:(0,x.jsxs)("div",{className:Xe,children:[(0,x.jsx)("img",{src:"/images/member_tab/subject/subject-daily-update-icon.svg",alt:"refund"}),(0,x.jsx)("p",{children:a("stocktake")})]})})]}),1===s&&(0,x.jsx)("div",{className:el,children:(0,x.jsx)(bl,{library:l,carryParentState:o,getLibraryDetailRefetch:i,role:n})})]})})},pl=e=>{var l,i,o,d,a,r,u,m,_,h,f,g;let{carryParentState:b,role:j}=e;const{t:p}=(0,c.$G)(),k=(0,n.UO)(),N=(0,s.v9)((e=>e.libraryChange)),[y,S]=(0,t.useState)(""),[Z,C]=(0,t.useState)(""),[F,M]=(0,t.useState)(!1),[I,w]=(0,t.useState)(!1),[L,T]=(0,t.useState)(""),[D]=(0,v.Se)();(0,t.useEffect)((()=>{if(I){let e=new FormData;e.append("file",Z),D({file:e,lid:null===N||void 0===N?void 0:N.lid}).then((e=>{})).catch({})}}),[I,Z]);const{getLibraryDetail:A,getLibraryDetailRefetch:E}=(0,v.yX)({lid:null===N||void 0===N?void 0:N.lid,skip:!(null!==N&&void 0!==N&&N.lid)});return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Ue.Z,{coverKey:null===A||void 0===A||null===(l=A.library)||void 0===l?void 0:l.cover,coverId:null===A||void 0===A||null===(i=A.library)||void 0===i?void 0:i.coverId,defaultCover:"/images/profileAndCover/library-cover.png",textLarge:p("librarian"),textSmall:"".concat(null===A||void 0===A||null===(o=A.library)||void 0===o||null===(d=o.libraryHead)||void 0===d?void 0:d.staffFirstName," ").concat(null!==A&&void 0!==A&&null!==(a=A.library)&&void 0!==a&&null!==(r=a.libraryHead)&&void 0!==r&&r.staffMiddleName?null===A||void 0===A||null===(u=A.library)||void 0===u||null===(m=u.libraryHead)||void 0===m?void 0:m.staffMiddleName:""," ").concat(null===A||void 0===A||null===(_=A.library)||void 0===_||null===(h=_.libraryHead)||void 0===h?void 0:h.staffLastName),count1:null===A||void 0===A||null===(f=A.library)||void 0===f?void 0:f.bookCount,count1label:p("books"),count2:null===A||void 0===A||null===(g=A.library)||void 0===g?void 0:g.memberCount,count2label:p("members"),profilePhoto:L,profileChange:e=>{const l=URL.createObjectURL(e.target.files[0]);C(e.target.files[0]),T(l),S(l),M(!0)},openCrop:F,setOpenCrop:M,setPhotoURL:S,photoURL:y,setFile:C,setUpload:w,setProfilePhoto:T,viewAs:!0,redirectUrl:"/q/".concat(k.username,"/member/library?a=site"),carryParentState:b}),(0,x.jsx)(jl,{library:null===A||void 0===A?void 0:A.library,getLibraryDetailRefetch:E,carryParentState:b,role:j})]})};const kl=function(e){let{onClickValue:l,carryParentState:i,role:t,mid:o}=e;const s=(0,n.TH)();return(0,x.jsxs)("div",{className:d,children:[!s.search&&(0,x.jsx)(pl,{carryParentState:i,role:t}),s.search&&(0,x.jsx)(He,{carryParentState:i,insId:null===l||void 0===l?void 0:l.institute,role:t,mid:o})]})};var Nl=i(46500),yl=i(78068);const Sl=()=>{var e,l,i,d,a,r,c,u,v,m,_,h,f,g,b,j,p;const k=(0,n.TH)(),N=(0,s.I0)();return(0,t.useEffect)((()=>{var e,l,i,t,o;N(Nl.X.libraryQuery({lid:null===k||void 0===k||null===(e=k.state)||void 0===e||null===(l=e.onClickValue)||void 0===l?void 0:l._id,lhead:null===k||void 0===k||null===(i=k.state)||void 0===i||null===(t=i.onClickValue)||void 0===t||null===(o=t.libraryHead)||void 0===o?void 0:o._id}))}),[]),(0,x.jsx)(x.Fragment,{children:"site"===(null===k||void 0===k||null===(e=k.search)||void 0===e?void 0:e.substring(3))?(0,x.jsx)(yl.Z,{lid:null===k||void 0===k||null===(l=k.state)||void 0===l||null===(i=l.onClickValue)||void 0===i?void 0:i._id}):(0,x.jsx)(o.Z,{index:null!==k&&void 0!==k&&null!==(d=k.state)&&void 0!==d&&null!==(a=d.onClickValue)&&void 0!==a&&a.role?"58":"8",sid:null!==(r=null===k||void 0===k||null===(c=k.state)||void 0===c?void 0:c.sid)&&void 0!==r?r:"",onClickValue:null!==(u=null===k||void 0===k||null===(v=k.state)||void 0===v?void 0:v.onClickValue)&&void 0!==u?u:"",children:(0,x.jsx)(kl,{onClickValue:null!==(m=null===k||void 0===k||null===(_=k.state)||void 0===_?void 0:_.onClickValue)&&void 0!==m?m:"",carryParentState:null===k||void 0===k?void 0:k.state,role:null!==(h=null===(f=k.state)||void 0===f||null===(g=f.onClickValue)||void 0===g?void 0:g.role)&&void 0!==h?h:"",mid:null!==(b=null===(j=k.state)||void 0===j||null===(p=j.onClickValue)||void 0===p?void 0:p.mid)&&void 0!==b?b:""})})})}},47735:(e,l,i)=>{i.d(l,{Z:()=>r});var t=i(72791),o=(i(32804),i(73032)),n=i(98734),s=i(62732),d=i(69721),a=i(80184);const r=e=>{let{rid:l}=e;const[i,r]=(0,t.useState)(!1),[c,u]=(0,t.useState)(""),[v,m]=(0,t.useState)(""),{internalFeeReceipt:_,internalFeeReceiptRefetch:h}=(0,o.H0)({rid:c,skip:!c});(0,t.useEffect)((()=>{c&&h()}),[c,h]);return(0,t.useEffect)((()=>{null!==_&&void 0!==_&&_.receipt&&null!==_&&void 0!==_&&_.one_account&&m(_)}),[_]),(0,t.useEffect)((()=>{if(v){var e,l,i,t,o,n,a,c;r((e=>!e));let u=null===v||void 0===v?void 0:v.one_account,_=null===v||void 0===v?void 0:v.receipt;const h=null!==_&&void 0!==_&&null!==(e=_.finance)&&void 0!==e&&null!==(l=e.institute)&&void 0!==l&&l.insProfilePhoto?"".concat(d.Yz,"/").concat(null===_||void 0===_||null===(i=_.finance)||void 0===i||null===(t=i.institute)||void 0===t?void 0:t.insProfilePhoto):"/images/certificate/logodemo.jpg",f=null!==_&&void 0!==_&&null!==(o=_.finance)&&void 0!==o&&null!==(n=o.institute)&&void 0!==n&&n.affliatedLogo?"".concat(d.Yz,"/").concat(null===_||void 0===_||null===(a=_.finance)||void 0===a||null===(c=a.institute)||void 0===c?void 0:c.affliatedLogo):"/images/certificate/logodemo.jpg";u&&_&&((0,s.Z)(u,_,h,f),r(!1)),m(""),window.location.reload()}}),[v]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:"/images/members/receipt-icon.svg",onClick:()=>{var e;(e=l)&&(r((e=>!e)),u(e))},alt:"receipt icon"}),i&&(0,a.jsx)(n.Z,{})]})}},1874:(e,l,i)=>{i.d(l,{Z:()=>s});i(72791);var t=i(54164),o=i(84489),n=i(80184);const s=e=>{let{onClose:l,customStyleBackdrop:i}=e;return(0,n.jsx)(n.Fragment,{children:t.createPortal((0,n.jsx)(o.Z,{onClose:l,customStyleBackdrop:i}),document.getElementById("backdrop"))})}},11163:(e,l,i)=>{i.d(l,{BK:()=>m,Ff:()=>d,GX:()=>g,S4:()=>c,o:()=>_,oz:()=>a});var t=i(72791),o=i(43997),n=i(97892),s=i.n(n);const d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a=["January","February","March","April","May","June","July","August","September","October","November","December"],r={0:4,1:3,2:4,3:3,4:4,5:3,6:4,7:4,8:3,9:4,10:3,11:4},c=()=>{let e=(new Date).getFullYear(),l=e-70,i=[];for(let t=e+30;t>=l;t--)i.push(t);return i.reverse()},u=[1,2,3,4,5,6,0],v=()=>new Date,m=(e,l)=>{var i,t;let n;n=l?null===(i=s()(e))||void 0===i?void 0:i.format("YYYY-MM-DD"):(0,o.O_)(e);let d=new Date,a=null===(t=s()(d))||void 0===t?void 0:t.format("YYYY-MM-DD"),r=new Date("".concat(n)),c=new Date("".concat(a));return r.getTime()===c.getTime()},_=(e,l)=>e===(e=>{let l=null===e||void 0===e?void 0:e.split("-"),i=(null===l||void 0===l?void 0:l[0])>9?null===l||void 0===l?void 0:l[0]:"0".concat(null===l||void 0===l?void 0:l[0]),t=(null===l||void 0===l?void 0:l[1])>9?null===l||void 0===l?void 0:l[1]:"0".concat(null===l||void 0===l?void 0:l[1]);return"".concat(i,"/").concat(t,"/").concat(null===l||void 0===l?void 0:l[2])})(l),h=e=>(e=>{let l=new Date(e);return new Date(l.getFullYear(),l.getMonth()+1,0)})(e).getDate(),f=e=>(e=>{let l=new Date(e);return new Date(l.getFullYear(),l.getMonth(),0)})(e).getDate(),x=e=>u.indexOf((e=>{let l=new Date(e);return new Date(l.getFullYear(),l.getMonth(),1).getDay()})(e)),g=e=>{const[l,i]=(0,t.useState)(v());(0,t.useEffect)((()=>{e&&i((e=>{let l=(0,o.O_)(e);return new Date(l)})(e))}),[e]);const n=f(s=l)-x(s);var s;const c=(0,t.useMemo)((()=>((e,l)=>{let i=1,t=1,o=new Date(e);const n={};for(let s=1;s<7;s++){n[s]=[];for(let a=1;a<8;a++)if(1===s)if(a<=x(e)+1){let e=o.getMonth()+1,t="".concat(o.getFullYear(),"-").concat(e>9?e:"0".concat(e),"-").concat(i>9?i:"0".concat(i)),a=new Date(t);n[s]=[...n[s],{type:"PREVIOUS",date:"".concat(l,"-").concat(0===o.getMonth()?12:o.getMonth(),"-").concat(0===o.getMonth()?o.getFullYear()-1:o.getFullYear()),value:l,day:d[a.getDay()]}],++l}else{let e=o.getMonth()+1,l="".concat(o.getFullYear(),"-").concat(e>9?e:"0".concat(e),"-").concat(i>9?i:"0".concat(i)),t=new Date(l);n[s]=[...n[s],{type:"CURRENT",date:"".concat(i,"-").concat(o.getMonth()+1,"-").concat(o.getFullYear()),value:i,day:d[t.getDay()]}],i++}else if(s>1&&i<h(e)+1){let e=o.getMonth()+1,l="".concat(o.getFullYear(),"-").concat(e>9?e:"0".concat(e),"-").concat(i>9?i:"0".concat(i)),t=new Date(l);n[s]=[...n[s],{type:"CURRENT",date:"".concat(i,"-").concat(o.getMonth()+1,"-").concat(o.getFullYear()),value:i,day:d[t.getDay()]}],i++}else{let e=o.getMonth()+1,l="".concat(o.getFullYear(),"-").concat(e>9?e:"0".concat(e),"-").concat(i>9?i:"0".concat(i)),a=new Date(l);n[s]=[...n[s],{type:"NEXT_MONTH",date:"".concat(t,"-").concat(o.getMonth()+2===13?1:o.getMonth()+2,"-").concat(o.getMonth()+2===13?o.getFullYear()+1:o.getFullYear()),value:t,day:d[a.getDay()]}],t++}}return n})(l,n)),[l,n]),u=(0,t.useCallback)((()=>{i((e=>new Date(e.getFullYear(),e.getMonth()-1,1)))}),[]),m=(0,t.useCallback)((()=>{i((e=>new Date(e.getFullYear(),e.getMonth()+1,1)))}),[]),g=(0,t.useCallback)((e=>{let l=null===e||void 0===e?void 0:e.split("-"),t=new Date("".concat(l[2],"-").concat(l[1],"-").concat(l[0]));i(t)}),[]);return{selectedDate:l,setSelectedDate:i,getPreviousMonth:u,getNextMonth:m,getSelectedDate:g,generateCalendar:c,getToday:v,dayName:d,monthName:a,getCompareDate:_,monthPage:r}}},60924:(e,l,i)=>{i.d(l,{Z:()=>_});var t=i(39230),o=i(52245),n=i(72791),s=i(11163),d=i(8728),a=i(48293),r=i(98684),c=i(97892),u=i.n(c),v=i(80184);const m=e=>{var l;let{onClose:i,date:t,onDateSelect:o}=e;const{selectedDate:c,setSelectedDate:m,getPreviousMonth:_,getNextMonth:h,getSelectedDate:f,generateCalendar:x}=(0,s.GX)(t),[g,b]=(0,n.useState)(""),j=(0,s.S4)(),p=(0,n.useMemo)((()=>j.indexOf(c.getFullYear())),[c,j]),[k,N]=(0,n.useState)(0),y=(0,n.useMemo)((()=>j.slice(p+12*k,k?p+12*k+12:p+12)),[j,k,p]),S=(0,n.useCallback)((()=>{b(g?"":"MONTH")}),[g]),Z=(0,n.useCallback)((()=>{b(g?"":"YEAR")}),[g]),C=(0,n.useCallback)((e=>{m((l=>new Date("".concat(e," ").concat(l.getDate()," ").concat(l.getFullYear())))),S()}),[S]),F=(0,n.useCallback)((e=>{m((l=>new Date("".concat(l.getMonth()+1," ").concat(l.getDate()," ").concat(e)))),Z()}),[Z]);return(0,v.jsx)(a.Z,{onClose:i,customBackdropStyle:{zIndex:"2000"},customOverlayStyle:{zIndex:"2000"},children:(0,v.jsxs)("div",{className:d.Z.calendar,children:[(0,v.jsxs)("div",{className:d.Z.calendar_top,children:[(0,v.jsx)("img",{src:"".concat(r.Fk,"/next.svg"),alt:"previous icon",onClick:()=>{g?"YEAR"===g&&N((e=>e-1)):_()},style:{rotate:"180deg"}}),(0,v.jsxs)("h6",{children:[(0,v.jsx)("span",{onClick:S,children:u()(c).format("MMMM")})," ",(0,v.jsx)("span",{onClick:Z,children:u()(c).format("YYYY")})]}),(0,v.jsx)("img",{src:"".concat(r.Fk,"/next.svg"),alt:"next icon",onClick:()=>{g?"YEAR"===g&&N((e=>e+1)):h()}})]}),"MONTH"===g?(0,v.jsx)("div",{className:d.Z.calendar_month,children:s.oz.map((e=>(0,v.jsx)("p",{className:u()(c).format("MMMM")===e?"".concat(d.Z.calendar_month_value," ").concat(d.Z.calendar_month_value_active):d.Z.calendar_month_value,onClick:()=>C(e),children:e},e)))}):"YEAR"===g?(0,v.jsx)("div",{className:d.Z.calendar_month,children:null===y||void 0===y?void 0:y.map((e=>(0,v.jsx)("p",{className:u()(c).format("YYYY")==="".concat(e)?"".concat(d.Z.calendar_month_value," ").concat(d.Z.calendar_month_value_active):d.Z.calendar_month_value,onClick:()=>F(e),children:e},e)))}):(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:d.Z.calendar_days,children:s.Ff.map((e=>(0,v.jsx)("p",{className:d.Z.calendar_days_label,children:e},e)))}),null===(l=Object.values(x))||void 0===l?void 0:l.map(((e,l)=>(0,v.jsx)("div",{className:d.Z.calendar_days,children:e.map((e=>(0,v.jsx)("p",{className:d.Z.calendar_days_value,style:{"--calendar-border":(0,s.BK)(null===e||void 0===e?void 0:e.date)?"#123456":(0,s.o)(c,null===e||void 0===e?void 0:e.date)?"red":""},onClick:()=>{return l=null===e||void 0===e?void 0:e.date,f(l),o(l),void i();var l},children:null===e||void 0===e?void 0:e.value},null===e||void 0===e?void 0:e.date)))},l)))]})]})})},_=e=>{let{label:l,name:i,msg:s,value:d,onChange:a,placeholder:c,customFormInputContainer:u,customFormInputLabel:_,customFormInput:h,errorShow:f,disabled:x}=e;const{t:g}=(0,t.$G)(),[b,j]=(0,n.useState)(!1),p=()=>{j((e=>!e))};return(0,v.jsxs)("div",{className:o.Z.form_input_container,style:u,children:[l&&(0,v.jsxs)("label",{className:o.Z.form_input_label,style:_,htmlFor:i,children:[l,s?(0,v.jsx)("span",{className:o.Z.form_input_label_error,children:s}):f?(0,v.jsxs)("span",{className:o.Z.form_input_label_error,children:["* ",g("form_require_label")]}):null]}),(0,v.jsx)("input",{className:o.Z.form_input,type:"text",value:d,name:i,placeholder:c,disabled:x,style:h,onFocus:p}),(0,v.jsx)("img",{src:"".concat(r.Fk,"/calendar.svg"),alt:"calander-icon",className:o.Z.form_calendar_icon,onClick:p}),b&&(0,v.jsx)(m,{onClose:p,onDateSelect:a,date:d})]})}},61055:(e,l,i)=>{i.d(l,{Z:()=>d});var t=i(39230),o=i(52245),n=i(80184);const s=["tel","number"],d=e=>{let{label:l,name:i,msg:d,type:a,value:r,onChange:c,placeholder:u,maxLength:v,customFormInputContainer:m,customFormInputLabel:_,customFormInput:h,errorShow:f,disabled:x,children:g}=e;const{t:b}=(0,t.$G)();return(0,n.jsxs)("div",{className:o.Z.form_input_container,style:m,children:[l&&(0,n.jsxs)("label",{className:o.Z.form_input_label,style:_,htmlFor:i,children:[l,d?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("span",{className:o.Z.form_input_label_error,children:[" "," "," ",d]})}):f?(0,n.jsxs)("span",{className:o.Z.form_input_label_error,children:["* ",b("form_require_label")]}):null,g]}),s.includes(a)?(0,n.jsx)("input",{className:o.Z.form_input,type:a,value:r,onChange:c,name:i,placeholder:u,maxLength:null!==v&&void 0!==v?v:100,disabled:x,style:h}):(0,n.jsx)("input",{className:o.Z.form_input,type:a,value:r,onChange:c,name:i,placeholder:u,disabled:x,style:h})]})}},62732:(e,l,i)=>{i.d(l,{Z:()=>c});var t=i(35125),o=i(72426),n=i.n(o),s=i(62906),d=i.n(s),a=new t.ZP({format:[270,210]}),r=a.internal.pageSize.getWidth();const c=function(e,l,i,t){var o,s,c,u,v,m,_,h,f,x,g,b,j,p,k,N,y;let S=arguments.length>4&&void 0!==arguments[4]&&arguments[4],Z=null===l||void 0===l||null===(o=l.finance)||void 0===o?void 0:o.institute,C=null===l||void 0===l||null===(s=l.finance)||void 0===s?void 0:s.financeHead,F=null===l||void 0===l?void 0:l.student,M=null===l||void 0===l?void 0:l.internal_fees,I=null===l||void 0===l?void 0:l.order_history;a.addImage(i,"JPEG",9,3,25,25),a.addImage(t,"JPEG",r-34,2.4,25,25),a.setLineWidth(8),a.setDrawColor(255,255,255),a.circle(21.4,15,16),a.setLineWidth(0),a.setLineWidth(8),a.setDrawColor(255,255,255),a.circle(r-21.4,15,16),a.setLineWidth(0);const w=a.splitTextToSize(null===Z||void 0===Z?void 0:Z.insName,146);if(a.setFont(void 0,"normal"),w.length>1){let e=10;a.setFont("700"),a.setTextColor(18,18,18),a.setFontSize(16),a.text(107,e,w,"center"),e=w.length+145}else{let e=10;a.setFont("700"),a.setTextColor(18,18,18),a.setFontSize(18),a.text(107,e,w,"center"),e=w.length+145}a.setFont("Arial","normal","400"),a.setTextColor(18,18,18),a.setFontSize(10),a.text(r/2,w.length>1?23:19,null===Z||void 0===Z?void 0:Z.insAddress,"center"),a.setFont("WorkSans"),a.setTextColor(18,18,18),a.setFontSize(10),a.text(r/2,w.length>1?29:25,"Mob No : ".concat(null===Z||void 0===Z?void 0:Z.insPhoneNumber," , Mail: ").concat(null===Z||void 0===Z?void 0:Z.insEmail),"center"),a.setFont("WorkSans"),a.setTextColor(0,0,0),a.setFontSize(18),a.text(r/2,37,"Fee Receipt","center"),a.setLineWidth(.7),a.setDrawColor(18,18,18),a.line(0,46,r,46),a.setTextColor(0,0,0),a.setFont(void 0,"bold"),a.setFontSize(10),a.text(9,54,"Invoice No :"),a.setFont(void 0,"normal"),a.setTextColor(0,0,0),a.setFontSize(10),a.text(32,54,null===l||void 0===l?void 0:l.invoice_count),a.setTextColor(0,0,0),a.setFont(void 0,"bold"),a.setFontSize(10),a.text(r-32,54,"Dated:",{align:"right"}),a.setFont(void 0,"normal"),a.setTextColor(0,0,0),a.setFontSize(10),a.text(r-12,54,n()(null===l||void 0===l?void 0:l.created_at).format("DD-MMM-YYYY"),{align:"right"}),a.setTextColor(0,0,0),a.setFont(void 0,"bold"),a.setFontSize(10),a.text(9,61,"Purpose:"),a.setFont(void 0,"normal"),a.setTextColor(0,0,0),a.setFontSize(10),a.text(32,61,"".concat(null!==(c=null===M||void 0===M?void 0:M.internal_fee_reason)&&void 0!==c?c:"N/A")),a.setTextColor(0,0,0),a.setFont(void 0,"bold"),a.setFontSize(10),a.text(9,68,"Amount: "),a.setFont(void 0,"normal"),a.setTextColor(0,0,0),a.setFontSize(10),a.text(32,68,"Rs. ".concat(null===l||void 0===l?void 0:l.fee_payment_amount)),a.setTextColor(0,0,0),a.setFont(void 0,"bold"),a.setFontSize(11),a.text(9,97," ".concat(S?"Received Through: ":"Paid Through: ")),a.setFont(void 0,"normal"),a.text(44,97,"".concat(null===e||void 0===e?void 0:e.finance_bank_name,", ").concat(null===e||void 0===e?void 0:e.finance_bank_account_name,", A/c No:  ").concat(null===e||void 0===e?void 0:e.finance_bank_account_number)),a.setTextColor(0,0,0),a.setFont(void 0,"bold"),a.text(9,107," On Account of: ");const L="Being money ".concat(S?"received":"paid"," by ").concat(null===l||void 0===l?void 0:l.fee_payment_mode,", Transaction ID: ").concat(null!==(u=null===I||void 0===I?void 0:I.razorpay_order_id)&&void 0!==u?u:"N/A"," ,  Dated: ").concat(n()(null===l||void 0===l?void 0:l.created_at).format("DD-MMM-YYYY"),"  for Rs. ").concat(null===l||void 0===l?void 0:l.fee_payment_amount,".").concat(S?"From":"To"," ","".concat(null!==(v=null===F||void 0===F?void 0:F.studentFirstName)&&void 0!==v?v:""," ").concat(null!==(m=null===F||void 0===F?void 0:F.studentMiddleName)&&void 0!==m?m:""," ").concat(null!==(_=null===F||void 0===F?void 0:F.studentLastName)&&void 0!==_?_:""," "),", towards ").concat(null!==(h=null===M||void 0===M?void 0:M.internal_fee_reason)&&void 0!==h?h:"N/A","."),T=a.splitTextToSize(L,r-20);if(T.length>1){let e=113,l=10;a.setFont(void 0,"normal"),a.setFontSize(11),a.setTextColor(18,18,18),a.text(l,e,T,"left"),e=T.length+151}else{let e=113,l=10;a.setFontSize(11),a.setFont(void 0,"normal"),a.setTextColor(18,18,18),a.setFontSize(12),a.text(l,e,T,"left"),e=T.length+151}var D,A,E,B;(a.setTextColor(0,0,0),a.setFont(void 0,"bold"),a.setFontSize(11),a.text(9,131,"Bank Transaction Details: "),a.setFont(void 0,"normal"),a.text(9,138,"Payment Mode:  ".concat(null===l||void 0===l?void 0:l.fee_payment_mode)),null!==I&&void 0!==I&&I.razorpay_order_id)?a.text(9,144,"Transaction ID: ".concat(null!==(D=null===I||void 0===I?void 0:I.razorpay_order_id)&&void 0!==D?D:"N/A")):(a.text(9,144,"Bank Name: ".concat(null!==(A=null===e||void 0===e?void 0:e.fee_bank_name)&&void 0!==A?A:"N/A")),a.text(9,150,"Bank Holder Name: ".concat(null!==(E=null===e||void 0===e?void 0:e.finance_bank_account_name)&&void 0!==E?E:"N/A")),a.text(9,156,"UTR / Ref No.: ".concat(null!==(B=null===e||void 0===e?void 0:e.fee_utr_reference)&&void 0!==B?B:"N/A")),a.text(9,162,"Date: ".concat(n()(null===l||void 0===l?void 0:l.created_at).format("DD-MMM-YYYY"))),a.text(9,168,"Amount: ".concat(null===l||void 0===l?void 0:l.fee_payment_amount)),a.text(9,174,"Amount in Words: ".concat((d().toWords(l.fee_payment_amount.toString()).match(/[a-zA-Z0-9]+/g)||[]).map((e=>"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)))).join(" ")," only.")));a.setFontSize(9),a.text(40,240,"".concat(C.staffFirstName," ").concat(null!==(f=C.staffMiddleName)&&void 0!==f?f:""," ").concat(C.staffLastName),{align:"center"}),a.setFont(void 0,"bold"),a.setFontSize(10),a.text(40,245,"Finance Manager",{align:"center"}),a.setFont(void 0,"normal"),a.setFontSize(9),a.text(153,240,"".concat(null!==(x=null===Z||void 0===Z||null===(g=Z.displayPersonList)||void 0===g||null===(b=g[0])||void 0===b||null===(j=b.displayUser)||void 0===j?void 0:j.userLegalName)&&void 0!==x?x:"N/A"),{align:"center"}),a.setFont(void 0,"bold"),a.setFontSize(10),a.text(153,245,"".concat(null!==(p=null===Z||void 0===Z||null===(k=Z.displayPersonList)||void 0===k||null===(N=k[0])||void 0===N?void 0:N.displayTitle)&&void 0!==p?p:"N/A"),{align:"center"}),a.setTextColor(0,0,255),a.setFontSize(7),a.text(r-20,243,"Online Automated",null,50),a.text(r-18,244,"Generated fee receipt",null,50),a.text(r-14,246,"Through Qviple",null,50),a.setLineWidth(.2),a.setDrawColor(18,18,18),a.line(0,251,r,251),a.setTextColor(18,18,18),a.setFontSize(8),a.setFont(void 0,"normal"),a.text(r/2,259,"Note : No one except one who is making this certificate should interfere with any details of this invoice, othewise students will be expelled and legal action will be taken.","center"),window.open(a.output("bloburl",{filename:"".concat(null===F||void 0===F?void 0:F.studentFirstName," ").concat(null!==(y=null===F||void 0===F?void 0:F.studentMiddleName)&&void 0!==y?y:""," ").concat(null===F||void 0===F?void 0:F.studentLastName," -Internal Fee Receipt.pdf")}),"_blank")}},87049:(e,l,i)=>{i.d(l,{Z:()=>t});const t={edit_modal_container:"EditConfirm_edit_modal_container__WfbTq",modal_header:"EditConfirm_modal_header__4sq5J",edit:"EditConfirm_edit__ziVGP",remove:"EditConfirm_remove__PCXLs",xlsx_update_btn:"EditConfirm_xlsx_update_btn__H3yM8",save_stop_btn:"EditConfirm_save_stop_btn__9NiZ5",update_to_btn:"EditConfirm_update_to_btn__ExCJv"}},29407:(e,l,i)=>{i.d(l,{Z:()=>t});const t={refund_container:"AdmisisonRefund_refund_container__BTIz6",refund_container_title:"AdmisisonRefund_refund_container_title__Rwwk9",refund_total:"AdmisisonRefund_refund_total__7rRiv",refund_card:"AdmisisonRefund_refund_card__M65Il",refund_card_text_container:"AdmisisonRefund_refund_card_text_container__jp-8T",refund_card_text:"AdmisisonRefund_refund_card_text__eVyEv",export_card:"AdmisisonRefund_export_card__xse7V",export_card_text:"AdmisisonRefund_export_card_text__4VVsl",export_card_date:"AdmisisonRefund_export_card_date__Wejoy",admission_filter_icon:"AdmisisonRefund_admission_filter_icon__5ncUR",menu_icon:"AdmisisonRefund_menu_icon__WdVbN",both_filter:"AdmisisonRefund_both_filter__k26Hu",both_filter_with_name:"AdmisisonRefund_both_filter_with_name__4eJUc",tab_manage:"AdmisisonRefund_tab_manage__G7dJo"}},32804:(e,l,i)=>{i.d(l,{Z:()=>t});const t={student_fees_header_container:"StudentAllFeesData_student_fees_header_container__06J8F",student_fees_header_column:"StudentAllFeesData_student_fees_header_column__7WxL2",student_fees_row_amount:"StudentAllFeesData_student_fees_row_amount__2QSk8",student_fees_btn_container:"StudentAllFeesData_student_fees_btn_container__rcsyt",student_fees_btn_container_active:"StudentAllFeesData_student_fees_btn_container_active__LiRxa",student_alll_fees_data:"StudentAllFeesData_student_alll_fees_data__CBPmP",student_admission_fees_container:"StudentAllFeesData_student_admission_fees_container__Fs6dX",student_internal_card:"StudentAllFeesData_student_internal_card__QP2oz",student_internal_card_btn_pay:"StudentAllFeesData_student_internal_card_btn_pay__CzvCh",student_internal_card_btn_paid:"StudentAllFeesData_student_internal_card_btn_paid__KP8Jd"}},8728:(e,l,i)=>{i.d(l,{Z:()=>t});const t={calendar:"Calendar_calendar__ZZaTt",calendar_top:"Calendar_calendar_top__ADLui",calendar_days:"Calendar_calendar_days__vUwsX",calendar_days_label:"Calendar_calendar_days_label__VF+-3",calendar_days_value:"Calendar_calendar_days_value__cY4KR",calendar_days_value_active:"Calendar_calendar_days_value_active__CC8ZH",calendar_month:"Calendar_calendar_month__iidgh",calendar_month_value:"Calendar_calendar_month_value__nzPqp",calendar_month_value_active:"Calendar_calendar_month_value_active__xUZQL"}}}]);
//# sourceMappingURL=78778.3a4e37cc.chunk.js.map