"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[53346],{53346:(e,l,i)=>{i.r(l),i.d(l,{default:()=>w});var t=i(39230),n=i(56959),d=i(72791),s=i(23441),o=i(6758),a=i(91427),c=i(1669),u=i(98684),v=i(55336),r=i(2651),f=i(16871),p=i(43504),h=i(1095),_=i(97892),m=i.n(_),x=i(82824),j=i(37782),g=i(76697),y=i(80184);const N=e=>{var l,n,s,a,c,r,_,N,w,Z,k,R,b,S,I,D,L,E,M,C,F,U,Y,q,A,O,P;let{logs:G}=e;const{t:T}=(0,t.$G)(),W=(0,f.UO)(),z=(0,f.TH)(),[H,J]=(0,d.useState)(""),[$,B]=(0,d.useState)(!1),[K,V]=(0,d.useState)(""),{financeReceipt:Q,financeReceiptRefetch:X}=(0,o.Nw)({rid:H,skip:!H});(0,d.useEffect)((()=>{H&&X()}),[H,X]),(0,d.useEffect)((()=>{null!==Q&&void 0!==Q&&Q.receipt&&null!==Q&&void 0!==Q&&Q.all_remain&&V(Q)}),[Q]),(0,d.useEffect)((()=>{if(K){const e=new Worker(new URL(i.p+i.u(24636),i.b)),{institute:l,studentInfo:t,paymentReceiptInfo:n}=(0,j.Hs)(null===K||void 0===K?void 0:K.all_remain,null===K||void 0===K?void 0:K.receipt);e.postMessage({institute:l,studentInfo:t,paymentReceiptInfo:n,printReceiptType:"Refunded"===(null===n||void 0===n?void 0:n.transactonRefund)?"ADMISSION_REFUND":"ADMISSION"}),e.onmessage=l=>{l&&(window.open(l.data,"_blank"),B((e=>!e)),V(""),e.terminate())}}}),[K]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:g.Z.sidebarheader,style:{gap:"1%"},title:"View Receipt",children:[(0,y.jsxs)("div",{className:g.Z.history_image_container,style:{width:"50%"},children:[null!==G&&void 0!==G&&null!==(l=G.fee_receipt)&&void 0!==l&&null!==(n=l.student)&&void 0!==n&&n.studentProfilePhoto?(0,y.jsx)(p.rU,{to:"/q/".concat(W.username,"/student/profile"),state:{...z.state,sid:null===G||void 0===G||null===(s=G.fee_receipt)||void 0===s||null===(a=s.student)||void 0===a?void 0:a._id},children:(0,y.jsx)("img",{src:"".concat(h.yI,"/").concat(null===G||void 0===G||null===(c=G.fee_receipt)||void 0===c||null===(r=c.student)||void 0===r?void 0:r.studentProfilePhoto),alt:"qr code",style:{width:"60px",height:"60px",borderRadius:"12px"}})}):null,(0,y.jsxs)("div",{className:g.Z.text,children:[(0,y.jsx)("h6",{children:"".concat(null!==(_=null===G||void 0===G||null===(N=G.fee_receipt)||void 0===N||null===(w=N.student)||void 0===w?void 0:w.studentFirstName)&&void 0!==_?_:""," ").concat(null!==(Z=null===G||void 0===G||null===(k=G.fee_receipt)||void 0===k||null===(R=k.student)||void 0===R?void 0:R.studentMiddleName)&&void 0!==Z?Z:""," ").concat(null!==(b=null===G||void 0===G||null===(S=G.fee_receipt)||void 0===S||null===(I=S.student)||void 0===I?void 0:I.studentLastName)&&void 0!==b?b:"")}),(0,y.jsxs)("p",{className:g.Z.rcv,children:[T("gr_number")," ",null!==(D=null===G||void 0===G||null===(L=G.fee_receipt)||void 0===L||null===(E=L.student)||void 0===E?void 0:E.studentGRNO)&&void 0!==D?D:""]}),(0,y.jsxs)("p",{className:g.Z.rcv,children:[null===(M=m()(null===G||void 0===G?void 0:G.created_at))||void 0===M?void 0:M.format("DD/MM/YYYY"),", ",(0,x.J)(null===G||void 0===G?void 0:G.created_at,"LT")]})]})]}),(0,y.jsxs)("div",{className:g.Z.text,style:{width:"27%"},children:[(0,y.jsx)("p",{className:g.Z.rcv,style:{width:"100%"},children:T("transaction_id")}),(0,y.jsx)("h6",{style:{width:"100%",wordWrap:"break-word"},children:null!==G&&void 0!==G&&null!==(C=G.fee_receipt)&&void 0!==C&&C.razorpay_payment_id?null===G||void 0===G||null===(F=G.fee_receipt)||void 0===F?void 0:F.razorpay_payment_id:null!==G&&void 0!==G&&null!==(U=G.fee_receipt)&&void 0!==U&&U.fee_utr_reference?null===G||void 0===G||null===(Y=G.fee_receipt)||void 0===Y?void 0:Y.fee_utr_reference:"N/A"})]}),(0,y.jsxs)("div",{className:g.Z.text,style:{width:"20%"},children:[(0,y.jsxs)("p",{className:g.Z.rcv,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[T("invoice_no")," ",null!==(q=null===G||void 0===G||null===(A=G.fee_receipt)||void 0===A?void 0:A.invoice_count)&&void 0!==q?q:"N/A",(0,y.jsx)("img",{src:"".concat(u.J7,"/receipt.svg"),alt:"receipt icon",title:"Download Fees Receipt",onClick:()=>{(()=>{var e,l,i;null!==G&&void 0!==G&&null!==(e=G.fee_receipt)&&void 0!==e&&e._id&&(B((e=>!e)),J(null===G||void 0===G||null===(l=G.fee_receipt)||void 0===l?void 0:l._id),H===(null===G||void 0===G||null===(i=G.fee_receipt)||void 0===i?void 0:i._id)&&V(Q))})()}})]}),(0,y.jsxs)("h6",{style:{width:"100%"},children:[T("rs_only")," ",null===G||void 0===G||null===(O=G.fee_receipt)||void 0===O?void 0:O.fee_payment_amount]}),(0,y.jsx)("p",{className:g.Z.rcv,style:{width:"100%"},children:null===G||void 0===G||null===(P=G.fee_receipt)||void 0===P?void 0:P.fee_payment_mode})]})]}),$&&(0,y.jsx)(v.default,{})]})},w=e=>{var l,i,f;let{fid:p}=e;const{t:h}=(0,t.$G)(),[_,m]=(0,d.useState)(""),[x,j]=(0,d.useState)(""),[g,w]=(0,d.useState)(1),[Z,k]=(0,d.useState)(!0),[R,b]=(0,s.YD)({skip:_}),{financeDeletedLogsList:S,financeDeletedLogsListLoading:I}=(0,o.bW)({data:{fid:p,page:g,limit:10,search:_},skip:!p});(0,d.useEffect)((()=>{b&&Z&&w((e=>e+1))}),[b,Z]),(0,d.useEffect)((()=>{var e;if(null!==S&&void 0!==S&&null!==(e=S.list)&&void 0!==e&&e.length){var l;let e=(0,a.f)(null===S||void 0===S||null===(l=S.list)||void 0===l?void 0:l.length);k((()=>e))}}),[null===S||void 0===S?void 0:S.list]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:n.Z.fm_search_full,children:(0,y.jsx)("section",{className:n.Z.fm_search_full_container,children:(0,y.jsxs)("div",{className:n.Z.fm_search_full_container_inner,children:[(0,y.jsx)("img",{className:n.Z.fm_search_full_icon,alt:"search icon",src:"".concat(u.dB,"/navbar-search.svg")}),(0,y.jsx)("input",{type:"text",placeholder:h("search"),onChange:e=>{var l;!I&&(null===S||void 0===S||null===(l=S.list)||void 0===l?void 0:l.length)>=0&&j(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&(w((()=>1)),m(x))},value:x})]})})}),null===S||void 0===S||null===(l=S.list)||void 0===l?void 0:l.map(((e,l)=>{var i;return(null===S||void 0===S||null===(i=S.list)||void 0===i?void 0:i.length)===l+1?(0,y.jsx)("div",{ref:R,children:(0,y.jsx)(N,{logs:e})},null===e||void 0===e?void 0:e._id):(0,y.jsx)(N,{logs:e},null===e||void 0===e?void 0:e._id)})),I?_?(0,y.jsx)(v.default,{}):(0,y.jsx)(c.Z,{}):_?0===(null===S||void 0===S||null===(i=S.list)||void 0===i?void 0:i.length)&&(0,y.jsx)(r.Z,{title:"No logs found related this search."}):0===(null===S||void 0===S||null===(f=S.list)||void 0===f?void 0:f.length)&&(0,y.jsx)(r.Z,{title:"No logs."})]})}}}]);
//# sourceMappingURL=53346.08e5d5e6.chunk.js.map