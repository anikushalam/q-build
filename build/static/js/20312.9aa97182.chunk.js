"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[20312],{20312:(e,i,t)=>{t.r(i),t.d(i,{default:()=>N});var s=t(72791);const a="CreateDepartment_DModal__3QHry",l="CreateDepartment_title__K2VUT",n="CreateDepartment_input__F08Y4",d="CreateDepartment_mid__pRfdT",o="CreateDepartment_text__qomYt",r="CreateDepartment_btn__bzFPY",c="CreateDepartment_notFound__ac5c5";var h=t(5574),v=t(39230),u=(t(7135),t(69721)),_=t(33992),g=t(49384),f=t(95048),m=t(98990),p=t(46876),x=t(57431),j=t(80184);const N=function(e){var i;let{departmentModal:t,hideModal:N,edit:S,setEdit:C,editDepartment:k,onReftech:b}=e;const w=(0,f.v9)((e=>e.idChange.id)),[M,L]=(0,s.useState)(!1),[A,D]=(0,s.useState)(S&&(null===k||void 0===k?void 0:k.dHead)),[y,T]=(0,s.useState)(!1),[R,F]=(0,s.useState)(!0),{t:Z}=(0,v.$G)(),[I,H]=(0,s.useState)({dName:S&&(null===k||void 0===k?void 0:k.dName)||"",dTitle:S&&(null===k||void 0===k?void 0:k.dTitle)||"",sid:S&&(null===k||void 0===k||null===(i=k.dHead)||void 0===i?void 0:i._id)||"",gr_initials:S&&(null===k||void 0===k?void 0:k.gr_initials)||""}),{allDepartmentRefetch:P}=(0,_.SM)({data:{id:w,which_type:"Normal"},skip:!w}),[O]=(0,_.Gg)(),[E]=(0,_.nr)(),q=(0,f.I0)();return(0,s.useEffect)((()=>{var e;S&&k&&(H({dName:(null===k||void 0===k?void 0:k.dName)||"",dTitle:(null===k||void 0===k?void 0:k.dTitle)||"",sid:(null===k||void 0===k||null===(e=k.dHead)||void 0===e?void 0:e._id)||"",gr_initials:(null===k||void 0===k?void 0:k.gr_initials)||""}),D(null===k||void 0===k?void 0:k.dHead))}),[S,k]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(h.Z,{open:t,children:(0,j.jsxs)("div",{className:a,children:[(0,j.jsxs)("div",{className:l,children:[S?(0,j.jsx)("h5",{children:Z("edit_department")}):(0,j.jsx)("h5",{children:Z("add_new_dept")}),(0,j.jsx)("img",{src:"/images/close-post-icon.svg",onClick:()=>{N(!1),C(!1),H({dName:"",dTitle:"",sid:"",gr_initials:""}),D("")},alt:""})]}),(0,j.jsx)("div",{hidden:R,className:c,children:Z("fill_all_the_details")}),(0,j.jsxs)("div",{className:n,children:[(0,j.jsx)("h6",{children:Z("department_name")}),(0,j.jsx)("input",{type:"text",value:I.dName,onChange:e=>{var i;(null===(i=e.target.value)||void 0===i?void 0:i.length)<=45&&(H({...I,dName:e.target.value}),F(!0))},required:!0,placeholder:Z("dept_example")}),(0,j.jsx)(x.Z,{maxLength:45,valueLength:I.dName})]}),(0,j.jsxs)("div",{className:d,onClick:()=>L(!0),children:[(0,j.jsx)("img",{src:null!==A&&void 0!==A&&A.staffProfilePhoto?"".concat(u.yI,"/").concat(A.staffProfilePhoto):"/images/avatar-icon.png",alt:""}),(0,j.jsxs)("div",{className:o,children:[(0,j.jsx)("h6",{children:A?"".concat(null===A||void 0===A?void 0:A.staffFirstName," ").concat(A.staffMiddleName?A.staffMiddleName:""," ").concat(null===A||void 0===A?void 0:A.staffLastName):"".concat(Z("assign_dhead")," ").concat(Z("optional"))}),(0,j.jsx)("p",{children:Z("search_from_joined_list")})]})]}),(0,j.jsxs)("div",{className:n,children:[(0,j.jsx)("h6",{children:Z("give_dhead_title")}),(0,j.jsx)("input",{type:"text",value:I.dTitle,onChange:e=>{var i;(null===(i=e.target.value)||void 0===i?void 0:i.length)<=40&&(H({...I,dTitle:e.target.value}),F(!0))},placeholder:Z("dhead_example"),required:!0}),(0,j.jsx)(x.Z,{maxLength:40,valueLength:I.dTitle})]}),(0,j.jsxs)("div",{className:n,children:[(0,j.jsx)("h6",{children:Z("department_initials")}),(0,j.jsx)("input",{type:"text",value:I.gr_initials,onChange:e=>{var i;(null===(i=e.target.value)||void 0===i?void 0:i.length)<=10&&(H({...I,gr_initials:e.target.value}),F(!0))},placeholder:Z("department_initials_placeholder"),required:!0}),(0,j.jsx)(x.Z,{maxLength:10,valueLength:I.gr_initials})]}),(0,j.jsxs)("button",{className:r,onClick:()=>{if(I.dName&&I.dTitle)if(T(!0),S){var e;const i={dName:(null===k||void 0===k?void 0:k.dName)===I.dName?"":I.dName,dTitle:(null===k||void 0===k?void 0:k.dTitle)===I.dTitle?"":I.dTitle,sid:(null===k||void 0===k||null===(e=k.dHead)||void 0===e?void 0:e._id)===I.sid?"":I.sid,gr_initials:(null===k||void 0===k?void 0:k.gr_initials)===I.gr_initials?"":I.gr_initials};E({department:i,did:null===k||void 0===k?void 0:k._id}).then((e=>{e&&(q(m.S.editOneDepartment({did:null===k||void 0===k?void 0:k._id,dName:I.dName,dTitle:I.dTitle,dHead:A})),b(),N(!1),T(!1),H({dName:"",dTitle:"",sid:"",gr_initials:""}),D(""))})).catch({})}else O({departmentCreate:I,id:w}).then((e=>{e&&(N(!1),P(),T(!1),H({dName:"",dTitle:"",sid:"",gr_initials:""}),D(""))})).catch({});else F(!1)},disabled:y,children:[S?(0,j.jsx)("p",{children:Z("update")}):(0,j.jsx)("p",{children:Z("create")}),y&&(0,j.jsx)("div",{children:(0,j.jsx)(g.Z,{})})]})]})}),M&&(0,j.jsx)(p.default,{assignHead:M,headSelect:e=>{D(e),H({...I,sid:e._id}),F(!0)},title:Z("assign-d-head"),onClose:()=>L((e=>!e))})]})}},46876:(e,i,t)=>{t.r(i),t.d(i,{default:()=>_});var s=t(72791),a=t(23441),l=t(95048),n=t(12923),d=t(763),o=t(69721),r=t(52124),c=t(5574),h=t(39230),v=t(80184);const u=window.innerHeight,_=e=>{let{onClose:i,title:t,headSelect:_,assignHead:g,disabledId:f,instituteId:m,viewAs:p,isMultiSelect:x,selectList:j,onMultiSelect:N,onDone:S}=e;const{t:C}=(0,h.$G)(),[k,b]=(0,s.useState)(1),[w,M]=(0,s.useState)(!0),[L,A]=(0,a.YD)(),[D,y]=(0,s.useState)(""),[T,R]=s.useState([]),F=(0,l.v9)((e=>e.idChange)),{assignSearchStaff:Z,assignSearchStaffRefetch:I}=(0,n.vI)({skip:"ADMISSION_ADMIN"===p?!m:!(null!==F&&void 0!==F&&F.id),search:{search:D,page:k,id:"ADMISSION_ADMIN"===p?m:null===F||void 0===F?void 0:F.id,limit:10}});s.useEffect((()=>{null!==F&&void 0!==F&&F.id&&I()}),[null===F||void 0===F?void 0:F.id,I,k]),(0,s.useEffect)((()=>{A&&w&&b((e=>e+1))}),[A,w]),s.useEffect((()=>{null!==Z&&void 0!==Z&&Z.staff&&R(D?null===Z||void 0===Z?void 0:Z.staff:e=>(e=>{for(let s=0;s<(null===e||void 0===e?void 0:e.length);s++)for(let a=s+1;a<(null===e||void 0===e?void 0:e.length);a++){var i,t;(null===(i=e[s])||void 0===i?void 0:i._id)===(null===(t=e[a])||void 0===t?void 0:t._id)&&(null===e||void 0===e||e.splice(a,1))}return e})([...e,...null===Z||void 0===Z?void 0:Z.staff])),10===(null===Z||void 0===Z?void 0:Z.staff.length)?M(!0):M(!1)}),[null===Z||void 0===Z?void 0:Z.staff]),(0,s.useEffect)((()=>{D&&H()}),[D]);const H=()=>{I()},P=(0,s.useCallback)((0,d.debounce)((e=>y(e)),500),[]),O=e=>{f===(null===e||void 0===e?void 0:e._id)||(x?N(e):(_(e),"ADMISSION_ADMIN"===p||i()))};return(0,v.jsx)(c.Z,{open:g,onClose:i,children:(0,v.jsxs)("div",{style:{backgroundColor:"#FAFAFA",width:"35rem",height:"".concat(u-20,"px"),overflowX:"hidden"},children:[(0,v.jsxs)("div",{className:r.Z.assign_title,style:{width:"100%"},children:[(0,v.jsx)("h5",{children:t}),x?(0,v.jsxs)("div",{className:r.Z.is_mulitselect_container,children:[(0,v.jsx)("h6",{style:{cursor:"pointer"},onClick:S,children:C("select")}),(0,v.jsx)("img",{src:"/images/close-post-icon.svg",onClick:i,alt:"staff assign pop close icon"})]}):(0,v.jsx)("img",{src:"/images/close-post-icon.svg",onClick:i,alt:"staff assign pop close icon"})]}),(0,v.jsxs)("div",{className:r.Z.assign_search_container,children:[(0,v.jsx)("input",{type:"text",placeholder:C("search"),className:r.Z.assign_search_input,onChange:e=>{return i=e.target.value,void P(i);var i}}),(0,v.jsx)("img",{src:"/images/search-dash-icon.svg",alt:"search icon"})]}),(0,v.jsx)("div",{className:r.Z.assign_show_list,children:null===T||void 0===T?void 0:T.map(((e,i)=>(null===T||void 0===T?void 0:T.length)===i+1?(0,v.jsxs)("div",{ref:L,children:[(0,v.jsxs)("div",{className:r.Z.assign_show_list_each,style:f===e._id?{backgroundColor:"rgba(75, 26, 133, 0.1)"}:{backgroundColor:"inherit"},onClick:()=>O(e),children:[x?null!==j&&void 0!==j&&j.includes(null===e||void 0===e?void 0:e._id)?(0,v.jsx)("img",{src:"/images/checkbox-icon.svg",alt:"icon",style:{height:"1.3rem",borderRadius:"0",cursor:"pointer"}}):(0,v.jsx)("img",{style:{height:"1.3rem",borderRadius:"0",cursor:"pointer"},src:"/images/box-icon.svg",alt:"icon"}):"",(0,v.jsx)("img",{src:null!==e&&void 0!==e&&e.staffProfilePhoto?"".concat(o.yI,"/").concat(e.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),(0,v.jsxs)("div",{className:r.Z.assign_each_paragraph,children:[(0,v.jsx)("h6",{children:"".concat(e.staffFirstName," ").concat(null!==e&&void 0!==e&&e.staffMiddleName?null===e||void 0===e?void 0:e.staffMiddleName:""," ").concat(e.staffLastName)}),(0,v.jsxs)("p",{children:[" ",C("index")," ",null===e||void 0===e?void 0:e.staffROLLNO]})]})]}),(0,v.jsx)("hr",{})]},e._id):(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:r.Z.assign_show_list_each,style:f===e._id?{backgroundColor:"rgba(75, 26, 133, 0.1)"}:{backgroundColor:"inherit"},onClick:()=>O(e),children:[x?null!==j&&void 0!==j&&j.includes(null===e||void 0===e?void 0:e._id)?(0,v.jsx)("img",{style:{height:"1.3rem",borderRadius:"0",cursor:"pointer"},src:"/images/checkbox-icon.svg",alt:"icon"}):(0,v.jsx)("img",{style:{height:"1.3rem",borderRadius:"0",cursor:"pointer"},src:"/images/box-icon.svg",alt:"icon"}):"",(0,v.jsx)("img",{src:null!==e&&void 0!==e&&e.staffProfilePhoto?"".concat(o.yI,"/").concat(e.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),(0,v.jsxs)("div",{className:r.Z.assign_each_paragraph,children:[(0,v.jsx)("h6",{children:"".concat(e.staffFirstName," ").concat(null!==e&&void 0!==e&&e.staffMiddleName?null===e||void 0===e?void 0:e.staffMiddleName:""," ").concat(e.staffLastName)}),(0,v.jsxs)("p",{children:[" ",C("index")," ",null===e||void 0===e?void 0:e.staffROLLNO]})]})]}),(0,v.jsx)("hr",{})]},e._id)))})]})})}},49384:(e,i,t)=>{t.d(i,{Z:()=>l});t(72791);var s=t(6307),a=t(80184);const l=()=>(0,a.jsx)(s.iT,{ariaLabel:"loading-indicator",height:20,width:20,color:"white",secondaryColor:"#1c023b"})},12923:(e,i,t)=>{t.d(i,{Ec:()=>x,Em:()=>S,JM:()=>u,NS:()=>l,Pg:()=>_,Q_:()=>p,RH:()=>v,Tv:()=>o,U_:()=>m,VN:()=>n,Wj:()=>c,ZS:()=>h,_8:()=>j,d5:()=>r,tB:()=>f,vI:()=>N,yx:()=>d,zO:()=>g});var s=t(91007),a=t(58208);const l=e=>{const{data:i,refetch:t}=(0,a.YD)(e.search,{skip:e.skip});return{instituteAllSearch:i,instituteAllSearchRefetch:t}},n=()=>{const[e]=(0,a.ak)();return[e]},d=()=>{const[e]=(0,a.WL)();return[e]},o=e=>{const{data:i,refetch:t}=(0,a.pH)(e.list,{skip:e.skip});return{instituteFollowList:i,instituteFollowListRefetch:t}},r=e=>{const{data:i,refetch:t}=(0,a.MG)(e.data,{skip:e.skip});return{instituteOwnFollowingList:i,instituteOwnFollowingListRefetch:t}},c=()=>{const[e]=(0,a.Ky)();return[e]},h=e=>{const{data:i,refetch:t}=(0,a.p8)(e.list);return{userFollowList:i,userFollowListRefetch:t}},v=e=>{const{data:i,refetch:t}=(0,a.Wv)(e);return{userFollowingList:i,userFollowingListRefetch:t}},u=e=>{const{data:i,refetch:t}=(0,a.sz)(e.search,{skip:e.skip});return{userAllSearch:i,userAllSearchRefetch:t}},_=()=>{const[e]=(0,a.Mk)();return[e]},g=()=>{const[e]=(0,a.$i)();return[e]},f=()=>{const[e]=(0,a.Do)();return[e]},m=()=>{const[e]=(0,a.He)();return[e]},p=()=>{const[e]=(0,a.vg)();return[e]},x=()=>{const[e]=(0,a.OO)();return[e]},j=e=>{const{data:i,refetch:t}=(0,a.N2)(e);return{userCircleList:i,userCircleListRefetch:t}},N=e=>{const{data:i,refetch:t}=(0,s.x6)(e.search,{skip:e.skip});return{assignSearchStaff:i,assignSearchStaffRefetch:t}},S=e=>{const{data:i,refetch:t}=(0,a.SJ)(e);return{universalUser:i,universalUserRefetch:t}}},7135:()=>{},52124:(e,i,t)=>{t.d(i,{Z:()=>s});const s={assign_title:"AssignStaffModal_assign_title__4DGBV",assign_search_container:"AssignStaffModal_assign_search_container__3x6RD",assign_search_input:"AssignStaffModal_assign_search_input__rO3c7",assign_show_list:"AssignStaffModal_assign_show_list__yHhf7",assign_show_list_each:"AssignStaffModal_assign_show_list_each__ACUEw",assign_each_paragraph:"AssignStaffModal_assign_each_paragraph__pMHTq",universal_modal:"AssignStaffModal_universal_modal__czmpB",is_mulitselect_container:"AssignStaffModal_is_mulitselect_container__0cPQ2"}}}]);
//# sourceMappingURL=20312.9aa97182.chunk.js.map