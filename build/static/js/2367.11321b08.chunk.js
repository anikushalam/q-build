"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[2367,4258],{20471:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var l=n(29439),i=n(72791),s=n(56959),a=n(23441),c=n(91427),o=n(57588),r=n(63687),d=n(21348),u=n(90904),v=n(55336),f=n(1669),h=n(2651),m=n(36132),x=n(39230),j=n(98684),Z=n(97892),_=n.n(Z),p=n(82824),g=n(1095),N=n(45445),b=n(55050),k=n(93638),y=n(80184),q=function(e){var t,n,s,a,c,o,r,d,u=e.leave,f=e.onRefetch,h=(0,x.$G)().t,Z=(0,m.Sr)(),q=(0,l.Z)(Z,1)[0],R=(0,i.useState)(!1),w=(0,l.Z)(R,2),C=w[0],A=w[1],D=(0,i.useState)(!1),M=(0,l.Z)(D,2),Y=M[0],P=M[1],T=function(e){null!==u&&void 0!==u&&u._id&&(A((function(e){return!e})),q({lid:null===u||void 0===u?void 0:u._id,requestLeave:{status:e}}).then((function(){f(),A((function(e){return!e}))})).catch({}))},W=function(){P((function(e){return!e}))};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:b.Z.lmsr_card,children:[(0,y.jsxs)("div",{className:b.Z.lmsrc_card,children:[(0,y.jsxs)("div",{className:b.Z.lmsrc_card_inner,children:[(0,y.jsx)("img",{src:null!==u&&void 0!==u&&null!==(t=u.staff)&&void 0!==t&&t.staffProfilePhoto?"".concat(g.yI,"/").concat(null===u||void 0===u||null===(n=u.staff)||void 0===n?void 0:n.staffProfilePhoto):"".concat(j.p3,"/feed-user-avatar.svg"),alt:"staff icon"}),(0,y.jsxs)("div",{className:b.Z.lmsrci_text,children:[(0,y.jsx)("h6",{children:"".concat(null!==(s=null===u||void 0===u||null===(a=u.staff)||void 0===a?void 0:a.staffFirstName)&&void 0!==s?s:""," ").concat(null!==u&&void 0!==u&&null!==(c=u.staff)&&void 0!==c&&c.staffMiddleName?null===u||void 0===u||null===(o=u.staff)||void 0===o?void 0:o.staffMiddleName:""," ").concat(null!==(r=null===u||void 0===u||null===(d=u.staff)||void 0===d?void 0:d.staffLastName)&&void 0!==r?r:"")}),(0,y.jsxs)("p",{children:[h("raised_on"),(0,p.J)(null===u||void 0===u?void 0:u.createdAt,"LT"),", ",_()(null===u||void 0===u?void 0:u.createdAt).format("DD MMM YYYY"),", ",(0,y.jsx)("span",{className:b.Z.lmsrc_date,onClick:W,children:h("for_dates")})]})]})]}),(0,y.jsxs)("div",{className:b.Z.lmsrc_btn,children:[(0,y.jsx)(k.Z,{label:h("reject"),onAction:function(){return T("Rejected")},customStyle:L}),(0,y.jsx)(k.Z,{label:h("approve"),onAction:function(){return T("Accepted")},customStyle:S})]})]}),(0,y.jsx)("div",{className:b.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,y.jsxs)("h6",{style:{fontWeight:"400"},children:[h("leave_type")," "," : ",null===u||void 0===u?void 0:u.leave_type]})}),(0,y.jsx)("div",{className:b.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,y.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[h("reason")," "," : ",null===u||void 0===u?void 0:u.reason]})}),(null===u||void 0===u?void 0:u.attach)&&(0,y.jsx)("div",{className:b.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,y.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[h("attachment")," "," : ",(0,y.jsx)("a",{href:"".concat(g.q2,"/").concat(null===u||void 0===u?void 0:u.attach),target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,y.jsx)("span",{className:b.Z.lmsrc_date,children:h("view_attachment")})})]})})]}),Y&&(0,y.jsx)(N.Z,{onClose:W,allDate:null===u||void 0===u?void 0:u.date}),C&&(0,y.jsx)(v.Z,{})]})},L={"--bg-button":"#e7e7e7","--color-button":"#6f727c","--color-white":"#ffffff",margin:"0",padding:"0.2rem 0.8rem"},S={margin:"0",padding:"0.2rem 0.8rem"},R=function(e){var t,n,Z,_=e.instituteId,p=(0,x.$G)().t,g=(0,i.useState)(""),N=(0,l.Z)(g,2),b=N[0],k=N[1],L=(0,i.useState)(1),S=(0,l.Z)(L,2),R=S[0],w=S[1],C=(0,i.useState)(!0),A=(0,l.Z)(C,2),D=A[0],M=A[1],Y=(0,a.YD)({skip:b}),P=(0,l.Z)(Y,2),T=P[0],W=P[1],B=(0,m.B)({data:{id:_,page:R,limit:10,search:b,flow:"Request"},skip:!_}),E=B.lmsLeaveRequestList,F=B.lmsLeaveRequestListLoading,G=B.lmsLeaveRequestListRefetch;(0,i.useEffect)((function(){W&&D&&w((function(e){return e+1}))}),[W,D]),(0,i.useEffect)((function(){var e;if(null!==E&&void 0!==E&&null!==(e=E.list)&&void 0!==e&&e.length){var t,n=(0,c.f)(null===E||void 0===E||null===(t=E.list)||void 0===t?void 0:t.length);M((function(){return n}))}}),[null===E||void 0===E?void 0:E.list]);var I=(0,i.useCallback)((0,o.J)((function(e){w((function(){return 1})),k(e)}),1500),[]),J=(0,i.useCallback)((function(){w((function(){return 1})),k(""),G()}),[G]);return(0,y.jsxs)(r.Z,{children:[(0,y.jsx)(d.Z,{children:(0,y.jsxs)("div",{className:s.Z.fm_header_container,children:[(0,y.jsx)("h6",{children:p("leave_request")}),(0,y.jsx)("div",{className:s.Z.fm_search,children:(0,y.jsx)("section",{className:s.Z.fm_search_container,children:(0,y.jsxs)("div",{className:s.Z.fm_search_container_inner,children:[(0,y.jsx)("img",{className:s.Z.fm_search_icon,alt:"search icon",src:"".concat(j.dB,"/navbar-search.svg")}),(0,y.jsx)("input",{type:"text",placeholder:p("search"),onChange:function(e){e.target.value?I(e.target.value):(w((function(){return 1})),k(""))}})]})})})]})}),(0,y.jsx)(u.Z,{}),(0,y.jsxs)(d.Z,{children:[null===E||void 0===E||null===(t=E.list)||void 0===t?void 0:t.map((function(e,t){var n;return(null===E||void 0===E||null===(n=E.list)||void 0===n?void 0:n.length)===t+1?(0,y.jsx)("div",{ref:T,children:(0,y.jsx)(q,{leave:e,onRefetch:J})},null===e||void 0===e?void 0:e._id):(0,y.jsx)(q,{leave:e,onRefetch:J},null===e||void 0===e?void 0:e._id)})),F?b?(0,y.jsx)(v.Z,{}):(0,y.jsx)(f.Z,{}):b?0===(null===E||void 0===E||null===(n=E.list)||void 0===n?void 0:n.length)&&(0,y.jsx)(h.Z,{title:"No staff leave request found related this search."}):0===(null===E||void 0===E||null===(Z=E.list)||void 0===Z?void 0:Z.length)&&(0,y.jsx)(h.Z,{title:"No staff leave request."})]})]})}}}]);
//# sourceMappingURL=2367.11321b08.chunk.js.map