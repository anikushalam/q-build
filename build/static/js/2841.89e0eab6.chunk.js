"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[2841],{82512:(e,o,i)=>{i.r(o),i.d(o,{default:()=>W});var l=i(72791);const s={navbar:"UserProfile_navbar__FsWP+"};var d=i(87984),t=i(49010);const a="UserMain_mainbody__lZCbM",n="UserMain_mainbodyedit__lvkgt",r="UserMain_mainbodysplit__iu4+j";var u=i(95048),c=i(91007),v=i(98990),h=i(77356),p=i(62271);const f="MiddleBody_middleBodyGap__MdJHS";var _=i(34057),m=i(85702),x=i(91419),j=i(9447),P=i(23441),g=i(70092),C=i(16256),y=i(80184);const S=function(e){var o,i,s,d,t,a;let{profilePost:n,profileData:r}=e;const c=(0,u.v9)((e=>e.idChange)),v=(0,u.v9)((e=>e.postChange)),h=(0,u.I0)(),p=localStorage.getItem("_searchId"),[f,_]=(0,l.useState)(!0),[S,N]=(0,P.YD)(),[k,b]=(0,l.useState)(!0),[M,E]=(0,l.useState)(1),{allProfilePost:Z,allProfilePostRefetch:I}=(0,j.N0)({data:{id:null!==c&&void 0!==c&&null!==(o=c.searchProfile)&&void 0!==o&&o.id?null===c||void 0===c||null===(i=c.searchProfile)||void 0===i?void 0:i.id:p,page:M,limit:10,viewAs:C.Xe},skip:!n});return(0,l.useEffect)((()=>{var e;null!==c&&void 0!==c&&null!==(e=c.searchProfile)&&void 0!==e&&e.id&&(h(g.p.removeSearchPost({search:[]})),E(1),b(!0))}),[h,null===c||void 0===c||null===(s=c.searchProfile)||void 0===s?void 0:s.id]),(0,l.useEffect)((()=>{N&&k&&n&&E((e=>e+1))}),[N,n,k]),(0,l.useEffect)((()=>{I()}),[M,n,I]),(0,l.useEffect)((()=>{var e,o;h(g.p.addPost({post:n&&(null===Z||void 0===Z||null===(e=Z.post)||void 0===e||null===(o=e[0])||void 0===o?void 0:o.author)===(null===c||void 0===c?void 0:c.searchProfile.id)?null===Z||void 0===Z?void 0:Z.post:[],profilePost:n?"search":"dash"})),10===(null===Z||void 0===Z?void 0:Z.post.length)?b(!0):b(!1)}),[null===Z||void 0===Z?void 0:Z.post,h,n,null===c||void 0===c||null===(d=c.searchProfile)||void 0===d?void 0:d.id]),(0,l.useEffect)((()=>{setTimeout((()=>{_(!1)}),5e3)}),[]),(0,y.jsx)("div",{className:m.Z.posts,children:null!==v&&void 0!==v&&null!==(t=v.searchPosts)&&void 0!==t&&t.length||!n||!f?null===v||void 0===v||null===(a=v.searchPosts)||void 0===a?void 0:a.map(((e,o)=>{var i;return(null===v||void 0===v||null===(i=v.searchPosts)||void 0===i?void 0:i.length)===o+1?(0,y.jsx)("div",{ref:S,children:(0,y.jsx)(x.Z,{post:e,profilePost:n,allPosts:[],profileData:r},o)},o):(0,y.jsx)(x.Z,{post:e,profilePost:n,allPosts:[],profileData:r},o)})):(0,y.jsx)("div",{className:m.Z.loader,children:(0,y.jsx)("img",{src:"/images/loader/loader.gif",alt:""})})})},N="MiddleBodyMain_container__gjMlC",k="MiddleBodyMain_header__6ZfiA",b="MiddleBodyMain_headerText__wAMzM",M="MiddleBodyMain_headerTextActive__Ob817",E="MiddleBodyMain_headerLink__RpWv0",Z="MiddleBodyMain_headerLinkActive__GwH1i";var I=i(39230);const U=e=>{let{state:o}=e;const[i,s]=(0,l.useState)("my"),{t:d}=(0,I.$G)(),t=(0,u.v9)((e=>e.idChange));return(0,y.jsxs)("div",{className:N,children:[(0,y.jsxs)("div",{className:k,children:[(0,y.jsx)("div",{className:"my"===i?M:b,onClick:()=>{s("my"),o(!1)},children:(0,y.jsx)("p",{className:"my"===i?"".concat(E," ").concat(Z):E,children:"Posts"})}),(0,y.jsx)("div",{className:"tag"===i?M:b,onClick:()=>{null!==t&&void 0!==t&&t.searchProfile.id||(s("tag"),o(!1))},children:(0,y.jsx)("p",{className:"tag"===i?"".concat(E," ").concat(Z):E,children:"Tag Posts"})}),null!==t&&void 0!==t&&t.searchProfile.id?"":(0,y.jsx)("div",{className:"save"===i?M:b,onClick:()=>{null!==t&&void 0!==t&&t.searchProfile.id||(s("save"),o(!1))},children:(0,y.jsx)("p",{className:"save"===i?"".concat(E," ").concat(Z):E,children:"Saved"})})]}),null!==t&&void 0!==t&&t.searchProfile.id?(0,y.jsx)(S,{profilePost:!0}):(0,y.jsx)(_.Z,{profilePost:!0,profileSavedPost:i})]})},B="MiddleBodyRight_middleBodyRight__0Z538",R="MiddleBodyRight_middleBodyRightTop__xLwoe",w="MiddleBodyRight_middleBodyRightbottom__NzAtP",D=e=>{let{questionCount:o,answerQuestionCount:i,upVote:l}=e;const{t:s}=(0,I.$G)();return(0,y.jsxs)("div",{className:B,children:[(0,y.jsxs)("div",{className:R,children:[" ",s("know_s")," (",s("knowledge_score"),")"]}),(0,y.jsxs)("div",{className:w,children:[(0,y.jsxs)("h6",{children:[s("total_questions_asked")," : ",o]}),(0,y.jsxs)("h6",{children:[s("questions_answered")," : ",i]}),(0,y.jsxs)("h6",{children:[s("total_upward")," : ",l]})]})]})},L=e=>{let{state:o,profileBody:i,upVote:l,status:s}=e;return(0,y.jsxs)("div",{className:f,children:[(0,y.jsx)(U,{state:e=>{o(e)},status:s}),(0,y.jsx)(D,{questionCount:null===i||void 0===i?void 0:i.questionCount,answerQuestionCount:null===i||void 0===i?void 0:i.answerQuestionCount,upVote:l})]})};var A=i(75070),q=i(30705),F=i(12072),T=i(84489),G=i(87049),O=i(98734);const z=e=>{let{onClose:o,userId:i,onSearchRefetch:s,loginUserId:d,blockedBy:t}=e;const{t:a}=(0,I.$G)(),[n,r]=(0,l.useState)(!1),[u]=(0,j.Wi)(),[c]=(0,j.z9)(),[v]=(0,j.Kj)();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(T.Z,{onClose:o}),(0,y.jsxs)(F.Z,{customStyle:{zIndex:"1200"},children:[(0,y.jsxs)("div",{className:G.Z.edit_modal_container,style:{width:"200px"},children:[null!==t&&void 0!==t&&t.includes(d)?(0,y.jsxs)("h6",{className:G.Z.edit,onClick:()=>{r(!0),c({blockId:i}).then((()=>{s(),r(!1),o()})).catch({})},children:[a("unblocked")," ",a("account")]}):(0,y.jsxs)("h6",{className:G.Z.edit,onClick:()=>{r(!0),u({blockId:i}).then((()=>{s(),r(!1),o()})).catch({})},children:[a("block")," ",a("account")]}),(0,y.jsx)("h6",{className:G.Z.remove,onClick:()=>{r(!0),v({rid:i,id:d,accountStatus:"Malicious"}).then((()=>{r(!1),o()})).catch({})},children:a("report_acount")})]}),n&&(0,y.jsx)(O.Z,{})]})]})},V=e=>{let{onClose:o,profileChange:i,onUploadType:l}=e;const{t:s}=(0,I.$G)();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(T.Z,{onClose:o}),(0,y.jsx)(F.Z,{customStyle:{zIndex:"1200"},children:(0,y.jsxs)("div",{className:G.Z.edit_modal_container,style:{width:"300px"},children:[(0,y.jsx)("label",{htmlFor:"photo",children:(0,y.jsx)("h6",{className:G.Z.edit,onClick:()=>l("ONLY_USER"),children:s("update_only_profile_photo")})}),(0,y.jsx)("label",{htmlFor:"photo",children:(0,y.jsx)("h6",{className:G.Z.edit,onClick:()=>l("USER_AND_STUDENT"),children:s("update_user_student_profile_photo")})}),(0,y.jsx)("input",{id:"photo",name:"file",onChange:i,type:"file",style:{display:"none"},accept:"image/gif, image/jpeg, image/png",required:!0})]})})]})};const Q=function(){var e,o,i,s,d,t,f,_,m,x,j,P,g,C,S,N,k,b;const M=(0,u.v9)((e=>e.idChange)),E=(0,u.I0)(),[Z,I]=(0,l.useState)(!1),[U,B]=(0,l.useState)(!1),{data:R,refetch:w}=(0,c.pu)(null!==M&&void 0!==M&&null!==(e=M.searchProfile)&&void 0!==e&&e.id?null===M||void 0===M||null===(o=M.searchProfile)||void 0===o?void 0:o.id:null===M||void 0===M?void 0:M.id,{skip:"USERNAME"===M.searchProfile.type}),{data:D,refetch:F}=(0,c.QS)(null===M||void 0===M||null===(i=M.searchProfile)||void 0===i?void 0:i.id,{skip:"ID"===M.searchProfile.type});(0,l.useEffect)((()=>{"USERNAME"===M.searchProfile.type?F():"ID"===M.searchProfile.type&&w()}),[M.searchProfile.type,null===M||void 0===M||null===(s=M.searchProfile)||void 0===s?void 0:s.id]),(0,l.useEffect)((()=>{var e;null!==D&&void 0!==D&&D.user&&"USERNAME"===M.searchProfile.type&&E(v.S.searchId({id:null===D||void 0===D||null===(e=D.user)||void 0===e?void 0:e._id,type:"ID"}))}),[null===D||void 0===D?void 0:D.user]);const T=""!==(null===M||void 0===M||null===(d=M.searchProfile)||void 0===d?void 0:d.id)?null===M||void 0===M||null===(t=M.searchProfile)||void 0===t?void 0:t.id:null===M||void 0===M?void 0:M.id,[G,O]=(0,l.useState)(!1),[Q,W]=(0,l.useState)(!1),[$,H]=(0,l.useState)(""),[J,X]=(0,l.useState)(""),[Y,K]=(0,l.useState)(""),[ee,oe]=(0,l.useState)(""),[ie,le]=(0,l.useState)(!1),[se,de]=(0,l.useState)(!1),[te,ae]=(0,l.useState)(""),[ne,re]=(0,l.useState)(!1),[ue,ce]=(0,l.useState)(""),[ve]=(0,q.w1)(),[he]=(0,q.Ru)();return(0,l.useEffect)((()=>{if(G){let e=new FormData;e.append("file",$),he({cover:e,id:null===M||void 0===M?void 0:M.id}).then((()=>{})).catch({})}}),[G,$]),(0,l.useEffect)((()=>{if(Q){let e=new FormData;e.append("file",J),ve({photo:e,id:null===M||void 0===M?void 0:M.id,role:ue}).then((()=>{})).catch({})}}),[Q,J]),(0,y.jsxs)(y.Fragment,{children:[R&&"post"===(null===M||void 0===M||null===(f=M.repostQuestion)||void 0===f?void 0:f.repostStatus)&&(Z?(0,y.jsx)("div",{className:n,children:(0,y.jsx)(A.Z,{setEdit:I})}):(0,y.jsxs)("div",{className:a,children:[(0,y.jsx)(h.Z,{resultId:T,insID:null===M||void 0===M?void 0:M.id,profileData:null===R||void 0===R?void 0:R.user,searchId:null===M||void 0===M||null===(_=M.searchProfile)||void 0===_?void 0:_.id,profile:M,status:"userProfile",setEdit:I,openCrop:ie,openCropCover:se,setOpenCrop:le,setOpenCropCover:de,coverChange:e=>{const o=URL.createObjectURL(e.target.files[0]);H(e.target.files[0]),K(o),ae(o),le(!0)},profileChange:()=>{re(!0)},photoURL:te,setPhotoURL:ae,coverPhoto:Y,profilePhoto:ee,setUpload:O,setUploadProfile:W,setFile:H,setFileProfile:X,setCoverPhoto:K,setProfilePhoto:oe,setOpenBlock:B,blockedBy:null!==(m=null===R||void 0===R||null===(x=R.user)||void 0===x?void 0:x.blockedBy)&&void 0!==m?m:[],loginUserId:null!==(j=null===M||void 0===M?void 0:M.id)&&void 0!==j?j:"",userId:null!==(P=null===M||void 0===M||null===(g=M.searchProfile)||void 0===g?void 0:g.id)&&void 0!==P?P:""}),(0,y.jsxs)("div",{className:r,children:[(0,y.jsx)(p.Z,{userData:null===R||void 0===R?void 0:R.user,status:"profile"}),(0,y.jsx)(L,{profileBody:R&&(null===R||void 0===R?void 0:R.user),upVote:(null===R||void 0===R?void 0:R.upVote)||0,status:"profile"}),U&&(0,y.jsx)(z,{userId:null!==(C=null===M||void 0===M||null===(S=M.searchProfile)||void 0===S?void 0:S.id)&&void 0!==C?C:"",onClose:()=>B((e=>!e)),onSearchRefetch:w,blockedBy:null!==(N=null===R||void 0===R||null===(k=R.user)||void 0===k?void 0:k.blockedBy)&&void 0!==N?N:[],loginUserId:null!==(b=null===M||void 0===M?void 0:M.id)&&void 0!==b?b:""})]})]})),ne&&(0,y.jsx)(V,{onClose:()=>re(!1),profileChange:e=>{var o;if(null!==(o=e.target.files)&&void 0!==o&&o.length){re(!1);const o=URL.createObjectURL(e.target.files[0]);X(e.target.files[0]),oe(o),ae(o),de(!0)}},onUploadType:e=>{ce((o=>e))}})]})};const W=function(){var e,o,i,l,a;const n=localStorage.getItem("user"),r=(0,u.v9)((e=>e.idChange.searchProfile)),{data:v}=(0,c.pu)(n);return(0,y.jsxs)("div",{className:s.Profile,children:[(0,y.jsx)("div",{className:s.navbar,children:(0,y.jsx)(d.default,{status:"profile",profileData:null===v||void 0===v?void 0:v.user,username:null===v||void 0===v||null===(e=v.user)||void 0===e?void 0:e.username,name:null===v||void 0===v||null===(o=v.user)||void 0===o?void 0:o.userLegalName,photoId:null===v||void 0===v||null===(i=v.user)||void 0===i?void 0:i.photoId,profilePhoto:null===v||void 0===v||null===(l=v.user)||void 0===l?void 0:l.profilePhoto})}),"institute"===(null===r||void 0===r?void 0:r.searchAs)?(0,y.jsx)(t.Z,{applicantUserName:null===v||void 0===v||null===(a=v.user)||void 0===a?void 0:a.username}):(0,y.jsx)(Q,{profileData:null===v||void 0===v?void 0:v.user})]})}},87049:(e,o,i)=>{i.d(o,{Z:()=>l});const l={edit_modal_container:"EditConfirm_edit_modal_container__WfbTq",modal_header:"EditConfirm_modal_header__4sq5J",edit:"EditConfirm_edit__ziVGP",remove:"EditConfirm_remove__PCXLs",xlsx_update_btn:"EditConfirm_xlsx_update_btn__H3yM8",save_stop_btn:"EditConfirm_save_stop_btn__9NiZ5",update_to_btn:"EditConfirm_update_to_btn__ExCJv"}}}]);
//# sourceMappingURL=2841.89e0eab6.chunk.js.map