"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[98644],{16917:(e,n,t)=>{t.d(n,{Z:()=>c});var l=t(72791),a=t(52245),o=t(39230),i=t(1095),d=t(80184);const c=e=>{let{label:n,value:t,shownLabel:c,customFormInputContainer:s,customFormInputLabel:r,customFormInput:u}=e;const{t:m}=(0,o.$G)(),_=(0,l.useCallback)((()=>{if(t){const e=window.open("".concat(i.yI,"/").concat(null===t||void 0===t?void 0:t.key),"_blank","noopener,noreferrer");e&&(e.opener=null)}}),[t]);return(0,d.jsxs)("div",{className:a.Z.form_read_input_container,style:s,children:[n&&(0,d.jsx)("label",{className:a.Z.form_read_input_label,style:r,children:n}),(0,d.jsx)("h6",{className:a.Z.form_read_input_file,style:u,onClick:_,children:m(null!==c&&void 0!==c?c:"view")})]})}},75024:(e,n,t)=>{t.r(n),t.d(n,{default:()=>F});var l=t(39230),a=t(56959),o=t(72791),i=t(23441),d=t(91427),c=t(63687),s=t(21348),r=t(90904),u=t(1669),m=t(98684),_=t(55336),v=t(2651),h=t(93638),p=t(43317),x=t(16483),j=t(16917),f=t(89064),g=t(61055),Z=t(16925),k=t(38857),b=t(38986),y=t(11468),C=t(21625),N=t(99183),S=t(80184);const w=e=>{let{onClose:n,aid:t,onRefetch:a,isEdit:i,documentMenu:d,onEdit:c}=e;const{t:u}=(0,l.$G)(),[v,x]=(0,o.useState)({document_name:"",document_key:"",applicable_to:""}),[j,f]=(0,o.useState)(""),[w,M]=(0,o.useState)(!1),[E,F]=(0,o.useState)(""),[R]=(0,C.FL)(),[A]=(0,p.od)();(0,o.useEffect)((()=>{var e,n,t;i&&(x({document_name:null!==(e=null===d||void 0===d?void 0:d.document_name)&&void 0!==e?e:"",document_key:null!==(n=null===d||void 0===d?void 0:d.document_key)&&void 0!==n?n:"",applicable_to:null!==(t=null===d||void 0===d?void 0:d.applicable_to)&&void 0!==t?t:""}),F({originalName:"document preview"}))}),[i,d]);const L=e=>{x((n=>({...n,[e.target.name]:e.target.value})))};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(k.Z,{onClose:n,children:(0,S.jsxs)("div",{className:Z.Z.modal_container,children:[(0,S.jsx)(s.Z,{children:(0,S.jsxs)("div",{className:Z.Z.modal_container_outer_header,children:[(0,S.jsx)("div",{className:Z.Z.modal_container_header,children:(0,S.jsxs)("h6",{children:[" ",u(i?"update_document":"add_new_document")]})}),(0,S.jsx)("img",{src:"".concat(m.J7,"/close.svg"),alt:"close icon",onClick:n})]})}),(0,S.jsx)(r.Z,{}),(0,S.jsxs)(s.Z,{customStyle:{paddingTop:"0"},children:[(0,S.jsx)(g.Z,{label:u("document_name"),placeholder:u("document_nape_placeholder"),name:"document_name",value:v.document_name,type:"text",onChange:L,errorShow:j.document_name}),(0,S.jsx)(y.Z,{label:u("document_applicable_to"),placeholder:u("document_applicable_to_placeholder"),name:"applicable_to",value:v.applicable_to,type:"text",onChange:L}),(0,S.jsx)(b.Z,{label:u("sample_documnt"),name:"document",value:E,onChange:e=>{if(e.target.files[0]){M((e=>!e));const n=new FormData;n.append("file",e.target.files[0]),R({fileUpload:n}).then((n=>{var t,l,a;F({name:null===(t=e.target.files[0])||void 0===t?void 0:t.name,key:null===(l=n.data)||void 0===l?void 0:l.imageKey,type:null===(a=e.target.files[0])||void 0===a?void 0:a.type}),x((e=>{var t;return{...e,document_key:null===(t=n.data)||void 0===t?void 0:t.imageKey}})),M((e=>!e))})).catch({})}}}),(0,S.jsx)(h.Z,{label:i?"update":"create",onAction:()=>{let e=(0,N.l)(v,["document_key","applicable_to"]);(0,N.x)(e)?i?c(v):(M((e=>!e)),A({aid:t,document:v}).then((()=>{a(),M((e=>!e)),n()})).catch({})):f(e)}})]})]})}),w&&(0,S.jsx)(_.Z,{})]})},M=e=>{let{aid:n,onClose:t,documentMenu:a,onRefetch:i}=e;const{t:d}=(0,l.$G)(),[c,s]=(0,o.useState)(!1),[r,u]=(0,o.useState)(!1),[m]=(0,p.yT)(),[_]=(0,p.Kw)(),v=()=>{u((e=>!e))};return r?(0,S.jsx)(w,{isEdit:!0,onClose:v,onEdit:e=>{n&&null!==a&&void 0!==a&&a._id&&(v(),s((e=>!e)),_({aid:n,editDocument:{doc:null===a||void 0===a?void 0:a._id,...e}}).then((()=>{i(),s((e=>!e)),t()})).catch({}))},documentMenu:a}):(0,S.jsxs)(f.Z,{onClose:t,disabled:c,children:[(0,S.jsx)("h6",{onClick:v,children:d("edit")}),(0,S.jsx)("h6",{onClick:()=>{n&&null!==a&&void 0!==a&&a._id&&(s((e=>!e)),m({aid:n,did:null===a||void 0===a?void 0:a._id}).then((()=>{i(),s((e=>!e)),t()})).catch({}))},children:d("delete")})]})},E=e=>{var n;let{document:t,onRefetch:a,aid:i}=e;const{t:d}=(0,l.$G)(),[c,s]=(0,o.useState)("");return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:x.Z.document_card,style:{position:"relative"},children:[(0,S.jsx)("img",{src:"".concat(m.U_,"/required-document.svg"),alt:"document icon"}),(0,S.jsxs)("div",{className:x.Z.document_card_text,children:[(0,S.jsxs)("p",{children:[null!==(n=null===t||void 0===t?void 0:t.document_name)&&void 0!==n?n:"",null!==t&&void 0!==t&&t.applicable_to?(0,S.jsx)("span",{style:{fontSize:"11px"},children:" (".concat(d("applicable_to"),"- ").concat(null===t||void 0===t?void 0:t.applicable_to,")")}):""]}),(0,S.jsx)(j.Z,{value:null!==t&&void 0!==t&&t.document_key?{key:null===t||void 0===t?void 0:t.document_key}:"",shownLabel:"view_attachment",customFormInputContainer:{marginBlock:"0.3rem"}})]}),(0,S.jsx)("img",{src:"".concat(m.J7,"/menu.svg"),alt:"menu icon",onClick:()=>{s(t)},className:x.Z.menu_icon,title:"Menu"})]}),c&&(0,S.jsx)(M,{onClose:()=>{s("")},onRefetch:a,aid:i,documentMenu:c})]})},F=e=>{var n,t,x;let{aid:j}=e;const{t:f}=(0,l.$G)(),[g,Z]=(0,o.useState)(!1),[k,b]=(0,o.useState)(""),[y,C]=(0,o.useState)(""),[N,M]=(0,o.useState)(1),[F,R]=(0,o.useState)(!0),[A,L]=(0,i.YD)({skip:k}),{admissionDocumentList:D,admissionDocumentListLoading:I,admissionDocumentListRefetch:G}=(0,p.cR)({data:{aid:j,page:N,limit:10,search:k},skip:!j});(0,o.useEffect)((()=>{L&&F&&M((e=>e+1))}),[L,F]),(0,o.useEffect)((()=>{var e;if(null!==D&&void 0!==D&&null!==(e=D.list)&&void 0!==e&&e.length){var n;let e=(0,d.f)(null===D||void 0===D||null===(n=D.list)||void 0===n?void 0:n.length);R((()=>e))}}),[null===D||void 0===D?void 0:D.list]);const $=()=>{Z((e=>!e))},q=(0,o.useCallback)((()=>{M((e=>1)),G()}),[G]);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(c.Z,{children:[(0,S.jsx)(s.Z,{children:(0,S.jsxs)("div",{className:a.Z.fm_header_container,children:[(0,S.jsx)("h6",{children:f("required_documents")}),(0,S.jsxs)("div",{className:a.Z.fm_search,children:[(0,S.jsx)("section",{className:a.Z.fm_search_container,children:(0,S.jsxs)("div",{className:a.Z.fm_search_container_inner,children:[(0,S.jsx)("img",{className:a.Z.fm_search_icon,alt:"search icon",src:"".concat(m.dB,"/navbar-search.svg")}),(0,S.jsx)("input",{type:"text",placeholder:f("search"),onChange:e=>{var n;!I&&(null===D||void 0===D||null===(n=D.list)||void 0===n?void 0:n.length)>=0&&C(e.target.value)},style:{minWidth:"320px"},onKeyUp:e=>{"Enter"===e.key&&(M((()=>1)),b(y))},value:y})]})}),(0,S.jsx)(h.Z,{label:"add_new_documents",customStyle:{paddingBlock:"0.4rem",margin:"0"},onAction:$})]})]})}),(0,S.jsx)(r.Z,{}),(0,S.jsxs)(s.Z,{children:[null===D||void 0===D||null===(n=D.list)||void 0===n?void 0:n.map(((e,n)=>{var t;return(null===D||void 0===D||null===(t=D.list)||void 0===t?void 0:t.length)===n+1?(0,S.jsx)("div",{ref:A,children:(0,S.jsx)(E,{document:e,aid:j,onRefetch:q})},null===e||void 0===e?void 0:e._id):(0,S.jsx)(E,{document:e,aid:j,onRefetch:q},null===e||void 0===e?void 0:e._id)})),I?k?(0,S.jsx)(_.Z,{}):(0,S.jsx)(S.Fragment,{children:1===N?(0,S.jsx)(_.Z,{}):(0,S.jsx)(u.Z,{})}):k?0===(null===D||void 0===D||null===(t=D.list)||void 0===t?void 0:t.length)&&(0,S.jsx)(v.Z,{title:"No document found related this search."}):0===(null===D||void 0===D||null===(x=D.list)||void 0===x?void 0:x.length)&&(0,S.jsx)(v.Z,{title:"No document."})]})]}),g&&(0,S.jsx)(w,{aid:j,onClose:$,onRefetch:q})]})}},16483:(e,n,t)=>{t.d(n,{Z:()=>l});const l={document_card:"AdmissionManager_document_card__OWvp9",document_card_text:"AdmissionManager_document_card_text__aokEI",menu_icon:"AdmissionManager_menu_icon__n7SJY",apf_container:"AdmissionManager_apf_container__NmQ63",apf_container_inner:"AdmissionManager_apf_container_inner__tUadZ",apfci_text:"AdmissionManager_apfci_text__pDEev"}}}]);
//# sourceMappingURL=98644.aced636d.chunk.js.map