"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[8943,4258],{75238:function(e,l,n){n.r(l),n.d(l,{default:function(){return R}});var i=n(29439),t=n(72791),s=n(56959),a=n(23441),o=n(91427),c=n(57588),d=n(63687),r=n(21348),u=n(90904),f=n(55336),v=n(1669),h=n(2651),m=n(36132),x=n(39230),j=n(98684),_=n(97892),Z=n.n(_),g=n(82824),p=n(1095),N=n(55050),k=n(93638),y=n(45445),b=n(80184),C=function(e){var l,n,s,a,o,c,d,r,u=e.leave,v=e.onRefetch,h=(0,x.$G)().t,_=(0,m.vg)(),C=(0,i.Z)(_,1)[0],R=(0,t.useState)(!1),S=(0,i.Z)(R,2),w=S[0],L=S[1],D=(0,t.useState)(!1),M=(0,i.Z)(D,2),Y=M[0],A=M[1],P=function(){A((function(e){return!e}))};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:N.Z.lmsr_card,children:[(0,b.jsxs)("div",{className:N.Z.lmsrc_card,children:[(0,b.jsxs)("div",{className:N.Z.lmsrc_card_inner,children:[(0,b.jsx)("img",{src:null!==u&&void 0!==u&&null!==(l=u.staff)&&void 0!==l&&l.staffProfilePhoto?"".concat(p.yI,"/").concat(null===u||void 0===u||null===(n=u.staff)||void 0===n?void 0:n.staffProfilePhoto):"".concat(j.p3,"/feed-user-avatar.svg"),alt:"staff icon"}),(0,b.jsxs)("div",{className:N.Z.lmsrci_text,children:[(0,b.jsx)("h6",{children:"".concat(null!==(s=null===u||void 0===u||null===(a=u.staff)||void 0===a?void 0:a.staffFirstName)&&void 0!==s?s:""," ").concat(null!==u&&void 0!==u&&null!==(o=u.staff)&&void 0!==o&&o.staffMiddleName?null===u||void 0===u||null===(c=u.staff)||void 0===c?void 0:c.staffMiddleName:""," ").concat(null!==(d=null===u||void 0===u||null===(r=u.staff)||void 0===r?void 0:r.staffLastName)&&void 0!==d?d:"")}),(0,b.jsxs)("p",{children:[h("raised_on"),(0,g.J)(null===u||void 0===u?void 0:u.createdAt,"LT"),", ",Z()(null===u||void 0===u?void 0:u.createdAt).format("DD MMM YYYY"),", ",(0,b.jsx)("span",{className:N.Z.lmsrc_date,onClick:P,children:h("for_dates")})]})]})]}),(0,b.jsx)("div",{className:N.Z.lmsrc_btn,children:(0,b.jsx)(k.Z,{label:h("approve"),onAction:function(){return function(){var e,l;null!==u&&void 0!==u&&u._id&&null!==u&&void 0!==u&&null!==(e=u.staff)&&void 0!==e&&e._id&&(L((function(e){return!e})),C({lid:null===u||void 0===u?void 0:u._id,coffAction:{sid:null===u||void 0===u||null===(l=u.staff)||void 0===l?void 0:l._id}}).then((function(){v(),L((function(e){return!e}))})).catch({}))}()},customStyle:q})})]}),(0,b.jsx)("div",{className:N.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,b.jsxs)("h6",{style:{fontWeight:"400"},children:[h("leave_type")," "," : ",null===u||void 0===u?void 0:u.leave_type]})}),(0,b.jsx)("div",{className:N.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,b.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[h("reason")," "," : ",null===u||void 0===u?void 0:u.reason]})}),(null===u||void 0===u?void 0:u.attach)&&(0,b.jsx)("div",{className:N.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,b.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[h("attachment")," "," : ",(0,b.jsx)("a",{href:"".concat(p.q2,"/").concat(null===u||void 0===u?void 0:u.attach),target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,b.jsx)("span",{className:N.Z.lmsrc_date,children:h("view_attachment")})})]})})]}),Y&&(0,b.jsx)(y.Z,{onClose:P,allDate:null===u||void 0===u?void 0:u.date}),w&&(0,b.jsx)(f.Z,{})]})},q={margin:"0",padding:"0.2rem 0.8rem"},R=function(e){var l,n,_,Z=e.instituteId,g=(0,x.$G)().t,p=(0,t.useState)(""),N=(0,i.Z)(p,2),k=N[0],y=N[1],q=(0,t.useState)(1),R=(0,i.Z)(q,2),S=R[0],w=R[1],L=(0,t.useState)(!0),D=(0,i.Z)(L,2),M=D[0],Y=D[1],A=(0,a.YD)({skip:k}),P=(0,i.Z)(A,2),T=P[0],O=P[1],W=(0,m.og)({data:{id:Z,page:S,limit:10,search:k,flow:"Request"},skip:!Z}),E=W.lmsCOffRequestList,F=W.lmsCOffRequestListLoading,G=W.lmsCOffRequestListRefetch;(0,t.useEffect)((function(){O&&M&&w((function(e){return e+1}))}),[O,M]),(0,t.useEffect)((function(){var e;if(null!==E&&void 0!==E&&null!==(e=E.list)&&void 0!==e&&e.length){var l,n=(0,o.f)(null===E||void 0===E||null===(l=E.list)||void 0===l?void 0:l.length);Y((function(){return n}))}}),[null===E||void 0===E?void 0:E.list]);var I=(0,t.useCallback)((0,c.J)((function(e){w((function(){return 1})),y(e)}),1500),[]),J=(0,t.useCallback)((function(){w((function(){return 1})),y(""),G()}),[G]);return(0,b.jsxs)(d.Z,{children:[(0,b.jsx)(r.Z,{children:(0,b.jsxs)("div",{className:s.Z.fm_header_container,children:[(0,b.jsx)("h6",{children:g("manage_c_off")}),(0,b.jsx)("div",{className:s.Z.fm_search,children:(0,b.jsx)("section",{className:s.Z.fm_search_container,children:(0,b.jsxs)("div",{className:s.Z.fm_search_container_inner,children:[(0,b.jsx)("img",{className:s.Z.fm_search_icon,alt:"search icon",src:"".concat(j.dB,"/navbar-search.svg")}),(0,b.jsx)("input",{type:"text",placeholder:g("search"),onChange:function(e){e.target.value?I(e.target.value):(w((function(){return 1})),y(""))}})]})})})]})}),(0,b.jsx)(u.Z,{}),(0,b.jsxs)(r.Z,{children:[null===E||void 0===E||null===(l=E.list)||void 0===l?void 0:l.map((function(e,l){var n;return(null===E||void 0===E||null===(n=E.list)||void 0===n?void 0:n.length)===l+1?(0,b.jsx)("div",{ref:T,children:(0,b.jsx)(C,{leave:e,onRefetch:J})},null===e||void 0===e?void 0:e._id):(0,b.jsx)(C,{leave:e,onRefetch:J},null===e||void 0===e?void 0:e._id)})),F?k?(0,b.jsx)(f.Z,{}):(0,b.jsx)(v.Z,{}):k?0===(null===E||void 0===E||null===(n=E.list)||void 0===n?void 0:n.length)&&(0,b.jsx)(h.Z,{title:"No staff manage-c-off leave request found related this search."}):0===(null===E||void 0===E||null===(_=E.list)||void 0===_?void 0:_.length)&&(0,b.jsx)(h.Z,{title:"No staff manage-c-off leave request."})]})]})}}}]);
//# sourceMappingURL=8943.1d77eca3.chunk.js.map