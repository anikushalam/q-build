"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[7912],{47912:function(e,n,t){t.r(n),t.d(n,{default:function(){return X}});var i=t(72791),s=t(16871),a=t(42817),o=t(29439),l=t(10406),r=t(43504),d=t(39230),c=t(98734),u=t(21640),_=t(33662),v=t(34637),m=t(35351),h=t(6200),p=t(7893),f=t(64393),x=t(80184);var g=function(e){var n,t,i,a,o,l,r,c,u,_,g,j,Z,y,N=e.tid,b=e.transport,S=e.onRefetch,D=e.carryParentState,k=e.accessRole,I=e.accessTpye,T=e.callApi,w=(0,d.$G)().t,P=(0,s.TH)();return(0,x.jsx)("div",{className:v.Z.MiddleContent,style:"category"===(null===P||void 0===P||null===(n=P.search)||void 0===n?void 0:n.substring(9))||"structure"===(null===P||void 0===P||null===(t=P.search)||void 0===t?void 0:t.substring(9))?{marginTop:"0"}:{color:"inherit"},children:(0,x.jsxs)("div",{className:v.Z.MiddleContentLeft,children:[(0,x.jsx)("div",{className:v.Z.tabs,children:(0,x.jsx)(m.Z,{search:null===P||void 0===P?void 0:P.search,carryParentState:D})}),!(null!==P&&void 0!==P&&P.search)&&(0,x.jsxs)("div",{className:v.Z.item,children:[(0,x.jsx)(h.Z,{carryParentState:D,activeTab:"vehicle",accessRole:k,accessTpye:I,callApi:T,children:(0,x.jsxs)("div",{className:v.Z.itemIcon,children:[(0,x.jsx)("img",{src:"/images/member_tab/transport/transport-vehicle-icon.svg",alt:"moderator icon"}),(0,x.jsx)("p",{children:w("transport_vehicles")})]})}),(0,x.jsx)(h.Z,{carryParentState:D,activeTab:"personal",accessRole:k,accessTpye:I,callApi:T,children:(0,x.jsxs)("div",{className:v.Z.itemIcon,children:[(0,x.jsx)("img",{src:"/images/member_tab/transport/transport-personal-icon.svg",alt:"completed"}),(0,x.jsx)("p",{children:w("transportation_personal")})]})}),(0,x.jsx)(h.Z,{carryParentState:D,activeTab:"passenger",accessRole:k,accessTpye:I,callApi:T,children:(0,x.jsxs)("div",{className:v.Z.itemIcon,children:[(0,x.jsx)("img",{src:"/images/member_tab/transport/transport-passenger-icon.svg",alt:"inquery"}),(0,x.jsx)("p",{children:w("all_passengers_student")})]})}),(0,x.jsx)(h.Z,{carryParentState:D,activeTab:"pending",accessRole:k,accessTpye:I,callApi:T,children:(0,x.jsxs)("div",{className:v.Z.itemIcon,children:[(0,x.jsx)("img",{src:"/images/member_tab/finance/finance-pending-icon.svg",alt:"refund"}),(0,x.jsx)("p",{children:w("pending_fees")})]})}),(0,x.jsx)(h.Z,{activeTab:"deposit",carryParentState:D,accessRole:k,accessTpye:I,callApi:T,children:(0,x.jsxs)("div",{className:v.Z.itemIcon,children:[(0,x.jsx)("img",{src:"/images/member_tab/finance/finance-deposit-icon.svg",alt:"refund"}),(0,x.jsx)("p",{children:w("finance_deposit")})]})}),(0,x.jsx)(h.Z,{carryParentState:D,activeTab:"batch",accessRole:k,accessTpye:I,callApi:T,children:(0,x.jsxs)("div",{className:v.Z.itemIcon,children:[(0,x.jsx)("img",{src:"/images/member_tab/hostel/hostel-batch-icon.svg",alt:"completed"}),(0,x.jsx)("p",{children:w("hostel_tab_batch")})]})}),(0,x.jsx)(h.Z,{carryParentState:D,activeTab:"linked",accessRole:k,accessTpye:I,callApi:T,children:(0,x.jsxs)("div",{className:v.Z.itemIcon,children:[(0,x.jsx)("img",{src:"/images/member_tab/transport/transport-institute-link-icon.svg",alt:"completed"}),(0,x.jsx)("p",{children:w("linked_institute")})]})})]}),"fund"===(null===P||void 0===P||null===(i=P.search)||void 0===i?void 0:i.substring(3))&&(0,x.jsx)("div",{className:v.Z.classList,children:(0,x.jsx)(p.Z,{tid:N,transport:b,onRefetch:S})}),"fee"===(null===P||void 0===P||null===(a=P.search)||void 0===a?void 0:a.substring(3,6))&&(0,x.jsx)(f.Z,{financeId:null===b||void 0===b||null===(o=b.institute)||void 0===o||null===(l=o.financeDepart)||void 0===l||null===(r=l[0])||void 0===r?void 0:r._id,fees_category_count:null===b||void 0===b||null===(c=b.institute)||void 0===c||null===(u=c.financeDepart)||void 0===u||null===(_=u[0])||void 0===_?void 0:_.fees_category_count,fee_master_array_count:null===b||void 0===b||null===(g=b.institute)||void 0===g||null===(j=g.financeDepart)||void 0===j||null===(Z=j[0])||void 0===Z?void 0:Z.fee_master_array_count,fee_structure_count:null===b||void 0===b?void 0:b.fees_structures_count,carryParentState:D,accessRole:k,transportId:null===b||void 0===b?void 0:b._id,instituteId:null===b||void 0===b||null===(y=b.institute)||void 0===y?void 0:y._id,callApi:T})]})})},j=function(e){var n,t,a,l,r,v,m=e.transport,h=e.tid,p=e.carryParentState,f=e.onRefetch,j=(0,d.$G)().t,Z=(0,s.UO)(),y=(0,i.useState)(""),N=(0,o.Z)(y,2),b=N[0],S=N[1],D=(0,i.useState)(""),k=(0,o.Z)(D,2),I=k[0],T=k[1],w=(0,i.useState)(!1),P=(0,o.Z)(w,2),R=P[0],C=P[1],A=(0,i.useState)(!1),F=(0,o.Z)(A,2),M=F[0],B=F[1],L=(0,i.useState)(""),O=(0,o.Z)(L,2),G=O[0],E=O[1],U=(0,_.O4)(),q=(0,o.Z)(U,1)[0],H=(0,i.useState)(!1),J=(0,o.Z)(H,2),V=J[0],$=J[1];(0,i.useEffect)((function(){if(M){$((function(e){return!e}));var e=new FormData;e.append("file",I),q({uploadFile:e,tid:h}).then((function(){$((function(e){return!e}))})).catch({})}}),[M,I]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(u.Z,{coverKey:null===m||void 0===m?void 0:m.transport_photo,coverId:null!==m&&void 0!==m&&m.transport_photo?"0":"2",defaultCover:"/images/profileAndCover/transport-cover.svg",textLarge:j("transport_manager"),textSmall:"".concat(null!==(n=null===m||void 0===m||null===(t=m.transport_manager)||void 0===t?void 0:t.staffFirstName)&&void 0!==n?n:""," ").concat(null!==(a=null===m||void 0===m||null===(l=m.transport_manager)||void 0===l?void 0:l.staffMiddleName)&&void 0!==a?a:""," ").concat(null!==(r=null===m||void 0===m||null===(v=m.transport_manager)||void 0===v?void 0:v.staffLastName)&&void 0!==r?r:""),count1:null===m||void 0===m?void 0:m.vehicle_count,count1label:j("vechiles"),count2:null===m||void 0===m?void 0:m.transport_staff_count,count2label:j("transport_personal"),count3:null===m||void 0===m?void 0:m.passenger_count,count3label:j("passengers"),profilePhoto:G,profileChange:function(e){var n=URL.createObjectURL(e.target.files[0]);T(e.target.files[0]),E(n),S(n),C(!0)},openCrop:R,setOpenCrop:C,setPhotoURL:S,photoURL:b,setFile:T,setUpload:B,setProfilePhoto:E,coverUpdate:!0,isTransport:"TRANSPORT_MANAGER",redirectUrl:"/q/".concat(Z.username,"/member/transport?a=site"),carryParentState:p,coverImageStyle:{height:"auto"}}),(0,x.jsx)(g,{transport:m,onRefetch:f,tid:h,carryParentState:p}),V&&(0,x.jsx)(c.Z,{})]})},Z=t(41312),y=t(27451),N=t(99433),b=t(90575),S=t(59574),D=t(36600),k=t(69314),I=t(98094),T=t(47167),w=t(93433),P=t(23441),R=t(763),C=t(72426),A=t.n(C),F=t(11105),M=function(e){var n=e.refund_amount,t=e.refund_student_count,s=e.transportId,a=(0,d.$G)().t,l=(0,i.useState)(!0),r=(0,o.Z)(l,2),c=r[0],u=r[1],v=(0,i.useState)(""),m=(0,o.Z)(v,2),h=m[0],p=m[1],f=(0,i.useState)(1),g=(0,o.Z)(f,2),j=g[0],Z=g[1],y=(0,P.YD)(),N=(0,o.Z)(y,2),b=N[0],S=N[1],D=(0,i.useState)([]),I=(0,o.Z)(D,2),T=I[0],C=I[1],M=(0,i.useState)(!0),B=(0,o.Z)(M,2),L=B[0],O=B[1],G=(0,i.useState)(!1),E=(0,o.Z)(G,2),U=E[0],q=E[1],H=(0,_.CF)({data:{tid:s,page:j,limit:10,search:h},skip:!s}),J=H.getAllDepositRefundByTransport,V=H.getAllDepositRefundByTransportRefetch;(0,i.useEffect)((function(){S&&c&&Z((function(e){return e+1}))}),[S,c]),(0,i.useEffect)((function(){s&&V()}),[j,s,V]),(0,i.useEffect)((function(){var e,n;h?(C(null===J||void 0===J?void 0:J.all_receipts),O(!1)):U?(C(null===J||void 0===J?void 0:J.all_receipts),q(!1),O(!1)):null!==J&&void 0!==J&&J.all_receipts?(C((function(e){var n,t;return null===(n=(0,w.Z)(new Set(null===(t=[].concat((0,w.Z)(e),(0,w.Z)(null===J||void 0===J?void 0:J.all_receipts)))||void 0===t?void 0:t.map(JSON.stringify))))||void 0===n?void 0:n.map(JSON.parse)})),O(!1)):0===(null===J||void 0===J||null===(n=J.all_receipts)||void 0===n?void 0:n.length)&&O(!1);10===(null===J||void 0===J||null===(e=J.all_receipts)||void 0===e?void 0:e.length)?u(!0):u(!1)}),[null===J||void 0===J?void 0:J.all_receipts]);var $=(0,i.useCallback)((0,R.debounce)((function(e){return p(e)}),500),[]);return(0,x.jsxs)("div",{children:[(0,x.jsxs)("section",{className:k.Z.unused_container,children:[(0,x.jsx)("img",{src:"/images/rupee-symobl-icon.svg",alt:"rupee symobl"}),(0,x.jsxs)("div",{className:k.Z.unused_container_text,children:[(0,x.jsxs)("div",{className:k.Z.unused_container_text_inner,children:[(0,x.jsx)("h6",{children:a("total_refunded")}),(0,x.jsxs)("h6",{children:[a("rs")," ",null!==n&&void 0!==n?n:0]})]}),(0,x.jsx)("div",{className:k.Z.unused_container_text_inner,children:(0,x.jsxs)("p",{children:[a("deposit_of")," ",null!==t&&void 0!==t?t:0," ",a("deposit_student")]})})]})]}),(0,x.jsxs)("div",{className:k.Z.with_search,style:{marginBottom:"1rem"},children:[(0,x.jsx)("h6",{children:a("refunded_history")}),(0,x.jsx)("section",{className:k.Z.search_container,children:(0,x.jsxs)("div",{className:k.Z.search_container_input,children:[(0,x.jsx)("img",{className:k.Z.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),(0,x.jsx)("input",{type:"text",placeholder:"Search",onChange:function(e){$(e.target.value)}})]})})]}),(0,x.jsxs)("div",{className:k.Z.refund_list,children:[null===T||void 0===T?void 0:T.map((function(e,n){var t,i,s,o,l,r,d,c,u,_,v,m,h,p,f,g,j,Z,y,N;return(null===T||void 0===T?void 0:T.length)===n+1?(0,x.jsxs)("div",{className:k.Z.corpus_card,ref:b,children:[(0,x.jsxs)("h6",{style:{textAlign:"center"},children:[a("invoice_number"),null!==(t=null===e||void 0===e?void 0:e.invoice_count)&&void 0!==t?t:""]}),(0,x.jsx)("p",{className:k.Z.recieve_from,children:a("paid_to")}),(0,x.jsxs)("div",{className:k.Z.unused_container_text_inner,children:[(0,x.jsx)("h6",{children:"".concat(null!==(i=null===e||void 0===e||null===(s=e.student)||void 0===s?void 0:s.studentFirstName)&&void 0!==i?i:""," ").concat(null!==(o=null===e||void 0===e||null===(l=e.student)||void 0===l?void 0:l.studentMiddleName)&&void 0!==o?o:""," ").concat(null!==(r=null===e||void 0===e||null===(d=e.student)||void 0===d?void 0:d.studentLastName)&&void 0!==r?r:"")}),(0,x.jsxs)("h6",{children:[a("rs")," ",null!==(c=null===e||void 0===e?void 0:e.fee_payment_amount)&&void 0!==c?c:0]})]}),(0,x.jsxs)("div",{className:k.Z.unused_container_text_inner,children:[(0,x.jsxs)("p",{style:{color:"rgba(18, 18, 18, 0.8)"},children:[null===(u=A()(null===e||void 0===e?void 0:e.created_at))||void 0===u?void 0:u.format("DD MMM yyyy"),","," ",null===(_=A()(null===e||void 0===e?void 0:e.created_at))||void 0===_?void 0:_.format("LT")]}),(0,x.jsx)("p",{style:{color:"rgba(18, 18, 18, 0.8)"},children:"Online"===(null===e||void 0===e?void 0:e.fee_payment_mode)?"Bank":"Cash"})]})]},n):(0,x.jsxs)("div",{className:k.Z.corpus_card,children:[(0,x.jsxs)("h6",{style:{textAlign:"center"},children:[a("invoice_number"),null!==(v=null===e||void 0===e?void 0:e.invoice_count)&&void 0!==v?v:""]}),(0,x.jsx)("p",{className:k.Z.recieve_from,children:a("paid_to")}),(0,x.jsxs)("div",{className:k.Z.unused_container_text_inner,children:[(0,x.jsx)("h6",{children:"".concat(null!==(m=null===e||void 0===e||null===(h=e.student)||void 0===h?void 0:h.studentFirstName)&&void 0!==m?m:""," ").concat(null!==(p=null===e||void 0===e||null===(f=e.student)||void 0===f?void 0:f.studentMiddleName)&&void 0!==p?p:""," ").concat(null!==(g=null===e||void 0===e||null===(j=e.student)||void 0===j?void 0:j.studentLastName)&&void 0!==g?g:"")}),(0,x.jsxs)("h6",{children:[a("rs")," ",null!==(Z=null===e||void 0===e?void 0:e.fee_payment_amount)&&void 0!==Z?Z:0]})]}),(0,x.jsxs)("div",{className:k.Z.unused_container_text_inner,children:[(0,x.jsxs)("p",{style:{color:"rgba(18, 18, 18, 0.8)"},children:[null===(y=A()(null===e||void 0===e?void 0:e.created_at))||void 0===y?void 0:y.format("DD MMM yyyy"),","," ",null===(N=A()(null===e||void 0===e?void 0:e.created_at))||void 0===N?void 0:N.format("LT")]}),(0,x.jsx)("p",{style:{color:"rgba(18, 18, 18, 0.8)"},children:"Online"===(null===e||void 0===e?void 0:e.fee_payment_mode)?"Bank":"Cash"})]})]},n)})),L&&(0,x.jsx)(F.Z,{})]})]})},B=t(1413),L=t(69721),O=t(97655),G=t(87932),E=t(51561),U=t(36665),q=t(49886),H=function(e){var n,t=e.onClose,s=e.fmid,a=e.onRefecthParent,l=(0,d.$G)().t,r=(0,P.YD)(),u=(0,o.Z)(r,2),_=u[0],v=u[1],m=(0,i.useState)(1),h=(0,o.Z)(m,2),p=h[0],f=h[1],g=(0,i.useState)(!0),j=(0,o.Z)(g,2),Z=j[0],y=j[1],N=(0,i.useState)(!0),b=(0,o.Z)(N,2),S=b[0],D=b[1],T=(0,i.useState)([]),C=(0,o.Z)(T,2),A=C[0],M=C[1],H=(0,i.useState)(""),J=(0,o.Z)(H,2),V=J[0],$=J[1],Y=(0,i.useState)(""),W=(0,o.Z)(Y,2),z=W[0],X=W[1],K=(0,i.useState)({amount:"",mode:"",fee_payment_mode:"",fee_payment_amount:"",transaction_date:"",fee_bank_name:"",fee_bank_holder:"",fee_utr_reference:""}),Q=(0,o.Z)(K,2),ee=Q[0],ne=Q[1],te=(0,i.useState)(""),ie=(0,o.Z)(te,2),se=ie[0],ae=ie[1],oe=(0,i.useState)(!1),le=(0,o.Z)(oe,2),re=le[0],de=le[1],ce=(0,i.useState)({msg:"",run:!1}),ue=(0,o.Z)(ce,2),_e=ue[0],ve=ue[1],me=(0,i.useState)(!1),he=(0,o.Z)(me,2),pe=he[0],fe=he[1],xe=(0,G.bC)(),ge=(0,o.Z)(xe,1)[0],je=(0,G._7)({data:{search:V,page:p,limit:10,fmid:s},skip:!s}),Ze=je.getMasterDepositAllByFinance,ye=je.getMasterDepositAllByFinanceRefetch;(0,i.useEffect)((function(){s&&(D(!0),ye())}),[s,p,V,ye]),(0,i.useEffect)((function(){v&&Z&&f((function(e){return e+1}))}),[v,Z]),(0,i.useEffect)((function(){var e,n;V?(M(null===Ze||void 0===Ze?void 0:Ze.all_students),D(!1)):re?(M(null===Ze||void 0===Ze?void 0:Ze.all_students),de(!1),D(!1)):null!==Ze&&void 0!==Ze&&Ze.all_students?(M((function(e){var n,t;return null===(n=(0,w.Z)(new Set(null===(t=[].concat((0,w.Z)(e),(0,w.Z)(null===Ze||void 0===Ze?void 0:Ze.all_students)))||void 0===t?void 0:t.map(JSON.stringify))))||void 0===n?void 0:n.map(JSON.parse)})),D(!1)):0===(null===Ze||void 0===Ze||null===(n=Ze.all_students)||void 0===n?void 0:n.length)&&D(!1);10===(null===Ze||void 0===Ze||null===(e=Ze.all_students)||void 0===e?void 0:e.length)?y(!0):y(!1)}),[null===Ze||void 0===Ze?void 0:Ze.all_students]);var Ne=(0,i.useCallback)((0,R.debounce)((function(e){return $(e)}),500),[]),be=function(){X("")};return(0,x.jsxs)(U.Z,{onClose:t,children:[!z&&(0,x.jsxs)("div",{className:k.Z.student_container_modal,style:{minWidth:"43rem",maxWidth:"50rem"},children:[(0,x.jsx)("div",{className:k.Z.with_search,style:{marginTop:"1rem",width:"100%",border:"0.4px solid rgba(0, 0, 0, 0.15)",borderRadius:"6px",marginBottom:"0.3rem"},children:(0,x.jsxs)("div",{className:k.Z.search_container_input,style:{width:"100%"},children:[(0,x.jsx)("img",{className:k.Z.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),(0,x.jsx)("input",{type:"text",placeholder:"Search Student...",style:{width:"100%"},onChange:function(e){Ne(e.target.value)}})]})}),null===A||void 0===A?void 0:A.map((function(e,n){var t,i,s,a,o,r,d,c;return(null===A||void 0===A?void 0:A.length)===n+1?(0,x.jsxs)("section",{className:k.Z.student_container,title:"Refund deposit",ref:_,onClick:function(){return X(e)},children:[(0,x.jsx)("img",{src:"1"!==e.photoId?"".concat(L.yI,"/").concat(null===e||void 0===e?void 0:e.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"student avatar"}),(0,x.jsxs)("div",{className:k.Z.conainter_main,children:[(0,x.jsxs)("div",{className:k.Z.student_container_name,children:[(0,x.jsx)("h6",{children:"".concat(null===e||void 0===e?void 0:e.studentFirstName," ").concat(null!==e&&void 0!==e&&e.studentMiddleName?null===e||void 0===e?void 0:e.studentMiddleName:""," ").concat(null===e||void 0===e?void 0:e.studentLastName)}),(0,x.jsxs)("h6",{className:k.Z.student_container_gr,children:[l("rs"),". ",null!==(t=null===e||void 0===e?void 0:e.deposit_pending_amount)&&void 0!==t?t:0]})]}),(0,x.jsxs)("div",{className:k.Z.student_container_name,children:[(0,x.jsxs)("h6",{children:[l("gr_number"),null!==(i=null===e||void 0===e?void 0:e.studentGRNO)&&void 0!==i?i:""," ",", ",null!==(s=null===e||void 0===e||null===(a=e.department)||void 0===a?void 0:a.dName)&&void 0!==s?s:""]}),(0,x.jsx)("p",{className:k.Z.student_container_gr,children:l("pending_deposit")})]})]})]},null===e||void 0===e?void 0:e._id):(0,x.jsxs)("section",{className:k.Z.student_container,title:"Refund deposit",onClick:function(){return X(e)},children:[(0,x.jsx)("img",{src:"1"!==e.photoId?"".concat(L.yI,"/").concat(null===e||void 0===e?void 0:e.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"student avatar"}),(0,x.jsxs)("div",{className:k.Z.conainter_main,children:[(0,x.jsxs)("div",{className:k.Z.student_container_name,children:[(0,x.jsx)("h6",{children:"".concat(null===e||void 0===e?void 0:e.studentFirstName," ").concat(null!==e&&void 0!==e&&e.studentMiddleName?null===e||void 0===e?void 0:e.studentMiddleName:""," ").concat(null===e||void 0===e?void 0:e.studentLastName)}),(0,x.jsxs)("h6",{className:k.Z.student_container_gr,children:[l("rs"),". ",null!==(o=null===e||void 0===e?void 0:e.deposit_pending_amount)&&void 0!==o?o:0]})]}),(0,x.jsxs)("div",{className:k.Z.student_container_name,children:[(0,x.jsxs)("h6",{children:[l("gr_number"),null!==(r=null===e||void 0===e?void 0:e.studentGRNO)&&void 0!==r?r:""," ",", ",null!==(d=null===e||void 0===e||null===(c=e.department)||void 0===c?void 0:c.dName)&&void 0!==d?d:""]}),(0,x.jsx)("p",{className:k.Z.student_container_gr,children:l("pending_deposit")})]})]})]},null===e||void 0===e?void 0:e._id)})),S&&(0,x.jsx)(F.Z,{})]}),z&&(0,x.jsxs)("div",{className:k.Z.student_container_modal,children:[(0,x.jsxs)("section",{className:k.Z.moderator_container_title,children:[(0,x.jsx)("img",{src:"/images/arrow-left-fees-icon.svg",onClick:be,alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),(0,x.jsx)("div",{className:k.Z.with_search,children:(0,x.jsx)("h6",{children:l("refund_deposit")})})]}),(0,x.jsx)(I.Z,{customStyle:{width:"100%"}}),(0,x.jsxs)("div",{className:k.Z.unused_container_text_inner,style:{marginTop:"1rem"},children:[(0,x.jsx)("h6",{children:l("pending_deposit")}),(0,x.jsxs)("h6",{children:[l("rs")," ",null!==(n=null===z||void 0===z?void 0:z.deposit_pending_amount)&&void 0!==n?n:0]})]}),(0,x.jsx)(q.Z,{paymentHeading:l("payment_type_mode"),paymentHeadingPlaceholder:l("refund_cash_bank"),onInputChange:function(e){ne((function(n){return(0,B.Z)((0,B.Z)({},n),{},{mode:"By Bank"===e?"Online":"Offline",fee_payment_mode:e})}))},errorShow:se.fee_payment_mode,openAs:"DEPOSIT_REFUND_LIST"}),(0,x.jsx)(O.Z,{labelText:l("amount"),name:"fee_payment_amount",type:"tel",value:null===ee||void 0===ee?void 0:ee.fee_payment_amount,onChange:function(e){ne((function(n){return(0,B.Z)((0,B.Z)({},n),{},{amount:+e.target.value,fee_payment_amount:+e.target.value})}))},placeholder:l("please_enter_amount_paid"),errorShow:se.fee_payment_amount}),(0,x.jsx)("button",{className:k.Z.applicable_to_btn,style:{marginTop:"2rem",marginBottom:"1rem",justifyContent:"center"},onClick:function(){var e=function(e){var n={};for(var t in e)"fee_bank_name"===t||"fee_bank_holder"===t||"fee_utr_reference"===t||"amount"===t||"transaction_date"===t||"mode"===t||(e[t]?"fee_payment_amount"===t&&e[t]>(null===z||void 0===z?void 0:z.deposit_pending_amount)&&(ve({msg:"You can not enter amount greater than Deposit amount",run:!0}),n.fee_payment_amount="".concat(t," is required!")):n[t]="".concat(t," is required!"));return n}(ee),n=!1;for(var t in e){n=!0;break}n?ae(e):(fe((function(e){return!e})),ge({fmid:s,sid:null===z||void 0===z?void 0:z._id,refundDeposit:ee}).then((function(){f(1),de(!0),ye(),a(),be(),fe((function(e){return!e}))})).catch({}))},children:l("confirm")}),pe&&(0,x.jsx)(c.Z,{})]}),(0,x.jsx)(E.Ch,{msg:_e.msg,run:_e.run,setRun:function(){return ve({msg:"",run:!1})},postiton:"bottom",type:"error"})]})},J=function(e){var n,t,a,l,r,c,u,v=e.transportId,m=(0,d.$G)().t,h=(0,s.s0)(),p=(0,i.useState)(!1),f=(0,o.Z)(p,2),g=f[0],j=f[1],Z=[{name:m("deposit_collection"),id:0},{name:m("deposit_refund"),id:1},{name:m("deposit_data_file"),id:3}],y=(0,i.useState)(0),N=(0,o.Z)(y,2),b=N[0],S=N[1],D=(0,_.Iw)({tid:v,skip:!v}),w=D.getMasterDepositByTransport,P=D.getMasterDepositByTransportRefetch;(0,i.useEffect)((function(){v&&P()}),[v,P]);return(0,x.jsxs)("div",{className:k.Z.moderator_container,style:{marginTop:"0"},children:[(0,x.jsxs)("section",{className:k.Z.moderator_container_title,children:[(0,x.jsx)("img",{src:"/images/arrow-left-fees-icon.svg",onClick:function(){h(-1)},alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),(0,x.jsxs)("div",{className:k.Z.with_search,children:[(0,x.jsx)("h6",{children:m("finance_deposit")}),(0,x.jsx)("div",{className:k.Z.search_container_filter,children:(0,x.jsx)("img",{src:"/images/filter-blue-icon.svg",alt:"filter icon"})})]})]}),(0,x.jsx)(I.Z,{customStyle:{width:"100%"}}),(0,x.jsx)(T.Z,{tabList:Z,activeIndexTab:b,setActiveIndexTab:S,showAs:!1,customStyleTab:{width:"33.33%"}}),(0,x.jsx)(I.Z,{customStyle:{width:"100%",marginBottom:"0.5rem"}}),0===b&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("button",{className:k.Z.applicable_to_btn,onClick:function(){return j(!0)},style:{width:"50%",marginTop:"2rem",marginBottom:"1rem"},children:[(0,x.jsxs)("div",{children:[m("deposit_fee_head_linking")," "]}),(0,x.jsx)("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]}),(0,x.jsx)("div",{className:k.Z.refund_list,children:(0,x.jsxs)("section",{className:k.Z.unused_container,children:[(0,x.jsx)("img",{src:"/images/rupee-symobl-icon.svg",alt:"rupee symobl"}),(0,x.jsxs)("div",{className:k.Z.unused_container_text,children:[(0,x.jsxs)("div",{className:k.Z.unused_container_text_inner,children:[(0,x.jsx)("h6",{children:m("total_deposit")}),(0,x.jsxs)("h6",{children:[m("rs")," ",null!==(n=null===w||void 0===w||null===(t=w.master)||void 0===t?void 0:t.deposit_amount)&&void 0!==n?n:0]})]}),(0,x.jsx)("div",{className:k.Z.unused_container_text_inner,children:(0,x.jsxs)("p",{children:[m("deposit_of")," ",null!==(a=null===w||void 0===w||null===(l=w.master)||void 0===l?void 0:l.paid_student_count)&&void 0!==a?a:0," ",m("deposit_student")]})})]})]})})]}),1===b&&(0,x.jsx)(M,{refund_amount:null===w||void 0===w||null===(r=w.master)||void 0===r?void 0:r.refund_amount,refund_student_count:null===w||void 0===w||null===(c=w.master)||void 0===c?void 0:c.refund_student_count,transportId:v}),g&&(0,x.jsx)(H,{onClose:function(){return j(!1)},fmid:null===w||void 0===w||null===(u=w.master)||void 0===u?void 0:u._id,onRefecthParent:P})]})},V=t(93181),$=function(e){var n,t,s,a,r=e.institute,u=e.border,v=e.transportId,m=e.onRefetch,h=(0,d.$G)().t,p=(0,_.Z1)(),f=(0,o.Z)(p,1)[0],g=(0,i.useState)(!1),j=(0,o.Z)(g,2),Z=j[0],y=j[1];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:l.Z.transpotation_card,style:{justifyContent:"space-between"},children:[(0,x.jsxs)("div",{className:l.Z.transpotation_card_detail,children:[(0,x.jsx)("img",{src:null!==r&&void 0!==r&&r.insProfilePhoto?"".concat(L.yI,"/").concat(r.insProfilePhoto):"/images/user-icon.svg",alt:"avatar"}),(0,x.jsxs)("div",{className:l.Z.transpotation_card_detail_text,children:[(0,x.jsx)("h6",{children:null!==(n=null===r||void 0===r?void 0:r.insName)&&void 0!==n?n:""}),(0,x.jsx)("h6",{style:{fontSize:"12px"},children:null!==(t=null===r||void 0===r?void 0:r.name)&&void 0!==t?t:""})]})]}),(null===r||void 0===r||null===(s=r.transportDepart)||void 0===s?void 0:s.length)>0?v===(null===r||void 0===r||null===(a=r.transportDepart)||void 0===a?void 0:a[0])?(0,x.jsx)("div",{className:l.Z.linked_institute_btn,children:h("linked")}):null:(0,x.jsx)("div",{className:l.Z.linked_institute_btn,onClick:function(){v&&null!==r&&void 0!==r&&r._id&&(y((function(e){return!e})),f({tid:v,id:null===r||void 0===r?void 0:r._id}).then((function(){m(),y((function(e){return!e}))})).catch({}))},children:h("linked_institute")})]}),u&&(0,x.jsx)(I.Z,{customStyle:{width:"100%"}}),Z&&(0,x.jsx)(c.Z,{})]})},Y=function(e){var n=e.transportId,t=(0,d.$G)().t,s=(0,i.useState)(""),a=(0,o.Z)(s,2),r=a[0],c=a[1],u=(0,P.YD)({skip:r}),v=(0,o.Z)(u,2),m=v[0],h=v[1],p=(0,i.useState)(1),f=(0,o.Z)(p,2),g=f[0],j=f[1],Z=(0,i.useState)(!0),y=(0,o.Z)(Z,2),N=y[0],b=y[1],S=(0,i.useState)(!0),D=(0,o.Z)(S,2),k=D[0],T=D[1],C=(0,i.useState)([]),A=(0,o.Z)(C,2),M=A[0],B=A[1],L=(0,i.useState)(!1),O=(0,o.Z)(L,2),G=O[0],E=O[1],U=(0,_.FT)({data:{tid:n,page:g,limit:10,search:r},skip:!n}),q=U.getTransportLinkedList,H=U.getTransportLinkedListRefetch;(0,i.useEffect)((function(){n&&(T(!0),H())}),[n,g,r,H]),(0,i.useEffect)((function(){h&&N&&j((function(e){return e+1}))}),[h,N]),(0,i.useEffect)((function(){var e,n;G?(B(null===q||void 0===q?void 0:q.all_ins),T(!1),E(!1)):r?(B(null===q||void 0===q?void 0:q.all_ins),T(!1)):null!==q&&void 0!==q&&q.all_ins?(B((function(e){var n,t;return null===(n=(0,w.Z)(new Set(null===(t=[].concat((0,w.Z)(e),(0,w.Z)(null===q||void 0===q?void 0:q.all_ins)))||void 0===t?void 0:t.map(JSON.stringify))))||void 0===n?void 0:n.map(JSON.parse)})),T(!1)):0===(null===q||void 0===q||null===(n=q.all_ins)||void 0===n?void 0:n.length)&&T(!1);10===(null===q||void 0===q||null===(e=q.all_ins)||void 0===e?void 0:e.length)?b(!0):b(!1)}),[null===q||void 0===q?void 0:q.all_ins]);var J=(0,i.useCallback)((0,R.debounce)((function(e){return c(e)}),500),[]),V=function(){j(1),E(!0),T(!0),H()};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:l.Z.with_search,children:[(0,x.jsx)("h6",{children:t("linked_institute")}),(0,x.jsx)("section",{className:l.Z.search_container,children:(0,x.jsxs)("div",{className:l.Z.search_container_input,children:[(0,x.jsx)("img",{className:l.Z.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),(0,x.jsx)("input",{type:"text",placeholder:"Search institutes...",onChange:function(e){e.target.value?J(e.target.value):(J(""),j((function(e){return 1})))}})]})})]}),(0,x.jsx)(I.Z,{customStyle:{marginTop:"0.5rem",marginBottom:"0.6rem",width:"100%"}}),(0,x.jsx)("div",{className:l.Z.vehicle_list,children:null===M||void 0===M?void 0:M.map((function(e,t){return(null===M||void 0===M?void 0:M.length)===t+1?(0,x.jsx)("div",{ref:m,style:{width:"100%"},children:(0,x.jsx)($,{institute:e,transportId:n,onRefetch:V})},null===e||void 0===e?void 0:e._id):(0,x.jsx)($,{institute:e,border:!0,transportId:n,onRefetch:V},null===e||void 0===e?void 0:e._id)}))}),k&&(0,x.jsx)(F.Z,{status:"white"})]})},W=function(e){var n,t,s,a,d,c,u,v,m,h,p,f,g,k,I,T,w,P=e.onClickValue,R=e.carryParentState,C=(0,r.lr)(),A=(0,o.Z)(C,1)[0],F=(0,_.sJ)({tid:null===P||void 0===P?void 0:P._id,skip:!(null!==P&&void 0!==P&&P._id)}),M=F.transportDetail,B=F.transportDetailRefetch;return(0,i.useEffect)((function(){null!==P&&void 0!==P&&P._id&&B()}),[null===P||void 0===P?void 0:P._id,B]),(0,x.jsxs)("div",{style:{marginTop:"1rem"},children:[(null===(n=[null,"fee","fund"])||void 0===n?void 0:n.includes(A.get("a")))&&(0,x.jsx)(j,{tid:null===P||void 0===P?void 0:P._id,transport:null===M||void 0===M?void 0:M.trans_panel,carryParentState:R,onRefetch:B}),"vehicle"===A.get("a")&&(0,x.jsx)("div",{className:l.Z.hostel_container,children:(0,x.jsx)(Z.Z,{tid:null===P||void 0===P?void 0:P._id,carryParentState:R,instituteId:null!==(t=null===M||void 0===M||null===(s=M.trans_panel)||void 0===s||null===(a=s.institute)||void 0===a?void 0:a._id)&&void 0!==t?t:""})}),"personal"===A.get("a")&&(0,x.jsx)("div",{className:l.Z.hostel_container,children:(0,x.jsx)(y.Z,{tid:null===P||void 0===P?void 0:P._id,carryParentState:R,instituteId:null!==(d=null===M||void 0===M||null===(c=M.trans_panel)||void 0===c||null===(u=c.institute)||void 0===u?void 0:u._id)&&void 0!==d?d:""})}),"passenger"===A.get("a")&&(0,x.jsx)("div",{className:l.Z.hostel_container,children:(0,x.jsx)(N.Z,{tid:null===P||void 0===P?void 0:P._id,carryParentState:R,instituteId:null!==(v=null===M||void 0===M||null===(m=M.trans_panel)||void 0===m||null===(h=m.institute)||void 0===h?void 0:h._id)&&void 0!==v?v:""})}),"batch"===A.get("a")&&(0,x.jsx)("div",{className:l.Z.hostel_container,children:(0,x.jsx)(S.Z,{transportId:null===P||void 0===P?void 0:P._id,selectedBacthId:null===M||void 0===M||null===(p=M.trans_panel)||void 0===p?void 0:p.departmentSelectBatch,onMasterApiRefetch:B,carryParentState:R,instituteId:null!==(f=null===M||void 0===M||null===(g=M.trans_panel)||void 0===g||null===(k=g.institute)||void 0===k?void 0:k._id)&&void 0!==f?f:""})}),"standard"===A.get("a")&&(0,x.jsx)("div",{className:l.Z.hostel_container,children:(0,x.jsx)(D.Z,{transportId:null===P||void 0===P?void 0:P._id,carryParentState:R})}),"deposit"===A.get("a")&&(0,x.jsx)("div",{className:l.Z.hostel_container,children:(0,x.jsx)(J,{transportId:null===P||void 0===P?void 0:P._id})}),"pending"===A.get("a")&&(0,x.jsx)("div",{className:l.Z.hostel_container,children:(0,x.jsx)(V.Z,{transportId:null===P||void 0===P?void 0:P._id,instituteId:null!==(I=null===M||void 0===M||null===(T=M.trans_panel)||void 0===T||null===(w=T.institute)||void 0===w?void 0:w._id)&&void 0!==I?I:""})}),"vehicle-detail"===A.get("a")&&(0,x.jsx)(b.Z,{transportId:null===P||void 0===P?void 0:P._id,carryParentState:R}),"linked"===A.get("a")&&(0,x.jsx)("div",{className:l.Z.hostel_container,children:(0,x.jsx)(Y,{transportId:null===P||void 0===P?void 0:P._id})})]})},z=t(98648),X=function(){var e,n,t,i,o,l,r,d,c,u=(0,s.TH)();return(0,x.jsx)(x.Fragment,{children:"site"===(null===u||void 0===u||null===(e=u.search)||void 0===e?void 0:e.substring(3))?(0,x.jsx)(z.Z,{tid:null===u||void 0===u||null===(n=u.state)||void 0===n||null===(t=n.onClickValue)||void 0===t?void 0:t._id}):(0,x.jsx)(a.Z,{index:"30",sid:null!==(i=null===u||void 0===u||null===(o=u.state)||void 0===o?void 0:o.sid)&&void 0!==i?i:"",onClickValue:null!==(l=null===u||void 0===u||null===(r=u.state)||void 0===r?void 0:r.onClickValue)&&void 0!==l?l:"",children:(0,x.jsx)(W,{onClickValue:null!==(d=null===u||void 0===u||null===(c=u.state)||void 0===c?void 0:c.onClickValue)&&void 0!==d?d:"",carryParentState:null===u||void 0===u?void 0:u.state})})})}},69314:function(e,n){n.Z={moderator_container:"Deposit_moderator_container__uYc+U",moderator_container_title:"Deposit_moderator_container_title__2drHz",add_new_moderator:"Deposit_add_new_moderator__24P1G",menu_icon:"Deposit_menu_icon__teeam",scholarship_card_container:"Deposit_scholarship_card_container__DhFaA",assign_role_container:"Deposit_assign_role_container__r-1pQ",assign_role_title:"Deposit_assign_role_title__lXinn",applicable_to_btn:"Deposit_applicable_to_btn__mWWfO",category_card:"Deposit_category_card__DFup3",category_card_hover_active:"Deposit_category_card_hover_active__TfGHF",scholar_preview_container:"Deposit_scholar_preview_container__SGhqf",candidate_card_container:"Deposit_candidate_card_container__+UBtq",candidate_card_container_text:"Deposit_candidate_card_container_text__rR493",candidate_card_row:"Deposit_candidate_card_row__HMz9f",student_container:"Deposit_student_container__lsw8R",conainter_main:"Deposit_conainter_main__TrWk+",student_container_name:"Deposit_student_container_name__mZ8HN",search_container:"Deposit_search_container__PtFNP",search_container_text:"Deposit_search_container_text__JnaM6",search_container_input:"Deposit_search_container_input__Iz1uP",searchIcon:"Deposit_searchIcon__-4uou",allot_container:"Deposit_allot_container__+1Brf",unused_container:"Deposit_unused_container__Lh4Xk",unused_container_text:"Deposit_unused_container_text__V764F",unused_container_text_inner:"Deposit_unused_container_text_inner__cyPQR",intake_history:"Deposit_intake_history__k+KcC",corpus_card:"Deposit_corpus_card__Dw2Gw",recieve_from:"Deposit_recieve_from__XY3mV",save_entry:"Deposit_save_entry__-3pcb",row_search:"Deposit_row_search__FrSt8",with_search:"Deposit_with_search__pybCG",search_container_filter:"Deposit_search_container_filter__sx4qD",student_container_modal:"Deposit_student_container_modal__l2laG"}}}]);
//# sourceMappingURL=7912.587d1edf.chunk.js.map