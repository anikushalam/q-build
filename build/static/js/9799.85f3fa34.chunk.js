"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[9799],{45631:(e,l,s)=>{s.r(l),s.d(l,{default:()=>b});var a=s(72791),i=s(56959),t=s(23441),n=s(91427),d=s(57588),c=s(63687),o=s(21348),r=s(90904),v=s(55336),h=s(1669),u=s(2651),f=s(36132),m=s(39230),x=s(98684),j=s(97892),_=s.n(j),p=s(82824),Z=s(1095),g=s(55050),N=s(45445),k=s(80184);const y=e=>{var l,s,i,t,n,d,c,o;let{leave:r}=e;const{t:v}=(0,m.$G)(),[h,u]=(0,a.useState)(!1),f=()=>{u((e=>!e))};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:g.Z.lmsr_card,children:[(0,k.jsx)("div",{className:g.Z.lmsrc_card,children:(0,k.jsxs)("div",{className:g.Z.lmsrc_card_inner,children:[(0,k.jsx)("img",{src:null!==r&&void 0!==r&&null!==(l=r.staff)&&void 0!==l&&l.staffProfilePhoto?"".concat(Z.yI,"/").concat(null===r||void 0===r||null===(s=r.staff)||void 0===s?void 0:s.staffProfilePhoto):"".concat(x.p3,"/feed-user-avatar.svg"),alt:"staff icon"}),(0,k.jsxs)("div",{className:g.Z.lmsrci_text,children:[(0,k.jsx)("h6",{children:"".concat(null!==(i=null===r||void 0===r||null===(t=r.staff)||void 0===t?void 0:t.staffFirstName)&&void 0!==i?i:""," ").concat(null!==r&&void 0!==r&&null!==(n=r.staff)&&void 0!==n&&n.staffMiddleName?null===r||void 0===r||null===(d=r.staff)||void 0===d?void 0:d.staffMiddleName:""," ").concat(null!==(c=null===r||void 0===r||null===(o=r.staff)||void 0===o?void 0:o.staffLastName)&&void 0!==c?c:"")}),(0,k.jsxs)("p",{children:[v("raised_on"),(0,p.J)(null===r||void 0===r?void 0:r.createdAt,"LT"),", ",_()(null===r||void 0===r?void 0:r.createdAt).format("DD MMM YYYY"),", ",(0,k.jsx)("span",{className:g.Z.lmsrc_date,onClick:f,children:v("for_dates")})]})]})]})}),(0,k.jsx)("div",{className:g.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,k.jsxs)("h6",{style:{fontWeight:"400"},children:[v("leave_type")," "," : ",null===r||void 0===r?void 0:r.leave_type]})}),(0,k.jsx)("div",{className:g.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,k.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[v("reason")," "," : ",null===r||void 0===r?void 0:r.reason]})}),(null===r||void 0===r?void 0:r.attach)&&(0,k.jsx)("div",{className:g.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,k.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[v("attachment")," "," : ",(0,k.jsx)("a",{href:"".concat(Z.q2,"/").concat(null===r||void 0===r?void 0:r.attach),target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,k.jsx)("span",{className:g.Z.lmsrc_date,children:v("view_attachment")})})]})})]}),h&&(0,k.jsx)(N.Z,{onClose:f,allDate:null===r||void 0===r?void 0:r.date})]})},b=e=>{var l,s,j;let{instituteId:_}=e;const{t:p}=(0,m.$G)(),[Z,g]=(0,a.useState)(""),[N,b]=(0,a.useState)(1),[L,w]=(0,a.useState)(!0),[C,S]=(0,t.YD)({skip:Z}),{lmsLeaveRequestList:q,lmsLeaveRequestListLoading:D}=(0,f.B)({data:{id:_,page:N,limit:10,search:Z,flow:"Accepted"},skip:!_});(0,a.useEffect)((()=>{S&&L&&b((e=>e+1))}),[S,L]),(0,a.useEffect)((()=>{var e;if(null!==q&&void 0!==q&&null!==(e=q.list)&&void 0!==e&&e.length){var l;let e=(0,n.f)(null===q||void 0===q||null===(l=q.list)||void 0===l?void 0:l.length);w((()=>e))}}),[null===q||void 0===q?void 0:q.list]);const M=(0,a.useCallback)((0,d.J)((e=>{b((()=>1)),g(e)}),1500),[]);return(0,k.jsxs)(c.Z,{children:[(0,k.jsx)(o.Z,{children:(0,k.jsxs)("div",{className:i.Z.fm_header_container,children:[(0,k.jsx)("h6",{children:p("leave_issued")}),(0,k.jsx)("div",{className:i.Z.fm_search,children:(0,k.jsx)("section",{className:i.Z.fm_search_container,children:(0,k.jsxs)("div",{className:i.Z.fm_search_container_inner,children:[(0,k.jsx)("img",{className:i.Z.fm_search_icon,alt:"search icon",src:"".concat(x.dB,"/navbar-search.svg")}),(0,k.jsx)("input",{type:"text",placeholder:p("search"),onChange:e=>{e.target.value?M(e.target.value):(b((()=>1)),g(""))}})]})})})]})}),(0,k.jsx)(r.Z,{}),(0,k.jsxs)(o.Z,{children:[null===q||void 0===q||null===(l=q.list)||void 0===l?void 0:l.map(((e,l)=>{var s;return(null===q||void 0===q||null===(s=q.list)||void 0===s?void 0:s.length)===l+1?(0,k.jsx)("div",{ref:C,children:(0,k.jsx)(y,{leave:e})},null===e||void 0===e?void 0:e._id):(0,k.jsx)(y,{leave:e},null===e||void 0===e?void 0:e._id)})),D?Z?(0,k.jsx)(v.Z,{}):(0,k.jsx)(h.Z,{}):Z?0===(null===q||void 0===q||null===(s=q.list)||void 0===s?void 0:s.length)&&(0,k.jsx)(u.Z,{title:"No staff leave issued found related this search."}):0===(null===q||void 0===q||null===(j=q.list)||void 0===j?void 0:j.length)&&(0,k.jsx)(u.Z,{title:"No staff leave issued."})]})]})}}}]);
//# sourceMappingURL=9799.85f3fa34.chunk.js.map