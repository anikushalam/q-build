"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[69236],{69236:(t,e,n)=>{n.r(e),n.d(e,{default:()=>T});var s=n(72791);const i="Complaints_complaints__zSm-J",l="Complaints_complaintDetail__FqKdQ",a="Complaints_complaintList__2pa3v",o={complaintList:"ComplaintList_complaintList__AncqY",listcontainer:"ComplaintList_listcontainer__NnO-R",heading:"ComplaintList_heading__dffHT",listHead:"ComplaintList_listHead__ox7DD",tabs:"ComplaintList_tabs__f3YJH",item:"ComplaintList_item__Tw7T-",text:"ComplaintList_text__MQbnE",to:"ComplaintList_to__IEMdc",datetime:"ComplaintList_datetime__PK0+5",solved:"ComplaintList_solved__LTgHh",unsolved:"ComplaintList_unsolved__yztBr",dots:"ComplaintList_dots__XPKxQ",button:"ComplaintList_button__C1xWG",menu:"ComplaintList_menu__0wYna",menuItem:"ComplaintList_menuItem__vh9c6"};var c=n(72426),m=n.n(c),d=n(39230),p=n(64540),_=n(80184);function r(t){let{open:e,onClose:n,cid:s,refetch:i}=t;const{t:l}=(0,d.$G)(),[a]=(0,p.bd)();if(!e)return null;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{onClick:n,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10}}),(0,_.jsx)("div",{className:o.menu,style:{position:"absolute",zIndex:10},children:(0,_.jsx)("div",{className:o.menuItem,onClick:()=>{a(s).then((t=>{i(),n()})).catch({})},children:l("remove_complaint")})})]})}function u(t){let{setShowDetails:e,complaint:n,setCDetails:i,refetch:l}=t;const[a,c]=(0,s.useState)(!1),{t:p}=(0,d.$G)();return(0,_.jsxs)("div",{className:o.item,onClick:()=>{e(!0),i(n)},children:[(0,_.jsx)("img",{src:"/images/members/staff-complain-icon.svg",alt:""}),(0,_.jsxs)("div",{className:o.text,children:[(0,_.jsxs)("h6",{children:[null===n||void 0===n?void 0:n.complaintType," Complaint"]}),(0,_.jsxs)("div",{className:o.datetime,children:[(0,_.jsxs)("p",{children:[" ",p("date"),": ",m()(null===n||void 0===n?void 0:n.createdAt).format("LL")]}),"Unsolved"===(null===n||void 0===n?void 0:n.complaintStatus)?(0,_.jsx)("p",{className:o.unsolved,children:null===n||void 0===n?void 0:n.complaintStatus}):(0,_.jsx)("p",{className:o.solved,children:null===n||void 0===n?void 0:n.complaintStatus})]})]}),(0,_.jsx)("img",{className:o.dots,src:"/images/menu-dots-icon.svg",alt:"",onClick:()=>c(!0)}),a&&(0,_.jsx)(r,{open:a,onClose:()=>c(!1),cid:null===n||void 0===n?void 0:n._id,refetch:l})]})}const h=function(t){let{setShowDetails:e,complaints:n,setCDetails:s,refetch:i}=t;const{t:l}=(0,d.$G)();return(0,_.jsxs)("div",{className:o.complaintList,children:[(0,_.jsx)("h6",{className:o.heading,children:l("complaint_list")}),(0,_.jsx)("div",{className:o.listcontainer,children:null===n||void 0===n?void 0:n.map(((t,n)=>(0,_.jsx)(u,{complaint:t,setShowDetails:e,setCDetails:s,refetch:i},n)))}),(0,_.jsx)("div",{className:o.button,onClick:()=>e(!1),children:l("make_new_complaint")})]})},v="ComplaintDetails_complaintDetails__-WhJ2",x="ComplaintDetails_detailsheader__W0KOL",C="ComplaintDetails_detailsbody__YEngl",j="ComplaintDetails_footer__TiXAq",N="ComplaintDetails_red__oLLLm";const f=function(t){let{cDetail:e}=t;const{t:n}=(0,d.$G)();return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:v,children:[(0,_.jsx)("div",{className:x,children:n("complaint")}),(0,_.jsx)("hr",{}),(0,_.jsxs)("div",{className:C,children:[(0,_.jsxs)("h6",{children:[null===e||void 0===e?void 0:e.complaintType,n("complaint")]}),(0,_.jsx)("p",{children:null===e||void 0===e?void 0:e.complaintContent}),(0,_.jsx)("div",{className:j,children:(0,_.jsx)("h6",{className:N,children:null===e||void 0===e?void 0:e.complaintStatus})})]})]})})},b={newComplain:"NewComplain_newComplain__bmRXA",newComplainheader:"NewComplain_newComplainheader__lTktp",input:"NewComplain_input__2cFBM",down:"NewComplain_down__FeNuz",options:"NewComplain_options__Ql4m1",option:"NewComplain_option__bWUTa",postTextarea:"NewComplain_postTextarea__3iUB6",submitbtn:"NewComplain_submitbtn__y5E6Z",disablebtn:"NewComplain_disablebtn__bOFPG"};var y=n(51561),w=(n(68825),n(98734));const g={position:"relative",zIndex:1},L={position:"absolute",left:"14.5vw",top:"9.5vw",zIndex:10},D={position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10};function k(t){let{setComplaintData:e,open:n,onClose:s,complaintData:i,setIsOpen:l}=t;const{t:a}=(0,d.$G)();return n?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{onClick:s,style:D}),(0,_.jsxs)("div",{style:L,className:b.options,children:[(0,_.jsx)("div",{className:b.option,onClick:()=>{e({...i,type:"Open"}),l(!1)},children:a("open_complaint")}),(0,_.jsx)("div",{className:b.option,onClick:()=>{e({...i,type:"Anonymous"}),l(!1)},children:a("anonymous_complaint")})]})]}):null}const S=function(t){let{staffId:e,toast:n,setToast:i}=t;const[l,a]=(0,s.useState)(!1),[o,c]=(0,s.useState)(!1),[m]=(0,p.N)(),{t:r}=(0,d.$G)(),[u,h]=(0,s.useState)(""),[v,x]=(0,s.useState)({type:"",content:""}),C=document.querySelector("textarea");return null===C||void 0===C||C.addEventListener("keyup",(t=>{C.style.height="auto";let e=t.target.scrollHeight;C.style.height="".concat(e,"px")})),(0,_.jsxs)("div",{className:b.newComplain,children:[(0,_.jsx)(y.qu,{msg:u,run:n,setRun:i}),(0,_.jsx)("h6",{className:b.newComplainheader,children:r("make_complaint")}),(0,_.jsx)("div",{className:b.input,style:g,children:(0,_.jsxs)("div",{children:["Open"===(null===v||void 0===v?void 0:v.type)?(0,_.jsx)("h6",{onClick:()=>a(!0),children:r("open_complaint")}):"Anonymous"===(null===v||void 0===v?void 0:v.type)?(0,_.jsx)("h6",{onClick:()=>a(!0),children:r("anonymous_complaint")}):(0,_.jsx)("h6",{onClick:()=>a(!0),children:r("comp_type")}),(0,_.jsx)("img",{className:b.down,src:"/images/downn-icon.svg",alt:""})]})}),(0,_.jsx)(k,{open:l,onClose:()=>a(!1),setComplaintData:x,complaintData:v,setIsOpen:a}),(0,_.jsx)("textarea",{className:b.postTextarea,type:"text",required:!0,name:"CreateInsPost",placeholder:r("comp_des"),value:v.content,onChange:t=>x({...v,content:t.target.value})}),v.type&&v.content?(0,_.jsx)("div",{className:b.submitbtn,onClick:()=>{c((t=>!t));const t=new FormData;t.append("complaintType",v.type),t.append("complaintContent",v.content),m({sid:e&&e,complaintData:{complaintType:v.type,complaintContent:v.content}}).then((t=>{t.data.message&&(h("Successfully Submitted"),i(!0),x({...v,content:"",type:""}),c((t=>!t)))}))},children:r("send_complaint")}):(0,_.jsx)("div",{className:"".concat(b.submitbtn," ").concat(b.disablebtn),children:r("send_complaint")}),o&&(0,_.jsx)(w.Z,{})]})};const T=function(t){let{staffId:e}=t;const[n,o]=(0,s.useState)(!1),[c,m]=(0,s.useState)(),[d,r]=(0,s.useState)(!1),{data:u,refetch:v}=(0,p.AO)(e,{skip:!e});return(0,s.useEffect)((()=>{v()}),[d]),(0,_.jsxs)("div",{className:i,children:[(0,_.jsxs)("div",{className:l,children:[n&&(0,_.jsx)(f,{cDetail:c}),!n&&(0,_.jsx)(S,{staffId:e,toast:d,setToast:r})]}),(0,_.jsx)("div",{className:a,children:(0,_.jsx)(h,{setShowDetails:o,complaints:null===u||void 0===u?void 0:u.complaints,setCDetails:m,refetch:v})})]})}}}]);
//# sourceMappingURL=69236.0202db77.chunk.js.map