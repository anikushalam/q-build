"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[3775],{63775:function(e,l,i){i.r(l),i.d(l,{default:function(){return S}});var n=i(39230),o=i(16871),t=i(63687),a=i(21348),d=i(90904),v=i(56959),s=i(36132),c=i(29439),r=i(43504),u=i(72791),m=i(38668),f=i(20659),h=i(2350),_=i(80184),x=function(e){var l,i,t=e.leaveTypeToggle,a=(0,n.$G)().t,d=(0,o.TH)(),v=(0,o.UO)(),x=(0,o.s0)(),g=(0,r.lr)(),y=(0,c.Z)(g,1)[0],j=(0,u.useState)(m.bA),p=(0,c.Z)(j,2),b=p[0],w=p[1],Z=(0,s.fn)({data:{sid:null===(l=d.state)||void 0===l?void 0:l.staffId},skip:!(null!==(i=d.state)&&void 0!==i&&i.staffId)}).lmsStaffLeaveOverviewCount;(0,u.useEffect)((function(){if(null!==Z&&void 0!==Z&&Z.staff){var e=null===Z||void 0===Z?void 0:Z.staff,l=m.bA;l[1].count=null===e||void 0===e?void 0:e.casual_leave,l[2].count=null===e||void 0===e?void 0:e.medical_leave,l[3].count=null===e||void 0===e?void 0:e.sick_leave,l[4].count=null===e||void 0===e?void 0:e.c_off_leave,l[5].count=null===e||void 0===e?void 0:e.off_duty_leave,l[6].count=null===e||void 0===e?void 0:e.lwp_leave,l[7].count=null===e||void 0===e?void 0:e.commuted_leave,l[8].count=null===e||void 0===e?void 0:e.maternity_leave,l[9].count=null===e||void 0===e?void 0:e.paternity_leave,l[10].count=null===e||void 0===e?void 0:e.quarantine_leave,l[11].count=null===e||void 0===e?void 0:e.half_pay_leave,l[12].count=null===e||void 0===e?void 0:e.study_leave,l[13].count=null===e||void 0===e?void 0:e.sabbatical_leave,l[14].count=null===e||void 0===e?void 0:e.special_disability_leave,l[15].count=null===e||void 0===e?void 0:e.winter_vacation_leave,l[16].count=null===e||void 0===e?void 0:e.summer_vacation_leave,l[17].count=null===e||void 0===e?void 0:e.child_adoption_leave,l[18].count=null===e||void 0===e?void 0:e.bereavement_leave,w(l)}}),[null===Z||void 0===Z?void 0:Z.staff]);var N=function(e){var l,i,n="Institute"===(null===(l=d.state)||void 0===l?void 0:l.urlOffSet)?"/q/".concat(v.username,"/institute/member/lms/?type=staff-overview&category=").concat(e):"Staff"===(null===(i=d.state)||void 0===i?void 0:i.urlOffSet)?"/q/".concat(v.username,"/member?a=leave&n=overview&category=").concat(e):"/q/".concat(v.username,"/member/staff/lms/?type=staff-overview&category=").concat(e);x(n,{state:d.state})};return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(f.Z,{customTileContainer:{flexWrap:"wrap",marginBottom:"1rem"},children:null===b||void 0===b?void 0:b.map((function(e){return"All Leave"===e.key?(0,_.jsx)(h.Z,{tile:e,onTile:N,customTileChild:{height:"2.5rem"},activeTile:y.get("category"),children:(0,_.jsx)("h6",{children:a(null===e||void 0===e?void 0:e.name)})}):t[null===e||void 0===e?void 0:e.isActive]&&(0,_.jsxs)(h.Z,{tile:e,onTile:N,customTileChild:"All Leave"===e.key?{height:"2.5rem"}:{flexDirection:"All Leave"===e.key?"row":"column",alignItems:"flex-start"},activeTile:y.get("category"),children:[(0,_.jsx)("h6",{children:a(null===e||void 0===e?void 0:e.name)}),(null===e||void 0===e?void 0:e.count)>=0?(0,_.jsxs)("p",{children:[a("available")," ",": "," ",null===e||void 0===e?void 0:e.count," "]}):null]})}))})})},g=(0,u.memo)(x),y=i(23441),j=i(91427),p=i(1669),b=i(2651),w=i(98684),Z=i(97892),N=i.n(Z),T=i(82824),k=i(1095),L=i(55050),Y=function(e){var l,i,o,t,a,d,v,s,c,r,u,m,f,h,x,g,y,j,p,b,Z,Y,M,S,D,F,C,q,A,I,O,W,E,J,G,H,$,U,B,z,K=e.leave,P=(0,n.$G)().t;return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:L.Z.lmsr_card,children:[(0,_.jsx)("div",{className:L.Z.lmsrc_card,children:(0,_.jsxs)("div",{className:L.Z.lmsrc_card_inner,children:[(0,_.jsx)("img",{src:"".concat(w.D3,"/leave-raise.svg"),alt:"leave icon"}),(0,_.jsxs)("div",{className:L.Z.lmsrci_text,children:[(0,_.jsxs)("h6",{style:{fontWeight:"400"},children:[P("leave_type")," "," : ",null===K||void 0===K?void 0:K.leave_type]}),(0,_.jsxs)("p",{children:[P("raised_on")," ",(0,T.J)(null===K||void 0===K?void 0:K.createdAt,"LT"),","," ",N()(null===K||void 0===K?void 0:K.createdAt).format("DD MMM YYYY")]}),(0,_.jsxs)("p",{children:[P("for_dates")," "," : ",null===K||void 0===K||null===(l=K.date)||void 0===l?void 0:l.map((function(e){return(0,_.jsxs)("span",{children:[e,", "," "]},e)}))]})]})]})}),null!==K&&void 0!==K&&null!==(i=K.recommend)&&void 0!==i&&null!==(o=i.recommend_by)&&void 0!==o&&o.staffFirstName?(0,_.jsx)("div",{className:L.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,_.jsxs)("p",{children:[P("recomend_on")," ",(0,T.J)(null===K||void 0===K||null===(t=K.recommend)||void 0===t?void 0:t.recommend_on,"LT"),","," ",N()(null===K||void 0===K||null===(a=K.recommend)||void 0===a?void 0:a.recommend_on).format("DD MMM YYYY"),", ",P("recomending_by"),"".concat(null!==(d=null===K||void 0===K||null===(v=K.recommend)||void 0===v||null===(s=v.recommend_by)||void 0===s?void 0:s.staffFirstName)&&void 0!==d?d:""," ").concat(null!==(c=null===K||void 0===K||null===(r=K.recommend)||void 0===r||null===(u=r.recommend_by)||void 0===u?void 0:u.staffMiddleName)&&void 0!==c?c:""," ").concat(null!==(m=null===K||void 0===K||null===(f=K.recommend)||void 0===f||null===(h=f.recommend_by)||void 0===h?void 0:h.staffLastName)&&void 0!==m?m:"")]})}):null,null!==K&&void 0!==K&&null!==(x=K.review)&&void 0!==x&&null!==(g=x.review_by)&&void 0!==g&&g.staffFirstName?(0,_.jsx)("div",{className:L.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,_.jsxs)("p",{children:[P("reviewed_on")," ",(0,T.J)(null===K||void 0===K||null===(y=K.review)||void 0===y?void 0:y.review_on,"LT"),","," ",N()(null===K||void 0===K||null===(j=K.review)||void 0===j?void 0:j.review_on).format("DD MMM YYYY"),", ",P("reviewing_by"),"".concat(null!==(p=null===K||void 0===K||null===(b=K.review)||void 0===b||null===(Z=b.review_by)||void 0===Z?void 0:Z.staffFirstName)&&void 0!==p?p:""," ").concat(null!==(Y=null===K||void 0===K||null===(M=K.review)||void 0===M||null===(S=M.review_by)||void 0===S?void 0:S.staffMiddleName)&&void 0!==Y?Y:""," ").concat(null!==(D=null===K||void 0===K||null===(F=K.review)||void 0===F||null===(C=F.review_by)||void 0===C?void 0:C.staffLastName)&&void 0!==D?D:"")]})}):null,null!==K&&void 0!==K&&null!==(q=K.sanction)&&void 0!==q&&null!==(A=q.sanction_by)&&void 0!==A&&A.staffFirstName?(0,_.jsx)("div",{className:L.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,_.jsxs)("p",{children:[P("sanction_on")," ",(0,T.J)(null===K||void 0===K||null===(I=K.sanction)||void 0===I?void 0:I.sanction_on,"LT"),","," ",N()(null===K||void 0===K||null===(O=K.sanction)||void 0===O?void 0:O.sanction_on).format("DD MMM YYYY"),", ",P("sanctioning_by"),"".concat(null!==(W=null===K||void 0===K||null===(E=K.sanction)||void 0===E||null===(J=E.sanction_by)||void 0===J?void 0:J.staffFirstName)&&void 0!==W?W:""," ").concat(null!==(G=null===K||void 0===K||null===(H=K.sanction)||void 0===H||null===($=H.sanction_by)||void 0===$?void 0:$.staffMiddleName)&&void 0!==G?G:""," ").concat(null!==(U=null===K||void 0===K||null===(B=K.sanction)||void 0===B||null===(z=B.sanction_by)||void 0===z?void 0:z.staffLastName)&&void 0!==U?U:"")]})}):null,(0,_.jsx)("div",{className:L.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,_.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[P("reason")," "," : ",null===K||void 0===K?void 0:K.reason]})}),(null===K||void 0===K?void 0:K.attach)&&(0,_.jsx)("div",{className:L.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,_.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[P("attachment")," "," : ",(0,_.jsx)("a",{href:"".concat(k.q2,"/").concat(null===K||void 0===K?void 0:K.attach),target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,_.jsx)("span",{className:L.Z.lmsrc_date,children:P("view_attachment")})})]})})]})})},M=function(){var e,l,i,n,t=(0,o.TH)(),a=(0,r.lr)(),d=(0,c.Z)(a,1)[0],v=(0,u.useState)(1),m=(0,c.Z)(v,2),f=m[0],h=m[1],x=(0,u.useState)(!0),g=(0,c.Z)(x,2),w=g[0],Z=g[1],N=(0,y.YD)(),T=(0,c.Z)(N,2),k=T[0],L=T[1],M=(0,s.xC)({data:{sid:null===(e=t.state)||void 0===e?void 0:e.staffId,page:f,limit:10,category:"All Leave"===d.get("category")?"":d.get("category")},skip:!(null!==(l=t.state)&&void 0!==l&&l.staffId)}),S=M.lmsStaffLeaveOverviewList,D=M.lmsStaffLeaveOverviewListLoading;return(0,u.useEffect)((function(){L&&w&&h((function(e){return e+1}))}),[L,w]),(0,u.useEffect)((function(){var e;if(null!==S&&void 0!==S&&null!==(e=S.list)&&void 0!==e&&e.length){var l,i=(0,j.f)(null===S||void 0===S||null===(l=S.list)||void 0===l?void 0:l.length);Z((function(){return i}))}}),[null===S||void 0===S?void 0:S.list]),(0,u.useEffect)((function(){d.get("category")&&h((function(e){return 1}))}),[d.get("category")]),(0,_.jsxs)(_.Fragment,{children:[null===S||void 0===S||null===(i=S.list)||void 0===i?void 0:i.map((function(e,l){var i;return(null===S||void 0===S||null===(i=S.list)||void 0===i?void 0:i.length)===l+1?(0,_.jsx)("div",{ref:k,children:(0,_.jsx)(Y,{leave:e})},null===e||void 0===e?void 0:e._id):(0,_.jsx)(Y,{leave:e},null===e||void 0===e?void 0:e._id)})),D?(0,_.jsx)(p.Z,{}):0===(null===S||void 0===S||null===(n=S.list)||void 0===n?void 0:n.length)&&(0,_.jsx)(b.Z,{title:"No ".concat(d.get("category")," taken.")})]})},S=function(e){var l,i,c,r,m,f,h,x,y=e.isStaff,j=e.leaveTypeToggle,p=(0,n.$G)().t,b=(0,o.TH)(),Z=(0,o.UO)(),N=(0,o.s0)(),T=(0,s.fn)({data:{sid:null===(l=b.state)||void 0===l?void 0:l.staffId},skip:!(null!==(i=b.state)&&void 0!==i&&i.staffId)}).lmsStaffLeaveOverviewCount,k=(0,u.useCallback)((function(){var e,l="Institute"===(null===(e=b.state)||void 0===e?void 0:e.urlOffSet)?"/q/".concat(Z.username,"/institute/member/lms"):"/q/".concat(Z.username,"/member/staff/lms");N(l,{state:b.state})}),[N,b.state,Z.username]);return(0,_.jsx)(_.Fragment,{children:y?(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(a.Z,{children:[(0,_.jsx)(g,{leaveTypeToggle:j}),(0,_.jsx)(M,{})]})}):(0,_.jsxs)(t.Z,{children:[(0,_.jsx)(a.Z,{children:(0,_.jsxs)("div",{className:v.Z.fm_header_container,children:[(0,_.jsxs)("div",{className:v.Z.fm_header_start_container,children:[(0,_.jsx)("img",{alt:"search icon",src:"".concat(w.Fk,"/back.svg"),style:{height:"2rem",width:"2rem"},onClick:k}),(0,_.jsxs)("h6",{children:[(0,_.jsx)("span",{style:{fontWeight:"400"},children:p("name")}),": ",null!==(c=null===b||void 0===b||null===(r=b.state)||void 0===r?void 0:r.staffName)&&void 0!==c?c:""]})]}),(0,_.jsxs)("div",{className:v.Z.fm_header_container,style:{gap:"1rem"},children:[(0,_.jsxs)("h6",{children:[(0,_.jsx)("span",{style:{fontWeight:"400"},children:p("total_leave_available")}),": ",null!==(m=null===T||void 0===T||null===(f=T.overview)||void 0===f?void 0:f.total_leave_available)&&void 0!==m?m:0]}),(0,_.jsxs)("h6",{children:[(0,_.jsx)("span",{style:{fontWeight:"400"},children:p("total_leave_taken")}),": ",null!==(h=null===T||void 0===T||null===(x=T.overview)||void 0===x?void 0:x.total_leave_taken)&&void 0!==h?h:0]})]})]})}),(0,_.jsx)(d.Z,{}),(0,_.jsxs)(a.Z,{children:[(0,_.jsx)(g,{leaveTypeToggle:j}),(0,_.jsx)(M,{})]})]})})}}}]);
//# sourceMappingURL=3775.57f10548.chunk.js.map