{"version":3,"file":"static/js/2218.495de1b6.chunk.js","mappings":"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","sources":["Profile/Institute/Pages/FollowButton.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  useBlockInstituteByInstitute,\n  useDashAllPost,\n  useUnblockInstituteByInstitute,\n} from \"../../../Post/Institute/Components/post-api\";\nimport {\n  useInstituteFollow,\n  useInstituteFollowList,\n  useInstituteOwnFollowingList,\n  useInstituteUnfollow,\n} from \"../../../Post/Institute/Components/search-api\";\nimport style from \"./InstituteProfileInfoTop.module.css\";\nimport { useTranslation } from \"react-i18next\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { instituteAs } from \"../../../constant/constant_value\";\nimport { postChangeAction } from \"../../../redux/store/post-slice\";\nimport { useOneInstituteProfile } from \"../../../hooks/dashboard/dashboard-api\";\n\nconst FollowButton = ({ institute }) => {\n  const { t } = useTranslation();\n  const [disabled, setDisabled] = useState(false);\n  const ids = useSelector((state) => state.idChange);\n  const allPosts = useSelector((state) => state.postChange.dashboardPosts);\n  const dispatch = useDispatch();\n  const [instituteFollow] = useInstituteFollow();\n  const [instituteUnfollow] = useInstituteUnfollow();\n  const [blockInstituteByInstitute] = useBlockInstituteByInstitute();\n  const [unblockInstituteByInstitute] = useUnblockInstituteByInstitute();\n  const { allDashPost, allDashPostRefetch } = useDashAllPost({\n    data: { id: ids?.id, viewAs: instituteAs },\n    skip: false,\n  });\n  const { oneInstituteProfileRefetch } = useOneInstituteProfile({\n    data: {\n      id: institute?._id,\n      type: \"ID\",\n    },\n    skip: !institute?._id,\n  });\n  const { instituteOwnFollowingList, instituteOwnFollowingListRefetch } =\n    useInstituteOwnFollowingList({\n      data: {\n        page: 1,\n        id: institute?._id,\n        limit: 100,\n      },\n      skip: !institute?._id,\n    });\n  const { instituteFollowList, instituteFollowListRefetch } =\n    useInstituteFollowList({\n      list: { page: 1, id: institute?._id, limit: 100 },\n      skip: !institute?._id,\n    });\n\n  useEffect(() => {\n    if (institute?._id) {\n      instituteFollowListRefetch();\n      instituteOwnFollowingListRefetch();\n    }\n  }, [institute?._id]);\n  useEffect(() => {\n    if (allDashPost?.post) {\n      dispatch(\n        postChangeAction.followPost({\n          post: allDashPost?.post,\n          profilePost: \"dash\",\n        })\n      );\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [allDashPost?.post]);\n\n  const unfollowDeleteHandler = (authorId) => {\n    const leftPost = [];\n    for (let i = 0; i < allPosts?.length; i++) {\n      if (allPosts[i].author !== authorId) {\n        leftPost.push(allPosts[i]);\n      }\n    }\n    return leftPost;\n  };\n\n  const followHandler = () => {\n    setDisabled(true);\n    instituteFollow({\n      followId: institute?._id,\n    })\n      .then((res) => {\n        if (res.data.message) {\n          instituteFollowListRefetch();\n          allDashPostRefetch();\n          setDisabled(false);\n        }\n      })\n      .catch({});\n  };\n  const unfollowHandler = () => {\n    setDisabled(true);\n\n    const posts = unfollowDeleteHandler(institute?._id);\n    // if(!posts.length){\n\n    // }\n    dispatch(\n      postChangeAction.unfollowPost({\n        posts: posts,\n      })\n    );\n    instituteUnfollow({\n      followId: institute?._id,\n    })\n      .then((res) => {\n        if (res.data.message) {\n          instituteFollowListRefetch();\n          // allDashPostRefetch();\n          setDisabled(false);\n        }\n      })\n      .catch({});\n  };\n\n  const onBlockInstitute = () => {\n    setDisabled(true);\n    blockInstituteByInstitute({\n      blockId: institute?._id,\n    })\n      .then(() => {\n        oneInstituteProfileRefetch();\n        setDisabled(false);\n      })\n      .catch({});\n  };\n\n  const onUnblockInstitute = () => {\n    setDisabled(true);\n    unblockInstituteByInstitute({\n      blockId: institute?._id,\n    })\n      .then(() => {\n        oneInstituteProfileRefetch();\n        setDisabled(false);\n      })\n      .catch({});\n  };\n  return (\n    <>\n      {institute?.blockedBy?.includes(ids?.id) ? (\n        <div className={style.profileedit} title=\"Unblock Institute\">\n          <button onClick={onUnblockInstitute}>{t(\"blocked\")}</button>\n        </div>\n      ) : instituteOwnFollowingList?.following?.some(\n          (val) => val?._id === ids?.id\n        ) ? (\n        <div className={style.profileedit} title=\"Block Institute\">\n          <button onClick={onBlockInstitute}>{t(\"block\")}</button>\n        </div>\n      ) : institute?.follower?.includes(ids?.id) ||\n        instituteFollowList?.iFollowers?.some((val) => val?._id === ids?.id) ? (\n        <div className={style.profileedit} title=\"Unfollow Institute\">\n          <button onClick={unfollowHandler} disabled={disabled}>\n            {t(\"unfollow\")}\n          </button>\n        </div>\n      ) : (\n        <div className={style.profileedit} title=\"Follow Institute\">\n          <button onClick={followHandler} disabled={disabled}>\n            {t(\"follow\")}\n          </button>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default FollowButton;\n"],"names":["_ref","_institute$blockedBy","_instituteOwnFollowin","_institute$follower","_instituteFollowList$","institute","t","useTranslation","_useState","useState","_useState2","_slicedToArray","disabled","setDisabled","ids","useSelector","state","idChange","allPosts","postChange","dashboardPosts","dispatch","useDispatch","_useInstituteFollow","useInstituteFollow","instituteFollow","_useInstituteUnfollow","useInstituteUnfollow","instituteUnfollow","_useBlockInstituteByI","useBlockInstituteByInstitute","blockInstituteByInstitute","_useUnblockInstituteB","useUnblockInstituteByInstitute","unblockInstituteByInstitute","_useDashAllPost","useDashAllPost","data","id","viewAs","instituteAs","skip","allDashPost","allDashPostRefetch","oneInstituteProfileRefetch","useOneInstituteProfile","_id","type","_useInstituteOwnFollo","useInstituteOwnFollowingList","page","limit","instituteOwnFollowingList","instituteOwnFollowingListRefetch","_useInstituteFollowLi","useInstituteFollowList","list","instituteFollowList","instituteFollowListRefetch","useEffect","post","postChangeAction","followPost","profilePost","_jsx","_Fragment","children","blockedBy","includes","className","style","profileedit","title","onClick","blockId","then","catch","following","some","val","follower","iFollowers","posts","authorId","leftPost","i","length","author","push","unfollowDeleteHandler","unfollowPost","followId","res","message"],"sourceRoot":""}