"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[65444],{82512:(e,o,l)=>{l.r(o),l.d(o,{default:()=>Q});var i=l(72791);const s={navbar:"UserProfile_navbar__FsWP+"};var d=l(79872),t=l(49010);const a="UserMain_mainbody__lZCbM",r="UserMain_mainbodyedit__lvkgt",n="UserMain_mainbodysplit__iu4+j";var c=l(95048),u=l(91007),v=l(48673),h=l(77356),_=l(62271);const p="MiddleBody_middleBodyGap__MdJHS";var f=l(34057),m=l(85702),x=l(91419),j=l(9447),P=l(23441),g=l(70092),y=l(16256),C=l(80184);const S=function(e){var o,l,s,d,t,a;let{profilePost:r,profileData:n}=e;const u=(0,c.v9)((e=>e.idChange)),v=(0,c.v9)((e=>e.postChange)),h=(0,c.I0)(),_=localStorage.getItem("_searchId"),[p,f]=(0,i.useState)(!0),[S,N]=(0,P.YD)(),[k,b]=(0,i.useState)(!0),[Z,M]=(0,i.useState)(1),{allProfilePost:E,allProfilePostRefetch:I}=(0,j.N0)({data:{id:null!==u&&void 0!==u&&null!==(o=u.searchProfile)&&void 0!==o&&o.id?null===u||void 0===u||null===(l=u.searchProfile)||void 0===l?void 0:l.id:_,page:Z,limit:10,viewAs:y.Xe},skip:!r});return(0,i.useEffect)((()=>{var e;null!==u&&void 0!==u&&null!==(e=u.searchProfile)&&void 0!==e&&e.id&&(h(g.p.removeSearchPost({search:[]})),M(1),b(!0))}),[h,null===u||void 0===u||null===(s=u.searchProfile)||void 0===s?void 0:s.id]),(0,i.useEffect)((()=>{N&&k&&r&&M((e=>e+1))}),[N,r,k]),(0,i.useEffect)((()=>{I()}),[Z,r,I]),(0,i.useEffect)((()=>{var e,o;h(g.p.addPost({post:r&&(null===E||void 0===E||null===(e=E.post)||void 0===e||null===(o=e[0])||void 0===o?void 0:o.author)===(null===u||void 0===u?void 0:u.searchProfile.id)?null===E||void 0===E?void 0:E.post:[],profilePost:r?"search":"dash"})),10===(null===E||void 0===E?void 0:E.post.length)?b(!0):b(!1)}),[null===E||void 0===E?void 0:E.post,h,r,null===u||void 0===u||null===(d=u.searchProfile)||void 0===d?void 0:d.id]),(0,i.useEffect)((()=>{setTimeout((()=>{f(!1)}),5e3)}),[]),(0,C.jsx)("div",{className:m.Z.posts,children:null!==v&&void 0!==v&&null!==(t=v.searchPosts)&&void 0!==t&&t.length||!r||!p?null===v||void 0===v||null===(a=v.searchPosts)||void 0===a?void 0:a.map(((e,o)=>{var l;return(null===v||void 0===v||null===(l=v.searchPosts)||void 0===l?void 0:l.length)===o+1?(0,C.jsx)("div",{ref:S,children:(0,C.jsx)(x.Z,{post:e,profilePost:r,allPosts:[],profileData:n},o)},o):(0,C.jsx)(x.Z,{post:e,profilePost:r,allPosts:[],profileData:n},o)})):(0,C.jsx)("div",{className:m.Z.loader,children:(0,C.jsx)("img",{src:"/images/loader/loader.gif",alt:""})})})},N="MiddleBodyMain_container__gjMlC",k="MiddleBodyMain_header__6ZfiA",b="MiddleBodyMain_headerText__wAMzM",Z="MiddleBodyMain_headerTextActive__Ob817",M="MiddleBodyMain_headerLink__RpWv0",E="MiddleBodyMain_headerLinkActive__GwH1i";var I=l(39230);const B=e=>{let{state:o}=e;const[l,s]=(0,i.useState)("my"),{t:d}=(0,I.$G)(),t=(0,c.v9)((e=>e.idChange));return(0,C.jsxs)("div",{className:N,children:[(0,C.jsxs)("div",{className:k,children:[(0,C.jsx)("div",{className:"my"===l?Z:b,onClick:()=>{s("my"),o(!1)},children:(0,C.jsx)("p",{className:"my"===l?"".concat(M," ").concat(E):M,children:"Posts"})}),(0,C.jsx)("div",{className:"tag"===l?Z:b,onClick:()=>{null!==t&&void 0!==t&&t.searchProfile.id||(s("tag"),o(!1))},children:(0,C.jsx)("p",{className:"tag"===l?"".concat(M," ").concat(E):M,children:"Tag Posts"})}),null!==t&&void 0!==t&&t.searchProfile.id?"":(0,C.jsx)("div",{className:"save"===l?Z:b,onClick:()=>{null!==t&&void 0!==t&&t.searchProfile.id||(s("save"),o(!1))},children:(0,C.jsx)("p",{className:"save"===l?"".concat(M," ").concat(E):M,children:"Saved"})})]}),null!==t&&void 0!==t&&t.searchProfile.id?(0,C.jsx)(S,{profilePost:!0}):(0,C.jsx)(f.Z,{profilePost:!0,profileSavedPost:l})]})},U="MiddleBodyRight_middleBodyRight__0Z538",R="MiddleBodyRight_middleBodyRightTop__xLwoe",w="MiddleBodyRight_middleBodyRightbottom__NzAtP",D=e=>{let{questionCount:o,answerQuestionCount:l,upVote:i}=e;const{t:s}=(0,I.$G)();return(0,C.jsxs)("div",{className:U,children:[(0,C.jsxs)("div",{className:R,children:[" ",s("know_s")," (",s("knowledge_score"),")"]}),(0,C.jsxs)("div",{className:w,children:[(0,C.jsxs)("h6",{children:[s("total_questions_asked")," : ",o]}),(0,C.jsxs)("h6",{children:[s("questions_answered")," : ",l]}),(0,C.jsxs)("h6",{children:[s("total_upward")," : ",i]})]})]})},A=e=>{let{state:o,profileBody:l,upVote:i,status:s}=e;return(0,C.jsxs)("div",{className:p,children:[(0,C.jsx)(B,{state:e=>{o(e)},status:s}),(0,C.jsx)(D,{questionCount:null===l||void 0===l?void 0:l.questionCount,answerQuestionCount:null===l||void 0===l?void 0:l.answerQuestionCount,upVote:i})]})};var L=l(75070),F=l(30705),q=l(12072),T=l(84489),H=l(87049),O=l(98734);const G=e=>{let{onClose:o,userId:l,onSearchRefetch:s,loginUserId:d,blockedBy:t}=e;const{t:a}=(0,I.$G)(),[r,n]=(0,i.useState)(!1),[c]=(0,j.Wi)(),[u]=(0,j.z9)(),[v]=(0,j.Kj)();return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(T.Z,{onClose:o}),(0,C.jsxs)(q.Z,{customStyle:{zIndex:"1200"},children:[(0,C.jsxs)("div",{className:H.Z.edit_modal_container,style:{width:"200px"},children:[null!==t&&void 0!==t&&t.includes(d)?(0,C.jsxs)("h6",{className:H.Z.edit,onClick:()=>{n(!0),u({blockId:l}).then((()=>{s(),n(!1),o()})).catch({})},children:[a("unblocked")," ",a("account")]}):(0,C.jsxs)("h6",{className:H.Z.edit,onClick:()=>{n(!0),c({blockId:l}).then((()=>{s(),n(!1),o()})).catch({})},children:[a("block")," ",a("account")]}),(0,C.jsx)("h6",{className:H.Z.remove,onClick:()=>{n(!0),v({rid:l,id:d,accountStatus:"Malicious"}).then((()=>{n(!1),o()})).catch({})},children:a("report_acount")})]}),r&&(0,C.jsx)(O.Z,{})]})]})},V=e=>{let{onClose:o,profileChange:l,onUploadType:i}=e;const{t:s}=(0,I.$G)();return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(T.Z,{onClose:o}),(0,C.jsx)(q.Z,{customStyle:{zIndex:"1200"},children:(0,C.jsxs)("div",{className:H.Z.edit_modal_container,style:{width:"300px"},children:[(0,C.jsx)("label",{htmlFor:"photo",children:(0,C.jsx)("h6",{className:H.Z.edit,onClick:()=>i("ONLY_USER"),children:s("update_only_profile_photo")})}),(0,C.jsx)("label",{htmlFor:"photo",children:(0,C.jsx)("h6",{className:H.Z.edit,onClick:()=>i("USER_AND_STUDENT"),children:s("update_user_student_profile_photo")})}),(0,C.jsx)("input",{id:"photo",name:"file",onChange:l,type:"file",style:{display:"none"},accept:"image/gif, image/jpeg, image/png",required:!0})]})})]})};const z=function(){var e,o,l,s,d,t,p,f,m,x,j,P,g,y,S,N,k,b;const Z=(0,c.v9)((e=>e.idChange)),M=(0,c.I0)(),[E,I]=(0,i.useState)(!1),[B,U]=(0,i.useState)(!1),{data:R,refetch:w}=(0,u.pu)(null!==Z&&void 0!==Z&&null!==(e=Z.searchProfile)&&void 0!==e&&e.id?null===Z||void 0===Z||null===(o=Z.searchProfile)||void 0===o?void 0:o.id:null===Z||void 0===Z?void 0:Z.id,{skip:"USERNAME"===Z.searchProfile.type}),{data:D,refetch:q}=(0,u.QS)(null===Z||void 0===Z||null===(l=Z.searchProfile)||void 0===l?void 0:l.id,{skip:"ID"===Z.searchProfile.type});(0,i.useEffect)((()=>{"USERNAME"===Z.searchProfile.type?q():"ID"===Z.searchProfile.type&&w()}),[Z.searchProfile.type,null===Z||void 0===Z||null===(s=Z.searchProfile)||void 0===s?void 0:s.id]),(0,i.useEffect)((()=>{var e;null!==D&&void 0!==D&&D.user&&"USERNAME"===Z.searchProfile.type&&M(v.S.searchId({id:null===D||void 0===D||null===(e=D.user)||void 0===e?void 0:e._id,type:"ID"}))}),[null===D||void 0===D?void 0:D.user]);const T=""!==(null===Z||void 0===Z||null===(d=Z.searchProfile)||void 0===d?void 0:d.id)?null===Z||void 0===Z||null===(t=Z.searchProfile)||void 0===t?void 0:t.id:null===Z||void 0===Z?void 0:Z.id,[H,O]=(0,i.useState)(!1),[z,Q]=(0,i.useState)(!1),[J,W]=(0,i.useState)(""),[$,X]=(0,i.useState)(""),[K,Y]=(0,i.useState)(""),[ee,oe]=(0,i.useState)(""),[le,ie]=(0,i.useState)(!1),[se,de]=(0,i.useState)(!1),[te,ae]=(0,i.useState)(""),[re,ne]=(0,i.useState)(!1),[ce,ue]=(0,i.useState)(""),[ve]=(0,F.w1)(),[he]=(0,F.Ru)();return(0,i.useEffect)((()=>{if(H){let e=new FormData;e.append("file",J),he({cover:e,id:null===Z||void 0===Z?void 0:Z.id}).then((()=>{})).catch({})}}),[H,J]),(0,i.useEffect)((()=>{if(z){let e=new FormData;e.append("file",$),ve({photo:e,id:null===Z||void 0===Z?void 0:Z.id,role:ce}).then((()=>{})).catch({})}}),[z,$]),(0,C.jsxs)(C.Fragment,{children:[R&&"post"===(null===Z||void 0===Z||null===(p=Z.repostQuestion)||void 0===p?void 0:p.repostStatus)&&(E?(0,C.jsx)("div",{className:r,children:(0,C.jsx)(L.Z,{setEdit:I})}):(0,C.jsxs)("div",{className:a,children:[(0,C.jsx)(h.Z,{resultId:T,insID:null===Z||void 0===Z?void 0:Z.id,profileData:null===R||void 0===R?void 0:R.user,searchId:null===Z||void 0===Z||null===(f=Z.searchProfile)||void 0===f?void 0:f.id,profile:Z,status:"userProfile",setEdit:I,openCrop:le,openCropCover:se,setOpenCrop:ie,setOpenCropCover:de,coverChange:e=>{const o=URL.createObjectURL(e.target.files[0]);W(e.target.files[0]),Y(o),ae(o),ie(!0)},profileChange:()=>{ne(!0)},photoURL:te,setPhotoURL:ae,coverPhoto:K,profilePhoto:ee,setUpload:O,setUploadProfile:Q,setFile:W,setFileProfile:X,setCoverPhoto:Y,setProfilePhoto:oe,setOpenBlock:U,blockedBy:null!==(m=null===R||void 0===R||null===(x=R.user)||void 0===x?void 0:x.blockedBy)&&void 0!==m?m:[],loginUserId:null!==(j=null===Z||void 0===Z?void 0:Z.id)&&void 0!==j?j:"",userId:null!==(P=null===Z||void 0===Z||null===(g=Z.searchProfile)||void 0===g?void 0:g.id)&&void 0!==P?P:""}),(0,C.jsxs)("div",{className:n,children:[(0,C.jsx)(_.Z,{userData:null===R||void 0===R?void 0:R.user,status:"profile"}),(0,C.jsx)(A,{profileBody:R&&(null===R||void 0===R?void 0:R.user),upVote:(null===R||void 0===R?void 0:R.upVote)||0,status:"profile"}),B&&(0,C.jsx)(G,{userId:null!==(y=null===Z||void 0===Z||null===(S=Z.searchProfile)||void 0===S?void 0:S.id)&&void 0!==y?y:"",onClose:()=>U((e=>!e)),onSearchRefetch:w,blockedBy:null!==(N=null===R||void 0===R||null===(k=R.user)||void 0===k?void 0:k.blockedBy)&&void 0!==N?N:[],loginUserId:null!==(b=null===Z||void 0===Z?void 0:Z.id)&&void 0!==b?b:""})]})]})),re&&(0,C.jsx)(V,{onClose:()=>ne(!1),profileChange:e=>{var o;if(null!==(o=e.target.files)&&void 0!==o&&o.length){ne(!1);const o=URL.createObjectURL(e.target.files[0]);X(e.target.files[0]),oe(o),ae(o),de(!0)}},onUploadType:e=>{ue((o=>e))}})]})};const Q=function(){var e,o,l,i,a;const r=localStorage.getItem("user"),n=(0,c.v9)((e=>e.idChange.searchProfile)),{data:v}=(0,u.pu)(r);return(0,C.jsxs)("div",{className:s.Profile,children:[(0,C.jsx)("div",{className:s.navbar,children:(0,C.jsx)(d.default,{status:"profile",profileData:null===v||void 0===v?void 0:v.user,username:null===v||void 0===v||null===(e=v.user)||void 0===e?void 0:e.username,name:null===v||void 0===v||null===(o=v.user)||void 0===o?void 0:o.userLegalName,photoId:null===v||void 0===v||null===(l=v.user)||void 0===l?void 0:l.photoId,profilePhoto:null===v||void 0===v||null===(i=v.user)||void 0===i?void 0:i.profilePhoto})}),"institute"===(null===n||void 0===n?void 0:n.searchAs)?(0,C.jsx)(t.Z,{applicantUserName:null===v||void 0===v||null===(a=v.user)||void 0===a?void 0:a.username}):(0,C.jsx)(z,{profileData:null===v||void 0===v?void 0:v.user})]})}},12072:(e,o,l)=>{l.d(o,{Z:()=>t});l(72791);var i=l(54164);const s="Overlay_overlay_card__PAr1h";var d=l(80184);const t=e=>{let{children:o,customStyle:l}=e;return(0,d.jsx)(d.Fragment,{children:i.createPortal((0,d.jsx)("div",{className:s,style:{...l},children:o}),document.getElementById("overlay"))})}},84489:(e,o,l)=>{l.d(o,{Z:()=>d});l(72791);var i=l(51857),s=l(80184);const d=e=>{let{onClose:o,customStyleBackdrop:l}=e;return(0,s.jsx)("div",{className:i.Z.search_backdrop,style:{...l},onClick:o})}},87049:(e,o,l)=>{l.d(o,{Z:()=>i});const i={edit_modal_container:"EditConfirm_edit_modal_container__WfbTq",modal_header:"EditConfirm_modal_header__4sq5J",edit:"EditConfirm_edit__ziVGP",remove:"EditConfirm_remove__PCXLs",xlsx_update_btn:"EditConfirm_xlsx_update_btn__H3yM8",save_stop_btn:"EditConfirm_save_stop_btn__9NiZ5",update_to_btn:"EditConfirm_update_to_btn__ExCJv"}},51857:(e,o,l)=>{l.d(o,{Z:()=>i});const i={search_backdrop:"SearchHeader_search_backdrop__MsKpG",search_card:"SearchHeader_search_card__-jNcg",search_container:"SearchHeader_search_container__NS7Om",search_container_text:"SearchHeader_search_container_text__bkolR",searchIcon:"SearchHeader_searchIcon__J7cNp",search_container_back:"SearchHeader_search_container_back__ZoXdV"}}}]);
//# sourceMappingURL=65444.739884d4.chunk.js.map