"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[4522],{91022:function(e,t,n){var o=n(1413),l=n(29439),i=n(72791),s=n(39230),d=n(38733),a=n(80184);t.Z=function(e){var t=e.selectLabel,n=e.value,r=e.onClick,c=e.selectedValue,u=e.options,v=e.errorShow,m=e.customStyleContainer,_=e.customLabelStyle,h=e.customListStyle,f=e.openAs,p=e.viewAs,j=(0,s.$G)().t,x=(0,i.useState)(!1),Z=(0,l.Z)(x,2),g=Z[0],N=Z[1],S=function(){"REFUND"===f||"BACKLOG"===f||"FINANCE_MANAGER"===p||N((function(e){return!e}))},b=function(e){r(e),S()};return(0,a.jsxs)("div",{className:d.Z.join_form_container,style:(0,o.Z)({},m),children:[(0,a.jsxs)("p",{className:d.Z.join_form_select_paragraph,style:(0,o.Z)({},_),children:[t," ",v&&(0,a.jsxs)("span",{style:{color:"red",marginLeft:"15px"},children:["* ",j("form_require_label")]})]}),(0,a.jsxs)("section",{className:d.Z.join_form_select_custom,onClick:S,children:[n?(0,a.jsx)("p",{className:d.Z.join_form_select_custom_paragraph,children:null!==n&&void 0!==n?n:""}):(0,a.jsx)("p",{className:d.Z.join_form_select_custom_paragraph,children:c}),(0,a.jsx)("img",{className:d.Z.join_form_select_custom_icon,src:"/images/down-icon.svg",alt:"categor icon"})]}),g&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("section",{className:d.Z.join_form_select_custom_list,style:h?(0,o.Z)({},h):(null===u||void 0===u?void 0:u.length)>2?{overflowY:"scroll"}:{backgroundColor:"#ffffff"},children:[(0,a.jsx)("p",{className:d.Z.join_form_select_custom_paragraph_option,onClick:S,children:c}),null===u||void 0===u?void 0:u.map((function(e,t){return(0,a.jsx)("p",{onClick:function(){return b(e)},className:d.Z.join_form_select_custom_paragraph_option,children:e},t)}))]})})]})}},41233:function(e,t,n){var o=n(1413),l=n(37762),i=n(29439),s=n(72791),d=n(39230),a=n(38733),r=n(80184);t.Z=function(e){var t=e.selectLabel,n=e.onClick,c=e.selectedValue,u=e.options,v=e.customStyleContainer,m=e.customLabelStyle,_=e.customListStyle,h=e.openAs,f=e.errorShow,p=e.defalutValue,j=e.viewAs,x=(0,d.$G)().t,Z=(0,s.useState)(!1),g=(0,i.Z)(Z,2),N=g[0],S=g[1],b=(0,s.useState)(""),y=(0,i.Z)(b,2),C=y[0],I=y[1],w=function(){S((function(e){return!e}))};(0,s.useEffect)((function(){"EVENT_MANAGER"!==j&&"ADMISSION_APPLICATION"!==j&&"FINANCE_BANK"!==j&&"NORMAL_FILTER"!==j||I(p)}),[j,p]),(0,s.useEffect)((function(){if("CUSTOM_FILTER"===j){var e,t="",n=(0,l.Z)(u);try{for(n.s();!(e=n.n()).done;){var o,i=e.value,s=(0,l.Z)(p);try{for(s.s();!(o=s.n()).done;){var d=o.value;if((null===i||void 0===i?void 0:i._id)===d){var a,r,c,v=null!==(a=null!==(r=null!==(c=null===i||void 0===i?void 0:i.dName)&&void 0!==c?c:null===i||void 0===i?void 0:i.batchName)&&void 0!==r?r:null===i||void 0===i?void 0:i.className)&&void 0!==a?a:"";t=t?t+", "+v:v}}}catch(m){s.e(m)}finally{s.f()}}}catch(m){n.e(m)}finally{n.f()}I(t)}}),[j,p,u]);var T=function(e){n(e),w()};return(0,r.jsxs)("div",{className:a.Z.join_form_container,style:(0,o.Z)({},v),children:[(0,r.jsxs)("p",{className:a.Z.join_form_select_paragraph,style:(0,o.Z)({},m),children:[t,f&&(0,r.jsxs)("span",{style:{color:"red",marginLeft:"15px"},children:["* ",x("form_require_label")]})]}),(0,r.jsxs)("section",{className:a.Z.join_form_select_custom,onClick:w,children:[C?(0,r.jsx)("p",{className:a.Z.join_form_select_custom_paragraph,children:null!==C&&void 0!==C?C:""}):(0,r.jsx)("p",{className:a.Z.join_form_select_custom_paragraph,children:c}),(0,r.jsx)("img",{className:a.Z.join_form_select_custom_icon,src:"/images/down-icon.svg",alt:"categor icon"})]}),N&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("section",{className:a.Z.join_form_select_custom_list,style:_?(0,o.Z)({},_):(null===u||void 0===u?void 0:u.length)>2?{overflowY:"scroll"}:{backgroundColor:"#ffffff"},children:null===u||void 0===u?void 0:u.map((function(e,t){var n,o,l,i,s,d,c,u,v,m,_,f;return(0,r.jsx)("p",{onClick:function(){var t,n,o,l,i,s,d,a,r,c,u,v;(T("PROMOTE"===h?e:null!==e&&void 0!==e&&e._id?null===e||void 0===e?void 0:e._id:e),"FINANCE_BANK"===j)||I(null!==(t=null!==(n=null!==(o=null!==(l=null!==(i=null!==(s=null!==(d=null!==(a=null!==(r=null!==(c=null!==(u=null===e||void 0===e?void 0:e.dName)&&void 0!==u?u:null===e||void 0===e?void 0:e.batchName)&&void 0!==c?c:null===e||void 0===e?void 0:e.className)&&void 0!==r?r:null===e||void 0===e?void 0:e.classTitle)&&void 0!==a?a:null===e||void 0===e?void 0:e.category_name)&&void 0!==d?d:null===e||void 0===e||null===(v=e.category_master)||void 0===v?void 0:v.category_name)&&void 0!==s?s:null===e||void 0===e?void 0:e.hostel_unit_name)&&void 0!==i?i:null===e||void 0===e?void 0:e.room_name)&&void 0!==l?l:null===e||void 0===e?void 0:e.subjectName)&&void 0!==o?o:null===e||void 0===e?void 0:e.vehicle_number)&&void 0!==n?n:null===e||void 0===e?void 0:e.finance_bank_account_name)&&void 0!==t?t:e)},className:a.Z.join_form_select_custom_paragraph_option,children:null!==(n=null!==(o=null!==(l=null!==(i=null!==(s=null!==(d=null!==(c=null!==(u=null!==(v=null!==(m=null!==(_=null===e||void 0===e?void 0:e.dName)&&void 0!==_?_:null===e||void 0===e?void 0:e.batchName)&&void 0!==m?m:null===e||void 0===e?void 0:e.className)&&void 0!==v?v:null===e||void 0===e?void 0:e.classTitle)&&void 0!==u?u:null===e||void 0===e?void 0:e.category_name)&&void 0!==c?c:null===e||void 0===e||null===(f=e.category_master)||void 0===f?void 0:f.category_name)&&void 0!==d?d:null===e||void 0===e?void 0:e.hostel_unit_name)&&void 0!==s?s:null===e||void 0===e?void 0:e.room_name)&&void 0!==i?i:null===e||void 0===e?void 0:e.subjectName)&&void 0!==l?l:null===e||void 0===e?void 0:e.vehicle_number)&&void 0!==o?o:null===e||void 0===e?void 0:e.finance_bank_account_name)&&void 0!==n?n:e},t)}))})})]})}},74522:function(e,t,n){n.d(t,{Z:function(){return T}});var o=n(29439),l=n(72791),i=n(33148),s=n(39230),d=n(74067),a=n(74289),r=n(11105),c=n(1413),u=n(24582),v=n(41233),m=n(98094),_=n(36665),h=n(37762),f=n(93433),p=n(69721),j=n(80184),x=function(e){var t,n,o,l,d,a,r,c,u=e.onSelectStudent,v=e.stu,m=e.promoteData,_=(0,s.$G)().t;return(0,j.jsx)("div",{className:null!==m&&void 0!==m&&null!==(t=m.students)&&void 0!==t&&t.includes(null===v||void 0===v?void 0:v._id)?" ".concat(i.Z.promote_student_card," ").concat(i.Z.promote_student_cardActive):i.Z.promote_student_card,onClick:function(){return u(null===v||void 0===v?void 0:v._id)},style:{width:"100%"},children:(0,j.jsxs)("div",{className:i.Z.promote_student_card_text,style:{width:"100%"},children:[(0,j.jsx)("img",{alt:"",src:null!==v&&void 0!==v&&v.studentProfilePhoto?"".concat(p.yI,"/").concat(null===v||void 0===v?void 0:v.studentProfilePhoto):"/images/demo_users/user1.svg"}),(0,j.jsxs)("div",{className:i.Z.promote_student_check_container,children:[(0,j.jsxs)("div",{className:i.Z.promote_student_name,children:[(0,j.jsxs)("p",{children:[null===v||void 0===v?void 0:v.studentFirstName," ",null!==v&&void 0!==v&&v.studentMiddleName?null===v||void 0===v?void 0:v.studentMiddleName:" "," ",null===v||void 0===v?void 0:v.studentLastName]}),(0,j.jsxs)("p",{children:[_("gr_number"),null===v||void 0===v?void 0:v.studentGRNO]})]}),(0,j.jsxs)("div",{className:i.Z.promote_student_check,children:[(0,j.jsxs)("div",{className:i.Z.promote_student_name,children:[null!==v&&void 0!==v&&null!==(n=v.fee_structure)&&void 0!==n&&n.applicable_fees?(0,j.jsxs)("p",{children:[_("applicable_fees_only")," ",_("rs"),".",null!==(o=null===v||void 0===v||null===(l=v.fee_structure)||void 0===l?void 0:l.applicable_fees)&&void 0!==o?o:0]}):"",(0,j.jsxs)("p",{children:[_("paid_fees")," ",": ",_("rs"),".",null!==(d=null===v||void 0===v||null===(a=v.remainingFeeList)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.paid_fee)&&void 0!==d?d:0]})]}),(0,j.jsx)("div",{className:i.Z.promote_student_name,children:null!==m&&void 0!==m&&null!==(c=m.students)&&void 0!==c&&c.includes(null===v||void 0===v?void 0:v._id)?(0,j.jsx)("img",{className:i.Z.department_checkbox,src:"/images/checkbox-icon.svg",alt:"icon"}):(0,j.jsx)("img",{className:i.Z.department_checkbox,src:"/images/box-icon.svg",alt:"icon"})})]})]})]})})},Z=n(98734),g=n(15961),N=function(e){var t=e.isWrapper,n=e.onClose,o=e.title,l=e.firstMessage,i=e.spanMessage,s=e.outerSpanMessage,d=e.lastMessage,a=e.buttonLabel,r=e.onHandler,c=e.buttonStyle,u=e.messageStyle;return(0,j.jsx)(j.Fragment,{children:t?(0,j.jsx)(_.Z,{onClose:n,children:(0,j.jsxs)("div",{className:g.Z.admission_modal,children:[(0,j.jsx)("h6",{className:g.Z.admission_modal_heading,children:o}),(0,j.jsx)(m.Z,{customStyle:{width:"100%",margin:"0.7rem 0"}}),(0,j.jsxs)("div",{className:g.Z.admission_class_confirm,style:u,children:[l," ",(0,j.jsx)("span",{style:{fontWeight:"600"},children:i})," ",s,(0,j.jsx)("span",{style:{fontWeight:"600"},children:d})]}),(0,j.jsx)("div",{className:g.Z.confirm_btn,onClick:r,style:c,children:a})]})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h6",{className:g.Z.admission_modal_heading,children:o}),(0,j.jsx)(m.Z,{customStyle:{width:"100%",margin:"0.7rem 0"}}),(0,j.jsxs)("div",{className:g.Z.admission_class_confirm,style:u,children:[l," ",(0,j.jsx)("span",{style:{fontWeight:"600"},children:i})," ",s,(0,j.jsx)("span",{style:{fontWeight:"600"},children:d})]}),(0,j.jsx)("div",{className:g.Z.confirm_btn,onClick:r,style:c,children:a})]})})},S=function(e){var t,n,d,v,_,p,g=e.classId,S=e.promoteData,b=e.setPromoteData,y=e.onClose,C=e.onRefetchParent,I=(0,s.$G)().t,w=(0,l.useState)(!0),T=(0,o.Z)(w,2),P=T[0],E=T[1],L=(0,l.useState)([]),k=(0,o.Z)(L,2),R=k[0],A=k[1],M=(0,l.useState)(!1),F=(0,o.Z)(M,2),O=F[0],D=F[1],U=(0,l.useState)(!1),B=(0,o.Z)(U,2),G=B[0],V=B[1],W=(0,l.useState)(!1),$=(0,o.Z)(W,2),Y=$[0],q=$[1],H=(0,u.Ed)(),K=(0,o.Z)(H,1)[0],z=(0,a._3)({data:{cid:g,valid_app_fee:"Yes"===(null===S||void 0===S?void 0:S.applicable_with_fees)?"Yes":"No"},skip:!g}),J=z.getNotPromoteStudentByPromote,Q=z.getNotPromoteStudentByPromoteRefetch;(0,l.useEffect)((function(){g&&(E(!0),Q())}),[g,Q]),(0,l.useEffect)((function(){var e,t;(null!==J&&void 0!==J&&J.notPromoteStudent||0===(null===J||void 0===J||null===(e=J.notPromoteStudent)||void 0===e?void 0:e.length))&&(A(null!==(t=null===J||void 0===J?void 0:J.notPromoteStudent)&&void 0!==t?t:[]),E(!1))}),[null===J||void 0===J?void 0:J.notPromoteStudent]);var X=function(e){var t;null!==S&&void 0!==S&&null!==(t=S.students)&&void 0!==t&&t.includes(e)?b((function(t){var n;return(0,c.Z)((0,c.Z)({},t),{},{students:null===(n=t.students)||void 0===n?void 0:n.filter((function(t){return t!==e}))})})):b((function(t){return(0,c.Z)((0,c.Z)({},t),{},{students:t.students?[].concat((0,f.Z)(t.students),[e]):[e]})}))};return(0,j.jsx)(j.Fragment,{children:G?(0,j.jsx)(N,{onClose:function(){return V(!1)},title:I("promote_select_student"),firstMessage:"".concat(I("promote")," "),spanMessage:null===S||void 0===S||null===(t=S.students)||void 0===t?void 0:t.length,outerSpanMessage:"".concat(I("students")," , ").concat(I("to")," "),lastMessage:"".concat(null===S||void 0===S||null===(n=S.classId)||void 0===n?void 0:n.classTitle,", ").concat(null===S||void 0===S||null===(d=S.batchId)||void 0===d?void 0:d.batchName,", ").concat(null===S||void 0===S||null===(v=S.departmentId)||void 0===v?void 0:v.dName),buttonLabel:I("confirm"),onHandler:function(){var e,t,n;V(!1),D((function(e){return!e})),K({cid:g,promote:{applicable_with_fees:null===S||void 0===S?void 0:S.applicable_with_fees,departmentId:null===S||void 0===S||null===(e=S.departmentId)||void 0===e?void 0:e._id,batchId:null===S||void 0===S||null===(t=S.batchId)||void 0===t?void 0:t._id,classId:null===S||void 0===S||null===(n=S.classId)||void 0===n?void 0:n._id,students:null===S||void 0===S?void 0:S.students},flow:"Yes"===(null===S||void 0===S?void 0:S.promot_with_fees)?"WITH_STRUCTURE":"WITH_OUT_STRUCTURE",re_ads:"Yes"===(null===S||void 0===S?void 0:S.re_ads)?"WITH_RE_ADMISSION":"No"}).then((function(){C(),Q(),y(),D((function(e){return!e}))})).catch({})},messageStyle:{marginTop:"3.7rem"},buttonStyle:{marginTop:"5.7rem"}}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:i.Z.select_header,children:[(0,j.jsxs)("h6",{children:[(null===S||void 0===S||null===(_=S.students)||void 0===_?void 0:_.length)>0?"".concat(null===S||void 0===S||null===(p=S.students)||void 0===p?void 0:p.length," "):"",I("select_student")]}),(0,j.jsxs)("div",{children:[Y?(0,j.jsx)("button",{className:i.Z.select_all_btn,title:"Remove All Student",onClick:function(){b((function(e){return(0,c.Z)((0,c.Z)({},e),{},{students:[]})})),q(!1)},style:{marginRight:"0.7rem"},children:I("remove_all")}):(0,j.jsx)("button",{className:i.Z.select_all_btn,title:"Select All Student",onClick:function(){var e,t=[],n=(0,h.Z)(R);try{for(n.s();!(e=n.n()).done;){var o=e.value;t.push(null===o||void 0===o?void 0:o._id)}}catch(l){n.e(l)}finally{n.f()}b((function(e){return(0,c.Z)((0,c.Z)({},e),{},{students:t})})),q(!0)},style:{marginRight:"0.7rem"},children:I("select_all")}),(0,j.jsx)("button",{className:i.Z.promote_all_btn,title:"Promote Selected Student",onClick:function(){var e;return(null===S||void 0===S||null===(e=S.students)||void 0===e?void 0:e.length)>0?V(!0):null},children:I("promote")})]})]}),(0,j.jsx)(m.Z,{customStyle:{width:"100%",marginTop:"0.5rem"}}),(0,j.jsx)("div",{className:i.Z.with_search,style:{marginTop:"1rem",width:"100%",border:"0.4px solid rgba(0, 0, 0, 0.15)",borderRadius:"6px",marginBottom:"0.3rem"},children:(0,j.jsxs)("div",{className:i.Z.search_container_input,style:{width:"100%"},children:[(0,j.jsx)("img",{className:i.Z.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),(0,j.jsx)("input",{type:"text",placeholder:"Search Student...",style:{width:"100%"},onChange:function(e){if(e.target.value){var t,n=null===J||void 0===J||null===(t=J.notPromoteStudent)||void 0===t?void 0:t.filter((function(t){var n,o,l;return null!==(n="".concat(null===t||void 0===t?void 0:t.studentFirstName," ").concat(null!==t&&void 0!==t&&t.studentMiddleName?(null===t||void 0===t?void 0:t.studentMiddleName)+" ":"").concat(null===t||void 0===t?void 0:t.studentLastName))&&void 0!==n&&null!==(o=n.toLowerCase())&&void 0!==o&&o.includes(null===(l=e.target.value)||void 0===l?void 0:l.toLowerCase())?t:null}));A(n)}else A(null===J||void 0===J?void 0:J.notPromoteStudent)}})]})}),null===R||void 0===R?void 0:R.map((function(e,t){return(0,j.jsx)(x,{promoteData:S,stu:e,onSelectStudent:X},t)})),P&&(0,j.jsx)(r.Z,{}),O&&(0,j.jsx)(Z.Z,{})]})})},b=n(91022),y=function(e){var t,n,d,a,r,h,f,p=e.onClose,x=e.classId,Z=e.onRefetchParent,g=(0,s.$G)().t,N=(0,l.useState)("INITIAL_STEP"),y=(0,o.Z)(N,2),C=y[0],I=y[1],w=(0,l.useState)({promot_with_fees:"",applicable_with_fees:"",departmentId:"",batchId:"",classId:"",students:[],re_ads:""}),T=(0,o.Z)(w,2),P=T[0],E=T[1],L=(0,l.useState)(""),k=(0,o.Z)(L,2),R=k[0],A=k[1],M=(0,u.PS)({data:{cid:x,page:1,limit:30},skip:!x}),F=M.classAllDepartmentWithBatch,O=M.classAllDepartmentWithBatchRefetch,D=(0,u.j_)({data:{bid:null===(t=P.batchId)||void 0===t?void 0:t._id,page:1,limit:30},skip:!(null!==(n=P.batchId)&&void 0!==n&&n._id)}),U=D.classAllBatchWithClass,B=D.classAllBatchWithClassRefetch;l.useEffect((function(){x&&O()}),[x,O]),l.useEffect((function(){var e;null!==(e=P.batchId)&&void 0!==e&&e._id&&B()}),[null===(d=P.batchId)||void 0===d?void 0:d._id,B]);return(0,j.jsx)(_.Z,{onClose:"INITIAL_STEP"===C?p:function(){return I("INITIAL_STEP")},children:(0,j.jsxs)("div",{className:i.Z.promote_container,children:["INITIAL_STEP"===C&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h6",{style:{textAlign:"center"},children:g("promote_students")}),(0,j.jsx)(m.Z,{customStyle:{width:"100%"}}),(0,j.jsx)(b.Z,{selectLabel:g("promote_with_fees_structure"),selectedValue:g("select_yes_or_no"),options:["Yes","No"],value:P.promot_with_fees,errorShow:R.promot_with_fees,onClick:function(e){E((function(t){return(0,c.Z)((0,c.Z)({},t),{},{promot_with_fees:e})}))}}),(0,j.jsx)(v.Z,{selectLabel:g("select_department"),selectedValue:g("select_department"),options:null!==(a=null===F||void 0===F?void 0:F.departmets)&&void 0!==a?a:[],onClick:function(e){E((function(t){return(0,c.Z)((0,c.Z)({},t),{},{departmentId:e})}))},openAs:"PROMOTE",errorShow:R.departmentId}),(0,j.jsx)(v.Z,{selectLabel:g("select_batch"),selectedValue:g("select_batch"),options:null!==(r=null===(h=P.departmentId)||void 0===h?void 0:h.batches)&&void 0!==r?r:[],onClick:function(e){E((function(t){return(0,c.Z)((0,c.Z)({},t),{},{batchId:e})}))},openAs:"PROMOTE",errorShow:R.batchId}),(0,j.jsx)(v.Z,{selectLabel:g("select_class"),selectedValue:g("select_class"),options:null!==(f=null===U||void 0===U?void 0:U.classes)&&void 0!==f?f:[],onClick:function(e){E((function(t){return(0,c.Z)((0,c.Z)({},t),{},{classId:e})}))},openAs:"PROMOTE",errorShow:R.classId}),(0,j.jsx)(b.Z,{selectLabel:g("promote_applicable_fee"),selectedValue:g("select_yes_or_no"),options:["Yes","No"],value:P.applicable_with_fees,errorShow:R.applicable_with_fees,onClick:function(e){E((function(t){return(0,c.Z)((0,c.Z)({},t),{},{applicable_with_fees:e})}))}}),(0,j.jsx)(b.Z,{selectLabel:g("promote_with_re_admission"),selectedValue:g("select_yes_or_no"),options:["Yes","No"],value:P.re_ads,onClick:function(e){E((function(t){return(0,c.Z)((0,c.Z)({},t),{},{re_ads:e})}))}}),(0,j.jsxs)("button",{className:i.Z.select_application_btn,onClick:function(){var e=function(e){var t={};for(var n in e)"students"===n||e[n]||(t[n]="".concat(n," is required!"));return t}(P),t=!1;for(var n in e){t=!0;break}t?A(e):I("SELECT_STUDENT")},style:{width:"100%"},title:"Select student",children:[(0,j.jsx)("div",{children:g("select_student")}),(0,j.jsx)("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]})]}),"SELECT_STUDENT"===C&&(0,j.jsx)(S,{classId:x,setPromoteData:E,promoteData:P,onClose:p,onRefetchParent:Z})]})})},C=function(e){var t,n,d,u=e.classId,v=e.promoteData,_=e.setPromoteData,p=e.onClose,g=e.onRefetchParent,S=(0,s.$G)().t,b=(0,l.useState)(!0),y=(0,o.Z)(b,2),C=y[0],I=y[1],w=(0,l.useState)([]),T=(0,o.Z)(w,2),P=T[0],E=T[1],L=(0,l.useState)(!1),k=(0,o.Z)(L,2),R=k[0],A=k[1],M=(0,l.useState)(!1),F=(0,o.Z)(M,2),O=F[0],D=F[1],U=(0,l.useState)(!1),B=(0,o.Z)(U,2),G=B[0],V=B[1],W=(0,a.V_)(),$=(0,o.Z)(W,1)[0],Y=(0,a.Rt)({cid:u,skip:!u}),q=Y.getPromoteStudentByPromote,H=Y.getPromoteStudentByPromoteRefetch;(0,l.useEffect)((function(){u&&(I(!0),H())}),[u,H]),(0,l.useEffect)((function(){var e,t;(null!==q&&void 0!==q&&q.promoteStudent||0===(null===q||void 0===q||null===(e=q.promoteStudent)||void 0===e?void 0:e.length))&&(E(null!==(t=null===q||void 0===q?void 0:q.promoteStudent)&&void 0!==t?t:[]),I(!1))}),[null===q||void 0===q?void 0:q.promoteStudent]);var K=function(e){var t;null!==v&&void 0!==v&&null!==(t=v.arr)&&void 0!==t&&t.includes(e)?_((function(t){var n;return(0,c.Z)((0,c.Z)({},t),{},{arr:null===(n=t.arr)||void 0===n?void 0:n.filter((function(t){return t!==e}))})})):_((function(t){return(0,c.Z)((0,c.Z)({},t),{},{arr:t.arr?[].concat((0,f.Z)(t.arr),[e]):[e]})}))};return(0,j.jsx)(j.Fragment,{children:O?(0,j.jsx)(N,{onClose:function(){return D(!1)},title:S("undo_select_student"),firstMessage:"".concat(S("undo")," "),spanMessage:null===v||void 0===v||null===(t=v.arr)||void 0===t?void 0:t.length,outerSpanMessage:"".concat(S("students")," , ").concat(S("to")," "),lastMessage:"".concat(S("previous_class")),buttonLabel:S("confirm"),onHandler:function(){D(!1),A((function(e){return!e})),$({cid:u,flow:"PARTICULAR_STUDENT",undoPromote:{arr:null===v||void 0===v?void 0:v.arr}}).then((function(){g(),p(),A((function(e){return!e}))})).catch({})},messageStyle:{marginTop:"3.7rem"},buttonStyle:{marginTop:"5.7rem"}}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:i.Z.select_header,children:[(0,j.jsxs)("h6",{children:[(null===v||void 0===v||null===(n=v.arr)||void 0===n?void 0:n.length)>0?"".concat(null===v||void 0===v||null===(d=v.arr)||void 0===d?void 0:d.length," "):"",S("select_student")]}),(0,j.jsxs)("div",{children:[G?(0,j.jsx)("button",{className:i.Z.select_all_btn,title:"Remove All Student",onClick:function(){_((function(e){return(0,c.Z)((0,c.Z)({},e),{},{arr:[]})})),V(!1)},style:{marginRight:"0.7rem"},children:S("remove_all")}):(0,j.jsx)("button",{className:i.Z.select_all_btn,title:"Select All Student",onClick:function(){var e,t=[],n=(0,h.Z)(P);try{for(n.s();!(e=n.n()).done;){var o=e.value;t.push(null===o||void 0===o?void 0:o._id)}}catch(l){n.e(l)}finally{n.f()}_((function(e){return(0,c.Z)((0,c.Z)({},e),{},{arr:t})})),V(!0)},style:{marginRight:"0.7rem"},children:S("select_all")}),(0,j.jsx)("button",{className:i.Z.promote_all_btn,title:"Undo Selected Student",onClick:function(){var e;return(null===v||void 0===v||null===(e=v.arr)||void 0===e?void 0:e.length)>0?D(!0):null},children:S("undo")})]})]}),(0,j.jsx)(m.Z,{customStyle:{width:"100%",marginTop:"0.5rem"}}),(0,j.jsx)("div",{className:i.Z.with_search,style:{marginTop:"1rem",width:"100%",border:"0.4px solid rgba(0, 0, 0, 0.15)",borderRadius:"6px",marginBottom:"0.3rem"},children:(0,j.jsxs)("div",{className:i.Z.search_container_input,style:{width:"100%"},children:[(0,j.jsx)("img",{className:i.Z.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),(0,j.jsx)("input",{type:"text",placeholder:"Search Student...",style:{width:"100%"},onChange:function(e){if(e.target.value){var t,n=null===q||void 0===q||null===(t=q.promoteStudent)||void 0===t?void 0:t.filter((function(t){var n,o,l;return null!==(n="".concat(null===t||void 0===t?void 0:t.studentFirstName," ").concat(null!==t&&void 0!==t&&t.studentMiddleName?(null===t||void 0===t?void 0:t.studentMiddleName)+" ":"").concat(null===t||void 0===t?void 0:t.studentLastName))&&void 0!==n&&null!==(o=n.toLowerCase())&&void 0!==o&&o.includes(null===(l=e.target.value)||void 0===l?void 0:l.toLowerCase())?t:null}));E(n)}else E(null===q||void 0===q?void 0:q.promoteStudent)}})]})}),null===P||void 0===P?void 0:P.map((function(e,t){return(0,j.jsx)(x,{promoteData:{students:null===v||void 0===v?void 0:v.arr},stu:e,onSelectStudent:K},t)})),C&&(0,j.jsx)(r.Z,{}),R&&(0,j.jsx)(Z.Z,{})]})})},I=function(e){var t=e.onClose,n=e.classId,d=e.onRefetchParent,r=(0,s.$G)().t,u=(0,l.useState)("INITIAL_STEP"),v=(0,o.Z)(u,2),h=v[0],f=v[1],p=(0,l.useState)({flow:"",arr:[]}),x=(0,o.Z)(p,2),g=x[0],N=x[1],S=(0,l.useState)(""),y=(0,o.Z)(S,2),I=y[0],w=y[1],T=(0,l.useState)(!1),P=(0,o.Z)(T,2),E=P[0],L=P[1],k=(0,a.V_)(),R=(0,o.Z)(k,1)[0];return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(_.Z,{onClose:"INITIAL_STEP"===h?t:function(){return f("INITIAL_STEP")},children:(0,j.jsxs)("div",{className:i.Z.promote_container,children:["INITIAL_STEP"===h&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h6",{style:{textAlign:"center"},children:r("promote_students")}),(0,j.jsx)(m.Z,{customStyle:{width:"100%"}}),(0,j.jsx)(b.Z,{selectLabel:r("undo_promote_student"),selectedValue:r("select_full_or_particular"),options:["Full Class","Particular Student"],value:g.flow,errorShow:I.flow,onClick:function(e){N((function(t){return(0,c.Z)((0,c.Z)({},t),{},{flow:e})}))}}),(0,j.jsx)("button",{className:i.Z.select_application_btn,onClick:function(){var e=function(e){var t={};for(var n in e)"students"===n||e[n]||(t[n]="".concat(n," is required!"));return t}(g),o=!1;for(var l in e){o=!0;break}o?w(e):"Full Class"===g.flow?(L((function(e){return!e})),R({cid:n,flow:"FULL_CLASS",undoPromote:{arr:[]}}).then((function(){d(),t(),L((function(e){return!e}))})).catch({})):"Particular Student"===g.flow&&f("SELECT_STUDENT")},style:{width:"100%",justifyContent:"center",marginTop:"4rem"},children:(0,j.jsx)("div",{children:r("Particular Student"===g.flow?"next":"confirm")})})]}),"SELECT_STUDENT"===h&&(0,j.jsx)(C,{classId:n,setPromoteData:N,promoteData:g,onClose:t,onRefetchParent:d}),E&&(0,j.jsx)(Z.Z,{})]})})})},w=function(e){var t=e.cid,n=e.onRefetch,d=(0,s.$G)().t,a=(0,l.useState)(!1),r=(0,o.Z)(a,2),c=r[0],u=r[1];return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("button",{className:i.Z.select_application_btn,onClick:function(e){e.stopPropagation(),u((function(e){return!e}))},title:"Undo Promote Studens",style:{width:"25%"},children:[(0,j.jsx)("div",{children:d("undo_student")}),(0,j.jsx)("img",{src:"/images/member_tab/admission/admission-undo-icon.svg",alt:"undo icon",style:{cursor:"pointer",width:"30px"}})]}),c&&(0,j.jsx)(I,{onClose:function(){return u(!1)},classId:t,onRefetchParent:n})]})},T=function(e){var t,n,c,u,v,m,_,h=e.classId,f=(0,s.$G)().t,p=(0,l.useState)(!0),x=(0,o.Z)(p,2),Z=x[0],g=x[1],N=(0,l.useState)(!1),S=(0,o.Z)(N,2),b=S[0],C=S[1],I=(0,a.Rt)({cid:h,skip:!h}),T=I.getPromoteStudentByPromote,P=I.getPromoteStudentByPromoteRefetch;(0,l.useEffect)((function(){h&&(g(!0),P())}),[h,P]),(0,l.useEffect)((function(){var e;(null!==T&&void 0!==T&&T.promoteStudent||0===(null===T||void 0===T||null===(e=T.promoteStudent)||void 0===e?void 0:e.length))&&g(!1)}),[null===T||void 0===T?void 0:T.promoteStudent]);var E=function(){C((function(e){return!e}))};return(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{className:i.Z.promote_undo_container,children:[(0,j.jsxs)("button",{className:i.Z.select_application_btn,onClick:E,children:[(0,j.jsx)("div",{children:f("promote_student")}),(0,j.jsx)("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]}),(0,j.jsx)(w,{cid:h,onRefetch:P})]}),(0,j.jsxs)("h6",{className:i.Z.total_student_count,children:[f("total_student")," ",null!==(t=null===T||void 0===T||null===(n=T.count)||void 0===n?void 0:n.totalCount)&&void 0!==t?t:0]}),(0,j.jsxs)("div",{className:i.Z.total_other_count_container,children:[(0,j.jsxs)("p",{children:[f("boys_promote"),null!==(c=null===T||void 0===T||null===(u=T.count)||void 0===u?void 0:u.boyCount)&&void 0!==c?c:0]}),(0,j.jsxs)("p",{children:[f("girl_promote"),null!==(v=null===T||void 0===T||null===(m=T.count)||void 0===m?void 0:m.girlCount)&&void 0!==v?v:0]})]}),null===T||void 0===T||null===(_=T.promoteStudent)||void 0===_?void 0:_.map((function(e){return(0,j.jsx)(d.Z,{stu:e,viewAs:"PROMOTE"},null===e||void 0===e?void 0:e._id)})),Z&&(0,j.jsx)(r.Z,{}),b&&(0,j.jsx)(y,{classId:h,onClose:E,onRefetchParent:P})]})}},74067:function(e,t,n){n(72791);var o=n(33148),l=n(39230),i=n(69721),s=n(16871),d=n(43504),a=n(80184);t.Z=function(e){var t,n,r,c,u,v,m,_=e.stu,h=e.viewAs,f=(0,l.$G)().t,p=(0,s.UO)();return(0,a.jsx)(d.rU,{to:"/q/".concat(p.username,"/student/profile"),state:{sid:null===_||void 0===_?void 0:_._id,viewAs:"SUBJECT_TEACHER"},children:(0,a.jsxs)("div",{className:o.Z.student_container,children:[(0,a.jsx)("img",{src:null!==_&&void 0!==_&&_.studentProfilePhoto?"".concat(i.yI,"/").concat(null===_||void 0===_?void 0:_.studentProfilePhoto):"/images/demo_users/user1.svg",loading:"lazy",alt:"avatar icon"}),(0,a.jsxs)("div",{className:o.Z.student_info_container,children:[(0,a.jsxs)("div",{className:o.Z.student_info_text,children:[(0,a.jsxs)("h6",{children:[null===_||void 0===_?void 0:_.studentFirstName," ",null!==_&&void 0!==_&&_.studentMiddleName?null===_||void 0===_?void 0:_.studentMiddleName:" "," ",null===_||void 0===_?void 0:_.studentLastName]}),"PROMOTE"===h?"":(0,a.jsxs)("p",{children:[null!==(t=null===_||void 0===_?void 0:_.studentGender)&&void 0!==t?t:""," "]})]}),(0,a.jsx)("div",{className:o.Z.student_info_text,children:"PROMOTE"===h?(0,a.jsxs)("p",{children:[f("classes"),": ","".concat(null!==(n=null===_||void 0===_||null===(r=_.studentClass)||void 0===r?void 0:r.className)&&void 0!==n?n:""," - ").concat(null!==(c=null===_||void 0===_||null===(u=_.studentClass)||void 0===u?void 0:u.classTitle)&&void 0!==c?c:"")]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:[f("roll_number")," ",null!==(v=null===_||void 0===_?void 0:_.studentROLLNO)&&void 0!==v?v:""]}),(0,a.jsxs)("p",{children:[f("gr_number"),null!==(m=null===_||void 0===_?void 0:_.studentGRNO)&&void 0!==m?m:""]})]})})]})]})})}}}]);
//# sourceMappingURL=4522.97fc1383.chunk.js.map