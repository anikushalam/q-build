"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[3387],{53387:function(e,t,a){a.r(t),a.d(t,{default:function(){return H}});var n=a(29439),s=a(72791),c="ViewProfile_studentForm__M4oPB",l="ViewProfile_imgcontainer__Ky3y2",i="ViewProfile_toprow__u8jwV",d="ViewProfile_textcontainer__9VYCS",o="ViewProfile_tabs__6RgI4",r="ViewProfile_tophead__zQPOG",u="ViewProfile_profile_head__rWzZC",v={studentMCQ:"Tabs_studentMCQ__N1mHE",mcqTop:"Tabs_mcqTop__1qx9V",mcqTopItem:"Tabs_mcqTopItem__pZxtQ",active:"Tabs_active__FHx1C"},f=a(80184);var h=function(e){var t=e.children,a=e.onclick,c=(0,s.useState)(!1),l=(0,n.Z)(c,2),i=l[0],d=l[1],o=(0,s.useState)({x:-1,y:-1}),r=(0,n.Z)(o,2),u=r[0],v=r[1];return(0,s.useEffect)((function(){-1!==u.x&&-1!==u.y?(d(!0),setTimeout((function(){return d(!1)}),1e3)):d(!1)}),[u]),(0,s.useEffect)((function(){i||v({x:-1,y:-1})}),[i]),(0,f.jsxs)("div",{className:"ripple_btn",onClick:function(e){v({x:e.clientX-e.target.offsetLeft,y:e.clientY-e.target.offsetTop}),a&&a(e)},children:[i?(0,f.jsx)("span",{className:"ripple"}):"",(0,f.jsx)("span",{className:"content",children:t})]})},m=a(39230);var x=function(e){var t=e.activeIndex,a=e.setActiveIndex,n=(0,m.$G)().t;return(0,f.jsxs)("div",{className:v.mcqTop,children:[(0,f.jsx)("div",{className:0===t?"".concat(v.mcqTopItem," ").concat(v.active):v.mcqTopItem,onClick:function(){return a(0)},children:(0,f.jsx)(h,{children:n("about")})}),(0,f.jsx)("div",{className:1===t?"".concat(v.mcqTopItem," ").concat(v.active," "):"".concat(v.mcqTopItem," ").concat(v.ripple),onClick:function(){return a(1)},children:(0,f.jsx)(h,{children:n("attendance")})}),(0,f.jsx)("div",{className:2===t?"".concat(v.mcqTopItem," ").concat(v.active):v.mcqTopItem,onClick:function(){return a(2)},children:(0,f.jsx)(h,{children:n("payroll")})})]})},j=a(37762),g=a(93433),_="StaffAttendence_staffAttendence__rWbTN",p="StaffAttendence_calendar__5OmhR",N="StaffAttendence_arrColors__A6T2A",y="StaffAttendence_colours__5XUKi",b="StaffAttendence_clr__fLwuH",S="StaffAttendence_absent__7fbMH",A="StaffAttendence_holiday__qdLD1",M="StaffAttendence_leave__qU7pf",F="StaffAttendence_percentage__y12l-",Z="StaffAttendence_presentcount__fC598",w="StaffAttendence_absentcount__OBD4I",C=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],I=["January","February","March","April","May","June","July","August","September","October","November","December"],T=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I,a=new Date,c="".concat(a.getDate(),"-").concat(a.getMonth()+1,"-").concat(a.getFullYear()),l=[1,2,3,4,5,6,0],i=(0,s.useState)(a),d=(0,n.Z)(i,2),o=d[0],r=d[1],u=new Date(o.getFullYear(),o.getMonth()+1,0),v=new Date(o.getFullYear(),o.getMonth(),0),f=u.getDate(),h=new Date(o.getFullYear(),o.getMonth(),1).getDay(),m=l.indexOf(h)+1,x=v.getDate()-l.indexOf(h)+1,j=1,_=1,p={},N=1;N<7;N++)for(var y=1;y<8;y++)p[N]||(p[N]=[]),1===N?y<m?(p[N]=[].concat((0,g.Z)(p[N]),[{classes:"in-prev-month",date:"".concat(x,"-").concat(0===o.getMonth()?12:o.getMonth(),"-").concat(0===o.getMonth()?o.getFullYear()-1:o.getFullYear()),value:x}]),x++):(p[N]=[].concat((0,g.Z)(p[N]),[{classes:"",date:"".concat(j,"-").concat(o.getMonth()+1,"-").concat(o.getFullYear()),value:j}]),j++):N>1&&j<f+1?(p[N]=[].concat((0,g.Z)(p[N]),[{classes:"",date:"".concat(j,"-").concat(o.getMonth()+1,"-").concat(o.getFullYear()),value:j}]),j++):(p[N]=[].concat((0,g.Z)(p[N]),[{classes:"in-next-month",date:"".concat(_,"-").concat(o.getMonth()+2===13?1:o.getMonth()+2,"-").concat(o.getMonth()+2===13?o.getFullYear()+1:o.getFullYear()),value:_}]),_++);return{daysShort:e,monthNames:t,todayFormatted:c,calendarRows:p,selectedDate:o,getPrevMonth:function(){r((function(e){return new Date(e.getFullYear(),e.getMonth()-1,1)}))},getNextMonth:function(){r((function(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}))}}},P=function(e){var t=e.presentArr,a=e.absentArr,n=e.holidayArr,c=e.leavesArr,l=T(),i=l.calendarRows,d=l.selectedDate,o=l.todayFormatted,r=l.daysShort,u=l.monthNames,v=l.getNextMonth,h=l.getPrevMonth,m=function(e){var t=e.split("-"),a=t[0]>9?t[0]:"0".concat(t[0]),n=t[1]>9?t[1]:"0".concat(t[1]),s=t[2];return"".concat(a,"/").concat(n,"/").concat(s)};return(0,f.jsxs)(s.Fragment,{children:[(0,f.jsxs)("div",{className:"calenderheader",children:[(0,f.jsx)("div",{className:"monthbtn",onClick:h,children:(0,f.jsx)("img",{alt:"not found",src:"/images/members/arrow-left.svg"})}),(0,f.jsxs)("div",{className:"yearmonth",children:[(0,f.jsx)("h6",{children:"".concat(u[d.getMonth()])}),(0,f.jsx)("p",{children:"".concat(d.getFullYear())})]}),(0,f.jsx)("div",{className:"monthbtn",onClick:v,children:(0,f.jsx)("img",{alt:"not found",src:"/images/members/arrow-right.svg"})})]}),(0,f.jsxs)("table",{className:"table",children:[(0,f.jsx)("thead",{children:(0,f.jsx)("tr",{children:r.map((function(e){return(0,f.jsx)("th",{className:"day",children:e},e)}))})}),(0,f.jsx)("tbody",{children:Object.values(i).map((function(e){return(0,f.jsx)("tr",{children:e.map((function(e){return e.date===o?null!==c&&void 0!==c&&c.includes(m(e.date))?(0,f.jsx)("td",{className:"".concat(e.classes," date "),children:(0,f.jsx)("div",{className:"datediv aaji leave",children:e.value})},e.date):null!==t&&void 0!==t&&t.includes(m(e.date))?(0,f.jsx)("td",{className:"".concat(e.classes," date "),children:(0,f.jsx)("div",{className:"datediv aaji",children:e.value})},e.date):null!==a&&void 0!==a&&a.includes(m(e.date))?(0,f.jsx)("td",{className:"".concat(e.classes," date "),children:(0,f.jsx)("div",{className:"datediv aaji absent",children:e.value})},e.date):null!==n&&void 0!==n&&n.includes(m(e.date))?(0,f.jsx)("td",{className:"".concat(e.classes," date "),children:(0,f.jsx)("div",{className:"datediv aaji holiday",children:e.value})},e.date):(0,f.jsx)("td",{className:"".concat(e.classes," date "),children:(0,f.jsx)("div",{className:"datediv aaji",children:e.value})},e.date):null!==t&&void 0!==t&&t.includes(m(e.date))?(0,f.jsx)("td",{className:"".concat(e.classes," date"),children:(0,f.jsx)("div",{className:"datediv present",children:e.value})},e.date):null!==a&&void 0!==a&&a.includes(m(e.date))?(0,f.jsx)("td",{className:"".concat(e.classes," date"),children:(0,f.jsx)("div",{className:"datediv absent",children:e.value})},e.date):null!==n&&void 0!==n&&n.includes(m(e.date))?(0,f.jsx)("td",{className:"".concat(e.classes," date"),children:(0,f.jsx)("div",{className:"datediv holiday",children:e.value})},e.date):null!==c&&void 0!==c&&c.includes(m(e.date))?(0,f.jsx)("td",{className:"".concat(e.classes," date"),children:(0,f.jsx)("div",{className:"datediv leave",children:e.value})},e.date):(0,f.jsx)("td",{className:"".concat(e.classes," date"),children:(0,f.jsx)("div",{className:"datediv",children:e.value})},e.date)}))},e[0].date)}))})]})]})},D=a(65313);var k=function(e){var t,a,c=e.sid,l=(new Date).toISOString().split("-"),i=+l[1]>9?+l[1]:"0".concat(+l[1]),d=s.useState("Month"),o=(0,n.Z)(d,2),r=o[0],u=o[1],v=(0,D.QW)({sid:c,month:"Month"===r?i:"",year:+l[0]}),h=v.staffCalenderAttendance,x=v.staffCalenderAttendanceRefetch,C=(0,m.$G)().t,I=s.useState([]),T=(0,n.Z)(I,2),k=T[0],q=T[1],Y=s.useState([]),O=(0,n.Z)(Y,2),L=O[0],R=O[1],V=s.useState([]),E=(0,n.Z)(V,2),U=E[0],W=E[1];s.useEffect((function(){if(h&&(q((0,g.Z)(null===h||void 0===h?void 0:h.presentArray)),R((0,g.Z)(null===h||void 0===h?void 0:h.absentArray)),null!==h&&void 0!==h&&h.leaves)){var e,t=[],a=(0,j.Z)(null===h||void 0===h?void 0:h.leaves);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push.apply(t,(0,g.Z)(n.date))}}catch(s){a.e(s)}finally{a.f()}W(t)}}),[h]),s.useEffect((function(){x()}),[r]);var Q=function(e){u(e)};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:_,children:[(0,f.jsxs)("div",{className:p,children:[(0,f.jsx)(P,{presentArr:k,absentArr:L,holidayArr:[],leavesArr:U}),(0,f.jsxs)("div",{className:N,children:[(0,f.jsx)("div",{className:"".concat(b," ").concat(S),children:C("absent")}),(0,f.jsx)("div",{className:"".concat(b," ").concat(A),children:C("holiday_")}),(0,f.jsx)("div",{className:"".concat(b," ").concat(M),children:"Leave"})]})]}),(0,f.jsxs)("div",{className:y,children:[(0,f.jsxs)("div",{class:"form-check",onClick:function(){return Q("Month")},children:["Month"===r?(0,f.jsx)("img",{src:"/images/radio-active.svg "}):(0,f.jsx)("img",{src:"/images/radio-disabled.svg"}),(0,f.jsx)("p",{children:C("monthly")})]}),(0,f.jsxs)("div",{class:"form-check",onClick:function(){return Q("Year")},children:["Year"===r?(0,f.jsx)("img",{src:"/images/radio-active.svg "}):(0,f.jsx)("img",{src:"/images/radio-disabled.svg"}),(0,f.jsx)("p",{children:C("yearly")})]})]})]}),(0,f.jsxs)("div",{className:F,children:[(0,f.jsxs)("div",{className:Z,children:[(0,f.jsx)("p",{children:C("present_count")}),(0,f.jsxs)("p",{children:[null===h||void 0===h||null===(t=h.presentArray)||void 0===t?void 0:t.length,C("days")]}),(0,f.jsxs)("p",{children:[null===h||void 0===h?void 0:h.present,"%"]})]}),(0,f.jsxs)("div",{className:w,children:[(0,f.jsx)("p",{children:C("absent_count")}),(0,f.jsxs)("p",{children:[null===h||void 0===h||null===(a=h.absentArray)||void 0===a?void 0:a.length,C("days")]}),(0,f.jsxs)("p",{children:[null===h||void 0===h?void 0:h.absent,"%"]})]})]})]})},q=a(81400),Y=a(91007),O=a(5574),L=a(33992),R=a(42108),V=a(98734),E=a(69721),U="StaffFormPhoto_photoMain__AThMr",W="StaffFormPhoto_photoLabel__gxtsv",Q=function(e){var t=e.sid,a=e.photoId,c=e.photoKey,l=(0,L.ar)(),i=(0,n.Z)(l,1)[0],d=(0,s.useState)(""),o=(0,n.Z)(d,2),r=o[0],u=o[1],v=(0,s.useState)(""),h=(0,n.Z)(v,2),m=h[0],x=h[1],j=(0,s.useState)(!1),g=(0,n.Z)(j,2),_=g[0],p=g[1],N=(0,s.useState)(!1),y=(0,n.Z)(N,2),b=y[0],S=y[1],A=(0,s.useState)(!1),M=(0,n.Z)(A,2),F=M[0],Z=M[1],w=(0,s.useState)(""),C=(0,n.Z)(w,2),I=C[0],T=C[1];(0,s.useEffect)((function(){if(b){Z((function(e){return!e}));var e=new FormData;e.append("file",m),i({profile:e,sid:t}).then((function(){Z((function(e){return!e}))})).catch({})}}),[b,m]);return(0,f.jsxs)("div",{className:U,children:[I?(0,f.jsx)("img",{src:I,alt:"profile is not uploaded",style:{width:"100%",height:"100%"}}):(0,f.jsx)("img",{src:"1"!==a?"".concat(E.yI,"/").concat(c):"/images/member_tab/class/default_avatar.svg",alt:"",style:{width:"100%",height:"100%"}}),(0,f.jsx)("label",{htmlFor:"photo",className:W,children:(0,f.jsx)("img",{alt:"not found",className:W,src:"/images/edit1-icon.svg"})}),(0,f.jsx)("input",{id:"photo",name:"file",onChange:function(e){var t=URL.createObjectURL(e.target.files[0]);x(e.target.files[0]),T(t),u(t),p(!0)},type:"file",style:{display:"none"},accept:"image/gif, image/jpeg, image/png",required:!0}),_&&(0,f.jsx)(O.Z,{open:_,children:(0,f.jsx)(R.Z,{setPhotoURL:u,photoURL:r,setFile:x,setOpenCrop:p,setUpload:S,setProfilePhoto:T,first:1,second:1})}),F&&(0,f.jsx)(V.Z,{})]})},B=a(60600),G=a(25773);var H=function(e){var t,a,v,h,j,g,_,p,N,y,b,S,A,M,F=e.staffData,Z=(0,m.$G)().t,w=(0,s.useState)(0),C=(0,n.Z)(w,2),I=C[0],T=C[1],P=(0,s.useState)(!1),D=(0,n.Z)(P,2),O=D[0],L=D[1],R=(0,Y.wB)(F,{skip:!F}),V=R.data,E=R.refetch;return(0,s.useEffect)((function(){F&&E()}),[F,E]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:c,children:[(0,f.jsx)("div",{className:u,children:(0,f.jsx)("div",{className:r,children:"Profile In Institute"})}),(0,f.jsxs)("div",{className:i,children:[(0,f.jsx)("div",{className:l,children:(0,f.jsx)(Q,{photoKey:null===V||void 0===V||null===(t=V.staff)||void 0===t?void 0:t.staffProfilePhoto,photoId:null===V||void 0===V||null===(a=V.staff)||void 0===a?void 0:a.photoId,sid:null===V||void 0===V||null===(v=V.staff)||void 0===v?void 0:v._id})}),(0,f.jsxs)("div",{className:d,children:[(0,f.jsxs)("h6",{children:[null===V||void 0===V||null===(h=V.staff)||void 0===h?void 0:h.staffFirstName," ",null!==V&&void 0!==V&&null!==(j=V.staff)&&void 0!==j&&j.staffMiddleName?null===V||void 0===V||null===(g=V.staff)||void 0===g?void 0:g.staffMiddleName:""," ",null===V||void 0===V||null===(_=V.staff)||void 0===_?void 0:_.staffLastName]}),(0,f.jsxs)("p",{children:[" ",Z("index_no"),". ",null===V||void 0===V||null===(p=V.staff)||void 0===p?void 0:p.staffROLLNO]}),(0,f.jsxs)("p",{children:[" ",Z("designations"),": ",null===V||void 0===V||null===(N=V.staff)||void 0===N?void 0:N.staffDesignationCount]}),(0,f.jsxs)("p",{children:[" ",Z("form_current_designation_label"),":"," ",null!==(y=null===V||void 0===V||null===(b=V.staff)||void 0===b?void 0:b.current_designation)&&void 0!==y?y:""]})]})]}),(0,f.jsx)("div",{className:o,children:(0,f.jsx)(x,{activeIndex:I,setActiveIndex:T})}),0===I&&(0,f.jsx)(B.Z,{staff:null===V||void 0===V?void 0:V.staff,viewAs:"STAFF_OWN"}),1===I&&(0,f.jsx)(k,{sid:null===V||void 0===V||null===(S=V.staff)||void 0===S?void 0:S._id}),2===I&&(0,f.jsx)(q.default,{sid:null===V||void 0===V||null===(A=V.staff)||void 0===A?void 0:A._id})]}),O&&(0,f.jsx)(G.Z,{createdBy:"OWN_PROFILE",staffId:null===V||void 0===V||null===(M=V.staff)||void 0===M?void 0:M._id,onRefetch:E,onClose:function(){L((function(e){return!e}))}})]})}}}]);
//# sourceMappingURL=3387.a6e89745.chunk.js.map