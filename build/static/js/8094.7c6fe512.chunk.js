(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[8094],{28094:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return F}});var i=t(29439),s=t(63687),l=t(39230),d=t(56959),o=t(90904),a=t(21348),r=t(98684),c=t(72791),u=t(43504),v=t(16871),_=t(98967),f=t(63162),m=t(23441),p=t(57588),h=t(91427),x=t(43317),j=t(55336),g=t(1669),y=t(2651),Z=t(3773),N=t(1095),M=t(80184),L=function(e){var n,t,i,s=e.student,d=(0,l.$G)().t,o=(0,v.UO)(),a=(0,v.s0)();return(0,M.jsxs)("div",{className:Z.Z.pending_fees_card,onClick:function(){a("/q/".concat(o.username,"/student/profile/admission"),{state:{sid:null===s||void 0===s?void 0:s._id,viewAs:"ADMISSION_ADMIN",openTab:"FEES_DATA"}})},title:"Refund student fees",children:[(0,M.jsxs)("div",{className:Z.Z.pending_fees_card_container,children:[(0,M.jsx)("img",{alt:"Student Avatar",src:null!==s&&void 0!==s&&s.studentProfilePhoto?"".concat(N.yI,"/").concat(null===s||void 0===s?void 0:s.studentProfilePhoto):"".concat(r.p3,"/feed-user-avatar.svg"),loading:"lazy"}),(0,M.jsxs)("div",{className:Z.Z.pending_fees_card_inner,children:[(0,M.jsx)("h6",{children:"".concat(null===s||void 0===s?void 0:s.studentFirstName," ").concat(null!==s&&void 0!==s&&s.studentMiddleName?null===s||void 0===s?void 0:s.studentMiddleName:""," ").concat(null===s||void 0===s?void 0:s.studentLastName)}),(0,M.jsxs)("p",{children:[d("gr_number")," : ",null!==(n=null===s||void 0===s?void 0:s.studentGRNO)&&void 0!==n?n:"",null!==s&&void 0!==s&&null!==(t=s.department)&&void 0!==t&&t.dName?", ".concat(null===s||void 0===s||null===(i=s.department)||void 0===i?void 0:i.dName):""]})]})]}),(0,M.jsxs)("div",{className:Z.Z.pending_fees_card_inner,children:[(0,M.jsxs)("h6",{children:[d("rs_only")," ",null===s||void 0===s?void 0:s.studentRemainingFeeCount]}),(0,M.jsx)("p",{children:d("excess_fees")})]})]})},R=function(e){var n,t,s,o=e.aid,a=e.totalRefund,u=(0,l.$G)().t,v=(0,c.useState)(""),_=(0,i.Z)(v,2),f=_[0],Z=_[1],N=(0,c.useState)(1),R=(0,i.Z)(N,2),w=R[0],S=R[1],b=(0,c.useState)(!0),Y=(0,i.Z)(b,2),T=Y[0],k=Y[1],D=(0,m.YD)({skip:f}),I=(0,i.Z)(D,2),E=I[0],F=I[1],A=(0,x.ye)({data:{aid:o,page:w,limit:10,search:f},skip:!o}),H=A.admissionExcessFeeNotRefundedList,C=A.admissionExcessFeeNotRefundedListLoading;(0,c.useEffect)((function(){F&&T&&S((function(e){return e+1}))}),[F,T]),(0,c.useEffect)((function(){var e;if(null!==H&&void 0!==H&&null!==(e=H.list)&&void 0!==e&&e.length){var n,t=(0,h.f)(null===H||void 0===H||null===(n=H.list)||void 0===n?void 0:n.length);k((function(){return t}))}}),[null===H||void 0===H?void 0:H.list]);var O=(0,c.useCallback)((0,p.J)((function(e){S((function(){return 1})),Z(e)}),1500),[]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:d.Z.fm_header_container,children:[(0,M.jsxs)("h6",{children:[u("total_refund_amount")," "," : "," ",u("rs_only")," ",null!==a&&void 0!==a?a:0]}),(0,M.jsx)("div",{className:d.Z.fm_search,children:(0,M.jsx)("section",{className:d.Z.fm_search_container,children:(0,M.jsxs)("div",{className:d.Z.fm_search_container_inner,children:[(0,M.jsx)("img",{className:d.Z.fm_search_icon,alt:"search icon",src:"".concat(r.dB,"/navbar-search.svg")}),(0,M.jsx)("input",{type:"text",placeholder:u("search"),onChange:function(e){e.target.value?O(e.target.value):(S((function(){return 1})),Z(""))}})]})})})]}),null===H||void 0===H||null===(n=H.list)||void 0===n?void 0:n.map((function(e,n){var t;return(null===H||void 0===H||null===(t=H.list)||void 0===t?void 0:t.length)===n+1?(0,M.jsx)("div",{ref:E,children:(0,M.jsx)(L,{student:e})},null===e||void 0===e?void 0:e._id):(0,M.jsx)(L,{student:e},null===e||void 0===e?void 0:e._id)})),C?f?(0,M.jsx)(j.Z,{}):(0,M.jsx)(g.Z,{}):f?0===(null===H||void 0===H||null===(t=H.list)||void 0===t?void 0:t.length)&&(0,M.jsx)(y.Z,{title:"No students fuond related this search."}):0===(null===H||void 0===H||null===(s=H.list)||void 0===s?void 0:s.length)&&(0,M.jsx)(y.Z,{title:"No students."})]})},w=t(76697),S=t(97892),b=t.n(S),Y=t(82824),T=t(6758),k=t(37782),D=function(e){var n=e.history,s=(0,c.useState)(""),l=(0,i.Z)(s,2),d=l[0],o=l[1],a=(0,c.useState)(!1),u=(0,i.Z)(a,2),v=u[0],_=u[1],f=(0,c.useState)(""),m=(0,i.Z)(f,2),p=m[0],h=m[1],x=(0,T.Nw)({rid:d,skip:!d}),g=x.financeReceipt,y=x.financeReceiptRefetch;(0,c.useEffect)((function(){d&&y()}),[d,y]),(0,c.useEffect)((function(){null!==g&&void 0!==g&&g.receipt&&null!==g&&void 0!==g&&g.all_remain&&h(g)}),[g]),(0,c.useEffect)((function(){if(p){var e,n=new Worker(new URL(t.p+t.u(4268),t.b));if("Hostel Application"===(null===p||void 0===p||null===(e=p.all_remain)||void 0===e?void 0:e.remaining_flow)){var i=(0,k.sp)(null===p||void 0===p?void 0:p.all_remain,null===p||void 0===p?void 0:p.receipt),s=i.institute,l=i.studentInfo,d=i.paymentReceiptInfo;n.postMessage({institute:s,studentInfo:l,paymentReceiptInfo:d,printReceiptType:"Refunded"===(null===d||void 0===d?void 0:d.transactonRefund)?"HOSTEL_REFUND":"HOSTEL"})}else{var o=(0,k.Hs)(null===p||void 0===p?void 0:p.all_remain,null===p||void 0===p?void 0:p.receipt),a=o.institute,r=o.studentInfo,c=o.paymentReceiptInfo;n.postMessage({institute:a,studentInfo:r,paymentReceiptInfo:c,printReceiptType:"Refunded"===(null===c||void 0===c?void 0:c.transactonRefund)?"ADMISSION_REFUND":"ADMISSION"})}n.onmessage=function(e){e&&(window.open(e.data,"_blank"),_((function(e){return!e})),h(""),n.terminate())}}}),[p]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("img",{src:"".concat(r.J7,"/receipt.svg"),alt:"receipt icon",title:"Download Fees Receipt",onClick:function(){var e;"Admission"===(null===n||void 0===n?void 0:n.payment_module_type)||"Admission Fees"===(null===n||void 0===n?void 0:n.payment_module_type)||"Hostel"===(null===n||void 0===n?void 0:n.payment_module_type)||"Hostel Fees"===(null===n||void 0===n?void 0:n.payment_module_type)?function(){var e,t,i;null!==n&&void 0!==n&&null!==(e=n.fee_receipt)&&void 0!==e&&e._id&&(_((function(e){return!e})),o(null===n||void 0===n||null===(t=n.fee_receipt)||void 0===t?void 0:t._id),d===(null===n||void 0===n||null===(i=n.fee_receipt)||void 0===i?void 0:i._id)&&h(g))}(null===n||void 0===n||null===(e=n.fee_receipt)||void 0===e||e._id):null===n||void 0===n||n.payment_module_type}}),v&&(0,M.jsx)(j.Z,{})]})},I=function(e){var n,t,i,s,d,o,a,r,c,u,v,_,f,m,p,h,x,j,g,y,Z,L,R,S,T,k,I=e.history,E=(0,l.$G)().t;return(0,M.jsxs)("div",{className:w.Z.sidebarheader,style:{gap:"1%"},title:"Income"===(null===I||void 0===I?void 0:I.payment_module_type)?"":"View Receipt",children:[(0,M.jsxs)("div",{className:w.Z.history_image_container,style:{width:"50%"},children:[null!==I&&void 0!==I&&null!==(n=I.student)&&void 0!==n&&n.studentProfilePhoto?(0,M.jsx)("img",{src:"".concat(N.yI,"/").concat(null===I||void 0===I||null===(t=I.student)||void 0===t?void 0:t.studentProfilePhoto),alt:"qr code",style:{width:"60px",height:"60px",borderRadius:"12px"}}):null,(0,M.jsxs)("div",{className:w.Z.text,children:[(0,M.jsx)("p",{className:w.Z.rcv,children:E("paid_to")}),(0,M.jsx)("h6",{children:null!==I&&void 0!==I&&I.student?"".concat(null!==(i=null===I||void 0===I||null===(s=I.student)||void 0===s?void 0:s.studentFirstName)&&void 0!==i?i:""," ").concat(null!==(d=null===I||void 0===I||null===(o=I.student)||void 0===o?void 0:o.studentMiddleName)&&void 0!==d?d:""," ").concat(null!==(a=null===I||void 0===I||null===(r=I.student)||void 0===r?void 0:r.studentLastName)&&void 0!==a?a:""):""}),(0,M.jsxs)("p",{className:w.Z.rcv,children:[E("gr_number")," ",null!==(c=null===I||void 0===I||null===(u=I.student)||void 0===u?void 0:u.studentGRNO)&&void 0!==c?c:""]}),(0,M.jsx)("p",{className:w.Z.rcv,children:null!==(v=null===I||void 0===I||null===(_=I.student)||void 0===_||null===(f=_.fee_structure)||void 0===f?void 0:f.unique_structure_name)&&void 0!==v?v:""})]})]}),(0,M.jsxs)("div",{className:w.Z.text,style:{width:"27%"},children:[(0,M.jsx)("p",{className:w.Z.rcv,style:{width:"100%"},children:E("transaction_id")}),(0,M.jsx)("h6",{style:{width:"100%",wordWrap:"break-word"},children:null!==I&&void 0!==I&&null!==(m=I.fee_receipt)&&void 0!==m&&m.fee_utr_reference?null===I||void 0===I||null===(p=I.fee_receipt)||void 0===p?void 0:p.fee_utr_reference:"N/A"}),(0,M.jsxs)("p",{className:w.Z.rcv,style:{width:"100%"},children:[b()(null===I||void 0===I||null===(h=I.fee_receipt)||void 0===h?void 0:h.created_at).format("DD MMM YYYY"),", ",(0,Y.J)(null===I||void 0===I||null===(x=I.fee_receipt)||void 0===x?void 0:x.created_at,"LT")]})]}),(0,M.jsxs)("div",{className:w.Z.text,style:{width:"20%"},children:[(0,M.jsxs)("p",{className:w.Z.rcv,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[E("invoice_no")," ",null!==(j=null===I||void 0===I||null===(g=I.fee_receipt)||void 0===g?void 0:g.invoice_count)&&void 0!==j?j:"N/A",(0,M.jsx)(D,{history:I})]}),(0,M.jsxs)("h6",{style:{width:"100%"},children:[E("rs_only")," ",null===I||void 0===I||null===(y=I.fee_receipt)||void 0===y?void 0:y.fee_payment_amount]}),(0,M.jsx)("p",{className:w.Z.rcv,style:{width:"100%"},children:"offline"===(null===(Z=I.payment_mode)||void 0===Z?void 0:Z.toLowerCase())?null!==I&&void 0!==I&&null!==(L=I.fee_receipt)&&void 0!==L&&L.fee_payment_mode?"".concat(null===I||void 0===I||null===(R=I.fee_receipt)||void 0===R?void 0:R.fee_payment_mode):"Offline - No Receipt":"online"===(null===(S=I.payment_mode)||void 0===S?void 0:S.toLowerCase())?null!==I&&void 0!==I&&null!==(T=I.fee_receipt)&&void 0!==T&&T.fee_payment_mode?"".concat(null===I||void 0===I||null===(k=I.fee_receipt)||void 0===k?void 0:k.fee_payment_mode):"Online - No Receipt":null===I||void 0===I?void 0:I.payment_mode})]})]})},E=function(e){var n,t,s,o=e.aid,a=(0,l.$G)().t,u=(0,c.useState)(""),v=(0,i.Z)(u,2),_=v[0],f=v[1],Z=(0,c.useState)(1),N=(0,i.Z)(Z,2),L=N[0],R=N[1],w=(0,c.useState)(!0),S=(0,i.Z)(w,2),b=S[0],Y=S[1],T=(0,m.YD)({skip:_}),k=(0,i.Z)(T,2),D=k[0],E=k[1],F=(0,x.oL)({data:{aid:o,page:L,limit:10,search:_},skip:!o}),A=F.admissionExcessFeeRefundedList,H=F.admissionExcessFeeRefundedListLoading;(0,c.useEffect)((function(){E&&b&&R((function(e){return e+1}))}),[E,b]),(0,c.useEffect)((function(){var e;if(null!==A&&void 0!==A&&null!==(e=A.list)&&void 0!==e&&e.length){var n,t=(0,h.f)(null===A||void 0===A||null===(n=A.list)||void 0===n?void 0:n.length);Y((function(){return t}))}}),[null===A||void 0===A?void 0:A.list]);var C=(0,c.useCallback)((0,p.J)((function(e){R((function(){return 1})),f(e)}),1500),[]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:d.Z.fm_header_container,children:[(0,M.jsxs)("h6",{children:[a("total_refund")," "," : "," ",a("rs_only")," 400 statics"]}),(0,M.jsx)("div",{className:d.Z.fm_search,children:(0,M.jsx)("section",{className:d.Z.fm_search_container,children:(0,M.jsxs)("div",{className:d.Z.fm_search_container_inner,children:[(0,M.jsx)("img",{className:d.Z.fm_search_icon,alt:"search icon",src:"".concat(r.dB,"/navbar-search.svg")}),(0,M.jsx)("input",{type:"text",placeholder:a("search"),onChange:function(e){e.target.value?C(e.target.value):(R((function(){return 1})),f(""))}})]})})})]}),null===A||void 0===A||null===(n=A.list)||void 0===n?void 0:n.map((function(e,n){var t;return(null===A||void 0===A||null===(t=A.list)||void 0===t?void 0:t.length)===n+1?(0,M.jsx)("div",{ref:D,children:(0,M.jsx)(I,{student:e})},null===e||void 0===e?void 0:e._id):(0,M.jsx)(I,{student:e},null===e||void 0===e?void 0:e._id)})),H?_?(0,M.jsx)(j.Z,{}):(0,M.jsx)(g.Z,{}):_?0===(null===A||void 0===A||null===(t=A.list)||void 0===t?void 0:t.length)&&(0,M.jsx)(y.Z,{title:"No students fuond related this search."}):0===(null===A||void 0===A||null===(s=A.list)||void 0===s?void 0:s.length)&&(0,M.jsx)(y.Z,{title:"No students."})]})},F=function(e){var n=e.totalRefund,t=e.aid,m=(0,l.$G)().t,p=(0,u.lr)(),h=(0,i.Z)(p,1)[0],g=(0,v.TH)(),y=(0,v.UO)(),Z=(0,v.s0)(),N=(0,c.useState)(!1),L=(0,i.Z)(N,2),w=L[0],S=L[1],b=(0,x.o5)(),Y=(0,i.Z)(b,1)[0],T=(0,x.Lg)(),k=(0,i.Z)(T,1)[0];return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(s.Z,{children:[(0,M.jsx)(a.Z,{children:(0,M.jsxs)("div",{className:d.Z.fm_header_container,children:[(0,M.jsx)("h6",{children:m("excess_fees_refund")}),(0,M.jsx)("div",{className:d.Z.fm_both_filter,children:(0,M.jsx)("div",{onClick:function(){t&&(S((function(e){return!e})),"refunded"===h.get("n")?k({aid:t}).then((function(){S((function(e){return!e})),Z("/q/".concat(y.username,"/member/staff/admission?type=export"),{state:g.state})})).catch({}):Y({aid:t}).then((function(){S((function(e){return!e})),Z("/q/".concat(y.username,"/member/staff/admission?type=export"),{state:g.state})})).catch({}))},className:d.Z.fm_both_filter_with_name,children:(0,M.jsx)("img",{src:"".concat(r.J7,"/export.svg"),alt:"filter icon",style:{width:"2rem",height:"2rem"},title:"Export In Excel"})})})]})}),(0,M.jsx)(o.Z,{}),(0,M.jsxs)(a.Z,{customStyle:{paddingTop:"0"},children:[(0,M.jsx)(_.Z,{children:A.map((function(e){return(0,M.jsx)(f.Z,{tab:e,isLink:!0,isActive:"excess_fee"===e.id&&!h.get("n")||h.get("n")===e.id,parentState:g.state,url:"/q/".concat(y.username,"/member/staff/admission?type=excess").concat(e.urlKey)},null===e||void 0===e?void 0:e.id)}))}),(0,M.jsx)(o.Z,{customStyleBorder:{marginTop:"0"}})]}),(0,M.jsx)(a.Z,{customStyle:{paddingTop:"0"},children:"refunded"===h.get("n")?(0,M.jsx)(E,{aid:t}):(0,M.jsx)(R,{aid:t,totalRefund:n})})]}),w&&(0,M.jsx)(j.Z,{})]})},A=[{label:"excess_fee",id:"excess_fee",urlKey:""},{label:"refunded",id:"refunded",urlKey:"&n=refunded"}]},82824:function(e,n,t){"use strict";t.d(n,{J:function(){return o}});var i=t(99893),s=t.n(i),l=t(97892),d=t.n(l),o=function(e,n){return d().extend(s()),d()(e).format(n)}},99893:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(n,t,i){var s=t.prototype,l=s.format;i.en.formats=e,s.format=function(n){void 0===n&&(n="YYYY-MM-DDTHH:mm:ssZ");var t=this.$locale().formats,i=function(n,t){return n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(n,i,s){var l=s&&s.toUpperCase();return i||t[s]||e[s]||t[l].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,n,t){return n||t.slice(1)}))}))}(n,void 0===t?{}:t);return l.call(this,i)}}}()},3773:function(e,n){"use strict";n.Z={pending_fees_card:"PendingFees_pending_fees_card__-fyKu",pending_fees_card_container:"PendingFees_pending_fees_card_container__HBWkK",pending_fees_card_inner:"PendingFees_pending_fees_card_inner__Zi+6O",statistics_balance:"PendingFees_statistics_balance__px4LZ"}},76697:function(e,n){"use strict";n.Z={settle_card:"TransactionHistory_settle_card__WjSwI",settle_card_container:"TransactionHistory_settle_card_container__EIw4W",settle_card_text:"TransactionHistory_settle_card_text__3j20S",settle_paragraph:"TransactionHistory_settle_paragraph__x3Ovt",sidebarheader:"TransactionHistory_sidebarheader__oEDm9",text:"TransactionHistory_text__yimnr",rcv:"TransactionHistory_rcv__kuGgZ",history_image_container:"TransactionHistory_history_image_container__ZBhq9"}}}]);
//# sourceMappingURL=8094.7c6fe512.chunk.js.map