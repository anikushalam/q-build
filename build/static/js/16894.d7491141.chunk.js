"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[16894],{16894:(e,n,t)=>{t.r(n),t.d(n,{default:()=>K});var l=t(63687),i=t(56959),o=t(16871),a=t(43504),s=t(72791),d=t(39230),r=t(23441),c=t(6758),u=t(91427),v=t(98684),m=t(2651),_=t(55336),h=t(1669),f=t(21348),x=t(90904),p=t(1095),j=t(9228),g=t(93638),y=t(38857),S=t(16925),b=t(61055),Z=t(60924),C=t(43997),I=t(50518),k=t(99183),N=t(60307),F=t(71439),O=t(64499),R=t(85794),T=t(97892),A=t.n(T),L=t(80184);const E=e=>{var n,t,l;let{onClose:i,financeId:a,onRefetch:r,otherFeesId:u,student:m,instituteId:h,isNonExisting:p}=e;const{t:j}=(0,d.$G)(),[T,E]=(0,s.useState)(!1),D=(0,o.UO)(),[P,q]=(0,s.useState)({amount:"",mode:"",fee_payment_mode:"",fee_payment_amount:"",transaction_date:A()().format("DD/MM/YYYY"),fee_bank_name:"",fee_bank_holder:"",fee_utr_reference:""}),[w,M]=(0,s.useState)(""),[Y,G]=(0,s.useState)({open:!1,msg:"",variant:"error"}),[H,J]=(0,s.useState)({amount:0,type:"Other",isTransaction:!1}),{studentInstituteCharges:U}=(0,N.xY)({data:{id:h},skip:!h}),[B]=(0,c.iJ)();(0,s.useEffect)((()=>{var e,n;null!==m&&void 0!==m&&null!==(e=m.other_fees_obj)&&void 0!==e&&e.price&&(q((e=>{var n,t;return{...e,amount:+(null===m||void 0===m||null===(n=m.other_fees_obj)||void 0===n?void 0:n.price),fee_payment_amount:+(null===m||void 0===m||null===(t=m.other_fees_obj)||void 0===t?void 0:t.price)}})),J({amount:+(null===m||void 0===m||null===(n=m.other_fees_obj)||void 0===n?void 0:n.price),type:"Other",isTransaction:!1}))}),[m]);const W=e=>{q((n=>({...n,[e.target.name]:e.target.value})))};return(0,L.jsxs)(L.Fragment,{children:[H.isTransaction?(0,L.jsx)(F.Z,{onClose:i,allContent:{...H,platform_charges:null===U||void 0===U||null===(n=U.platform_charges)||void 0===n?void 0:n.percentage},checkoutAdmissionHandler:()=>{var e,n,t,l,i,o,a,s,d,r,c;let v=2.1*+(null===H||void 0===H?void 0:H.amount)/100,_=v+18*+v/100;const f=parseInt(null===H||void 0===H?void 0:H.amount);var x=Math.ceil(f+ +_.toFixed(2));(0,O.oU)({amount:null!==(e=+(null===P||void 0===P?void 0:P.amount))&&void 0!==e?e:10,amount_nocharges:null!==(n=+x)&&void 0!==n?n:0,type:"Other",paidBy:null===m||void 0===m?void 0:m._id,paidTo:h,moduleId:u,ad_status_id:null,payment_installment:null,ad_install:null,month:null,payment_remain_1:null,payment_card_type:null,payment_book_id:null,name:D.username,isApk:"web",payment_card_id:null,payment_remain_fees:null,charge:{num_platform_percent:null!==(t=null===U||void 0===U||null===(l=U.platform_charges)||void 0===l?void 0:l.percentage)&&void 0!==t?t:0,num_platform_max:null!==(i=null===U||void 0===U||null===(o=U.platform_charges)||void 0===o?void 0:o.maximum)&&void 0!==i?i:0,num_trans_pecent:null!==(a=null===U||void 0===U||null===(s=U.transaction_charges)||void 0===s?void 0:s.percentage)&&void 0!==a?a:0,num_trans_max:null!==(d=null===U||void 0===U||null===(r=U.transaction_charges)||void 0===r?void 0:r.maximum)&&void 0!==d?d:0,num_app_max:null!==(c=null===U||void 0===U?void 0:U.application_charges)&&void 0!==c?c:0},nsid:null}).then((e=>{var n,t;window.onScriptLoad(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.body)||void 0===t?void 0:t.txnToken,null===e||void 0===e?void 0:e.order,null===e||void 0===e?void 0:e.amount)})).catch((e=>{console.info(e)}))},isOptimzed:!0}):(0,L.jsx)(y.Z,{onClose:i,children:(0,L.jsxs)("div",{className:S.Z.modal_container,children:[(0,L.jsx)(f.default,{children:(0,L.jsxs)("div",{className:S.Z.modal_container_outer_header,children:[(0,L.jsx)("div",{className:S.Z.modal_container_header,children:(0,L.jsx)("h6",{children:j("collect_fees")})}),(0,L.jsx)("img",{src:"".concat(v.J7,"/close.svg"),alt:"close icon",onClick:i})]})}),(0,L.jsx)(x.Z,{}),(0,L.jsxs)(f.default,{customStyle:{paddingTop:"0"},children:[(0,L.jsxs)("div",{className:S.Z.admission_fees_row,children:[(0,L.jsxs)("h6",{children:[j("applicable_amount")," :"]}),(0,L.jsxs)("h6",{children:[j("rs_only")," ",null!==(t=null===m||void 0===m||null===(l=m.other_fees_obj)||void 0===l?void 0:l.price)&&void 0!==t?t:0]})]}),(0,L.jsx)(b.Z,{label:j("amount"),placeholder:j("amoute_details_collect"),name:"amount",value:P.amount,type:"tel",onChange:e=>{q((n=>({...n,amount:+e.target.value,fee_payment_amount:+e.target.value}))),J((n=>({...n,amount:+e.target.value})))},errorShow:w.amount,msg:w.rest_issue}),(0,L.jsx)(I.Z,{paymentHeading:j("payment_type_mode"),selectLabel:j("mode_placeholder"),onClick:e=>{q((n=>({...n,mode:"Online",fee_payment_mode:e})))},errorShow:w.fee_payment_mode,defalutValue:P.fee_payment_mode,selectedValue:j("please_select_payment_mode"),isAuthority:p?"admissionCollectMode":"admissionCollectModePg",customLabelStyle:{marginTop:"0"}}),"Payment Gateway"===P.fee_payment_mode?(0,L.jsx)(g.Z,{label:"collect",onAction:()=>{let e=(0,k.l)({amount:H.amount});(0,k.x)(e)?null!==U&&void 0!==U&&U.institute?a&&u&&null!==m&&void 0!==m&&m._id&&!p&&J((e=>({...e,isTransaction:!0}))):G({open:!0,msg:"Online Payment Not Activated",variant:"error"}):M(e)}}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Z.Z,{label:j("select_date_of_transaction"),placeholder:j("please_select_date"),name:"transaction_date",value:P.transaction_date,onChange:e=>{q((n=>({...n,transaction_date:(0,C.jh)(e)})))},errorShow:w.transaction_date}),"Cash"===P.fee_payment_mode?null:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(b.Z,{label:j("bank_name_collect"),placeholder:j("please_enter_bank_name"),name:"fee_bank_name",value:P.fee_bank_name,type:"text",onChange:W}),(0,L.jsx)(b.Z,{label:j("banke_holder_name"),placeholder:j("please_enter_name_of_bank_holder"),name:"fee_bank_holder",value:P.fee_bank_holder,type:"text",onChange:W}),(0,L.jsx)(b.Z,{label:j("cheque_dd_neft"),placeholder:j("please_enter_utr_ref_number"),name:"fee_utr_reference",value:P.fee_utr_reference,type:"text",onChange:W})]}),(0,L.jsx)(g.Z,{label:"collect",onAction:()=>{let e=(0,k.l)(P,["mode","fee_payment_amount","fee_bank_name","fee_bank_holder","fee_utr_reference"]);var n,t,l,o,s,d,c;(0,k.x)(e)&&null!==m&&void 0!==m&&m._id&&u?(E((e=>!e)),B({fid:a,bodyParameter:{ofid:u,sid:null===m||void 0===m?void 0:m._id,amount:null!==(n=null===P||void 0===P?void 0:P.amount)&&void 0!==n?n:0,mode:"Cash"===(null===P||void 0===P?void 0:P.fee_payment_mode)?"Offline":null!==(t=null===P||void 0===P?void 0:P.mode)&&void 0!==t?t:"",fee_payment_mode:"Cash"===(null===P||void 0===P?void 0:P.fee_payment_mode)?"By Cash":null===P||void 0===P?void 0:P.fee_payment_mode,fee_payment_amount:null!==(l=null===P||void 0===P?void 0:P.fee_payment_amount)&&void 0!==l?l:0,transaction_date:null!==(o=(0,C._1)(P.transaction_date))&&void 0!==o?o:"",fee_bank_name:null!==(s=null===P||void 0===P?void 0:P.fee_bank_name)&&void 0!==s?s:"",fee_bank_holder:null!==(d=null===P||void 0===P?void 0:P.fee_bank_holder)&&void 0!==d?d:"",fee_utr_reference:null!==(c=null===P||void 0===P?void 0:P.fee_utr_reference)&&void 0!==c?c:""}}).then((()=>{r(),E((e=>!e)),i()})).catch({})):M(e)}})]})]})]})}),T&&(0,L.jsx)(_.default,{}),(0,L.jsx)(R.Z,{eventState:Y,eventStateHandler:G})]})};var D=t(89064);const P=e=>{let{ofid:n,onClose:t,menuData:l,onRefetch:i,feeReceiptId:o,isFee:a}=e;const{t:r}=(0,d.$G)(),[u,m]=(0,s.useState)(!1),[_,h]=(0,s.useState)({open:!1,msg:"",variant:"error"}),[p,j]=(0,s.useState)(""),[Z,C]=(0,s.useState)({query:""}),[I,N]=(0,s.useState)(!1),[F]=(0,c.M0)(),[O]=(0,c.dM)();return(0,L.jsxs)(L.Fragment,{children:[I?(0,L.jsx)(y.Z,{onClose:()=>N(!1),children:(0,L.jsxs)("div",{className:S.Z.modal_container,children:[(0,L.jsx)(f.default,{children:(0,L.jsxs)("div",{className:S.Z.modal_container_outer_header,children:[(0,L.jsx)("div",{className:S.Z.modal_container_header,children:(0,L.jsx)("h6",{children:r("are_your_sure_to_delete_fee_receipt")})}),(0,L.jsx)("img",{src:"".concat(v.J7,"/close.svg"),alt:"close icon",onClick:()=>N(!1)})]})}),(0,L.jsx)(x.Z,{}),(0,L.jsxs)(f.default,{customStyle:{paddingTop:"0"},children:[(0,L.jsx)(b.Z,{label:r("type_confirm_to_continue"),placeholder:r("type_confirm_to_continue"),name:"query",value:Z.query,type:"text",onChange:e=>{C((n=>({...n,[e.target.name]:e.target.value})))},errorShow:p.query}),(0,L.jsx)(g.Z,{label:"confirm",onAction:()=>{let e=(0,k.l)(Z);(0,k.x)(e)?"Confirm"===Z.query&&o&&n&&(N(!1),m((e=>!e)),O({fid:o,ofid:n}).then((e=>{i(),m((e=>!e)),t()})).catch({})):j(e)}})]})]})}):(0,L.jsx)(D.Z,{onClose:t,disabled:u,children:a?(0,L.jsx)("h6",{onClick:()=>N(!0),children:r("delete")}):(0,L.jsx)("h6",{onClick:()=>{null!==l&&void 0!==l&&l._id&&n&&(m((e=>!e)),F({ofid:n,bodyParameter:{students:[null===l||void 0===l?void 0:l._id]}}).then((e=>{h({open:!0,msg:"Time out of request...",variant:"error"}),i(),m((e=>!e)),t()})).catch({}))},children:r("remove")})}),(0,L.jsx)(R.Z,{eventState:_,eventStateHandler:h})]})},q=e=>{var n,t,l,i,o,a,r,c,u,m,_,h;let{student:f,financeId:x,onRefetch:y,otherFeesId:S,instituteId:b,ofid:Z}=e;const{t:C}=(0,d.$G)(),[I,k]=(0,s.useState)(""),N=()=>{k("")};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:j.Z.iadcc_card_hover,children:[(0,L.jsxs)("div",{className:j.Z.sf_card_contatiner,children:[(0,L.jsx)("img",{src:null!==f&&void 0!==f&&f.studentProfilePhoto?"".concat(p.yI,"/").concat(f.studentProfilePhoto):"".concat(v.p3,"/feed-user-avatar.svg"),loading:"lazy",alt:"avatar",style:{width:"2.5rem",height:"2.5rem"}}),(0,L.jsxs)("div",{className:j.Z.sf_card_contatiner_inner,children:[(0,L.jsx)("h6",{children:"".concat(null!==(n=null===f||void 0===f?void 0:f.studentFirstName)&&void 0!==n?n:""," ").concat(null!==(t=null===f||void 0===f?void 0:f.studentMiddleName)&&void 0!==t?t:""," ").concat(null!==(l=null===f||void 0===f?void 0:f.studentLastName)&&void 0!==l?l:"")}),(0,L.jsxs)("p",{children:[C("gr_number")," ",": ",null!==(i=null===f||void 0===f?void 0:f.studentGRNO)&&void 0!==i?i:""]})]})]}),"Paid"===(null===f||void 0===f||null===(o=f.other_fees_obj)||void 0===o?void 0:o.status)?(0,L.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[(0,L.jsxs)("div",{className:j.Z.sf_card_contatiner_inner,children:[(0,L.jsxs)("h6",{children:["Rs. ",null!==(a=null===f||void 0===f||null===(r=f.other_fees_obj)||void 0===r?void 0:r.price)&&void 0!==a?a:0]}),(0,L.jsx)("p",{children:C("amount")})]}),(0,L.jsx)("div",{className:j.Z.sf_card_contatiner_inner,children:null!==f&&void 0!==f&&null!==(c=f.other_fees_obj)&&void 0!==c&&c.receipt_file?(0,L.jsx)("a",{href:"".concat(p.q2,"/").concat(null===f||void 0===f||null===(u=f.other_fees_obj)||void 0===u?void 0:u.receipt_file),target:"_blank",rel:"noopener noreferrer",children:(0,L.jsx)("img",{src:"".concat(v.J7,"/receipt.svg"),alt:"receipt icon",style:{height:"1.5rem"}})}):null}),(0,L.jsx)("img",{src:"".concat(v.J7,"/menu.svg"),alt:"menu icon",onClick:()=>k(3)})]}):(0,L.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[(0,L.jsxs)("div",{className:j.Z.sf_card_contatiner_inner,children:[(0,L.jsxs)("h6",{children:["Rs. ",null!==(m=null===f||void 0===f||null===(_=f.other_fees_obj)||void 0===_?void 0:_.price)&&void 0!==m?m:0]}),(0,L.jsx)("p",{children:C("amount")})]}),(0,L.jsx)(g.Z,{label:"collect_fees",onAction:()=>{k(1)},customStyle:{margin:"0",padding:"0.4rem 1rem"}}),(0,L.jsx)("img",{src:"".concat(v.J7,"/menu.svg"),alt:"menu icon",onClick:e=>{k(2)}})]})]}),1===I?(0,L.jsx)(E,{financeId:x,onClose:N,onRefetch:y,student:f,otherFeesId:S,instituteId:b}):2===I?(0,L.jsx)(P,{onClose:N,onRefetch:y,menuData:f,ofid:Z}):3===I?(0,L.jsx)(P,{onClose:N,onRefetch:y,menuData:f,ofid:Z,feeReceiptId:null===f||void 0===f||null===(h=f.other_fees_obj)||void 0===h?void 0:h.fee_receipt,isFee:!0}):null]})};var w=t(43172),M=t(13182),Y=t(73711);const G=e=>{var n,t,l,a,p,j;let{ofid:y,instituteId:S,financeId:b,isCashierAccess:Z,collectStaffId:C}=e;const{t:I}=(0,d.$G)(),k=(0,o.TH)(),[N,F]=((0,o.UO)(),(0,o.s0)(),(0,s.useState)("")),[O,T]=(0,s.useState)(""),[A,E]=(0,s.useState)(1),[D,P]=(0,s.useState)(!0),[G,H]=(0,r.YD)({skip:N}),[J,U]=(0,s.useState)(""),[B,W]=(0,s.useState)([]),[$,K]=(0,s.useState)(null),[z,V]=(0,s.useState)(!1),[Q,X]=(0,s.useState)({open:!1,msg:"",variant:"error"}),[ee]=(0,c.YC)(),[ne]=(0,c.VF)(),[te]=(0,c.zY)(),{financeOneOtherFeesStudentList:le,financeOneOtherFeesStudentListLoading:ie,financeOneOtherFeesStudentListRefetch:oe}=(0,c.Jo)({data:{ofid:y,page:A,limit:10,search:N,type:""},skip:!y});(0,s.useEffect)((()=>{H&&D&&E((e=>e+1))}),[H,D]),(0,s.useEffect)((()=>{var e;if(null!==le&&void 0!==le&&null!==(e=le.list)&&void 0!==e&&e.length){var n;let e=(0,u.f)(null===le||void 0===le||null===(n=le.list)||void 0===n?void 0:n.length);P((()=>e))}}),[null===le||void 0===le||null===(n=le.list)||void 0===n?void 0:n.length]);const ae=(0,s.useCallback)((()=>{E((()=>1)),oe()}),[]),se=()=>{U("")};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(f.default,{children:(0,L.jsxs)("div",{className:i.Z.fm_search_full,children:[(0,L.jsx)("section",{className:i.Z.fm_search_full_container,children:(0,L.jsxs)("div",{className:i.Z.fm_search_full_container_inner,children:[(0,L.jsx)("img",{className:i.Z.fm_search_full_icon,alt:"search icon",src:"".concat(v.dB,"/navbar-search.svg")}),(0,L.jsx)("input",{type:"text",placeholder:I("search"),onChange:e=>{var n;!ie&&(null===le||void 0===le||null===(n=le.list)||void 0===n?void 0:n.length)>=0&&T(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&(E((()=>1)),F(O))},value:O})]})}),(0,L.jsx)(g.Z,{label:"add_single_student",customStyle:{paddingBlock:"0.4rem",margin:"0",minWidth:"fit-content"},onAction:()=>{"ALLOW"===Z?U(2):X({msg:"You are not Cashier Manager",open:!0,variant:"error"})}}),(0,L.jsx)(g.Z,{label:"add_student",customStyle:{paddingBlock:"0.4rem",margin:"0",minWidth:"fit-content"},onAction:()=>{U(1)}})]})}),(0,L.jsx)(x.Z,{}),(0,L.jsxs)(f.default,{customStyle:{paddingTop:"0"},children:[null===le||void 0===le||null===(t=le.list)||void 0===t?void 0:t.map(((e,n)=>{var t;return(null===le||void 0===le||null===(t=le.list)||void 0===t?void 0:t.length)===n+1?(0,L.jsx)("div",{ref:G,children:(0,L.jsx)(q,{student:e,financeId:b,instituteId:S,otherFeesId:y,onRefetch:ae,ofid:y})},null===e||void 0===e?void 0:e._id):(0,L.jsx)(q,{student:e,financeId:b,instituteId:S,otherFeesId:y,onRefetch:ae,ofid:y},null===e||void 0===e?void 0:e._id)})),ie?N?(0,L.jsx)(_.default,{}):(0,L.jsx)(L.Fragment,{children:1===A?(0,L.jsx)(_.default,{}):(0,L.jsx)(h.Z,{})}):N?0===(null===le||void 0===le||null===(l=le.list)||void 0===l?void 0:l.length)&&(0,L.jsx)(m.Z,{title:"No student found related this search.",customStyleContainer:{marginTop:"1.5rem"}}):0===(null===le||void 0===le||null===(a=le.list)||void 0===a?void 0:a.length)&&(0,L.jsx)(m.Z,{title:"No student.",customStyleContainer:{marginTop:"1.5rem"}})]}),1===J?(0,L.jsx)(w.Z,{title:I("select_student"),onClose:se,instituteId:S,isMultiSelect:!0,onMultiSelect:e=>{null!==B&&void 0!==B&&B.includes(null===e||void 0===e?void 0:e._id)?W((n=>null===n||void 0===n?void 0:n.filter((n=>n!==(null===e||void 0===e?void 0:e._id))))):W((n=>[...n,null===e||void 0===e?void 0:e._id]))},onDone:()=>{b&&(null===B||void 0===B?void 0:B.length)>0&&y&&(V((e=>!e)),ee({fid:b,bodyParameter:{students:B,ofid:y}}).then((()=>{ae(),V((e=>!e)),se()})).catch({}))},selectList:B,buttonTitle:"add",isSearchOnly:!0}):2===J?(0,L.jsx)(w.Z,{title:I("select_student"),onClose:se,instituteId:S,onSelectStudent:e=>{K(e),U(3)},selectedId:null===$||void 0===$?void 0:$._id,isSearchOnly:!0}):3===J?(0,L.jsx)(M.Z,{onClose:se,onParentClose:()=>{},instituteId:S,onGrabCollectFees:e=>{b&&null!==$&&void 0!==$&&$._id&&y&&(V((e=>!e)),te({fid:b,bodyParameter:{students:[null===$||void 0===$?void 0:$._id],ofid:y,...e,staff_id:null!==C&&void 0!==C?C:""}}).then((e=>{U(4),V((e=>!e))})).catch({}))},singleStudent:$,isOtherFees:"OTHER_FEES",applicant:{head:null===(p=k.state)||void 0===p||null===(j=p.otherData)||void 0===j?void 0:j.payable_amount},ofid:y,financeId:b}):4===J?(0,L.jsx)(Y.Z,{applicant:$,onClose:()=>{ae(),K(null),se()},ofid:y}):null,z&&(0,L.jsx)(_.default,{}),(0,L.jsx)(R.Z,{eventState:Q,eventStateHandler:X})]})};var H=t(98967),J=t(63162);const U=e=>{let{ofid:n,onClose:t,menuData:l,onRefetch:i}=e;const{t:o}=(0,d.$G)(),[a,r]=(0,s.useState)(!1),[u]=(0,c.M0)();return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(D.Z,{onClose:t,disabled:a,children:(0,L.jsx)("h6",{onClick:()=>{null!==l&&void 0!==l&&l._id&&n&&(r((e=>!e)),u({ofid:n,bodyParameter:{students:[]}}).then((()=>{i(),r((e=>!e)),t()})).catch({}))},children:o("remove")})})})},B=e=>{var n,t,l,i,o,a,r,c;let{student:u,financeId:m,onRefetch:_,otherFeesId:h,instituteId:f,ofid:x}=e;const{t:g}=(0,d.$G)(),[y,S]=(0,s.useState)(""),b=()=>{S("")};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:j.Z.iadcc_card_hover,children:[(0,L.jsxs)("div",{className:j.Z.sf_card_contatiner,children:[(0,L.jsx)("img",{src:"".concat(v.p3,"/feed-user-avatar.svg"),loading:"lazy",alt:"avatar",style:{width:"2.5rem",height:"2.5rem"}}),(0,L.jsxs)("div",{className:j.Z.sf_card_contatiner_inner,children:[(0,L.jsx)("h6",{children:null!==(n=null===u||void 0===u?void 0:u.student)&&void 0!==n?n:""}),(0,L.jsxs)("p",{children:[g("batch")," ",": ",null!==(t=null===u||void 0===u?void 0:u.batch)&&void 0!==t?t:"",", ",g("student_class"),": ",null===u||void 0===u?void 0:u.classes,", ",g("roll_number")," ",": ",null!==(l=null===u||void 0===u?void 0:u.roll_no)&&void 0!==l?l:""]})]})]}),(0,L.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[(0,L.jsxs)("div",{className:j.Z.sf_card_contatiner_inner,children:[(0,L.jsxs)("h6",{children:["Rs. ",null!==(i=null===u||void 0===u||null===(o=u.fee_receipt)||void 0===o?void 0:o.fee_payment_amount)&&void 0!==i?i:0]}),(0,L.jsx)("p",{children:g("amount")})]}),null!==u&&void 0!==u&&null!==(a=u.fee_receipt)&&void 0!==a&&a.receipt_file?(0,L.jsx)("div",{className:j.Z.sf_card_contatiner_inner,children:(0,L.jsx)("a",{href:"".concat(p.q2,"/").concat(null===u||void 0===u||null===(r=u.fee_receipt)||void 0===r?void 0:r.receipt_file),target:"_blank",rel:"noopener noreferrer",children:(0,L.jsx)("img",{src:"".concat(v.J7,"/receipt.svg"),alt:"receipt icon",style:{height:"1.5rem"}})})}):null,(0,L.jsx)("img",{src:"".concat(v.J7,"/menu.svg"),alt:"menu icon",onClick:()=>S(3)})]})]}),1===y?(0,L.jsx)(E,{financeId:m,onClose:b,onRefetch:_,student:u,otherFeesId:h,instituteId:f}):2===y?(0,L.jsx)(U,{onClose:b,onRefetch:_,menuData:u,ofid:x}):3===y?(0,L.jsx)(P,{onClose:b,onRefetch:_,menuData:u,ofid:x,feeReceiptId:null===u||void 0===u||null===(c=u.fee_receipt)||void 0===c?void 0:c._id,isFee:!0}):null]})};var W=t(27976);const $=e=>{var n,t,l,a,p,j;let{ofid:y,instituteId:S,financeId:b,isCashierAccess:Z,collectStaffId:C}=e;const{t:I}=(0,d.$G)(),k=(0,o.TH)(),[N,F]=((0,o.UO)(),(0,o.s0)(),(0,s.useState)("")),[O,T]=(0,s.useState)(""),[A,E]=(0,s.useState)(1),[D,P]=(0,s.useState)(!0),[q,w]=(0,r.YD)({skip:N}),[Y,G]=(0,s.useState)(""),[H,J]=(0,s.useState)(null),[U,$]=(0,s.useState)(!1),[K,z]=(0,s.useState)({open:!1,msg:"",variant:"error"}),[V]=(0,c.UG)(),[Q]=(0,c.UX)(),{financeOtherFeesNonExistingStudentList:X,financeOtherFeesNonExistingStudentListLoading:ee,financeOtherFeesNonExistingStudentListRefetch:ne}=(0,c.vQ)({data:{ofid:y,page:A,limit:10,search:N,type:""},skip:!y});(0,s.useEffect)((()=>{w&&D&&E((e=>e+1))}),[w,D]),(0,s.useEffect)((()=>{var e;if(null!==X&&void 0!==X&&null!==(e=X.list)&&void 0!==e&&e.length){var n;let e=(0,u.f)(null===X||void 0===X||null===(n=X.list)||void 0===n?void 0:n.length);P((()=>e))}}),[null===X||void 0===X||null===(n=X.list)||void 0===n?void 0:n.length]);const te=(0,s.useCallback)((()=>{E((()=>1)),ne()}),[]),le=()=>{G("")};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(f.default,{children:(0,L.jsxs)("div",{className:i.Z.fm_search_full,children:[(0,L.jsx)("section",{className:i.Z.fm_search_full_container,children:(0,L.jsxs)("div",{className:i.Z.fm_search_full_container_inner,children:[(0,L.jsx)("img",{className:i.Z.fm_search_full_icon,alt:"search icon",src:"".concat(v.dB,"/navbar-search.svg")}),(0,L.jsx)("input",{type:"text",placeholder:I("search"),onChange:e=>{var n;!ee&&(null===X||void 0===X||null===(n=X.list)||void 0===n?void 0:n.length)>=0&&T(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&(E((()=>1)),F(O))},value:O})]})}),(0,L.jsx)(g.Z,{label:"add_student",customStyle:{paddingBlock:"0.4rem",margin:"0",minWidth:"fit-content"},onAction:()=>{"ALLOW"===Z?G(1):z({msg:"You are not Cashier Manager",open:!0,variant:"error"})}})]})}),(0,L.jsx)(x.Z,{}),(0,L.jsxs)(f.default,{customStyle:{paddingTop:"0"},children:[null===X||void 0===X||null===(t=X.list)||void 0===t?void 0:t.map(((e,n)=>{var t;return(null===X||void 0===X||null===(t=X.list)||void 0===t?void 0:t.length)===n+1?(0,L.jsx)("div",{ref:q,children:(0,L.jsx)(B,{student:e,financeId:b,instituteId:S,otherFeesId:y,onRefetch:te,ofid:y})},null===e||void 0===e?void 0:e._id):(0,L.jsx)(B,{student:e,financeId:b,instituteId:S,otherFeesId:y,onRefetch:te,ofid:y},null===e||void 0===e?void 0:e._id)})),ee?N?(0,L.jsx)(_.default,{}):(0,L.jsx)(L.Fragment,{children:1===A?(0,L.jsx)(_.default,{}):(0,L.jsx)(h.Z,{})}):N?0===(null===X||void 0===X||null===(l=X.list)||void 0===l?void 0:l.length)&&(0,L.jsx)(m.Z,{title:"No student found related this search.",customStyleContainer:{marginTop:"1.5rem"}}):0===(null===X||void 0===X||null===(a=X.list)||void 0===a?void 0:a.length)&&(0,L.jsx)(m.Z,{title:"No student.",customStyleContainer:{marginTop:"1.5rem"}})]}),1===Y?(0,L.jsx)(W.Z,{onClose:le,singleStudent:H,onNext:e=>{J(e),G(2)}}):2===Y?(0,L.jsx)(M.Z,{onClose:()=>G(1),onParentClose:()=>{},instituteId:S,onGrabCollectFees:e=>{b&&null!==H&&void 0!==H&&H.student_name&&y&&($((e=>!e)),V({fid:b,bodyParameter:{...H,ofid:y,...e,staff_id:null!==C&&void 0!==C?C:""}}).then((()=>{te(),J(null),$((e=>!e)),le()})).catch({}))},singleStudent:H,isOtherFees:"OTHER_FEES",isNonExisting:!0,applicant:{head:null===(p=k.state)||void 0===p||null===(j=p.otherData)||void 0===j?void 0:j.payable_amount}}):null,U&&(0,L.jsx)(_.default,{}),(0,L.jsx)(R.Z,{eventState:K,eventStateHandler:z})]})},K=e=>{var n,t,d,r,u,v,m,h,p,j,y,S;let{fid:b,instituteId:Z,cashAuthority:C}=e;const I=(0,o.TH)(),k=(0,o.UO)(),N=(0,o.s0)(),[F]=(0,a.lr)(),[O,R]=(0,s.useState)(!1),[T]=(0,c.P_)();return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(l.default,{children:[(0,L.jsx)(f.default,{children:(0,L.jsxs)("div",{className:i.Z.fm_header_container,children:[(0,L.jsxs)("h6",{children:[null!==(n=null===(t=I.state)||void 0===t?void 0:t.feesName)&&void 0!==n?n:""," ","(",(0,L.jsx)("span",{style:{color:"#00f"},children:null===(d=I.state)||void 0===d||null===(r=d.otherData)||void 0===r?void 0:r.paid}),"/",null===(u=I.state)||void 0===u||null===(v=u.otherData)||void 0===v?void 0:v.rmaining,")"]}),(0,L.jsx)(g.Z,{label:"export",customStyle:{margin:"0",padding:"0.4rem 1rem",width:"fit-content"},onAction:()=>{var e,n;null!==(e=I.state)&&void 0!==e&&e.feesId&&(R((e=>!e)),T({ofid:null===(n=I.state)||void 0===n?void 0:n.feesId}).then((()=>{var e;let n="Institute"===(null===(e=I.state)||void 0===e?void 0:e.urlOffSet)?"/q/".concat(k.username,"/institute/member/finance?type=export"):"/q/".concat(k.username,"/member/staff/finance?type=export");N(n,{state:I.state})})).catch({}))}})]})}),(0,L.jsx)(x.Z,{}),(0,L.jsx)(H.Z,{children:z.map((e=>{var n,t;return(0,L.jsx)(J.Z,{tab:e,isLink:!0,isActive:null===(n=e.groupIs)||void 0===n?void 0:n.includes(F.get("n")),parentState:I.state,url:"Institute"===(null===(t=I.state)||void 0===t?void 0:t.urlOffSet)?"/q/".concat(k.username,"/institute/member/finance?type=other-fees-detail").concat(e.urlKey):"/q/".concat(k.username,"/member/staff/finance?type=other-fees-detail").concat(e.urlKey)},null===e||void 0===e?void 0:e.id)}))}),(0,L.jsx)(x.Z,{customStyleBorder:{marginTop:"0"}}),"non-existing"===F.get("n")?(0,L.jsx)($,{ofid:null===(m=I.state)||void 0===m?void 0:m.feesId,instituteId:Z,financeId:b,isCashierAccess:null!==C&&void 0!==C&&C.includes(null===I||void 0===I||null===(h=I.state)||void 0===h?void 0:h.sid)?"ALLOW":"DENY",collectStaffId:null===I||void 0===I||null===(p=I.state)||void 0===p?void 0:p.sid}):(0,L.jsx)(G,{ofid:null===(j=I.state)||void 0===j?void 0:j.feesId,instituteId:Z,financeId:b,isCashierAccess:null!==C&&void 0!==C&&C.includes(null===I||void 0===I||null===(y=I.state)||void 0===y?void 0:y.sid)?"ALLOW":"DENY",collectStaffId:null===I||void 0===I||null===(S=I.state)||void 0===S?void 0:S.sid})]}),O&&(0,L.jsx)(_.default,{})]})},z=[{label:"existing_student",id:"existing",urlKey:"",groupIs:["",null]},{label:"non_existing_student",id:"non-existing",urlKey:"&n=non-existing",groupIs:["non-existing"]}]}}]);
//# sourceMappingURL=16894.d7491141.chunk.js.map