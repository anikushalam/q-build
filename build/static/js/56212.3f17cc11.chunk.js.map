{"version":3,"file":"static/js/56212.3f17cc11.chunk.js","mappings":"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","sources":["optimized/UserStaffMember/AdmissionManager/AdmissionCancelled/AdmissionProfileCardCancel.jsx"],"sourcesContent":["import { useTranslation } from \"react-i18next\";\nimport Modal from \"../../../Ui/Modal/Modal\";\nimport UserMemberContentWrapper from \"../../../Ui/UserMember/UserMemberContentWrapper\";\nimport style from \"../../FinanceManager/Income/Income.module.css\";\nimport BorderBottom from \"../../../Ui/Border/BorderBottom\";\nimport { useEffect, useState } from \"react\";\nimport { assestsUserFinanceUrl } from \"../../../Services/UrlConfig/AssestsBaseUrl\";\nimport QvipleLoader from \"../../../Loader/QvipleLoader\";\nimport CreateButton from \"../../../Ui/Button/CreateButton\";\nimport FormInput from \"../../../Ui/Input/FormInput\";\nimport FormCalendarInput from \"../../../Ui/Input/FormCalendarInput\";\nimport {\n  slashDateFormat,\n  yearMonthDay,\n} from \"../../../Utils/Functions/dateUtility\";\nimport PaymentModeType from \"../../PaymentModeType/PaymentModeType\";\nimport {\n  existingRequiredField,\n  requiredField,\n} from \"../../../Validation/functions/checkingRequiredField\";\nimport { useStudentAdmissionFeeCardAdmissionCancelled } from \"../../../Hooks/ApiHooks/StudentProfile/student-manager-api\";\nconst AdmissionProfileCardCancel = ({\n  onClose,\n  applicant,\n  admission,\n  onParentClose,\n}) => {\n  const { t } = useTranslation();\n  const [disabled, setDisabled] = useState(false);\n  const [state, setState] = useState({\n    amount: \"\",\n    mode: \"\",\n    fee_payment_mode: \"\",\n    fee_payment_amount: \"\",\n    transaction_date: \"\",\n    fee_bank_name: \"\",\n    fee_bank_holder: \"\",\n    fee_utr_reference: \"\",\n  });\n  const [errorField, setErrorField] = useState(\"\");\n\n  const [totalPayAmount, setTotalPayAmount] = useState(0);\n\n  const [studentAdmissionFeeCardAdmissionCancelled] =\n    useStudentAdmissionFeeCardAdmissionCancelled();\n\n  useEffect(() => {\n    if (admission?.applicable_card?.remaining_array?.length > 0) {\n      let amount = 0;\n      for (let rt of admission?.applicable_card?.remaining_array) {\n        if (rt?.status === \"Paid\") {\n          amount += rt?.remainAmount;\n        }\n      }\n      setTotalPayAmount(amount ?? 0);\n    }\n  }, [admission?.applicable_card?.remaining_array]);\n  const onInputAmount = (e) => {\n    setState((pre) => ({\n      ...pre,\n      amount: +e.target.value,\n      fee_payment_amount: +e.target.value,\n    }));\n  };\n\n  const onInputChange = (e) => {\n    setState((prev) => ({\n      ...prev,\n      [e.target.name]: e.target.value,\n    }));\n  };\n\n  const onTransactionDate = (val) => {\n    setState((prev) => ({\n      ...prev,\n      transaction_date: slashDateFormat(val),\n    }));\n  };\n\n  const onModeChange = (val) => {\n    setState((prev) => ({\n      ...prev,\n      mode: val === \"Cash\" ? \"Offline\" : \"Online\",\n      fee_payment_mode: val,\n    }));\n  };\n\n  const onCancelReview = () => {\n    let validation = requiredField(state, [\n      \"mode\",\n      \"fee_payment_amount\",\n      \"fee_bank_name\",\n      \"fee_bank_holder\",\n      \"fee_utr_reference\",\n    ]);\n    if (existingRequiredField(validation)) {\n      if (\n        admission?.student?._id &&\n        admission?.appId?._id &&\n        admission?.fee_structure?._id\n      ) {\n        setDisabled((pre) => !pre);\n        studentAdmissionFeeCardAdmissionCancelled({\n          sid: admission?.student?._id,\n          appId: admission?.appId?._id,\n          payment: {\n            struct: admission?.fee_structure?._id,\n            amount: state?.amount ?? \"\",\n            mode: state?.mode ?? \"\",\n            fee_payment_mode: state?.fee_payment_mode ?? \"\",\n            fee_payment_amount: state?.fee_payment_amount ?? \"\",\n            transaction_date: yearMonthDay(state.transaction_date) ?? \"\",\n            fee_bank_name: state?.fee_bank_name ?? \"\",\n            fee_bank_holder: state?.fee_bank_holder ?? \"\",\n            fee_utr_reference: state?.fee_utr_reference ?? \"\",\n            remainAmount: admission?.applicable_fee - totalPayAmount ?? 0,\n            classId: admission?.student?.studentClass?._id ?? null,\n          },\n        })\n          .then(() => {\n            setDisabled((pre) => !pre);\n            onParentClose();\n          })\n          .catch({});\n      }\n    } else {\n      setErrorField(validation);\n    }\n  };\n\n  console.info(\"applicant\", admission);\n  return (\n    <>\n      <Modal onClose={onClose}>\n        <div className={style.modal_container}>\n          <UserMemberContentWrapper>\n            <div className={style.modal_container_outer_header}>\n              <div className={style.modal_container_header}>\n                <h6>{t(\"cancel_addmission\")}</h6>\n              </div>\n              <img\n                src={`${assestsUserFinanceUrl}/close.svg`}\n                alt=\"close icon\"\n                onClick={onClose}\n              />\n            </div>\n          </UserMemberContentWrapper>\n          <BorderBottom />\n          <UserMemberContentWrapper\n            customStyle={{\n              paddingTop: \"0\",\n            }}\n          >\n            <div className={style.admission_fees_row}>\n              <h6>{t(\"fees_paid\")} :</h6>\n              <h6>\n                {t(\"rs_only\")} {totalPayAmount}\n              </h6>\n            </div>\n\n            <FormInput\n              label={`${t(\"refund_amount\")}`}\n              placeholder={t(\"please_enter_refund_amount\")}\n              name={\"amount\"}\n              value={state.amount}\n              type={\"tel\"}\n              onChange={onInputAmount}\n              errorShow={errorField[\"amount\"]}\n            />\n            <PaymentModeType\n              paymentHeading={t(\"refund_payment_type_mode\")}\n              selectLabel={t(\"mode_placeholder\")}\n              onClick={onModeChange}\n              errorShow={errorField[\"fee_payment_mode\"]}\n              defalutValue={state.fee_payment_mode}\n              selectedValue={t(\"please_select_payment_mode\")}\n              isAuthority=\"admissionCollectMode\"\n            />\n            <FormCalendarInput\n              label={t(\"select_date_of_transaction\")}\n              placeholder={t(\"please_select_date\")}\n              name={\"transaction_date\"}\n              value={state.transaction_date}\n              onChange={onTransactionDate}\n              errorShow={errorField[\"transaction_date\"]}\n            />\n\n            {state.fee_payment_mode === \"Cash\" ? null : (\n              <>\n                <div\n                  className={style.admission_fees_row}\n                  style={{\n                    margin: 0,\n                  }}\n                >\n                  <h6\n                    style={{\n                      margin: 0,\n                      marginTop: \"1rem\",\n                    }}\n                  >\n                    {t(\"paid_to\")}\n                  </h6>\n                </div>\n                <FormInput\n                  label={t(\"bank_name_collect\")}\n                  placeholder={t(\"please_enter_bank_name\")}\n                  name={\"fee_bank_name\"}\n                  value={state.fee_bank_name}\n                  type={\"text\"}\n                  onChange={onInputChange}\n                />\n                <FormInput\n                  label={t(\"banke_holder_name\")}\n                  placeholder={t(\"please_enter_name_of_bank_holder\")}\n                  name={\"fee_bank_holder\"}\n                  value={state.fee_bank_holder}\n                  type={\"text\"}\n                  onChange={onInputChange}\n                />\n                <FormInput\n                  label={t(\"cheque_dd_neft\")}\n                  placeholder={t(\"please_enter_utr_ref_number\")}\n                  name={\"fee_utr_reference\"}\n                  value={state.fee_utr_reference}\n                  type={\"text\"}\n                  onChange={onInputChange}\n                />\n              </>\n            )}\n            <CreateButton label=\"confirm\" onAction={onCancelReview} />\n          </UserMemberContentWrapper>\n        </div>\n      </Modal>\n      {disabled && <QvipleLoader />}\n    </>\n  );\n};\n\nexport default AdmissionProfileCardCancel;\n"],"names":["_ref","_admission$applicable4","onClose","applicant","admission","onParentClose","t","useTranslation","disabled","setDisabled","useState","state","setState","amount","mode","fee_payment_mode","fee_payment_amount","transaction_date","fee_bank_name","fee_bank_holder","fee_utr_reference","errorField","setErrorField","totalPayAmount","setTotalPayAmount","studentAdmissionFeeCardAdmissionCancelled","useStudentAdmissionFeeCardAdmissionCancelled","useEffect","_admission$applicable","_admission$applicable2","applicable_card","remaining_array","length","_amount","rt","_admission$applicable3","status","remainAmount","onInputChange","e","prev","target","name","value","console","info","_jsxs","_Fragment","children","_jsx","Modal","className","style","modal_container","UserMemberContentWrapper","modal_container_outer_header","modal_container_header","src","concat","assestsUserFinanceUrl","alt","onClick","BorderBottom","customStyle","paddingTop","admission_fees_row","FormInput","label","placeholder","type","onChange","pre","errorShow","PaymentModeType","paymentHeading","selectLabel","val","defalutValue","selectedValue","isAuthority","FormCalendarInput","slashDateFormat","margin","marginTop","CreateButton","onAction","onCancelReview","validation","requiredField","_admission$student","_admission$appId","_admission$fee_struct","_admission$student2","_admission$appId2","_admission$fee_struct2","_state$amount","_state$mode","_state$fee_payment_mo","_state$fee_payment_am","_yearMonthDay","_state$fee_bank_name","_state$fee_bank_holde","_state$fee_utr_refere","_ref2","_admission$student$st","_admission$student3","_admission$student3$s","existingRequiredField","student","_id","appId","fee_structure","sid","payment","struct","yearMonthDay","applicable_fee","classId","studentClass","then","catch","QvipleLoader"],"sourceRoot":""}