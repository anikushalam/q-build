"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[4718,4258],{7254:function(e,n,l){var i=l(29439),t=l(72791),o=l(55336),s=l(98684),a=l(97892),d=l.n(a),c=l(82824),r=l(1095),v=l(55050),u=l(93638),f=l(36132),m=l(39230),h=l(45445),x=l(80184);n.Z=function(e){var n,l,a,g,Z,p,w,N,b,y,S,M,k,Y,q,A,L,R,F,D,C,T,I,J,P,W,B,E,G=e.leave,$=e.onRefetch,z=e.modId,H=e.flow,K=e.whichAccess,O=(0,m.$G)().t,Q=(0,f.Sr)(),U=(0,i.Z)(Q,1)[0],V=(0,t.useState)(!1),X=(0,i.Z)(V,2),ee=X[0],ne=X[1],le=(0,t.useState)(!1),ie=(0,i.Z)(le,2),te=ie[0],oe=ie[1],se=function(e){null!==G&&void 0!==G&&G._id&&H&&z&&(ne((function(e){return!e})),U({lid:null===G||void 0===G?void 0:G._id,requestLeave:{leave_from:H,staff_mod:z,status:e}}).then((function(){$(),ne((function(e){return!e}))})).catch({}))},ae=function(){oe((function(e){return!e}))};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:v.Z.lmsr_card,children:[(0,x.jsxs)("div",{className:v.Z.lmsrc_card,children:[(0,x.jsxs)("div",{className:v.Z.lmsrc_card_inner,children:[(0,x.jsx)("img",{src:null!==G&&void 0!==G&&null!==(n=G.staff)&&void 0!==n&&n.staffProfilePhoto?"".concat(r.yI,"/").concat(null===G||void 0===G||null===(l=G.staff)||void 0===l?void 0:l.staffProfilePhoto):"".concat(s.p3,"/feed-user-avatar.svg"),alt:"staff icon"}),(0,x.jsxs)("div",{className:v.Z.lmsrci_text,children:[(0,x.jsx)("h6",{children:"".concat(null===G||void 0===G||null===(a=G.staff)||void 0===a?void 0:a.staffFirstName," ").concat(null!==G&&void 0!==G&&null!==(g=G.staff)&&void 0!==g&&g.staffMiddleName?null===G||void 0===G||null===(Z=G.staff)||void 0===Z?void 0:Z.staffMiddleName:""," ").concat(null===G||void 0===G||null===(p=G.staff)||void 0===p?void 0:p.staffLastName)}),(0,x.jsxs)("p",{children:["Sactioning"===K?(0,x.jsxs)(x.Fragment,{children:[O("reviewed_on")," ",(0,c.J)(null===G||void 0===G||null===(w=G.review)||void 0===w?void 0:w.review_on,"LT"),","," ",d()(null===G||void 0===G||null===(N=G.review)||void 0===N?void 0:N.review_on).format("DD MMM YYYY")]}):"Reviewing"===K?(0,x.jsxs)(x.Fragment,{children:[O("recomend_on"),(0,c.J)(null===G||void 0===G||null===(b=G.recommend)||void 0===b?void 0:b.recommend_on,"LT"),","," ",d()(null===G||void 0===G||null===(y=G.recommend)||void 0===y?void 0:y.recommend_on).format("DD MMM YYYY")]}):(0,x.jsxs)(x.Fragment,{children:[O("raised_on"),(0,c.J)(null===G||void 0===G?void 0:G.createdAt,"LT"),", ",d()(null===G||void 0===G?void 0:G.createdAt).format("DD MMM YYYY"),", "]}),(0,x.jsx)("span",{className:v.Z.lmsrc_date,onClick:ae,children:O("for_dates")})]}),(0,x.jsx)("p",{children:"Sactioning"===K?(0,x.jsxs)(x.Fragment,{children:[O("reviewing_by"),"".concat(null!==(S=null===G||void 0===G||null===(M=G.review)||void 0===M||null===(k=M.review_by)||void 0===k?void 0:k.staffFirstName)&&void 0!==S?S:""," ").concat(null!==(Y=null===G||void 0===G||null===(q=G.review)||void 0===q||null===(A=q.review_by)||void 0===A?void 0:A.staffMiddleName)&&void 0!==Y?Y:""," ").concat(null!==(L=null===G||void 0===G||null===(R=G.review)||void 0===R||null===(F=R.review_by)||void 0===F?void 0:F.staffLastName)&&void 0!==L?L:"")]}):"Reviewing"===K?(0,x.jsxs)(x.Fragment,{children:[O("recomending_by"),"".concat(null!==(D=null===G||void 0===G||null===(C=G.recommend)||void 0===C||null===(T=C.recommend_by)||void 0===T?void 0:T.staffFirstName)&&void 0!==D?D:""," ").concat(null!==(I=null===G||void 0===G||null===(J=G.recommend)||void 0===J||null===(P=J.recommend_by)||void 0===P?void 0:P.staffMiddleName)&&void 0!==I?I:""," ").concat(null!==(W=null===G||void 0===G||null===(B=G.recommend)||void 0===B||null===(E=B.recommend_by)||void 0===E?void 0:E.staffLastName)&&void 0!==W?W:"")]}):null})]})]}),(0,x.jsx)("div",{className:v.Z.lmsrc_btn,children:"Request"===(null===G||void 0===G?void 0:G.status)?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(u.Z,{label:O("reject"),onAction:function(){return se("Rejected")},customStyle:_}),(0,x.jsx)(u.Z,{label:O("approve"),onAction:function(){return se("Accepted")},customStyle:j})]}):null})]}),(0,x.jsx)("div",{className:v.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,x.jsxs)("h6",{style:{fontWeight:"400"},children:[O("leave_type")," "," : ",null===G||void 0===G?void 0:G.leave_type]})}),(0,x.jsx)("div",{className:v.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,x.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[O("reason")," "," : ",null===G||void 0===G?void 0:G.reason]})}),(null===G||void 0===G?void 0:G.attach)&&(0,x.jsx)("div",{className:v.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,x.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[O("attachment")," "," : ",(0,x.jsx)("a",{href:"".concat(r.q2,"/").concat(null===G||void 0===G?void 0:G.attach),target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,x.jsx)("span",{className:v.Z.lmsrc_date,children:O("view_attachment")})})]})})]}),te&&(0,x.jsx)(h.Z,{onClose:ae,allDate:null===G||void 0===G?void 0:G.date}),ee&&(0,x.jsx)(o.Z,{})]})};var _={"--bg-button":"#e7e7e7","--color-button":"#6f727c","--color-white":"#ffffff",margin:"0",padding:"0.2rem 0.8rem"},j={margin:"0",padding:"0.2rem 0.8rem"}},38261:function(e,n,l){l.r(n);var i=l(29439),t=l(72791),o=l(56959),s=l(23441),a=l(91427),d=l(57588),c=l(63687),r=l(21348),v=l(90904),u=l(55336),f=l(1669),m=l(2651),h=l(36132),x=l(39230),_=l(98684),j=l(7254),g=l(80184);n.default=function(e){var n,l,Z,p=e.modId,w=(0,x.$G)().t,N=(0,t.useState)(""),b=(0,i.Z)(N,2),y=b[0],S=b[1],M=(0,t.useState)(1),k=(0,i.Z)(M,2),Y=k[0],q=k[1],A=(0,t.useState)(!0),L=(0,i.Z)(A,2),R=L[0],F=L[1],D=(0,s.YD)({skip:y}),C=(0,i.Z)(D,2),T=C[0],I=C[1],J=(0,h.B8)({data:{mid:p,page:Y,limit:10,search:y,flow:"Sanction_Section"},skip:!p}),P=J.lmsModeratorAllRequestList,W=J.lmsModeratorAllRequestListLoading,B=J.lmsModeratorAllRequestListRefetch;(0,t.useEffect)((function(){I&&R&&q((function(e){return e+1}))}),[I,R]),(0,t.useEffect)((function(){var e;if(null!==P&&void 0!==P&&null!==(e=P.list)&&void 0!==e&&e.length){var n,l=(0,a.f)(null===P||void 0===P||null===(n=P.list)||void 0===n?void 0:n.length);F((function(){return l}))}}),[null===P||void 0===P?void 0:P.list]);var E=(0,t.useCallback)((0,d.J)((function(e){q((function(){return 1})),S(e)}),1500),[]),G=(0,t.useCallback)((function(){q((function(){return 1})),S(""),B()}),[B]);return(0,g.jsxs)(c.Z,{children:[(0,g.jsx)(r.Z,{children:(0,g.jsxs)("div",{className:o.Z.fm_header_container,children:[(0,g.jsx)("h6",{children:w("leave_request")}),(0,g.jsx)("div",{className:o.Z.fm_search,children:(0,g.jsx)("section",{className:o.Z.fm_search_container,children:(0,g.jsxs)("div",{className:o.Z.fm_search_container_inner,children:[(0,g.jsx)("img",{className:o.Z.fm_search_icon,alt:"search icon",src:"".concat(_.dB,"/navbar-search.svg")}),(0,g.jsx)("input",{type:"text",placeholder:w("search"),onChange:function(e){e.target.value?E(e.target.value):(q((function(){return 1})),S(""))}})]})})})]})}),(0,g.jsx)(v.Z,{}),(0,g.jsxs)(r.Z,{children:[null===P||void 0===P||null===(n=P.list)||void 0===n?void 0:n.map((function(e,n){var l;return(null===P||void 0===P||null===(l=P.list)||void 0===l?void 0:l.length)===n+1?(0,g.jsx)("div",{ref:T,children:(0,g.jsx)(j.Z,{leave:e,onRefetch:G,modId:p,flow:"Sanction_Section",whichAccess:"Sactioning"})},null===e||void 0===e?void 0:e._id):(0,g.jsx)(j.Z,{leave:e,onRefetch:G,modId:p,flow:"Sanction_Section",whichAccess:"Sactioning"},null===e||void 0===e?void 0:e._id)})),W?y?(0,g.jsx)(u.Z,{}):(0,g.jsx)(f.Z,{}):y?0===(null===P||void 0===P||null===(l=P.list)||void 0===l?void 0:l.length)&&(0,g.jsx)(m.Z,{title:"No staff leave request found related this search."}):0===(null===P||void 0===P||null===(Z=P.list)||void 0===Z?void 0:Z.length)&&(0,g.jsx)(m.Z,{title:"No staff leave request."})]})]})}}}]);
//# sourceMappingURL=4718.3deeaad8.chunk.js.map