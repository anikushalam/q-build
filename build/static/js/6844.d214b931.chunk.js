"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[6844],{6844:(e,t,l)=>{l.r(t),l.d(t,{default:()=>w});var s=l(72791),i=l(56959),a=l(63687),n=l(21348),r=l(90904),d=l(39230),o=l(16871),c=l(43504),u=l(98684),v=l(23441),m=l(91427),f=l(55336),h=l(1669),x=l(2651),j=l(36132),p=l(97892),g=l.n(p),_=l(82824),y=l(1095),Z=l(45445),b=l(55050),N=l(93638),k=l(80184);const q=e=>{var t,l,i,a,n,r,o,c;let{leave:v,onRefetch:m}=e;const{t:h}=(0,d.$G)(),[x]=(0,j.Sr)(),[p,q]=(0,s.useState)(!1),[C,I]=(0,s.useState)(!1),R=e=>{null!==v&&void 0!==v&&v._id&&(q((e=>!e)),x({lid:null===v||void 0===v?void 0:v._id,requestLeave:{status:e}}).then((()=>{m(),q((e=>!e))})).catch({}))},T=()=>{I((e=>!e))};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:b.Z.lmsr_card,children:[(0,k.jsxs)("div",{className:b.Z.lmsrc_card,children:[(0,k.jsxs)("div",{className:b.Z.lmsrc_card_inner,children:[(0,k.jsx)("img",{src:null!==v&&void 0!==v&&null!==(t=v.staff)&&void 0!==t&&t.staffProfilePhoto?"".concat(y.yI,"/").concat(null===v||void 0===v||null===(l=v.staff)||void 0===l?void 0:l.staffProfilePhoto):"".concat(u.p3,"/feed-user-avatar.svg"),alt:"staff icon"}),(0,k.jsxs)("div",{className:b.Z.lmsrci_text,children:[(0,k.jsx)("h6",{children:"".concat(null!==(i=null===v||void 0===v||null===(a=v.staff)||void 0===a?void 0:a.staffFirstName)&&void 0!==i?i:""," ").concat(null!==v&&void 0!==v&&null!==(n=v.staff)&&void 0!==n&&n.staffMiddleName?null===v||void 0===v||null===(r=v.staff)||void 0===r?void 0:r.staffMiddleName:""," ").concat(null!==(o=null===v||void 0===v||null===(c=v.staff)||void 0===c?void 0:c.staffLastName)&&void 0!==o?o:"")}),(0,k.jsxs)("p",{children:[h("raised_on"),(0,_.J)(null===v||void 0===v?void 0:v.createdAt,"LT"),", ",g()(null===v||void 0===v?void 0:v.createdAt).format("DD MMM YYYY"),", ",(0,k.jsx)("span",{className:b.Z.lmsrc_date,onClick:T,children:h("for_dates")})]})]})]}),(0,k.jsxs)("div",{className:b.Z.lmsrc_btn,children:[(0,k.jsx)(N.Z,{label:h("reject"),onAction:()=>R("Rejected"),customStyle:S}),(0,k.jsx)(N.Z,{label:h("approve"),onAction:()=>R("Accepted"),customStyle:L})]})]}),(0,k.jsx)("div",{className:b.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,k.jsxs)("h6",{style:{fontWeight:"400"},children:[h("leave_type")," "," : ",null===v||void 0===v?void 0:v.leave_type]})}),(0,k.jsx)("div",{className:b.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,k.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[h("reason")," "," : ",null===v||void 0===v?void 0:v.reason]})}),(null===v||void 0===v?void 0:v.attach)&&(0,k.jsx)("div",{className:b.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,k.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[h("attachment")," "," : ",(0,k.jsx)("a",{href:"".concat(y.q2,"/").concat(null===v||void 0===v?void 0:v.attach),target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,k.jsx)("span",{className:b.Z.lmsrc_date,children:h("view_attachment")})})]})})]}),C&&(0,k.jsx)(Z.Z,{onClose:T,allDate:null===v||void 0===v?void 0:v.date}),p&&(0,k.jsx)(f.default,{})]})},S={"--bg-button":"#e7e7e7","--color-button":"#6f727c","--color-white":"#ffffff",margin:"0",padding:"0.2rem 0.8rem"},L={margin:"0",padding:"0.2rem 0.8rem"},C=e=>{var t,l,a;let{instituteId:n}=e;const{t:r}=(0,d.$G)(),[o,c]=(0,s.useState)(""),[p,g]=(0,s.useState)(""),[_,y]=(0,s.useState)(1),[Z,b]=(0,s.useState)(!0),[N,S]=(0,v.YD)({skip:o}),{lmsLeaveRequestList:L,lmsLeaveRequestListLoading:C,lmsLeaveRequestListRefetch:I}=(0,j.B)({data:{id:n,page:_,limit:10,search:o,flow:"Request"},skip:!n});(0,s.useEffect)((()=>{S&&Z&&y((e=>e+1))}),[S,Z]),(0,s.useEffect)((()=>{var e;if(null!==L&&void 0!==L&&null!==(e=L.list)&&void 0!==e&&e.length){var t;let e=(0,m.f)(null===L||void 0===L||null===(t=L.list)||void 0===t?void 0:t.length);b((()=>e))}}),[null===L||void 0===L?void 0:L.list]);const R=(0,s.useCallback)((()=>{y((()=>1)),c(""),I()}),[I]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:i.Z.fm_search_full,children:(0,k.jsx)("section",{className:i.Z.fm_search_full_container,children:(0,k.jsxs)("div",{className:i.Z.fm_search_full_container_inner,children:[(0,k.jsx)("img",{className:i.Z.fm_search_full_icon,alt:"search icon",src:"".concat(u.dB,"/navbar-search.svg")}),(0,k.jsx)("input",{type:"text",placeholder:r("search"),onChange:e=>{var t;!C&&(null===L||void 0===L||null===(t=L.list)||void 0===t?void 0:t.length)>=0&&g(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&(y((()=>1)),c(p))},value:p})]})})}),null===L||void 0===L||null===(t=L.list)||void 0===t?void 0:t.map(((e,t)=>{var l;return(null===L||void 0===L||null===(l=L.list)||void 0===l?void 0:l.length)===t+1?(0,k.jsx)("div",{ref:N,children:(0,k.jsx)(q,{leave:e,onRefetch:R})},null===e||void 0===e?void 0:e._id):(0,k.jsx)(q,{leave:e,onRefetch:R},null===e||void 0===e?void 0:e._id)})),C?o?(0,k.jsx)(f.default,{}):(0,k.jsx)(h.Z,{}):o?0===(null===L||void 0===L||null===(l=L.list)||void 0===l?void 0:l.length)&&(0,k.jsx)(x.Z,{title:"No staff leave request found related this search.",customStyleContainer:{marginTop:"2rem"}}):0===(null===L||void 0===L||null===(a=L.list)||void 0===a?void 0:a.length)&&(0,k.jsx)(x.Z,{title:"No staff leave request.",customStyleContainer:{marginTop:"2rem"}})]})};var I=l(45631),R=l(98967),T=l(63162);const w=e=>{let{lmid:t,instituteId:l}=e;const{t:v}=(0,d.$G)(),m=(0,o.TH)(),f=(0,o.UO)(),[h]=(0,c.lr)(),x=(0,o.s0)(),j=(0,s.useCallback)((()=>{var e;let t="";t="Institute"===(null===(e=m.state)||void 0===e?void 0:e.urlOffSet)?"/q/".concat(f.username,"/institute/member/lms"):"/q/".concat(f.username,"/member/staff/lms"),x(t,{state:m.state})}),[x,m.state,f.username]);return(0,k.jsxs)(a.default,{children:[(0,k.jsx)(n.default,{children:(0,k.jsx)("div",{className:i.Z.fm_header_container,children:(0,k.jsxs)("div",{className:i.Z.fm_header_start_container,style:{gap:"0.2rem"},children:[(0,k.jsx)("img",{alt:"search icon",src:"".concat(u.Fk,"/back.svg"),style:{height:"2rem",width:"2rem"},onClick:j}),(0,k.jsx)("h6",{children:v("leave_request")})]})})}),(0,k.jsx)(r.Z,{}),(0,k.jsx)(R.Z,{children:A.map((e=>{var t,l;return(0,k.jsx)(T.Z,{tab:e,isLink:!0,isActive:null===(t=e.groupIs)||void 0===t?void 0:t.includes(h.get("n")),parentState:m.state,url:"Institute"===(null===(l=m.state)||void 0===l?void 0:l.urlOffSet)?"/q/".concat(f.username,"/institute/member/lms?type=request").concat(e.urlKey):"/q/".concat(f.username,"/member/staff/lms?type=request").concat(e.urlKey)},null===e||void 0===e?void 0:e.id)}))}),(0,k.jsx)(r.Z,{customStyleBorder:{marginTop:"0"}}),(0,k.jsx)(n.default,{customStyle:{paddingTop:"0"},children:"issued"===h.get("n")?(0,k.jsx)(I.Z,{lmid:t,instituteId:l}):(0,k.jsx)(C,{lmid:t,instituteId:l})})]})},A=[{label:"request",id:"request",urlKey:"",groupIs:["",null]},{label:"issued",id:"issued",urlKey:"&n=issued",groupIs:["issued"]}]}}]);
//# sourceMappingURL=6844.d214b931.chunk.js.map