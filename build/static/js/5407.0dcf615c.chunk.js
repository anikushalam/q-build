"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[5407],{5407:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var i=t(29439),o=t(72791),m=t(9447),s=t(13688),l=t(69721),d="EachNestedComment_eachComment__Yp1ET",a="EachNestedComment_imgcontainer__GalK4",c="EachNestedComment_commentText__7zNCO",r="EachNestedComment_eachCommentContainer__eeCVJ",u="EachNestedComment_dots__bR3MT",v="EachNestedComment_time__u9Zlo",h=t(80184);var p=function(e){var n=e.comment;return(0,h.jsxs)("div",{className:r,children:[(0,h.jsxs)("div",{className:d,children:[(0,h.jsx)("div",{className:a,children:(0,h.jsx)("img",{src:"1"!==(null===n||void 0===n?void 0:n.authorPhotoId)?"".concat(l.yI,"/").concat(n.authorProfilePhoto):"/images/dummy-avatar-icon.svg",alt:""})}),(0,h.jsxs)("div",{className:c,children:[(0,h.jsx)("h6",{children:null===n||void 0===n?void 0:n.authorUserName}),(0,h.jsx)("p",{children:null===n||void 0===n?void 0:n.repliedComment})]})]}),(0,h.jsx)("div",{className:u,children:(0,h.jsx)("p",{className:v,children:(0,s.WU)(null===n||void 0===n?void 0:n.createdAt)})})]})},C={eachComment:"NestedComments_eachComment__pANlV",addComment:"NestedComments_addComment__t172M",imgcontainer:"NestedComments_imgcontainer__t7PYl",inputContainer:"NestedComments_inputContainer__xy2lD",hr:"NestedComments_hr__uf04W",icons:"NestedComments_icons__pg5T8",btn:"NestedComments_btn__-gMA2"},_=t(95048),f=t(70092),N=t(23441),x=t(39230),j=t(16256),g=t(47184),y=t(39480);var I=function(e){var n,t,s=e.pcid,d=e.pid,a=(0,o.useState)(1),c=(0,i.Z)(a,2),r=c[0],u=c[1],v=(0,x.$G)().t,I=(0,N.YD)(),E=(0,i.Z)(I,2),R=E[0],k=E[1],b=(0,o.useState)(!0),P=(0,i.Z)(b,2),Z=P[0],A=P[1],w=(0,o.useRef)(""),D=(0,_.v9)((function(e){return e.idChange})),T=(0,_.v9)((function(e){return e.postChange.replyComments})),U=(0,_.I0)(),q=(0,m._X)({data:{pcid:s||"",page:r,limit:10,viewAs:j.UJ},skip:!1}),J=q.allReplyComment,M=q.allReplyCommentRefetch,Y=(0,m.ro)(),G=(0,i.Z)(Y,1)[0],S=(0,y.gq)({id:null===D||void 0===D?void 0:D.id,skip:!(null!==D&&void 0!==D&&D.id)}),V=S.oneInstituteDashboard,W=S.oneInstituteDashboardRefetch;return(0,o.useEffect)((function(){null!==D&&void 0!==D&&D.id&&W()}),[null===D||void 0===D?void 0:D.id,W]),(0,o.useEffect)((function(){k&&Z&&u((function(e){return e+1}))}),[k,Z]),(0,o.useEffect)((function(){M()}),[r,M,Z]),(0,o.useEffect)((function(){var e;null!==J&&void 0!==J&&J.replyComment&&U(f.p.addReplyComment({commentId:s,reply:null===J||void 0===J?void 0:J.replyComment})),10===(null===J||void 0===J||null===(e=J.replyComment)||void 0===e?void 0:e.length)?A(!0):A(!1)}),[null===J||void 0===J?void 0:J.replyComment,U,s]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:C.eachComment,children:[(0,h.jsxs)("div",{className:C.addComment,children:[(0,h.jsxs)("div",{className:C.imgcontainer,children:[(0,h.jsx)(g.Z,{dynamicImage:"1"!==(null===V||void 0===V||null===(n=V.institute)||void 0===n?void 0:n.photoId)?"".concat(l.yI,"/").concat(null===V||void 0===V||null===(t=V.institute)||void 0===t?void 0:t.insProfilePhoto):"/images/ins_default_profile.svg"})," "]}),(0,h.jsxs)("div",{className:C.inputContainer,children:[(0,h.jsx)("input",{type:"text",ref:w,placeholder:v("add_a_reply"),className:"form-control ".concat(C.searchinput)}),(0,h.jsxs)("div",{className:C.icons,children:[(0,h.jsx)("img",{src:"/images/img-icon.svg",alt:""}),(0,h.jsx)("img",{src:"/images/emoji-icon.svg",alt:""})]})]})]}),(0,h.jsx)("div",{className:C.btn,onClick:function(){U(f.p.addReplyCommentCount({commentId:s,postId:d})),G({replyComment:{comment:w.current.value,uid:D.id},pcid:s,viewAs:j.UJ}).then((function(e){var n;U(f.p.addReplyCreatedComment({commentId:s,reply:null===(n=e.data)||void 0===n?void 0:n.childReplyComment}))})).catch({}),w.current.value=""},children:v("reply")})]}),null===T||void 0===T?void 0:T.map((function(e){var n;return e.commentId===s?null===e||void 0===e||null===(n=e.reply)||void 0===n?void 0:n.map((function(n,t){var i;return(null===e||void 0===e||null===(i=e.reply)||void 0===i?void 0:i.length)===t+1?(0,h.jsxs)("div",{className:C.eachComment,ref:R,children:[(0,h.jsx)(p,{comment:n}),(0,h.jsx)("hr",{})]},t):(0,h.jsxs)("div",{className:C.eachComment,children:[(0,h.jsx)(p,{comment:n}),(0,h.jsx)("hr",{})]},t)})):""}))]})}}}]);
//# sourceMappingURL=5407.0dcf615c.chunk.js.map