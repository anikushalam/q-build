"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[66504],{66504:(a,i,e)=>{e.r(i),e.d(i,{default:()=>g});var s=e(72791),d=e(5574),o=e(94721);const t={admissionModal:"AlumniModal_admissionModal__sAn1V",admissionModalhead:"AlumniModal_admissionModalhead__v2CHz",admissionModalbody:"AlumniModal_admissionModalbody__tP4BE",admissionModalfooter:"AlumniModal_admissionModalfooter__Qg9e+",assignManager:"AlumniModal_assignManager__sN1Lh",searchbar:"AlumniModal_searchbar__vWFsY",sidebarbottomitem:"AlumniModal_sidebarbottomitem__0eumV",namee:"AlumniModal_namee__Totua",desig:"AlumniModal_desig__25eNv",items:"AlumniModal_items__BLPG6",financebtn:"AlumniModal_financebtn__KDEuF",activebtn:"AlumniModal_activebtn__VB9Tv",assignDesignation:"AlumniModal_assignDesignation__+XEi8",peventinputContainer:"AlumniModal_peventinputContainer__+WOX9",pollTextareah:"AlumniModal_pollTextareah__PfsT6",switchContainerh:"AlumniModal_switchContainerh__IlsRe",pollTextarea:"AlumniModal_pollTextarea__NwWK+"};var l=e(91007),n=e(39230),c=e(69721),m=e(16871),r=e(31677),v=e(61221),u=e(95048),f=e(23441),h=e(57387),_=e(80184);function x(a){let{img:i,photoId:e,name:s,index:d,setIndex:o,assignAdmissionHead:l}=a;return(0,_.jsxs)("div",{className:t.sidebarbottomitem,onClick:()=>{l(),o(d)},children:[(0,_.jsx)("img",{alt:"not found",src:"1"!==e?"".concat(c.yI,"/").concat(i):"/images/member_tab/class/default_avatar.svg"}),(0,_.jsxs)("div",{children:[(0,_.jsx)("p",{className:t.namee,children:s}),(0,_.jsx)("p",{className:t.desig,children:d})]})]})}const g=function(a){let{openModal:i,hideModal:e,edit:g,librarian:p,onParentRefetch:N}=a;const{t:j}=(0,n.$G)(),[M,b]=(0,s.useState)(!1),I=(0,u.v9)((a=>a.idChange)),[A,P]=(0,s.useState)(!1),[L,y]=(0,s.useState)(!1),[C,k]=(0,s.useState)(""),[T,S]=(0,s.useState)(1),[F,O]=(0,s.useState)([]),[w,E]=(0,f.YD)(),[B]=(0,v.vV)(),[D]=(0,v.P$)(),H=(0,u.I0)(),R=document.querySelector("textarea");null===R||void 0===R||R.addEventListener("keyup",(a=>{R.style.height="auto";let i=a.target.scrollHeight;R.style.height="".concat(i,"px")}));const{data:q,refetch:Z}=(0,l.OU)({id:null===I||void 0===I?void 0:I.id,page:T,limit:10},{skip:!(null!==I&&void 0!==I&&I.id)});(0,s.useEffect)((()=>{q&&(q.staffIns?O([...F,...q.staffIns]):T>1&&P(!0))}),[q]),(0,s.useEffect)((()=>{E&&(A||S(T+1))}),[E]),(0,s.useEffect)((()=>{setTimeout((()=>{y(!L)}),3e3)}),[]);const V=(0,m.s0)(),{data:W}=(0,l.W7)(),[Q,G]=(0,s.useState)(!1),[K,X]=(0,s.useState)(!1),[Y,$]=(0,s.useState)({sid:"",name:"",index:"",photoId:"",profilePhoto:""}),z=null===F||void 0===F?void 0:F.filter((a=>(null===a||void 0===a?void 0:a._id)!==(null===p||void 0===p?void 0:p._id)));return(0,_.jsx)(d.Z,{open:i,onClose:()=>e(!1),children:(0,_.jsxs)("div",{className:t.admissionModal,children:[(0,_.jsxs)("div",{className:t.admissionModalhead,children:[(0,_.jsx)("h6",{children:j(g?"edit_alumin_dept":"active_alumin")}),(0,_.jsx)("img",{onClick:()=>e(!1),src:"/images/close-post-icon.svg",alt:""})]}),(0,_.jsx)(o.Z,{}),(0,_.jsxs)("div",{className:t.admissionModalbody,children:[!Q&&!g&&(0,_.jsxs)("div",{className:t.assignDesignation,onClick:()=>G(!0),children:[(0,_.jsx)("img",{className:t.assignManager,src:"/images/sports/avatar-circle.svg",alt:""}),(0,_.jsxs)("div",{children:[(0,_.jsx)("h6",{children:j("assign_alumin_head")}),(0,_.jsx)("p",{children:j("search_from_joined_list")})]})]}),!Q&&g&&(0,_.jsxs)("div",{className:t.sidebarbottomitem,onClick:()=>G(!0),children:[(0,_.jsx)("img",{alt:"not found",src:"1"!==(null===p||void 0===p?void 0:p.photoId)?"".concat(c.yI,"/").concat(null===p||void 0===p?void 0:p.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg"}),(0,_.jsxs)("div",{children:[(0,_.jsx)("p",{className:t.namee,children:"".concat((null===p||void 0===p?void 0:p.staffFirstName)||""," ").concat(null!==p&&void 0!==p&&p.staffMiddleName?null===p||void 0===p?void 0:p.staffMiddleName:""," ").concat((null===p||void 0===p?void 0:p.staffLastName)||"")}),(0,_.jsxs)("p",{className:t.desig,children:[" ",j("index_no")," ",null===p||void 0===p?void 0:p.index]})]})]}),Q&&!K&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:t.searchbar,children:[(0,_.jsx)("input",{type:"text",placeholder:j("search"),className:"form-control ".concat(t.searchinput)}),(0,_.jsx)("img",{className:t.searchIcon,alt:"img",src:"/images/search-dash-icon.svg"})]}),(0,_.jsx)("div",{className:t.items,children:g?null===z||void 0===z?void 0:z.map((a=>(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(x,{img:a.staffProfilePhoto,photoId:a.photoId,name:"".concat(a.staffFirstName," ").concat(a.staffMiddleName?a.staffMiddleName:""," ").concat(a.staffLastName),index:a.staffROLLNO,setIndex:a=>X(!0),assignAdmissionHead:()=>{$({...Y,sid:null===a||void 0===a?void 0:a._id,name:"".concat(null===a||void 0===a?void 0:a.staffFirstName," ").concat(null!==a&&void 0!==a&&a.staffMiddleName?null===a||void 0===a?void 0:a.staffMiddleName:""," ").concat(null===a||void 0===a?void 0:a.staffLastName),index:null===a||void 0===a?void 0:a.staffROLLNO,photoId:null===a||void 0===a?void 0:a.photoId,profilePhoto:null===a||void 0===a?void 0:a.staffProfilePhoto})}}),(0,_.jsx)(o.Z,{})]}))):null===F||void 0===F?void 0:F.map((a=>(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(x,{img:a.staffProfilePhoto,photoId:a.photoId,name:"".concat(a.staffFirstName," ").concat(a.staffMiddleName?a.staffMiddleName:""," ").concat(a.staffLastName),index:a.staffROLLNO,setIndex:a=>X(!0),assignAdmissionHead:()=>{$({...Y,sid:null===a||void 0===a?void 0:a._id,name:"".concat(null===a||void 0===a?void 0:a.staffFirstName," ").concat(null!==a&&void 0!==a&&a.staffMiddleName?null===a||void 0===a?void 0:a.staffMiddleName:""," ").concat(null===a||void 0===a?void 0:a.staffLastName),index:null===a||void 0===a?void 0:a.staffROLLNO,photoId:null===a||void 0===a?void 0:a.photoId,profilePhoto:null===a||void 0===a?void 0:a.staffProfilePhoto})}}),(0,_.jsx)(o.Z,{})]})))})]}),Q&&K&&(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{className:t.sidebarbottomitem,children:[(0,_.jsx)("img",{alt:"not found",src:"1"!==Y.photoId?"".concat(c.yI,"/").concat(Y.profilePhoto):"/images/member_tab/class/default_avatar.svg"}),(0,_.jsxs)("div",{children:[(0,_.jsx)("p",{className:t.namee,children:Y.name}),(0,_.jsxs)("p",{className:t.desig,children:["Index No. ",Y.index]})]})]}),(0,_.jsx)("div",{className:t.peventinputContainer,children:(0,_.jsx)("textarea",{className:t.pollTextarea,id:"pollTextArea",type:"text",required:!0,placeholder:j("write_something_"),value:C,onChange:a=>k(a.target.value)})})]})]}),(0,_.jsx)("div",{className:t.admissionModalfooter,children:(0,_.jsx)("div",{children:(0,_.jsx)(h.Z,{disabled:M,shwoLoader:!0,buttonText:j(g?"edit_":"activate"),customStyleButton:{minHeight:"2rem",marginTop:"0rem"},onAction:g?()=>{""!==Y.sid&&(b(!0),D({osid:null===p||void 0===p?void 0:p._id,nsid:Y.sid}).then((a=>{var i;H(r.B.alumniQuery({aid:null===(i=a.data)||void 0===i?void 0:i.alumini})),N(),$({...Y,sid:""}),X(!K),G(!Q),b(!1),e()})))}:()=>{b(!0),B({id:I.id,passegeData:{sid:null===Y||void 0===Y?void 0:Y.sid,alumini_passage:C}}).then((a=>{var i,e;H(r.B.alumniQuery({aid:null===(i=a.data)||void 0===i?void 0:i.alumini})),b(!1),V("/q/".concat(null===W||void 0===W||null===(e=W.institute)||void 0===e?void 0:e.name,"/alumni"))}))}})})})]})})}}}]);
//# sourceMappingURL=66504.455ac7e8.chunk.js.map