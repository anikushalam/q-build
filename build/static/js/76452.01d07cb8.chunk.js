"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[76452],{65408:(e,t,a)=>{a.d(t,{Z:()=>h});var s=a(72791),n=a(33992),i=a(11105),l=a(33148),d=a(69721),c=a(74801),o=a(8148),r=a(35395),u=a(80184);const v=s.lazy((()=>Promise.all([a.e(6307),a.e(85054),a.e(82555)]).then(a.bind(a,85054)))),m=e=>{var t,a,n,i,m,j,h,b,x,g,p,f,N,y,Z,_,S,T,I,A,D,E,C,P,k,M,R,w,F,q,U,O,H,V,L,G,J,$,B,Y,z,K;let{sub:W,carryParentState:X,isView:Q,did:ee,cid:te,instituteId:ae,onRefetch:se}=e;const[ne,ie]=(0,s.useState)(""),le=e=>{e.preventDefault(),ie(null===W||void 0===W?void 0:W._id)};return(0,u.jsxs)(u.Fragment,{children:["DEPARTMENT_HEAD"===Q?(0,u.jsx)(o.Z,{carryParentState:{...X,subjectId:null===W||void 0===W?void 0:W._id,subjectName:"".concat(null===W||void 0===W?void 0:W.subjectName," ").concat(null!==W&&void 0!==W&&W.subject_category?"(".concat(null===W||void 0===W?void 0:W.subject_category,")"):""," ").concat(null!==W&&void 0!==W&&null!==(t=W.selected_batch_query)&&void 0!==t&&t.batchName?"(".concat(null===W||void 0===W||null===(a=W.selected_batch_query)||void 0===a?void 0:a.batchName,")"):""," ").concat("Optional"===(null===W||void 0===W?void 0:W.subjectOptional)?"(".concat(null===W||void 0===W?void 0:W.subjectOptional,")"):""),batchId:null===W||void 0===W||null===(n=W.selected_batch_query)||void 0===n?void 0:n._id,subjectTeacherName:"".concat(null!==(i=null===W||void 0===W||null===(m=W.subjectTeacherName)||void 0===m?void 0:m.staffFirstName)&&void 0!==i?i:""," ").concat(null!==(j=null===W||void 0===W||null===(h=W.subjectTeacherName)||void 0===h?void 0:h.staffMiddleName)&&void 0!==j?j:""," ").concat(null!==(b=null===W||void 0===W||null===(x=W.subjectTeacherName)||void 0===x?void 0:x.staffLastName)&&void 0!==b?b:"")},activeTab:"subject-detail",children:(0,u.jsxs)("div",{className:l.Z.class_container,style:{justifyContent:"space-between"},children:[(0,u.jsxs)("div",{className:l.Z.moderator_container_title,children:[(0,u.jsx)("img",{className:l.Z.oneRowImage,src:null!==W&&void 0!==W&&null!==(g=W.subjectTeacherName)&&void 0!==g&&g.staffProfilePhoto?"".concat(d.yI,"/").concat(null===W||void 0===W||null===(p=W.subjectTeacherName)||void 0===p?void 0:p.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"staff avatr"}),(0,u.jsxs)("div",{className:l.Z.class_container_text,children:[(0,u.jsxs)("h6",{children:[null!==(f=null===W||void 0===W?void 0:W.subjectName)&&void 0!==f?f:""," ",null!==W&&void 0!==W&&W.subject_category?"(".concat(null===W||void 0===W?void 0:W.subject_category,")"):"",null!==W&&void 0!==W&&null!==(N=W.selected_batch_query)&&void 0!==N&&N.batchName?(0,u.jsxs)("span",{style:{fontWeight:"400",fontSize:"12px"},children:[" ","(",null!==(y=null===W||void 0===W||null===(Z=W.selected_batch_query)||void 0===Z?void 0:Z.batchName)&&void 0!==y?y:"",")"]}):null,"Optional"===(null===W||void 0===W?void 0:W.subjectOptional)&&"(".concat(null===W||void 0===W?void 0:W.subjectOptional,")")]}),(0,u.jsx)("p",{children:"".concat(null!==(_=null===W||void 0===W||null===(S=W.subjectTeacherName)||void 0===S?void 0:S.staffFirstName)&&void 0!==_?_:""," ").concat(null!==(T=null===W||void 0===W||null===(I=W.subjectTeacherName)||void 0===I?void 0:I.staffMiddleName)&&void 0!==T?T:""," ").concat(null!==(A=null===W||void 0===W||null===(D=W.subjectTeacherName)||void 0===D?void 0:D.staffLastName)&&void 0!==A?A:"")})]})]}),(0,u.jsx)("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:le,title:"Menu",style:{cursor:"pointer",height:"1.5rem"}})]})}):(0,u.jsx)(c.Z,{carryParentState:{...X,subjectId:null===W||void 0===W?void 0:W._id,subjectName:"".concat(null===W||void 0===W?void 0:W.subjectName," ").concat(null!==W&&void 0!==W&&W.subject_category?"(".concat(null===W||void 0===W?void 0:W.subject_category,")"):""," ").concat(null!==W&&void 0!==W&&null!==(E=W.selected_batch_query)&&void 0!==E&&E.batchName?"(".concat(null===W||void 0===W||null===(C=W.selected_batch_query)||void 0===C?void 0:C.batchName,")"):""," ").concat("Optional"===(null===W||void 0===W?void 0:W.subjectOptional)?"(".concat(null===W||void 0===W?void 0:W.subjectOptional,")"):""),batchId:null===W||void 0===W||null===(P=W.selected_batch_query)||void 0===P?void 0:P._id,isView:"ADMINISTRATOR",subjectTeacherName:"".concat(null!==(k=null===W||void 0===W||null===(M=W.subjectTeacherName)||void 0===M?void 0:M.staffFirstName)&&void 0!==k?k:""," ").concat(null!==(R=null===W||void 0===W||null===(w=W.subjectTeacherName)||void 0===w?void 0:w.staffMiddleName)&&void 0!==R?R:""," ").concat(null!==(F=null===W||void 0===W||null===(q=W.subjectTeacherName)||void 0===q?void 0:q.staffLastName)&&void 0!==F?F:"")},activeTab:"subject-menu",children:(0,u.jsxs)("div",{className:l.Z.class_container,style:{justifyContent:"space-between"},children:[(0,u.jsxs)("div",{className:l.Z.moderator_container_title,children:[(0,u.jsx)("img",{className:l.Z.oneRowImage,src:null!==W&&void 0!==W&&null!==(U=W.subjectTeacherName)&&void 0!==U&&U.staffProfilePhoto?"".concat(d.yI,"/").concat(null===W||void 0===W||null===(O=W.subjectTeacherName)||void 0===O?void 0:O.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"staff avatr"}),(0,u.jsxs)("div",{className:l.Z.class_container_text,children:[(0,u.jsxs)("h6",{children:[null!==(H=null===W||void 0===W?void 0:W.subjectName)&&void 0!==H?H:""," ",null!==W&&void 0!==W&&W.subject_category?"(".concat(null===W||void 0===W?void 0:W.subject_category,")"):"",null!==W&&void 0!==W&&null!==(V=W.selected_batch_query)&&void 0!==V&&V.batchName?(0,u.jsxs)("span",{style:{fontWeight:"400",fontSize:"12px"},children:[" ","(",null!==(L=null===W||void 0===W||null===(G=W.selected_batch_query)||void 0===G?void 0:G.batchName)&&void 0!==L?L:"",")"]}):null,"Optional"===(null===W||void 0===W?void 0:W.subjectOptional)&&"(".concat(null===W||void 0===W?void 0:W.subjectOptional,")")]}),(0,u.jsx)("p",{children:"".concat(null!==(J=null===W||void 0===W||null===($=W.subjectTeacherName)||void 0===$?void 0:$.staffFirstName)&&void 0!==J?J:""," ").concat(null!==(B=null===W||void 0===W||null===(Y=W.subjectTeacherName)||void 0===Y?void 0:Y.staffMiddleName)&&void 0!==B?B:""," ").concat(null!==(z=null===W||void 0===W||null===(K=W.subjectTeacherName)||void 0===K?void 0:K.staffLastName)&&void 0!==z?z:"")})]})]}),(0,u.jsx)("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:le,title:"Menu",style:{cursor:"pointer",height:"1.5rem"}})]})}),(0,u.jsx)(r.Z,{children:ne&&(0,u.jsx)(v,{departmentModal:!!ne,hideModal:()=>ie(""),id:ae,did:ee,cid:te,edit:ne,setEdit:ie,editSubject:ne,isEditBy:"DEPARTMENT_HEAD",onRefetch:se})})]})},j=e=>{let{subjects:t,carryParentState:a,isView:s,cid:n,instituteId:i,did:l,onRefetch:d}=e;return(0,u.jsx)(u.Fragment,{children:null===t||void 0===t?void 0:t.map((e=>(0,u.jsx)(m,{sub:e,carryParentState:a,isView:s,cid:n,instituteId:i,did:l,onRefetch:d},null===e||void 0===e?void 0:e._id)))})},h=e=>{var t,a,l;let{carryParentState:d,clsId:c,isView:o,instituteId:r,did:v}=e;const[m,h]=(0,s.useState)(!0),{oneClassAllSubject:b,oneClassAllSubjectRefetch:x}=(0,n.fk)({cid:c,skip:!c});return(0,s.useEffect)((()=>{var e;null!==b&&void 0!==b&&null!==(e=b.classes)&&void 0!==e&&e.subject&&h(!1)}),[null===b||void 0===b||null===(t=b.classes)||void 0===t?void 0:t.subject]),(0,s.useEffect)((()=>{c&&x()}),[c,x]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j,{subjects:null!==(a=null===b||void 0===b||null===(l=b.classes)||void 0===l?void 0:l.subject)&&void 0!==a?a:[],carryParentState:d,isView:o||"ADMINISTRATOR",cid:c,instituteId:r,did:v,onRefetch:x}),m&&(0,u.jsx)(i.Z,{})]})}},893:(e,t,a)=>{a.d(t,{Z:()=>Z});var s=a(72791),n=a(16313),i=a(53967),l=a(94721),d=a(89261),c=a(62921),o=a(17758),r=a(39230),u=a(24582),v=a(98734),m=a(37570),j=a(95048),h=a(99376),b=a(72310),x=a(34253),g=a.n(x),p=a(97892),f=a.n(p),N=a(80184);const y=e=>{let{today:t,alreadyMark:a,allIdsArray:i,clickedIndex:l,setClickedIndex:d,idPresentArray:c,idAbsentArray:o,setIdPresentArray:x,setIdAbsentArray:p,cid:y,isDepartment:Z,className:_,setIsRefetch:S}=e;const[T,I]=s.useState(!1),[A,D]=s.useState(!1),[E]=(0,u.b6)(),[C]=(0,u.wf)(),{t:P}=(0,r.$G)(),[k,M]=(0,s.useState)(!1),R=(0,j.I0)(),[w,F]=(0,s.useState)({msg:"",run:!1}),[q,U]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(t){const e=t.split("-"),a=e[0]>9?e[0]:"0".concat(e[0]),s=e[1]>9?e[1]:"0".concat(e[1]);f().extend(g());let n=!0,i=null;i=f()().isSameOrAfter(f()("".concat(e[2],"-").concat(s,"-").concat(a)),"year"),i?(i=f()().isSameOrAfter(f()("".concat(e[2],"-").concat(s,"-").concat(a)),"month"),i?(i=f()().isSameOrAfter(f()("".concat(e[2],"-").concat(s,"-").concat(a)),"day"),n=!!i):n=!1):n=!1,U(n)}}),[t]),s.useEffect((()=>{null!==c&&void 0!==c&&c.length||null!==o&&void 0!==o&&o.length?I(!0):I(!1)}),[c,o]);const O=()=>{M((e=>!e))};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:"1.5rem"},children:[(0,N.jsx)("div",{className:n.Z.buttons,children:(0,N.jsx)("div",{className:n.Z.save,onClick:O,children:P("export_zip_attendance")})}),q?(0,N.jsx)("div",{className:n.Z.buttons,children:0!==l?T&&!Z&&(0,N.jsx)(N.Fragment,{children:(0,N.jsx)("div",{className:n.Z.save,onClick:()=>{D((e=>!e));const e=t.split("-"),s=e[0]>9?e[0]:"0".concat(e[0]),n=e[1]>9?e[1]:"0".concat(e[1]);if(null!==a&&void 0!==a&&a._id)R(h.R.updateClassAttendance({clsId:y,ldate:"".concat(s,"/").concat(n,"/").concat(e[2]),presentStudent:null!==c&&void 0!==c&&c.length?c:[],absentStudent:null!==o&&void 0!==o&&o.length?o:[],alreadyMark:null===a||void 0===a?void 0:a._id})),C({said:null===a||void 0===a?void 0:a._id,attendanceUpdate:{date:"".concat(s,"/").concat(n,"/").concat(e[2]),present:null!==c&&void 0!==c&&c.length?c:[],absent:null!==o&&void 0!==o&&o.length?o:[]}}).then((()=>{S(!0),d(0),D((e=>!e)),x([]),p([])})).catch({});else{const t=[];null===i||void 0===i||i.map((e=>t.push(e._id)));const a=[],l=[];if(null!==c&&void 0!==c&&c.length)for(let e of t){let t=0;null!==c&&void 0!==c&&c.includes(e)||l.push(e),t+=1}else for(let e of t){let t=0;null!==o&&void 0!==o&&o.includes(e)||a.push(e),t+=1}E({cid:y,attendance:{date:"".concat(s,"/").concat(n,"/").concat(e[2]),present:null!==c&&void 0!==c&&c.length?c:a,absent:null!==o&&void 0!==o&&o.length?o:l}}).then((t=>{var i,r;"Today will be holiday Provided by department Admin or already marked attendance"===(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.message)?F({msg:"Today will be holiday Provided by department Admin or already marked attendance",run:!0}):R(h.R.addClassAttendance({clsId:y,ldate:"".concat(s,"/").concat(n,"/").concat(e[2]),presentStudent:null!==c&&void 0!==c&&c.length?c:a,absentStudent:null!==o&&void 0!==o&&o.length?o:l,alreadyMark:null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.alreadyMark}));d(0),D((e=>!e)),x([]),p([])})).catch({})}},children:P("save")})}):""}):(0,N.jsx)("div",{className:n.Z.buttons})]}),A&&(0,N.jsx)(v.Z,{}),k&&(0,N.jsx)(m.Z,{cid:y,onClose:O,className:_}),w.run&&(0,N.jsx)(b.Ch,{msg:w.msg,run:w.run,setRun:()=>F({msg:"",run:!1}),postiton:"bottom",type:"error"})]})};const Z=function(e){var t,a,v,m,h,b,x,g,p,f,Z,_,S,T;let{cid:I,isDepartment:A,className:D,instituteId:E}=e;const{calendarData:C,selectedDate:P,todayFormatted:k,switchMonth:M,monthNames:R,getNextMonth:w,getPrevMonth:F}=(0,i.Z)(),[q,U]=(0,s.useState)(k),O=q.split("-"),H=O[0]>9?O[0]:"0".concat(O[0]),V=O[1]>9?O[1]:"0".concat(O[1]),{t:L}=(0,r.$G)(),G=(0,j.v9)((e=>e.attendanceStore.classTeacher)),[J,$]=(0,s.useState)(""),[B,Y]=(0,s.useState)(!1),{classAllStudent:z,classAllStudentRefetch:K}=(0,u.EY)({data:{cid:I,page:1,limit:30},skip:!I}),{classStudentCurrentAttendance:W,classStudentCurrentAttendanceRefetch:X}=(0,u.Px)({data:{cid:I,date:"".concat(H,"/").concat(V,"/").concat(O[2])},skip:!I});(0,s.useEffect)((()=>{if((null===G||void 0===G?void 0:G.length)>0){const e=q.split("-"),t=e[0]>9?e[0]:"0".concat(e[0]),a=e[1]>9?e[1]:"0".concat(e[1]);let s="";for(let n of G)if((null===n||void 0===n?void 0:n.ldate)==="".concat(t,"/").concat(a,"/").concat(e[2])){if((null===n||void 0===n?void 0:n.clsId)===I){s=n;break}Y(!1)}else Y(!1);$(s)}}),[G,q,I,B]),(0,s.useEffect)((()=>{I&&(K(),X())}),[I,X,K]);const Q=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ee=Math.floor(C.map((function(e){return e.date})).indexOf(q)/10),[te,ae]=(0,s.useState)(ee),se=10*te,ne=Math.ceil(C.length/10),ie=C.slice(se,se+10).map(((e,t)=>(0,N.jsxs)("div",{className:e.date===q?"".concat(n.Z.date," ").concat(n.Z.clickedDate):n.Z.date,onClick:()=>U(e.date),children:[(0,N.jsx)("h6",{children:e.date.split("-")[0]}),(0,N.jsx)("p",{children:Q[e.day]})]},t))),[le,de]=(0,s.useState)(1),[ce,oe]=(0,s.useState)([]),[re,ue]=(0,s.useState)([]),[ve,me]=s.useState([]),[je,he]=s.useState([]),[be,xe]=(0,s.useState)(!1);s.useEffect((()=>{var e,t;oe(null===z||void 0===z||null===(e=z.classes)||void 0===e?void 0:e.ApproveStudent),ue(null===z||void 0===z||null===(t=z.classes)||void 0===t?void 0:t.ApproveStudent)}),[null===z||void 0===z||null===(t=z.classes)||void 0===t?void 0:t.ApproveStudent]),s.useEffect((()=>{me([]),he([])}),[le]);const ge=e=>{const t=[...ve];if(null!==t&&void 0!==t&&t.includes(e)){const a=t.indexOf(e);t.splice(a,1),me((()=>[...t]))}else me((t=>[...t,e]))},pe=e=>{const t=[...je];if(null!==t&&void 0!==t&&t.includes(e)){const a=t.indexOf(e);t.splice(a,1),he((()=>[...t]))}else he((t=>[...t,e]))};return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:n.Z.attendence,style:{border:A?"none":"0.5px solid #cacaca"},children:[(0,N.jsxs)("div",{className:n.Z.attendencehead,children:[(0,N.jsxs)("div",{className:n.Z.attendenceBtns,children:[(0,N.jsxs)("div",{className:n.Z.changemonth,onClick:()=>xe(!be),children:[(0,N.jsxs)("h6",{children:[R[P.getMonth()]," ",P.getFullYear()]}),(0,N.jsx)("img",{alt:"not found",src:"/images/dropdown-icon.svg"}),be&&(0,N.jsx)("div",{className:n.Z.selectMonthList,children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(((e,t)=>(0,N.jsx)("div",{className:n.Z.month,onClick:()=>{M(t),xe(!1)},children:e},t)))})]}),(0,N.jsx)(y,{alreadyMark:J?{_id:null===J||void 0===J?void 0:J.alreadyMark}:null===W||void 0===W||null===(a=W.classes)||void 0===a||null===(v=a.attendenceDate)||void 0===v?void 0:v[0],today:q,allIdsArray:null===z||void 0===z||null===(m=z.classes)||void 0===m?void 0:m.ApproveStudent,classStudentCurrentAttendanceRefetch:X,clickedIndex:le,setClickedIndex:de,idPresentArray:ve,idAbsentArray:je,setIdPresentArray:me,setIdAbsentArray:he,cid:I,isDepartment:A,className:D,setIsRefetch:Y})]}),(0,N.jsxs)("div",{className:n.Z.calender,children:[(0,N.jsx)("div",{className:n.Z.arrowbtn,onClick:()=>{te>0?ae((e=>e-1)):(ae(ne-1),F())},children:(0,N.jsx)("img",{alt:"not found",src:"/images/members/left-icon.svg"})}),(0,N.jsx)("div",{className:n.Z.dates,children:ie}),(0,N.jsx)("div",{className:n.Z.arrowbtn,onClick:()=>{te+1<ne?ae((e=>e+1)):(ae(0),w())},children:(0,N.jsx)("img",{alt:"not found",src:"/images/members/right-icon.svg"})})]})]}),(0,N.jsx)(l.Z,{}),(0,N.jsxs)("div",{className:n.Z.tabs,children:[(0,N.jsxs)("div",{className:0===le?"".concat(n.Z.tab," ").concat(n.Z.purple):"".concat(n.Z.tab," ").concat(n.Z.grey),onClick:()=>de(0),children:[L("total")," ",null===z||void 0===z||null===(h=z.classes)||void 0===h||null===(b=h.ApproveStudent)||void 0===b?void 0:b.length]}),(0,N.jsxs)("div",{className:1===le?"".concat(n.Z.tab," ").concat(n.Z.tabgreen):"".concat(n.Z.tab," ").concat(n.Z.light),onClick:()=>de(1),children:[L("present")," ",J?null!==(x=null===J||void 0===J?void 0:J.presentCount)&&void 0!==x?x:0:null===W||void 0===W||null===(g=W.classes)||void 0===g||null===(p=g.attendenceDate[0])||void 0===p?void 0:p.presentTotal]}),(0,N.jsxs)("div",{className:2===le?"".concat(n.Z.tab," ").concat(n.Z.red):"".concat(n.Z.tab," ").concat(n.Z.rose),onClick:()=>de(2),children:[L("absent")," ",J?null!==(f=null===J||void 0===J?void 0:J.absentCount)&&void 0!==f?f:0:null===W||void 0===W||null===(Z=W.classes)||void 0===Z||null===(_=Z.attendenceDate[0])||void 0===_?void 0:_.absentTotal]})]}),(0,N.jsxs)("div",{className:n.Z.list,children:[0===le&&(null===z||void 0===z||null===(S=z.classes)||void 0===S||null===(T=S.ApproveStudent)||void 0===T?void 0:T.map(((e,t)=>{var a,s,i,l,c,o,r,u;return J?null!==J&&void 0!==J&&null!==(a=J.presentStudent)&&void 0!==a&&a.includes(e._id)?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(d.Z,{student:e,status:"present",instituteId:E},t),(0,N.jsx)("div",{className:n.Z.divider})]}):null!==J&&void 0!==J&&null!==(s=J.absentStudent)&&void 0!==s&&s.includes(e._id)?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(d.Z,{student:e,status:"absent",instituteId:E},t),(0,N.jsx)("div",{className:n.Z.divider})]}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(d.Z,{student:e,status:"initial",instituteId:E},t),(0,N.jsx)("div",{className:n.Z.divider})]}):null!==W&&void 0!==W&&null!==(i=W.classes)&&void 0!==i&&null!==(l=i.attendenceDate[0])&&void 0!==l&&null!==(c=l.presentStudent)&&void 0!==c&&c.includes(e._id)?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(d.Z,{student:e,status:"present",instituteId:E},t),(0,N.jsx)("div",{className:n.Z.divider})]}):null!==W&&void 0!==W&&null!==(o=W.classes)&&void 0!==o&&null!==(r=o.attendenceDate[0])&&void 0!==r&&null!==(u=r.absentStudent)&&void 0!==u&&u.includes(e._id)?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(d.Z,{student:e,status:"absent",instituteId:E},t),(0,N.jsx)("div",{className:n.Z.divider})]}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(d.Z,{student:e,status:"initial",instituteId:E},t),(0,N.jsx)("div",{className:n.Z.divider})]})}))),1===le&&(null===ce||void 0===ce?void 0:ce.length)>0&&(null===ce||void 0===ce?void 0:ce.map(((e,t)=>{var a,s,i,l;return J?null!==J&&void 0!==J&&null!==(a=J.presentStudent)&&void 0!==a&&a.includes(e._id)?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(c.Z,{student:e,status:"present",presentTabHandler:ge,instituteId:E},t),(0,N.jsx)("div",{className:n.Z.divider})]}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(c.Z,{student:e,presentTabHandler:ge,status:"absent",instituteId:E},t),(0,N.jsx)("div",{className:n.Z.divider})]}):null!==W&&void 0!==W&&null!==(s=W.classes)&&void 0!==s&&null!==(i=s.attendenceDate[0])&&void 0!==i&&null!==(l=i.presentStudent)&&void 0!==l&&l.includes(e._id)?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(c.Z,{student:e,status:"present",presentTabHandler:ge,instituteId:E},t),(0,N.jsx)("div",{className:n.Z.divider})]}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(c.Z,{student:e,presentTabHandler:ge,status:"absent",instituteId:E},t),(0,N.jsx)("div",{className:n.Z.divider})]})}))),2===le&&(null===re||void 0===re?void 0:re.length)>0&&(null===re||void 0===re?void 0:re.map(((e,t)=>{var a,s,i,l;return J?null!==J&&void 0!==J&&null!==(a=J.absentStudent)&&void 0!==a&&a.includes(e._id)?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(o.Z,{student:e,status:"absent",absentTabHandler:pe,instituteId:E},t),(0,N.jsx)("div",{className:n.Z.divider})]}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(o.Z,{student:e,status:"present",absentTabHandler:pe,instituteId:E},t),(0,N.jsx)("div",{className:n.Z.divider})]}):null!==W&&void 0!==W&&null!==(s=W.classes)&&void 0!==s&&null!==(i=s.attendenceDate[0])&&void 0!==i&&null!==(l=i.absentStudent)&&void 0!==l&&l.includes(e._id)?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(o.Z,{student:e,status:"absent",absentTabHandler:pe,instituteId:E},t),(0,N.jsx)("div",{className:n.Z.divider})]}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(o.Z,{student:e,status:"present",absentTabHandler:pe,instituteId:E},t),(0,N.jsx)("div",{className:n.Z.divider})]})})))]})]})})}},76452:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});a(72791);var s=a(16871),n=a(43504),i=a(39230),l=a(22984),d=a(80184);const c=function(e){var t,a,c;let{carryParentState:o}=e;const{t:r}=(0,i.$G)(),u=(0,s.TH)(),v=(0,s.UO)();return(0,d.jsx)("div",{className:l.Z.mcqTop,style:{padding:"0"},children:(0,d.jsxs)("div",{className:l.Z.mcqToptabs,children:[(0,d.jsx)(n.rU,{to:"/q/".concat(v.username,"/member/department/").concat(v.deptname,"?a=class-detail"),state:o,className:"class-detail"===(null===(t=u.search)||void 0===t?void 0:t.substring(3))?"".concat(l.Z.mcqTopItem," ").concat(l.Z.active):l.Z.mcqTopItem,children:(0,d.jsx)("div",{children:r("students")})}),(0,d.jsx)(n.rU,{to:"/q/".concat(v.username,"/member/department/").concat(v.deptname,"?a=class-attendance"),state:o,className:"class-attendance"===(null===(a=u.search)||void 0===a?void 0:a.substring(3))?"".concat(l.Z.mcqTopItem," ").concat(l.Z.active):l.Z.mcqTopItem,children:(0,d.jsx)("div",{children:r("attendance")})}),(0,d.jsx)(n.rU,{to:"/q/".concat(v.username,"/member/department/").concat(v.deptname,"?a=class-subject"),state:o,className:"class-subject"===(null===(c=u.search)||void 0===c?void 0:c.substring(3))?"".concat(l.Z.mcqTopItem," ").concat(l.Z.active):l.Z.mcqTopItem,children:(0,d.jsx)("div",{children:r("subjects")})})]})})};var o=a(33148),r=a(69614),u=a(65408),v=a(36185),m=a(893),j=a(8148),h=a(11806),b=a(60726);const x=e=>{let{carryParentState:t,isDepartment:a}=e;const{t:s}=(0,i.$G)();return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:h.Z.MiddleContentLeft,style:{border:"none"},children:"CLASS_TEACHER"===a?(0,d.jsxs)("div",{className:h.Z.item,style:{paddingLeft:"2vw"},children:[(0,d.jsx)(b.Z,{carryParentState:t,activeTab:"subject-catalog",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/class/class-catalog-icon.svg",alt:"Class Catalog"}),(0,d.jsx)("p",{children:s("catalog")})]})}),(0,d.jsx)(b.Z,{carryParentState:t,activeTab:"subject-attendance",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/class/class-attendance-icon.svg",alt:"attendence"}),(0,d.jsxs)("p",{children:[" ",s("attendance")," "]})]})}),(0,d.jsx)(b.Z,{carryParentState:t,activeTab:"subject-assignment",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/subject/subject-assignment-icon.svg",alt:"assignment"}),(0,d.jsx)("p",{children:s("assigmnent")})]})}),(0,d.jsx)(b.Z,{carryParentState:t,activeTab:"subject-exam",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/department/department-examination-icon.svg",alt:"attendence"}),(0,d.jsx)("p",{children:s("examinations")})]})}),(0,d.jsx)(b.Z,{carryParentState:t,activeTab:"subject-academic",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/subject/subject-daily-update-icon.svg",alt:"student Request"}),(0,d.jsx)("p",{style:{textAlign:"center"},children:s("academics_teachings")})]})})]}):(0,d.jsxs)("div",{className:h.Z.item,style:{paddingLeft:"2vw"},children:[(0,d.jsx)(j.Z,{carryParentState:t,activeTab:"subject-catalog",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/class/class-catalog-icon.svg",alt:"Class Catalog"}),(0,d.jsx)("p",{children:s("catalog")})]})}),(0,d.jsx)(j.Z,{carryParentState:t,activeTab:"subject-attendance",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/class/class-attendance-icon.svg",alt:"attendence"}),(0,d.jsxs)("p",{children:[" ",s("attendance")," "]})]})}),(0,d.jsx)(j.Z,{carryParentState:t,activeTab:"subject-assignment",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/subject/subject-assignment-icon.svg",alt:"assignment"}),(0,d.jsx)("p",{children:s("assigmnent")})]})}),(0,d.jsx)(j.Z,{carryParentState:t,activeTab:"subject-exam",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/department/department-examination-icon.svg",alt:"attendence"}),(0,d.jsx)("p",{children:s("examinations")})]})}),(0,d.jsx)(j.Z,{carryParentState:t,activeTab:"subject-academic",children:(0,d.jsxs)("div",{className:h.Z.itemIcon,children:[(0,d.jsx)("img",{src:"/images/member_tab/subject/subject-daily-update-icon.svg",alt:"student Request"}),(0,d.jsx)("p",{style:{textAlign:"center"},children:s("academics_teachings")})]})})]})})})};var g=a(17121),p=a(11457),f=a(73453),N=a(60463),y=a(7995),Z=a(6763),_=a(61587);const S=e=>{var t,a,l,j,h,b,S,T,I,A,D,E,C,P,k,M,R,w,F,q,U,O,H,V,L,G;let{carryParentState:J,viewAs:$,did:B,instituteId:Y}=e;const{t:z}=(0,i.$G)(),K=(0,s.TH)(),[W]=(0,n.lr)();return(0,d.jsx)(d.Fragment,{children:"subject-academic-detail"===W.get("a")?(0,d.jsx)(y.Z,{}):"assignment-detail"===W.get("a")?(0,d.jsx)(Z.Z,{isDepartment:$,carryParentState:J}):"assignment-student-detail"===W.get("a")?(0,d.jsx)(_.Z,{isDepartment:$}):(0,d.jsx)("div",{className:o.Z.departmenthead,children:(0,d.jsxs)("div",{className:o.Z.demaprtment_list,children:[(0,d.jsx)("div",{className:o.Z.with_search,style:{marginBottom:"0.7rem",alignItems:"flex-start",flexDirection:"column"},children:"subject"===(null===(t=W.get("a"))||void 0===t?void 0:t.substring(0,7))?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("h6",{children:[z("subject_name")," : ",null!==(a=null===(l=K.state)||void 0===l?void 0:l.subjectName)&&void 0!==a?a:""]}),(0,d.jsxs)("h6",{children:[z("subject_teacher")," : ",null!==(j=null===(h=K.state)||void 0===h?void 0:h.subjectTeacherName)&&void 0!==j?j:""]})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("h6",{children:[z("class_name")," : ",null!==(b=null===(S=K.state)||void 0===S?void 0:S.clsName)&&void 0!==b?b:""]}),(0,d.jsxs)("h6",{children:[z("class_teacher")," : ",null!==(T=null===(I=K.state)||void 0===I?void 0:I.teacherName)&&void 0!==T?T:""]})]})}),"subject-detail"===W.get("a")?(0,d.jsx)(x,{carryParentState:J,isDepartment:$}):"subject-catalog"===W.get("a")?(0,d.jsx)(v.Z,{cid:null===(A=K.state)||void 0===A?void 0:A.clsId,bid:null===(D=K.state)||void 0===D?void 0:D.batchId,isDepartment:$,sid:null===(E=K.state)||void 0===E?void 0:E.subjectId}):"subject-attendance"===W.get("a")?(0,d.jsx)(g.Z,{sid:null===(C=K.state)||void 0===C?void 0:C.subjectId,bid:null===(P=K.state)||void 0===P?void 0:P.batchId,isDepartment:$,subjectName:null!==(k=null===(M=K.state)||void 0===M?void 0:M.subjectName)&&void 0!==k?k:""}):"subject-assignment"===W.get("a")?(0,d.jsx)(p.Z,{sid:null===(R=K.state)||void 0===R?void 0:R.subjectId,cid:null===(w=K.state)||void 0===w?void 0:w.clsId,carryParentState:J,bid:null===(F=K.state)||void 0===F?void 0:F.batchId,isDepartment:$}):"subject-exam"===W.get("a")?(0,d.jsx)(f.Z,{sid:null===(q=K.state)||void 0===q?void 0:q.subjectId,cid:null===(U=K.state)||void 0===U?void 0:U.clsId,isDepartment:$}):"subject-academic"===W.get("a")?(0,d.jsx)(N.Z,{sid:null===(O=K.state)||void 0===O?void 0:O.subjectId,carryParentState:J,isDepartment:$}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(c,{carryParentState:J}),"class-detail"===W.get("a")&&(0,d.jsx)(r.Z,{cid:K.state.clsId,openAs:"SUBJECT_TEACHER",isDepartment:!0}),"class-subject"===W.get("a")&&(0,d.jsx)(u.Z,{carryParentState:J,clsId:null===(H=K.state)||void 0===H?void 0:H.clsId,isView:"DEPARTMENT_HEAD",instituteId:Y,did:B}),"class-attendance"===W.get("a")&&(0,d.jsx)(m.Z,{cid:null===(V=K.state)||void 0===V?void 0:V.clsId,isDepartment:!0,className:null!==(L=null===(G=K.state)||void 0===G?void 0:G.clsName)&&void 0!==L?L:""})]})]})})})}},60463:(e,t,a)=>{a.d(t,{Z:()=>_});var s=a(72791),n=a(83401),i=a(39230),l=a(98094),d=a(99532),c=a(23441),o=a(65543),r=a(39595),u=a(34219),v=a(11105),m=a(80184);const j=e=>{var t;let{sid:a,reftechStatus:n,setReftechStatus:i,isDepartment:l}=e;const[j,h]=(0,s.useState)(!0),[b,x]=(0,s.useState)(1),[g,p]=(0,c.YD)(),[f,N]=(0,s.useState)([]),[y,Z]=(0,s.useState)(!0),{scrollToTop:_}=(0,o.u)(),{getAllDailySubject:S,getAllDailySubjectRefetch:T}=(0,r.RX)({data:{sid:a,page:n?1:b,limit:10},skip:!a});(0,s.useEffect)((()=>{n&&(x((e=>1)),i(!1),T())}),[n]),(0,s.useEffect)((()=>{a&&(Z(!0),T())}),[a,b,T]),(0,s.useEffect)((()=>{_()}),[_]),(0,s.useEffect)((()=>{p&&j&&x((e=>e+1))}),[p,j]),(0,s.useEffect)((()=>{var e,t;null!==S&&void 0!==S&&S.dailyUpdate?(N(1===b?null===S||void 0===S?void 0:S.dailyUpdate:e=>[...new Set([...e,...null===S||void 0===S?void 0:S.dailyUpdate].map(JSON.stringify))].map(JSON.parse)),Z(!1)):0===(null===S||void 0===S||null===(e=S.dailyUpdate)||void 0===e?void 0:e.length)&&Z(!1),10===(null===S||void 0===S||null===(t=S.dailyUpdate)||void 0===t?void 0:t.length)?h(!0):h(!1)}),[null===S||void 0===S?void 0:S.dailyUpdate]);const I=()=>{x((e=>1)),Z(!0),T()};return(0,m.jsxs)(m.Fragment,{children:[null===f||void 0===f?void 0:f.map(((e,t)=>(null===f||void 0===f?void 0:f.length)===t+1?(0,m.jsx)("div",{ref:g,children:(0,m.jsx)(d.Z,{daily:e,sid:a,onParentRefetch:I,isView:l?"STUDENT":""})},null===e||void 0===e?void 0:e._id):(0,m.jsx)(d.Z,{daily:e,sid:a,onParentRefetch:I,isView:l?"STUDENT":""},null===e||void 0===e?void 0:e._id))),!y&&!(null!==S&&void 0!==S&&null!==(t=S.dailyUpdate)&&void 0!==t&&t.length)&&(0,m.jsx)(u.Z,{customStyleContainer:{marginTop:"9rem"},title:"No academics found yet."}),y&&(0,m.jsx)(v.Z,{status:"white"})]})};var h=a(10515),b=a(4213),x=a(16871),g=a(43504),p=a(93638),f=a(29392),N=a(1095),y=a(55336),Z=a(61899);const _=e=>{let{sid:t,carryParentState:a,isDepartment:d}=e;const{t:c}=(0,i.$G)(),o=(0,x.UO)(),r=(0,x.TH)(),u=(0,x.s0)(),[v,_]=(0,s.useState)(!1),[S,T]=(0,s.useState)(!1),[I,A]=(0,s.useState)(!1),[D,E]=(0,s.useState)(!1),[C,P]=(0,s.useState)(""),[k]=(0,f.cy)(),M=()=>{_((e=>!e))},R=()=>null;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:n.Z.subject_academic_container,children:[(0,m.jsxs)("div",{className:n.Z.subject_academic_title,children:[(0,m.jsx)("h6",{children:c("academics_teachings")}),(0,m.jsxs)("div",{className:n.Z.subject_academic_link,children:[(0,m.jsx)(p.Z,{label:"export_report",customStyle:{margin:"0",padding:"0.3rem 0.5rem"},onAction:()=>{t&&(E((e=>!e)),k({sid:t,is_pdf:"YES"}).then((e=>{var t;null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.excel_key?setTimeout((()=>{var t;E((e=>!e)),P(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.excel_key)}),2500):E((e=>!e))})).catch((()=>{})))}}),d?null:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(p.Z,{label:"create_co",customStyle:{margin:"0",padding:"0.3rem 0.5rem"},onAction:()=>{let e="/q/".concat(o.username,"/member/subject/").concat(o.sname,"?a=co-setting");u(e,{state:r.state})}}),(0,m.jsx)(p.Z,{label:"record_lecture_teachings",customStyle:{margin:"0",padding:"0.3rem 0.5rem"},onAction:M})]}),"CLASS_TEACHER"===d?(0,m.jsx)(g.rU,{to:"/q/".concat(o.username,"/member/class/").concat(o.cname,"?a=subject-academic-detail"),state:{...a,subjectId:t,isView:"DEPARTMENT_HEAD"},children:(0,m.jsx)(p.Z,{label:"view_academic_detail",customStyle:{margin:"0",padding:"0.3rem 0.5rem"},onAction:R})}):"DEPARTMENT_HEAD"===d?(0,m.jsx)(g.rU,{to:"/q/".concat(o.username,"/member/department/").concat(o.deptname,"?a=subject-academic-detail"),state:{...a,subjectId:t,isView:"DEPARTMENT_HEAD"},children:(0,m.jsx)(p.Z,{label:"view_academic_detail",customStyle:{margin:"0",padding:"0.3rem 0.5rem"},onAction:R})}):(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(g.rU,{to:"/q/".concat(o.username,"/member/subject/").concat(o.sname,"?a=subject-academic"),state:{...a,subjectId:t,isView:d?"DEPARTMENT_HEAD":"SUBJECT_TEACHER",isSubType:"SUBJECT_TEACHER_INSTITUTE"},children:(0,m.jsx)(p.Z,{label:"view_academic_detail",customStyle:{margin:"0",padding:"0.3rem 0.5rem"},onAction:R})})})]})]}),(0,m.jsx)(l.Z,{customStyle:{width:"100%",marginTop:"0.7rem",marginBottom:"0.7rem"}}),v&&(0,m.jsx)(h.Z,{onClose:M,sid:t,onRefetch:()=>{A(!0)}}),S&&(0,m.jsx)(b.Z,{onClose:()=>{T((e=>!e))},sid:t}),(0,m.jsx)(j,{sid:t,reftechStatus:I,setReftechStatus:A,isDepartment:d})]}),D&&(0,m.jsx)(y.default,{}),C?(0,m.jsx)(Z.Z,{subUrl:N.Sd,documentUrl:C,fileName:C,onClose:()=>{P("")}}):null]})}},99532:(e,t,a)=>{a.d(t,{Z:()=>j});var s=a(72791),n=a(83401),i=a(72426),l=a.n(i),d=a(39230),c=a(69721),o=a(1095),r=a(80184);const u=e=>{var t,a,s,i,u,v,m;let{isView:j,updateDescription:h,upadateImage:b,createdAt:x,subject:g,ytLink:p}=e;const{t:f}=(0,d.$G)();return(0,r.jsxs)("div",{className:n.Z.aditional_info_container,style:{marginTop:"1rem"},children:["STUDENT"===j?(0,r.jsxs)("div",{className:n.Z.aditional_info_dates,children:[(0,r.jsx)("h5",{children:null!==(t=null===g||void 0===g?void 0:g.subjectName)&&void 0!==t?t:""}),(0,r.jsx)("h6",{children:"".concat(null!==(a=null===g||void 0===g||null===(s=g.subjectTeacherName)||void 0===s?void 0:s.staffFirstName)&&void 0!==a?a:""," ").concat(null!==(i=null===g||void 0===g||null===(u=g.subjectTeacherName)||void 0===u?void 0:u.staffMiddleName)&&void 0!==i?i:""," ").concat(null!==(v=null===g||void 0===g||null===(m=g.subjectTeacherName)||void 0===m?void 0:m.staffLastName)&&void 0!==v?v:"")})]}):null,h||(null===b||void 0===b?void 0:b.length)>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h6",{children:f("additional_info")}),(0,r.jsx)("p",{children:h}),p?(0,r.jsx)("a",{href:"".concat(p),target:"_blank",rel:"noopener noreferrer",style:{color:"#00f"},children:p}):null,(null===b||void 0===b?void 0:b.length)>0?(0,r.jsx)("div",{className:n.Z.aditional_info_images,children:null===b||void 0===b?void 0:b.map((e=>(0,r.jsx)("a",{title:"view File",href:"".concat(o.q2,"/").concat(null===e||void 0===e?void 0:e.documentKey),target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,r.jsx)("img",{src:"".concat(c.yI,"/").concat(null===e||void 0===e?void 0:e.documentKey),alt:"files"},null===e||void 0===e?void 0:e.documentKey)})))}):null]}):null,(0,r.jsxs)("div",{className:n.Z.aditional_info_dates,children:[(0,r.jsx)("p",{children:l()(x).format("DD MMM yyyy")}),(0,r.jsx)("p",{children:l()(x).format("LT")})]})]})};var v=a(61292),m=a(10515);const j=e=>{var t;let{daily:a,sid:i,onParentRefetch:c,isView:o}=e;const{t:j}=(0,d.$G)(),[h,b]=(0,s.useState)("");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:n.Z.academic_card_container,children:[(0,r.jsxs)("div",{className:n.Z.academic_card_top,style:{justifyContent:"space-between"},children:[(0,r.jsxs)("div",{className:n.Z.academic_card_top_text,children:[(0,r.jsx)("img",{src:"/images/member_tab/subject/subject-topic-icon.svg",alt:"topic icon"}),(0,r.jsxs)("h6",{children:[l()(null===a||void 0===a?void 0:a.date).format("Do MMMM, yyyy"),": Topics Covered"]})]}),"STUDENT"===o?null:(0,r.jsxs)("h6",{onClick:()=>b(a),children:["(",j("edit_"),")"]})]}),null===a||void 0===a||null===(t=a.daily_topic)||void 0===t?void 0:t.map((e=>(0,r.jsx)(v.Z,{topic:null===e||void 0===e?void 0:e.topic,topicType:null===e||void 0===e?void 0:e.status,topicCurrentStatus:null===e||void 0===e?void 0:e.current_status,isView:"DAILY",teachingMethod:null===e||void 0===e?void 0:e.teaching_method},null===e||void 0===e?void 0:e._id))),(0,r.jsx)(u,{updateDescription:null===a||void 0===a?void 0:a.updateDescription,upadateImage:null===a||void 0===a?void 0:a.upadateImage,createdAt:null===a||void 0===a?void 0:a.createdAt,isView:o,subject:null===a||void 0===a?void 0:a.subject,ytLink:null===a||void 0===a?void 0:a.yt_link})]}),h&&(0,r.jsx)(m.Z,{onClose:()=>b(""),sid:i,onRefetch:c,dailyMenu:h})]})}}}]);
//# sourceMappingURL=76452.01d07cb8.chunk.js.map