"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[4522],{91022:function(e,t,n){var o=n(1413),l=n(29439),s=n(72791),i=n(39230),a=n(38733),d=n(80184);t.Z=function(e){var t=e.selectLabel,n=e.value,r=e.onClick,c=e.selectedValue,u=e.options,v=e.errorShow,m=e.customStyleContainer,_=e.customLabelStyle,h=e.customListStyle,f=e.openAs,p=e.viewAs,x=(0,i.$G)().t,Z=(0,s.useState)(!1),j=(0,l.Z)(Z,2),g=j[0],S=j[1],b=function(){"REFUND"===f||"BACKLOG"===f||"FINANCE_MANAGER"===p||S((function(e){return!e}))},N=function(e){r(e),b()};return(0,d.jsxs)("div",{className:a.Z.join_form_container,style:(0,o.Z)({},m),children:[(0,d.jsxs)("p",{className:a.Z.join_form_select_paragraph,style:(0,o.Z)({},_),children:[t," ",v&&(0,d.jsxs)("span",{style:{color:"red",marginLeft:"15px"},children:["* ",x("form_require_label")]})]}),(0,d.jsxs)("section",{className:a.Z.join_form_select_custom,onClick:b,children:[n?(0,d.jsx)("p",{className:a.Z.join_form_select_custom_paragraph,children:null!==n&&void 0!==n?n:""}):(0,d.jsx)("p",{className:a.Z.join_form_select_custom_paragraph,children:c}),(0,d.jsx)("img",{className:a.Z.join_form_select_custom_icon,src:"/images/down-icon.svg",alt:"categor icon"})]}),g&&(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("section",{className:a.Z.join_form_select_custom_list,style:h?(0,o.Z)({},h):(null===u||void 0===u?void 0:u.length)>2?{overflowY:"scroll"}:{backgroundColor:"#ffffff"},children:[(0,d.jsx)("p",{className:a.Z.join_form_select_custom_paragraph_option,onClick:b,children:c}),null===u||void 0===u?void 0:u.map((function(e,t){return(0,d.jsx)("p",{onClick:function(){return N(e)},className:a.Z.join_form_select_custom_paragraph_option,children:e},t)}))]})})]})}},74522:function(e,t,n){n.d(t,{Z:function(){return T}});var o=n(29439),l=n(72791),s=n(33148),i=n(39230),a=n(74067),d=n(74289),r=n(11105),c=n(1413),u=n(24582),v=n(41233),m=n(98094),_=n(36665),h=n(37762),f=n(93433),p=n(69721),x=n(80184),Z=function(e){var t,n,o,l,a,d,r,c,u=e.onSelectStudent,v=e.stu,m=e.promoteData,_=(0,i.$G)().t;return(0,x.jsx)("div",{className:null!==m&&void 0!==m&&null!==(t=m.students)&&void 0!==t&&t.includes(null===v||void 0===v?void 0:v._id)?" ".concat(s.Z.promote_student_card," ").concat(s.Z.promote_student_cardActive):s.Z.promote_student_card,onClick:function(){return u(null===v||void 0===v?void 0:v._id)},style:{width:"100%"},children:(0,x.jsxs)("div",{className:s.Z.promote_student_card_text,style:{width:"100%"},children:[(0,x.jsx)("img",{alt:"",src:null!==v&&void 0!==v&&v.studentProfilePhoto?"".concat(p.yI,"/").concat(null===v||void 0===v?void 0:v.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg"}),(0,x.jsxs)("div",{className:s.Z.promote_student_check_container,children:[(0,x.jsxs)("div",{className:s.Z.promote_student_name,children:[(0,x.jsxs)("p",{children:[null===v||void 0===v?void 0:v.studentFirstName," ",null!==v&&void 0!==v&&v.studentMiddleName?null===v||void 0===v?void 0:v.studentMiddleName:" "," ",null===v||void 0===v?void 0:v.studentLastName]}),(0,x.jsxs)("p",{children:[_("gr_number"),null===v||void 0===v?void 0:v.studentGRNO]})]}),(0,x.jsxs)("div",{className:s.Z.promote_student_check,children:[(0,x.jsxs)("div",{className:s.Z.promote_student_name,children:[null!==v&&void 0!==v&&null!==(n=v.fee_structure)&&void 0!==n&&n.applicable_fees?(0,x.jsxs)("p",{children:[_("applicable_fees_only")," ",_("rs"),".",null!==(o=null===v||void 0===v||null===(l=v.fee_structure)||void 0===l?void 0:l.applicable_fees)&&void 0!==o?o:0]}):"",(0,x.jsxs)("p",{children:[_("paid_fees")," ",": ",_("rs"),".",null!==(a=null===v||void 0===v||null===(d=v.remainingFeeList)||void 0===d||null===(r=d[0])||void 0===r?void 0:r.paid_fee)&&void 0!==a?a:0]})]}),(0,x.jsx)("div",{className:s.Z.promote_student_name,children:null!==m&&void 0!==m&&null!==(c=m.students)&&void 0!==c&&c.includes(null===v||void 0===v?void 0:v._id)?(0,x.jsx)("img",{className:s.Z.department_checkbox,src:"/images/checkbox-icon.svg",alt:"icon"}):(0,x.jsx)("img",{className:s.Z.department_checkbox,src:"/images/box-icon.svg",alt:"icon"})})]})]})]})})},j=n(98734),g=n(15961),S=function(e){var t=e.isWrapper,n=e.onClose,o=e.title,l=e.firstMessage,s=e.spanMessage,i=e.outerSpanMessage,a=e.lastMessage,d=e.buttonLabel,r=e.onHandler,c=e.buttonStyle,u=e.messageStyle;return(0,x.jsx)(x.Fragment,{children:t?(0,x.jsx)(_.Z,{onClose:n,children:(0,x.jsxs)("div",{className:g.Z.admission_modal,children:[(0,x.jsx)("h6",{className:g.Z.admission_modal_heading,children:o}),(0,x.jsx)(m.Z,{customStyle:{width:"100%",margin:"0.7rem 0"}}),(0,x.jsxs)("div",{className:g.Z.admission_class_confirm,style:u,children:[l," ",(0,x.jsx)("span",{style:{fontWeight:"600"},children:s})," ",i,(0,x.jsx)("span",{style:{fontWeight:"600"},children:a})]}),(0,x.jsx)("div",{className:g.Z.confirm_btn,onClick:r,style:c,children:d})]})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{className:g.Z.admission_modal_heading,children:o}),(0,x.jsx)(m.Z,{customStyle:{width:"100%",margin:"0.7rem 0"}}),(0,x.jsxs)("div",{className:g.Z.admission_class_confirm,style:u,children:[l," ",(0,x.jsx)("span",{style:{fontWeight:"600"},children:s})," ",i,(0,x.jsx)("span",{style:{fontWeight:"600"},children:a})]}),(0,x.jsx)("div",{className:g.Z.confirm_btn,onClick:r,style:c,children:d})]})})},b=function(e){var t,n,a,v,_,p,g=e.classId,b=e.promoteData,N=e.setPromoteData,C=e.onClose,I=e.onRefetchParent,y=(0,i.$G)().t,P=(0,l.useState)(!0),w=(0,o.Z)(P,2),T=w[0],k=w[1],L=(0,l.useState)([]),E=(0,o.Z)(L,2),A=E[0],R=E[1],M=(0,l.useState)(!1),F=(0,o.Z)(M,2),O=F[0],U=F[1],D=(0,l.useState)(!1),B=(0,o.Z)(D,2),G=B[0],W=B[1],V=(0,l.useState)(!1),$=(0,o.Z)(V,2),Y=$[0],H=$[1],q=(0,u.Ed)(),K=(0,o.Z)(q,1)[0],X=(0,d._3)({data:{cid:g,valid_app_fee:"Yes"===(null===b||void 0===b?void 0:b.applicable_with_fees)?"Yes":"No",is_backlog:null===b||void 0===b?void 0:b.is_backlog},skip:!g}),z=X.getNotPromoteStudentByPromote,J=X.getNotPromoteStudentByPromoteRefetch;(0,l.useEffect)((function(){g&&(k(!0),J())}),[g,J]),(0,l.useEffect)((function(){var e,t;(null!==z&&void 0!==z&&z.notPromoteStudent||0===(null===z||void 0===z||null===(e=z.notPromoteStudent)||void 0===e?void 0:e.length))&&(R(null!==(t=null===z||void 0===z?void 0:z.notPromoteStudent)&&void 0!==t?t:[]),k(!1))}),[null===z||void 0===z?void 0:z.notPromoteStudent]);var Q=function(e){var t;null!==b&&void 0!==b&&null!==(t=b.students)&&void 0!==t&&t.includes(e)?N((function(t){var n;return(0,c.Z)((0,c.Z)({},t),{},{students:null===(n=t.students)||void 0===n?void 0:n.filter((function(t){return t!==e}))})})):N((function(t){return(0,c.Z)((0,c.Z)({},t),{},{students:t.students?[].concat((0,f.Z)(t.students),[e]):[e]})}))};return(0,x.jsx)(x.Fragment,{children:G?(0,x.jsx)(S,{onClose:function(){return W(!1)},title:y("promote_select_student"),firstMessage:"".concat(y("promote")," "),spanMessage:null===b||void 0===b||null===(t=b.students)||void 0===t?void 0:t.length,outerSpanMessage:"".concat(y("students")," , ").concat(y("to")," "),lastMessage:"".concat(null===b||void 0===b||null===(n=b.classId)||void 0===n?void 0:n.classTitle,", ").concat(null===b||void 0===b||null===(a=b.batchId)||void 0===a?void 0:a.batchName,", ").concat(null===b||void 0===b||null===(v=b.departmentId)||void 0===v?void 0:v.dName),buttonLabel:y("confirm"),onHandler:function(){var e,t,n;g&&(W(!1),U((function(e){return!e})),K({cid:g,promote:{applicable_with_fees:null===b||void 0===b?void 0:b.applicable_with_fees,departmentId:null===b||void 0===b||null===(e=b.departmentId)||void 0===e?void 0:e._id,batchId:null===b||void 0===b||null===(t=b.batchId)||void 0===t?void 0:t._id,classId:null===b||void 0===b||null===(n=b.classId)||void 0===n?void 0:n._id,students:null===b||void 0===b?void 0:b.students},flow:"Yes"===(null===b||void 0===b?void 0:b.promot_with_fees)?"WITH_STRUCTURE":"WITH_OUT_STRUCTURE",re_ads:"Yes"===(null===b||void 0===b?void 0:b.re_ads)?"WITH_RE_ADMISSION":"No"}).then((function(){I(),J(),C(),U((function(e){return!e}))})).catch({}))},messageStyle:{marginTop:"3.7rem"},buttonStyle:{marginTop:"5.7rem"}}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:s.Z.select_header,children:[(0,x.jsxs)("h6",{children:[(null===b||void 0===b||null===(_=b.students)||void 0===_?void 0:_.length)>0?"".concat(null===b||void 0===b||null===(p=b.students)||void 0===p?void 0:p.length," "):"",y("select_student")]}),(0,x.jsxs)("div",{children:[Y?(0,x.jsx)("button",{className:s.Z.select_all_btn,title:"Remove All Student",onClick:function(){N((function(e){return(0,c.Z)((0,c.Z)({},e),{},{students:[]})})),H(!1)},style:{marginRight:"0.7rem"},children:y("remove_all")}):(0,x.jsx)("button",{className:s.Z.select_all_btn,title:"Select All Student",onClick:function(){var e,t=[],n=(0,h.Z)(A);try{for(n.s();!(e=n.n()).done;){var o=e.value;t.push(null===o||void 0===o?void 0:o._id)}}catch(l){n.e(l)}finally{n.f()}N((function(e){return(0,c.Z)((0,c.Z)({},e),{},{students:t})})),H(!0)},style:{marginRight:"0.7rem"},children:y("select_all")}),(0,x.jsx)("button",{className:s.Z.promote_all_btn,title:"Promote Selected Student",onClick:function(){var e;return(null===b||void 0===b||null===(e=b.students)||void 0===e?void 0:e.length)>0?W(!0):null},children:y("promote")})]})]}),(0,x.jsx)(m.Z,{customStyle:{width:"100%",marginTop:"0.5rem"}}),(0,x.jsx)("div",{className:s.Z.with_search,style:{marginTop:"1rem",width:"100%",border:"0.4px solid rgba(0, 0, 0, 0.15)",borderRadius:"6px",marginBottom:"0.3rem"},children:(0,x.jsxs)("div",{className:s.Z.search_container_input,style:{width:"100%"},children:[(0,x.jsx)("img",{className:s.Z.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),(0,x.jsx)("input",{type:"text",placeholder:"Search Student...",style:{width:"100%"},onChange:function(e){if(e.target.value){var t,n=null===z||void 0===z||null===(t=z.notPromoteStudent)||void 0===t?void 0:t.filter((function(t){var n,o,l;return null!==(n="".concat(null===t||void 0===t?void 0:t.studentFirstName," ").concat(null!==t&&void 0!==t&&t.studentMiddleName?(null===t||void 0===t?void 0:t.studentMiddleName)+" ":"").concat(null===t||void 0===t?void 0:t.studentLastName))&&void 0!==n&&null!==(o=n.toLowerCase())&&void 0!==o&&o.includes(null===(l=e.target.value)||void 0===l?void 0:l.toLowerCase())?t:null}));R(n)}else R(null===z||void 0===z?void 0:z.notPromoteStudent)}})]})}),null===A||void 0===A?void 0:A.map((function(e,t){return(0,x.jsx)(Z,{promoteData:b,stu:e,onSelectStudent:Q},t)})),T&&(0,x.jsx)(r.Z,{}),O&&(0,x.jsx)(j.Z,{})]})})},N=n(91022),C=function(e){var t,n,a,d,r,h,f,p=e.onClose,Z=e.classId,j=e.onRefetchParent,g=(0,i.$G)().t,S=(0,l.useState)("INITIAL_STEP"),C=(0,o.Z)(S,2),y=C[0],P=C[1],w=(0,l.useState)({promot_with_fees:"",applicable_with_fees:"",departmentId:"",batchId:"",classId:"",students:[],re_ads:"",is_backlog:""}),T=(0,o.Z)(w,2),k=T[0],L=T[1],E=(0,l.useState)(""),A=(0,o.Z)(E,2),R=A[0],M=A[1],F=(0,u.PS)({data:{cid:Z,page:1,limit:30},skip:!Z}),O=F.classAllDepartmentWithBatch,U=F.classAllDepartmentWithBatchRefetch,D=(0,u.j_)({data:{bid:null===(t=k.batchId)||void 0===t?void 0:t._id,page:1,limit:30},skip:!(null!==(n=k.batchId)&&void 0!==n&&n._id)}),B=D.classAllBatchWithClass,G=D.classAllBatchWithClassRefetch;l.useEffect((function(){Z&&U()}),[Z,U]),l.useEffect((function(){var e;null!==(e=k.batchId)&&void 0!==e&&e._id&&G()}),[null===(a=k.batchId)||void 0===a?void 0:a._id,G]);return(0,x.jsx)(_.Z,{onClose:"INITIAL_STEP"===y?p:function(){return P("INITIAL_STEP")},children:(0,x.jsxs)("div",{className:s.Z.promote_container,children:["INITIAL_STEP"===y&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{style:{textAlign:"center"},children:g("promote_students")}),(0,x.jsx)(m.Z,{customStyle:{width:"100%"}}),(0,x.jsx)(N.Z,{selectLabel:g("promote_with_fees_structure"),selectedValue:g("select_yes_or_no"),options:["Yes","No"],value:k.promot_with_fees,errorShow:R.promot_with_fees,onClick:function(e){L((function(t){return(0,c.Z)((0,c.Z)({},t),{},{promot_with_fees:e})}))}}),(0,x.jsx)(v.Z,{selectLabel:g("select_department"),selectedValue:g("select_department"),options:null!==(d=null===O||void 0===O?void 0:O.departmets)&&void 0!==d?d:[],onClick:function(e){L((function(t){return(0,c.Z)((0,c.Z)({},t),{},{departmentId:e})}))},openAs:"PROMOTE",errorShow:R.departmentId}),(0,x.jsx)(v.Z,{selectLabel:g("select_batch"),selectedValue:g("select_batch"),options:null!==(r=null===(h=k.departmentId)||void 0===h?void 0:h.batches)&&void 0!==r?r:[],onClick:function(e){L((function(t){return(0,c.Z)((0,c.Z)({},t),{},{batchId:e})}))},openAs:"PROMOTE",errorShow:R.batchId}),(0,x.jsx)(v.Z,{selectLabel:g("select_class"),selectedValue:g("select_class"),options:null!==(f=null===B||void 0===B?void 0:B.classes)&&void 0!==f?f:[],onClick:function(e){L((function(t){return(0,c.Z)((0,c.Z)({},t),{},{classId:e})}))},openAs:"PROMOTE",errorShow:R.classId}),(0,x.jsx)(N.Z,{selectLabel:g("promote_applicable_fee"),selectedValue:g("select_yes_or_no"),options:["Yes","No"],value:k.applicable_with_fees,errorShow:R.applicable_with_fees,onClick:function(e){L((function(t){return(0,c.Z)((0,c.Z)({},t),{},{applicable_with_fees:e})}))}}),(0,x.jsx)(N.Z,{selectLabel:g("promote_with_re_admission"),selectedValue:g("select_yes_or_no"),options:["Yes","No"],value:k.re_ads,onClick:function(e){L((function(t){return(0,c.Z)((0,c.Z)({},t),{},{re_ads:e})}))}}),(0,x.jsx)(N.Z,{selectLabel:g("promote_with_result"),selectedValue:g("please_select_result_base"),options:["Backlog","Pass","All"],value:k.is_backlog?I[k.is_backlog]:k.is_backlog,onClick:function(e){L((function(t){return(0,c.Z)((0,c.Z)({},t),{},{is_backlog:"Backlog"===e?"BACKLOG_OF_MAXIMUM":"Pass"===e?"RESULT_OF_PASS":"ALL"})}))}}),(0,x.jsxs)("button",{className:s.Z.select_application_btn,onClick:function(){var e=function(e){var t={};for(var n in e)"students"===n||e[n]||(t[n]="".concat(n," is required!"));return t}(k),t=!1;for(var n in e){t=!0;break}t?M(e):P("SELECT_STUDENT")},style:{width:"100%"},title:"Select student",children:[(0,x.jsx)("div",{children:g("select_student")}),(0,x.jsx)("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]})]}),"SELECT_STUDENT"===y&&(0,x.jsx)(b,{classId:Z,setPromoteData:L,promoteData:k,onClose:p,onRefetchParent:j})]})})},I={BACKLOG_OF_MAXIMUM:"Backlog",RESULT_OF_PASS:"Pass",ALL:"All"},y=function(e){var t,n,a,u=e.classId,v=e.promoteData,_=e.setPromoteData,p=e.onClose,g=e.onRefetchParent,b=(0,i.$G)().t,N=(0,l.useState)(!0),C=(0,o.Z)(N,2),I=C[0],y=C[1],P=(0,l.useState)([]),w=(0,o.Z)(P,2),T=w[0],k=w[1],L=(0,l.useState)(!1),E=(0,o.Z)(L,2),A=E[0],R=E[1],M=(0,l.useState)(!1),F=(0,o.Z)(M,2),O=F[0],U=F[1],D=(0,l.useState)(!1),B=(0,o.Z)(D,2),G=B[0],W=B[1],V=(0,d.V_)(),$=(0,o.Z)(V,1)[0],Y=(0,d.Rt)({cid:u,skip:!u}),H=Y.getPromoteStudentByPromote,q=Y.getPromoteStudentByPromoteRefetch;(0,l.useEffect)((function(){u&&(y(!0),q())}),[u,q]),(0,l.useEffect)((function(){var e,t;(null!==H&&void 0!==H&&H.promoteStudent||0===(null===H||void 0===H||null===(e=H.promoteStudent)||void 0===e?void 0:e.length))&&(k(null!==(t=null===H||void 0===H?void 0:H.promoteStudent)&&void 0!==t?t:[]),y(!1))}),[null===H||void 0===H?void 0:H.promoteStudent]);var K=function(e){var t;null!==v&&void 0!==v&&null!==(t=v.arr)&&void 0!==t&&t.includes(e)?_((function(t){var n;return(0,c.Z)((0,c.Z)({},t),{},{arr:null===(n=t.arr)||void 0===n?void 0:n.filter((function(t){return t!==e}))})})):_((function(t){return(0,c.Z)((0,c.Z)({},t),{},{arr:t.arr?[].concat((0,f.Z)(t.arr),[e]):[e]})}))};return(0,x.jsx)(x.Fragment,{children:O?(0,x.jsx)(S,{onClose:function(){return U(!1)},title:b("undo_select_student"),firstMessage:"".concat(b("undo")," "),spanMessage:null===v||void 0===v||null===(t=v.arr)||void 0===t?void 0:t.length,outerSpanMessage:"".concat(b("students")," , ").concat(b("to")," "),lastMessage:"".concat(b("previous_class")),buttonLabel:b("confirm"),onHandler:function(){U(!1),R((function(e){return!e})),$({cid:u,flow:"PARTICULAR_STUDENT",undoPromote:{arr:null===v||void 0===v?void 0:v.arr}}).then((function(){g(),p(),R((function(e){return!e}))})).catch({})},messageStyle:{marginTop:"3.7rem"},buttonStyle:{marginTop:"5.7rem"}}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:s.Z.select_header,children:[(0,x.jsxs)("h6",{children:[(null===v||void 0===v||null===(n=v.arr)||void 0===n?void 0:n.length)>0?"".concat(null===v||void 0===v||null===(a=v.arr)||void 0===a?void 0:a.length," "):"",b("select_student")]}),(0,x.jsxs)("div",{children:[G?(0,x.jsx)("button",{className:s.Z.select_all_btn,title:"Remove All Student",onClick:function(){_((function(e){return(0,c.Z)((0,c.Z)({},e),{},{arr:[]})})),W(!1)},style:{marginRight:"0.7rem"},children:b("remove_all")}):(0,x.jsx)("button",{className:s.Z.select_all_btn,title:"Select All Student",onClick:function(){var e,t=[],n=(0,h.Z)(T);try{for(n.s();!(e=n.n()).done;){var o=e.value;t.push(null===o||void 0===o?void 0:o._id)}}catch(l){n.e(l)}finally{n.f()}_((function(e){return(0,c.Z)((0,c.Z)({},e),{},{arr:t})})),W(!0)},style:{marginRight:"0.7rem"},children:b("select_all")}),(0,x.jsx)("button",{className:s.Z.promote_all_btn,title:"Undo Selected Student",onClick:function(){var e;return(null===v||void 0===v||null===(e=v.arr)||void 0===e?void 0:e.length)>0?U(!0):null},children:b("undo")})]})]}),(0,x.jsx)(m.Z,{customStyle:{width:"100%",marginTop:"0.5rem"}}),(0,x.jsx)("div",{className:s.Z.with_search,style:{marginTop:"1rem",width:"100%",border:"0.4px solid rgba(0, 0, 0, 0.15)",borderRadius:"6px",marginBottom:"0.3rem"},children:(0,x.jsxs)("div",{className:s.Z.search_container_input,style:{width:"100%"},children:[(0,x.jsx)("img",{className:s.Z.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),(0,x.jsx)("input",{type:"text",placeholder:"Search Student...",style:{width:"100%"},onChange:function(e){if(e.target.value){var t,n=null===H||void 0===H||null===(t=H.promoteStudent)||void 0===t?void 0:t.filter((function(t){var n,o,l;return null!==(n="".concat(null===t||void 0===t?void 0:t.studentFirstName," ").concat(null!==t&&void 0!==t&&t.studentMiddleName?(null===t||void 0===t?void 0:t.studentMiddleName)+" ":"").concat(null===t||void 0===t?void 0:t.studentLastName))&&void 0!==n&&null!==(o=n.toLowerCase())&&void 0!==o&&o.includes(null===(l=e.target.value)||void 0===l?void 0:l.toLowerCase())?t:null}));k(n)}else k(null===H||void 0===H?void 0:H.promoteStudent)}})]})}),null===T||void 0===T?void 0:T.map((function(e,t){return(0,x.jsx)(Z,{promoteData:{students:null===v||void 0===v?void 0:v.arr},stu:e,onSelectStudent:K},t)})),I&&(0,x.jsx)(r.Z,{}),A&&(0,x.jsx)(j.Z,{})]})})},P=function(e){var t=e.onClose,n=e.classId,a=e.onRefetchParent,r=(0,i.$G)().t,u=(0,l.useState)("INITIAL_STEP"),v=(0,o.Z)(u,2),h=v[0],f=v[1],p=(0,l.useState)({flow:"",arr:[]}),Z=(0,o.Z)(p,2),g=Z[0],S=Z[1],b=(0,l.useState)(""),C=(0,o.Z)(b,2),I=C[0],P=C[1],w=(0,l.useState)(!1),T=(0,o.Z)(w,2),k=T[0],L=T[1],E=(0,d.V_)(),A=(0,o.Z)(E,1)[0];return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(_.Z,{onClose:"INITIAL_STEP"===h?t:function(){return f("INITIAL_STEP")},children:(0,x.jsxs)("div",{className:s.Z.promote_container,children:["INITIAL_STEP"===h&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{style:{textAlign:"center"},children:r("promote_students")}),(0,x.jsx)(m.Z,{customStyle:{width:"100%"}}),(0,x.jsx)(N.Z,{selectLabel:r("undo_promote_student"),selectedValue:r("select_full_or_particular"),options:["Full Class","Particular Student"],value:g.flow,errorShow:I.flow,onClick:function(e){S((function(t){return(0,c.Z)((0,c.Z)({},t),{},{flow:e})}))}}),(0,x.jsx)("button",{className:s.Z.select_application_btn,onClick:function(){var e=function(e){var t={};for(var n in e)"students"===n||e[n]||(t[n]="".concat(n," is required!"));return t}(g),o=!1;for(var l in e){o=!0;break}o?P(e):"Full Class"===g.flow?(L((function(e){return!e})),A({cid:n,flow:"FULL_CLASS",undoPromote:{arr:[]}}).then((function(){a(),t(),L((function(e){return!e}))})).catch({})):"Particular Student"===g.flow&&f("SELECT_STUDENT")},style:{width:"100%",justifyContent:"center",marginTop:"4rem"},children:(0,x.jsx)("div",{children:r("Particular Student"===g.flow?"next":"confirm")})})]}),"SELECT_STUDENT"===h&&(0,x.jsx)(y,{classId:n,setPromoteData:S,promoteData:g,onClose:t,onRefetchParent:a}),k&&(0,x.jsx)(j.Z,{})]})})})},w=function(e){var t=e.cid,n=e.onRefetch,a=(0,i.$G)().t,d=(0,l.useState)(!1),r=(0,o.Z)(d,2),c=r[0],u=r[1];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("button",{className:s.Z.select_application_btn,onClick:function(e){e.stopPropagation(),u((function(e){return!e}))},title:"Undo Promote Studens",style:{width:"25%"},children:[(0,x.jsx)("div",{children:a("undo_student")}),(0,x.jsx)("img",{src:"/images/member_tab/admission/admission-undo-icon.svg",alt:"undo icon",style:{cursor:"pointer",width:"30px"}})]}),c&&(0,x.jsx)(P,{onClose:function(){return u(!1)},classId:t,onRefetchParent:n})]})},T=function(e){var t,n,c,u,v,m,_,h=e.classId,f=(0,i.$G)().t,p=(0,l.useState)(!0),Z=(0,o.Z)(p,2),j=Z[0],g=Z[1],S=(0,l.useState)(!1),b=(0,o.Z)(S,2),N=b[0],I=b[1],y=(0,d.Rt)({cid:h,skip:!h}),P=y.getPromoteStudentByPromote,T=y.getPromoteStudentByPromoteRefetch;(0,l.useEffect)((function(){h&&(g(!0),T())}),[h,T]),(0,l.useEffect)((function(){var e;(null!==P&&void 0!==P&&P.promoteStudent||0===(null===P||void 0===P||null===(e=P.promoteStudent)||void 0===e?void 0:e.length))&&g(!1)}),[null===P||void 0===P?void 0:P.promoteStudent]);var k=function(){I((function(e){return!e}))};return(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:s.Z.promote_undo_container,children:[(0,x.jsxs)("button",{className:s.Z.select_application_btn,onClick:k,children:[(0,x.jsx)("div",{children:f("promote_student")}),(0,x.jsx)("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]}),(0,x.jsx)(w,{cid:h,onRefetch:T})]}),(0,x.jsxs)("h6",{className:s.Z.total_student_count,children:[f("total_student")," ",null!==(t=null===P||void 0===P||null===(n=P.count)||void 0===n?void 0:n.totalCount)&&void 0!==t?t:0]}),(0,x.jsxs)("div",{className:s.Z.total_other_count_container,children:[(0,x.jsxs)("p",{children:[f("boys_promote"),null!==(c=null===P||void 0===P||null===(u=P.count)||void 0===u?void 0:u.boyCount)&&void 0!==c?c:0]}),(0,x.jsxs)("p",{children:[f("girl_promote"),null!==(v=null===P||void 0===P||null===(m=P.count)||void 0===m?void 0:m.girlCount)&&void 0!==v?v:0]})]}),null===P||void 0===P||null===(_=P.promoteStudent)||void 0===_?void 0:_.map((function(e){return(0,x.jsx)(a.Z,{stu:e,viewAs:"PROMOTE"},null===e||void 0===e?void 0:e._id)})),j&&(0,x.jsx)(r.Z,{}),N&&(0,x.jsx)(C,{classId:h,onClose:k,onRefetchParent:T})]})}},74067:function(e,t,n){n(72791);var o=n(33148),l=n(39230),s=n(69721),i=n(16871),a=n(43504),d=n(80184);t.Z=function(e){var t,n,r,c,u,v,m,_=e.stu,h=e.viewAs,f=(0,l.$G)().t,p=(0,i.UO)();return(0,d.jsx)(a.rU,{to:"/q/".concat(p.username,"/student/profile"),state:{sid:null===_||void 0===_?void 0:_._id,viewAs:"SUBJECT_TEACHER"},children:(0,d.jsxs)("div",{className:o.Z.student_container,children:[(0,d.jsx)("img",{src:null!==_&&void 0!==_&&_.studentProfilePhoto?"".concat(s.yI,"/").concat(null===_||void 0===_?void 0:_.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",loading:"lazy",alt:"avatar icon"}),(0,d.jsxs)("div",{className:o.Z.student_info_container,children:[(0,d.jsxs)("div",{className:o.Z.student_info_text,children:[(0,d.jsxs)("h6",{children:[null===_||void 0===_?void 0:_.studentFirstName," ",null!==_&&void 0!==_&&_.studentMiddleName?null===_||void 0===_?void 0:_.studentMiddleName:" "," ",null===_||void 0===_?void 0:_.studentLastName]}),"PROMOTE"===h?"":(0,d.jsxs)("p",{children:[null!==(t=null===_||void 0===_?void 0:_.studentGender)&&void 0!==t?t:""," "]})]}),(0,d.jsx)("div",{className:o.Z.student_info_text,children:"PROMOTE"===h?(0,d.jsxs)("p",{children:[f("classes"),": ","".concat(null!==(n=null===_||void 0===_||null===(r=_.studentClass)||void 0===r?void 0:r.className)&&void 0!==n?n:""," - ").concat(null!==(c=null===_||void 0===_||null===(u=_.studentClass)||void 0===u?void 0:u.classTitle)&&void 0!==c?c:"")]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("p",{children:[f("roll_number")," ",null!==(v=null===_||void 0===_?void 0:_.studentROLLNO)&&void 0!==v?v:""]}),(0,d.jsxs)("p",{children:[f("gr_number"),null!==(m=null===_||void 0===_?void 0:_.studentGRNO)&&void 0!==m?m:""]})]})})]})]})})}}}]);
//# sourceMappingURL=4522.b35c9a68.chunk.js.map