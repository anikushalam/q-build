"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[68976],{68976:(t,i,l)=>{l.r(i),l.d(i,{default:()=>A});var n=l(72791),e=l(46062);const d="Complaints_complaints__Qjrkp",s="ComplaintList_complaintList__d3hVT",a="ComplaintList_listHead__2TxDF",o="ComplaintList_tabss__cAlsI",c="ComplaintList_tabb__er9O0",m="ComplaintList_tabActive__Ps2UJ",v={list:"UnsolvedList_list__TPD8N",item:"UnsolvedList_item__-Bzo4",datetime:"UnsolvedList_datetime__gdY1X"},u={addDisplay:"ComplaintModal_addDisplay__SatdG",title:"ComplaintModal_title__T-jIF",text:"ComplaintModal_text__EOwGn",content:"ComplaintModal_content__re7-Q",footer:"ComplaintModal_footer__zF4tl",btn:"ComplaintModal_btn__2VJpQ"};var r=l(5574),p=l(72426),_=l.n(p),h=l(74289),x=l(98734),j=l(80184);const N=function(t){var i,l,e,d,s,a,o,c,m,v,p,N;let{addDisplay:C,setAddDisplay:f,complaintId:S,onRefetch:g}=t;const[D,k]=(0,n.useState)(!1),{departmentComplaintDetail:M,departmentComplaintDetailRefetch:b}=(0,h.z1)({data:{cid:S},skip:!S}),[y]=(0,h.Kd)();return(0,n.useEffect)((()=>{S&&b()}),[S,b]),(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(r.Z,{open:C,onClose:()=>{f(!1)},children:[(0,j.jsxs)("div",{className:u.addDisplay,children:[(0,j.jsxs)("div",{className:u.title,children:[(0,j.jsx)("img",{src:"/images/complaint-white.svg",alt:""}),(0,j.jsxs)("div",{className:u.text,children:[(0,j.jsx)("div",{className:u.insName,children:(0,j.jsx)("h6",{children:"Open"===(null===M||void 0===M||null===(i=M.complaint)||void 0===i?void 0:i.complaintType)?"".concat(null===M||void 0===M||null===(l=M.complaint)||void 0===l||null===(e=l.student)||void 0===e?void 0:e.studentFirstName,"\n        ").concat(null!==M&&void 0!==M&&null!==(d=M.complaint)&&void 0!==d&&null!==(s=d.student)&&void 0!==s&&s.studentMiddleName?null===M||void 0===M||null===(a=M.complaint)||void 0===a||null===(o=a.student)||void 0===o?void 0:o.studentMiddleName:" ","\n        ").concat(null===M||void 0===M||null===(c=M.complaint)||void 0===c||null===(m=c.student)||void 0===m?void 0:m.studentLastName):"Anonymous"})}),(0,j.jsx)("div",{className:u.insUserName,children:(0,j.jsx)("p",{children:_()(null===M||void 0===M||null===(v=M.complaint)||void 0===v?void 0:v.createdAt).format("DD-MM-YYYY")})})]})]}),(0,j.jsx)("div",{className:u.content,children:null===M||void 0===M||null===(p=M.complaint)||void 0===p?void 0:p.complaintContent}),"Solved"!==(null===M||void 0===M||null===(N=M.complaint)||void 0===N?void 0:N.complaintStatus)?(0,j.jsx)("div",{className:u.footer,children:(0,j.jsx)("div",{className:u.btn,onClick:()=>{var t;"Solved"===(null===M||void 0===M||null===(t=M.complaint)||void 0===t?void 0:t.complaintStatus)||(k((t=>!t)),y({cid:S,complaintSolve:{status:"Solved"}}).then((()=>{g(),k((t=>!t))})).catch({}))},children:"Solved"})}):""]}),D&&(0,j.jsx)(x.Z,{})]})})};function C(t){var i,l,e,d;let{complaint:s,onRefetch:a}=t;const[o,c]=(0,n.useState)(!1);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:v.item,onClick:()=>c((t=>!t)),children:[(0,j.jsx)("img",{src:"/images/complainIcon.svg",alt:""}),(0,j.jsxs)("div",{children:[(0,j.jsx)("h6",{children:"Open"===(null===s||void 0===s?void 0:s.complaintType)?"".concat(null===s||void 0===s||null===(i=s.student)||void 0===i?void 0:i.studentFirstName,"\n        ").concat(null!==s&&void 0!==s&&null!==(l=s.student)&&void 0!==l&&l.studentMiddleName?null===s||void 0===s||null===(e=s.student)||void 0===e?void 0:e.studentMiddleName:" ","\n        ").concat(null===s||void 0===s||null===(d=s.student)||void 0===d?void 0:d.studentLastName):"Anonymous"}),(0,j.jsx)("div",{className:v.datetime,children:(0,j.jsx)("p",{children:_()(null===s||void 0===s?void 0:s.createdAt).format("DD-MM-YYYY")})})]})]}),o&&(0,j.jsx)(N,{setAddDisplay:c,addDisplay:o,complaintId:null===s||void 0===s?void 0:s._id,onRefetch:a})]})}const f=function(t){var i;let{did:l}=t;const{departmentAllComplaint:e,departmentAllComplaintRefetch:d}=(0,h.kf)({data:{did:l,status:"Unsolved",page:1,limit:50},skip:!l});return(0,n.useEffect)((()=>{l&&d()}),[l,d]),(0,j.jsx)("div",{className:v.list,children:null===e||void 0===e||null===(i=e.complaints)||void 0===i?void 0:i.map((t=>(0,j.jsx)(C,{complaint:t,onRefetch:d},null===t||void 0===t?void 0:t._id)))})},S={list:"SolvedList_list__0dX9H",item:"SolvedList_item__QplZh",datetime:"SolvedList_datetime__7C88x"};function g(t){var i,l,e,d;let{complaint:s}=t;const[a,o]=(0,n.useState)(!1);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:S.item,onClick:()=>o((t=>!t)),children:[(0,j.jsx)("img",{src:"/images/complainIcon.svg",alt:""}),(0,j.jsxs)("div",{children:[(0,j.jsx)("h6",{children:"Open"===(null===s||void 0===s?void 0:s.complaintType)?"".concat(null===s||void 0===s||null===(i=s.student)||void 0===i?void 0:i.studentFirstName,"\n        ").concat(null!==s&&void 0!==s&&null!==(l=s.student)&&void 0!==l&&l.studentMiddleName?null===s||void 0===s||null===(e=s.student)||void 0===e?void 0:e.studentMiddleName:" ","\n        ").concat(null===s||void 0===s||null===(d=s.student)||void 0===d?void 0:d.studentLastName):"Anonymous"}),(0,j.jsx)("div",{className:S.datetime,children:(0,j.jsx)("p",{children:_()(null===s||void 0===s?void 0:s.createdAt).format("DD-MM-YYYY")})})]})]}),a&&(0,j.jsx)(N,{setAddDisplay:o,addDisplay:a,complaintId:null===s||void 0===s?void 0:s._id})]})}const D=function(t){var i;let{did:l}=t;const{departmentAllComplaint:e,departmentAllComplaintRefetch:d}=(0,h.kf)({data:{did:l,status:"Solved",page:1,limit:50},skip:!l});return(0,n.useEffect)((()=>{l&&d()}),[l,d]),(0,j.jsx)("div",{className:S.list,children:null===e||void 0===e||null===(i=e.complaints)||void 0===i?void 0:i.map((t=>(0,j.jsx)(g,{complaint:t},null===t||void 0===t?void 0:t._id)))})};var k=l(39230);const M=function(t){let{did:i}=t;const[l,e]=(0,n.useState)(!1),{t:d}=(0,k.$G)();return(0,j.jsxs)("div",{className:s,children:[(0,j.jsxs)("div",{className:o,children:[(0,j.jsx)("div",{className:l?c:"".concat(c," ").concat(m),onClick:()=>e(!1),children:d("unsolved")}),(0,j.jsx)("div",{className:l?"".concat(c," ").concat(m):c,onClick:()=>e(!0),children:d("Solved")})]}),(0,j.jsx)("div",{className:a,children:l?(0,j.jsx)(D,{did:i}):(0,j.jsx)(f,{did:i})})]})};const b=function(t){let{did:i}=t;return(0,j.jsx)("div",{className:d,children:(0,j.jsx)(M,{did:i})})};var y=l(98094);const A=t=>{let{did:i}=t;const{t:l}=(0,k.$G)();return(0,j.jsxs)("div",{className:e.Z.ClassSetting,children:[(0,j.jsx)("h6",{children:l("complaints")}),(0,j.jsx)(y.Z,{customStyle:{width:"100%"}}),(0,j.jsx)(b,{did:i})]})}},46062:(t,i,l)=>{l.d(i,{Z:()=>n});const n={ClassSetting:"DepartmentSetting_ClassSetting__SFvg+",tabsContainer:"DepartmentSetting_tabsContainer__lZUol",backh:"DepartmentSetting_backh__DNdJl",department_container:"DepartmentSetting_department_container__9b6Ch",department_setting_btn:"DepartmentSetting_department_setting_btn__kRHq+"}}}]);
//# sourceMappingURL=68976.9cf5d933.chunk.js.map