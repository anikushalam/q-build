"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[91490],{91490:(e,l,t)=>{t.d(l,{Z:()=>k});var i=t(72791),a=t(9679),s=t(39230),o=t(10406),n=t(24582),d=t(11105),c=t(36665),r=t(98734),u=t(33992),v=t(97655),m=t(87457),_=t(98094),h=t(38733),f=t(80184);const j=e=>{let{selectLabel:l,onClick:t,selectedValue:a,options:o,customStyleContainer:n,customLabelStyle:d,customListStyle:c,openAs:r,errorShow:u,defalutValue:v,viewAs:m}=e;const{t:_}=(0,s.$G)(),[j,b]=(0,i.useState)(!1),[y,x]=(0,i.useState)(""),g=()=>{b((e=>!e))};(0,i.useEffect)((()=>{"NORMAL_FILTER"===m&&x(v)}),[m,v]);return(0,f.jsxs)("div",{className:h.Z.join_form_container,style:{...n},children:[(0,f.jsxs)("p",{className:h.Z.join_form_select_paragraph,style:{...d},children:[l,u&&(0,f.jsxs)("span",{style:{color:"red",marginLeft:"15px"},children:["* ",_("form_require_label")]})]}),(0,f.jsxs)("section",{className:h.Z.join_form_select_custom,onClick:g,children:[y?(0,f.jsx)("p",{className:h.Z.join_form_select_custom_paragraph,children:null!==y&&void 0!==y?y:""}):(0,f.jsx)("p",{className:h.Z.join_form_select_custom_paragraph,children:a}),(0,f.jsx)("img",{className:h.Z.join_form_select_custom_icon,src:"/images/down-icon.svg",alt:"categor icon"})]}),j&&(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("section",{className:h.Z.join_form_select_custom_list,style:c?{...c}:(null===o||void 0===o?void 0:o.length)>2?{overflowY:"scroll"}:{backgroundColor:"#ffffff"},children:null===o||void 0===o?void 0:o.map(((e,l)=>{var i,a;return(0,f.jsx)("p",{onClick:()=>{var l,i,a;(l="PROMOTE"===r?e:null!==e&&void 0!==e&&e._id?null===e||void 0===e?void 0:e._id:e,t(l),g(),"FINANCE_BANK"===m)||x(null!==e&&void 0!==e&&e.subjectName?"".concat(null===e||void 0===e?void 0:e.subjectName," ").concat(null!==e&&void 0!==e&&null!==(i=e.selected_batch_query)&&void 0!==i&&i.batchName?"(".concat(null===e||void 0===e||null===(a=e.selected_batch_query)||void 0===a?void 0:a.batchName,")"):""):e)},className:h.Z.join_form_select_custom_paragraph_option,children:null!==e&&void 0!==e&&e.subjectName?"".concat(null===e||void 0===e?void 0:e.subjectName," ").concat(null!==e&&void 0!==e&&null!==(i=e.selected_batch_query)&&void 0!==i&&i.batchName?"(".concat(null===e||void 0===e||null===(a=e.selected_batch_query)||void 0===a?void 0:a.batchName,")"):""):e},l)}))})})]})},b=e=>{var l,t,a,o,d,h,b;let{onClose:y,openAs:x,clsId:g,day:p,onRefetch:N,dayMenu:Z,onCloseParent:C}=e;const{t:S}=(0,s.$G)(),[A,I]=(0,i.useState)(!1),[k,T]=(0,i.useState)(""),[E,w]=(0,i.useState)({from:"",to:""}),[R,L]=(0,i.useState)(""),{oneClassAllSubject:q,oneClassAllSubjectRefetch:F}=(0,u.fk)({cid:g,skip:!g}),[D]=(0,n.Uw)();(0,i.useEffect)((()=>{g&&F()}),[g,F]),(0,i.useEffect)((()=>{var e,l;"EDIT"===x&&(w({from:(null===Z||void 0===Z||null===(e=Z.from)||void 0===e?void 0:e.substring(0,5))||"",to:(null===Z||void 0===Z||null===(l=Z.to)||void 0===l?void 0:l.substring(0,5))||""}),L(null===Z||void 0===Z?void 0:Z.subject))}),[x,Z]);const M=e=>{const l=null===e||void 0===e?void 0:e.split(":");let t="";l[0]>12?(t="Pm",l[0]-=12):l[0]<12?(t="Am",0===l[0]&&(l[0]=12)):t="Pm";const i=l[0]>9?l[0]:"0".concat(+l[0]);return"".concat(i,":").concat(l[1]," ").concat(t)};return(0,f.jsx)(c.Z,{onClose:y,children:(0,f.jsxs)("div",{className:m.Z.add_category_modal,style:{width:"30rem"},children:[(0,f.jsxs)("div",{className:m.Z.add_category_modal_title,children:[(0,f.jsx)("h6",{children:S("EDIT"===x?"upadate_time_table":"add_new_time_table")}),(0,f.jsx)("img",{src:"/images/close-post-icon.svg",onClick:y,alt:""})]}),(0,f.jsx)(_.Z,{customStyle:{width:"100%",marginBlock:"0.5rem"}}),(0,f.jsx)(j,{selectLabel:S("select_subject"),selectedValue:S("please_select_subject"),options:null!==(l=null===q||void 0===q||null===(t=q.classes)||void 0===t?void 0:t.subject)&&void 0!==l?l:[],onClick:e=>{L(e)},value:null!==(a="".concat(null===R||void 0===R?void 0:R.subjectName," ").concat(null!==R&&void 0!==R&&null!==(o=R.selected_batch_query)&&void 0!==o&&o.batchName?"(".concat(null===R||void 0===R||null===(d=R.selected_batch_query)||void 0===d?void 0:d.batchName,")"):""))&&void 0!==a?a:"",defalutValue:null!==R&&void 0!==R&&R.subjectName?"".concat(null===R||void 0===R?void 0:R.subjectName," ").concat(null!==R&&void 0!==R&&null!==(h=R.selected_batch_query)&&void 0!==h&&h.batchName?"(".concat(null===R||void 0===R||null===(b=R.selected_batch_query)||void 0===b?void 0:b.batchName,")"):""):"",viewAs:"NORMAL_FILTER",openAs:"PROMOTE"}),(0,f.jsx)(v.Z,{labelText:S("from"),placeholder:"00:00",name:"from",value:null===E||void 0===E?void 0:E.from,type:"time",onChange:e=>w((l=>({...l,from:e.target.value}))),errorShow:k.from}),(0,f.jsx)(v.Z,{labelText:S("to"),placeholder:"00:00",name:"to",value:null===E||void 0===E?void 0:E.to,type:"time",onChange:e=>w((l=>({...l,to:e.target.value}))),errorShow:k.to}),(0,f.jsx)("button",{className:m.Z.set_fees_structure_btn,title:"Add Time Table",onClick:()=>{if(g&&null!==R&&void 0!==R&&R._id){const l=(e=>{const l={};for(let t in e)e[t]||(l[t]="".concat(t," is required!"));return l})(E);let t=!1;for(let e in l)if(e){t=!0;break}var e;if(t)T(l);else I((e=>!e)),D({cid:g,sfid:null===Z||void 0===Z?void 0:Z.sfid,timetableBody:{day:p,from:M(E.from),to:M(E.to),subjectId:null===R||void 0===R?void 0:R._id,isEdit:null!==(e=null===Z||void 0===Z?void 0:Z.isEdit)&&void 0!==e&&e}}).then((()=>{N(),"EDIT"===x?C():y()})).catch({})}},style:{justifyContent:"center"},children:S("EDIT"===x?"update":"create")}),A&&(0,f.jsx)(r.Z,{})]})})};var y=t(33148),x=t(69721),g=t(87049),p=t(84489),N=t(12072);const Z=e=>{let{onClose:l,onRefetch:t,dayMenu:a,clsId:s,day:o}=e;const[d,c]=(0,i.useState)(!1),[u,v]=(0,i.useState)(!1),[m]=(0,n.eT)();return(0,f.jsx)(f.Fragment,{children:u?(0,f.jsx)(b,{onCloseParent:l,onClose:()=>v(!1),openAs:"EDIT",dayMenu:a,clsId:s,day:o,onRefetch:t}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.Z,{onClose:l}),(0,f.jsxs)(N.Z,{customStyle:{zIndex:"1200"},children:[(0,f.jsxs)("div",{className:g.Z.edit_modal_container,style:{width:"200px"},children:[(0,f.jsx)("h6",{className:g.Z.edit,onClick:()=>v((e=>!e)),children:"Edit"}),(0,f.jsx)("h6",{className:g.Z.remove,onClick:()=>{null!==a&&void 0!==a&&a.tid&&null!==a&&void 0!==a&&a.sfid&&(c((e=>!e)),m({tid:null===a||void 0===a?void 0:a.tid,scid:null===a||void 0===a?void 0:a.sfid,flow:"PARTICULAR"}).then((()=>{t(),l(),c((e=>!e))})).catch({}))},children:"Delete"})]}),d&&(0,f.jsx)(r.Z,{})]})]})})},C=e=>{var l,t,a,s,o,n,d,c,r,u,v,m,_,h,j,b,g;let{table:p,clsId:N,day:C,onRefetch:S,tid:A}=e;const[I,k]=(0,i.useState)("");return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:y.Z.class_container,style:{flexDirection:"column",alignItems:"flex-start",gap:"0"},children:[(0,f.jsxs)("div",{style:{width:"100%",display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[(0,f.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[(0,f.jsx)("img",{src:"/images/member_tab/class/class-time-icon.svg",alt:"time icon"}),(0,f.jsxs)("p",{children:[null===p||void 0===p?void 0:p.from," "," to ",null===p||void 0===p?void 0:p.to]})]}),(0,f.jsx)("img",{src:"/images/member_tab/class/class-edit-icon.svg",alt:"time icon",style:{cursor:"pointer"},onClick:()=>{k({tid:A,from:null===p||void 0===p?void 0:p.from,to:null===p||void 0===p?void 0:p.to,sfid:null===p||void 0===p?void 0:p._id,subject:{subjectName:null===p||void 0===p?void 0:p.subjectName,...null===p||void 0===p?void 0:p.subject},isEdit:!0})}})]}),(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,f.jsx)("img",{className:y.Z.oneRowImage,src:null!==p&&void 0!==p&&null!==(l=p.assignStaff)&&void 0!==l&&l.staffProfilePhoto?"".concat(x.yI,"/").concat(null===p||void 0===p||null===(t=p.assignStaff)||void 0===t?void 0:t.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"staff avatr"}),(0,f.jsxs)("div",{className:y.Z.class_container_text,children:[(0,f.jsxs)("h6",{children:[null!==(a=null===p||void 0===p?void 0:p.subjectName)&&void 0!==a?a:""," ",null!==p&&void 0!==p&&null!==(s=p.subject)&&void 0!==s&&s.subject_category?"(".concat(null===p||void 0===p||null===(o=p.subject)||void 0===o?void 0:o.subject_category,")"):"",null!==p&&void 0!==p&&null!==(n=p.subject)&&void 0!==n&&null!==(d=n.selected_batch_query)&&void 0!==d&&d.batchName?(0,f.jsxs)("span",{style:{fontWeight:"400",fontSize:"12px"},children:[" ","(",null===p||void 0===p||null===(c=p.subject)||void 0===c||null===(r=c.selected_batch_query)||void 0===r?void 0:r.batchName,")"]}):null," ","Optional"===(null===p||void 0===p||null===(u=p.subject)||void 0===u?void 0:u.subjectOptional)&&"(".concat(null===p||void 0===p||null===(v=p.subject)||void 0===v?void 0:v.subjectOptional,")")]}),(0,f.jsx)("p",{children:"".concat(null!==(m=null===p||void 0===p||null===(_=p.assignStaff)||void 0===_?void 0:_.staffFirstName)&&void 0!==m?m:""," ").concat(null!==(h=null===p||void 0===p||null===(j=p.assignStaff)||void 0===j?void 0:j.staffMiddleName)&&void 0!==h?h:""," ").concat(null!==(b=null===p||void 0===p||null===(g=p.assignStaff)||void 0===g?void 0:g.staffLastName)&&void 0!==b?b:"")})]})]})]}),I&&(0,f.jsx)(Z,{onClose:()=>k(""),dayMenu:I,clsId:N,day:C,onRefetch:S})]})};var S=t(34219);const A=e=>{var l,t,a,c;let{clsId:r,day:u}=e;const{t:v}=(0,s.$G)(),[m,_]=(0,i.useState)(!1),[h,j]=(0,i.useState)(!0),{getDayTimetable:y,getDayTimetableRefetch:x}=(0,n.mv)({data:{status:u,cid:r},skip:!r});(0,i.useEffect)((()=>{r&&(j(!0),x())}),[r,u,x]),(0,i.useEffect)((()=>{var e;(null!==y&&void 0!==y&&y.dayList||0===(null===y||void 0===y||null===(e=y.dayList)||void 0===e?void 0:e.length))&&j(!1)}),[null===y||void 0===y?void 0:y.dayList]);const g=()=>{_((e=>!e))};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:o.Z.add_container,children:(0,f.jsx)("p",{className:o.Z.add_new_category,onClick:g,children:v("add_time_table")})}),null===y||void 0===y||null===(l=y.dayList)||void 0===l||null===(t=l.schedule)||void 0===t?void 0:t.map((e=>{var l;return(0,f.jsx)(C,{table:e,clsId:r,day:u,onRefetch:x,tid:null===y||void 0===y||null===(l=y.dayList)||void 0===l?void 0:l._id},null===e||void 0===e?void 0:e._id)})),m&&(0,f.jsx)(b,{clsId:r,onClose:g,day:u,onRefetch:x}),h&&(0,f.jsx)(d.Z,{status:"white"}),!h&&!(null!==y&&void 0!==y&&null!==(a=y.dayList)&&void 0!==a&&null!==(c=a.schedule)&&void 0!==c&&c.length)&&(0,f.jsx)(S.Z,{customStyleContainer:{marginTop:"5rem",height:"inherit"},title:"No time table created yet for this day."})]})},I=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],k=e=>{let{clsId:l}=e;const[t,s]=(0,i.useState)("Monday");return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:a.Z.days_container,children:null===I||void 0===I?void 0:I.map((e=>(0,f.jsx)("h5",{className:t===e?"".concat(a.Z.days_container_child," ").concat(a.Z.days_container_child_active):a.Z.days_container_child,onClick:()=>{return l=e,void s((e=>l));var l},children:null!==e&&void 0!==e?e:""},e)))}),(0,f.jsx)(A,{day:t,clsId:l})]})}},9679:(e,l,t)=>{t.d(l,{Z:()=>i});const i={admin_acadmic_text:"AcademicAdministrator_admin_acadmic_text__FKBxD",admin_academic_container:"AcademicAdministrator_admin_academic_container__X3EVI",admin_academic_btn:"AcademicAdministrator_admin_academic_btn__BFzDv",subject_academic_title:"AcademicAdministrator_subject_academic_title__tWTFe",days_container:"AcademicAdministrator_days_container__raHaC",days_container_child:"AcademicAdministrator_days_container_child__ET9j+",days_container_child_active:"AcademicAdministrator_days_container_child_active__o5YSd"}}}]);
//# sourceMappingURL=91490.3862b97c.chunk.js.map