"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[5957],{75946:function(t,e,i){var n=i(1413),o=i(29439),s=i(72791),r=i(36665),a=i(98094),l=i(39230),d=i(33399),c=i(72952),u=i(98734),_=i(6245),m=i(16871),v=i(80184);e.Z=function(t){var e=t.onClose,i=t.messageId,h=t.headId,f=t.viewAs,g=t.sendStudentList,y=t.isInstitute,p=t.isStudentProfile,x=t.carryParentState,N=t.toRedirectUrl,T=t.instituteId,Z=(0,l.$G)().t,I=(0,s.useState)(!1),j=(0,o.Z)(I,2),H=j[0],C=j[1],S=(0,s.useState)(!1),A=(0,o.Z)(S,2),b=A[0],E=A[1],L=(0,_.Z3)(),w=(0,o.Z)(L,1)[0],O=(0,_.zx)(),M=(0,o.Z)(O,1)[0],D=(0,s.useState)({alarm_mode:"APP_NOTIFICATION",content:""}),R=(0,o.Z)(D,2),k=R[0],F=R[1],Y=(0,m.s0)();return(0,v.jsxs)(r.Z,{onClose:e,children:[(0,v.jsx)("div",{className:d.Z.add_category_modal,style:{width:"30rem",minHeight:"10rem",height:"fit-content",maxHeight:"35rem",overflowX:"hidden",scrollBehavior:"smooth"},children:(0,v.jsxs)("section",{className:d.Z.fee_middle_section_container,style:{marginBottom:"1.2rem"},children:[(0,v.jsx)("h6",{style:{fontSize:"20px",fontWeight:"600"},children:Z("student_message")}),(0,v.jsx)(a.Z,{customStyle:{width:"100%",marginTop:"0.7rem",marginBottom:"1rem"}}),(0,v.jsxs)("section",{className:d.Z.notify_container,onClick:function(){return F((function(t){return(0,n.Z)((0,n.Z)({},t),{},{alarm_mode:"APP_NOTIFICATION"})}))},children:[(0,v.jsx)("img",{src:"APP_NOTIFICATION"===k.alarm_mode?"/images/department/radio-blue-icon.svg":"/images/department/radio-gray-icon.svg",alt:"icon"}),(0,v.jsxs)("div",{className:d.Z.notify_text,children:[(0,v.jsx)("h6",{children:Z("Notify_with_In_app_Notification")}),(0,v.jsx)("p",{children:Z("Notify_with_In_app_Notification_note")})]})]}),(0,v.jsxs)("section",{className:d.Z.notify_container,children:[(0,v.jsx)("img",{src:"EMAIL_NOTIFICATION"===k.alarm_mode?"/images/department/radio-blue-icon.svg":"/images/department/radio-gray-icon.svg",alt:"icon"}),(0,v.jsxs)("div",{className:d.Z.notify_text,children:[(0,v.jsx)("h6",{children:Z("Notify_On_Email_and_SMS")}),(0,v.jsx)("p",{children:Z("Notify_On_Email_and_SMS_note")})]})]}),"APP_NOTIFICATION"===k.alarm_mode&&(0,v.jsx)(c.Z,{labelText:Z("student_message_label"),placeholder:Z("student_message_label_placeholder"),name:"content",value:k.content,type:"text",onChange:function(t){return F((function(e){return(0,n.Z)((0,n.Z)({},e),{},{content:t.target.value})}))},errorShow:b}),(0,v.jsx)("button",{onClick:function(){k.content?p?i&&k.alarm_mode&&(null===g||void 0===g?void 0:g.length)>0&&T&&(C((function(t){return!t})),M({sendMessage:{message:k.content,from:null!==h&&void 0!==h?h:"",type:"ADMISSION_ADMIN"===f?"Admission Head":"FINANCE_MANAGER"===f?"Finance Head":"CERTIFICATE_AUTHORITY"===f?"Certificate Authority":"STUDENT_SECTION"===f?"Student Section":"ID_CARD_SECTION"===f?"Id Card Authority":"Institute Admin",fid:null!==i&&void 0!==i?i:"",alarm_mode:k.alarm_mode,sid:g,flow:y?"INSTITUTE_ADMIN":"Other"},id:T}).then((function(){e(),C((function(t){return!t}))})).catch({})):i&&k.alarm_mode&&(null===g||void 0===g?void 0:g.length)>0&&T&&(C((function(t){return!t})),w({sendMessage:{message:k.content,from:null!==h&&void 0!==h?h:"",type:"ADMISSION_ADMIN"===f?"Admission Head":"FINANCE_MANAGER"===f?"Finance Head":"CERTIFICATE_AUTHORITY"===f?"Certificate Authority":"STUDENT_SECTION"===f?"Student Section":"ID_CARD_SECTION"===f?"Id Card Authority":"Institute Admin",fid:null!==i&&void 0!==i?i:"",alarm_mode:k.alarm_mode,filtered_arr:g,flow:y?"INSTITUTE_ADMIN":"Other"},id:T}).then((function(){e(),Y(N,{state:x}),C((function(t){return!t}))})).catch({})):E(!0)},className:d.Z.fee_middle_confirm_button,style:{marginTop:"4rem"},children:Z("confirm")})]})}),H&&(0,v.jsx)(u.Z,{})]})}},32883:function(t,e,i){i.d(e,{Z:function(){return x}});var n=i(93433),o=i(29439),s=i(72791),r=i(39230),a=i(23441),l=i(6245),d=i(65543),c=i(15961),u=i(11105),_=i(16871),m=i(98094),v=i(33965),h=i(72426),f=i.n(h),g=i(55133),y=i(80184),p=function(t){var e,i,n,a,l,d,c,u,_,m=t.data,h=(0,r.$G)().t,p=(0,s.useState)(!1),x=(0,o.Z)(p,2),N=x[0],T=x[1],Z=function(){T((function(t){return!t}))};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:v.Z.sidebarheader,children:[(0,y.jsxs)("div",{className:v.Z.text,style:{width:"80%"},children:[(0,y.jsx)("p",{className:v.Z.rcv,children:h("message")}),(0,y.jsx)("h6",{children:null!==(e=null===m||void 0===m?void 0:m.message)&&void 0!==e?e:""}),(0,y.jsxs)("p",{className:v.Z.rcv,children:[h("by")," "," : ",null!==(i=null===m||void 0===m?void 0:m.message_type)&&void 0!==i?i:"",null!==m&&void 0!==m&&m.from?"(".concat(null!==(n=null===m||void 0===m||null===(a=m.from)||void 0===a?void 0:a.staffFirstName)&&void 0!==n?n:""," ").concat(null!==(l=null===m||void 0===m||null===(d=m.from)||void 0===d?void 0:d.staffMiddleName)&&void 0!==l?l:""," ").concat(null!==(c=null===m||void 0===m||null===(u=m.from)||void 0===u?void 0:u.staffLastName)&&void 0!==c?c:"",")"):""]})]}),(0,y.jsxs)("div",{className:v.Z.text,children:[(0,y.jsxs)("h6",{style:{cursor:"pointer",color:"#00f"},onClick:Z,children:[h("student")," "," : "," ",null!==(_=null===m||void 0===m?void 0:m.student_list_count)&&void 0!==_?_:0]}),(0,y.jsxs)("p",{className:v.Z.rcv,children:[f()(null===m||void 0===m?void 0:m.created_at).format("DD MMM, yyyy"),", ",f()(null===m||void 0===m?void 0:m.created_at).format("LT")]})]})]}),N&&(0,y.jsx)(g.Z,{studentList:null===m||void 0===m?void 0:m.student_list,onClose:Z})]})},x=function(t){var e=t.sid,i=(t.isInstitute,(0,r.$G)().t),v=(0,_.s0)(),h=(0,a.YD)(),f=(0,o.Z)(h,2),g=f[0],x=f[1],N=(0,s.useState)(1),T=(0,o.Z)(N,2),Z=T[0],I=T[1],j=(0,s.useState)(!0),H=(0,o.Z)(j,2),C=H[0],S=H[1],A=(0,s.useState)(!0),b=(0,o.Z)(A,2),E=b[0],L=b[1],w=(0,s.useState)([]),O=(0,o.Z)(w,2),M=O[0],D=O[1],R=(0,l.xt)({data:{sid:e,page:Z,limit:10,flow:"INSTITUTE_ADMIN"},skip:!e}),k=R.getStudentMessageHistoryGenerate,F=R.getStudentMessageHistoryGenerateRefetch,Y=(0,d.u)().scrollToTop;(0,s.useEffect)((function(){Y()}),[]),(0,s.useEffect)((function(){e&&(L(!0),F())}),[e,Z,F]),(0,s.useEffect)((function(){x&&C&&I((function(t){return t+1}))}),[x,C]),(0,s.useEffect)((function(){var t,e;null!==k&&void 0!==k&&k.all_message?(D(1===Z?null===k||void 0===k?void 0:k.all_message:function(t){var e,i;return null===(e=(0,n.Z)(new Set(null===(i=[].concat((0,n.Z)(t),(0,n.Z)(null===k||void 0===k?void 0:k.all_message)))||void 0===i?void 0:i.map(JSON.stringify))))||void 0===e?void 0:e.map(JSON.parse)}),L(!1)):0===(null===k||void 0===k||null===(t=k.all_message)||void 0===t?void 0:t.length)&&L(!1),10===(null===k||void 0===k||null===(e=k.all_message)||void 0===e?void 0:e.length)?S(!0):S(!1)}),[null===k||void 0===k?void 0:k.all_message]);return(0,y.jsxs)("div",{className:c.Z.admission_application_container,children:[(0,y.jsxs)("section",{className:c.Z.moderator_container_title,children:[(0,y.jsx)("img",{src:"/images/arrow-left-fees-icon.svg",onClick:function(){v(-1)},alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),(0,y.jsx)("div",{className:c.Z.with_search,children:(0,y.jsx)("h6",{children:i("message_history")})})]}),(0,y.jsx)(m.Z,{customStyle:{width:"100%",marginTop:"0.5rem",marginBottom:"0.5rem"}}),null===M||void 0===M?void 0:M.map((function(t,e){return(null===M||void 0===M?void 0:M.length)===e+1?(0,y.jsx)("div",{ref:g,children:(0,y.jsx)(p,{data:t})},null===t||void 0===t?void 0:t._id):(0,y.jsx)(p,{data:t},null===t||void 0===t?void 0:t._id)})),E&&(0,y.jsx)(u.Z,{status:"white"})]})}},55133:function(t,e,i){var n=i(29439),o=i(72791),s=i(36665),r=i(98094),a=i(39230),l=i(33399),d=i(33148),c=i(98734),u=i(45897),_=i(34219),m=i(80184);e.Z=function(t){var e=t.onClose,i=t.studentList,h=(0,a.$G)().t,f=(0,o.useState)(!1),g=(0,n.Z)(f,2),y=g[0],p=(g[1],(0,o.useState)([])),x=(0,n.Z)(p,2),N=x[0],T=x[1];(0,o.useEffect)((function(){i&&T((function(){return i}))}),[i]);return(0,m.jsxs)(s.Z,{onClose:e,children:[(0,m.jsx)("div",{className:l.Z.add_category_modal,style:{width:"30rem",minHeight:"10rem",maxHeight:"35rem",overflowX:"hidden",overflowY:"auto",scrollBehavior:"smooth"},children:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:d.Z.select_header,children:(0,m.jsx)("h6",{children:h("student_list")})}),(0,m.jsx)(r.Z,{customStyle:{width:"100%",marginTop:"0.5rem"}}),(0,m.jsx)("section",{className:l.Z.search_container,children:(0,m.jsxs)("div",{className:l.Z.search_container_text,children:[(0,m.jsx)("img",{className:l.Z.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),(0,m.jsx)("input",{type:"text",placeholder:h("search-label"),onChange:function(t){if(t.target.value){var e=v(i,t.target.value);T((function(){return e}))}else T((function(){return i}))}})]})}),(null===N||void 0===N?void 0:N.length)<1&&(0,m.jsx)(_.Z,{customStyleContainer:{marginTop:"9rem"},title:"No student found."}),null===N||void 0===N?void 0:N.map((function(t,e){return(0,m.jsx)(u.Z,{stu:t,isMessage:!0},e)}))]})}),y&&(0,m.jsx)(c.Z,{})]})};var v=function(){var t=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(e){var i,n,o,s,r,a,l=null!==(i=null!==(n=null!==(o=null===e||void 0===e?void 0:e.studentFirstName)&&void 0!==o?o:" "+(null===e||void 0===e?void 0:e.studentMiddleName))&&void 0!==n?n:" "+(null===e||void 0===e?void 0:e.studentLastName))&&void 0!==i?i:"";return null!==l&&void 0!==l&&null!==(s=l.toLowerCase())&&void 0!==s&&s.includes(null===t||void 0===t?void 0:t.toLowerCase())||null!==e&&void 0!==e&&null!==(r=e.studentGRNO)&&void 0!==r&&null!==(a=r.toLowerCase())&&void 0!==a&&a.includes(null===t||void 0===t?void 0:t.toLowerCase())?e:null}))}},86109:function(t,e,i){i.d(e,{GI:function(){return s},OB:function(){return a},PY:function(){return r}});var n=i(29439),o=i(73343),s=function(t){var e=(0,o.ce)();return{staffExportData:e.data,staffExportDataRefetch:e.refetch}},r=function(){var t=(0,o.tO)();return[(0,n.Z)(t,1)[0]]},a=function(){var t=(0,o.f7)();return[(0,n.Z)(t,1)[0]]}},33965:function(t,e){e.Z={history:"History_history__zT0JY",moderator_container_title:"History_moderator_container_title__zlgYe",moderator_container_title_filter:"History_moderator_container_title_filter__nIFhU",dueListTop:"History_dueListTop__yIMKg",dueListTopleft:"History_dueListTopleft__F5lTL",dueListTopbuttons:"History_dueListTopbuttons__qD9fX",dueListTopbtn:"History_dueListTopbtn__-wm1S",dueListTopbtnActive:"History_dueListTopbtnActive__y10iy",incomeContainer:"History_incomeContainer__kbyvR",income:"History_income__p0sbk",incomeLeft:"History_incomeLeft__xc+1W",incomeRight:"History_incomeRight__0WXJK",incomeLeftt:"History_incomeLeftt__TXgr0",itemsContainer:"History_itemsContainer__Y5tqY",rcv:"History_rcv__i+r3c",sidebarheader:"History_sidebarheader__kMTZv",text:"History_text__y3bAE",btn:"History_btn__b-XxZ",incomeRightt:"History_incomeRightt__oi53y",incomeTop:"History_incomeTop__7YSzU",right:"History_right__iZ36A",rightHead:"History_rightHead__0VEiK",rightBody:"History_rightBody__p-a0H",detail:"History_detail__r12VC",detailTop:"History_detailTop__zShgR",detailTopLeft:"History_detailTopLeft__AcJSZ",detailTopMid:"History_detailTopMid__A5imZ",detailTopRight:"History_detailTopRight__8-HlA",detailContent:"History_detailContent__lYofn",imagediv:"History_imagediv__z3cqD",backh:"History_backh__teYCR",searchContainer:"History_searchContainer__5KBm-",noData:"History_noData__0-f5b",history_image_container:"History_history_image_container__cfLZp"}}}]);
//# sourceMappingURL=5957.66150a15.chunk.js.map