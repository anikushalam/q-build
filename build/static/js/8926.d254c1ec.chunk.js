"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[8926],{33030:function(e,o,n){var i=n(39230),t=n(80476),l=n(80184);o.Z=function(e){var o=e.label,n=e.onAction,s=e.customStyle,a=(0,i.$G)().t;return(0,l.jsx)("div",{className:t.Z.btn_container,onClick:function(){n()},style:s,children:a(o)})}},17958:function(e,o,n){n.r(o),n.d(o,{default:function(){return G}});var i=n(29439),t=n(84975),l=n(98684),s=n(90904),a=n(33030),c=n(63687),d=n(21348),r=n(57588),u=n(91427),v=n(72791),f=n(39230),_=n(23441),S="FinanceModerator_moderator_card__Ktx0m",h="FinanceModerator_moderator_card_text_container__APCb1",m="FinanceModerator_menu_icon__mkR4i",C="FinanceModerator_selected_staff_container__SvASN",x="FinanceModerator_selected_staff_text__Bb0K6",A="FinanceModerator_modal_container__Sn82A",E="FinanceModerator_modal_container_header__LNXAG",j=n(1095),p=n(89064),N=n(1413),I=n(32963),Z=n(19056),g=n(93638),P=n(80184),T=function(e){var o,n=e.onCloseEdit,i=e.setActivePopup,t=e.selectedStaff,a=e.moderatorState,c=e.onSelectRole,r=e.onUpdateModerator,u=(0,f.$G)().t;return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(I.Z,{onClose:n,children:(0,P.jsxs)("div",{className:A,children:[(0,P.jsx)(d.Z,{children:(0,P.jsx)("div",{className:E,children:(0,P.jsx)("h6",{children:u("update_role_to_moderator")})})}),(0,P.jsx)(s.Z,{}),(0,P.jsxs)(d.Z,{customStyle:{paddingTop:"0"},children:[(0,P.jsxs)("section",{className:C,onClick:function(){return i("OPEN_STAFF_LIST")},style:{cursor:"pointer"},children:[(0,P.jsx)("img",{src:null!==t&&void 0!==t&&t.staffProfilePhoto?"".concat(j.yI,"/").concat(null===t||void 0===t?void 0:t.staffProfilePhoto):"".concat(l.p3,"/feed-user-avatar.svg"),alt:"staff profile avatar"}),(0,P.jsxs)("div",{className:x,children:[(0,P.jsx)("h6",{children:"".concat(null===t||void 0===t?void 0:t.staffFirstName," ").concat(null!==(o=null===t||void 0===t?void 0:t.staffMiddleName)&&void 0!==o?o:""," ").concat(null===t||void 0===t?void 0:t.staffLastName)}),(0,P.jsxs)("p",{children:[u("index_number")," "," : ",null===t||void 0===t?void 0:t.staffROLLNO]})]})]}),(0,P.jsx)(Z.Z,{selectLabel:u("select_role_of_moderator"),selectedValue:u("please_select_role"),options:["Cash Receipt Section","Inventories Section","Fees Master Section","Payroll Section","Deposit Section","Bank Account Section","Data Export Authority","Scholarship Administrator"],defalutValue:"CASH_RECEIPT_ACCESS"===(null===a||void 0===a?void 0:a.mod_role)?"Cash Receipt Section":"INVENTORY_ACCESS"===(null===a||void 0===a?void 0:a.mod_role)?"Inventories Section":"FEE_MASTER_ACCESS"===(null===a||void 0===a?void 0:a.mod_role)?"Fees Master Section":"PAYROLL_ACCESS"===(null===a||void 0===a?void 0:a.mod_role)?"Payroll Section":"DEPOSIT_ACCESS"===(null===a||void 0===a?void 0:a.mod_role)?"Deposit Section":"BANK_ACCOUNT_ACCESS"===(null===a||void 0===a?void 0:a.mod_role)?"Bank Account Section":"DATA_EXPORT_ACCESS"===(null===a||void 0===a?void 0:a.mod_role)?"Data Export Authority":"DATA_EXPORT_ACCESS"===(null===a||void 0===a?void 0:a.mod_role)?"Scholarship Administrator":"",onClick:c}),(0,P.jsx)(g.Z,{label:"update",onAction:r})]})]})})})},R=n(55336),O=n(49806),M=function(e){var o,n,i,t=e.staff,a=e.selectedId,c=e.onSelect,d=(0,f.$G)().t;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{className:O.Z.assign_show_list_each,style:a===(null===t||void 0===t?void 0:t._id)?{backgroundColor:"rgba(75, 26, 133, 0.1)"}:null,onClick:function(){c(t)},children:[(0,P.jsx)("img",{src:null!==t&&void 0!==t&&t.staffProfilePhoto?"".concat(j.yI,"/").concat(t.staffProfilePhoto):"".concat(l.p3,"/feed-staff-avatar.svg"),alt:"profile avatar"}),(0,P.jsxs)("div",{className:O.Z.assign_each_paragraph,children:[(0,P.jsx)("h6",{children:"".concat(null!==(o=null===t||void 0===t?void 0:t.staffFirstName)&&void 0!==o?o:""," ").concat(null!==(n=null===t||void 0===t?void 0:t.staffMiddleName)&&void 0!==n?n:""," ").concat(null!==(i=null===t||void 0===t?void 0:t.staffLastName)&&void 0!==i?i:"")}),(0,P.jsxs)("p",{children:[d("index")," "," : ",null===t||void 0===t?void 0:t.staffROLLNO]})]})]}),(0,P.jsx)(s.Z,{customStyleBorder:{margin:"0"}})]})},F=function(e){var o=e.onClose,n=e.selectedId,a=e.onSelectStaff,c=e.instituteId,S=(0,f.$G)().t,h=(0,v.useState)(""),m=(0,i.Z)(h,2),C=m[0],x=m[1],A=(0,v.useState)(1),E=(0,i.Z)(A,2),j=E[0],p=E[1],N=(0,v.useState)(!0),Z=(0,i.Z)(N,2),g=Z[0],T=Z[1],R=(0,_.YD)({skip:C}),F=(0,i.Z)(R,2),D=F[0],L=F[1],k=(0,t.nb)({data:{id:c,page:j,limit:10,search:C},skip:!c}),y=k.instituteAllStaff;k.instituteAllStaffLoading;(0,v.useEffect)((function(){L&&g&&p((function(e){return e+1}))}),[L,g]),(0,v.useEffect)((function(){null!==y&&void 0!==y&&y.length&&(0,u.f)(null===y||void 0===y?void 0:y.length,T)}),[null===y||void 0===y?void 0:y.length]);var b=(0,v.useCallback)((0,r.J)((function(e){return x(e)}),500),[]),B=function(e){n===(null===e||void 0===e?void 0:e._id)||a(e)};return(0,P.jsx)(I.Z,{onClose:o,children:(0,P.jsxs)("div",{className:O.Z.modal_container,children:[(0,P.jsx)(d.Z,{children:(0,P.jsxs)("div",{className:O.Z.modal_container_outer_header,children:[(0,P.jsx)("div",{className:O.Z.modal_container_header,children:(0,P.jsx)("h6",{children:S("staff_list")})}),(0,P.jsx)("img",{src:"".concat(l.J7,"/close.svg"),alt:"close icon",onClick:o})]})}),(0,P.jsx)(s.Z,{}),(0,P.jsxs)(d.Z,{customStyle:{paddingBottom:"1rem"},children:[(0,P.jsxs)("div",{className:O.Z.assign_search_container,style:{marginBottom:"1rem"},children:[(0,P.jsx)("input",{type:"text",placeholder:S("search"),className:O.Z.assign_search_input,onChange:function(e){b(e.target.value)}}),(0,P.jsx)("img",{src:"".concat(l.dB,"/navbar-search.svg"),alt:"search icon"})]}),null===y||void 0===y?void 0:y.map((function(e,o){return(null===y||void 0===y?void 0:y.length)===o+1?(0,P.jsx)("div",{ref:D,children:(0,P.jsx)(M,{staff:e,selectedId:n,onSelect:B})},null===e||void 0===e?void 0:e._id):(0,P.jsx)(M,{staff:e,selectedId:n,onSelect:B},null===e||void 0===e?void 0:e._id)}))]})]})})},D=function(e){var o,n,a=e.instituteId,c=e.fid,r=e.onClose,u=e.openModeratorMenu,_=e.openAs,S=e.onEdit,h=(0,f.$G)().t,m=(0,v.useState)("EDIT"===_?"PREVIEW_FORM":"OPEN_STAFF_LIST"),p=(0,i.Z)(m,2),O=p[0],M=p[1],D=(0,v.useState)("EDIT"===_?null===u||void 0===u?void 0:u.access_staff:""),L=(0,i.Z)(D,2),k=L[0],y=L[1],b=(0,v.useState)({mod_role:"EDIT"===_?null===u||void 0===u?void 0:u.access_role:"",sid:"EDIT"===_?null===u||void 0===u||null===(o=u.access_staff)||void 0===o?void 0:o._id:""}),B=(0,i.Z)(b,2),G=B[0],V=B[1],Y=(0,t.iM)(),X=(0,i.Z)(Y,1)[0];(0,v.useEffect)((function(){var e;"EDIT"===_&&(y(null===u||void 0===u?void 0:u.access_staff),V({mod_role:null===u||void 0===u?void 0:u.access_role,sid:null===u||void 0===u||null===(e=u.access_staff)||void 0===e?void 0:e._id}),M("PREVIEW_FORM"))}),[_]);var $=function(e){V((function(o){return(0,N.Z)((0,N.Z)({},o),{},{mod_role:"Cash Receipt Section"===e?"CASH_RECEIPT_ACCESS":"Inventories Section"===e?"INVENTORY_ACCESS":"Fees Master Section"===e?"FEE_MASTER_ACCESS":"Payroll Section"===e?"PAYROLL_ACCESS":"Deposit Section"===e?"DEPOSIT_ACCESS":"Bank Account Section"===e?"BANK_ACCOUNT_ACCESS":"Data Export Authority"===e||"Scholarship Administrator"===e?"DATA_EXPORT_ACCESS":""})}))};return(0,P.jsxs)(P.Fragment,{children:["OPEN_STAFF_LIST"===O&&(0,P.jsx)(F,{onSelectStaff:function(e){y(e),V((function(o){return(0,N.Z)((0,N.Z)({},o),{},{sid:null===e||void 0===e?void 0:e._id})})),M("EDIT"===_?"PREVIEW_FORM":"ASSIGN_ROLE")},onClose:r,instituteId:a}),"ASSIGN_ROLE"===O&&(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(I.Z,{onClose:r,children:(0,P.jsxs)("div",{className:A,children:[(0,P.jsx)(d.Z,{children:(0,P.jsx)("div",{className:E,children:(0,P.jsx)("h6",{children:h("assign_role_to_moderator")})})}),(0,P.jsx)(s.Z,{}),(0,P.jsxs)(d.Z,{customStyle:{paddingTop:"0"},children:[(0,P.jsxs)("section",{className:C,children:[(0,P.jsx)("img",{src:null!==k&&void 0!==k&&k.staffProfilePhoto?"".concat(j.yI,"/").concat(null===k||void 0===k?void 0:k.staffProfilePhoto):"".concat(l.p3,"/feed-user-avatar.svg"),alt:"staff profile avatar"}),(0,P.jsxs)("div",{className:x,children:[(0,P.jsx)("h6",{children:"".concat(null===k||void 0===k?void 0:k.staffFirstName," ").concat(null!==(n=null===k||void 0===k?void 0:k.staffMiddleName)&&void 0!==n?n:""," ").concat(null===k||void 0===k?void 0:k.staffLastName)}),(0,P.jsxs)("p",{children:[h("index_no"),null===k||void 0===k?void 0:k.staffROLLNO]})]})]}),(0,P.jsx)(Z.Z,{selectLabel:h("select_role_of_moderator"),selectedValue:h("please_select_role"),options:["Cash Receipt Section","Inventories Section","Fees Master Section","Payroll Section","Deposit Section","Bank Account Section","Data Export Authority","Scholarship Administrator"],defalutValue:"CASH_RECEIPT_ACCESS"===(null===G||void 0===G?void 0:G.mod_role)?"Cash Receipt Section":"INVENTORY_ACCESS"===(null===G||void 0===G?void 0:G.mod_role)?"Inventories Section":"FEE_MASTER_ACCESS"===(null===G||void 0===G?void 0:G.mod_role)?"Fees Master Section":"PAYROLL_ACCESS"===(null===G||void 0===G?void 0:G.mod_role)?"Payroll Section":"DEPOSIT_ACCESS"===(null===G||void 0===G?void 0:G.mod_role)?"Deposit Section":"BANK_ACCOUNT_ACCESS"===(null===G||void 0===G?void 0:G.mod_role)?"Bank Account Section":"DATA_EXPORT_ACCESS"===(null===G||void 0===G?void 0:G.mod_role)?"Data Export Authority":"DATA_EXPORT_ACCESS"===(null===G||void 0===G?void 0:G.mod_role)?"Scholarship Administrator":"",onClick:$}),(0,P.jsx)(g.Z,{label:"assign",onAction:function(){M("LOADING"),X({fid:c,addModerator:G}).then((function(){M(""),r()})).catch({})}})]}),"LOADING"===O&&(0,P.jsx)(R.Z,{})]})})}),"PREVIEW_FORM"===O&&(0,P.jsx)(T,{onCloseEdit:function(){r()},setActivePopup:M,selectedStaff:k,moderatorState:G,onSelectRole:$,onUpdateModerator:function(){S(G)}}),"LOADING"===O&&(0,P.jsx)(R.Z,{})]})},L=function(e){var o=e.onClose,n=e.financeId,l=e.openModeratorMenu,s=e.instituteId,a=(0,f.$G)().t,c=(0,v.useState)(!1),d=(0,i.Z)(c,2),r=d[0],u=d[1],_=(0,v.useState)(!1),S=(0,i.Z)(_,2),h=S[0],m=S[1],C=(0,t.G8)(),x=(0,i.Z)(C,1)[0],A=(0,t.E6)(),E=(0,i.Z)(A,1)[0],j=function(){m((function(e){return!e}))};return(0,P.jsx)(P.Fragment,{children:h?(0,P.jsx)(D,{onClose:j,onEdit:function(e){u((function(e){return!e})),j(),E({modId:null===l||void 0===l?void 0:l._id,updateModerator:{role:null===e||void 0===e?void 0:e.mod_role,staffId:null===e||void 0===e?void 0:e.sid}}).then((function(){u((function(e){return!e})),o()})).catch({})},openModeratorMenu:l,openAs:"EDIT",fid:n,instituteId:s}):(0,P.jsxs)(p.Z,{onClose:o,disabled:r,children:[(0,P.jsx)("h6",{onClick:j,children:a("edit")}),(0,P.jsx)("h6",{onClick:function(){u((function(e){return!e})),x({fid:n,modId:null===l||void 0===l?void 0:l._id}).then((function(){o(),u((function(e){return!e}))})).catch({})},children:a("delete")})]})})},k=function(e){var o,n,t,s,a,c,d,r=e.moderator,u=e.instituteId,_=e.financeId,C=(0,f.$G)().t,x=(0,v.useState)(""),A=(0,i.Z)(x,2),E=A[0],p=A[1];return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{className:S,children:[(0,P.jsx)("img",{src:null!==r&&void 0!==r&&null!==(o=r.access_staff)&&void 0!==o&&o.staffProfilePhoto?"".concat(j.yI,"/").concat(null===r||void 0===r||null===(n=r.access_staff)||void 0===n?void 0:n.staffProfilePhoto):"".concat(l.p3,"/feed-user-avatar.svg"),alt:"moderator avatar"}),(0,P.jsxs)("section",{className:h,children:[(0,P.jsx)("h6",{children:"".concat(null===r||void 0===r||null===(t=r.access_staff)||void 0===t?void 0:t.staffFirstName," ").concat(null!==(s=null===r||void 0===r||null===(a=r.access_staff)||void 0===a?void 0:a.staffMiddleName)&&void 0!==s?s:""," ").concat(null===r||void 0===r||null===(c=r.access_staff)||void 0===c?void 0:c.staffLastName)}),(0,P.jsxs)("p",{children:[C("index_number")," "," : ",null===r||void 0===r||null===(d=r.access_staff)||void 0===d?void 0:d.staffROLLNO]}),(0,P.jsx)("p",{children:"CASH_RECEIPT_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Cash Receipt Section":"INVENTORY_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Inventories Section":"FEE_MASTER_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Fees Master Section":"PAYROLL_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Payroll Section":"DEPOSIT_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Deposit Section":"BANK_ACCOUNT_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Bank Account Section":"DATA_EXPORT_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Data Export Authority":"DATA_EXPORT_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Scholarship Administrator":""})]}),(0,P.jsx)("img",{src:"".concat(l.J7,"/menu.svg"),alt:"menu icon",onClick:function(){p(r)},className:m,title:"Menu"})]}),E&&(0,P.jsx)(L,{onClose:function(){p("")},financeId:_,openModeratorMenu:E,instituteId:u})]})},y=n(93405),b=n(23984),B=n(1669),G=function(e){var o=e.fid,n=e.instituteId,S=(0,f.$G)().t,h=(0,v.useState)(""),m=(0,i.Z)(h,2),C=m[0],x=m[1],A=(0,v.useState)(1),E=(0,i.Z)(A,2),j=E[0],p=E[1],N=(0,v.useState)(!0),I=(0,i.Z)(N,2),Z=I[0],g=I[1],T=(0,_.YD)({skip:C}),R=(0,i.Z)(T,2),O=R[0],M=R[1],F=(0,v.useState)(!1),L=(0,i.Z)(F,2),G=L[0],V=L[1],Y=(0,t.NK)({data:{fid:o,page:j,limit:10,search:C},skip:!o}),X=Y.financeModerator,$=Y.financeModeratorLoading;(0,v.useEffect)((function(){M&&Z&&p((function(e){return e+1}))}),[M,Z]),(0,v.useEffect)((function(){null!==X&&void 0!==X&&X.length&&(0,u.f)(null===X||void 0===X?void 0:X.length,g)}),[null===X||void 0===X?void 0:X.length]);var K=(0,v.useCallback)((0,r.J)((function(e){return x(e)}),500),[]),U=function(){V((function(e){return!e}))};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(c.Z,{children:[(0,P.jsx)(d.Z,{children:(0,P.jsxs)("div",{className:y.Z.fm_header_container,children:[(0,P.jsx)("h6",{children:S("finance_moderators")}),(0,P.jsx)("div",{className:y.Z.fm_search,children:(0,P.jsx)("section",{className:y.Z.fm_search_container,children:(0,P.jsxs)("div",{className:y.Z.fm_search_container_inner,children:[(0,P.jsx)("img",{className:y.Z.fm_search_icon,alt:"search icon",src:"".concat(l.dB,"/navbar-search.svg")}),(0,P.jsx)("input",{type:"text",placeholder:S("search"),onChange:function(e){K(e.target.value)}})]})})})]})}),(0,P.jsx)(s.Z,{}),(0,P.jsxs)(d.Z,{customStyle:{paddingTop:"0.2rem"},children:[(0,P.jsx)(b.Z,{children:(0,P.jsx)(a.Z,{label:"add_new_moderator",onAction:U})}),$&&(0,P.jsx)(B.Z,{}),null===X||void 0===X?void 0:X.map((function(e,i){return(null===X||void 0===X?void 0:X.length)===i+1?(0,P.jsx)("div",{ref:O,children:(0,P.jsx)(k,{moderator:e,financeId:o,instituteId:n})},null===e||void 0===e?void 0:e._id):(0,P.jsx)(k,{moderator:e,financeId:o,instituteId:n},null===e||void 0===e?void 0:e._id)}))]})]}),G&&(0,P.jsx)(D,{instituteId:n,fid:o,onClose:U})]})}}}]);
//# sourceMappingURL=8926.d254c1ec.chunk.js.map