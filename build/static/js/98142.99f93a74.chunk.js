"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[98142],{93638:(e,l,n)=>{n.d(l,{Z:()=>s});var t=n(39230),i=n(80476),o=n(80184);const s=e=>{let{label:l,count:n,onAction:s,customStyle:a,isTranslate:d}=e;const{t:c}=(0,t.$G)();return d?(0,o.jsxs)("div",{className:i.Z.create_btn_container,onClick:s,style:a,children:[n>0?(0,o.jsxs)("span",{children:[n," "]}):null,l]}):(0,o.jsxs)("div",{className:i.Z.create_btn_container,onClick:s,style:a,children:[n>0?(0,o.jsxs)("span",{children:[n," "]}):null,c(l)]})}},98142:(e,l,n)=>{n.r(l),n.d(l,{default:()=>p});var t=n(72791),i=n(56959),o=n(23441),s=n(91427),a=n(57588),d=n(63687),c=n(21348),r=n(90904),v=n(55336),u=n(1669),m=n(2651),_=n(36132),f=n(39230),h=n(98684),x=n(7254),j=n(80184);const p=e=>{var l,n,p;let{modId:g}=e;const{t:b}=(0,f.$G)(),[Z,N]=(0,t.useState)(""),[w,y]=(0,t.useState)(1),[M,k]=(0,t.useState)(!0),[R,S]=(0,o.YD)({skip:Z}),{lmsModeratorAllRequestList:Y,lmsModeratorAllRequestListLoading:q,lmsModeratorAllRequestListRefetch:L}=(0,_.B8)({data:{mid:g,page:w,limit:10,search:Z,flow:"Recommend_Section"},skip:!g});(0,t.useEffect)((()=>{S&&M&&y((e=>e+1))}),[S,M]),(0,t.useEffect)((()=>{var e;if(null!==Y&&void 0!==Y&&null!==(e=Y.list)&&void 0!==e&&e.length){var l;let e=(0,s.f)(null===Y||void 0===Y||null===(l=Y.list)||void 0===l?void 0:l.length);k((()=>e))}}),[null===Y||void 0===Y?void 0:Y.list]);const A=(0,t.useCallback)((0,a.J)((e=>{y((()=>1)),N(e)}),1500),[]),F=(0,t.useCallback)((()=>{y((()=>1)),N(""),L()}),[L]);return(0,j.jsxs)(d.default,{children:[(0,j.jsx)(c.Z,{children:(0,j.jsxs)("div",{className:i.Z.fm_header_container,children:[(0,j.jsx)("h6",{children:b("leave_request")}),(0,j.jsx)("div",{className:i.Z.fm_search,children:(0,j.jsx)("section",{className:i.Z.fm_search_container,children:(0,j.jsxs)("div",{className:i.Z.fm_search_container_inner,children:[(0,j.jsx)("img",{className:i.Z.fm_search_icon,alt:"search icon",src:"".concat(h.dB,"/navbar-search.svg")}),(0,j.jsx)("input",{type:"text",placeholder:b("search"),onChange:e=>{e.target.value?A(e.target.value):(y((()=>1)),N(""))}})]})})})]})}),(0,j.jsx)(r.Z,{}),(0,j.jsxs)(c.Z,{children:[null===Y||void 0===Y||null===(l=Y.list)||void 0===l?void 0:l.map(((e,l)=>{var n;return(null===Y||void 0===Y||null===(n=Y.list)||void 0===n?void 0:n.length)===l+1?(0,j.jsx)("div",{ref:R,children:(0,j.jsx)(x.Z,{leave:e,onRefetch:F,modId:g,flow:"Recommend_Section"})},null===e||void 0===e?void 0:e._id):(0,j.jsx)(x.Z,{leave:e,onRefetch:F,modId:g,flow:"Recommend_Section"},null===e||void 0===e?void 0:e._id)})),q?Z?(0,j.jsx)(v.Z,{}):(0,j.jsx)(u.Z,{}):Z?0===(null===Y||void 0===Y||null===(n=Y.list)||void 0===n?void 0:n.length)&&(0,j.jsx)(m.Z,{title:"No staff leave request found related this search."}):0===(null===Y||void 0===Y||null===(p=Y.list)||void 0===p?void 0:p.length)&&(0,j.jsx)(m.Z,{title:"No staff leave request."})]})]})}},7254:(e,l,n)=>{n.d(l,{Z:()=>h});var t=n(72791),i=n(55336),o=n(98684),s=n(97892),a=n.n(s),d=n(82824),c=n(1095),r=n(55050),v=n(93638),u=n(36132),m=n(39230),_=n(45445),f=n(80184);const h=e=>{var l,n,s,h,p,g,b,Z,N,w,y,M,k,R,S,Y,q,L,A,F,C,D,T,B,I,J,G,P;let{leave:W,onRefetch:$,modId:E,flow:O,whichAccess:H}=e;const{t:K}=(0,m.$G)(),[z]=(0,u.Sr)(),[Q,U]=(0,t.useState)(!1),[V,X]=(0,t.useState)(!1),ee=e=>{null!==W&&void 0!==W&&W._id&&O&&E&&(U((e=>!e)),z({lid:null===W||void 0===W?void 0:W._id,requestLeave:{leave_from:O,staff_mod:E,status:e}}).then((()=>{$(),U((e=>!e))})).catch({}))},le=()=>{X((e=>!e))};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:r.Z.lmsr_card,children:[(0,f.jsxs)("div",{className:r.Z.lmsrc_card,children:[(0,f.jsxs)("div",{className:r.Z.lmsrc_card_inner,children:[(0,f.jsx)("img",{src:null!==W&&void 0!==W&&null!==(l=W.staff)&&void 0!==l&&l.staffProfilePhoto?"".concat(c.yI,"/").concat(null===W||void 0===W||null===(n=W.staff)||void 0===n?void 0:n.staffProfilePhoto):"".concat(o.p3,"/feed-user-avatar.svg"),alt:"staff icon"}),(0,f.jsxs)("div",{className:r.Z.lmsrci_text,children:[(0,f.jsx)("h6",{children:"".concat(null===W||void 0===W||null===(s=W.staff)||void 0===s?void 0:s.staffFirstName," ").concat(null!==W&&void 0!==W&&null!==(h=W.staff)&&void 0!==h&&h.staffMiddleName?null===W||void 0===W||null===(p=W.staff)||void 0===p?void 0:p.staffMiddleName:""," ").concat(null===W||void 0===W||null===(g=W.staff)||void 0===g?void 0:g.staffLastName)}),(0,f.jsxs)("p",{children:["Sactioning"===H?(0,f.jsxs)(f.Fragment,{children:[K("reviewed_on")," ",(0,d.J)(null===W||void 0===W||null===(b=W.review)||void 0===b?void 0:b.review_on,"LT"),","," ",a()(null===W||void 0===W||null===(Z=W.review)||void 0===Z?void 0:Z.review_on).format("DD MMM YYYY")]}):"Reviewing"===H?(0,f.jsxs)(f.Fragment,{children:[K("recomend_on"),(0,d.J)(null===W||void 0===W||null===(N=W.recommend)||void 0===N?void 0:N.recommend_on,"LT"),","," ",a()(null===W||void 0===W||null===(w=W.recommend)||void 0===w?void 0:w.recommend_on).format("DD MMM YYYY")]}):(0,f.jsxs)(f.Fragment,{children:[K("raised_on"),(0,d.J)(null===W||void 0===W?void 0:W.createdAt,"LT"),", ",a()(null===W||void 0===W?void 0:W.createdAt).format("DD MMM YYYY"),", "]}),(0,f.jsx)("span",{className:r.Z.lmsrc_date,onClick:le,children:K("for_dates")})]}),(0,f.jsx)("p",{children:"Sactioning"===H?(0,f.jsxs)(f.Fragment,{children:[K("reviewing_by"),"".concat(null!==(y=null===W||void 0===W||null===(M=W.review)||void 0===M||null===(k=M.review_by)||void 0===k?void 0:k.staffFirstName)&&void 0!==y?y:""," ").concat(null!==(R=null===W||void 0===W||null===(S=W.review)||void 0===S||null===(Y=S.review_by)||void 0===Y?void 0:Y.staffMiddleName)&&void 0!==R?R:""," ").concat(null!==(q=null===W||void 0===W||null===(L=W.review)||void 0===L||null===(A=L.review_by)||void 0===A?void 0:A.staffLastName)&&void 0!==q?q:"")]}):"Reviewing"===H?(0,f.jsxs)(f.Fragment,{children:[K("recomending_by"),"".concat(null!==(F=null===W||void 0===W||null===(C=W.recommend)||void 0===C||null===(D=C.recommend_by)||void 0===D?void 0:D.staffFirstName)&&void 0!==F?F:""," ").concat(null!==(T=null===W||void 0===W||null===(B=W.recommend)||void 0===B||null===(I=B.recommend_by)||void 0===I?void 0:I.staffMiddleName)&&void 0!==T?T:""," ").concat(null!==(J=null===W||void 0===W||null===(G=W.recommend)||void 0===G||null===(P=G.recommend_by)||void 0===P?void 0:P.staffLastName)&&void 0!==J?J:"")]}):null})]})]}),(0,f.jsx)("div",{className:r.Z.lmsrc_btn,children:"Request"===(null===W||void 0===W?void 0:W.status)?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(v.Z,{label:K("reject"),onAction:()=>ee("Rejected"),customStyle:x}),(0,f.jsx)(v.Z,{label:K("approve"),onAction:()=>ee("Accepted"),customStyle:j})]}):null})]}),(0,f.jsx)("div",{className:r.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,f.jsxs)("h6",{style:{fontWeight:"400"},children:[K("leave_type")," "," : ",null===W||void 0===W?void 0:W.leave_type]})}),(0,f.jsx)("div",{className:r.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,f.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[K("reason")," "," : ",null===W||void 0===W?void 0:W.reason]})}),(null===W||void 0===W?void 0:W.attach)&&(0,f.jsx)("div",{className:r.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,f.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[K("attachment")," "," : ",(0,f.jsx)("a",{href:"".concat(c.q2,"/").concat(null===W||void 0===W?void 0:W.attach),target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,f.jsx)("span",{className:r.Z.lmsrc_date,children:K("view_attachment")})})]})})]}),V&&(0,f.jsx)(_.Z,{onClose:le,allDate:null===W||void 0===W?void 0:W.date}),Q&&(0,f.jsx)(i.Z,{})]})},x={"--bg-button":"#e7e7e7","--color-button":"#6f727c","--color-white":"#ffffff",margin:"0",padding:"0.2rem 0.8rem"},j={margin:"0",padding:"0.2rem 0.8rem"}},80476:(e,l,n)=>{n.d(l,{Z:()=>t});const t={btn_wrapper:"Button_btn_wrapper__ihT7O",btn_container:"Button_btn_container__OaH2t",create_btn_container:"Button_create_btn_container__JuZrx",upload_excel_file:"Button_upload_excel_file__a7d0K",set_btn_container:"Button_set_btn_container__RvfRG",ccb_button:"Button_ccb_button__Mjv4T"}}}]);
//# sourceMappingURL=98142.99f93a74.chunk.js.map