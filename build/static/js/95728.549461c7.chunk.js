(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[95728,81221,58936,7920],{17502:(e,l,t)=>{"use strict";t.d(l,{Z:()=>c});var n=t(6758),i=t(72791),o=t(39230),a=t(52245),s=t(98684),d=t(80184);const r=e=>{let{selectLabel:l,onClick:t,selectedValue:n,options:r,customStyleContainer:c,customLabelStyle:u,customListStyle:v,errorShow:_,defalutValue:m,viewAs:h,isFull:f}=e;const{t:p}=(0,o.$G)(),[x,j]=(0,i.useState)(!1),[g,y]=(0,i.useState)(""),b=()=>{j((e=>!e))};(0,i.useEffect)((()=>{"NORMAL_FILTER"===h&&y(m)}),[h,m]),(0,i.useEffect)((()=>{if("CUSTOM_FILTER"===h){let n="";for(let i of r)for(let o of m)if((null===i||void 0===i?void 0:i._id)===o){var e,l,t;let o=null!==(e=null!==(l=null!==(t=null===i||void 0===i?void 0:i.dName)&&void 0!==t?t:null===i||void 0===i?void 0:i.batchName)&&void 0!==l?l:null===i||void 0===i?void 0:i.className)&&void 0!==e?e:"";n=n?n+", "+o:o}y(n)}}),[h,m,r]);return(0,d.jsxs)("div",{className:a.Z.form_input_container,style:{...c},children:[(0,d.jsxs)("p",{className:a.Z.join_form_select_paragraph,style:{...u},children:[l,_&&(0,d.jsxs)("span",{style:{color:"red",marginLeft:"15px"},children:["* ",p("form_require_label")]})]}),(0,d.jsxs)("section",{className:a.Z.join_form_select_custom,onClick:b,children:[g?(0,d.jsx)("p",{className:a.Z.join_form_select_custom_paragraph,children:null!==g&&void 0!==g?g:""}):(0,d.jsx)("p",{className:a.Z.join_form_select_custom_paragraph,children:n}),x?(0,d.jsx)("img",{className:a.Z.join_form_select_custom_rotate_icon,src:"".concat(s.J7,"/down.svg"),alt:"categor icon"}):(0,d.jsx)("img",{className:a.Z.join_form_select_custom_icon,src:"".concat(s.J7,"/down.svg"),alt:"categor icon"})]}),x&&(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("section",{className:a.Z.join_form_select_custom_list,style:v,children:null===r||void 0===r?void 0:r.map(((e,l)=>{var n;return(0,d.jsx)("p",{onClick:()=>(e=>{var l;t(f?e:null===e||void 0===e?void 0:e._id),b(),y(null!==(l=null===e||void 0===e?void 0:e.finance_bank_account_name)&&void 0!==l?l:e)})(e),className:a.Z.join_form_select_custom_paragraph_option,children:null!==(n=null===e||void 0===e?void 0:e.finance_bank_account_name)&&void 0!==n?n:e},l)}))})})]})},c=e=>{var l;let{fid:t,onSelect:i,errorShow:a,viewAs:s,defalutValue:c}=e;const{t:u}=(0,o.$G)(),{financeAllBank:v}=(0,n.iB)({data:{fid:t,page:1,limit:1e3,search:""},skip:!t});return(0,d.jsx)(r,{selectLabel:u("bank_account"),selectedValue:u("bank_account_placeholder"),options:(null===v||void 0===v||null===(l=v.list)||void 0===l?void 0:l.length)>0?[...null===v||void 0===v?void 0:v.list]:[],onClick:i,isFull:!0,errorShow:a,defalutValue:c,viewAs:s})}},96898:(e,l,t)=>{"use strict";t.d(l,{Z:()=>s});var n=t(4007),i=t(98684),o=t(39230),a=t(80184);const s=e=>{var l,t,s,d,r,c;let{structure:u,selectedStructure:v,onSelect:_,isShow:m,customContainerStyle:h}=e;const{t:f}=(0,o.$G)();return(0,a.jsx)(a.Fragment,{children:"YES"===m?(0,a.jsxs)("div",{className:n.Z.fees_card,style:h,children:[(0,a.jsx)("img",{src:"".concat(i.J7,"/category.svg"),alt:"categor icon"}),(0,a.jsxs)("div",{className:n.Z.fees_card_text,children:[(0,a.jsx)("div",{className:n.Z.fees_card_text_bottom,children:(0,a.jsx)("h6",{children:null!==(l=null===u||void 0===u?void 0:u.unique_structure_name)&&void 0!==l?l:""})}),(0,a.jsxs)("div",{className:n.Z.fees_card_text_bottom,children:[(0,a.jsxs)("h6",{children:[f("applicable_fees_only")," ",f("rs_only"),null!==(t=null===u||void 0===u?void 0:u.applicable_fees)&&void 0!==t?t:0]}),(0,a.jsxs)("h6",{children:[f("total_admission_fees")," "," : "," ",f("rs_only"),null!==(s=null===u||void 0===u?void 0:u.total_admission_fees)&&void 0!==s?s:0]})]})]})]}):(0,a.jsxs)("div",{className:v===(null===u||void 0===u?void 0:u._id)?"".concat(n.Z.fees_card," ").concat(n.Z.fees_card_hover_active):"".concat(n.Z.fees_card," ").concat(n.Z.fees_card_hover),onClick:()=>{_(u)},style:{cursor:"pointer"},children:[(0,a.jsx)("img",{src:"".concat(i.J7,"/category.svg"),alt:"categor icon"}),(0,a.jsxs)("div",{className:n.Z.fees_card_text,children:[(0,a.jsx)("div",{className:n.Z.fees_card_text_bottom,children:(0,a.jsx)("h6",{children:null!==(d=null===u||void 0===u?void 0:u.unique_structure_name)&&void 0!==d?d:""})}),(0,a.jsxs)("div",{className:n.Z.fees_card_text_bottom,children:[(0,a.jsxs)("h6",{children:[f("applicable_fees_only")," ",f("rs_only"),null!==(r=null===u||void 0===u?void 0:u.applicable_fees)&&void 0!==r?r:0]}),(0,a.jsxs)("h6",{children:[f("total_admission_fees")," "," : "," ",f("rs_only"),null!==(c=null===u||void 0===u?void 0:u.total_admission_fees)&&void 0!==c?c:0]})]})]})]})})}},95522:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>de});var n=t(39230),i=t(56959),o=t(63687),a=t(21348),s=t(90904),d=t(98684),r=t(16871),c=t(43504),u=t(72791),v=t(98967),_=t(63162),m=t(23441),h=t(6758),f=t(91427),p=t(93638),x=t(2651),j=t(55336),g=t(1669),y=t(38857),b=t(4007),Z=t(61055),S=t(17502),N=t(66659),C=t(43172),k=t(75810),F=t(99183),E=t(57588),O=t(96898),T=t(80184);const w=e=>{var l,t,i,o,r,c,v;let{fid:_,onClose:Z,selectedStructure:S,onSelectedStrucutre:N,title:C,oneStep:k}=e;const{t:F}=(0,n.$G)(),[w,A]=(0,u.useState)(""),[L,I]=(0,u.useState)(1),[Y,R]=(0,u.useState)(!0),[M,H]=(0,m.YD)({skip:w}),[D,G]=(0,u.useState)(""),{financeAllNotFilterFeeStructure:q,financeAllNotFilterFeeStructureLoading:B}=(0,h.Xt)({data:{fid:_,page:L,limit:10,search:w},skip:!_});(0,u.useEffect)((()=>{H&&Y&&I((e=>e+1))}),[H,Y]),(0,u.useEffect)((()=>{var e;if(null!==q&&void 0!==q&&null!==(e=q.list)&&void 0!==e&&e.length){var l;let e=(0,f.f)(null===q||void 0===q||null===(l=q.list)||void 0===l?void 0:l.length);R((()=>e))}}),[null===q||void 0===q||null===(l=q.list)||void 0===l?void 0:l.length]);const P=(0,u.useCallback)((0,E.J)((e=>{I((()=>1)),A(e)}),500),[]),J=e=>{k&&N(e),G(e)};return(0,T.jsx)(T.Fragment,{children:D?(0,T.jsx)(y.Z,{onClose:Z,children:(0,T.jsxs)("div",{className:b.Z.modal_container,children:[(0,T.jsx)(a.default,{children:(0,T.jsxs)("div",{className:b.Z.modal_container_outer_header,children:[(0,T.jsx)("div",{className:b.Z.modal_container_header,children:(0,T.jsx)("h6",{children:F("fee_structure")})}),(0,T.jsx)("img",{src:"".concat(d.J7,"/close.svg"),alt:"close icon",onClick:()=>J("")})]})}),(0,T.jsx)(s.Z,{}),(0,T.jsxs)(a.default,{customStyle:{paddingTop:"0.3rem"},children:[(0,T.jsxs)("div",{className:b.Z.fee_middle_section,children:[(0,T.jsx)("p",{children:F("fee_structure_of_student_is")}),(0,T.jsx)("h6",{children:null===D||void 0===D||null===(r=D.category_master)||void 0===r?void 0:r.category_name}),(0,T.jsxs)("p",{children:[" ",F("total_admission_fees")," "," : "," ",F("rs")," ",(0,T.jsx)("span",{style:{fontWeight:"600"},children:null!==(c=null===D||void 0===D?void 0:D.total_admission_fees)&&void 0!==c?c:0})]}),(0,T.jsxs)("p",{children:[F("applicable_fees_amount")," "," : "," ",F("rs")," ",(0,T.jsx)("span",{style:{fontWeight:"600"},children:null!==(v=null===D||void 0===D?void 0:D.applicable_fees)&&void 0!==v?v:0})]})]}),(0,T.jsx)(p.Z,{label:"confirm",onAction:()=>N(D)})]})]})}):(0,T.jsx)(y.Z,{onClose:Z,children:(0,T.jsxs)("div",{className:b.Z.modal_container,style:{maxWidth:"40rem"},children:[(0,T.jsx)(a.default,{children:(0,T.jsxs)("div",{className:b.Z.modal_container_outer_header,children:[(0,T.jsx)("div",{className:b.Z.modal_container_header,children:(0,T.jsx)("h6",{children:F(null!==C&&void 0!==C?C:"edit_fees_structure")})}),(0,T.jsx)("img",{src:"".concat(d.J7,"/close.svg"),alt:"close icon",onClick:Z})]})}),(0,T.jsx)(s.Z,{}),(0,T.jsxs)(a.default,{customStyle:{paddingTop:"0.3rem"},children:[(0,T.jsxs)("div",{className:b.Z.fm_search_full_container_inner,style:{marginBottom:"0.6rem"},children:[(0,T.jsx)("input",{type:"text",placeholder:F("search"),className:b.Z.fm_search_full_container_inner,onChange:e=>{e.target.value?P(e.target.value):(I((()=>1)),A(""))}}),(0,T.jsx)("img",{src:"".concat(d.dB,"/navbar-search.svg"),alt:"search icon",className:b.Z.fm_search_full_icon})]}),null===q||void 0===q||null===(t=q.list)||void 0===t?void 0:t.map(((e,l)=>{var t;return(null===q||void 0===q||null===(t=q.list)||void 0===t?void 0:t.length)===l+1?(0,T.jsx)("div",{ref:M,children:(0,T.jsx)(O.Z,{structure:e,selectedStructure:S,onSelect:J})},null===e||void 0===e?void 0:e._id):(0,T.jsx)(O.Z,{structure:e,selectedStructure:S,onSelect:J},null===e||void 0===e?void 0:e._id)})),B?w?(0,T.jsx)(j.default,{}):(0,T.jsx)(g.Z,{}):w?0===(null===q||void 0===q||null===(i=q.list)||void 0===i?void 0:i.length)&&(0,T.jsx)(x.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No fee structure found related this search."}):0===(null===q||void 0===q||null===(o=q.list)||void 0===o?void 0:o.length)&&(0,T.jsx)(x.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No fee structure added."})]})]})})})};var A=t(16925),L=t(60924),I=t(43997),Y=t(50518),R=t(60307),M=t(71439),H=t(64499),D=t(85794);const G=e=>{var l,t,i,o,c,v,_,m,h,f,x,g,b;let{onClose:S,applicant:N,appId:C,financeId:k,isOtherFees:E,onGrabCollectFees:O}=e;const{t:w}=(0,n.$G)(),[G,q]=(0,u.useState)(!1),B=(0,r.UO)(),[P,J]=(0,u.useState)({amount:"",mode:"",fee_payment_mode:"",fee_payment_amount:"",transaction_date:"",fee_bank_name:"",fee_bank_holder:"",fee_utr_reference:""}),[$,U]=(0,u.useState)(""),[V,W]=(0,u.useState)({open:!1,msg:"",variant:"error"}),[K,z]=(0,u.useState)({amount:0,type:"OTHER_FEES",isTransaction:!1}),{studentInstituteCharges:X}=(0,R.xY)({data:{id:null===N||void 0===N||null===(l=N.app_card)||void 0===l||null===(t=l.remaining_array)||void 0===t||null===(i=t[0])||void 0===i?void 0:i.instituteId},skip:!(null!==N&&void 0!==N&&null!==(o=N.app_card)&&void 0!==o&&null!==(c=o.remaining_array)&&void 0!==c&&null!==(v=c[0])&&void 0!==v&&v.instituteId)});(0,u.useEffect)((()=>{var e,l,t;if("OTHER_FEES"===E)J((e=>{var l,t,n,i;return{...e,amount:+(null===N||void 0===N||null===(l=N.heads)||void 0===l||null===(t=l[0])||void 0===t?void 0:t.head_amount),fee_payment_amount:+(null===N||void 0===N||null===(n=N.heads)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.head_amount)}})),z({amount:null!==(e=+(null===N||void 0===N||null===(l=N.heads)||void 0===l||null===(t=l[0])||void 0===t?void 0:t.head_amount))&&void 0!==e?e:0,type:"OTHER_FEES",isTransaction:!1});else if("SUBJECT_OTHER_FEES"===E){var n,i,o;if(null!==N&&void 0!==N&&null!==(n=N.struct)&&void 0!==n&&n.applicable_fees)J((e=>{var l,t;return{...e,amount:+(null===N||void 0===N||null===(l=N.struct)||void 0===l?void 0:l.applicable_fees),fee_payment_amount:+(null===N||void 0===N||null===(t=N.struct)||void 0===t?void 0:t.applicable_fees)}})),z({amount:null!==(i=+(null===N||void 0===N||null===(o=N.struct)||void 0===o?void 0:o.applicable_fees))&&void 0!==i?i:0,type:"OTHER_FEES",isTransaction:!1})}}),[E,null===N||void 0===N?void 0:N.heads,null===N||void 0===N||null===(_=N.struct)||void 0===_?void 0:_.applicable_fees]);const Q=e=>{J((l=>({...l,[e.target.name]:e.target.value})))};return(0,T.jsxs)(T.Fragment,{children:[K.isTransaction?(0,T.jsx)(M.Z,{onClose:S,allContent:{...K,platform_charges:null===X||void 0===X||null===(m=X.platform_charges)||void 0===m?void 0:m.percentage},checkoutAdmissionHandler:()=>{var e,l,t,n,i,o,a,s,d,r,c,u,v,_,m,h,f,p,x,j,g,y,b,Z,S,C;let k=2.1*+(null===K||void 0===K?void 0:K.amount)/100,F=k+18*+k/100;const E=parseInt(null===K||void 0===K?void 0:K.amount);var O=Math.ceil(E+ +F.toFixed(2));(0,H.oU)({amount:null!==(e=+(null===K||void 0===K?void 0:K.amount))&&void 0!==e?e:10,amount_nocharges:null!==(l=+O)&&void 0!==l?l:0,type:"Admission",paidBy:"".concat(null===N||void 0===N||null===(t=N.student)||void 0===t?void 0:t._id),paidTo:"".concat(null===N||void 0===N||null===(n=N.app_card)||void 0===n||null===(i=n.remaining_array)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.instituteId),moduleId:"".concat(null===N||void 0===N||null===(a=N.app_card)||void 0===a||null===(s=a.remaining_array)||void 0===s||null===(d=s[0])||void 0===d?void 0:d.appId),ad_status_id:null,payment_installment:null===N||void 0===N||null===(r=N.app_card)||void 0===r||null===(c=r.remaining_array)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.installmentValue,ad_install:null,month:null,payment_remain_1:null,payment_card_type:null,payment_book_id:null,name:B.username,isApk:"web",payment_card_id:null!==(v=null===N||void 0===N||null===(_=N.app_card)||void 0===_?void 0:_.parent_card)&&void 0!==v?v:null,payment_remain_fees:K.pay_remain,charge:{num_platform_percent:null!==(m=null===X||void 0===X||null===(h=X.platform_charges)||void 0===h?void 0:h.percentage)&&void 0!==m?m:0,num_platform_max:null!==(f=null===X||void 0===X||null===(p=X.platform_charges)||void 0===p?void 0:p.maximum)&&void 0!==f?f:0,num_trans_pecent:null!==(x=null===X||void 0===X||null===(j=X.transaction_charges)||void 0===j?void 0:j.percentage)&&void 0!==x?x:0,num_trans_max:null!==(g=null===X||void 0===X||null===(y=X.transaction_charges)||void 0===y?void 0:y.maximum)&&void 0!==g?g:0,num_app_max:null!==(b=null===X||void 0===X?void 0:X.application_charges)&&void 0!==b?b:0},nsid:null===N||void 0===N||null===(Z=N.app_card)||void 0===Z||null===(S=Z.remaining_array)||void 0===S||null===(C=S[0])||void 0===C?void 0:C._id}).then((e=>{var l,t;window.onScriptLoad(null===e||void 0===e||null===(l=e.response)||void 0===l||null===(t=l.body)||void 0===t?void 0:t.txnToken,null===e||void 0===e?void 0:e.order,null===e||void 0===e?void 0:e.amount)})).catch((e=>{console.info(e)}))},isOptimzed:!0}):(0,T.jsx)(y.Z,{onClose:S,children:(0,T.jsxs)("div",{className:A.Z.modal_container,children:[(0,T.jsx)(a.default,{children:(0,T.jsxs)("div",{className:A.Z.modal_container_outer_header,children:[(0,T.jsx)("div",{className:A.Z.modal_container_header,children:(0,T.jsx)("h6",{children:w("collect_fees")})}),(0,T.jsx)("img",{src:"".concat(d.J7,"/close.svg"),alt:"close icon",onClick:S})]})}),(0,T.jsx)(s.Z,{}),(0,T.jsxs)(a.default,{customStyle:{paddingTop:"0"},children:["OTHER_FEES"===E?(0,T.jsxs)("div",{className:A.Z.admission_fees_row,children:[(0,T.jsxs)("h6",{children:[w("applicable_amount")," :"]}),(0,T.jsxs)("h6",{children:[w("rs_only")," ",null!==(h=null===N||void 0===N||null===(f=N.heads)||void 0===f||null===(x=f[0])||void 0===x?void 0:x.head_amount)&&void 0!==h?h:0]})]}):(0,T.jsxs)("div",{className:A.Z.admission_fees_row,children:[(0,T.jsxs)("h6",{children:[w("applicable_amount")," :"]}),(0,T.jsxs)("h6",{children:[w("rs_only")," ",null!==(g=null===N||void 0===N||null===(b=N.struct)||void 0===b?void 0:b.applicable_fees)&&void 0!==g?g:0]})]}),(0,T.jsx)(Z.Z,{label:w("amount"),placeholder:w("amoute_details_collect"),name:"amount",value:P.amount,type:"tel",onChange:e=>{J((l=>({...l,amount:+e.target.value,fee_payment_amount:+e.target.value}))),z((l=>({...l,amount:+e.target.value})))},errorShow:$.amount,msg:$.rest_issue}),(0,T.jsx)(Y.Z,{paymentHeading:w("payment_type_mode"),selectLabel:w("mode_placeholder"),onClick:e=>{J((l=>({...l,mode:"Online",fee_payment_mode:e})))},errorShow:$.fee_payment_mode,defalutValue:P.fee_payment_mode,selectedValue:w("please_select_payment_mode"),isAuthority:"admissionCollectModePg",customLabelStyle:{marginTop:"0"}}),"Payment Gateway"===P.fee_payment_mode?(0,T.jsx)(p.Z,{label:"collect",onAction:()=>{let e=(0,F.l)({amount:K.amount});var l,t,n,i;(0,F.x)(e)?K.pay_remain&&K.amount?U({rest_issue:"Amount should not be less than total remaining fees"}):!K.pay_remain&&K.amount>(null===N||void 0===N||null===(l=N.app_card)||void 0===l||null===(t=l.remaining_array)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.remainAmount)&&+(null===N||void 0===N||null===(i=N.fee_struct)||void 0===i?void 0:i.total_installments)>1?U({rest_issue:"Amount should not be greater than remaining fees"}):null!==X&&void 0!==X&&X.institute?C&&k&&z((e=>({...e,isTransaction:!0}))):W({open:!0,msg:"Online Payment Not Activated",variant:"error"}):U(e)}}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(L.Z,{label:w("select_date_of_transaction"),placeholder:w("please_select_date"),name:"transaction_date",value:P.transaction_date,onChange:e=>{J((l=>({...l,transaction_date:(0,I.jh)(e)})))},errorShow:$.transaction_date}),"Cash"===P.fee_payment_mode?null:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Z.Z,{label:w("bank_name_collect"),placeholder:w("please_enter_bank_name"),name:"fee_bank_name",value:P.fee_bank_name,type:"text",onChange:Q}),(0,T.jsx)(Z.Z,{label:w("banke_holder_name"),placeholder:w("please_enter_name_of_bank_holder"),name:"fee_bank_holder",value:P.fee_bank_holder,type:"text",onChange:Q}),(0,T.jsx)(Z.Z,{label:w("cheque_dd_neft"),placeholder:w("please_enter_utr_ref_number"),name:"fee_utr_reference",value:P.fee_utr_reference,type:"text",onChange:Q})]}),(0,T.jsx)(p.Z,{label:"collect",onAction:()=>{let e=(0,F.l)(P,["mode","fee_payment_amount","fee_bank_name","fee_bank_holder","fee_utr_reference"]);var l,t,n,i,o,a,s,d,r,c,u,v,_,m,h,f,p;(0,F.x)(e)?"OTHER_FEES"===E?P.amount>(null===N||void 0===N||null===(l=N.heads)||void 0===l||null===(t=l[0])||void 0===t?void 0:t.head_amount)?U({rest_issue:"Amount should not be greater than fees head fees."}):(O({amount:null!==(n=null===P||void 0===P?void 0:P.amount)&&void 0!==n?n:0,mode:"Cash"===(null===P||void 0===P?void 0:P.fee_payment_mode)?"Offline":null!==(i=null===P||void 0===P?void 0:P.mode)&&void 0!==i?i:"",fee_payment_mode:"Cash"===(null===P||void 0===P?void 0:P.fee_payment_mode)?"By Cash":null===P||void 0===P?void 0:P.fee_payment_mode,fee_payment_amount:null!==(o=null===P||void 0===P?void 0:P.fee_payment_amount)&&void 0!==o?o:0,transaction_date:null!==(a=(0,I._1)(P.transaction_date))&&void 0!==a?a:"",fee_bank_name:null!==(s=null===P||void 0===P?void 0:P.fee_bank_name)&&void 0!==s?s:"",fee_bank_holder:null!==(d=null===P||void 0===P?void 0:P.fee_bank_holder)&&void 0!==d?d:"",fee_utr_reference:null!==(r=null===P||void 0===P?void 0:P.fee_utr_reference)&&void 0!==r?r:""}),S()):P.amount>(null===N||void 0===N||null===(c=N.struct)||void 0===c?void 0:c.applicable_fees)?U({rest_issue:"Amount should not be greater than applicable fees."}):(O({amount:null!==(u=null===P||void 0===P?void 0:P.amount)&&void 0!==u?u:0,mode:"Cash"===(null===P||void 0===P?void 0:P.fee_payment_mode)?"Offline":null!==(v=null===P||void 0===P?void 0:P.mode)&&void 0!==v?v:"",fee_payment_mode:"Cash"===(null===P||void 0===P?void 0:P.fee_payment_mode)?"By Cash":null===P||void 0===P?void 0:P.fee_payment_mode,fee_payment_amount:null!==(_=null===P||void 0===P?void 0:P.fee_payment_amount)&&void 0!==_?_:0,transaction_date:null!==(m=(0,I._1)(P.transaction_date))&&void 0!==m?m:"",fee_bank_name:null!==(h=null===P||void 0===P?void 0:P.fee_bank_name)&&void 0!==h?h:"",fee_bank_holder:null!==(f=null===P||void 0===P?void 0:P.fee_bank_holder)&&void 0!==f?f:"",fee_utr_reference:null!==(p=null===P||void 0===P?void 0:P.fee_utr_reference)&&void 0!==p?p:""}),S()):U(e)}})]})]})]})}),G&&(0,T.jsx)(j.default,{}),(0,T.jsx)(D.Z,{eventState:V,eventStateHandler:W})]})};var q=t(52245);const B=e=>{let{selectLabel:l,onClick:t,selectedValue:i,options:o,customStyleContainer:a,customLabelStyle:s,customListStyle:r,errorShow:c,defalutValue:v,isFull:_,isDenied:m}=e;const{t:h}=(0,n.$G)(),[f,p]=(0,u.useState)(!1),[x,j]=(0,u.useState)(""),g=()=>{m||p((e=>!e))};(0,u.useEffect)((()=>{j(v)}),[v]);return(0,T.jsxs)("div",{className:q.Z.form_input_container,style:{...a},children:[(0,T.jsxs)("p",{className:q.Z.join_form_select_paragraph,style:{...s},children:[l,c&&(0,T.jsxs)("span",{style:{color:"red",marginLeft:"15px"},children:["* ",h("form_require_label")]})]}),(0,T.jsxs)("section",{className:q.Z.join_form_select_custom,onClick:g,children:[x?(0,T.jsx)("p",{className:q.Z.join_form_select_custom_paragraph,children:null!==x&&void 0!==x?x:""}):(0,T.jsx)("p",{className:q.Z.join_form_select_custom_paragraph,children:i}),f?(0,T.jsx)("img",{className:q.Z.join_form_select_custom_rotate_icon,src:"".concat(d.J7,"/down.svg"),alt:"categor icon"}):(0,T.jsx)("img",{className:q.Z.join_form_select_custom_icon,src:"".concat(d.J7,"/down.svg"),alt:"categor icon"})]}),f&&(0,T.jsx)(T.Fragment,{children:(0,T.jsx)("section",{className:q.Z.join_form_select_custom_list,style:r,children:null===o||void 0===o?void 0:o.map(((e,l)=>{var n,i;return(0,T.jsxs)("p",{onClick:()=>(e=>{var l,n;t(_?e:null===e||void 0===e?void 0:e._id),g(),j("".concat(null!==(l=null===e||void 0===e?void 0:e.master_name)&&void 0!==l?l:""," - \n    ").concat(null!==(n=null===e||void 0===e?void 0:e.master_amount)&&void 0!==n?n:0))})(e),className:q.Z.join_form_select_custom_paragraph_option,children:[null!==(n=null===e||void 0===e?void 0:e.master_name)&&void 0!==n?n:""," "," - ",null!==(i=null===e||void 0===e?void 0:e.master_amount)&&void 0!==i?i:0]},l)}))})})]})},P=e=>{var l;let{title:t,fid:i,onSelect:o,errorShow:a,defalutValue:s,isDenied:d,customStyleContainer:r}=e;const{t:c}=(0,n.$G)(),{financeAllOtherFeeHeadMaster:u,financeAllOtherFeeHeadMasterLoading:v}=(0,h.sx)({data:{fid:i,page:1,limit:1e3,search:""},skip:!i});return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(B,{selectLabel:c(null!==t&&void 0!==t?t:"select_other_fee_master"),selectedValue:c("select_other_fee_master_placeholder"),options:(null===u||void 0===u||null===(l=u.list)||void 0===l?void 0:l.length)>0?null===u||void 0===u?void 0:u.list:[],onClick:o,isFull:!0,errorShow:a,defalutValue:s,isDenied:d,customStyleContainer:r}),v&&(0,T.jsx)(g.Z,{})]})},J=e=>{var l,t,i,o,r,c,v,_;let{onClose:m,fid:f,instituteId:x,onRefetch:g,whichOtherFees:E}=e;const{t:A}=(0,n.$G)(),[L,I]=(0,u.useState)(0),[Y,R]=(0,u.useState)(""),[M,H]=(0,u.useState)(!1),[D,q]=(0,u.useState)({students:[],other_fees_name:"",other_fees_type:"",bank_account:"",struct:""}),[B,J]=(0,u.useState)({not_exist:!1,name:""}),[$,U]=(0,u.useState)(0),[V,W]=(0,u.useState)([]),[K,z]=(0,u.useState)([]),[X]=(0,h.Lp)(),[Q]=(0,h.wF)();(0,u.useEffect)((()=>{E&&q((e=>({...e,other_fees_type:E})))}),[E]),(0,u.useEffect)((()=>{if(V){let l=0;for(let t=0;t<(null===V||void 0===V?void 0:V.length);t++){var e;l+=+(null===(e=V[t])||void 0===e?void 0:e.head_amount)}U(l)}}),[V]);const ee=()=>{I(0)},le=()=>{let e=null;var l;B.not_exist?(e=(0,F.l)({...D,student_name:B.name},["students","struct","other_fees_name"]),(0,F.x)(e)&&(null===V||void 0===V?void 0:V.length)>0?I(4):R(e)):(e=(0,F.l)(D,["students","struct","other_fees_name"]),(0,F.x)(e)&&(null===V||void 0===V?void 0:V.length)>0&&1===(null===D||void 0===D||null===(l=D.students)||void 0===l?void 0:l.length)?I(4):R(e))},te=()=>{let e=null;var l,t,n;B.not_exist?(e=(0,F.l)({...D,student_name:B.name},["students","bank_account","other_fees_name"]),(0,F.x)(e)&&null!==D&&void 0!==D&&null!==(l=D.struct)&&void 0!==l&&l._id?I(5):R(e)):(e=(0,F.l)(D,["students","bank_account","other_fees_name"]),(0,F.x)(e)&&null!==D&&void 0!==D&&null!==(t=D.struct)&&void 0!==t&&t._id&&1===(null===D||void 0===D||null===(n=D.students)||void 0===n?void 0:n.length)?I(5):R(e))};return(0,T.jsx)(T.Fragment,{children:0===L?(0,T.jsx)(y.Z,{onClose:()=>{},children:(0,T.jsxs)("div",{className:b.Z.modal_container,children:[(0,T.jsx)(a.default,{children:(0,T.jsxs)("div",{className:b.Z.modal_container_outer_header,children:[(0,T.jsx)("div",{className:b.Z.modal_container_header,children:(0,T.jsx)("h6",{children:A("Normal Other Fees"===E?"add_normal_other_fees":"Subject Other Fees"===E?"add_subject_other_fees":"add_other_fees")})}),(0,T.jsx)("img",{src:"".concat(d.J7,"/close.svg"),alt:"close icon",onClick:m})]})}),(0,T.jsx)(s.Z,{}),(0,T.jsxs)(a.default,{customStyle:{paddingTop:"0",marginBottom:"1rem"},children:[(0,T.jsx)(Z.Z,{label:A("fees_name"),placeholder:A("fees_name_placeholder"),name:"other_fees_name",value:D.other_fees_name,type:"text",onChange:e=>{q((l=>({...l,[e.target.name]:e.target.value})))},errorShow:Y.other_fees_name}),B.not_exist?(0,T.jsx)(Z.Z,{label:A("student_name"),placeholder:A("student_name_placeholder"),name:"student_name",value:D.name,type:"text",onChange:e=>J((l=>({...l,name:e.target.value}))),errorShow:Y.student_name}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(N.Z,{label:"add_student",count:null===D||void 0===D||null===(l=D.students)||void 0===l?void 0:l.length,onAction:()=>{I(1)}}),(null===D||void 0===D||null===(t=D.students)||void 0===t?void 0:t.length)>0?null:(0,T.jsx)(N.Z,{label:"not_exist_student",onAction:()=>{J((e=>({...e,not_exist:!(null!==e&&void 0!==e&&e.not_exist)}))),q((e=>({...e,students:[]})))}})]}),"Subject Other Fees"===E?null:(0,T.jsx)(S.Z,{fid:f,onSelect:e=>{q((l=>({...l,bank_account:e})))},errorShow:Y.bank_account,viewAs:"NORMAL_FILTER",defalutValue:null!==(i=null===D||void 0===D||null===(o=D.bank_account)||void 0===o?void 0:o.finance_bank_account_name)&&void 0!==i?i:""}),"Normal Other Fees"===D.other_fees_type?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(P,{fid:f,onSelect:e=>{const l={head_name:null===e||void 0===e?void 0:e.master_name,head_amount:null===e||void 0===e?void 0:e.master_amount,master:null===e||void 0===e?void 0:e._id,head_type:"BY_OTHER_FEES"};W([l]),z([null===e||void 0===e?void 0:e._id])},errorShow:Y.bank_account,viewAs:"NORMAL_FILTER"}),(0,T.jsx)("div",{style:{paddingInline:"1rem",marginTop:"1rem"},children:(0,T.jsxs)("section",{className:b.Z.table_container,style:{margin:"0"},children:[(0,T.jsxs)("div",{className:b.Z.table_heading,children:[(0,T.jsx)("h6",{children:A("fee_heads")}),(0,T.jsx)("h6",{children:A("amount")})]}),(0,T.jsx)("div",{className:b.Z.table_body,children:null===V||void 0===V?void 0:V.map(((e,l)=>(0,T.jsxs)("div",{className:b.Z.table_body_list,children:[(0,T.jsx)("input",{type:"text",value:null===e||void 0===e?void 0:e.head_name,onChange:e=>((e,l)=>{const t=[...V];for(let n=0;n<(null===t||void 0===t?void 0:t.length);n++)n===l&&(t[n].head_name=e.target.value);W(t)})(e,l),className:b.Z.fee_head_name_input}),(0,T.jsx)("input",{type:"number",value:null===e||void 0===e?void 0:e.head_amount,onChange:e=>((e,l)=>{const t=[...V];for(let n=0;n<(null===t||void 0===t?void 0:t.length);n++)n===l&&(t[n].head_amount=+e.target.value);W(t)})(e,l),className:b.Z.fee_head_amount_input})]},l)))}),(0,T.jsx)("div",{className:b.Z.table_body,children:(0,T.jsxs)("div",{className:b.Z.table_body_list,style:{borderTopColor:"rgba(18, 18, 18, 0.5)",borderTopWidth:"0.5px",borderTopStyle:"solid"},children:[(0,T.jsx)("h6",{className:b.Z.fees_total,children:A("subtotal")}),(0,T.jsx)("h6",{className:b.Z.fees_total,children:$})]})})]})})]}):"Subject Other Fees"===D.other_fees_type?(0,T.jsx)(T.Fragment,{children:D.struct?(0,T.jsx)(O.Z,{structure:D.struct,isShow:"YES",customContainerStyle:{marginTop:"1rem"}}):(0,T.jsx)(N.Z,{label:"select_fee_structure",onAction:()=>I(3)})}):null,"Normal Other Fees"===D.other_fees_type?(0,T.jsxs)("div",{style:1===(null===D||void 0===D||null===(r=D.students)||void 0===r?void 0:r.length)?{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"}:{display:"block"},children:[B.not_exist?(0,T.jsx)(p.Z,{label:"collect_fees",onAction:le}):(0,T.jsx)(p.Z,{label:"request",onAction:()=>{var e;let l=(0,F.l)(D,["students","struct","other_fees_name"]);var t;(0,F.x)(l)&&f&&(null===V||void 0===V?void 0:V.length)>0&&(null===D||void 0===D||null===(e=D.students)||void 0===e?void 0:e.length)>0?(H((e=>!e)),X({fid:f,bodyParameter:{...D,bank_account:null===D||void 0===D||null===(t=D.bank_account)||void 0===t?void 0:t._id,heads:V,payable_amount:$,struct:null,is_collect:"No"}}).then((()=>{g(),H((e=>!e)),m()})).catch((()=>{H((e=>!e))}))):R(l)}}),1===(null===D||void 0===D||null===(c=D.students)||void 0===c?void 0:c.length)?(0,T.jsx)(p.Z,{label:"collect_fees",onAction:le}):null]}):"Subject Other Fees"===D.other_fees_type?(0,T.jsxs)("div",{style:1===(null===D||void 0===D||null===(v=D.students)||void 0===v?void 0:v.length)?{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"}:{display:"block"},children:[B.not_exist?(0,T.jsx)(p.Z,{label:"collect_fees",onAction:te}):(0,T.jsx)(p.Z,{label:"request",onAction:()=>{var e,l;let t=(0,F.l)(D,["students","bank_account","other_fees_name"]);var n,i;(0,F.x)(t)&&f&&null!==D&&void 0!==D&&null!==(e=D.struct)&&void 0!==e&&e._id&&(null===D||void 0===D||null===(l=D.students)||void 0===l?void 0:l.length)>0?(H((e=>!e)),X({fid:f,bodyParameter:{...D,bank_account:null,heads:[],payable_amount:null===D||void 0===D||null===(n=D.struct)||void 0===n?void 0:n.applicable_fees,struct:null===D||void 0===D||null===(i=D.struct)||void 0===i?void 0:i._id,is_collect:"No"}}).then((()=>{g(),H((e=>!e)),m()})).catch((()=>{H((e=>!e))}))):R(t)}}),1===(null===D||void 0===D||null===(_=D.students)||void 0===_?void 0:_.length)?(0,T.jsx)(p.Z,{label:"collect_fees",onAction:te}):null]}):null]}),M&&(0,T.jsx)(j.default,{})]})}):1===L?(0,T.jsx)(C.Z,{title:A("select_student"),onClose:ee,instituteId:x,isMultiSelect:!0,onMultiSelect:e=>{var l;null!==D&&void 0!==D&&null!==(l=D.students)&&void 0!==l&&l.includes(null===e||void 0===e?void 0:e._id)?q((l=>{var t;return{...l,students:null===l||void 0===l||null===(t=l.students)||void 0===t?void 0:t.filter((l=>l!==(null===e||void 0===e?void 0:e._id)))}})):q((l=>({...l,students:[...null===l||void 0===l?void 0:l.students,null===e||void 0===e?void 0:e._id]})))},onDone:ee,selectList:D.students}):2===L?(0,T.jsx)(k.Z,{fid:f,onClose:ee,setFeeHead:W,setFeeHeadId:z,feeHeadId:K,isSegment:"BY_OTHER_FEES",isOne:"Normal Other Fees"===D.other_fees_type}):3===L?(0,T.jsx)(w,{title:"select_fee_structure",onClose:ee,onSelectedStrucutre:e=>{q((l=>({...l,struct:e}))),ee()},fid:f,oneStep:!0}):4===L?(0,T.jsx)(G,{onClose:ee,onGrabCollectFees:e=>{var l,t,n;B.not_exist?f&&(null===V||void 0===V?void 0:V.length)>0&&B.name&&(H((e=>!e)),Q({fid:f,bodyParameter:{...D,...e,bank_account:null===D||void 0===D||null===(l=D.bank_account)||void 0===l?void 0:l._id,heads:V,payable_amount:$,is_collect:"Yes",struct:null,student_name:B.name}}).then((()=>{g(),H((e=>!e)),m()})).catch((()=>{H((e=>!e))}))):f&&(null===V||void 0===V?void 0:V.length)>0&&(null===D||void 0===D||null===(t=D.students)||void 0===t?void 0:t.length)>0&&(H((e=>!e)),X({fid:f,bodyParameter:{...D,...e,bank_account:null===D||void 0===D||null===(n=D.bank_account)||void 0===n?void 0:n._id,heads:V,payable_amount:$,is_collect:"Yes",struct:null}}).then((()=>{g(),H((e=>!e)),m()})).catch((()=>{H((e=>!e))})))},directCollect:"YES",applicant:{...D,heads:V},isOtherFees:"OTHER_FEES"}):5===L?(0,T.jsx)(G,{onClose:ee,onGrabCollectFees:e=>{var l,t,n,i,o,a,s;B.not_exist?f&&null!==D&&void 0!==D&&null!==(l=D.struct)&&void 0!==l&&l._id&&B.name&&(H((e=>!e)),Q({fid:f,bodyParameter:{...D,...e,bank_account:null,heads:[],payable_amount:null===D||void 0===D||null===(t=D.struct)||void 0===t?void 0:t.applicable_fees,struct:null===D||void 0===D||null===(n=D.struct)||void 0===n?void 0:n._id,is_collect:"Yes",student_name:B.name}}).then((()=>{g(),H((e=>!e)),m()})).catch((()=>{H((e=>!e))}))):f&&null!==D&&void 0!==D&&null!==(i=D.struct)&&void 0!==i&&i._id&&(null===D||void 0===D||null===(o=D.students)||void 0===o?void 0:o.length)>0&&(H((e=>!e)),X({fid:f,bodyParameter:{...D,...e,bank_account:null,heads:[],payable_amount:null===D||void 0===D||null===(a=D.struct)||void 0===a?void 0:a.applicable_fees,struct:null===D||void 0===D||null===(s=D.struct)||void 0===s?void 0:s._id,is_collect:"Yes"}}).then((()=>{g(),H((e=>!e)),m()})).catch((()=>{H((e=>!e))})))},directCollect:"YES",applicant:{...D,heads:V},isOtherFees:"SUBJECT_OTHER_FEES"}):null})};var $=t(9228),U=t(89064);const V=e=>{let{onClose:l,onEditAction:t,menuData:i}=e;const{t:o}=(0,n.$G)(),[r,c]=(0,u.useState)(""),[v,_]=(0,u.useState)({other_fees_name:""});(0,u.useEffect)((()=>{null!==i&&void 0!==i&&i.other_fees_name&&_((e=>({...e,other_fees_name:null===i||void 0===i?void 0:i.other_fees_name})))}),[null===i||void 0===i?void 0:i.other_fees_name]);return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(y.Z,{onClose:l,children:(0,T.jsxs)("div",{className:A.Z.modal_container,children:[(0,T.jsx)(a.default,{children:(0,T.jsxs)("div",{className:A.Z.modal_container_outer_header,children:[(0,T.jsx)("div",{className:A.Z.modal_container_header,children:(0,T.jsx)("h6",{children:o("update_other_fees")})}),(0,T.jsx)("img",{src:"".concat(d.J7,"/close.svg"),alt:"close icon",onClick:l})]})}),(0,T.jsx)(s.Z,{}),(0,T.jsxs)(a.default,{customStyle:{paddingTop:"0"},children:[(0,T.jsx)(Z.Z,{label:o("fees_name"),placeholder:o("fees_name_placeholder"),name:"other_fees_name",value:v.other_fees_name,type:"text",onChange:e=>{_((l=>({...l,[e.target.name]:e.target.value})))},errorShow:r.other_fees_name}),(0,T.jsx)(p.Z,{label:"update",onAction:()=>{let e=(0,F.l)(v,[]);(0,F.x)(e)?t(v):c(e)}})]})]})})})},W=e=>{let{onClose:l,menuData:t,onRefetch:i}=e;const{t:o}=(0,n.$G)(),[a,s]=(0,u.useState)(!1),[d,r]=(0,u.useState)(""),[c]=(0,h.oT)(),v=()=>{r("")};return(0,T.jsx)(T.Fragment,{children:1===d?(0,T.jsx)(V,{onEditAction:e=>{null!==t&&void 0!==t&&t._id&&(v(),s((e=>!e)),c({ofid:null===t||void 0===t?void 0:t._id,bodyParameter:{...e}}).then((()=>{i(),s((e=>!e)),l()})).catch({}))},menuData:t,onClose:v}):(0,T.jsx)(U.Z,{onClose:l,disabled:a,children:(0,T.jsx)("h6",{onClick:()=>r(1),children:o("edit")})})})};var K=t(1095),z=t(13182),X=t(27976);const Q=e=>{var l,t,i,o,a,s,c,v,_;let{fees:m,onRefetch:f,whichOtherFees:x,instituteId:g,financeId:y}=e;const{t:b}=(0,n.$G)(),Z=(0,r.TH)(),S=(0,r.UO)(),N=(0,r.s0)(),[k,F]=(0,u.useState)(!1),[E,O]=(0,u.useState)(""),[w,A]=(0,u.useState)(null),[L,I]=(0,u.useState)(!1),[Y]=(0,h.zY)(),[R]=(0,h.UG)(),M=e=>{e&&e.stopPropagation(),F((e=>!e))},H=()=>{O("")};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:$.Z.sf_card,onClick:()=>{if(null!==m&&void 0!==m&&m.student_name);else{var e,l,t,n,i;let o="Institute"===(null===(e=Z.state)||void 0===e?void 0:e.urlOffSet)?"/q/".concat(S.username,"/institute/member/finance?type=other-fees-detail"):"/q/".concat(S.username,"/member/staff/finance?type=other-fees-detail");N(o,{state:{...Z.state,feesId:null===m||void 0===m?void 0:m._id,feesName:null!==(l=null===m||void 0===m?void 0:m.other_fees_name)&&void 0!==l?l:"",otherData:{paid:null!==(t=null===m||void 0===m?void 0:m.paid_students_count)&&void 0!==t?t:0,rmaining:null!==(n=null===m||void 0===m?void 0:m.remaining_students_count)&&void 0!==n?n:0,payable_amount:null!==(i=null===m||void 0===m?void 0:m.payable_amount)&&void 0!==i?i:0}}})}},children:[(0,T.jsxs)("div",{className:$.Z.sf_card_contatiner,children:[(0,T.jsx)("img",{src:"".concat(d.J7,"/fees-card.svg"),loading:"lazy",alt:"avatar",style:{width:"2.5rem",height:"2.5rem",borderRadius:"0"}}),(0,T.jsxs)("div",{className:$.Z.sf_card_contatiner_inner,children:[(0,T.jsx)("h6",{children:null!==(l=null===m||void 0===m?void 0:m.other_fees_name)&&void 0!==l?l:""}),(0,T.jsxs)("p",{children:[b("amount")," ",": ",null!==(t=null===m||void 0===m?void 0:m.payable_amount)&&void 0!==t?t:""]}),"Other_fees"===x?(0,T.jsxs)("p",{children:[b("bank_name")," ",": ",null!==(i=null===m||void 0===m||null===(o=m.bank_account)||void 0===o?void 0:o.finance_bank_account_name)&&void 0!==i?i:""]}):(0,T.jsxs)("p",{children:[b("fees_structure")," ",": ",null!==(a=null===m||void 0===m||null===(s=m.fee_structure)||void 0===s?void 0:s.unique_structure_name)&&void 0!==a?a:""]}),null!==m&&void 0!==m&&m.student_name?(0,T.jsxs)("p",{children:[b("student_name"),(0,T.jsxs)("span",{style:{fontWeight:"700"},children:[" ",null!==(c=null===m||void 0===m?void 0:m.student_name)&&void 0!==c?c:""]})]}):null]})]}),(0,T.jsxs)("div",{className:$.Z.sf_card_contatiner,children:[(0,T.jsx)(p.Z,{label:"add_single_student",customStyle:{paddingBlock:"0.4rem",margin:"0",minWidth:"fit-content"},onAction:e=>{e.stopPropagation(),O(1)}}),(0,T.jsx)(p.Z,{label:"add_non_existing_student",customStyle:{paddingBlock:"0.4rem",margin:"0",minWidth:"fit-content"},onAction:e=>{e.stopPropagation(),O(3)}}),null!==m&&void 0!==m&&m.student_name?(null===m||void 0===m||null===(v=m.fee_receipt)||void 0===v?void 0:v.receipt_file)&&(0,T.jsx)("a",{href:"".concat(K.q2,"/").concat(null===m||void 0===m||null===(_=m.fee_receipt)||void 0===_?void 0:_.receipt_file),target:"_blank",rel:"noopener noreferrer",children:(0,T.jsx)("img",{src:"/images/members/receipt-icon.svg",alt:"receipt icon"})}):(0,T.jsx)("img",{src:"".concat(d.J7,"/menu.svg"),alt:"menu icon",onClick:M,style:{height:"1.5rem",width:"1.5rem"}})]})]}),1===E?(0,T.jsx)(C.Z,{title:b("select_student"),onClose:H,instituteId:g,onSelectStudent:e=>{A(e),O(2)},selectedId:null===w||void 0===w?void 0:w._id}):2===E?(0,T.jsx)(z.Z,{onClose:H,onParentClose:H,instituteId:g,onGrabCollectFees:e=>{y&&null!==w&&void 0!==w&&w._id&&null!==m&&void 0!==m&&m._id&&(I((e=>!e)),Y({fid:y,bodyParameter:{students:[null===w||void 0===w?void 0:w._id],ofid:null===m||void 0===m?void 0:m._id,...e}}).then((()=>{I((e=>!e)),A(null),H()})).catch({}))},singleStudent:w,isOtherFees:"OTHER_FEES",applicant:{head:null===m||void 0===m?void 0:m.payable_amount}}):3===E?(0,T.jsx)(X.Z,{onClose:H,singleStudent:w,onNext:e=>{A(e),O(4)}}):4===E?(0,T.jsx)(z.Z,{onClose:()=>O(3),onParentClose:()=>{},instituteId:g,onGrabCollectFees:e=>{y&&null!==w&&void 0!==w&&w.student_name&&null!==m&&void 0!==m&&m._id&&(I((e=>!e)),R({fid:y,bodyParameter:{...w,ofid:null===m||void 0===m?void 0:m._id,...e}}).then((()=>{I((e=>!e)),A(null),H()})).catch({}))},singleStudent:w,isOtherFees:"OTHER_FEES",isNonExisting:!0,applicant:{head:null===m||void 0===m?void 0:m.payable_amount}}):null,L&&(0,T.jsx)(j.default,{}),k&&(0,T.jsx)(W,{onClose:M,menuData:m,onRefetch:f})]})},ee=e=>{var l,t,o,r;let{fid:c,instituteId:v}=e;const{t:_}=(0,n.$G)(),[y,b]=(0,u.useState)(!1),[Z,S]=(0,u.useState)(""),[N,C]=(0,u.useState)(""),[k,F]=(0,u.useState)(1),[E,O]=(0,u.useState)(!0),[w,A]=(0,m.YD)({skip:Z}),{financeAllOtherFeesList:L,financeAllOtherFeesListLoading:I,financeAllOtherFeesListRefetch:Y}=(0,h.GU)({data:{fid:c,page:k,limit:10,search:Z,type:"Normal Other Fees"},skip:!c});(0,u.useEffect)((()=>{A&&E&&F((e=>e+1))}),[A,E]),(0,u.useEffect)((()=>{var e;if(null!==L&&void 0!==L&&null!==(e=L.list)&&void 0!==e&&e.length){var l;let e=(0,f.f)(null===L||void 0===L||null===(l=L.list)||void 0===l?void 0:l.length);O((()=>e))}}),[null===L||void 0===L||null===(l=L.list)||void 0===l?void 0:l.length]);const R=()=>{b((e=>!e))},M=()=>{F((()=>1)),S(""),Y()};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(a.default,{children:(0,T.jsxs)("div",{className:i.Z.fm_search_full,children:[(0,T.jsx)("section",{className:i.Z.fm_search_full_container,children:(0,T.jsxs)("div",{className:i.Z.fm_search_full_container_inner,children:[(0,T.jsx)("img",{className:i.Z.fm_search_full_icon,alt:"search icon",src:"".concat(d.dB,"/navbar-search.svg")}),(0,T.jsx)("input",{type:"text",placeholder:_("search"),onChange:e=>{var l;!I&&(null===L||void 0===L||null===(l=L.list)||void 0===l?void 0:l.length)>=0&&C(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&(F((()=>1)),S(N))},value:N})]})}),(0,T.jsx)(p.Z,{label:"add",customStyle:{paddingBlock:"0.4rem",margin:"0"},onAction:R})]})}),(0,T.jsx)(s.Z,{}),(0,T.jsxs)(a.default,{customStyle:{paddingTop:"0"},children:[null===L||void 0===L||null===(t=L.list)||void 0===t?void 0:t.map(((e,l)=>{var t;return(null===L||void 0===L||null===(t=L.list)||void 0===t?void 0:t.length)===l+1?(0,T.jsx)("div",{ref:w,children:(0,T.jsx)(Q,{fees:e,onRefetch:M,financeId:c,whichOtherFees:"Other_fees",instituteId:v})},null===e||void 0===e?void 0:e._id):(0,T.jsx)(Q,{fees:e,onRefetch:M,financeId:c,whichOtherFees:"Other_fees",instituteId:v},null===e||void 0===e?void 0:e._id)})),I?Z?(0,T.jsx)(j.default,{}):(0,T.jsx)(T.Fragment,{children:1===k?(0,T.jsx)(j.default,{}):(0,T.jsx)(g.Z,{})}):Z?0===(null===L||void 0===L||null===(o=L.list)||void 0===o?void 0:o.length)&&(0,T.jsx)(x.Z,{title:"No item found related this search.",customStyleContainer:{marginTop:"1.5rem"}}):0===(null===L||void 0===L||null===(r=L.list)||void 0===r?void 0:r.length)&&(0,T.jsx)(x.Z,{title:"No item.",customStyleContainer:{marginTop:"1.5rem"}})]}),y&&(0,T.jsx)(J,{onClose:R,fid:c,onRefetch:M,instituteId:v,whichOtherFees:"Normal Other Fees"})]})},le=e=>{var l,t,o,r;let{fid:c,instituteId:v}=e;const{t:_}=(0,n.$G)(),[y,b]=(0,u.useState)(!1),[Z,S]=(0,u.useState)(""),[N,C]=(0,u.useState)(""),[k,F]=(0,u.useState)(1),[E,O]=(0,u.useState)(!0),[w,A]=(0,m.YD)({skip:Z}),{financeAllOtherFeesList:L,financeAllOtherFeesListLoading:I,financeAllOtherFeesListRefetch:Y}=(0,h.GU)({data:{fid:c,page:k,limit:10,search:Z,type:"Subject Other Fees"},skip:!c});(0,u.useEffect)((()=>{A&&E&&F((e=>e+1))}),[A,E]),(0,u.useEffect)((()=>{var e;if(null!==L&&void 0!==L&&null!==(e=L.list)&&void 0!==e&&e.length){var l;let e=(0,f.f)(null===L||void 0===L||null===(l=L.list)||void 0===l?void 0:l.length);O((()=>e))}}),[null===L||void 0===L||null===(l=L.list)||void 0===l?void 0:l.length]);const R=()=>{b((e=>!e))},M=()=>{F((()=>1)),S(""),Y()};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(a.default,{children:(0,T.jsxs)("div",{className:i.Z.fm_search_full,children:[(0,T.jsx)("section",{className:i.Z.fm_search_full_container,children:(0,T.jsxs)("div",{className:i.Z.fm_search_full_container_inner,children:[(0,T.jsx)("img",{className:i.Z.fm_search_full_icon,alt:"search icon",src:"".concat(d.dB,"/navbar-search.svg")}),(0,T.jsx)("input",{type:"text",placeholder:_("search"),onChange:e=>{var l;!I&&(null===L||void 0===L||null===(l=L.list)||void 0===l?void 0:l.length)>=0&&C(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&(F((()=>1)),S(N))},value:N})]})}),(0,T.jsx)(p.Z,{label:"add",customStyle:{paddingBlock:"0.4rem",margin:"0"},onAction:R})]})}),(0,T.jsx)(s.Z,{}),(0,T.jsxs)(a.default,{customStyle:{paddingTop:"0"},children:[null===L||void 0===L||null===(t=L.list)||void 0===t?void 0:t.map(((e,l)=>{var t;return(null===L||void 0===L||null===(t=L.list)||void 0===t?void 0:t.length)===l+1?(0,T.jsx)("div",{ref:w,children:(0,T.jsx)(Q,{fees:e,onRefetch:M,fid:c})},null===e||void 0===e?void 0:e._id):(0,T.jsx)(Q,{fees:e,onRefetch:M,fid:c},null===e||void 0===e?void 0:e._id)})),I?Z?(0,T.jsx)(j.default,{}):(0,T.jsx)(T.Fragment,{children:1===k?(0,T.jsx)(j.default,{}):(0,T.jsx)(g.Z,{})}):Z?0===(null===L||void 0===L||null===(o=L.list)||void 0===o?void 0:o.length)&&(0,T.jsx)(x.Z,{title:"No item found related this search.",customStyleContainer:{marginTop:"1.5rem"}}):0===(null===L||void 0===L||null===(r=L.list)||void 0===r?void 0:r.length)&&(0,T.jsx)(x.Z,{title:"No item.",customStyleContainer:{marginTop:"1.5rem"}})]}),y&&(0,T.jsx)(J,{onClose:R,fid:c,onRefetch:M,instituteId:v,whichOtherFees:"Subject Other Fees"})]})};var te=t(76697),ne=t(97892),ie=t.n(ne),oe=t(82824);const ae=e=>{var l,t,i,o,a,s,u,v,_,m,h,f,p,x,j,g,y,b,Z,S,N,C,k,F,E,O,w,A,L,I,Y,R,M,H,D,G;let{history:q}=e;const{t:B}=(0,n.$G)(),P=(0,r.UO)(),J=(0,r.TH)();return(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)("div",{className:te.Z.sidebarheader,style:{gap:"1%"},title:"View Receipt",children:[(0,T.jsxs)("div",{className:te.Z.history_image_container,style:{width:"50%"},children:[null!==q&&void 0!==q&&null!==(l=q.payment_student)&&void 0!==l&&l.studentProfilePhoto?(0,T.jsx)(c.rU,{to:"/q/".concat(P.username,"/student/profile"),state:{...J.state,sid:null===q||void 0===q||null===(t=q.payment_student)||void 0===t?void 0:t._id},children:(0,T.jsx)("img",{src:"".concat(K.yI,"/").concat(null===q||void 0===q||null===(i=q.payment_student)||void 0===i?void 0:i.studentProfilePhoto),alt:"qr code",style:{width:"60px",height:"60px",borderRadius:"12px"}})}):null,null!==q&&void 0!==q&&q.payment_student_detail?(0,T.jsxs)("div",{className:te.Z.text,children:[(0,T.jsx)("p",{className:te.Z.rcv,children:B("recived_from")}),(0,T.jsx)("h6",{children:null!==(o=null===q||void 0===q||null===(a=q.fee_receipt)||void 0===a?void 0:a.student_name)&&void 0!==o?o:""}),(0,T.jsxs)("p",{className:te.Z.rcv,children:[B("batch")," ",": ",null!==(s=null===q||void 0===q||null===(u=q.payment_student_detail)||void 0===u?void 0:u.batch)&&void 0!==s?s:"",","," ",B("student_class"),": ",null===q||void 0===q||null===(v=q.payment_student_detail)||void 0===v?void 0:v.classes,", ",B("roll_number")," ",": ",null!==(_=null===q||void 0===q||null===(m=q.payment_student_detail)||void 0===m?void 0:m.roll_no)&&void 0!==_?_:""]})]}):(0,T.jsxs)("div",{className:te.Z.text,children:[(0,T.jsx)("p",{className:te.Z.rcv,children:B("recived_from")}),(0,T.jsx)("h6",{children:null!==q&&void 0!==q&&q.payment_student?"".concat(null!==(h=null===q||void 0===q||null===(f=q.payment_student)||void 0===f?void 0:f.studentFirstName)&&void 0!==h?h:""," ").concat(null!==(p=null===q||void 0===q||null===(x=q.payment_student)||void 0===x?void 0:x.studentMiddleName)&&void 0!==p?p:""," ").concat(null!==(j=null===q||void 0===q||null===(g=q.payment_student)||void 0===g?void 0:g.studentLastName)&&void 0!==j?j:""):null!==(y=null===q||void 0===q||null===(b=q.payment_by_end_user_id)||void 0===b?void 0:b.userLegalName)&&void 0!==y?y:null===q||void 0===q?void 0:q.payment_by_end_user_id_name}),(0,T.jsxs)("p",{className:te.Z.rcv,children:[B("gr_number")," ",null!==(Z=null===q||void 0===q||null===(S=q.payment_student)||void 0===S?void 0:S.studentGRNO)&&void 0!==Z?Z:""]}),(0,T.jsx)("p",{className:te.Z.rcv,children:null!==(N=null===q||void 0===q||null===(C=q.payment_student)||void 0===C||null===(k=C.fee_structure)||void 0===k?void 0:k.unique_structure_name)&&void 0!==N?N:""})]})]}),(0,T.jsxs)("div",{className:te.Z.text,style:{width:"27%"},children:[(0,T.jsx)("p",{className:te.Z.rcv,style:{width:"100%"},children:B("transaction_id")}),(0,T.jsx)("h6",{style:{width:"100%",wordWrap:"break-word"},children:null!==q&&void 0!==q&&q.razorpay_payment_id?null===q||void 0===q?void 0:q.razorpay_payment_id:null!==q&&void 0!==q&&null!==(F=q.fee_receipt)&&void 0!==F&&F.fee_utr_reference?null===q||void 0===q||null===(E=q.fee_receipt)||void 0===E?void 0:E.fee_utr_reference:"N/A"}),(0,T.jsxs)("p",{className:te.Z.rcv,style:{width:"100%"},children:[ie()(null===q||void 0===q?void 0:q.created_at).format("DD MMM YYYY"),", ",(0,oe.J)(null===q||void 0===q?void 0:q.created_at,"LT")]})]}),(0,T.jsxs)("div",{className:te.Z.text,style:{width:"20%"},children:[(0,T.jsxs)("p",{className:te.Z.rcv,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[B("invoice_no")," ",null!==(O=null!==(w=null===q||void 0===q||null===(A=q.fee_receipt)||void 0===A?void 0:A.invoice_count)&&void 0!==w?w:null===q||void 0===q?void 0:q.payment_invoice_number)&&void 0!==O?O:"N/A",null!==q&&void 0!==q&&null!==(L=q.fee_receipt)&&void 0!==L&&L.receipt_file?(0,T.jsx)("a",{href:"".concat(K.q2,"/").concat(null===q||void 0===q||null===(I=q.fee_receipt)||void 0===I?void 0:I.receipt_file),target:"_blank",rel:"noopener noreferrer",children:(0,T.jsx)("img",{src:"".concat(d.J7,"/receipt.svg"),alt:"receipt icon",title:"Download Fees Receipt"})}):null]}),(0,T.jsxs)("h6",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[B("rs_only")," ",null===q||void 0===q?void 0:q.payment_amount]}),(0,T.jsx)("p",{className:te.Z.rcv,style:{width:"100%"},children:"offline"===(null===(Y=q.payment_mode)||void 0===Y?void 0:Y.toLowerCase())?null!==q&&void 0!==q&&null!==(R=q.fee_receipt)&&void 0!==R&&R.fee_payment_mode?"".concat(null===q||void 0===q||null===(M=q.fee_receipt)||void 0===M?void 0:M.fee_payment_mode):"Offline - No Receipt":"online"===(null===(H=q.payment_mode)||void 0===H?void 0:H.toLowerCase())?null!==q&&void 0!==q&&null!==(D=q.fee_receipt)&&void 0!==D&&D.fee_payment_mode?"".concat(null===q||void 0===q||null===(G=q.fee_receipt)||void 0===G?void 0:G.fee_payment_mode):"Online - No Receipt":null===q||void 0===q?void 0:q.payment_mode})]})]})})},se=e=>{var l,t,o,r;let{fid:c,instituteId:v}=e;const{t:_}=(0,n.$G)(),[p,y]=(0,u.useState)(""),[b,Z]=(0,u.useState)(""),[S,N]=(0,u.useState)(1),[C,k]=(0,u.useState)(!0),[F,E]=(0,m.YD)({skip:p}),{financeOtherFeesTransaction:O,financeOtherFeesTransactionLoading:w}=(0,h.zK)({data:{uid:v,page:S,limit:10,search:p,filter:""},skip:!c});(0,u.useEffect)((()=>{E&&C&&N((e=>e+1))}),[E,C]),(0,u.useEffect)((()=>{var e;if(null!==O&&void 0!==O&&null!==(e=O.list)&&void 0!==e&&e.length){var l;let e=(0,f.f)(null===O||void 0===O||null===(l=O.list)||void 0===l?void 0:l.length);k((()=>e))}}),[null===O||void 0===O||null===(l=O.list)||void 0===l?void 0:l.length]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(a.default,{children:(0,T.jsx)("div",{className:i.Z.fm_search_full,children:(0,T.jsx)("section",{className:i.Z.fm_search_full_container,children:(0,T.jsxs)("div",{className:i.Z.fm_search_full_container_inner,children:[(0,T.jsx)("img",{className:i.Z.fm_search_full_icon,alt:"search icon",src:"".concat(d.dB,"/navbar-search.svg")}),(0,T.jsx)("input",{type:"text",placeholder:_("search"),onChange:e=>{var l;!w&&(null===O||void 0===O||null===(l=O.list)||void 0===l?void 0:l.length)>=0&&Z(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&(N((()=>1)),y(b))},value:b})]})})})}),(0,T.jsx)(s.Z,{}),(0,T.jsxs)(a.default,{customStyle:{paddingTop:"0"},children:[null===O||void 0===O||null===(t=O.list)||void 0===t?void 0:t.map(((e,l)=>{var t;return(null===O||void 0===O||null===(t=O.list)||void 0===t?void 0:t.length)===l+1?(0,T.jsx)("div",{ref:F,children:(0,T.jsx)(ae,{history:e})},null===e||void 0===e?void 0:e._id):(0,T.jsx)(ae,{history:e},null===e||void 0===e?void 0:e._id)})),w?p?(0,T.jsx)(j.default,{}):(0,T.jsx)(g.Z,{}):p?0===(null===O||void 0===O||null===(o=O.list)||void 0===o?void 0:o.length)&&(0,T.jsx)(x.Z,{title:"No receipts found related this search.",customStyleContainer:{marginTop:"1.5rem"}}):0===(null===O||void 0===O||null===(r=O.list)||void 0===r?void 0:r.length)&&(0,T.jsx)(x.Z,{title:"No receipts added.",customStyleContainer:{marginTop:"1.5rem"}})]})]})},de=e=>{let{fid:l,instituteId:t}=e;const{t:m}=(0,n.$G)(),h=(0,r.TH)(),f=(0,r.UO)(),p=(0,r.s0)(),[x]=(0,c.lr)(),j=(0,u.useCallback)((()=>{var e;let l="";l="Institute"===(null===(e=h.state)||void 0===e?void 0:e.urlOffSet)?"/q/".concat(f.username,"/institute/member/finance"):"/q/".concat(f.username,"/member/staff/finance"),p(l,{state:h.state})}),[p,h.state,f.username]);return(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)(o.default,{children:[(0,T.jsx)(a.default,{children:(0,T.jsx)("div",{className:i.Z.fm_header_container,children:(0,T.jsxs)("div",{className:i.Z.fm_header_start_container,style:{gap:"0.2rem"},children:[(0,T.jsx)("img",{alt:"search icon",src:"".concat(d.Fk,"/back.svg"),style:{height:"2rem",width:"2rem"},onClick:j}),(0,T.jsx)("h6",{children:m("miscellaneous_fees")})]})})}),(0,T.jsx)(s.Z,{}),(0,T.jsx)(v.Z,{children:re.map((e=>{var l,t;return(0,T.jsx)(_.Z,{tab:e,isLink:!0,isActive:null===(l=e.groupIs)||void 0===l?void 0:l.includes(x.get("n")),parentState:h.state,url:"Institute"===(null===(t=h.state)||void 0===t?void 0:t.urlOffSet)?"/q/".concat(f.username,"/institute/member/finance?type=other-fees").concat(e.urlKey):"/q/".concat(f.username,"/member/staff/finance?type=other-fees").concat(e.urlKey)},null===e||void 0===e?void 0:e.id)}))}),(0,T.jsx)(s.Z,{customStyleBorder:{marginTop:"0"}}),"subject"===x.get("n")?(0,T.jsx)(le,{fid:l,instituteId:t}):"history"===x.get("n")?(0,T.jsx)(se,{fid:l,instituteId:t}):(x.get("n"),(0,T.jsx)(ee,{fid:l,instituteId:t}))]})})},re=[{label:"normal_other_fees",id:"normal",urlKey:"",groupIs:["",null]},{label:"subject_other_fees",id:"subject",urlKey:"&n=subject",groupIs:["subject"]},{label:"transaction_history",id:"history",urlKey:"&n=history",groupIs:["history"]}]},82824:(e,l,t)=>{"use strict";t.d(l,{J:()=>s,Z:()=>d});var n=t(99893),i=t.n(n),o=t(97892),a=t.n(o);const s=(e,l)=>(a().extend(i()),a()(e).format(l)),d=(e,l,t)=>{var n;return a()()[e]("".concat(null===(n=a()(t))||void 0===n?void 0:n.format("YYYY-MM-DD")),l)}},99893:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(l,t,n){var i=t.prototype,o=i.format;n.en.formats=e,i.format=function(l){void 0===l&&(l="YYYY-MM-DDTHH:mm:ssZ");var t=this.$locale().formats,n=function(l,t){return l.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(l,n,i){var o=i&&i.toUpperCase();return n||t[i]||e[i]||t[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,l,t){return l||t.slice(1)}))}))}(l,void 0===t?{}:t);return o.call(this,n)}}}()},76697:(e,l,t)=>{"use strict";t.d(l,{Z:()=>n});const n={settle_card:"TransactionHistory_settle_card__WjSwI",settle_card_container:"TransactionHistory_settle_card_container__EIw4W",settle_card_text:"TransactionHistory_settle_card_text__3j20S",settle_paragraph:"TransactionHistory_settle_paragraph__x3Ovt",sidebarheader:"TransactionHistory_sidebarheader__oEDm9",history_image_container:"TransactionHistory_history_image_container__ZBhq9",text:"TransactionHistory_text__yimnr",rcv:"TransactionHistory_rcv__kuGgZ"}}}]);
//# sourceMappingURL=95728.549461c7.chunk.js.map