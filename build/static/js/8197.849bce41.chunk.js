"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[8197,4035,420,6876],{46876:function(e,i,n){n.r(i);var t=n(93433),o=n(29439),l=n(72791),s=n(23441),d=n(95048),a=n(12923),r=n(763),c=n(69721),u=n(52124),v=n(5574),m=n(39230),_=n(80184),f=window.innerHeight;i.default=function(e){var i=e.onClose,n=e.title,h=e.headSelect,x=e.assignHead,g=e.disabledId,b=e.instituteId,j=e.viewAs,p=e.isMultiSelect,Z=e.selectList,k=e.onMultiSelect,N=e.onDone,y=(0,m.$G)().t,S=(0,l.useState)(1),C=(0,o.Z)(S,2),I=C[0],F=C[1],M=(0,l.useState)(!0),L=(0,o.Z)(M,2),w=L[0],A=L[1],T=(0,s.YD)(),E=(0,o.Z)(T,2),B=E[0],R=E[1],P=(0,l.useState)(""),D=(0,o.Z)(P,2),O=D[0],G=D[1],Y=l.useState([]),W=(0,o.Z)(Y,2),J=W[0],z=W[1],H=(0,d.v9)((function(e){return e.idChange})),V=(0,a.vI)({skip:"ADMISSION_ADMIN"===j?!b:!(null!==H&&void 0!==H&&H.id),search:{search:O,page:I,id:"ADMISSION_ADMIN"===j?b:null===H||void 0===H?void 0:H.id,limit:10}}),U=V.assignSearchStaff,q=V.assignSearchStaffRefetch;l.useEffect((function(){null!==H&&void 0!==H&&H.id&&q()}),[null===H||void 0===H?void 0:H.id,q,I]),(0,l.useEffect)((function(){R&&w&&F((function(e){return e+1}))}),[R,w]),l.useEffect((function(){null!==U&&void 0!==U&&U.staff&&z(O?null===U||void 0===U?void 0:U.staff:function(e){return function(e){for(var i=0;i<(null===e||void 0===e?void 0:e.length);i++)for(var n=i+1;n<(null===e||void 0===e?void 0:e.length);n++){var t,o;(null===(t=e[i])||void 0===t?void 0:t._id)===(null===(o=e[n])||void 0===o?void 0:o._id)&&(null===e||void 0===e||e.splice(n,1))}return e}([].concat((0,t.Z)(e),(0,t.Z)(null===U||void 0===U?void 0:U.staff)))}),10===(null===U||void 0===U?void 0:U.staff.length)?A(!0):A(!1)}),[null===U||void 0===U?void 0:U.staff]),(0,l.useEffect)((function(){O&&$()}),[O]);var $=function(){q()},Q=(0,l.useCallback)((0,r.debounce)((function(e){return G(e)}),500),[]),K=function(e){g===(null===e||void 0===e?void 0:e._id)||(p?k(e):(h(e),"ADMISSION_ADMIN"===j||i()))};return(0,_.jsx)(v.Z,{open:x,onClose:i,children:(0,_.jsxs)("div",{style:{backgroundColor:"#FAFAFA",width:"35rem",height:"".concat(f-20,"px"),overflowX:"hidden"},children:[(0,_.jsxs)("div",{className:u.Z.assign_title,style:{width:"100%"},children:[(0,_.jsx)("h5",{children:n}),p?(0,_.jsxs)("div",{className:u.Z.is_mulitselect_container,children:[(0,_.jsx)("h6",{style:{cursor:"pointer"},onClick:N,children:y("select")}),(0,_.jsx)("img",{src:"/images/close-post-icon.svg",onClick:i,alt:"staff assign pop close icon"})]}):(0,_.jsx)("img",{src:"/images/close-post-icon.svg",onClick:i,alt:"staff assign pop close icon"})]}),(0,_.jsxs)("div",{className:u.Z.assign_search_container,children:[(0,_.jsx)("input",{type:"text",placeholder:y("search"),className:u.Z.assign_search_input,onChange:function(e){return i=e.target.value,void Q(i);var i}}),(0,_.jsx)("img",{src:"/images/search-dash-icon.svg",alt:"search icon"})]}),(0,_.jsx)("div",{className:u.Z.assign_show_list,children:null===J||void 0===J?void 0:J.map((function(e,i){return(null===J||void 0===J?void 0:J.length)===i+1?(0,_.jsxs)("div",{ref:B,children:[(0,_.jsxs)("div",{className:u.Z.assign_show_list_each,style:g===e._id?{backgroundColor:"rgba(75, 26, 133, 0.1)"}:{backgroundColor:"inherit"},onClick:function(){return K(e)},children:[p?null!==Z&&void 0!==Z&&Z.includes(null===e||void 0===e?void 0:e._id)?(0,_.jsx)("img",{src:"/images/checkbox-icon.svg",alt:"icon",style:{height:"1.3rem",borderRadius:"0",cursor:"pointer"}}):(0,_.jsx)("img",{style:{height:"1.3rem",borderRadius:"0",cursor:"pointer"},src:"/images/box-icon.svg",alt:"icon"}):"",(0,_.jsx)("img",{src:null!==e&&void 0!==e&&e.staffProfilePhoto?"".concat(c.yI,"/").concat(e.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),(0,_.jsxs)("div",{className:u.Z.assign_each_paragraph,children:[(0,_.jsx)("h6",{children:"".concat(e.staffFirstName," ").concat(null!==e&&void 0!==e&&e.staffMiddleName?null===e||void 0===e?void 0:e.staffMiddleName:""," ").concat(e.staffLastName)}),(0,_.jsxs)("p",{children:[" ",y("index")," ",null===e||void 0===e?void 0:e.staffROLLNO]})]})]}),(0,_.jsx)("hr",{})]},e._id):(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{className:u.Z.assign_show_list_each,style:g===e._id?{backgroundColor:"rgba(75, 26, 133, 0.1)"}:{backgroundColor:"inherit"},onClick:function(){return K(e)},children:[p?null!==Z&&void 0!==Z&&Z.includes(null===e||void 0===e?void 0:e._id)?(0,_.jsx)("img",{style:{height:"1.3rem",borderRadius:"0",cursor:"pointer"},src:"/images/checkbox-icon.svg",alt:"icon"}):(0,_.jsx)("img",{style:{height:"1.3rem",borderRadius:"0",cursor:"pointer"},src:"/images/box-icon.svg",alt:"icon"}):"",(0,_.jsx)("img",{src:null!==e&&void 0!==e&&e.staffProfilePhoto?"".concat(c.yI,"/").concat(e.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),(0,_.jsxs)("div",{className:u.Z.assign_each_paragraph,children:[(0,_.jsx)("h6",{children:"".concat(e.staffFirstName," ").concat(null!==e&&void 0!==e&&e.staffMiddleName?null===e||void 0===e?void 0:e.staffMiddleName:""," ").concat(e.staffLastName)}),(0,_.jsxs)("p",{children:[" ",y("index")," ",null===e||void 0===e?void 0:e.staffROLLNO]})]})]}),(0,_.jsx)("hr",{})]},e._id)}))})]})})}},67923:function(e,i,n){var t=n(1413),o=(n(72791),n(38733)),l=n(80184);i.Z=function(e){var i=e.labelText,n=e.value,s=e.customStyleContainer,d=e.customStyleLabel,a=e.customStyleValue;return(0,l.jsxs)("div",{className:o.Z.join_form_container_view,style:(0,t.Z)({},s),children:[(0,l.jsx)("label",{className:o.Z.join_form_label_view,style:(0,t.Z)({},d),children:i}),(0,l.jsx)("h6",{className:o.Z.join_form_input_view,style:(0,t.Z)({},a),children:n})]})}},34219:function(e,i,n){n(72791);var t=n(11575),o=n(80184);i.Z=function(e){var i=e.customStyleContainer,n=e.title,l=e.subtitle,s=e.costomTextTitleStyle,d=e.costomTextSubtitleStyle;return(0,o.jsxs)("div",{className:t.Z.empty_container,style:i,children:[n&&(0,o.jsx)("h6",{style:s,children:n}),l&&(0,o.jsx)("p",{style:d,children:l})]})}},66233:function(e,i,n){n.r(i),n.d(i,{default:function(){return Mi}});var t=n(72791),o=n(11464),l=n(16871),s=n(95048),d="LibraryHead_departmenthead__Cbrn7",a=n(37111),r=n(93433),c=n(29439),u=n(47630),v=n(39230),m=n(23441),_=n(55581),f=n(11105),h=n(72426),x=n.n(h),g=n(69721),b=n(80184);var j=function(e){var i,n,t,o,l,s,d,a,r,c,m,_,f,h,j,p,Z,k,N,y,S,C,I,F,M,L=e.book,w=(0,v.$G)().t;return(0,b.jsxs)("div",{className:u.Z.clc_card,children:[(0,b.jsxs)("div",{className:u.Z.clc_card_inner,children:[(0,b.jsx)("img",{className:u.Z.bookItemImg,src:null!==L&&void 0!==L&&null!==(i=L.book)&&void 0!==i&&i.photo?"".concat(g.yI,"/").concat(null===L||void 0===L||null===(n=L.book)||void 0===n?void 0:n.photo):"/images/defaultBook.png"}),(0,b.jsxs)("div",{className:u.Z.clc_card_inner_text,children:[(0,b.jsxs)("h6",{children:[" ",(null===L||void 0===L||null===(t=L.book)||void 0===t||null===(o=t.bookName)||void 0===o?void 0:o.length)>=18?"".concat(null===L||void 0===L||null===(l=L.book)||void 0===l||null===(s=l.bookName)||void 0===s?void 0:s.match(/.{1,18}/g)[0]," ..."):null===L||void 0===L||null===(d=L.book)||void 0===d?void 0:d.bookName]}),(0,b.jsxs)("p",{children:[w("accession_number")," ",": ",null!==(a=null===L||void 0===L||null===(r=L.book)||void 0===r?void 0:r.accession_number)&&void 0!==a?a:""]}),(0,b.jsxs)("p",{children:[w("issue_date"),": ",x()(null===L||void 0===L?void 0:L.issuedDate).format("Do MMM YYYY")," ",", ",x()(null===L||void 0===L?void 0:L.issuedDate).format("LT")]})]})]}),null!==L&&void 0!==L&&L.staff_member?(0,b.jsxs)("div",{className:u.Z.clc_card_inner,children:[(0,b.jsx)("img",{className:u.Z.bookItemImg,src:null!==L&&void 0!==L&&null!==(c=L.staff_member)&&void 0!==c&&c.staffProfilePhoto?"".concat(g.yI,"/").concat(null===L||void 0===L||null===(m=L.staff_member)||void 0===m?void 0:m.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg"}),(0,b.jsxs)("div",{className:u.Z.clc_card_inner_text,children:[(0,b.jsx)("h6",{children:"".concat(null===L||void 0===L||null===(_=L.staff_member)||void 0===_?void 0:_.staffFirstName," ").concat(null!==L&&void 0!==L&&null!==(f=L.staff_member)&&void 0!==f&&f.staffMiddleName?null===L||void 0===L||null===(h=L.staff_member)||void 0===h?void 0:h.staffMiddleName:""," ").concat(null===L||void 0===L||null===(j=L.staff_member)||void 0===j?void 0:j.staffLastName)}),(0,b.jsxs)("p",{children:[w("index_number")," ",": ",null!==(p=null===L||void 0===L||null===(Z=L.staff_member)||void 0===Z?void 0:Z.staffROLLNO)&&void 0!==p?p:""]}),(0,b.jsxs)("p",{children:[w("rcv_date"),": ",x()(null===L||void 0===L?void 0:L.createdAt).format("Do MMM YYYY")," ",", ",x()(null===L||void 0===L?void 0:L.createdAt).format("LT")]})]})]}):(0,b.jsxs)("div",{className:u.Z.clc_card_inner,children:[(0,b.jsx)("img",{className:u.Z.bookItemImg,src:null!==L&&void 0!==L&&null!==(k=L.member)&&void 0!==k&&k.studentProfilePhoto?"".concat(g.yI,"/").concat(null===L||void 0===L||null===(N=L.member)||void 0===N?void 0:N.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg"}),(0,b.jsxs)("div",{className:u.Z.clc_card_inner_text,children:[(0,b.jsx)("h6",{children:"".concat(null===L||void 0===L||null===(y=L.member)||void 0===y?void 0:y.studentFirstName," ").concat(null!==L&&void 0!==L&&null!==(S=L.member)&&void 0!==S&&S.studentMiddleName?null===L||void 0===L||null===(C=L.member)||void 0===C?void 0:C.studentMiddleName:""," ").concat(null===L||void 0===L||null===(I=L.member)||void 0===I?void 0:I.studentLastName)}),(0,b.jsxs)("p",{children:[w("gr_number")," ",": ",null!==(F=null===L||void 0===L||null===(M=L.member)||void 0===M?void 0:M.studentGRNO)&&void 0!==F?F:""]}),(0,b.jsxs)("p",{children:[w("rcv_date"),": ",x()(null===L||void 0===L?void 0:L.createdAt).format("Do MMM YYYY")," ",", ",x()(null===L||void 0===L?void 0:L.createdAt).format("LT")]})]})]})]})},p=n(763);var Z=function(){var e=(0,v.$G)().t,i=(0,s.v9)((function(e){return e.libraryChange.lid})),n=(0,t.useState)(""),o=(0,c.Z)(n,2),l=o[0],d=o[1],a=(0,m.YD)({skip:!l}),h=(0,c.Z)(a,2),x=h[0],g=h[1],Z=(0,t.useState)(1),k=(0,c.Z)(Z,2),N=k[0],y=k[1],S=(0,t.useState)([]),C=(0,c.Z)(S,2),I=C[0],F=C[1],M=(0,t.useState)(!0),L=(0,c.Z)(M,2),w=L[0],A=L[1],T=(0,t.useState)(!0),E=(0,c.Z)(T,2),B=E[0],R=E[1],P=(0,_.mU)({data:{lid:i,page:N,limit:10,search:l},skip:!i}),D=P.getCollectedBooklist,O=P.getCollectedBookListRefetch;(0,t.useEffect)((function(){g&&w&&y((function(e){return e+1}))}),[g,w]),(0,t.useEffect)((function(){i&&(R(!0),O())}),[N,i,l,O]),(0,t.useEffect)((function(){var e,i;null!==D&&void 0!==D&&D.collected?l?(F(null===D||void 0===D?void 0:D.collected),R(!1)):(F((function(e){var i,n;return null===(i=(0,r.Z)(new Set(null===(n=[].concat((0,r.Z)(e),(0,r.Z)(null===D||void 0===D?void 0:D.collected)))||void 0===n?void 0:n.map(JSON.stringify))))||void 0===i?void 0:i.map(JSON.parse)})),R(!1)):0===(null===D||void 0===D||null===(e=D.collected)||void 0===e?void 0:e.length)&&R(!1),10===(null===D||void 0===D||null===(i=D.collected)||void 0===i?void 0:i.length)?A(!0):A(!1)}),[null===D||void 0===D?void 0:D.collected]);var G=(0,t.useCallback)((0,p.debounce)((function(e){return d(e)}),500),[]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:u.Z.searchContainerr,children:(0,b.jsxs)("div",{className:u.Z.searchContainer,children:[(0,b.jsx)("img",{alt:"",src:"/images/search-dept-icon.svg"}),(0,b.jsx)("input",{type:"text",placeholder:e("search-label"),onChange:function(e){return i=e.target.value,void G(i);var i}})]})}),(0,b.jsx)("div",{className:u.Z.remainingFees,children:(0,b.jsx)("div",{className:u.Z.remainingFeesBottom,children:(0,b.jsxs)("div",{className:u.Z.itemsContainer,children:[null===I||void 0===I?void 0:I.map((function(e,i){return(null===I||void 0===I?void 0:I.length)===i+1?(0,b.jsx)("div",{ref:x,style:{width:"100%"},children:(0,b.jsx)(j,{book:e,status:"memberdetail"})},null===e||void 0===e?void 0:e._id):(0,b.jsx)(j,{book:e,status:"memberdetail"},null===e||void 0===e?void 0:e._id)})),B&&(0,b.jsx)(f.Z,{}),!B&&0===(null===I||void 0===I?void 0:I.length)&&(0,b.jsx)("div",{className:u.Z.noData,children:(0,b.jsx)("img",{src:"/images/nodata.jpg",alt:""})})]})})})]})},k=n(86864),N=n(25629),y=n(1413),S={issue_modal:"AssignBookMember_issue_modal__CsMlG",issueModalbody:"AssignBookMember_issueModalbody__zmjXk",issueModaltop:"AssignBookMember_issueModaltop__FEn0H",issuedBookItem:"AssignBookMember_issuedBookItem__O6ige",imgcontainer:"AssignBookMember_imgcontainer__SNcot",issuedBookItemMidright:"AssignBookMember_issuedBookItemMidright__rHLh0",issuedBookItemBottomLeft:"AssignBookMember_issuedBookItemBottomLeft__iGaQa",textt:"AssignBookMember_textt__asvMa",issueModaltopback:"AssignBookMember_issueModaltopback__mSNrr",issueModaltopsearch:"AssignBookMember_issueModaltopsearch__LOzxC",dash:"AssignBookMember_dash__93bg2",selectedText:"AssignBookMember_selectedText__ClVj+",itembookcontainer:"AssignBookMember_itembookcontainer__p1Vvj",itembookk:"AssignBookMember_itembookk__peZln",itembookcursor:"AssignBookMember_itembookcursor__tmbUD",issueBookk:"AssignBookMember_issueBookk__XKvQd",bookmargin:"AssignBookMember_bookmargin__vGsHh",bluetick:"AssignBookMember_bluetick__MsUzs",issuedDate:"AssignBookMember_issuedDate__lwPu+",issuebtn:"AssignBookMember_issuebtn__Dojwp",searchContainerr:"AssignBookMember_searchContainerr__yC1ub",searchContainer:"AssignBookMember_searchContainer__yk8R1",closeIconContainer:"AssignBookMember_closeIconContainer__ZHAU4",closeIcon:"AssignBookMember_closeIcon__pv9rs",author:"AssignBookMember_author__d7utn",authorLabel:"AssignBookMember_authorLabel__iKeFN"},C=n(36665),I=n(98734),F=n(6245),M=function(e){var i=e.onSearch,n=e.onBack,o=e.step,l=(0,v.$G)().t,s=(0,t.useState)(!1),d=(0,c.Z)(s,2),a=d[0],r=d[1],u=(0,t.useCallback)((0,p.debounce)((function(e){return i(e)}),500),[]);return(0,b.jsx)("div",{className:S.issueModaltop,children:a?(0,b.jsxs)("div",{className:S.searchContainerr,children:[(0,b.jsxs)("div",{className:S.searchContainer,children:[(0,b.jsx)("img",{alt:"",src:"/images/search-dept-icon.svg"}),(0,b.jsx)("input",{type:"text",placeholder:l("search-label"),onChange:function(e){u(e.target.value)}})]}),(0,b.jsx)("div",{className:S.closeIconContainer,children:(0,b.jsx)("img",{onClick:function(){i(""),r((function(e){return!e}))},className:S.closeIcon,src:"/images/user_signup/close.svg",alt:""})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("img",{className:S.issueModaltopback,src:"/images/back.svg",alt:"",onClick:n}),(0,b.jsx)("h6",{className:S.issueModaltoph6,children:l(0===o?"select_member":1===o?"select_book":"issued_preview")}),2!==o&&(0,b.jsx)("img",{onClick:function(){r((function(e){return!e}))},className:S.issueModaltopsearch,src:"/images/search-icon.svg",alt:""})]})})};var L=function(e){var i=e.student,n=e.onAddMember,t=e.isStaff,o=(0,v.$G)().t;return(0,b.jsxs)("div",{className:S.issuedBookItem,onClick:function(){return n(i)},children:[(0,b.jsx)("div",{className:S.issuedBookItemMidleft,children:(0,b.jsx)("div",{className:S.imgcontainer,children:t?(0,b.jsx)("img",{src:null!==i&&void 0!==i&&i.staffProfilePhoto?"".concat(g.yI,"/").concat(null===i||void 0===i?void 0:i.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:""}):(0,b.jsx)("img",{src:null!==i&&void 0!==i&&i.studentProfilePhoto?"".concat(g.yI,"/").concat(null===i||void 0===i?void 0:i.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:""})})}),(0,b.jsx)("div",{className:S.issuedBookItemMidright,children:t?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h6",{children:"".concat(null===i||void 0===i?void 0:i.staffFirstName," ").concat(null!==i&&void 0!==i&&i.staffMiddleName?null===i||void 0===i?void 0:i.staffMiddleName:""," ").concat(null===i||void 0===i?void 0:i.staffLastName)}),(0,b.jsxs)("p",{children:[o("index")," ",null===i||void 0===i?void 0:i.staffROLLNO]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h6",{children:"".concat(null===i||void 0===i?void 0:i.studentFirstName," ").concat(null!==i&&void 0!==i&&i.studentMiddleName?null===i||void 0===i?void 0:i.studentMiddleName:""," ").concat(null===i||void 0===i?void 0:i.studentLastName)}),(0,b.jsxs)("p",{children:[o("gr_no")," ",null===i||void 0===i?void 0:i.studentGRNO]})]})})]})},w=function(e){var i=e.instituteId,n=e.onAddMember,o=e.onBack,l=e.step,s=(0,t.useState)(""),d=(0,c.Z)(s,2),a=d[0],u=d[1],v=(0,m.YD)({skip:a}),_=(0,c.Z)(v,2),h=_[0],x=_[1],g=(0,t.useState)([]),j=(0,c.Z)(g,2),p=j[0],Z=j[1],k=(0,t.useState)(1),N=(0,c.Z)(k,2),y=N[0],S=N[1],C=(0,t.useState)(!0),I=(0,c.Z)(C,2),w=I[0],A=I[1],T=(0,t.useState)(!0),E=(0,c.Z)(T,2),B=E[0],R=E[1],P=(0,F.Mu)({data:{id:i,page:y,limit:10},skip:!i}),D=P.approveStudentList,O=P.approveStudentListRefetch,G=(0,F.iR)({data:{search:a,page:1,limit:10,id:i},skip:!a}),Y=G.searchStudent,W=G.searchStudentRefetch;(0,t.useEffect)((function(){x&&w&&S((function(e){return e+1}))}),[x,w]),(0,t.useEffect)((function(){a&&i&&(R(!0),W())}),[a,i,y,W]),(0,t.useEffect)((function(){i&&(R(!0),O())}),[i,y,O]),(0,t.useEffect)((function(){var e,i,n;a?null!==Y&&void 0!==Y&&Y.student?(Z(1===y?null===Y||void 0===Y?void 0:Y.student:function(e){var i,n;return null===(i=(0,r.Z)(new Set(null===(n=[].concat((0,r.Z)(e),(0,r.Z)(null===Y||void 0===Y?void 0:Y.student)))||void 0===n?void 0:n.map(JSON.stringify))))||void 0===i?void 0:i.map(JSON.parse)}),R(!1)):0===(null===Y||void 0===Y||null===(i=Y.student)||void 0===i?void 0:i.length)&&R(!1):null!==D&&void 0!==D&&D.studentIns?(Z(1===y?null===D||void 0===D?void 0:D.studentIns:function(e){var i,n;return null===(i=(0,r.Z)(new Set(null===(n=[].concat((0,r.Z)(e),(0,r.Z)(null===D||void 0===D?void 0:D.studentIns)))||void 0===n?void 0:n.map(JSON.stringify))))||void 0===i?void 0:i.map(JSON.parse)}),R(!1)):0===(null===D||void 0===D||null===(n=D.studentIns)||void 0===n?void 0:n.length)&&R(!1);10===(null===D||void 0===D||null===(e=D.studentIns)||void 0===e?void 0:e.length)?A(!0):A(!1)}),[null===D||void 0===D?void 0:D.studentIns,null===Y||void 0===Y?void 0:Y.student]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(M,{onBack:o,step:l,onSearch:function(e){S((function(e){return 1})),u(e)}}),null===p||void 0===p?void 0:p.map((function(e,i){return(null===p||void 0===p?void 0:p.length)===i+1?(0,b.jsx)("div",{ref:h,children:(0,b.jsx)(L,{student:e,onAddMember:n})},null===e||void 0===e?void 0:e._id):(0,b.jsx)(L,{student:e,onAddMember:n},null===e||void 0===e?void 0:e._id)})),B&&(0,b.jsx)(f.Z,{status:"white"})]})};var A=function(e){var i,n=e.book,t=e.status,o=e.onAddBook,l=(0,v.$G)().t;return(0,b.jsxs)("div",{className:"issueBook"!==t?"".concat(S.itembookk," ").concat(S.itembookcursor):S.itembookk,onClick:function(){"selectbook"===t&&o(n)},children:["issueBook"===t&&(0,b.jsx)("img",{className:S.bluetick,src:"/images/library/bluetick.svg",alt:"verified"}),(0,b.jsx)("p",{className:S.selectedText,children:null===n||void 0===n?void 0:n.language}),(0,b.jsx)("img",{src:null!==n&&void 0!==n&&n.photo?"".concat(g.yI,"/").concat(null===n||void 0===n?void 0:n.photo):"/images/defaultBook.png",alt:""}),(0,b.jsxs)("div",{className:S.textt,children:[(0,b.jsx)("h6",{children:null===n||void 0===n?void 0:n.bookName}),(0,b.jsxs)("p",{className:S.author,children:[null===n||void 0===n?void 0:n.author," \xa0",(0,b.jsx)("span",{className:S.authorLabel,children:l("author")})]}),(0,b.jsxs)("p",{className:S.author,children:[l("accession_number")," "," : ",null!==(i=null===n||void 0===n?void 0:n.accession_number)&&void 0!==i?i:""," "]})]})]})},T=function(e){var i=e.member,n=e.onAddBook,o=e.onBack,l=e.step,d=e.isView,a=e.role,u=e.mid,h=(0,v.$G)().t,x=(0,m.YD)(),j=(0,c.Z)(x,2),p=j[0],Z=j[1],k=(0,t.useState)(1),N=(0,c.Z)(k,2),y=N[0],C=N[1],I=(0,t.useState)(!0),F=(0,c.Z)(I,2),L=F[0],w=F[1],T=(0,t.useState)(!0),E=(0,c.Z)(T,2),B=E[0],R=E[1],P=(0,t.useState)([]),D=(0,c.Z)(P,2),O=D[0],G=D[1],Y=(0,t.useState)(""),W=(0,c.Z)(Y,2),J=W[0],z=W[1],H=(0,s.v9)((function(e){return e.libraryChange})),V=(0,_.O_)({data:{lid:null===H||void 0===H?void 0:H.lid,page:y,limit:10,search:J,flow:"ISSUE_BOOK",role:a,mid:u},skip:null!==H&&void 0!==H&&H.lid?!(null!==H&&void 0!==H&&H.lid):!u}),U=V.getBooklist,q=V.getBookListRefetch;(0,t.useEffect)((function(){(null!==H&&void 0!==H&&H.lid||u||a)&&(R(!0),q())}),[null===H||void 0===H?void 0:H.lid,u,a,y,J,q]),(0,t.useEffect)((function(){Z&&L&&C((function(e){return e+1}))}),[Z,L]),(0,t.useEffect)((function(){var e,i;J?(G(null===U||void 0===U?void 0:U.books),R(!1)):null!==U&&void 0!==U&&U.books?(G(1===y?null===U||void 0===U?void 0:U.books:function(e){var i,n;return null===(i=(0,r.Z)(new Set(null===(n=[].concat((0,r.Z)(e),(0,r.Z)(null===U||void 0===U?void 0:U.books)))||void 0===n?void 0:n.map(JSON.stringify))))||void 0===i?void 0:i.map(JSON.parse)}),R(!1)):0===(null===U||void 0===U||null===(i=U.books)||void 0===i?void 0:i.length)&&R(!1);10===(null===U||void 0===U||null===(e=U.books)||void 0===e?void 0:e.length)?w(!0):w(!1)}),[null===U||void 0===U?void 0:U.books]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(M,{onBack:o,step:l,onSearch:function(e){C((function(e){return 1})),z(e)}}),(0,b.jsxs)("div",{className:S.selectbook,children:[(0,b.jsxs)("div",{className:S.issuedBookItem,children:[(0,b.jsx)("p",{className:S.selectedText,children:h("selected")}),(0,b.jsx)("div",{className:S.issuedBookItemMidleft,children:(0,b.jsx)("div",{className:S.imgcontainer,children:"STAFF"===d?(0,b.jsx)("img",{src:null!==i&&void 0!==i&&i.staffProfilePhoto?"".concat(g.yI,"/").concat(null===i||void 0===i?void 0:i.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:""}):(0,b.jsx)("img",{src:null!==i&&void 0!==i&&i.studentProfilePhoto?"".concat(g.yI,"/").concat(null===i||void 0===i?void 0:i.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:""})})}),(0,b.jsx)("div",{className:S.issuedBookItemMidright,children:"STAFF"===d?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h6",{children:"".concat(null===i||void 0===i?void 0:i.staffFirstName," ").concat(null!==i&&void 0!==i&&i.staffMiddleName?null===i||void 0===i?void 0:i.staffMiddleName:""," ").concat(null===i||void 0===i?void 0:i.staffLastName)}),(0,b.jsxs)("p",{children:[h("index")," ",null===i||void 0===i?void 0:i.staffROLLNO]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h6",{children:"".concat(null===i||void 0===i?void 0:i.studentFirstName," ").concat(null!==i&&void 0!==i&&i.studentMiddleName?null===i||void 0===i?void 0:i.studentMiddleName:""," ").concat(null===i||void 0===i?void 0:i.studentLastName)}),(0,b.jsxs)("p",{children:[h("gr_no")," ",null===i||void 0===i?void 0:i.studentGRNO]})]})})]}),(0,b.jsx)("div",{className:S.dash}),(0,b.jsxs)("div",{className:S.itembookcontainer,children:[null===O||void 0===O?void 0:O.map((function(e,i){return(null===O||void 0===O?void 0:O.length)===i+1?(0,b.jsx)("div",{ref:p,children:(0,b.jsx)(A,{status:"selectbook",book:e,onAddBook:n})},null===e||void 0===e?void 0:e._id):(0,b.jsx)(A,{status:"selectbook",book:e,onAddBook:n},null===e||void 0===e?void 0:e._id)})),B&&(0,b.jsx)(f.Z,{status:"white"})]})]})]})},E=n(4942),B=n(26071),R=n(20659),P=n(61055),D=function(e){var i=e.member,n=e.book,o=e.onBack,l=e.step,s=e.onIssueBook,d=e.isView,a=(0,v.$G)().t,r=(0,t.useState)({for_days:7,day_overdue_charge:""}),u=(0,c.Z)(r,2),m=u[0],_=u[1],f=(0,t.useState)("ONE_WEEK"),h=(0,c.Z)(f,2),j=h[0],p=h[1],Z=function(e){_((function(i){return(0,y.Z)((0,y.Z)({},i),{},(0,E.Z)({},e.target.name,e.target.value))}))},k=function(e){p(e),_((function(i){return(0,y.Z)((0,y.Z)({},i),{},{for_days:"ONE_WEEK"===e?7:"ONE_MONTH"===e?30:""})}))};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(M,{onBack:o,step:l}),(0,b.jsxs)("div",{className:S.issueBookk,children:[(0,b.jsx)("h6",{children:a("member")}),(0,b.jsxs)("div",{className:"".concat(S.itembookk," ").concat(S.bookmargin),children:[(0,b.jsx)("img",{className:S.bluetick,src:"/images/library/bluetick.svg",alt:"verified"}),(0,b.jsx)("div",{className:S.issuedBookItemMidleft,children:(0,b.jsx)("div",{className:S.imgcontainer,children:"STAFF"===d?(0,b.jsx)("img",{src:null!==i&&void 0!==i&&i.staffProfilePhoto?"".concat(g.yI,"/").concat(null===i||void 0===i?void 0:i.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:""}):(0,b.jsx)("img",{src:null!==i&&void 0!==i&&i.studentProfilePhoto?"".concat(g.yI,"/").concat(null===i||void 0===i?void 0:i.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:""})})}),(0,b.jsx)("div",{className:S.issuedBookItemMidright,children:"STAFF"===d?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h6",{children:"".concat(null===i||void 0===i?void 0:i.staffFirstName," ").concat(null!==i&&void 0!==i&&i.staffMiddleName?null===i||void 0===i?void 0:i.staffMiddleName:""," ").concat(null===i||void 0===i?void 0:i.staffLastName)}),(0,b.jsxs)("p",{children:[a("index")," ",null===i||void 0===i?void 0:i.staffROLLNO]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h6",{children:"".concat(null===i||void 0===i?void 0:i.studentFirstName," ").concat(null!==i&&void 0!==i&&i.studentMiddleName?null===i||void 0===i?void 0:i.studentMiddleName:""," ").concat(null===i||void 0===i?void 0:i.studentLastName)}),(0,b.jsxs)("p",{children:[a("gr_no")," ",null===i||void 0===i?void 0:i.studentGRNO]})]})})]}),(0,b.jsx)("h6",{children:a("book")}),(0,b.jsx)(A,{book:n,status:"issueBook"}),(0,b.jsxs)("h6",{className:S.issuedDate,children:[a("issue_date")," : ",(0,b.jsx)("span",{children:x()().format("Do MMM YYYY")})]}),"STAFF"!==d?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(R.Z,{label:"duration",children:null===O||void 0===O?void 0:O.map((function(e){return(0,b.jsx)(B.Z,{tile:e,onTile:k,activeTile:j},null===e||void 0===e?void 0:e.key)}))}),"OTHER"===j?(0,b.jsx)(P.Z,{label:a("how_many_days"),placeholder:a("how_many_days_placeholder"),name:"for_days",value:m.for_days,type:"text",onChange:Z}):null,(0,b.jsx)(P.Z,{label:a("late_fees_per_day"),placeholder:a("late_fees_per_day_placeholder"),name:"day_overdue_charge",value:m.day_overdue_charge,type:"text",onChange:Z,customFormInputContainer:{marginBottom:"1rem"}})]}):null,"STAFF"===d?(0,b.jsx)("button",{className:S.issuebtn,onClick:s,children:a("issue_book")}):(0,b.jsx)("button",{className:S.issuebtn,onClick:function(){s((0,y.Z)({},m))},children:a("issue_book")})]})]})},O=[{key:"ONE_WEEK",name:"one_week"},{key:"ONE_MONTH",name:"one_months"},{key:"OTHER",name:"other"}],G=n(12923),Y=function(e){var i=e.instituteId,n=e.onAddMember,o=e.onBack,l=e.step,s=(0,t.useState)(""),d=(0,c.Z)(s,2),a=d[0],u=d[1],v=(0,m.YD)({skip:a}),_=(0,c.Z)(v,2),h=_[0],x=_[1],g=(0,t.useState)([]),j=(0,c.Z)(g,2),p=j[0],Z=j[1],k=(0,t.useState)(1),N=(0,c.Z)(k,2),y=N[0],S=N[1],C=(0,t.useState)(!0),I=(0,c.Z)(C,2),F=I[0],w=I[1],A=(0,t.useState)(!0),T=(0,c.Z)(A,2),E=T[0],B=T[1],R=(0,G.vI)({skip:!i,search:{search:a,page:y,id:i,limit:10}}),P=R.assignSearchStaff,D=R.assignSearchStaffRefetch;(0,t.useEffect)((function(){x&&F&&S((function(e){return e+1}))}),[x,F]),(0,t.useEffect)((function(){i&&(B(!0),D())}),[a,i,y,D]),(0,t.useEffect)((function(){var e,i,n;a?null!==P&&void 0!==P&&P.staff?(Z(null===P||void 0===P?void 0:P.staff),B(!1)):0===(null===P||void 0===P||null===(i=P.staff)||void 0===i?void 0:i.length)&&B(!1):null!==P&&void 0!==P&&P.staff?(Z(1===y?null===P||void 0===P?void 0:P.staff:function(e){var i,n;return null===(i=(0,r.Z)(new Set(null===(n=[].concat((0,r.Z)(e),(0,r.Z)(null===P||void 0===P?void 0:P.staff)))||void 0===n?void 0:n.map(JSON.stringify))))||void 0===i?void 0:i.map(JSON.parse)}),B(!1)):0===(null===P||void 0===P||null===(n=P.staff)||void 0===n?void 0:n.length)&&B(!1);10===(null===P||void 0===P||null===(e=P.staff)||void 0===e?void 0:e.length)?w(!0):w(!1)}),[null===P||void 0===P?void 0:P.staff]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(M,{onBack:o,step:l,onSearch:function(e){S((function(e){return 1})),u(e)}}),null===p||void 0===p?void 0:p.map((function(e,i){return(null===p||void 0===p?void 0:p.length)===i+1?(0,b.jsx)("div",{ref:h,children:(0,b.jsx)(L,{student:e,onAddMember:n,isStaff:!0})},null===e||void 0===e?void 0:e._id):(0,b.jsx)(L,{student:e,onAddMember:n,isStaff:!0},null===e||void 0===e?void 0:e._id)})),E&&(0,b.jsx)(f.Z,{status:"white"})]})},W=function(e){var i=e.onClose,n=e.instituteId,o=e.onRefetchWhenBookIssue,l=e.isView,d=e.role,a=e.mid,r=(0,s.v9)((function(e){return e.libraryChange})),u=(0,t.useState)(0),v=(0,c.Z)(u,2),m=v[0],f=v[1],h=(0,t.useState)(!1),x=(0,c.Z)(h,2),g=x[0],j=x[1],p=(0,t.useState)(""),Z=(0,c.Z)(p,2),k=Z[0],N=Z[1],F=(0,t.useState)(""),M=(0,c.Z)(F,2),L=M[0],A=M[1],E=(0,_.EI)(),B=(0,c.Z)(E,1)[0],R=(0,_.n9)(),P=(0,c.Z)(R,1)[0],O=function(){0===m?i():f(1===m?0:1)},G=function(e){N(e),f(1)};return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(C.Z,{onClose:O,children:[(0,b.jsxs)("div",{className:S.issue_modal,children:[0===m&&("STAFF"===l?(0,b.jsx)(Y,{instituteId:n,onAddMember:G,step:m,onBack:O}):(0,b.jsx)(w,{instituteId:n,onAddMember:G,step:m,onBack:O})),1===m&&(0,b.jsx)(T,{onAddBook:function(e){A(e),f(2)},step:m,onBack:O,member:k,isView:l,role:d,mid:a}),2===m&&(0,b.jsx)(D,{step:m,onBack:O,book:L,member:k,onIssueBook:function(e){null!==r&&void 0!==r&&r.lid&&null!==k&&void 0!==k&&k._id&&null!==L&&void 0!==L&&L._id&&(j(!0),"STAFF"===l?P({lid:null===r||void 0===r?void 0:r.lid,issueData:{memberId:null===k||void 0===k?void 0:k._id,bookId:null===L||void 0===L?void 0:L._id,flow:"Normal"}}).then((function(){o(),i(!1),j(!1)})).catch((function(){})):B({lid:null===r||void 0===r?void 0:r.lid,issueData:(0,y.Z)({memberId:null===k||void 0===k?void 0:k._id,bookId:null===L||void 0===L?void 0:L._id,flow:"Normal"},e)}).then((function(){o(),i(!1),j(!1)})).catch((function(){})))},isView:l})]}),g&&(0,b.jsx)(I.Z,{})]})})};var J=function(e){var i=e.insId,n=e.role,o=e.mid,l=(0,v.$G)().t,d=(0,t.useState)(""),a=(0,c.Z)(d,2),u=a[0],h=a[1],x=(0,m.YD)({skip:!u}),g=(0,c.Z)(x,2),j=g[0],Z=g[1],y=(0,t.useState)(1),S=(0,c.Z)(y,2),C=S[0],I=S[1],F=(0,t.useState)([]),M=(0,c.Z)(F,2),L=M[0],w=M[1],A=(0,t.useState)(!0),T=(0,c.Z)(A,2),E=T[0],B=T[1],R=(0,t.useState)(!0),P=(0,c.Z)(R,2),D=P[0],O=P[1],G=(0,t.useState)(!1),Y=(0,c.Z)(G,2),J=Y[0],z=Y[1],H=(0,t.useState)(!1),V=(0,c.Z)(H,2),U=V[0],q=V[1],$=(0,t.useState)(!1),Q=(0,c.Z)($,2),K=Q[0],X=Q[1],ee=(0,s.v9)((function(e){return e.libraryChange.lid})),ie=(0,_.aA)({data:{lid:ee,page:C,limit:10,search:u},skip:!ee}),ne=ie.getIssuedBooklist,te=ie.getIssuedBookListRefetch;(0,t.useEffect)((function(){Z&&E&&I((function(e){return e+1}))}),[Z,E]),(0,t.useEffect)((function(){ee&&(O(!0),te())}),[C,ee,u,te]),(0,t.useEffect)((function(){var e;if(null!==ne&&void 0!==ne&&ne.issues)if(u)w(null===ne||void 0===ne?void 0:ne.issues),O(!1);else if(J)w(null===ne||void 0===ne?void 0:ne.issues),O(!1),z(!1);else{var i;null!==ne&&void 0!==ne&&ne.issues?(w((function(e){var i,n;return null===(i=(0,r.Z)(new Set(null===(n=[].concat((0,r.Z)(e),(0,r.Z)(null===ne||void 0===ne?void 0:ne.issues)))||void 0===n?void 0:n.map(JSON.stringify))))||void 0===i?void 0:i.map(JSON.parse)})),O(!1)):0===(null===ne||void 0===ne||null===(i=ne.issues)||void 0===i?void 0:i.length)&&O(!1)}10===(null===ne||void 0===ne||null===(e=ne.issues)||void 0===e?void 0:e.length)?B(!0):B(!1)}),[null===ne||void 0===ne?void 0:ne.issues]);var oe=(0,t.useCallback)((0,p.debounce)((function(e){return h(e)}),500),[]),le=function(){I(1),z(!0),O(!0),te()};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:k.Z.searchContainerr,children:[(0,b.jsxs)("div",{className:k.Z.searchContainer,children:[(0,b.jsx)("img",{alt:"",src:"/images/search-dept-icon.svg"}),(0,b.jsx)("input",{type:"text",placeholder:l("search-label"),onChange:function(e){return i=e.target.value,void oe(i);var i}})]}),(0,b.jsx)("div",{className:k.Z.newBtn,onClick:function(){return q(!0)},children:l("issue_book")}),(0,b.jsx)("div",{className:k.Z.newBtn,onClick:function(){return X(!0)},children:l("issue_staff_book")})]}),(0,b.jsx)("div",{className:k.Z.remainingFees,children:(0,b.jsx)("div",{className:k.Z.remainingFeesBottom,children:(0,b.jsxs)("div",{className:k.Z.itemsContainer,children:[null===L||void 0===L?void 0:L.map((function(e,i){var n,t;return(null===L||void 0===L?void 0:L.length)===i+1?(0,b.jsx)("div",{ref:j,className:k.Z.itemsRef,children:(0,b.jsx)(N.Z,{book:e,member:null!==(n=null===e||void 0===e?void 0:e.member)&&void 0!==n?n:null===e||void 0===e?void 0:e.staff_member,issueId:null===e||void 0===e?void 0:e._id,onRefetchWhenBookCollect:le})},i):(0,b.jsx)("div",{className:k.Z.itemsRef,children:(0,b.jsx)(N.Z,{book:e,member:null!==(t=null===e||void 0===e?void 0:e.member)&&void 0!==t?t:null===e||void 0===e?void 0:e.staff_member,issueId:null===e||void 0===e?void 0:e._id,onRefetchWhenBookCollect:le})},i)})),D&&(0,b.jsx)(f.Z,{}),!D&&0===(null===L||void 0===L?void 0:L.length)&&(0,b.jsx)("div",{className:k.Z.noData,children:(0,b.jsx)("img",{src:"/images/nodata.jpg",alt:""})})]})})}),U&&(0,b.jsx)(W,{instituteId:i,onClose:function(){return q(!1)},onRefetchWhenBookIssue:le,role:n,mid:o}),K&&(0,b.jsx)(W,{instituteId:i,onClose:function(){return X(!1)},onRefetchWhenBookIssue:le,isView:"STAFF",role:n,mid:o})]})},z=n(52398),H=n(61969);var V=function(e){var i=e.index,n=e.member,t=e.setMid,o=e.mid,l=(0,v.$G)().t;return(0,b.jsxs)("div",{className:(null===n||void 0===n?void 0:n._id)===o?"".concat(H.Z.memberItem," ").concat(H.Z.memberItemactive):H.Z.memberItem,onClick:function(){return t(null===n||void 0===n?void 0:n._id)},children:[(0,b.jsx)("div",{className:H.Z.issuedBookItemMidleft,children:(0,b.jsx)("div",{className:H.Z.imgcontainer,children:(0,b.jsx)("img",{src:"1"!==(null===n||void 0===n?void 0:n.photoId)?"".concat(g.yI,"/").concat(null===n||void 0===n?void 0:n.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:""})})}),(0,b.jsxs)("div",{className:H.Z.issuedBookItemMidright,children:[(0,b.jsx)("h6",{children:"".concat(null===n||void 0===n?void 0:n.studentFirstName," ").concat(null!==n&&void 0!==n&&n.studentMiddleName?null===n||void 0===n?void 0:n.studentMiddleName:""," ").concat(null===n||void 0===n?void 0:n.studentLastName)}),(0,b.jsxs)("p",{children:[l("index_no")," : ",i," "]})]})]})},U="Tabs_mcqToptabs__ccG7U",q="Tabs_mcqTop__20iW4",$="Tabs_mcqTopItem__oghuj",Q="Tabs_active__6c5Pg";var K=function(e){var i=e.activeIndex,n=e.setActiveIndex,t=(0,v.$G)().t;return(0,b.jsx)("div",{className:q,children:(0,b.jsxs)("div",{className:U,children:[(0,b.jsx)("div",{className:0===i?"".concat($," ").concat(Q):$,onClick:function(){return n(0)},children:t("issued")}),(0,b.jsx)("div",{className:1===i?"".concat($," ").concat(Q):$,onClick:function(){return n(1)},children:t("history")}),(0,b.jsx)("div",{className:2===i?"".concat($," ").concat(Q):$,onClick:function(){return n(2)},children:t("in_out_history")})]})})},X=t.forwardRef((function(e,i){var n,t;return(0,b.jsxs)("div",{className:H.Z.membersContainer,children:[null===e||void 0===e||null===(n=e.borrowList)||void 0===n?void 0:n.map((function(n,t){var o;return(null===e||void 0===e||null===(o=e.borrowList)||void 0===o?void 0:o.length)===t+1?(0,b.jsx)("div",{ref:i,className:H.Z.limember,children:(0,b.jsx)(N.Z,{book:n,member:null===e||void 0===e?void 0:e.member,issueId:null===n||void 0===n?void 0:n._id,onRefetchWhenBookCollect:null===e||void 0===e?void 0:e.onRefetchWhenBookCollect})},t):(0,b.jsx)("div",{className:H.Z.limember,children:(0,b.jsx)(N.Z,{book:n,member:null===e||void 0===e?void 0:e.member,issueId:null===n||void 0===n?void 0:n._id,onRefetchWhenBookCollect:null===e||void 0===e?void 0:e.onRefetchWhenBookCollect})},t)})),(null===e||void 0===e?void 0:e.showingDataLoading)&&(0,b.jsx)(f.Z,{}),!(null!==e&&void 0!==e&&e.showingDataLoading)&&0===(null===e||void 0===e||null===(t=e.borrowList)||void 0===t?void 0:t.length)&&(0,b.jsx)("div",{className:H.Z.noData,children:(0,b.jsx)("img",{src:"/images/nodata.jpg",alt:""})})]})})),ee=n(11053);var ie=function(e){var i,n,o=e.mid,l=(0,m.YD)(),s=(0,c.Z)(l,2),d=s[0],a=s[1],u=(0,t.useState)(1),v=(0,c.Z)(u,2),h=v[0],x=v[1],g=(0,t.useState)(!0),j=(0,c.Z)(g,2),p=j[0],Z=j[1],k=(0,t.useState)(!0),N=(0,c.Z)(k,2),S=N[0],C=N[1],I=(0,t.useState)({memberId:"",historyList:[]}),F=(0,c.Z)(I,2),M=F[0],L=F[1],w=(0,_.Ef)({data:{sid:o,page:M.memberId!==o?1:h,limit:10},skip:!o}),A=w.getMemberHistorylist,T=w.getMemberHistoryListRefetch;return(0,t.useEffect)((function(){a&&p&&x((function(e){return e+1}))}),[a,p]),(0,t.useEffect)((function(){o&&(C(!0),T())}),[h,o,T]),(0,t.useEffect)((function(){var e,i;null!==A&&void 0!==A&&A.history?M.memberId===o?(L((function(e){var i,n;return(0,y.Z)((0,y.Z)({},e),{},{historyList:null===(i=(0,r.Z)(new Set(null===(n=[].concat((0,r.Z)(e.historyList),(0,r.Z)(null===A||void 0===A?void 0:A.history)))||void 0===n?void 0:n.map(JSON.stringify))))||void 0===i?void 0:i.map(JSON.parse)})})),C(!1)):(L({memberId:o,historyList:(0,r.Z)(null===A||void 0===A?void 0:A.history)}),C(!1)):0===(null===A||void 0===A||null===(e=A.history)||void 0===e?void 0:e.length)&&C(!1),10===(null===A||void 0===A||null===(i=A.history)||void 0===i?void 0:i.length)?Z(!0):Z(!1)}),[null===A||void 0===A?void 0:A.history]),(0,b.jsxs)("div",{className:H.Z.membersContainer,children:[null===(i=M.historyList)||void 0===i?void 0:i.map((function(e,i){var n;return(null===(n=M.historyList)||void 0===n?void 0:n.length)===i+1?(0,b.jsx)("div",{ref:d,className:H.Z.limember,children:(0,b.jsx)(ee.Z,{status:"memberdetail",book:e})},i):(0,b.jsx)("div",{className:H.Z.limember,children:(0,b.jsx)(ee.Z,{status:"memberdetail",book:e})},i)})),S&&(0,b.jsx)(f.Z,{}),!S&&0===(null===(n=M.historyList)||void 0===n?void 0:n.length)&&(0,b.jsx)("div",{className:H.Z.noData,children:(0,b.jsx)("img",{src:"/images/nodata.jpg",alt:""})})]})},ne=n(20224);var te=function(e){var i,n,o,l,s,d,a,u,f,h,x,j,p,Z,k,N=e.mid,S=(0,v.$G)().t,C=(0,t.useState)(0),I=(0,c.Z)(C,2),F=I[0],M=I[1],L=(0,m.YD)(),w=(0,c.Z)(L,2),A=w[0],T=w[1],E=(0,t.useState)(1),B=(0,c.Z)(E,2),R=B[0],P=B[1],D=(0,t.useState)(!0),O=(0,c.Z)(D,2),G=O[0],Y=O[1],W=(0,t.useState)(!1),J=(0,c.Z)(W,2),z=J[0],V=J[1],U=(0,t.useState)(!0),q=(0,c.Z)(U,2),$=q[0],Q=q[1],ee=(0,t.useState)({student:"",issueList:[]}),te=(0,c.Z)(ee,2),oe=te[0],le=te[1],se=(0,_.QJ)({data:{sid:N,page:oe.student!==N?1:R,limit:10},skip:!N}),de=se.getMemberBooklist,ae=se.getMemberBookListRefetch;return(0,t.useEffect)((function(){T&&G&&P((function(e){return e+1}))}),[T,G]),(0,t.useEffect)((function(){N&&(Q(!0),ae())}),[R,N,ae]),(0,t.useEffect)((function(){var e,i,n,t,o;if(null!==de&&void 0!==de&&null!==(e=de.student)&&void 0!==e&&e.borrow){var l,s,d;if(oe.student===(null===de||void 0===de||null===(l=de.student)||void 0===l?void 0:l._id))z?(le((function(e){var i;return(0,y.Z)((0,y.Z)({},e),{},{issueList:(0,r.Z)(null===de||void 0===de||null===(i=de.student)||void 0===i?void 0:i.borrow)})})),V(!1)):le((function(e){var i,n,t;return(0,y.Z)((0,y.Z)({},e),{},{issueList:null===(i=(0,r.Z)(new Set(null===(n=[].concat((0,r.Z)(e.issueList),(0,r.Z)(null===de||void 0===de||null===(t=de.student)||void 0===t?void 0:t.borrow)))||void 0===n?void 0:n.map(JSON.stringify))))||void 0===i?void 0:i.map(JSON.parse)})}));else le({student:null===de||void 0===de||null===(s=de.student)||void 0===s?void 0:s._id,issueList:(0,r.Z)(null===de||void 0===de||null===(d=de.student)||void 0===d?void 0:d.borrow)});Q(!1)}else 0===(null===de||void 0===de||null===(i=de.student)||void 0===i||null===(n=i.borrow)||void 0===n?void 0:n.length)&&Q(!1);10===(null===de||void 0===de||null===(t=de.student)||void 0===t||null===(o=t.borrow)||void 0===o?void 0:o.length)?Y(!0):Y(!1)}),[null===de||void 0===de||null===(i=de.student)||void 0===i?void 0:i.borrow]),(0,b.jsxs)("div",{className:H.Z.memberdetails,children:[(0,b.jsxs)("div",{className:H.Z.memberdetailstop,children:[(0,b.jsx)("div",{className:H.Z.issuedBookItemMidleft,children:(0,b.jsx)("div",{className:H.Z.imgcontainer,children:(0,b.jsx)("img",{src:"1"!==(null===de||void 0===de||null===(n=de.student)||void 0===n?void 0:n.photoId)?"".concat(g.yI,"/").concat(null===de||void 0===de||null===(o=de.student)||void 0===o?void 0:o.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:""})})}),(0,b.jsxs)("div",{className:H.Z.issuedBookItemMidright,children:[(0,b.jsx)("h6",{children:"".concat(null===de||void 0===de||null===(l=de.student)||void 0===l?void 0:l.studentFirstName," ").concat(null!==de&&void 0!==de&&null!==(s=de.student)&&void 0!==s&&s.studentMiddleName?null===de||void 0===de||null===(d=de.student)||void 0===d?void 0:d.studentMiddleName:""," ").concat(null===de||void 0===de||null===(a=de.student)||void 0===a?void 0:a.studentLastName)}),(0,b.jsxs)("p",{children:[S("index_no")," : ",null===de||void 0===de||null===(u=de.student)||void 0===u?void 0:u.studentGRNO]})]})]}),(0,b.jsx)("div",{className:H.Z.tabs,children:(0,b.jsx)(K,{activeIndex:F,setActiveIndex:M})}),0===F&&(0,b.jsx)(X,{showingDataLoading:$,ref:A,borrowList:oe.issueList,member:{photoId:null===de||void 0===de||null===(f=de.student)||void 0===f?void 0:f.photoId,studentFirstName:null===de||void 0===de||null===(h=de.student)||void 0===h?void 0:h.studentFirstName,studentGRNO:null===de||void 0===de||null===(x=de.student)||void 0===x?void 0:x.studentGRNO,studentLastName:null===de||void 0===de||null===(j=de.student)||void 0===j?void 0:j.studentLastName,studentMiddleName:null===de||void 0===de||null===(p=de.student)||void 0===p?void 0:p.studentMiddleName,studentProfilePhoto:null===de||void 0===de||null===(Z=de.student)||void 0===Z?void 0:Z.studentProfilePhoto,_id:null===de||void 0===de||null===(k=de.student)||void 0===k?void 0:k._id},onRefetchWhenBookCollect:function(){P(1),V(!0),Q(!0),ae()}}),1===F&&(0,b.jsx)(ie,{mid:N}),2===F&&(0,b.jsx)(ne.Z,{mid:N})]})};var oe=function(){var e=(0,v.$G)().t,i=(0,s.v9)((function(e){return e.libraryChange.lid})),n=(0,t.useState)(""),o=(0,c.Z)(n,2),l=o[0],d=o[1],a=(0,m.YD)({skip:!l}),u=(0,c.Z)(a,2),h=u[0],x=u[1],g=(0,t.useState)([]),j=(0,c.Z)(g,2),Z=j[0],k=j[1],N=(0,t.useState)(1),y=(0,c.Z)(N,2),S=y[0],C=y[1],I=(0,t.useState)(!0),F=(0,c.Z)(I,2),M=F[0],L=F[1],w=(0,t.useState)(!0),A=(0,c.Z)(w,2),T=A[0],E=A[1],B=(0,t.useState)(""),R=(0,c.Z)(B,2),P=R[0],D=R[1],O=(0,_.I4)({data:{lid:i,page:S,limit:10,search:l},skip:!i}),G=O.getMemberslist,Y=O.getMembersListRefetch;(0,t.useEffect)((function(){x&&M&&C((function(e){return e+1}))}),[x,M]),(0,t.useEffect)((function(){i&&(E(!0),Y())}),[S,i,l,Y]),(0,t.useEffect)((function(){var e,i;null!==G&&void 0!==G&&G.members?(k(l?null===G||void 0===G?void 0:G.members:function(e){var i,n;return null===(i=(0,r.Z)(new Set(null===(n=[].concat((0,r.Z)(e),(0,r.Z)(null===G||void 0===G?void 0:G.members)))||void 0===n?void 0:n.map(JSON.stringify))))||void 0===i?void 0:i.map(JSON.parse)}),E(!1)):0===(null===G||void 0===G||null===(e=G.members)||void 0===e?void 0:e.length)&&E(!1),10===(null===G||void 0===G||null===(i=G.members)||void 0===i?void 0:i.length)?L(!0):L(!1)}),[null===G||void 0===G?void 0:G.members]);var W=(0,t.useCallback)((0,p.debounce)((function(e){return d(e)}),500),[]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:H.Z.searchContainerr,children:(0,b.jsxs)("div",{className:H.Z.searchContainer,children:[(0,b.jsx)("img",{alt:"",src:"/images/search-dept-icon.svg"}),(0,b.jsx)("input",{type:"text",placeholder:e("search-label"),onChange:function(e){return i=e.target.value,void W(i);var i}})]})}),(0,b.jsx)("div",{className:H.Z.remainingFees,children:(0,b.jsxs)("div",{className:P?"".concat(H.Z.completeApplicationSplit):"",children:[(0,b.jsx)("div",{className:P?"".concat(H.Z.remainingFeesBottom," ").concat(H.Z.half):H.Z.remainingFeesBottom,children:(0,b.jsxs)("div",{className:H.Z.itemsContainer,children:[null===Z||void 0===Z?void 0:Z.map((function(e,i){return(null===Z||void 0===Z?void 0:Z.length)===i+1?(0,b.jsx)("div",{ref:h,className:H.Z.limember,children:(0,b.jsx)(V,{member:e,setMid:D,mid:P,index:i+1})},i):(0,b.jsx)("div",{className:H.Z.limember,children:(0,b.jsx)(V,{member:e,setMid:D,mid:P,index:i+1})},i)})),T&&(0,b.jsx)(f.Z,{}),!T&&0===(null===Z||void 0===Z?void 0:Z.length)&&(0,b.jsx)("div",{className:H.Z.noData,children:(0,b.jsx)("img",{src:"/images/nodata.jpg",alt:""})})]})}),P&&(0,b.jsx)("div",{className:H.Z.itemsDetails,children:(0,b.jsx)(te,{mid:P})})]})})]})},le=n(47167),se=n(98094),de=n(34219),ae=n(47735),re=function(e){var i=e.title,n=e.onClose,t=e.onCollect,o=e.amount,l=(0,v.$G)().t;return(0,b.jsx)(C.Z,{onClose:n,children:(0,b.jsx)("div",{className:S.issue_modal,children:(0,b.jsxs)("div",{className:S.issueBookk,children:[(0,b.jsxs)("h6",{style:{textAlign:"center"},children:[null!==i&&void 0!==i?i:"",", "," ",l("rs"),". ",null!==o&&void 0!==o?o:0," "]}),(0,b.jsx)("button",{className:S.issuebtn,onClick:t,style:{marginTop:"8rem"},children:l("collect_fine")})]})})})},ce=function(e){var i,n,o,l,s,d,a,r,u,m,f,h,x,j,p,Z,N,y,S,C,F,M,L,w=e.studentFine,A=e.is_last,T=e.lid,E=e.onRefetch,B=(0,v.$G)().t,R=(0,t.useState)(!1),P=(0,c.Z)(R,2),D=P[0],O=P[1],G=(0,t.useState)(!1),Y=(0,c.Z)(G,2),W=Y[0],J=Y[1],z=(0,_.sl)(),H=(0,c.Z)(z,1)[0],V=function(){J((function(e){return!e}))};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:k.Z.issuedBookItem,style:{width:A?"100%":"49%",marginBottom:A?"0":"1rem"},children:[(0,b.jsxs)("div",{className:k.Z.issuedBookItemTop,children:[(0,b.jsx)("div",{className:k.Z.issuedBookItemTopleft,children:(0,b.jsx)("img",{className:k.Z.bookItemImg,src:null!==w&&void 0!==w&&null!==(i=w.book)&&void 0!==i&&i.photo?"".concat(g.yI,"/").concat(null===w||void 0===w||null===(n=w.book)||void 0===n?void 0:n.photo):"/images/defaultBook.png",alt:"book avatar",loading:"lazy"})}),(0,b.jsxs)("div",{className:k.Z.issuedBookItemTopright,children:[(0,b.jsx)("h6",{className:k.Z.title,children:(null===w||void 0===w||null===(o=w.book)||void 0===o||null===(l=o.bookName)||void 0===l?void 0:l.length)>=18?"".concat(null===w||void 0===w||null===(s=w.book)||void 0===s||null===(d=s.bookName)||void 0===d?void 0:d.match(/.{1,18}/g)[0]," ..."):null===w||void 0===w||null===(a=w.book)||void 0===a?void 0:a.bookName}),(0,b.jsxs)("p",{className:k.Z.author,children:[null===w||void 0===w||null===(r=w.book)||void 0===r?void 0:r.author," \xa0",(0,b.jsx)("span",{className:k.Z.authorLabel,children:B("author")})]}),(0,b.jsxs)("p",{className:k.Z.booklang,children:[" ",null===w||void 0===w||null===(u=w.book)||void 0===u?void 0:u.language]})]})]}),(0,b.jsxs)("div",{className:k.Z.issuedBookItemMid,children:[(0,b.jsx)("div",{className:k.Z.issuedBookItemMidleft,children:(0,b.jsx)("div",{className:k.Z.imgcontainer,children:(0,b.jsx)("img",{src:null!==w&&void 0!==w&&null!==(m=w.student)&&void 0!==m&&m.studentProfilePhoto?"".concat(g.yI,"/").concat(null===w||void 0===w||null===(f=w.student)||void 0===f?void 0:f.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"book avatar",loading:"lazy"})})}),(0,b.jsxs)("div",{className:k.Z.issuedBookItemMidright,children:[(0,b.jsxs)("h6",{children:[" ","".concat(null!==(h=null===w||void 0===w||null===(x=w.student)||void 0===x?void 0:x.studentFirstName)&&void 0!==h?h:""," ").concat(null!==(j=null===w||void 0===w||null===(p=w.student)||void 0===p?void 0:p.studentMiddleName)&&void 0!==j?j:""," ").concat(null!==(Z=null===w||void 0===w||null===(N=w.student)||void 0===N?void 0:N.studentLastName)&&void 0!==Z?Z:"")]}),(0,b.jsxs)("p",{children:[B("gr_no")," ",null!==(y=null===w||void 0===w||null===(S=w.student)||void 0===S?void 0:S.studentGRNO)&&void 0!==y?y:""," "]})]})]}),(0,b.jsxs)("div",{className:k.Z.issuedBookItemBottom,children:[(0,b.jsxs)("div",{className:k.Z.issuedBookItemBottomLeft,children:[(0,b.jsxs)("p",{children:[null!==(C=null===w||void 0===w?void 0:w.fine_type)&&void 0!==C?C:""," Book Fine Amount"]}),(0,b.jsxs)("h6",{children:[B("rs"),". ",null!==(F=null===w||void 0===w?void 0:w.fine_charge)&&void 0!==F?F:0]})]}),"Paid"===(null===w||void 0===w?void 0:w.status)?(0,b.jsx)("div",{className:k.Z.issuedBookItemBottomLeft,children:(0,b.jsx)(ae.Z,{rid:null===w||void 0===w||null===(M=w.fee_receipt)||void 0===M?void 0:M._id})}):(0,b.jsx)("div",{className:k.Z.collectbtn,onClick:V,children:B("collect_fine")})]}),D&&(0,b.jsx)(I.Z,{})]}),W&&(0,b.jsx)(re,{onCollect:function(){var e,i,n,t,o;null!==w&&void 0!==w&&null!==(e=w.book)&&void 0!==e&&e._id&&null!==w&&void 0!==w&&null!==(i=w.student)&&void 0!==i&&i._id&&T&&(V(),O((function(e){return!e})),H({lid:T,sid:null===w||void 0===w||null===(n=w.student)||void 0===n?void 0:n._id,bid:null===w||void 0===w||null===(t=w.book)||void 0===t?void 0:t._id,collectData:{amount:null!==(o=null===w||void 0===w?void 0:w.fine_charge)&&void 0!==o?o:0,prid:null===w||void 0===w?void 0:w._id}}).then((function(){E(),O((function(e){return!e}))})).catch({}))},onClose:V,title:"".concat(null!==(L=null===w||void 0===w?void 0:w.fine_type)&&void 0!==L?L:""," Book Fine Amount"),amount:null===w||void 0===w?void 0:w.fine_charge})]})},ue=function(e){var i=e.lid,n=(0,t.useState)(!0),o=(0,c.Z)(n,2),l=o[0],s=o[1],d=(0,t.useState)(1),a=(0,c.Z)(d,2),u=a[0],v=a[1],h=(0,m.YD)(),x=(0,c.Z)(h,2),g=x[0],j=x[1],p=(0,t.useState)([]),Z=(0,c.Z)(p,2),k=Z[0],N=Z[1],y=(0,t.useState)(!0),S=(0,c.Z)(y,2),C=S[0],I=S[1],F=(0,t.useState)(!1),M=(0,c.Z)(F,2),L=M[0],w=M[1],A=(0,_.xK)({data:{lid:i,page:u,limit:10,flow:"Remaining"},skip:!i}),T=A.libraryFineCharge,E=A.libraryFineChargeRefetch;(0,t.useEffect)((function(){i&&(I(!0),E())}),[u,i,E]),(0,t.useEffect)((function(){j&&l&&v((function(e){return e+1}))}),[j,l]),(0,t.useEffect)((function(){var e,i;L?(N(null===T||void 0===T?void 0:T.all_student),w(!1),I(!1)):null!==T&&void 0!==T&&T.all_student?(N((function(e){return(0,r.Z)(new Set([].concat((0,r.Z)(e),(0,r.Z)(null===T||void 0===T?void 0:T.all_student)).map(JSON.stringify))).map(JSON.parse)})),I(!1)):0===(null===T||void 0===T||null===(i=T.all_student)||void 0===i?void 0:i.length)&&I(!1);10===(null===T||void 0===T||null===(e=T.all_student)||void 0===e?void 0:e.length)?s(!0):s(!1)}),[null===T||void 0===T?void 0:T.all_student]);var B=function(){v(1),w(!0),E()};return(0,b.jsx)("div",{className:z.Z.library_out_container,children:(0,b.jsxs)("div",{className:z.Z.data_container,children:[null===k||void 0===k?void 0:k.map((function(e,n){return(null===k||void 0===k?void 0:k.length)===n+1?(0,b.jsx)("div",{ref:g,style:{width:"49%",marginBottom:"1rem"},children:(0,b.jsx)(ce,{studentFine:e,is_last:!0,lid:i,onRefetch:B})},null===e||void 0===e?void 0:e._id):(0,b.jsx)(ce,{studentFine:e,lid:i,onRefetch:B},null===e||void 0===e?void 0:e._id)})),!C&&!k.length&&(0,b.jsx)(de.Z,{customStyleContainer:{marginTop:"9rem"},title:"No outstanding records found."}),C&&(0,b.jsx)(f.Z,{status:"white"})]})})},ve=function(e){var i=e.lid,n=(0,t.useState)(!0),o=(0,c.Z)(n,2),l=o[0],s=o[1],d=(0,t.useState)(1),a=(0,c.Z)(d,2),u=a[0],v=a[1],h=(0,m.YD)(),x=(0,c.Z)(h,2),g=x[0],j=x[1],p=(0,t.useState)([]),Z=(0,c.Z)(p,2),k=Z[0],N=Z[1],y=(0,t.useState)(!0),S=(0,c.Z)(y,2),C=S[0],I=S[1],F=(0,_.xK)({data:{lid:i,page:u,limit:10,flow:"Paid"},skip:!i}),M=F.libraryFineCharge,L=F.libraryFineChargeRefetch;return(0,t.useEffect)((function(){i&&(I(!0),L())}),[u,i,L]),(0,t.useEffect)((function(){j&&l&&v((function(e){return e+1}))}),[j,l]),(0,t.useEffect)((function(){var e,i;null!==M&&void 0!==M&&M.all_student?(N(1===u?null===M||void 0===M?void 0:M.all_student:function(e){return(0,r.Z)(new Set([].concat((0,r.Z)(e),(0,r.Z)(null===M||void 0===M?void 0:M.all_student)).map(JSON.stringify))).map(JSON.parse)}),I(!1)):0===(null===M||void 0===M||null===(e=M.all_student)||void 0===e?void 0:e.length)&&I(!1),10===(null===M||void 0===M||null===(i=M.all_student)||void 0===i?void 0:i.length)?s(!0):s(!1)}),[null===M||void 0===M?void 0:M.all_student]),(0,b.jsx)("div",{className:z.Z.library_out_container,children:(0,b.jsxs)("div",{className:z.Z.data_container,children:[null===k||void 0===k?void 0:k.map((function(e,i){return(null===k||void 0===k?void 0:k.length)===i+1?(0,b.jsx)("div",{ref:g,style:{width:"49%"},children:(0,b.jsx)(ce,{studentFine:e,is_last:!0})},null===e||void 0===e?void 0:e._id):(0,b.jsx)(ce,{studentFine:e},null===e||void 0===e?void 0:e._id)})),!C&&!k.length&&(0,b.jsx)(de.Z,{customStyleContainer:{marginTop:"9rem"},title:"No received records found."}),C&&(0,b.jsx)(f.Z,{status:"white"})]})})},me=function(e){var i,n,t,o,s,d,a=e.carryParentState,r=(0,v.$G)().t,c=(0,l.TH)(),u=[{name:r("outstanding"),id:0,url:"member/library?a=charge"},{name:r("received"),id:1,url:"member/library?a=charge&collect"}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h6",{className:z.Z.fine_heading,children:r("fine_history")}),(0,b.jsx)(se.Z,{customStyle:{width:"100%",marginTop:"0.2rem"}}),(0,b.jsx)(le.Z,{tabList:u,showAs:!0,carryParentState:a,activeIndexTab:"charge"===(null===(i=c.search)||void 0===i?void 0:i.substring(3))?0:1,customStyleLink:{width:"50%"},customStyleTab:{width:"100%"}}),(0,b.jsx)(se.Z,{customStyle:{width:"100%",marginBottom:"1rem"}}),"charge"===(null===(n=c.search)||void 0===n?void 0:n.substring(3))?(0,b.jsx)(ue,{lid:null===(t=c.state)||void 0===t||null===(o=t.onClickValue)||void 0===o?void 0:o._id}):(0,b.jsx)(ve,{lid:null===(s=c.state)||void 0===s||null===(d=s.onClickValue)||void 0===d?void 0:d._id})]})},_e=n(29407),fe=n(98684),he=n(21348),xe=n(65543),ge=n(48293),be=n(16925),je=n(90904),pe=n(74771),Ze=n(93638),ke=n(55336),Ne=n(43997),ye=function(e){var i=e.onClose,n=e.openFilter,o=e.lid,l=(0,v.$G)().t,s=(0,t.useState)(!1),d=(0,c.Z)(s,2),a=d[0],r=d[1],u=(0,t.useState)({from:"",to:""}),m=(0,c.Z)(u,2),f=m[0],h=m[1],x=(0,_._s)(),g=(0,c.Z)(x,1)[0],j=(0,_.Zj)(),p=(0,c.Z)(j,1)[0],Z=(0,_.a8)(),k=(0,c.Z)(Z,1)[0],N=(0,_.Nd)(),S=(0,c.Z)(N,1)[0];return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(ge.Z,{onClose:i,children:(0,b.jsxs)("div",{className:be.Z.modal_container,children:[(0,b.jsx)(he.Z,{children:(0,b.jsxs)("div",{className:be.Z.modal_container_outer_header,children:[(0,b.jsx)("div",{className:be.Z.modal_container_header,children:(0,b.jsx)("h6",{children:l("export_library_excel")})}),(0,b.jsx)("img",{src:"".concat(fe.J7,"/close.svg"),alt:"close icon",onClick:i})]})}),(0,b.jsx)(je.Z,{}),(0,b.jsxs)(he.Z,{customStyle:{paddingTop:"0"},children:[(0,b.jsx)(pe.Z,{name:"from",label:l("o__from"),placeholder:l("o__please_select_date"),onChange:function(e){h((function(i){return(0,y.Z)((0,y.Z)({},i),{},{from:(0,Ne.jh)(e)})}))},value:f.from}),(0,b.jsx)(pe.Z,{name:"to",label:l("o__to"),placeholder:l("o__please_select_date"),onChange:function(e){h((function(i){return(0,y.Z)((0,y.Z)({},i),{},{to:(0,Ne.jh)(e)})}))},value:f.to}),(0,b.jsx)(Ze.Z,{label:"export",onAction:function(){if(o)if("BOOK"===n)o&&(r((function(e){return!e})),g({lid:o,from:null!==f&&void 0!==f&&f.from?(0,Ne.O_)(f.from):"",to:null!==f&&void 0!==f&&f.to?(0,Ne.O_)(f.to):""}).then((function(){r((function(e){return!e})),i()})).catch({}));else if("ISSUE"===n)o&&null!==f&&void 0!==f&&f.from&&null!==f&&void 0!==f&&f.to&&(r((function(e){return!e})),k({lid:o,from:null!==f&&void 0!==f&&f.from?(0,Ne.O_)(f.from):"",to:null!==f&&void 0!==f&&f.to?(0,Ne.O_)(f.to):""}).then((function(){r((function(e){return!e})),i()})).catch({}));else if("COLLECT"===n)o&&null!==f&&void 0!==f&&f.from&&null!==f&&void 0!==f&&f.to&&(r((function(e){return!e})),p({lid:o,from:null!==f&&void 0!==f&&f.from?(0,Ne.O_)(f.from):"",to:null!==f&&void 0!==f&&f.to?(0,Ne.O_)(f.to):""}).then((function(){r((function(e){return!e})),i()})).catch({}));else if("ENTRY_LOG"===n)o&&null!==f&&void 0!==f&&f.from&&null!==f&&void 0!==f&&f.to&&(r((function(e){return!e})),S({lid:o,from:null!==f&&void 0!==f&&f.from?(0,Ne.O_)(f.from):"",to:null!==f&&void 0!==f&&f.to?(0,Ne.O_)(f.to):""}).then((function(){r((function(e){return!e})),i()})).catch({}));else{if("REVIEW"!==n)return null;o&&null!==f&&void 0!==f&&f.from&&null!==f&&void 0!==f&&f.to&&(r((function(e){return!e})),S({lid:o,from:null!==f&&void 0!==f&&f.from?(0,Ne.O_)(f.from):"",to:null!==f&&void 0!==f&&f.to?(0,Ne.O_)(f.to):""}).then((function(){r((function(e){return!e})),i()})).catch({}))}}})]}),a&&(0,b.jsx)(ke.Z,{})]})})})},Se=function(e){var i=e.lid,n=(0,v.$G)().t,o=(0,t.useState)(""),l=(0,c.Z)(o,2),s=l[0],d=l[1],a=(0,t.useState)(!1),u=(0,c.Z)(a,2),h=u[0],g=u[1],j=(0,m.YD)(),p=(0,c.Z)(j,2),Z=p[0],k=p[1],N=(0,t.useState)(1),y=(0,c.Z)(N,2),S=y[0],C=y[1],F=(0,t.useState)(!0),M=(0,c.Z)(F,2),L=M[0],w=M[1],A=(0,t.useState)(!0),T=(0,c.Z)(A,2),E=T[0],B=T[1],R=(0,t.useState)([]),P=(0,c.Z)(R,2),D=P[0],O=P[1],G=(0,_.Yv)(),Y=(0,c.Z)(G,1)[0],W=(0,_.oW)({data:{lid:i,page:S,limit:10},skip:!i}),J=W.libraryAllExcelExport,z=W.libraryAllExcelExportRefetch,H=(0,xe.u)().scrollToTop;(0,t.useEffect)((function(){H()}),[]),(0,t.useEffect)((function(){i&&(B(!0),z())}),[i,S,z]),(0,t.useEffect)((function(){k&&L&&C((function(e){return e+1}))}),[k,L]),(0,t.useEffect)((function(){var e,i;null!==J&&void 0!==J&&J.excel_arr?(O((function(e){var i,n;return null===(i=(0,r.Z)(new Set(null===(n=[].concat((0,r.Z)(e),(0,r.Z)(null===J||void 0===J?void 0:J.excel_arr)))||void 0===n?void 0:n.map(JSON.stringify))))||void 0===i?void 0:i.map(JSON.parse)})),B(!1)):0===(null===J||void 0===J||null===(e=J.excel_arr)||void 0===e?void 0:e.length)&&B(!1),10===(null===J||void 0===J||null===(i=J.excel_arr)||void 0===i?void 0:i.length)?w(!0):w(!1)}),[null===J||void 0===J?void 0:J.excel_arr]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(he.Z,{children:[(0,b.jsxs)("div",{className:_e.Z.refund_container_title,style:{justifyContent:"space-between"},children:[(0,b.jsx)("h6",{children:n("data_export")}),(0,b.jsxs)("div",{className:_e.Z.both_filter,children:[(0,b.jsxs)("div",{onClick:function(){d("BOOK")},className:_e.Z.both_filter_with_name,children:[(0,b.jsx)("img",{src:"".concat(fe.J7,"/filter.svg"),alt:"filter icon"}),(0,b.jsx)("h6",{children:n("books")})]}),(0,b.jsxs)("div",{onClick:function(){d("COLLECT")},className:_e.Z.both_filter_with_name,children:[(0,b.jsx)("img",{src:"".concat(fe.J7,"/filter.svg"),alt:"filter icon"}),(0,b.jsx)("h6",{children:n("collected")})]}),(0,b.jsxs)("div",{onClick:function(){d("ISSUE")},className:_e.Z.both_filter_with_name,children:[(0,b.jsx)("img",{src:"".concat(fe.J7,"/filter.svg"),alt:"filter icon"}),(0,b.jsx)("h6",{children:n("issued")})]}),(0,b.jsxs)("div",{onClick:function(){i&&(g((function(e){return!e})),Y({lid:i}).then((function(){g((function(e){return!e}))})).catch({}))},className:_e.Z.both_filter_with_name,children:[(0,b.jsx)("img",{src:"".concat(fe.J7,"/filter.svg"),alt:"filter icon"}),(0,b.jsx)("h6",{children:n("members")})]}),(0,b.jsxs)("div",{onClick:function(){d("ENTRY_LOG")},className:_e.Z.both_filter_with_name,children:[(0,b.jsx)("img",{src:"".concat(fe.J7,"/filter.svg"),alt:"filter icon"}),(0,b.jsx)("h6",{children:n("entry_logs")})]}),(0,b.jsxs)("div",{onClick:function(){d("REVIEW")},className:_e.Z.both_filter_with_name,children:[(0,b.jsx)("img",{src:"".concat(fe.J7,"/filter.svg"),alt:"filter icon"}),(0,b.jsx)("h6",{children:n("book_review")})]})]})]}),(0,b.jsx)(se.Z,{customStyle:{width:"100%",marginTop:"0.2rem"}}),(0,b.jsxs)("div",{className:_e.Z.refund_list,children:[null===D||void 0===D?void 0:D.map((function(e,i){var n,t;return(null===D||void 0===D?void 0:D.length)===i+1?(0,b.jsxs)("a",{ref:Z,className:_e.Z.export_card,title:"Download File",href:"https://d3dqpu54js2vfl.cloudfront.net/".concat(null===e||void 0===e?void 0:e.excel_file),target:"_blank",rel:"noopener noreferrer",children:[(0,b.jsx)("img",{src:"".concat(fe.J7,"/xsxl.svg"),alt:"excel icon"}),(0,b.jsxs)("section",{className:_e.Z.export_card_text,children:[(0,b.jsx)("h6",{children:null!==(n=null===e||void 0===e?void 0:e.excel_file_name)&&void 0!==n?n:""}),(0,b.jsxs)("div",{className:_e.Z.export_card_date,children:[(0,b.jsx)("h6",{children:x()(null===e||void 0===e?void 0:e.created_at).format("DD MMM yyy")}),(0,b.jsx)("h6",{children:x()(null===e||void 0===e?void 0:e.created_at).format("LT")})]})]})]},null===e||void 0===e?void 0:e._id):(0,b.jsxs)("a",{className:_e.Z.export_card,title:"Download File",href:"https://d3dqpu54js2vfl.cloudfront.net/".concat(null===e||void 0===e?void 0:e.excel_file),target:"_blank",rel:"noopener noreferrer",children:[(0,b.jsx)("img",{src:"".concat(fe.J7,"/xsxl.svg"),alt:"excel icon"}),(0,b.jsxs)("section",{className:_e.Z.export_card_text,children:[(0,b.jsx)("h6",{children:null!==(t=null===e||void 0===e?void 0:e.excel_file_name)&&void 0!==t?t:""}),(0,b.jsxs)("div",{className:_e.Z.export_card_date,children:[(0,b.jsx)("h6",{children:x()(null===e||void 0===e?void 0:e.created_at).format("DD MMM yyy")}),(0,b.jsx)("h6",{children:x()(null===e||void 0===e?void 0:e.created_at).format("LT")})]})]})]},null===e||void 0===e?void 0:e._id)})),E&&(0,b.jsx)(f.Z,{})]})]}),s?(0,b.jsx)(ye,{onClose:function(){d("")},openFilter:s,lid:i}):null,h&&(0,b.jsx)(I.Z,{})]})},Ce=n(51561),Ie=n(97655),Fe=function(e){var i=e.lid,n=e.timing,o=(0,v.$G)().t,l=(0,t.useState)({from:"",to:""}),s=(0,c.Z)(l,2),d=s[0],a=s[1],r=(0,t.useState)(!1),u=(0,c.Z)(r,2),m=u[0],f=u[1],h=(0,_.bi)(),x=(0,c.Z)(h,1)[0];(0,t.useEffect)((function(){n&&a((function(e){var i,t;return(0,y.Z)((0,y.Z)({},e),{},{from:null!==(i=null===n||void 0===n?void 0:n.from)&&void 0!==i?i:"",to:null!==(t=null===n||void 0===n?void 0:n.to)&&void 0!==t?t:""})}))}),[n]);var g=function(e){a((function(i){return(0,y.Z)((0,y.Z)({},i),{},(0,E.Z)({},e.target.name,e.target.value))}))};return(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"2rem",padding:"1rem"},children:[(0,b.jsx)(Ie.Z,{labelText:o("from"),placeholder:"00:00",name:"from",value:Le(null===d||void 0===d?void 0:d.from),type:"time",onChange:g,customStyleContainer:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:"1rem"}}),(0,b.jsx)(Ie.Z,{labelText:o("to"),placeholder:"00:00",name:"to",value:Le(null===d||void 0===d?void 0:d.to),type:"time",onChange:g,customStyleContainer:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:"1rem"}}),(0,b.jsx)(Ze.Z,{onAction:function(){i&&(f((function(e){return!e})),x({lid:i,libraryTime:{timing:{from:Me(null===d||void 0===d?void 0:d.from),to:Me(null===d||void 0===d?void 0:d.to)}}}).then((function(){f((function(e){return!e}))})).catch({}))},label:o("update"),customStyle:{margin:"0"}}),m&&(0,b.jsx)(I.Z,{})]})},Me=function(e){var i=null===e||void 0===e?void 0:e.split(":"),n="";i[0]>12?(n="pm",i[0]-=12):i[0]<12?(n="am",0===i[0]&&(i[0]=12)):n="pm";var t=i[0]>9?i[0]:"0".concat(+i[0]),o="".concat(t,":").concat(i[1]," ").concat(n);return null===o||void 0===o?void 0:o.substring(0,8)},Le=function(e){var i,n=null===e||void 0===e?void 0:e.split(" "),t=null===n||void 0===n||null===(i=n[0])||void 0===i?void 0:i.split(":"),o="";return o="Pm"===(null===n||void 0===n?void 0:n[1])?12===+(null===t||void 0===t?void 0:t[0])?null===t||void 0===t?void 0:t[0]:+(null===t||void 0===t?void 0:t[0])+12:null===t||void 0===t?void 0:t[0],"".concat(o,":").concat(null===t||void 0===t?void 0:t[1])},we=function(e){var i,o,l,s=e.lid,d=(0,v.$G)().t,a=(0,t.useState)(!1),r=(0,c.Z)(a,2),u=r[0],m=r[1],f=(0,t.useState)({msg:"",run:!1}),h=(0,c.Z)(f,2),x=h[0],g=h[1],j=(0,_.Fy)(),p=(0,c.Z)(j,1)[0],Z=(0,_.B6)(),k=(0,c.Z)(Z,1)[0],N=(0,_.x5)(),y=(0,c.Z)(N,1)[0],S=(0,_.zz)(),C=(0,c.Z)(S,1)[0],F=(0,_.ar)(),M=(0,c.Z)(F,1)[0],L=(0,_.yX)({lid:s,skip:!s}),w=L.getLibraryDetail,A=L.getLibraryDetailRefetch;(0,t.useEffect)((function(){s&&A()}),[s,A]);var T=function(e){s&&(m((function(e){return!e})),p({lid:s,flow:e}).then((function(e){var i;g({msg:null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.message,run:!0}),m((function(e){return!e}))})))};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h6",{className:z.Z.fine_heading,children:d("qr_code")}),(0,b.jsx)(se.Z,{customStyle:{width:"100%",marginTop:"0.2rem"}}),(0,b.jsxs)("div",{className:z.Z.edn,children:[(0,b.jsx)("div",{className:z.Z.newBtn,onClick:function(){return T("STUDENT")},children:d("student_qr")}),(0,b.jsx)("div",{className:z.Z.newBtn,onClick:function(){return T("STAFF")},children:d("staff_qr")}),(0,b.jsx)("div",{className:z.Z.newBtn,onClick:function(){s&&(m((function(e){return!e})),k({lid:s}).then((function(e){var i;g({msg:null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.message,run:!0}),m((function(e){return!e}))})))},children:d("book_qr")}),(0,b.jsx)("div",{className:z.Z.newBtn,onClick:function(){s&&(m((function(e){return!e})),M({lid:s}).then((function(e){var i,t;if(m((function(e){return!e})),(null===e||void 0===e||null===(i=e.data)||void 0===i||null===(t=i.book_qr)||void 0===t?void 0:t.length)>0){var o;g({msg:"All Book Qr code pdf in process. It will take some time.",run:!0});var l=new Worker(new URL(n.p+n.u(1813),n.b));l.postMessage({book_qr:null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.book_qr}),l.onmessage=function(e){e&&(window.open(e.data,"_blank"),l.terminate())},g({msg:"All Book Qr code pdf  is complete",run:!0})}})))},children:d("download_book_qr")})]}),(0,b.jsxs)("div",{style:{marginBlock:"1rem"},children:[(0,b.jsxs)("div",{className:z.Z.iohc_card_inner,children:[(0,b.jsxs)("div",{className:z.Z.iohc_card_inner,style:{flexDirection:"column",alignItems:"flex-start"},children:[(0,b.jsx)("h6",{className:z.Z.fine_heading,style:{marginBottom:"1rem"},children:d("library_qr_code")}),null!==w&&void 0!==w&&null!==(i=w.library)&&void 0!==i&&i.qr_code?(0,b.jsx)("img",{src:"".concat(null===w||void 0===w||null===(o=w.library)||void 0===o?void 0:o.qr_code),alt:"qr icon",className:z.Z.qr_image}):null]}),(0,b.jsxs)("div",{className:z.Z.iohc_card_inner,style:{marginRight:"1rem"},children:[(0,b.jsx)("div",{className:z.Z.newBtn,onClick:function(){s&&(m((function(e){return!e})),y({lid:s}).then((function(e){var i,t;if(m((function(e){return!e})),(null===e||void 0===e||null===(i=e.data)||void 0===i||null===(t=i.all_staff)||void 0===t?void 0:t.length)>0){var o;g({msg:"All Staff Qr code pdf in process. It will take some time.",run:!0});var l=new Worker(new URL(n.p+n.u(861),n.b));l.postMessage({all_staff:null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.all_staff,isType:"STAFF"}),l.onmessage=function(e){e&&(window.open(e.data,"_blank"),l.terminate())},g({msg:"All Staff Qr code pdf  is complete",run:!0})}})))},style:{width:"auto"},children:d("download_staff_qr")}),(0,b.jsx)("div",{className:z.Z.newBtn,onClick:function(){s&&(m((function(e){return!e})),C({lid:s}).then((function(e){var i,t;if(m((function(e){return!e})),(null===e||void 0===e||null===(i=e.data)||void 0===i||null===(t=i.all_student)||void 0===t?void 0:t.length)>0){var o;g({msg:"All Student Qr code pdf in process. It will take some time.",run:!0});var l=new Worker(new URL(n.p+n.u(3756),n.b));l.postMessage({all_student:null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.all_student,isType:"STUDENT"}),l.onmessage=function(e){e&&(window.open(e.data,"_blank"),l.terminate())},g({msg:"All Student Qr code pdf  is complete",run:!0})}})))},style:{width:"auto"},children:d("download_student_qr")})]})]}),(0,b.jsx)(Fe,{lid:s,timing:null===w||void 0===w||null===(l=w.library)||void 0===l?void 0:l.timing})]}),x.run&&(0,b.jsx)(Ce.Ch,{msg:x.msg,run:x.run,setRun:function(){return g({msg:"",run:!1})},postiton:"bottom",type:"success"}),u&&(0,b.jsx)(I.Z,{})]})},Ae=function(e){var i,n,t,o,l,s,d,a,r,c,u,m=e.history,_=(0,v.$G)().t;return(0,b.jsxs)("div",{className:z.Z.iohc_card,children:[(0,b.jsx)("img",{src:null!==m&&void 0!==m&&null!==(i=m.student)&&void 0!==i&&i.studentProfilePhoto?"".concat(g.yI,"/").concat(null===m||void 0===m||null===(n=m.student)||void 0===n?void 0:n.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",loading:"lazy",alt:"icons",style:{width:"3.5rem",height:"3.5rem",borderRadius:"6px"}}),(0,b.jsxs)("div",{className:z.Z.iohc_card_container,children:[(0,b.jsxs)("div",{className:z.Z.iohc_card_inner,children:[(0,b.jsx)("h6",{style:{fontWeight:"500"},children:"".concat(null!==(t=null===m||void 0===m||null===(o=m.student)||void 0===o?void 0:o.studentFirstName)&&void 0!==t?t:""," ").concat(null!==(l=null===m||void 0===m||null===(s=m.student)||void 0===s?void 0:s.studentMiddleName)&&void 0!==l?l:""," ").concat(null!==(d=null===m||void 0===m||null===(a=m.student)||void 0===a?void 0:a.studentLastName)&&void 0!==d?d:"")}),(0,b.jsxs)("p",{children:[_("in_time")," "," ",x()(null===m||void 0===m?void 0:m.created_at).format("DD/MM/YYYY"),", ",null===m||void 0===m?void 0:m.in_time]})]}),(0,b.jsxs)("div",{className:z.Z.iohc_card_inner,children:[(0,b.jsxs)("h6",{style:{fontWeight:"500"},children:[(0,b.jsxs)("span",{style:{fontWeight:"400"},children:[_("gr_number")," "," "]}),null!==(r=null===m||void 0===m||null===(c=m.student)||void 0===c?void 0:c.studentGRNO)&&void 0!==r?r:""]}),"Yes"===(null===m||void 0===m?void 0:m.is_valid)?(0,b.jsxs)("p",{children:[_("out_time")," "," ",x()(null===m||void 0===m?void 0:m.created_at).format("DD/MM/YYYY"),", ",null===m||void 0===m?void 0:m.out_time]}):null]}),"Yes"===(null===m||void 0===m?void 0:m.is_valid)?(0,b.jsxs)("div",{className:z.Z.iohc_card_inner,children:[(0,b.jsx)("h6",{}),(0,b.jsxs)("p",{children:[_("total_time")," "," "," ",null!==(u=null===m||void 0===m?void 0:m.total_spent_time)&&void 0!==u?u:""," "," hr"]})]}):null]})]})},Te=function(e){var i,n=e.lid,o=(0,v.$G)().t,l=(0,m.YD)(),s=(0,c.Z)(l,2),d=s[0],a=s[1],u=(0,t.useState)(1),h=(0,c.Z)(u,2),x=h[0],g=h[1],j=(0,t.useState)(!0),p=(0,c.Z)(j,2),Z=p[0],k=p[1],N=(0,t.useState)(!0),y=(0,c.Z)(N,2),S=y[0],C=y[1],I=(0,t.useState)([]),F=(0,c.Z)(I,2),M=F[0],L=F[1],w=(0,_.Zd)({data:{lid:n,page:x,limit:10},skip:!n}),A=w.libraryGetInOutHistory,T=w.libraryGetInOutHistoryRefetch;return(0,t.useEffect)((function(){a&&Z&&g((function(e){return e+1}))}),[a,Z]),(0,t.useEffect)((function(){n&&(C(!0),T())}),[x,n,T]),(0,t.useEffect)((function(){var e,i;null!==A&&void 0!==A&&A.history?x>1?(L((function(e){var i,n;return null===(i=(0,r.Z)(new Set(null===(n=[].concat((0,r.Z)(e),(0,r.Z)(null===A||void 0===A?void 0:A.history)))||void 0===n?void 0:n.map(JSON.stringify))))||void 0===i?void 0:i.map(JSON.parse)})),C(!1)):(L(null===A||void 0===A?void 0:A.history),C(!1)):0===(null===A||void 0===A||null===(e=A.history)||void 0===e?void 0:e.length)&&C(!1),10===(null===A||void 0===A||null===(i=A.history)||void 0===i?void 0:i.length)?k(!0):k(!1)}),[null===A||void 0===A?void 0:A.history]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h6",{className:z.Z.fine_heading,children:o("logs")}),(0,b.jsx)(se.Z,{customStyle:{width:"100%",marginTop:"0.2rem"}}),(0,b.jsxs)("div",{style:{padding:"1rem"},children:[null===M||void 0===M?void 0:M.map((function(e,i){return(null===M||void 0===M?void 0:M.length)===i+1?(0,b.jsx)("div",{ref:d,style:{width:"100%"},children:(0,b.jsx)(Ae,{history:e})},null===e||void 0===e?void 0:e._id):(0,b.jsx)(Ae,{history:e},null===e||void 0===e?void 0:e._id)})),S&&(0,b.jsx)(f.Z,{}),!S&&0===(null===A||void 0===A||null===(i=A.history)||void 0===i?void 0:i.length)&&(0,b.jsx)("div",{className:z.Z.noData,children:(0,b.jsx)("img",{src:"/images/nodata.jpg",style:{width:"100%"},alt:""})})]})]})},Ee=function(e){var i,n,t,o,s=e.history,d=(0,v.$G)().t,a=(0,l.s0)(),r=(0,l.TH)(),c=(0,l.UO)(),u=function(e,i){a("/q/".concat(c.username,"/member/library?a=stocktake-detail"),{state:(0,y.Z)((0,y.Z)({},r.state),{},{stid:null===s||void 0===s?void 0:s._id,flow:null!==e&&void 0!==e?e:"",count:i})})};return(0,b.jsxs)("div",{className:z.Z.iohc_card,children:[(0,b.jsx)("img",{src:"/images/member_tab/subject/subject-daily-update-icon.svg",alt:"icons"}),(0,b.jsxs)("div",{className:z.Z.iohc_card_container,children:[(0,b.jsx)("div",{className:z.Z.iohc_card_inner,children:(0,b.jsxs)("h6",{style:{fontWeight:"500"},children:[x()(null===s||void 0===s?void 0:s.created_at).format("DD/MM/YYYY"),", ",x()(null===s||void 0===s?void 0:s.created_at).format("LT")]})}),(0,b.jsxs)("div",{className:z.Z.iohc_btn,children:[(0,b.jsxs)("h6",{onClick:function(){return u("book_isssue",null===s||void 0===s?void 0:s.book_isssue_count)},children:[d("book_issue"),null!==(i=null===s||void 0===s?void 0:s.book_isssue_count)&&void 0!==i?i:0]}),(0,b.jsxs)("h6",{onClick:function(){return u("book_lost",null===s||void 0===s?void 0:s.book_lost_count)},children:[d("book_lost"),null!==(n=null===s||void 0===s?void 0:s.book_lost_count)&&void 0!==n?n:0]}),(0,b.jsxs)("h6",{onClick:function(){return u("book_at_library",null===s||void 0===s?void 0:s.book_at_library_count)},children:[d("book_at_library"),null!==(t=null===s||void 0===s?void 0:s.book_at_library_count)&&void 0!==t?t:0]}),(0,b.jsxs)("h6",{onClick:function(){return u("book_missing",null===s||void 0===s?void 0:s.book_missing_count)},children:[d("book_missing"),null!==(o=null===s||void 0===s?void 0:s.book_missing_count)&&void 0!==o?o:0]})]})]})]})},Be=function(e){var i,n=e.lid,o=(0,v.$G)().t,l=(0,m.YD)(),s=(0,c.Z)(l,2),d=s[0],a=s[1],u=(0,t.useState)(1),h=(0,c.Z)(u,2),x=h[0],g=h[1],j=(0,t.useState)(!0),p=(0,c.Z)(j,2),Z=p[0],k=p[1],N=(0,t.useState)(!0),y=(0,c.Z)(N,2),S=y[0],C=y[1],I=(0,t.useState)([]),F=(0,c.Z)(I,2),M=F[0],L=F[1],w=(0,_.JH)({data:{lid:n,page:x,limit:10},skip:!n}),A=w.libraryGetStocktakeHistory,T=w.libraryGetStocktakeHistoryRefetch;return(0,t.useEffect)((function(){a&&Z&&g((function(e){return e+1}))}),[a,Z]),(0,t.useEffect)((function(){n&&(C(!0),T())}),[x,n,T]),(0,t.useEffect)((function(){var e,i;null!==A&&void 0!==A&&A.stocktake?x>1?(L((function(e){var i,n;return null===(i=(0,r.Z)(new Set(null===(n=[].concat((0,r.Z)(e),(0,r.Z)(null===A||void 0===A?void 0:A.stocktake)))||void 0===n?void 0:n.map(JSON.stringify))))||void 0===i?void 0:i.map(JSON.parse)})),C(!1)):(L(null===A||void 0===A?void 0:A.stocktake),C(!1)):0===(null===A||void 0===A||null===(e=A.stocktake)||void 0===e?void 0:e.length)&&C(!1),10===(null===A||void 0===A||null===(i=A.stocktake)||void 0===i?void 0:i.length)?k(!0):k(!1)}),[null===A||void 0===A?void 0:A.stocktake]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h6",{className:z.Z.fine_heading,children:o("stocktake")}),(0,b.jsx)(se.Z,{customStyle:{width:"100%",marginTop:"0.2rem"}}),(0,b.jsxs)("div",{style:{padding:"1rem"},children:[null===M||void 0===M?void 0:M.map((function(e,i){return(null===M||void 0===M?void 0:M.length)===i+1?(0,b.jsx)("div",{ref:d,style:{width:"100%"},children:(0,b.jsx)(Ee,{history:e})},null===e||void 0===e?void 0:e._id):(0,b.jsx)(Ee,{history:e},null===e||void 0===e?void 0:e._id)})),S&&(0,b.jsx)(f.Z,{}),!S&&0===(null===A||void 0===A||null===(i=A.stocktake)||void 0===i?void 0:i.length)&&(0,b.jsx)("div",{className:z.Z.noData,children:(0,b.jsx)("img",{src:"/images/nodata.jpg",style:{width:"100%"},alt:""})})]})]})},Re=n(37762),Pe=n(46876),De=n(91022),Oe={moderator_container:"LibraryModerator_moderator_container__98n6P",moderator_container_title:"LibraryModerator_moderator_container_title__lH0sy",add_new_moderator:"LibraryModerator_add_new_moderator__E7l5M",moderator_card:"LibraryModerator_moderator_card__ZCXKl",moderator_card_text_container:"LibraryModerator_moderator_card_text_container__HXBN1",menu_icon:"LibraryModerator_menu_icon__fN48K",assign_role_container:"LibraryModerator_assign_role_container__BiowP",assign_role_title:"LibraryModerator_assign_role_title__AYVXl",selected_staff_container:"LibraryModerator_selected_staff_container__v59BT",selected_staff_text:"LibraryModerator_selected_staff_text__JEkG3",assign_btn:"LibraryModerator_assign_btn__7gxuj",select_application_btn:"LibraryModerator_select_application_btn__wMVuF",select_btn:"LibraryModerator_select_btn__jPgoo",application_card:"LibraryModerator_application_card__k25bg",application_card_active:"LibraryModerator_application_card_active__DEaUj",application_card_text:"LibraryModerator_application_card_text__zT33Q",application_card_text_bottom:"LibraryModerator_application_card_text_bottom__De6s5"},Ge=function(e){var i,n=e.onCloseEdit,t=e.setActivePopup,o=e.selectedStaff,l=e.moderatorState,s=e.onSelectRole,d=e.onUpdateModerator,a=(0,v.$G)().t;return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(C.Z,{onClose:n,children:(0,b.jsxs)("div",{className:Oe.assign_role_container,children:[(0,b.jsxs)("section",{className:Oe.assign_role_title,children:[(0,b.jsx)("img",{src:"/images/arrow-left-fees-icon.svg",onClick:n,alt:"back icon",style:{cursor:"pointer"}}),(0,b.jsx)("h6",{children:a("update_role_to_moderator")})]}),(0,b.jsx)(se.Z,{customStyle:{width:"100%"}}),(0,b.jsxs)("section",{className:Oe.selected_staff_container,onClick:function(){return t("OPEN_STAFF_LIST")},children:[(0,b.jsx)("img",{src:null!==o&&void 0!==o&&o.staffProfilePhoto?"".concat(g.yI,"/").concat(null===o||void 0===o?void 0:o.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),(0,b.jsxs)("div",{className:Oe.selected_staff_text,children:[(0,b.jsx)("h6",{children:"".concat(null===o||void 0===o?void 0:o.staffFirstName," ").concat(null!==(i=null===o||void 0===o?void 0:o.staffMiddleName)&&void 0!==i?i:""," ").concat(null===o||void 0===o?void 0:o.staffLastName)}),(0,b.jsxs)("p",{children:[a("index_number")," ",": ",null===o||void 0===o?void 0:o.staffROLLNO]})]})]}),(0,b.jsxs)("section",{style:{padding:"0.8rem"},children:[(0,b.jsx)(De.Z,{selectLabel:a("select_role_of_moderator"),selectedValue:a("please_select_role"),options:["As Librarian","Department Wise Librarian","Library Fines"],value:"FULL_FUNCTIONALITY"===(null===l||void 0===l?void 0:l.mod_role)?"As Librarian":"DEPARTMENT_WISE"===(null===l||void 0===l?void 0:l.mod_role)?"Department Wise Librarian":"FINE_CHARGE"===(null===l||void 0===l?void 0:l.mod_role)?"Library Fines":"",onClick:s}),(0,b.jsxs)("button",{className:Oe.assign_btn,onClick:d,children:[a("update")," "]})]})]})})})},Ye=n(39896),We=function(e){var i,n,o,l,s,d=e.instituteId,a=e.lid,u=e.onClose,m=e.onRefetchWhenAdd,f=e.openModeratorMenu,h=e.openAs,x=e.onEdit,j=e.fid,p=(0,v.$G)().t,Z=(0,t.useState)("EDIT"===h?"PREVIEW_FORM":"OPEN_STAFF_LIST"),k=(0,c.Z)(Z,2),N=k[0],S=k[1],F=(0,t.useState)("EDIT"===h?null===f||void 0===f?void 0:f.access_staff:""),M=(0,c.Z)(F,2),L=M[0],w=M[1],A=(0,t.useState)({mod_role:"EDIT"===h?null===f||void 0===f?void 0:f.access_role:"",sid:"EDIT"===h?null===f||void 0===f||null===(i=f.access_staff)||void 0===i?void 0:i._id:""}),T=(0,c.Z)(A,2),E=T[0],B=T[1],R=(0,t.useState)({id:[],depart:[]}),P=(0,c.Z)(R,2),D=P[0],O=P[1],G=(0,_.pV)(),Y=(0,c.Z)(G,1)[0];(0,t.useEffect)((function(){if("EDIT"===h){var e;w(null===f||void 0===f?void 0:f.access_staff),B({mod_role:null===f||void 0===f?void 0:f.access_role,sid:null===f||void 0===f||null===(e=f.access_staff)||void 0===e?void 0:e._id});var i,n=[],t=[],o=(0,Re.Z)(null===f||void 0===f?void 0:f.department);try{for(o.s();!(i=o.n()).done;){var l=i.value;n.push(null===l||void 0===l?void 0:l._id),t.push(l)}}catch(s){o.e(s)}finally{o.f()}O({id:n,depart:t}),S("PREVIEW_FORM")}}),[h]);var W=function(){S("OPEN_STAFF_LIST")},J=function(e){B((function(i){return(0,y.Z)((0,y.Z)({},i),{},{mod_role:"As Librarian"===e?"FULL_FUNCTIONALITY":"Department Wise Librarian"===e?"DEPARTMENT_WISE":"Library Fines"===e?"FINE_CHARGE":""})}))};return(0,b.jsxs)(b.Fragment,{children:["OPEN_STAFF_LIST"===N&&(0,b.jsx)(Pe.default,{assignHead:"OPEN_STAFF_LIST"===N,headSelect:function(e){w(e),B((function(i){return(0,y.Z)((0,y.Z)({},i),{},{sid:null===e||void 0===e?void 0:e._id})})),S("EDIT"===h?"PREVIEW_FORM":"ASSIGN_ROLE")},title:p("staff_list"),onClose:u,instituteId:d,viewAs:"ADMISSION_ADMIN"}),"ASSIGN_ROLE"===N&&(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(C.Z,{onClose:W,children:(0,b.jsxs)("div",{className:Oe.assign_role_container,children:[(0,b.jsxs)("section",{className:Oe.assign_role_title,children:[(0,b.jsx)("img",{src:"/images/arrow-left-fees-icon.svg",onClick:W,alt:"back icon",style:{cursor:"pointer"}}),(0,b.jsx)("h6",{children:p("assign_role_to_moderator")})]}),(0,b.jsx)(se.Z,{customStyle:{width:"100%"}}),(0,b.jsxs)("section",{className:Oe.selected_staff_container,children:[(0,b.jsx)("img",{src:null!==L&&void 0!==L&&L.staffProfilePhoto?"".concat(g.yI,"/").concat(null===L||void 0===L?void 0:L.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"staff profile avatar"}),(0,b.jsxs)("div",{className:Oe.selected_staff_text,children:[(0,b.jsx)("h6",{children:"".concat(null===L||void 0===L?void 0:L.staffFirstName," ").concat(null!==(n=null===L||void 0===L?void 0:L.staffMiddleName)&&void 0!==n?n:""," ").concat(null===L||void 0===L?void 0:L.staffLastName)}),(0,b.jsxs)("p",{children:[p("index_number")," ",": ",null===L||void 0===L?void 0:L.staffROLLNO]})]})]}),(0,b.jsxs)("section",{style:{padding:"0.8rem"},children:[(0,b.jsx)(De.Z,{selectLabel:p("select_role_of_moderator"),selectedValue:p("please_select_role"),options:["As Librarian","Department Wise Librarian","Library Fines"],value:"FULL_FUNCTIONALITY"===(null===E||void 0===E?void 0:E.mod_role)?"As Librarian":"DEPARTMENT_WISE"===(null===E||void 0===E?void 0:E.mod_role)?"Department Wise Librarian":"FINE_CHARGE"===(null===E||void 0===E?void 0:E.mod_role)?"Library Fines":"",onClick:J}),"DEPARTMENT_WISE"===E.mod_role?(0,b.jsx)(Ye.Z,{fid:j,onSelect:function(e){var i,n;null!==D&&void 0!==D&&null!==(i=D.id)&&void 0!==i&&i.includes(null===e||void 0===e?void 0:e._id)?O((function(i){var n,t;return{id:null===i||void 0===i||null===(n=i.id)||void 0===n?void 0:n.filter((function(i){return i!==(null===e||void 0===e?void 0:e._id)})),data:null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.filter((function(i){return(null===i||void 0===i?void 0:i._id)!==(null===e||void 0===e?void 0:e._id)}))}})):(null===(n=D.id)||void 0===n?void 0:n.length)>0?O((function(i){return{id:[].concat((0,r.Z)(null===i||void 0===i?void 0:i.id),[null===e||void 0===e?void 0:e._id]),data:[].concat((0,r.Z)(null===i||void 0===i?void 0:i.data),[e])}})):O((function(){return{id:[null===e||void 0===e?void 0:e._id],data:[e]}}))},onlyDepartment:!0,defalutValue:(null===D||void 0===D||null===(o=D.id)||void 0===o?void 0:o.length)>1?"".concat(null===D||void 0===D||null===(l=D.id)||void 0===l?void 0:l.length," selected"):null!==(s=null===D||void 0===D?void 0:D.dName)&&void 0!==s?s:""}):null,(0,b.jsxs)("button",{className:Oe.assign_btn,onClick:function(){a&&E.mod_role&&E.sid&&(S("LOADING"),Y({lid:a,addModerator:(0,y.Z)((0,y.Z)({},E),{},{depart:D.id})}).then((function(){m(),S(""),u()})).catch({}))},children:[p("assign")," "]})]})]})})}),"PREVIEW_FORM"===N&&(0,b.jsx)(Ge,{onCloseEdit:function(){u()},setActivePopup:S,selectedStaff:L,moderatorState:E,onSelectRole:J,onUpdateModerator:function(){x((0,y.Z)((0,y.Z)({},E),{},{depart:D.id})),u()}}),"LOADING"===N&&(0,b.jsx)(I.Z,{})]})},Je=n(12072),ze=n(84489),He=n(87049),Ve=function(e){var i=e.onClose,n=e.lid,o=e.onRefetch,l=e.openModeratorMenu,s=e.instituteId,d=(0,t.useState)(!1),a=(0,c.Z)(d,2),r=a[0],u=a[1],v=(0,t.useState)(!1),m=(0,c.Z)(v,2),f=m[0],h=m[1],x=(0,_.Uc)(),g=(0,c.Z)(x,1)[0],j=(0,_.sN)(),p=(0,c.Z)(j,1)[0];return(0,b.jsx)(b.Fragment,{children:f?(0,b.jsx)(We,{onClose:function(){return h(!1)},fid:n,instituteId:s,onRefetch:o,openAs:"EDIT",openModeratorMenu:l,onEdit:function(e){u((function(e){return!e})),h(!1),p({modId:null===l||void 0===l?void 0:l._id,updateModerator:{role:null===e||void 0===e?void 0:e.mod_role,staffId:null===e||void 0===e?void 0:e.sid}}).then((function(){o(),u((function(e){return!e})),i()})).catch({})}}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(ze.Z,{onClose:i}),(0,b.jsxs)(Je.Z,{customStyle:{zIndex:"1200"},children:[(0,b.jsxs)("div",{className:He.Z.edit_modal_container,style:{width:"200px"},children:[(0,b.jsx)("h6",{className:He.Z.edit,onClick:function(){return h((function(e){return!e}))},children:"Edit"}),(0,b.jsx)("h6",{className:He.Z.remove,onClick:function(){u((function(e){return!e})),g({modId:null===l||void 0===l?void 0:l._id}).then((function(){o(),i(),u((function(e){return!e}))})).catch({})},children:"Delete"})]}),r&&(0,b.jsx)(I.Z,{})]})]})})},Ue=function(e){var i,n,t,o,l,s,d,a=e.moderator,r=e.setOpenModeratorMenu,c=(0,v.$G)().t;return(0,b.jsxs)("div",{className:Oe.moderator_card,children:[(0,b.jsx)("img",{src:null!==a&&void 0!==a&&null!==(i=a.access_staff)&&void 0!==i&&i.staffProfilePhoto?"".concat(g.yI,"/").concat(null===a||void 0===a||null===(n=a.access_staff)||void 0===n?void 0:n.staffProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"moderator avatar"}),(0,b.jsxs)("section",{className:Oe.moderator_card_text_container,children:[(0,b.jsx)("h6",{children:"".concat(null===a||void 0===a||null===(t=a.access_staff)||void 0===t?void 0:t.staffFirstName," ").concat(null!==(o=null===a||void 0===a||null===(l=a.access_staff)||void 0===l?void 0:l.staffMiddleName)&&void 0!==o?o:""," ").concat(null===a||void 0===a||null===(s=a.access_staff)||void 0===s?void 0:s.staffLastName)}),(0,b.jsxs)("p",{children:[c("index_number")," ",": ",null===a||void 0===a||null===(d=a.access_staff)||void 0===d?void 0:d.staffROLLNO]}),(0,b.jsx)("p",{children:"FULL_FUNCTIONALITY"===(null===a||void 0===a?void 0:a.access_role)?"As Librarian":"DEPARTMENT_WISE"===(null===a||void 0===a?void 0:a.access_role)?"Department Wise Librarian":"FINE_CHARGE"===(null===a||void 0===a?void 0:a.access_role)?"Library Fines":""})]}),(0,b.jsx)("img",{src:"/images/three-24-dot-icon.svg",alt:"menu icon",onClick:function(){return r(a)},className:Oe.menu_icon,title:"Menu"})]})},qe=function(e){var i=e.lid,n=e.instituteId,o=e.fid,s=(0,v.$G)().t,d=(0,l.s0)(),a=(0,t.useState)(!1),u=(0,c.Z)(a,2),h=u[0],x=u[1],g=(0,t.useState)(""),j=(0,c.Z)(g,2),p=j[0],Z=j[1],k=(0,m.YD)(),N=(0,c.Z)(k,2),y=N[0],S=N[1],C=(0,t.useState)(1),I=(0,c.Z)(C,2),F=I[0],M=I[1],L=(0,t.useState)(!0),w=(0,c.Z)(L,2),A=w[0],T=w[1],E=(0,t.useState)(!1),B=(0,c.Z)(E,2),R=B[0],P=B[1],D=(0,t.useState)(!0),O=(0,c.Z)(D,2),G=O[0],Y=O[1],W=(0,t.useState)([]),J=(0,c.Z)(W,2),z=J[0],H=J[1],V=(0,_.z2)({data:{lid:i,page:F,limit:10},skip:!i}),U=V.getModeratorByLibrary,q=V.getModeratorByLibraryRefetch,$=(0,xe.u)().scrollToTop;(0,t.useEffect)((function(){$()}),[]),(0,t.useEffect)((function(){i&&(Y(!0),q())}),[i,F,q]),(0,t.useEffect)((function(){S&&A&&M((function(e){return e+1}))}),[S,A]),(0,t.useEffect)((function(){var e,i;R?(H(null===U||void 0===U?void 0:U.moderator),P(!1),Y(!1)):null!==U&&void 0!==U&&U.moderator?(H((function(e){var i,n;return null===(i=(0,r.Z)(new Set(null===(n=[].concat((0,r.Z)(e),(0,r.Z)(null===U||void 0===U?void 0:U.moderator)))||void 0===n?void 0:n.map(JSON.stringify))))||void 0===i?void 0:i.map(JSON.parse)})),Y(!1)):0===(null===U||void 0===U||null===(i=U.moderator)||void 0===i?void 0:i.length)&&Y(!1);10===(null===U||void 0===U||null===(e=U.moderator)||void 0===e?void 0:e.length)?T(!0):T(!1)}),[null===U||void 0===U?void 0:U.moderator]);var Q=function(){P(!0),M(1),Y(!0),q()};return(0,b.jsxs)("div",{className:Oe.moderator_container,children:[(0,b.jsxs)("section",{className:Oe.moderator_container_title,children:[(0,b.jsx)("img",{src:"/images/arrow-left-fees-icon.svg",onClick:function(){d(-1)},alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),(0,b.jsx)("h6",{children:s("library_moderator")})]}),(0,b.jsx)(se.Z,{customStyle:{width:"100%"}}),(0,b.jsx)("h6",{className:Oe.add_new_moderator,onClick:function(){return x(!0)},children:s("add_new_moderator")}),(0,b.jsxs)("div",{className:Oe.refund_list,children:[null===z||void 0===z?void 0:z.map((function(e,i){return(null===z||void 0===z?void 0:z.length)===i+1?(0,b.jsx)("div",{ref:y,children:(0,b.jsx)(Ue,{moderator:e,setOpenModeratorMenu:Z})},null===e||void 0===e?void 0:e._id):(0,b.jsx)(Ue,{moderator:e,setOpenModeratorMenu:Z},null===e||void 0===e?void 0:e._id)})),h&&(0,b.jsx)(We,{onClose:function(){return x((function(e){return!e}))},instituteId:n,lid:i,onRefetchWhenAdd:Q,fid:o}),p&&(0,b.jsx)(Ve,{lid:i,instituteId:n,onRefetch:Q,onClose:function(){return Z("")},openModeratorMenu:p,fid:o}),G&&(0,b.jsx)(f.Z,{})]})]})},$e=function(e){var i,n,o,l,s,d,a,r,u,m,f,h=e.book,x=e.isType,j=e.stid,p=e.onRefetch,Z=(0,v.$G)().t,k=(0,t.useState)(!1),N=(0,c.Z)(k,2),y=N[0],S=N[1],C=(0,_.Y)(),F=(0,c.Z)(C,1)[0],M=function(e){var i;j&&null!==h&&void 0!==h&&h._id&&(S((function(e){return!e})),F({stid:j,missingBook:{bookId:null===h||void 0===h||null===(i=h.book)||void 0===i?void 0:i._id,card_id:null===h||void 0===h?void 0:h._id,status:e}}).then((function(){p(),S((function(e){return!e}))})).catch({}))};return(0,b.jsxs)(b.Fragment,{children:["MISSING"===x?(0,b.jsxs)("div",{className:z.Z.iohc_card,style:{justifyContent:"space-between"},children:[(0,b.jsxs)("div",{className:z.Z.iohcc_missing,children:[(0,b.jsx)("img",{src:null!==h&&void 0!==h&&null!==(i=h.book)&&void 0!==i&&i.photo?"".concat(g.yI,"/").concat(null===h||void 0===h||null===(n=h.book)||void 0===n?void 0:n.photo):"/images/defaultBook.png",alt:"icons",style:{width:"3rem",height:"3rem"}}),(0,b.jsxs)("div",{className:z.Z.iohc_card_inner,style:{alignItems:"flex-start",flexDirection:"column",gap:"0"},children:[(0,b.jsxs)("h6",{style:{fontWeight:"500"},children:[Z("book_name")," ",": ",null!==(o=null===h||void 0===h||null===(l=h.book)||void 0===l?void 0:l.bookName)&&void 0!==o?o:""]}),(0,b.jsxs)("p",{style:{margin:"0"},children:[Z("author_only")," ",": ",null!==(s=null===h||void 0===h||null===(d=h.book)||void 0===d?void 0:d.author)&&void 0!==s?s:""]}),(0,b.jsxs)("p",{style:{margin:"0"},children:[Z("accession_number")," ",": ",null!==(a=null===h||void 0===h||null===(r=h.book)||void 0===r?void 0:r.accession_number)&&void 0!==a?a:""]})]})]}),(0,b.jsxs)("div",{className:z.Z.iohcb_missing,children:[(0,b.jsx)("h6",{onClick:function(){return M("book_isssue")},children:Z("book_issue_only")}),(0,b.jsx)("h6",{onClick:function(){return M("book_lost")},children:Z("book_lost_only")}),(0,b.jsx)("h6",{onClick:function(){return M("book_at_library")},children:Z("book_at_library_only")})]})]}):(0,b.jsxs)("div",{className:z.Z.iohc_card,children:[(0,b.jsx)("img",{src:null!==h&&void 0!==h&&h.photo?"".concat(g.yI,"/").concat(null===h||void 0===h?void 0:h.photo):"/images/defaultBook.png",alt:"icons",style:{width:"3rem",height:"3rem"}}),(0,b.jsxs)("div",{className:z.Z.iohc_card_inner,style:{alignItems:"flex-start",flexDirection:"column",gap:"0"},children:[(0,b.jsxs)("h6",{style:{fontWeight:"500"},children:[Z("book_name")," ",": ",null!==(u=null===h||void 0===h?void 0:h.bookName)&&void 0!==u?u:""]}),(0,b.jsxs)("p",{style:{margin:"0"},children:[Z("author_only")," ",": ",null!==(m=null===h||void 0===h?void 0:h.author)&&void 0!==m?m:""]}),(0,b.jsxs)("p",{style:{margin:"0"},children:[Z("accession_number")," ",": ",null!==(f=null===h||void 0===h?void 0:h.accession_number)&&void 0!==f?f:""]})]})]}),y&&(0,b.jsx)(I.Z,{})]})},Qe=function(){var e,i,n,o,s,d,a,u,h,x,g,j,p=(0,v.$G)().t,Z=(0,l.TH)(),k=(0,m.YD)(),N=(0,c.Z)(k,2),y=N[0],S=N[1],C=(0,t.useState)(1),I=(0,c.Z)(C,2),F=I[0],M=I[1],L=(0,t.useState)(!0),w=(0,c.Z)(L,2),A=w[0],T=w[1],E=(0,t.useState)(!0),B=(0,c.Z)(E,2),R=B[0],P=B[1],D=(0,t.useState)([]),O=(0,c.Z)(D,2),G=O[0],Y=O[1],W=(0,_.M_)({data:{stid:null===(e=Z.state)||void 0===e?void 0:e.stid,page:F,limit:10,flow:null===(i=Z.state)||void 0===i?void 0:i.flow},skip:!(null!==(n=Z.state)&&void 0!==n&&n.stid)}),J=W.libraryGetStocktakeOneHistory,H=W.libraryGetStocktakeOneHistoryRefetch;(0,t.useEffect)((function(){S&&A&&M((function(e){return e+1}))}),[S,A]),(0,t.useEffect)((function(){var e;null!==(e=Z.state)&&void 0!==e&&e.stid&&(P(!0),H())}),[F,null===(o=Z.state)||void 0===o?void 0:o.stid,H]),(0,t.useEffect)((function(){var e,i;null!==J&&void 0!==J&&J.stocktake_list?F>1?(Y((function(e){var i,n;return null===(i=(0,r.Z)(new Set(null===(n=[].concat((0,r.Z)(e),(0,r.Z)(null===J||void 0===J?void 0:J.stocktake_list)))||void 0===n?void 0:n.map(JSON.stringify))))||void 0===i?void 0:i.map(JSON.parse)})),P(!1)):(Y(null===J||void 0===J?void 0:J.stocktake_list),P(!1)):0===(null===J||void 0===J||null===(e=J.stocktake_list)||void 0===e?void 0:e.length)&&P(!1),10===(null===J||void 0===J||null===(i=J.stocktake_list)||void 0===i?void 0:i.length)?T(!0):T(!1)}),[null===J||void 0===J?void 0:J.stocktake_list]);var V=function(){M((function(e){return 1})),H()};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("h6",{className:z.Z.fine_heading,children:[p("stocktake_detail")," (",p(null===(s=Z.state)||void 0===s?void 0:s.flow)," ",null!==(d=null===(a=Z.state)||void 0===a?void 0:a.count)&&void 0!==d?d:0,")"]}),(0,b.jsx)(se.Z,{customStyle:{width:"100%",marginTop:"0.2rem"}}),(0,b.jsxs)("div",{style:{padding:"1rem"},children:["book_at_library"===(null===(u=Z.state)||void 0===u?void 0:u.flow)||"book_lost"===(null===(h=Z.state)||void 0===h?void 0:h.flow)?(0,b.jsx)(b.Fragment,{children:null===G||void 0===G?void 0:G.map((function(e,i){return(null===G||void 0===G?void 0:G.length)===i+1?(0,b.jsx)("div",{ref:y,style:{width:"100%"},children:(0,b.jsx)($e,{book:e})},null===e||void 0===e?void 0:e._id):(0,b.jsx)($e,{book:e},null===e||void 0===e?void 0:e._id)}))}):"book_missing"===(null===(x=Z.state)||void 0===x?void 0:x.flow)?(0,b.jsx)(b.Fragment,{children:null===G||void 0===G?void 0:G.map((function(e,i){var n,t;return(null===G||void 0===G?void 0:G.length)===i+1?(0,b.jsx)("div",{ref:y,style:{width:"100%"},children:(0,b.jsx)($e,{book:e,isType:"MISSING",stid:null===(n=Z.state)||void 0===n?void 0:n.stid,onRefetch:V})},null===e||void 0===e?void 0:e._id):(0,b.jsx)($e,{book:e,isType:"MISSING",stid:null===(t=Z.state)||void 0===t?void 0:t.stid,onRefetch:V},null===e||void 0===e?void 0:e._id)}))}):"book_isssue"===(null===(g=Z.state)||void 0===g?void 0:g.flow)?(0,b.jsx)(b.Fragment,{children:null===G||void 0===G?void 0:G.map((function(e,i){return(null===G||void 0===G?void 0:G.length)===i+1?(0,b.jsx)("div",{ref:y,style:{width:"100%"},children:(0,b.jsx)($e,{book:e,isType:"ISSUE"})},null===e||void 0===e?void 0:e._id):(0,b.jsx)($e,{book:e,isType:"ISSUE"},null===e||void 0===e?void 0:e._id)}))}):null,R&&(0,b.jsx)(f.Z,{}),!R&&0===(null===J||void 0===J||null===(j=J.stocktake_list)||void 0===j?void 0:j.length)&&(0,b.jsx)("div",{className:z.Z.noData,children:(0,b.jsx)("img",{src:"/images/nodata.jpg",alt:"",style:{width:"100%"}})})]})]})};var Ke=function(e){var i,n,o,s,d,r,c,u,v,m,f,h,x,g,j,p,k,N,y,S,C,I,F,M,L,w,A,T,E,B,R,P,D=e.carryParentState,O=e.role,G=e.mid,Y=(0,l.TH)(),W=(0,_.yX)({lid:null===D||void 0===D||null===(i=D.onClickValue)||void 0===i?void 0:i._id,skip:!(null!==D&&void 0!==D&&null!==(n=D.onClickValue)&&void 0!==n&&n._id)}),H=W.getLibraryDetail,V=W.getLibraryDetailRefetch;return(0,t.useEffect)((function(){var e;null!==D&&void 0!==D&&null!==(e=D.onClickValue)&&void 0!==e&&e._id&&V()}),[null===D||void 0===D||null===(o=D.onClickValue)||void 0===o?void 0:o._id]),(0,b.jsx)("div",{className:z.Z.admisionApplication,children:(0,b.jsxs)("div",{className:z.Z.applicationBody,children:["book"===(null===(s=Y.search)||void 0===s?void 0:s.substring(3,7))&&(0,b.jsx)(a.Z,{getQuery:Y,carryParentState:D,fid:null===H||void 0===H||null===(d=H.library)||void 0===d||null===(r=d.institute)||void 0===r||null===(c=r.financeDepart)||void 0===c?void 0:c[0],filterBy:null===H||void 0===H||null===(u=H.library)||void 0===u||null===(v=u.filter_by)||void 0===v?void 0:v.department,role:O,mid:G}),"issue"===(null===(m=Y.search)||void 0===m?void 0:m.substring(3))&&(0,b.jsx)(J,{insId:null===H||void 0===H||null===(f=H.library)||void 0===f||null===(h=f.institute)||void 0===h?void 0:h._id,role:O,mid:G}),"collect"===(null===(x=Y.search)||void 0===x?void 0:x.substring(3))&&(0,b.jsx)(Z,{}),"member"===(null===(g=Y.search)||void 0===g?void 0:g.substring(3))&&(0,b.jsx)(oe,{}),"charge"===(null===(j=Y.search)||void 0===j?void 0:j.substring(3,9))&&(0,b.jsx)(me,{carryParentState:D}),"export"===(null===(p=Y.search)||void 0===p?void 0:p.substring(3,9))&&(0,b.jsx)(Se,{carryParentState:D,lid:null===D||void 0===D||null===(k=D.onClickValue)||void 0===k?void 0:k._id}),"qr"===(null===(N=Y.search)||void 0===N?void 0:N.substring(3))&&(0,b.jsx)(we,{carryParentState:D,lid:null===D||void 0===D||null===(y=D.onClickValue)||void 0===y?void 0:y._id}),"logs"===(null===(S=Y.search)||void 0===S?void 0:S.substring(3))&&(0,b.jsx)(Te,{carryParentState:D,lid:null===D||void 0===D||null===(C=D.onClickValue)||void 0===C?void 0:C._id}),"stocktake"===(null===(I=Y.search)||void 0===I?void 0:I.substring(3))&&(0,b.jsx)(Be,{carryParentState:D,lid:null===D||void 0===D||null===(F=D.onClickValue)||void 0===F?void 0:F._id}),"stocktake-detail"===(null===(M=Y.search)||void 0===M?void 0:M.substring(3))&&(0,b.jsx)(Qe,{carryParentState:D,lid:null===D||void 0===D||null===(L=D.onClickValue)||void 0===L?void 0:L._id}),"moderator"===(null===(w=Y.search)||void 0===w?void 0:w.substring(3))&&(0,b.jsx)(qe,{lid:null===D||void 0===D||null===(A=D.onClickValue)||void 0===A?void 0:A._id,instituteId:null===H||void 0===H||null===(T=H.library)||void 0===T||null===(E=T.institute)||void 0===E?void 0:E._id,fid:null===H||void 0===H||null===(B=H.library)||void 0===B||null===(R=B.institute)||void 0===R||null===(P=R.financeDepart)||void 0===P?void 0:P[0]})]})})},Xe=n(21640),ei="MiddleContent_MiddleContent__WKHNs",ii="MiddleContent_MiddleContentLeft__+wl3w",ni="MiddleContent_tabs__rNsOO",ti="MiddleContent_item__HkkSz",oi="MiddleContent_itemIcon__yR7dj",li="MiddleContent_classList__0STf8",si="Tabs_mcqToptabs__TZyM2",di="Tabs_mcqTop__DeSKD",ai="Tabs_mcqTopItem__Okqo0",ri="Tabs_active__GRYqn";var ci=function(e){var i=e.activeIndex,n=e.setActiveIndex,t=(0,v.$G)().t;return(0,b.jsx)("div",{className:di,children:(0,b.jsxs)("div",{className:si,children:[(0,b.jsx)("div",{className:0===i?"".concat(ai," ").concat(ri):ai,onClick:function(){return n(0)},children:t("menu")}),(0,b.jsx)("div",{className:1===i?"".concat(ai," ").concat(ri):ai,onClick:function(){return n(1)},children:t("funds")})]})})},ui="Funds_funds__A1w1z",vi="Funds_fundshead__L-ikp",mi="Funds_fundscontent__60rTr",_i="Funds_sidebarbottomitem__HxeQl",fi="Funds_namee__F4I2F",hi="Funds_desig__tgpDW",xi="Funds_balanceItem__wygKQ",gi="Funds_recover_btn__AJWzV",bi="Funds_submitbtn__+nZSz",ji="Funds_disabled__NcqJ-";var pi=function(e){var i=e.bal,n=e.value;return(0,b.jsxs)("div",{className:xi,children:[(0,b.jsxs)("p",{children:[i,":"]}),(0,b.jsxs)("p",{children:["Rs. ",n]})]})},Zi=n(49384),ki=n(11237);var Ni=function(e){var i,n=e.carryParentState,o=e.library,l=e.getLibraryDetailRefetch,d=e.role,a=(0,v.$G)().t,r=(0,s.v9)((function(e){return e.libraryChange})),u=(0,_.eQ)(),m=(0,c.Z)(u,1)[0],f=t.useState(!1),h=(0,c.Z)(f,2),x=h[0],g=h[1];return(0,b.jsxs)("div",{className:ui,children:[(0,b.jsxs)("div",{className:vi,children:[(0,b.jsxs)("h6",{children:[" ",a("lib_fines")," "]}),(0,b.jsx)("img",{src:"/images/finance/filter-icon.svg",alt:""})]}),(0,b.jsxs)("div",{className:mi,children:[(0,b.jsxs)("div",{className:_i,children:[(0,b.jsx)("img",{alt:"not found",src:"/images/finance/doller-icon.svg"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:fi,children:"Rs. ".concat(null===o||void 0===o?void 0:o.totalFine)}),(0,b.jsx)("p",{className:hi,children:a("total_fine_collected")})]})]}),(0,b.jsx)(pi,{check:"false",bal:a("cash_fine"),value:null===o||void 0===o?void 0:o.offlineFine}),(0,b.jsx)(pi,{check:"false",bal:a("bank_fine"),value:null===o||void 0===o?void 0:o.onlineFine}),(0,b.jsx)(pi,{check:"true",bal:a("cash_with_me"),value:null===o||void 0===o?void 0:o.collectedFine}),d?(0,b.jsx)(b.Fragment,{children:"Pending"===(null===o||void 0===o?void 0:o.requestStatus)&&(null===o||void 0===o?void 0:o.collectedFine)>0?(0,b.jsxs)("button",{className:bi,disabled:x,onClick:function(){g((function(e){return!e})),m({lid:null===r||void 0===r?void 0:r.lid,fine:{amount:null===o||void 0===o?void 0:o.collectedFine}}).then((function(){l(),g((function(e){return!e}))})).catch((function(){g((function(e){return!e}))}))},children:[a("sublit_to_finance"),x&&(0,b.jsx)("div",{style:{marginTop:"0.7vw"},children:(0,b.jsx)(Zi.Z,{})})]}):"Requested"===(null===o||void 0===o?void 0:o.requestStatus)?(0,b.jsx)("button",{className:"".concat(bi," ").concat(ji),children:a("request_to_finance")}):(0,b.jsx)("button",{className:"".concat(bi," ").concat(ji),children:a("sublit_to_finance")})}):null,(0,b.jsx)(ki.Z,{carryParentState:n,activeTab:"charge",role:d,children:(0,b.jsxs)("div",{className:gi,children:[a("total_pending_fees"),": ",a("rs"),". ",null!==(i=null===o||void 0===o?void 0:o.remainFine)&&void 0!==i?i:0]})})]}),x&&(0,b.jsx)(I.Z,{})]})};var yi=function(e){var i=e.library,n=e.getLibraryDetailRefetch,o=e.carryParentState,l=e.role,s=(0,t.useState)(0),d=(0,c.Z)(s,2),a=d[0],r=d[1],u=(0,v.$G)().t;return(0,b.jsx)("div",{className:ei,children:(0,b.jsxs)("div",{className:ii,children:[(0,b.jsx)("div",{className:ni,children:(0,b.jsx)(ci,{activeIndex:a,setActiveIndex:r})}),0===a&&(0,b.jsxs)("div",{className:ti,children:[(0,b.jsx)(ki.Z,{carryParentState:o,activeTab:"book",role:l,children:(0,b.jsxs)("div",{className:oi,children:[(0,b.jsx)("img",{src:"/images/member_tab/library/library-allbook-icon.svg",alt:"Class Catalog"}),(0,b.jsx)("p",{children:u("all_books")})]})}),(0,b.jsx)(ki.Z,{carryParentState:o,activeTab:"issue",role:l,children:(0,b.jsxs)("div",{className:oi,children:[(0,b.jsx)("img",{src:"/images/member_tab/library/library-issue-icon.svg",alt:"issued books"}),(0,b.jsx)("p",{children:u("issued_books")})]})}),(0,b.jsx)(ki.Z,{carryParentState:o,activeTab:"collect",role:l,children:(0,b.jsxs)("div",{className:oi,children:[(0,b.jsx)("img",{src:"/images/member_tab/library/library-collect-icon.svg",alt:"collected logs"}),(0,b.jsx)("p",{children:u("collected_logs")})]})}),(0,b.jsx)(ki.Z,{carryParentState:o,activeTab:"charge",role:l,children:(0,b.jsxs)("div",{className:oi,children:[(0,b.jsx)("img",{src:"/images/member_tab/library/library-fine-icon.svg",alt:"members"}),(0,b.jsx)("p",{children:u("library_fine")})]})}),(0,b.jsx)(ki.Z,{carryParentState:o,activeTab:"member",role:l,children:(0,b.jsxs)("div",{className:oi,children:[(0,b.jsx)("img",{src:"/images/member_tab/library/library-member-icon.svg",alt:"members"}),(0,b.jsx)("p",{children:u("members")})]})}),(0,b.jsx)(ki.Z,{carryParentState:o,activeTab:"export",role:l,children:(0,b.jsxs)("div",{className:oi,children:[(0,b.jsx)("img",{src:"/images/member_tab/finance/finance-export-icon.svg",alt:"refund"}),(0,b.jsx)("p",{children:u("data_export")})]})}),(0,b.jsx)(ki.Z,{carryParentState:o,activeTab:"qr",role:l,children:(0,b.jsxs)("div",{className:oi,children:[(0,b.jsx)("img",{src:"/images/member_tab/class/class-setting-icon.svg",alt:"refund"}),(0,b.jsx)("p",{children:u("setting")})]})}),(0,b.jsx)(ki.Z,{carryParentState:o,activeTab:"logs",role:l,children:(0,b.jsxs)("div",{className:oi,children:[(0,b.jsx)("img",{src:"/images/member_tab/subject/subject-daily-update-icon.svg",alt:"refund"}),(0,b.jsx)("p",{children:u("logs")})]})}),(0,b.jsx)(ki.Z,{carryParentState:o,activeTab:"moderator",role:l,children:(0,b.jsxs)("div",{className:oi,children:[(0,b.jsx)("img",{src:"/images/member_tab/admission/admission-moderator-icon.svg",alt:"refund"}),(0,b.jsx)("p",{children:u("library_moderators")})]})}),(0,b.jsx)(ki.Z,{carryParentState:o,activeTab:"stocktake",role:l,children:(0,b.jsxs)("div",{className:oi,children:[(0,b.jsx)("img",{src:"/images/member_tab/subject/subject-daily-update-icon.svg",alt:"refund"}),(0,b.jsx)("p",{children:u("stocktake")})]})})]}),1===a&&(0,b.jsx)("div",{className:li,children:(0,b.jsx)(Ni,{library:i,carryParentState:o,getLibraryDetailRefetch:n,role:l})})]})})},Si=function(e){var i,n,o,d,a,r,u,m,f,h,x,g,j=e.carryParentState,p=e.role,Z=(0,v.$G)().t,k=(0,l.UO)(),N=(0,s.v9)((function(e){return e.libraryChange})),y=(0,t.useState)(""),S=(0,c.Z)(y,2),C=S[0],I=S[1],F=(0,t.useState)(""),M=(0,c.Z)(F,2),L=M[0],w=M[1],A=(0,t.useState)(!1),T=(0,c.Z)(A,2),E=T[0],B=T[1],R=(0,t.useState)(!1),P=(0,c.Z)(R,2),D=P[0],O=P[1],G=(0,t.useState)(""),Y=(0,c.Z)(G,2),W=Y[0],J=Y[1],z=(0,_.Se)(),H=(0,c.Z)(z,1)[0];(0,t.useEffect)((function(){if(D){var e=new FormData;e.append("file",L),H({file:e,lid:null===N||void 0===N?void 0:N.lid}).then((function(e){})).catch({})}}),[D,L]);var V=(0,_.yX)({lid:null===N||void 0===N?void 0:N.lid,skip:!(null!==N&&void 0!==N&&N.lid)}),U=V.getLibraryDetail,q=V.getLibraryDetailRefetch;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Xe.Z,{coverKey:null===U||void 0===U||null===(i=U.library)||void 0===i?void 0:i.cover,coverId:null===U||void 0===U||null===(n=U.library)||void 0===n?void 0:n.coverId,defaultCover:"/images/profileAndCover/library-cover.png",textLarge:Z("librarian"),textSmall:"".concat(null===U||void 0===U||null===(o=U.library)||void 0===o||null===(d=o.libraryHead)||void 0===d?void 0:d.staffFirstName," ").concat(null!==U&&void 0!==U&&null!==(a=U.library)&&void 0!==a&&null!==(r=a.libraryHead)&&void 0!==r&&r.staffMiddleName?null===U||void 0===U||null===(u=U.library)||void 0===u||null===(m=u.libraryHead)||void 0===m?void 0:m.staffMiddleName:""," ").concat(null===U||void 0===U||null===(f=U.library)||void 0===f||null===(h=f.libraryHead)||void 0===h?void 0:h.staffLastName),count1:null===U||void 0===U||null===(x=U.library)||void 0===x?void 0:x.bookCount,count1label:Z("books"),count2:null===U||void 0===U||null===(g=U.library)||void 0===g?void 0:g.memberCount,count2label:Z("members"),profilePhoto:W,profileChange:function(e){var i=URL.createObjectURL(e.target.files[0]);w(e.target.files[0]),J(i),I(i),B(!0)},openCrop:E,setOpenCrop:B,setPhotoURL:I,photoURL:C,setFile:w,setUpload:O,setProfilePhoto:J,viewAs:!0,redirectUrl:"/q/".concat(k.username,"/member/library?a=site"),carryParentState:j}),(0,b.jsx)(yi,{library:null===U||void 0===U?void 0:U.library,getLibraryDetailRefetch:q,carryParentState:j,role:p})]})};var Ci=function(e){var i=e.onClickValue,n=e.carryParentState,t=e.role,o=e.mid,s=(0,l.TH)();return(0,b.jsxs)("div",{className:d,children:[!s.search&&(0,b.jsx)(Si,{carryParentState:n,role:t}),s.search&&(0,b.jsx)(Ke,{carryParentState:n,insId:null===i||void 0===i?void 0:i.institute,role:t,mid:o})]})},Ii=n(46500),Fi=n(78068),Mi=function(){var e,i,n,d,a,r,c,u,v,m,_,f,h,x,g,j,p,Z=(0,l.TH)(),k=(0,s.I0)();return(0,t.useEffect)((function(){var e,i,n,t,o;k(Ii.X.libraryQuery({lid:null===Z||void 0===Z||null===(e=Z.state)||void 0===e||null===(i=e.onClickValue)||void 0===i?void 0:i._id,lhead:null===Z||void 0===Z||null===(n=Z.state)||void 0===n||null===(t=n.onClickValue)||void 0===t||null===(o=t.libraryHead)||void 0===o?void 0:o._id}))}),[]),(0,b.jsx)(b.Fragment,{children:"site"===(null===Z||void 0===Z||null===(e=Z.search)||void 0===e?void 0:e.substring(3))?(0,b.jsx)(Fi.Z,{lid:null===Z||void 0===Z||null===(i=Z.state)||void 0===i||null===(n=i.onClickValue)||void 0===n?void 0:n._id}):(0,b.jsx)(o.Z,{index:null!==Z&&void 0!==Z&&null!==(d=Z.state)&&void 0!==d&&null!==(a=d.onClickValue)&&void 0!==a&&a.role?"58":"8",sid:null!==(r=null===Z||void 0===Z||null===(c=Z.state)||void 0===c?void 0:c.sid)&&void 0!==r?r:"",onClickValue:null!==(u=null===Z||void 0===Z||null===(v=Z.state)||void 0===v?void 0:v.onClickValue)&&void 0!==u?u:"",children:(0,b.jsx)(Ci,{onClickValue:null!==(m=null===Z||void 0===Z||null===(_=Z.state)||void 0===_?void 0:_.onClickValue)&&void 0!==m?m:"",carryParentState:null===Z||void 0===Z?void 0:Z.state,role:null!==(f=null===(h=Z.state)||void 0===h||null===(x=h.onClickValue)||void 0===x?void 0:x.role)&&void 0!==f?f:"",mid:null!==(g=null===(j=Z.state)||void 0===j||null===(p=j.onClickValue)||void 0===p?void 0:p.mid)&&void 0!==g?g:""})})})}},47735:function(e,i,n){var t=n(29439),o=n(72791),l=(n(32804),n(29017)),s=n(98734),d=n(62732),a=n(69721),r=n(80184);i.Z=function(e){var i=e.rid,n=(0,o.useState)(!1),c=(0,t.Z)(n,2),u=c[0],v=c[1],m=(0,o.useState)(""),_=(0,t.Z)(m,2),f=_[0],h=_[1],x=(0,o.useState)(""),g=(0,t.Z)(x,2),b=g[0],j=g[1],p=(0,l.H0)({rid:f,skip:!f}),Z=p.internalFeeReceipt,k=p.internalFeeReceiptRefetch;(0,o.useEffect)((function(){f&&k()}),[f,k]);return(0,o.useEffect)((function(){null!==Z&&void 0!==Z&&Z.receipt&&null!==Z&&void 0!==Z&&Z.one_account&&j(Z)}),[Z]),(0,o.useEffect)((function(){if(b){var e,i,n,t,o,l,s,r;v((function(e){return!e}));var c=null===b||void 0===b?void 0:b.one_account,u=null===b||void 0===b?void 0:b.receipt,m=null!==u&&void 0!==u&&null!==(e=u.finance)&&void 0!==e&&null!==(i=e.institute)&&void 0!==i&&i.insProfilePhoto?"".concat(a.Yz,"/").concat(null===u||void 0===u||null===(n=u.finance)||void 0===n||null===(t=n.institute)||void 0===t?void 0:t.insProfilePhoto):"/images/certificate/logodemo.jpg",_=null!==u&&void 0!==u&&null!==(o=u.finance)&&void 0!==o&&null!==(l=o.institute)&&void 0!==l&&l.affliatedLogo?"".concat(a.Yz,"/").concat(null===u||void 0===u||null===(s=u.finance)||void 0===s||null===(r=s.institute)||void 0===r?void 0:r.affliatedLogo):"/images/certificate/logodemo.jpg";c&&u&&((0,d.Z)(c,u,m,_),v(!1)),j(""),window.location.reload()}}),[b]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{src:"/images/members/receipt-icon.svg",onClick:function(){var e;(e=i)&&(v((function(e){return!e})),h(e))},alt:"receipt icon"}),u&&(0,r.jsx)(s.Z,{})]})}},12923:function(e,i,n){n.d(i,{Ec:function(){return j},Em:function(){return k},JM:function(){return _},NS:function(){return s},Pg:function(){return f},Q_:function(){return b},RH:function(){return m},Tv:function(){return r},U_:function(){return g},VN:function(){return d},Wj:function(){return u},ZS:function(){return v},_8:function(){return p},d5:function(){return c},tB:function(){return x},vI:function(){return Z},yx:function(){return a},zO:function(){return h}});var t=n(29439),o=n(91007),l=n(58208),s=function(e){var i=(0,l.YD)(e.search,{skip:e.skip});return{instituteAllSearch:i.data,instituteAllSearchRefetch:i.refetch}},d=function(){var e=(0,l.ak)();return[(0,t.Z)(e,1)[0]]},a=function(){var e=(0,l.WL)();return[(0,t.Z)(e,1)[0]]},r=function(e){var i=(0,l.pH)(e.list,{skip:e.skip});return{instituteFollowList:i.data,instituteFollowListRefetch:i.refetch}},c=function(e){var i=(0,l.MG)(e.data,{skip:e.skip});return{instituteOwnFollowingList:i.data,instituteOwnFollowingListRefetch:i.refetch}},u=function(){var e=(0,l.Ky)();return[(0,t.Z)(e,1)[0]]},v=function(e){var i=(0,l.p8)(e.list);return{userFollowList:i.data,userFollowListRefetch:i.refetch}},m=function(e){var i=(0,l.Wv)(e);return{userFollowingList:i.data,userFollowingListRefetch:i.refetch}},_=function(e){var i=(0,l.sz)(e.search,{skip:e.skip});return{userAllSearch:i.data,userAllSearchRefetch:i.refetch}},f=function(){var e=(0,l.Mk)();return[(0,t.Z)(e,1)[0]]},h=function(){var e=(0,l.$i)();return[(0,t.Z)(e,1)[0]]},x=function(){var e=(0,l.Do)();return[(0,t.Z)(e,1)[0]]},g=function(){var e=(0,l.He)();return[(0,t.Z)(e,1)[0]]},b=function(){var e=(0,l.vg)();return[(0,t.Z)(e,1)[0]]},j=function(){var e=(0,l.OO)();return[(0,t.Z)(e,1)[0]]},p=function(e){var i=(0,l.N2)(e);return{userCircleList:i.data,userCircleListRefetch:i.refetch}},Z=function(e){var i=(0,o.x6)(e.search,{skip:e.skip});return{assignSearchStaff:i.data,assignSearchStaffRefetch:i.refetch}},k=function(e){var i=(0,l.SJ)(e);return{universalUser:i.data,universalUserRefetch:i.refetch}}},61055:function(e,i,n){var t=n(39230),o=n(52245),l=n(80184),s=["tel","number"];i.Z=function(e){var i=e.label,n=e.name,d=e.msg,a=e.type,r=e.value,c=e.onChange,u=e.placeholder,v=e.maxLength,m=e.customFormInputContainer,_=e.customFormInputLabel,f=e.customFormInput,h=e.errorShow,x=e.disabled,g=e.children,b=(0,t.$G)().t;return(0,l.jsxs)("div",{className:o.Z.form_input_container,style:m,children:[i&&(0,l.jsxs)("label",{className:o.Z.form_input_label,style:_,htmlFor:n,children:[i,d?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("span",{className:o.Z.form_input_label_error,children:[" "," "," ",d]})}):h?(0,l.jsxs)("span",{className:o.Z.form_input_label_error,children:["* ",b("form_require_label")]}):null,g]}),s.includes(a)?(0,l.jsx)("input",{className:o.Z.form_input,type:a,value:r,onChange:c,name:n,placeholder:u,maxLength:null!==v&&void 0!==v?v:100,disabled:x,style:f}):(0,l.jsx)("input",{className:o.Z.form_input,type:a,value:r,onChange:c,name:n,placeholder:u,disabled:x,style:f})]})}},62732:function(e,i,n){var t=n(35125),o=n(72426),l=n.n(o),s=n(62906),d=n.n(s),a=new t.ZP({format:[270,210]}),r=a.internal.pageSize.getWidth();i.Z=function(e,i,n,t){var o,s,c,u,v,m,_,f,h,x,g,b,j,p,Z,k,N,y=arguments.length>4&&void 0!==arguments[4]&&arguments[4],S=null===i||void 0===i||null===(o=i.finance)||void 0===o?void 0:o.institute,C=null===i||void 0===i||null===(s=i.finance)||void 0===s?void 0:s.financeHead,I=null===i||void 0===i?void 0:i.student,F=null===i||void 0===i?void 0:i.internal_fees,M=null===i||void 0===i?void 0:i.order_history;a.addImage(n,"JPEG",9,3,25,25),a.addImage(t,"JPEG",r-34,2.4,25,25),a.setLineWidth(8),a.setDrawColor(255,255,255),a.circle(21.4,15,16),a.setLineWidth(0),a.setLineWidth(8),a.setDrawColor(255,255,255),a.circle(r-21.4,15,16),a.setLineWidth(0);var L=a.splitTextToSize(null===S||void 0===S?void 0:S.insName,146);if(a.setFont(void 0,"normal"),L.length>1){var w=10;a.setFont("700"),a.setTextColor(18,18,18),a.setFontSize(16),a.text(107,w,L,"center"),w=L.length+145}else{var A=10;a.setFont("700"),a.setTextColor(18,18,18),a.setFontSize(18),a.text(107,A,L,"center"),A=L.length+145}a.setFont("Arial","normal","400"),a.setTextColor(18,18,18),a.setFontSize(10),a.text(r/2,L.length>1?23:19,null===S||void 0===S?void 0:S.insAddress,"center"),a.setFont("WorkSans"),a.setTextColor(18,18,18),a.setFontSize(10),a.text(r/2,L.length>1?29:25,"Mob No : ".concat(null===S||void 0===S?void 0:S.insPhoneNumber," , Mail: ").concat(null===S||void 0===S?void 0:S.insEmail),"center"),a.setFont("WorkSans"),a.setTextColor(0,0,0),a.setFontSize(18),a.text(r/2,37,"Fee Receipt","center"),a.setLineWidth(.7),a.setDrawColor(18,18,18),a.line(0,46,r,46),a.setTextColor(0,0,0),a.setFont(void 0,"bold"),a.setFontSize(10),a.text(9,54,"Invoice No :"),a.setFont(void 0,"normal"),a.setTextColor(0,0,0),a.setFontSize(10),a.text(32,54,null===i||void 0===i?void 0:i.invoice_count),a.setTextColor(0,0,0),a.setFont(void 0,"bold"),a.setFontSize(10),a.text(r-32,54,"Dated:",{align:"right"}),a.setFont(void 0,"normal"),a.setTextColor(0,0,0),a.setFontSize(10),a.text(r-12,54,l()(null===i||void 0===i?void 0:i.created_at).format("DD-MMM-YYYY"),{align:"right"}),a.setTextColor(0,0,0),a.setFont(void 0,"bold"),a.setFontSize(10),a.text(9,61,"Purpose:"),a.setFont(void 0,"normal"),a.setTextColor(0,0,0),a.setFontSize(10),a.text(32,61,"".concat(null!==(c=null===F||void 0===F?void 0:F.internal_fee_reason)&&void 0!==c?c:"N/A")),a.setTextColor(0,0,0),a.setFont(void 0,"bold"),a.setFontSize(10),a.text(9,68,"Amount: "),a.setFont(void 0,"normal"),a.setTextColor(0,0,0),a.setFontSize(10),a.text(32,68,"Rs. ".concat(null===i||void 0===i?void 0:i.fee_payment_amount)),a.setTextColor(0,0,0),a.setFont(void 0,"bold"),a.setFontSize(11),a.text(9,97," ".concat(y?"Received Through: ":"Paid Through: ")),a.setFont(void 0,"normal"),a.text(44,97,"".concat(null===e||void 0===e?void 0:e.finance_bank_name,", ").concat(null===e||void 0===e?void 0:e.finance_bank_account_name,", A/c No:  ").concat(null===e||void 0===e?void 0:e.finance_bank_account_number)),a.setTextColor(0,0,0),a.setFont(void 0,"bold"),a.text(9,107," On Account of: ");var T="Being money ".concat(y?"received":"paid"," by ").concat(null===i||void 0===i?void 0:i.fee_payment_mode,", Transaction ID: ").concat(null!==(u=null===M||void 0===M?void 0:M.razorpay_order_id)&&void 0!==u?u:"N/A"," ,  Dated: ").concat(l()(null===i||void 0===i?void 0:i.created_at).format("DD-MMM-YYYY"),"  for Rs. ").concat(null===i||void 0===i?void 0:i.fee_payment_amount,".").concat(y?"From":"To"," ","".concat(null!==(v=null===I||void 0===I?void 0:I.studentFirstName)&&void 0!==v?v:""," ").concat(null!==(m=null===I||void 0===I?void 0:I.studentMiddleName)&&void 0!==m?m:""," ").concat(null!==(_=null===I||void 0===I?void 0:I.studentLastName)&&void 0!==_?_:""," "),", towards ").concat(null!==(f=null===F||void 0===F?void 0:F.internal_fee_reason)&&void 0!==f?f:"N/A","."),E=a.splitTextToSize(T,r-20);if(E.length>1){var B=113;a.setFont(void 0,"normal"),a.setFontSize(11),a.setTextColor(18,18,18),a.text(10,B,E,"left"),B=E.length+151}else{var R=113;a.setFontSize(11),a.setFont(void 0,"normal"),a.setTextColor(18,18,18),a.setFontSize(12),a.text(10,R,E,"left"),R=E.length+151}var P,D,O,G;(a.setTextColor(0,0,0),a.setFont(void 0,"bold"),a.setFontSize(11),a.text(9,131,"Bank Transaction Details: "),a.setFont(void 0,"normal"),a.text(9,138,"Payment Mode:  ".concat(null===i||void 0===i?void 0:i.fee_payment_mode)),null!==M&&void 0!==M&&M.razorpay_order_id)?a.text(9,144,"Transaction ID: ".concat(null!==(P=null===M||void 0===M?void 0:M.razorpay_order_id)&&void 0!==P?P:"N/A")):(a.text(9,144,"Bank Name: ".concat(null!==(D=null===e||void 0===e?void 0:e.fee_bank_name)&&void 0!==D?D:"N/A")),a.text(9,150,"Bank Holder Name: ".concat(null!==(O=null===e||void 0===e?void 0:e.finance_bank_account_name)&&void 0!==O?O:"N/A")),a.text(9,156,"UTR / Ref No.: ".concat(null!==(G=null===e||void 0===e?void 0:e.fee_utr_reference)&&void 0!==G?G:"N/A")),a.text(9,162,"Date: ".concat(l()(null===i||void 0===i?void 0:i.created_at).format("DD-MMM-YYYY"))),a.text(9,168,"Amount: ".concat(null===i||void 0===i?void 0:i.fee_payment_amount)),a.text(9,174,"Amount in Words: ".concat((d().toWords(i.fee_payment_amount.toString()).match(/[a-zA-Z0-9]+/g)||[]).map((function(e){return"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1))})).join(" ")," only.")));a.setFontSize(9),a.text(40,240,"".concat(C.staffFirstName," ").concat(null!==(h=C.staffMiddleName)&&void 0!==h?h:""," ").concat(C.staffLastName),{align:"center"}),a.setFont(void 0,"bold"),a.setFontSize(10),a.text(40,245,"Finance Manager",{align:"center"}),a.setFont(void 0,"normal"),a.setFontSize(9),a.text(153,240,"".concat(null!==(x=null===S||void 0===S||null===(g=S.displayPersonList)||void 0===g||null===(b=g[0])||void 0===b||null===(j=b.displayUser)||void 0===j?void 0:j.userLegalName)&&void 0!==x?x:"N/A"),{align:"center"}),a.setFont(void 0,"bold"),a.setFontSize(10),a.text(153,245,"".concat(null!==(p=null===S||void 0===S||null===(Z=S.displayPersonList)||void 0===Z||null===(k=Z[0])||void 0===k?void 0:k.displayTitle)&&void 0!==p?p:"N/A"),{align:"center"}),a.setTextColor(0,0,255),a.setFontSize(7),a.text(r-20,243,"Online Automated",null,50),a.text(r-18,244,"Generated fee receipt",null,50),a.text(r-14,246,"Through Qviple",null,50),a.setLineWidth(.2),a.setDrawColor(18,18,18),a.line(0,251,r,251),a.setTextColor(18,18,18),a.setFontSize(8),a.setFont(void 0,"normal"),a.text(r/2,259,"Note : No one except one who is making this certificate should interfere with any details of this invoice, othewise students will be expelled and legal action will be taken.","center"),window.open(a.output("bloburl",{filename:"".concat(null===I||void 0===I?void 0:I.studentFirstName," ").concat(null!==(N=null===I||void 0===I?void 0:I.studentMiddleName)&&void 0!==N?N:""," ").concat(null===I||void 0===I?void 0:I.studentLastName," -Internal Fee Receipt.pdf")}),"_blank")}},52124:function(e,i){i.Z={assign_title:"AssignStaffModal_assign_title__4DGBV",assign_search_container:"AssignStaffModal_assign_search_container__3x6RD",assign_search_input:"AssignStaffModal_assign_search_input__rO3c7",assign_show_list:"AssignStaffModal_assign_show_list__yHhf7",assign_show_list_each:"AssignStaffModal_assign_show_list_each__ACUEw",assign_each_paragraph:"AssignStaffModal_assign_each_paragraph__pMHTq",universal_modal:"AssignStaffModal_universal_modal__czmpB",is_mulitselect_container:"AssignStaffModal_is_mulitselect_container__0cPQ2"}},87049:function(e,i){i.Z={edit_modal_container:"EditConfirm_edit_modal_container__WfbTq",modal_header:"EditConfirm_modal_header__4sq5J",edit:"EditConfirm_edit__ziVGP",remove:"EditConfirm_remove__PCXLs",xlsx_update_btn:"EditConfirm_xlsx_update_btn__H3yM8",save_stop_btn:"EditConfirm_save_stop_btn__9NiZ5",update_to_btn:"EditConfirm_update_to_btn__ExCJv"}},29407:function(e,i){i.Z={refund_container:"AdmisisonRefund_refund_container__BTIz6",refund_container_title:"AdmisisonRefund_refund_container_title__Rwwk9",refund_total:"AdmisisonRefund_refund_total__7rRiv",refund_card:"AdmisisonRefund_refund_card__M65Il",refund_card_text_container:"AdmisisonRefund_refund_card_text_container__jp-8T",refund_card_text:"AdmisisonRefund_refund_card_text__eVyEv",export_card:"AdmisisonRefund_export_card__xse7V",export_card_text:"AdmisisonRefund_export_card_text__4VVsl",export_card_date:"AdmisisonRefund_export_card_date__Wejoy",admission_filter_icon:"AdmisisonRefund_admission_filter_icon__5ncUR",menu_icon:"AdmisisonRefund_menu_icon__WdVbN",both_filter:"AdmisisonRefund_both_filter__k26Hu",both_filter_with_name:"AdmisisonRefund_both_filter_with_name__4eJUc",tab_manage:"AdmisisonRefund_tab_manage__G7dJo"}},32804:function(e,i){i.Z={student_fees_header_container:"StudentAllFeesData_student_fees_header_container__06J8F",student_fees_header_column:"StudentAllFeesData_student_fees_header_column__7WxL2",student_fees_row_amount:"StudentAllFeesData_student_fees_row_amount__2QSk8",student_fees_btn_container:"StudentAllFeesData_student_fees_btn_container__rcsyt",student_fees_btn_container_active:"StudentAllFeesData_student_fees_btn_container_active__LiRxa",student_alll_fees_data:"StudentAllFeesData_student_alll_fees_data__CBPmP",student_admission_fees_container:"StudentAllFeesData_student_admission_fees_container__Fs6dX",student_internal_card:"StudentAllFeesData_student_internal_card__QP2oz",student_internal_card_btn_pay:"StudentAllFeesData_student_internal_card_btn_pay__CzvCh",student_internal_card_btn_paid:"StudentAllFeesData_student_internal_card_btn_paid__KP8Jd"}},16925:function(e,i){i.Z={right:"Income_right__XnzYj",rightHead:"Income_rightHead__1rLc6",rightBody:"Income_rightBody__fGEC5",income_detail:"Income_income_detail__IWoJa",detailTop:"Income_detailTop__4JXuu",detailTopMid:"Income_detailTopMid__yc2yv",modal_container:"Income_modal_container__HiGr+",modal_container_outer_header:"Income_modal_container_outer_header__F9c7X",modal_container_header:"Income_modal_container_header__td-Fb",card_container:"Income_card_container__ewKhQ",card_container_image:"Income_card_container_image__5XloP",card_container_inner:"Income_card_container_inner__JBmxr",admission_fees_row:"Income_admission_fees_row__MPJCs",close_icon:"Income_close_icon__Ozq4u",student_message_container:"Income_student_message_container__8KnPc",student_message_container_inner:"Income_student_message_container_inner__mRYpD",usm_institute_container:"Income_usm_institute_container__4LkYt",usm_institute:"Income_usm_institute__hlzdF",date_select:"Income_date_select__D3VkU",gsf_star_container:"Income_gsf_star_container__7gdUs"}}}]);
//# sourceMappingURL=8197.849bce41.chunk.js.map