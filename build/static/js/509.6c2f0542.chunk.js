(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[509],{63162:function(e,n,t){"use strict";var i=t(39230),l=t(51416),s=t(43504),d=t(72791),o=t(80184),a=function(e){var n=e.tab,t=e.isActive,d=e.isLink,a=e.parentState,r=e.onAction,c=e.url,u=(0,i.$G)().t;return d?(0,o.jsx)(s.rU,{className:t?l.Z.horizontal_tab_card_active:l.Z.horizontal_tab_card,to:c,state:a,children:(0,o.jsx)("h6",{children:u(null===n||void 0===n?void 0:n.label)})}):(0,o.jsx)("div",{className:t?l.Z.horizontal_tab_card_active:l.Z.horizontal_tab_card,onClick:function(){r(null===n||void 0===n?void 0:n.id)},children:(0,o.jsx)("h6",{children:u(null===n||void 0===n?void 0:n.label)})})};n.Z=(0,d.memo)(a)},98967:function(e,n,t){"use strict";var i=t(51416),l=t(80184);n.Z=function(e){var n=e.children;return(0,l.jsx)("div",{className:i.Z.horizontal_tab_wrapper,children:n})}},10509:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return E}});var i=t(29439),l=t(63687),s=t(39230),d=t(56959),o=t(90904),a=t(21348),r=t(98684),c=t(72791),u=t(43504),v=t(16871),_=t(98967),f=t(63162),h=t(23441),m=t(57588),p=t(91427),x=t(43317),j=t(55336),Z=t(1669),g=t(2651),y=t(3773),N=t(1095),b=t(80184),M=function(e){var n,t,i,l,d,o,a,c,u,_,f,h,m,p=e.history,x=(0,s.$G)().t,j=(0,v.UO)(),Z=(0,v.s0)();return(0,b.jsxs)("div",{className:y.Z.pending_fees_card,onClick:function(){var e;Z("/q/".concat(j.username,"/member/student/admission/profile"),{state:{sid:null===p||void 0===p||null===(e=p.student)||void 0===e?void 0:e._id,viewAs:"ADMISSION_ADMIN",collectAccess:"ADMISSION_ADMIN"}})},title:"Refund student fees",children:[(0,b.jsxs)("div",{className:y.Z.pending_fees_card_container,children:[(0,b.jsx)("img",{alt:"Student Avatar",src:null!==p&&void 0!==p&&null!==(n=p.student)&&void 0!==n&&n.studentProfilePhoto?"".concat(N.yI,"/").concat(null===p||void 0===p||null===(t=p.student)||void 0===t?void 0:t.studentProfilePhoto):"".concat(r.p3,"/feed-user-avatar.svg"),loading:"lazy"}),(0,b.jsxs)("div",{className:y.Z.pending_fees_card_inner,children:[(0,b.jsx)("h6",{children:"".concat(null===p||void 0===p||null===(i=p.student)||void 0===i?void 0:i.studentFirstName," ").concat(null!==p&&void 0!==p&&null!==(l=p.student)&&void 0!==l&&l.studentMiddleName?null===p||void 0===p||null===(d=p.student)||void 0===d?void 0:d.studentMiddleName:""," ").concat(null===p||void 0===p||null===(o=p.student)||void 0===o?void 0:o.studentLastName)}),(0,b.jsxs)("p",{children:[x("gr_number")," : ",null!==(a=null===p||void 0===p||null===(c=p.student)||void 0===c?void 0:c.studentGRNO)&&void 0!==a?a:"",null!==p&&void 0!==p&&null!==(u=p.student)&&void 0!==u&&null!==(_=u.department)&&void 0!==_&&_.dName?", ".concat(null===p||void 0===p||null===(f=p.student)||void 0===f||null===(h=f.department)||void 0===h?void 0:h.dName):""]})]})]}),(0,b.jsxs)("div",{className:y.Z.pending_fees_card_inner,children:[(0,b.jsxs)("h6",{children:[x("rs_only")," ",null!==(m=null===p||void 0===p?void 0:p.refund)&&void 0!==m?m:0]}),(0,b.jsx)("p",{children:x("excess_fees")})]})]})},L=function(e){var n,t,l,o=e.aid,a=e.totalRefund,u=(0,s.$G)().t,v=(0,c.useState)(""),_=(0,i.Z)(v,2),f=_[0],y=_[1],N=(0,c.useState)(1),L=(0,i.Z)(N,2),w=L[0],R=L[1],S=(0,c.useState)(!0),Y=(0,i.Z)(S,2),k=Y[0],D=Y[1],I=(0,h.YD)({skip:f}),A=(0,i.Z)(I,2),T=A[0],E=A[1],F=(0,x.ye)({data:{aid:o,page:w,limit:10,search:f},skip:!o}),C=F.admissionExcessFeeNotRefundedList,H=F.admissionExcessFeeNotRefundedListLoading;(0,c.useEffect)((function(){E&&k&&R((function(e){return e+1}))}),[E,k]),(0,c.useEffect)((function(){var e;if(null!==C&&void 0!==C&&null!==(e=C.list)&&void 0!==e&&e.length){var n,t=(0,p.f)(null===C||void 0===C||null===(n=C.list)||void 0===n?void 0:n.length);D((function(){return t}))}}),[null===C||void 0===C?void 0:C.list]);var O=(0,c.useCallback)((0,m.J)((function(e){R((function(){return 1})),y(e)}),1500),[]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:d.Z.fm_header_container,children:[(0,b.jsxs)("h6",{children:[u("total_refund_amount")," "," : "," ",u("rs_only")," ",null!==a&&void 0!==a?a:0]}),(0,b.jsx)("div",{className:d.Z.fm_search,children:(0,b.jsx)("section",{className:d.Z.fm_search_container,children:(0,b.jsxs)("div",{className:d.Z.fm_search_container_inner,children:[(0,b.jsx)("img",{className:d.Z.fm_search_icon,alt:"search icon",src:"".concat(r.dB,"/navbar-search.svg")}),(0,b.jsx)("input",{type:"text",placeholder:u("search"),onChange:function(e){e.target.value?O(e.target.value):(R((function(){return 1})),y(""))}})]})})})]}),null===C||void 0===C||null===(n=C.list)||void 0===n?void 0:n.map((function(e,n){var t;return(null===C||void 0===C||null===(t=C.list)||void 0===t?void 0:t.length)===n+1?(0,b.jsx)("div",{ref:T,children:(0,b.jsx)(M,{history:e})},null===e||void 0===e?void 0:e._id):(0,b.jsx)(M,{history:e},null===e||void 0===e?void 0:e._id)})),H?f?(0,b.jsx)(j.Z,{}):(0,b.jsx)(Z.Z,{}):f?0===(null===C||void 0===C||null===(t=C.list)||void 0===t?void 0:t.length)&&(0,b.jsx)(g.Z,{title:"No students fuond related this search."}):0===(null===C||void 0===C||null===(l=C.list)||void 0===l?void 0:l.length)&&(0,b.jsx)(g.Z,{title:"No students."})]})},w=t(76697),R=t(97892),S=t.n(R),Y=t(82824),k=t(6758),D=t(37782),I=function(e){var n=e.history,l=(0,c.useState)(""),s=(0,i.Z)(l,2),d=s[0],o=s[1],a=(0,c.useState)(!1),u=(0,i.Z)(a,2),v=u[0],_=u[1],f=(0,c.useState)(""),h=(0,i.Z)(f,2),m=h[0],p=h[1],x=(0,k.Nw)({rid:d,skip:!d}),Z=x.financeReceipt,g=x.financeReceiptRefetch;(0,c.useEffect)((function(){d&&g()}),[d,g]),(0,c.useEffect)((function(){null!==Z&&void 0!==Z&&Z.receipt&&null!==Z&&void 0!==Z&&Z.all_remain&&p(Z)}),[Z]),(0,c.useEffect)((function(){if(m){var e=new Worker(new URL(t.p+t.u(4951),t.b)),n=(0,D.Hs)(null===m||void 0===m?void 0:m.all_remain,null===m||void 0===m?void 0:m.receipt),i=n.institute,l=n.studentInfo,s=n.paymentReceiptInfo;e.postMessage({institute:i,studentInfo:l,paymentReceiptInfo:s,printReceiptType:"Refunded"===(null===s||void 0===s?void 0:s.transactonRefund)?"ADMISSION_REFUND":"ADMISSION"}),e.onmessage=function(n){n&&(window.open(n.data,"_blank"),_((function(e){return!e})),p(""),e.terminate())}}}),[m]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("img",{src:"".concat(r.J7,"/receipt.svg"),alt:"receipt icon",title:"Download Fees Receipt",onClick:function(){var e,t,i;null!==n&&void 0!==n&&null!==(e=n.fee_receipt)&&void 0!==e&&e._id&&(_((function(e){return!e})),o(null===n||void 0===n||null===(t=n.fee_receipt)||void 0===t?void 0:t._id),d===(null===n||void 0===n||null===(i=n.fee_receipt)||void 0===i?void 0:i._id)&&p(Z))}}),v&&(0,b.jsx)(j.Z,{})]})},A=function(e){var n,t,i,l,d,o,a,r,c,u,v,_,f,h,m,p,x,j,Z,g,y,M,L,R,k,D,A=e.history,T=(0,s.$G)().t;return(0,b.jsxs)("div",{className:w.Z.sidebarheader,style:{gap:"1%"},title:"Income"===(null===A||void 0===A?void 0:A.payment_module_type)?"":"View Receipt",children:[(0,b.jsxs)("div",{className:w.Z.history_image_container,style:{width:"50%"},children:[null!==A&&void 0!==A&&null!==(n=A.student)&&void 0!==n&&n.studentProfilePhoto?(0,b.jsx)("img",{src:"".concat(N.yI,"/").concat(null===A||void 0===A||null===(t=A.student)||void 0===t?void 0:t.studentProfilePhoto),alt:"qr code",style:{width:"60px",height:"60px",borderRadius:"12px"}}):null,(0,b.jsxs)("div",{className:w.Z.text,children:[(0,b.jsx)("p",{className:w.Z.rcv,children:T("paid_to")}),(0,b.jsx)("h6",{children:null!==A&&void 0!==A&&A.student?"".concat(null!==(i=null===A||void 0===A||null===(l=A.student)||void 0===l?void 0:l.studentFirstName)&&void 0!==i?i:""," ").concat(null!==(d=null===A||void 0===A||null===(o=A.student)||void 0===o?void 0:o.studentMiddleName)&&void 0!==d?d:""," ").concat(null!==(a=null===A||void 0===A||null===(r=A.student)||void 0===r?void 0:r.studentLastName)&&void 0!==a?a:""):""}),(0,b.jsxs)("p",{className:w.Z.rcv,children:[T("gr_number")," ",null!==(c=null===A||void 0===A||null===(u=A.student)||void 0===u?void 0:u.studentGRNO)&&void 0!==c?c:""]}),(0,b.jsx)("p",{className:w.Z.rcv,children:null!==(v=null===A||void 0===A||null===(_=A.student)||void 0===_||null===(f=_.fee_structure)||void 0===f?void 0:f.unique_structure_name)&&void 0!==v?v:""})]})]}),(0,b.jsxs)("div",{className:w.Z.text,style:{width:"27%"},children:[(0,b.jsx)("p",{className:w.Z.rcv,style:{width:"100%"},children:T("transaction_id")}),(0,b.jsx)("h6",{style:{width:"100%",wordWrap:"break-word"},children:null!==A&&void 0!==A&&null!==(h=A.fee_receipt)&&void 0!==h&&h.fee_utr_reference?null===A||void 0===A||null===(m=A.fee_receipt)||void 0===m?void 0:m.fee_utr_reference:"N/A"}),(0,b.jsxs)("p",{className:w.Z.rcv,style:{width:"100%"},children:[S()(null===A||void 0===A||null===(p=A.fee_receipt)||void 0===p?void 0:p.created_at).format("DD MMM YYYY"),", ",(0,Y.J)(null===A||void 0===A||null===(x=A.fee_receipt)||void 0===x?void 0:x.created_at,"LT")]})]}),(0,b.jsxs)("div",{className:w.Z.text,style:{width:"20%"},children:[(0,b.jsxs)("p",{className:w.Z.rcv,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[T("invoice_no")," ",null!==(j=null===A||void 0===A||null===(Z=A.fee_receipt)||void 0===Z?void 0:Z.invoice_count)&&void 0!==j?j:"N/A",(0,b.jsx)(I,{history:A})]}),(0,b.jsxs)("h6",{style:{width:"100%"},children:[T("rs_only")," ",null===A||void 0===A||null===(g=A.fee_receipt)||void 0===g?void 0:g.fee_payment_amount]}),(0,b.jsx)("p",{className:w.Z.rcv,style:{width:"100%"},children:"offline"===(null===A||void 0===A||null===(y=A.payment_mode)||void 0===y?void 0:y.toLowerCase())?null!==A&&void 0!==A&&null!==(M=A.fee_receipt)&&void 0!==M&&M.fee_payment_mode?"".concat(null===A||void 0===A||null===(L=A.fee_receipt)||void 0===L?void 0:L.fee_payment_mode):"Offline - No Receipt":"online"===(null===A||void 0===A||null===(R=A.payment_mode)||void 0===R?void 0:R.toLowerCase())?null!==A&&void 0!==A&&null!==(k=A.fee_receipt)&&void 0!==k&&k.fee_payment_mode?"".concat(null===A||void 0===A||null===(D=A.fee_receipt)||void 0===D?void 0:D.fee_payment_mode):"Online - No Receipt":null===A||void 0===A?void 0:A.payment_mode})]})]})},T=function(e){var n,t,l,o=e.aid,a=e.totalRefunded,u=(0,s.$G)().t,v=(0,c.useState)(""),_=(0,i.Z)(v,2),f=_[0],y=_[1],N=(0,c.useState)(1),M=(0,i.Z)(N,2),L=M[0],w=M[1],R=(0,c.useState)(!0),S=(0,i.Z)(R,2),Y=S[0],k=S[1],D=(0,h.YD)({skip:f}),I=(0,i.Z)(D,2),T=I[0],E=I[1],F=(0,x.oL)({data:{aid:o,page:L,limit:10,search:f},skip:!o}),C=F.admissionExcessFeeRefundedList,H=F.admissionExcessFeeRefundedListLoading;(0,c.useEffect)((function(){E&&Y&&w((function(e){return e+1}))}),[E,Y]),(0,c.useEffect)((function(){var e;if(null!==C&&void 0!==C&&null!==(e=C.list)&&void 0!==e&&e.length){var n,t=(0,p.f)(null===C||void 0===C||null===(n=C.list)||void 0===n?void 0:n.length);k((function(){return t}))}}),[null===C||void 0===C?void 0:C.list]);var O=(0,c.useCallback)((0,m.J)((function(e){w((function(){return 1})),y(e)}),1500),[]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:d.Z.fm_header_container,children:[(0,b.jsxs)("h6",{children:[u("total_refund")," "," : "," ",u("rs_only")," ",null!==a&&void 0!==a?a:0]}),(0,b.jsx)("div",{className:d.Z.fm_search,children:(0,b.jsx)("section",{className:d.Z.fm_search_container,children:(0,b.jsxs)("div",{className:d.Z.fm_search_container_inner,children:[(0,b.jsx)("img",{className:d.Z.fm_search_icon,alt:"search icon",src:"".concat(r.dB,"/navbar-search.svg")}),(0,b.jsx)("input",{type:"text",placeholder:u("search"),onChange:function(e){e.target.value?O(e.target.value):(w((function(){return 1})),y(""))}})]})})})]}),null===C||void 0===C||null===(n=C.list)||void 0===n?void 0:n.map((function(e,n){var t;return(null===C||void 0===C||null===(t=C.list)||void 0===t?void 0:t.length)===n+1?(0,b.jsx)("div",{ref:T,children:(0,b.jsx)(A,{history:e})},null===e||void 0===e?void 0:e._id):(0,b.jsx)(A,{history:e},null===e||void 0===e?void 0:e._id)})),H?f?(0,b.jsx)(j.Z,{}):(0,b.jsx)(Z.Z,{}):f?0===(null===C||void 0===C||null===(t=C.list)||void 0===t?void 0:t.length)&&(0,b.jsx)(g.Z,{title:"No students fuond related this search."}):0===(null===C||void 0===C||null===(l=C.list)||void 0===l?void 0:l.length)&&(0,b.jsx)(g.Z,{title:"No students."})]})},E=function(e){var n=e.totalRefund,t=e.aid,h=e.totalRefunded,m=(0,s.$G)().t,p=(0,u.lr)(),Z=(0,i.Z)(p,1)[0],g=(0,v.TH)(),y=(0,v.UO)(),N=(0,v.s0)(),M=(0,c.useState)(!1),w=(0,i.Z)(M,2),R=w[0],S=w[1],Y=(0,x.o5)(),k=(0,i.Z)(Y,1)[0],D=(0,x.Lg)(),I=(0,i.Z)(D,1)[0];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(l.Z,{children:[(0,b.jsx)(a.Z,{children:(0,b.jsxs)("div",{className:d.Z.fm_header_container,children:[(0,b.jsx)("h6",{children:m("excess_fees_refund")}),(0,b.jsx)("div",{className:d.Z.fm_both_filter,children:(0,b.jsx)("div",{onClick:function(){t&&(S((function(e){return!e})),"refunded"===Z.get("n")?I({aid:t}).then((function(){S((function(e){return!e})),N("/q/".concat(y.username,"/member/staff/admission?type=export"),{state:g.state})})).catch({}):k({aid:t}).then((function(){S((function(e){return!e})),N("/q/".concat(y.username,"/member/staff/admission?type=export"),{state:g.state})})).catch({}))},className:d.Z.fm_both_filter_with_name,children:(0,b.jsx)("img",{src:"".concat(r.J7,"/export.svg"),alt:"filter icon",style:{width:"2rem",height:"2rem"},title:"Export In Excel"})})})]})}),(0,b.jsx)(o.Z,{}),(0,b.jsxs)(a.Z,{customStyle:{paddingTop:"0"},children:[(0,b.jsx)(_.Z,{children:F.map((function(e){return(0,b.jsx)(f.Z,{tab:e,isLink:!0,isActive:"excess_fee"===e.id&&!Z.get("n")||Z.get("n")===e.id,parentState:g.state,url:"/q/".concat(y.username,"/member/staff/admission?type=excess").concat(e.urlKey)},null===e||void 0===e?void 0:e.id)}))}),(0,b.jsx)(o.Z,{customStyleBorder:{marginTop:"0"}})]}),(0,b.jsx)(a.Z,{customStyle:{paddingTop:"0"},children:"refunded"===Z.get("n")?(0,b.jsx)(T,{aid:t,totalRefunded:h}):(0,b.jsx)(L,{aid:t,totalRefund:n})})]}),R&&(0,b.jsx)(j.Z,{})]})},F=[{label:"excess_fee",id:"excess_fee",urlKey:""},{label:"refunded",id:"refunded",urlKey:"&n=refunded"}]},82824:function(e,n,t){"use strict";t.d(n,{J:function(){return o}});var i=t(99893),l=t.n(i),s=t(97892),d=t.n(s),o=function(e,n){return d().extend(l()),d()(e).format(n)}},99893:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(n,t,i){var l=t.prototype,s=l.format;i.en.formats=e,l.format=function(n){void 0===n&&(n="YYYY-MM-DDTHH:mm:ssZ");var t=this.$locale().formats,i=function(n,t){return n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(n,i,l){var s=l&&l.toUpperCase();return i||t[l]||e[l]||t[s].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,n,t){return n||t.slice(1)}))}))}(n,void 0===t?{}:t);return s.call(this,i)}}}()},3773:function(e,n){"use strict";n.Z={pending_fees_card:"PendingFees_pending_fees_card__-fyKu",pending_fees_card_container:"PendingFees_pending_fees_card_container__HBWkK",pending_fees_card_inner:"PendingFees_pending_fees_card_inner__Zi+6O",statistics_balance:"PendingFees_statistics_balance__px4LZ"}},76697:function(e,n){"use strict";n.Z={settle_card:"TransactionHistory_settle_card__WjSwI",settle_card_container:"TransactionHistory_settle_card_container__EIw4W",settle_card_text:"TransactionHistory_settle_card_text__3j20S",settle_paragraph:"TransactionHistory_settle_paragraph__x3Ovt",sidebarheader:"TransactionHistory_sidebarheader__oEDm9",history_image_container:"TransactionHistory_history_image_container__ZBhq9",text:"TransactionHistory_text__yimnr",rcv:"TransactionHistory_rcv__kuGgZ"}}}]);
//# sourceMappingURL=509.6c2f0542.chunk.js.map