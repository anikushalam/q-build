{"version":3,"file":"static/js/1876.e0dfbc85.chunk.js","mappings":"oQAYMA,EAAmBC,EAAAA,MAAW,kBAClC,sCAA8C,IAqIhD,UAnIgB,SAAHC,GAAkD,IAA5CC,EAAOD,EAAPC,QAASC,EAAMF,EAANE,OAAQC,EAAWH,EAAXG,YAAaC,EAAMJ,EAANI,OACvCC,GAAMC,EAAAA,EAAAA,MAAND,EACFE,GAAKC,EAAAA,EAAAA,KAAY,SAACC,GAAK,OAAKA,EAAMC,SAASH,EAAE,IACnDI,GAAoCC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA5CI,EAAUF,EAAA,GAAEG,EAAaH,EAAA,GAChCI,GAAgCL,EAAAA,EAAAA,WAAS,GAAMM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAAxCE,EAAQD,EAAA,GAAEE,EAAWF,EAAA,GACtBG,GAAWC,EAAAA,EAAAA,MACXC,GAASC,EAAAA,EAAAA,MACfC,GAAsCb,EAAAA,EAAAA,UAAS,CAC7Cc,OAAQ,GACRC,OAAQ,GACRC,SAAiB,OAAP3B,QAAO,IAAPA,OAAO,EAAPA,EAAS4B,sBACnBC,MAAO,GACPC,UAAW,GACXC,QAAS,GACTC,MAAO,KACPC,GAAApB,EAAAA,EAAAA,GAAAW,EAAA,GARKU,EAAWD,EAAA,GAAEE,EAAcF,EAAA,GASlCG,GAAkDzB,EAAAA,EAAAA,UAAS,CACzD0B,IAAK,GACLC,KAAK,IACLC,GAAA1B,EAAAA,EAAAA,GAAAuB,EAAA,GAHKI,EAAiBD,EAAA,GAAEE,EAAoBF,EAAA,GAI9CG,GAAyBC,EAAAA,EAAAA,MAAlBC,GAAqC/B,EAAAA,EAAAA,GAAA6B,EAAA,GAAvB,GACrBG,GAA4CC,EAAAA,EAAAA,IAAe,CACzDxC,GAAIJ,GAA4BI,EAChCyC,KAAiB,qBAAX9C,GAAiCC,GAAeI,IAFhD0C,EAAWH,EAAXG,YAAaC,EAAkBJ,EAAlBI,oBAKrBC,EAAAA,EAAAA,YAAU,WACChD,GAAc+C,GACzB,GAAG,CAAC3C,EAAIJ,EAAa+C,IAwCrB,OACEE,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAAA,EAAMC,iBAAiBC,SAAA,EACrCJ,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAAA,EAAMG,cAAcD,SAAA,CACtB,aAAXpD,GACCsD,EAAAA,EAAAA,KAAA,KAAAF,SAAInD,EAAE,2BAENqD,EAAAA,EAAAA,KAAA,KAAAF,SAAInD,EAAE,cAERqD,EAAAA,EAAAA,KAAA,OACEC,IAAI,kCACJC,IAAI,GACJC,QAAS,kBAAM7C,GAAc,EAAK,QAItCoC,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAAA,EAAMQ,YAAYN,SAAA,EAChCE,EAAAA,EAAAA,KAAA,OAAKL,UAAWC,EAAAA,EAAMS,GAAGP,UACvBE,EAAAA,EAAAA,KAAA,SACEM,KAAK,MACLC,YAAa5D,EAAE,YACf6D,SAAU,SAACC,GAAC,OACV/B,GAAcgC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIjC,GAAW,IAAET,OAAQyC,EAAEE,OAAOC,QAAQ,EAE5DC,UAAQ,MAIa,MAAb,OAAXpC,QAAW,IAAXA,OAAW,EAAXA,EAAaT,UACZ0B,EAAAA,EAAAA,MAAA,UACEY,KAAK,SACL7C,SAAUA,EACVkC,UAAWC,EAAAA,EAAMkB,OACjBX,QAtEe,WACvBzC,GAAY,SAACqD,GAAG,OAAMA,CAAG,IACzB5B,EAAe,CACbtC,GAAIJ,GAA4BI,EAChCwD,GAAI5B,EAAYT,OAChBgD,gBAAiBvC,IAEhBwC,MAAK,SAACC,GACLxD,GAAY,SAACqD,GAAG,OAAMA,CAAG,IACzBpD,EAAS,MAADwD,OAAOtD,EAAOuD,SAAQ,6BAA6B,CACzDrE,MAAO,CACLR,QAAS2E,EAAIG,KAAK9E,QAClB+E,SAAUJ,EAAIG,KAAKC,SACnB7E,YAAaA,EACb8E,WAAY7E,IAelB,IACC8E,OAAM,WACLxC,EAAqB,CACnBJ,IAAK,uBACLC,KAAK,GAET,GACJ,EAkCoCiB,SAAA,EAE1BE,EAAAA,EAAAA,KAAA,KAAAF,SAAInD,EAAE,iBACLc,IAAYuC,EAAAA,EAAAA,KAACyB,EAAAA,EAAY,UAK/BpE,IACC2C,EAAAA,EAAAA,KAAC0B,EAAAA,EAAc,CAAA5B,UACbE,EAAAA,EAAAA,KAAC5D,EAAgB,CACfuF,UAAW,SAACC,GAAC,OAAKtE,EAAcsE,EAAE,EAClCvE,WAAYA,EACZwE,aAAyB,OAAXtC,QAAW,IAAXA,OAAW,EAAXA,EAAauC,OAC3BtF,OAAQA,EACRC,YAAaA,EACbsF,UAAWvC,OAIjBQ,EAAAA,EAAAA,KAACgC,EAAAA,GAAW,CACVpD,IAAKG,EAAkBH,IACvBC,IAAKE,EAAkBF,IACvBoD,OAAQ,kBAAMjD,EAAqB,CAAEJ,IAAK,GAAIC,KAAK,GAAQ,EAC3DqD,SAAS,SACT5B,KAAK,YAIb,C","sources":["StaffTab/StudentTab/MainContent/Certificates/Leaving/Leaving.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport CustomSuspense from \"../../../../../Custom/SuspenseLoading/CustomSuspense\";\nimport {\n  useGetEditable,\n  useStudentLeaving,\n} from \"../../../../../hooks/institute/institute-staff-student-api\";\nimport LoaderButton from \"../../../../../Loader/LoaderButton\";\nimport { useTranslation } from \"react-i18next\";\nimport style from \"../CertificateDetail.module.css\";\nimport { Notfication } from \"../../../../../validation/Snackbar\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nconst CertificateModal = React.lazy(() =>\n  import(\"../CertificateModal/CertificateModal\")\n);\nconst Leaving = ({ student, viewAs, instituteId, status }) => {\n  const { t } = useTranslation();\n  const id = useSelector((state) => state.idChange.id);\n  const [addDisplay, setAddDisplay] = useState(false);\n  const [disabled, setDisabled] = useState(false);\n  const navigate = useNavigate();\n  const params = useParams();\n  const [leavingData, setLeavingData] = useState({\n    number: \"\",\n    reason: \"\",\n    previous: student?.studentPreviousSchool,\n    study: \"\",\n    behaviour: \"\",\n    remarks: \"\",\n    udise: \"\",\n  });\n  const [notificationState, setNotificationState] = useState({\n    msg: \"\",\n    run: false,\n  });\n  const [studentLeaving] = useStudentLeaving();\n  const { getEditable, getEditableRefetch } = useGetEditable({\n    id: instituteId ? instituteId : id,\n    skip: viewAs === \"DESIGNATION_SIDE\" ? !instituteId : !id,\n  });\n\n  useEffect(() => {\n    if ((id, instituteId)) getEditableRefetch();\n  }, [id, instituteId, getEditableRefetch]);\n\n  const onLeavingHandler = () => {\n    setDisabled((pre) => !pre);\n    studentLeaving({\n      id: instituteId ? instituteId : id,\n      gr: leavingData.number,\n      leavingFeedback: leavingData,\n    })\n      .then((res) => {\n        setDisabled((pre) => !pre);\n        navigate(`/q/${params.username}/student/certificate/form`, {\n          state: {\n            student: res.data.student,\n            download: res.data.download,\n            instituteId: instituteId,\n            is_leaving: status,\n          },\n        });\n        // setStudent(res.data.student);\n        // setDownload(res.data.download);\n        // setToggle({\n        //   id: instituteId ? instituteId : id,\n        //   gr: leavingData.number,\n        //   leavingFeedback: leavingData,\n        // });\n        // if (status === \"leaving\") {\n        //   setLeavingForm({ ...leavingform, leaving: true, transfer: false });\n        // } else if (status === \"transfer\") {\n        //   setLeavingForm({ ...leavingform, leaving: false, transfer: true });\n        // }\n      })\n      .catch(() => {\n        setNotificationState({\n          msg: \"something went wrong\",\n          run: true,\n        });\n      });\n  };\n\n  return (\n    <div className={style.complaintDetails}>\n      <div className={style.detailsHeader}>\n        {status === \"transfer\" ? (\n          <p>{t(\"transfer_certificate\")}</p>\n        ) : (\n          <p>{t(\"leaving\")}</p>\n        )}\n        <img\n          src=\"/images/menu-dots-dark-icon.svg\"\n          alt=\"\"\n          onClick={() => setAddDisplay(true)}\n        />\n      </div>\n\n      <div className={style.detailsBody}>\n        <div className={style.gr}>\n          <input\n            type=\"tel\"\n            placeholder={t(\"enter_gr\")}\n            onChange={(e) =>\n              setLeavingData({ ...leavingData, number: e.target.value })\n            }\n            required\n          />\n        </div>\n\n        {leavingData?.number !== \"\" && (\n          <button\n            type=\"submit\"\n            disabled={disabled}\n            className={style.getBtn}\n            onClick={onLeavingHandler}\n          >\n            <p>{t(\"cer_preview\")}</p>\n            {disabled && <LoaderButton />}\n          </button>\n        )}\n      </div>\n\n      {addDisplay && (\n        <CustomSuspense>\n          <CertificateModal\n            hideModal={(w) => setAddDisplay(w)}\n            addDisplay={addDisplay}\n            editableData={getEditable?.detail}\n            viewAs={viewAs}\n            instituteId={instituteId}\n            onRefetch={getEditableRefetch}\n          />\n        </CustomSuspense>\n      )}\n      <Notfication\n        msg={notificationState.msg}\n        run={notificationState.run}\n        setRun={() => setNotificationState({ msg: \"\", run: false })}\n        postiton=\"bottom\"\n        type=\"error\"\n      />\n    </div>\n  );\n};\n\nexport default Leaving;\n"],"names":["CertificateModal","React","_ref","student","viewAs","instituteId","status","t","useTranslation","id","useSelector","state","idChange","_useState","useState","_useState2","_slicedToArray","addDisplay","setAddDisplay","_useState3","_useState4","disabled","setDisabled","navigate","useNavigate","params","useParams","_useState5","number","reason","previous","studentPreviousSchool","study","behaviour","remarks","udise","_useState6","leavingData","setLeavingData","_useState7","msg","run","_useState8","notificationState","setNotificationState","_useStudentLeaving","useStudentLeaving","studentLeaving","_useGetEditable","useGetEditable","skip","getEditable","getEditableRefetch","useEffect","_jsxs","className","style","complaintDetails","children","detailsHeader","_jsx","src","alt","onClick","detailsBody","gr","type","placeholder","onChange","e","_objectSpread","target","value","required","getBtn","pre","leavingFeedback","then","res","concat","username","data","download","is_leaving","catch","LoaderButton","CustomSuspense","hideModal","w","editableData","detail","onRefetch","Notfication","setRun","postiton"],"sourceRoot":""}