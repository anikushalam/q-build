"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[3058],{47184:function(n,t,e){var o=e(1413),i=(e(72791),e(46807)),a=e(80184);t.Z=function(n){var t=n.dynamicImage,e=n.customStyle;return(0,a.jsx)("img",{src:t,alt:"Avatar icon",style:(0,o.Z)({},e),className:i.Z.avatar_image})}},8793:function(n,t,e){var o=e(72791),i=e(11105),a=e(80184);t.Z=function(n){var t=n.children;return(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)(i.Z,{}),children:t})}},83058:function(n,t,e){e.r(t),e.d(t,{default:function(){return k}});var o=e(29439),i=e(72791),a=e(39230),m=e(78687),c=e(23441),l=e(9447),d=e(70092),s={addComment:"AllComments_addComment__rGs-z",imgcontainer:"AllComments_imgcontainer__Klc4u",inputContainer:"AllComments_inputContainer__kbuUj",hr:"AllComments_hr__lGcA1",icons:"AllComments_icons__LaS0W",btn:"AllComments_btn__6H38+",comment_not_open:"AllComments_comment_not_open__EwMnj"},r=e(69721),u={eachComment:"EachComment_eachComment__tPduK",imgcontainer:"EachComment_imgcontainer__FiCLj",commentText:"EachComment_commentText__p-lso",likeReply:"EachComment_likeReply__yBW6e",eachCommentContainer:"EachComment_eachCommentContainer__Ed4yT",dots:"EachComment_dots__rL2SC",time:"EachComment_time__jOd3S"},v=e(13688),h=e(16256),_=e(8793),C=e(80184),p=i.lazy((function(){return e.e(5407).then(e.bind(e,5407))}));var f=function(n){var t=n.comment,e=n.pid,c=(0,i.useState)(!1),s=(0,o.Z)(c,2),f=s[0],j=s[1],x=i.useState(!0),g=(0,o.Z)(x,2),k=g[0],N=g[1],A=(0,a.$G)().t,I=(0,m.useSelector)((function(n){return n.idChange})),y=(0,m.useDispatch)(),E=(0,l.uD)({ids:{cid:null===t||void 0===t?void 0:t._id,id:null===I||void 0===I?void 0:I.id,viewAs:h.UJ},skip:k}),Z=E.commentLike,P=E.commentLikeRefetch;return i.useEffect((function(){Z&&(N(!0),y(d.p.addCommentLike({postId:e,commentId:null===t||void 0===t?void 0:t._id,like:Z.allLikeCount})))}),[Z]),(0,C.jsxs)("div",{className:u.eachCommentContainer,children:[(0,C.jsxs)("div",{className:u.eachComment,children:[(0,C.jsx)("div",{className:u.imgcontainer,children:(0,C.jsx)("img",{src:"1"!==(null===t||void 0===t?void 0:t.authorPhotoId)?"".concat(r.yI,"/").concat(t.authorProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:""})}),(0,C.jsxs)("div",{className:u.commentText,children:[(0,C.jsx)("h6",{children:null===t||void 0===t?void 0:t.authorUserName}),(0,C.jsx)("p",{children:null===t||void 0===t?void 0:t.commentDescription})]})]}),(0,C.jsxs)("div",{className:u.likeReply,children:[(0,C.jsxs)("p",{onClick:function(){N(!1),P()},children:[A("Like")," ",(0,C.jsx)("span",{children:null===t||void 0===t?void 0:t.allLikeCount})]}),(0,C.jsxs)("p",{onClick:function(){return j(!f)},children:[A("reply")," ",(0,C.jsx)("span",{children:null===t||void 0===t?void 0:t.allChildCommentCount})," "]})]}),(0,C.jsx)("div",{className:u.nested,children:(0,C.jsx)(_.Z,{children:f&&(null===t||void 0===t?void 0:t._id)&&(0,C.jsx)(p,{pcid:null===t||void 0===t?void 0:t._id,pid:e,allChildCommentCount:null===t||void 0===t?void 0:t.allChildCommentCount})})}),(0,C.jsx)("div",{className:u.dots,children:(0,C.jsx)("p",{className:u.time,children:(0,v.WU)(null===t||void 0===t?void 0:t.createdAt)})})]})},j=e(47184),x=e(39480),g=function(n){var t,e,u=n.pid,v=n.commentCount,_=n.commentCountIncrement,p=(0,i.useState)(1),g=(0,o.Z)(p,2),k=g[0],N=g[1],A=(0,a.$G)().t,I=(0,i.useRef)(""),y=(0,c.YD)(),E=(0,o.Z)(y,2),Z=E[0],P=E[1],S=(0,i.useState)(!0),b=(0,o.Z)(S,2),L=b[0],R=b[1],D=(0,m.useDispatch)(),U=(0,m.useSelector)((function(n){return n.postChange.comments})),w=(0,m.useSelector)((function(n){return n.idChange.id})),G=(0,l.RR)({data:{pid:u||"",viewAs:h.UJ,page:k,limit:10},skip:!1}),F=G.allPostComment,O=G.allPostCommentRefetch,T=(0,l.es)(),q=(0,o.Z)(T,1)[0],J=(0,x.gq)({id:w,skip:!w}),W=J.oneInstituteDashboard,$=J.oneInstituteDashboardRefetch;(0,i.useEffect)((function(){w&&$()}),[w,$]),(0,i.useEffect)((function(){P&&L&&N((function(n){return n+1}))}),[P,L]),(0,i.useEffect)((function(){O()}),[k,O]),(0,i.useEffect)((function(){null!==F&&void 0!==F&&F.comment&&D(d.p.addComment({postId:u,comment:null===F||void 0===F?void 0:F.comment})),10===(null===F||void 0===F?void 0:F.comment.length)?R(!0):R(!1)}),[null===F||void 0===F?void 0:F.comment,D,u]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:s.addComment,children:[(0,C.jsx)("div",{className:s.imgcontainer,children:(0,C.jsx)(j.Z,{dynamicImage:"1"!==(null===W||void 0===W||null===(t=W.institute)||void 0===t?void 0:t.photoId)?"".concat(r.yI,"/").concat(null===W||void 0===W||null===(e=W.institute)||void 0===e?void 0:e.insProfilePhoto):"/images/ins_default_profile.svg"})}),(0,C.jsxs)("div",{className:s.inputContainer,children:[(0,C.jsx)("input",{type:"text",ref:I,placeholder:A("all_comment"),className:"form-control ".concat(s.searchinput)}),(0,C.jsxs)("div",{className:s.icons,children:[(0,C.jsx)("img",{src:"/images/img-icon.svg",alt:""}),(0,C.jsx)("img",{src:"/images/emoji-icon.svg",alt:""})]})]})]}),(0,C.jsx)("div",{className:s.btn,onClick:function(){_(++v),q({comment:{commentDescription:I.current.value},pid:u,viewAs:h.UJ}).then((function(n){var t,e,o,i,a,m,c,l,s,r;D(d.p.addCreatedComment({postId:u,comment:{allChildCommentCount:null===(t=n.data)||void 0===t?void 0:t.comment.allChildCommentCount,allLikeCount:null===(e=n.data)||void 0===e?void 0:e.comment.allLikeCount,author:null===(o=n.data)||void 0===o?void 0:o.comment.author,authorName:null===(i=n.data)||void 0===i?void 0:i.comment.authorName,authorPhotoId:null===(a=n.data)||void 0===a?void 0:a.comment.authorPhotoId,authorProfilePhoto:null===(m=n.data)||void 0===m?void 0:m.comment.authorProfilePhoto,authorUserName:null===(c=n.data)||void 0===c?void 0:c.comment.authorUserName,commentDescription:null===(l=n.data)||void 0===l?void 0:l.comment.commentDescription,createdAt:null===(s=n.data)||void 0===s?void 0:s.comment.createdAt,_id:null===(r=n.data)||void 0===r?void 0:r.comment._id}}))})).catch({}),I.current.value=""},children:A("post")}),null===U||void 0===U?void 0:U.map((function(n){var t;return n.postId===u?null===n||void 0===n||null===(t=n.comment)||void 0===t?void 0:t.map((function(t,e){var o;return(null===n||void 0===n||null===(o=n.comment)||void 0===o?void 0:o.length)===e+1?(0,C.jsxs)("div",{className:s.eachComment,ref:Z,children:[(0,C.jsx)(f,{comment:t,pid:u}),(0,C.jsx)("hr",{})]},e):(0,C.jsxs)("div",{className:s.eachComment,children:[(0,C.jsx)(f,{comment:t,pid:u}),(0,C.jsx)("hr",{})]},e)})):""}))]})};var k=function(n){var t=n.pid,e=n.commentCount,m=n.commentOpen,c=n.comment_turned,l=(0,i.useState)(e),d=(0,o.Z)(l,2),r=d[0],u=d[1],v=(0,a.$G)().t;return(0,C.jsx)(C.Fragment,{children:m&&("On"!==c?(0,C.jsx)("section",{className:s.comment_not_open,children:v("comment_is_not_open_for_this_post")}):(0,C.jsx)("div",{style:{padding:"1vw"},children:(0,C.jsx)(g,{pid:t,commentCount:r,commentCountIncrement:function(n){u(n)}})}))})}},46807:function(n,t){t.Z={avatar_image:"Avatar_avatar_image__orRwR",custom_avatar_container:"Avatar_custom_avatar_container__f4BAI",custom_avatar_one:"Avatar_custom_avatar_one__XYFtg",custom_avatar_content:"Avatar_custom_avatar_content__E1nUO"}}}]);
//# sourceMappingURL=3058.17b40fd3.chunk.js.map