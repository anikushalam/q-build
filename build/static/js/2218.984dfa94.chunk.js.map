{"version":3,"file":"static/js/2218.984dfa94.chunk.js","mappings":"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","sources":["Profile/Institute/Pages/FollowButton.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  useBlockInstituteByInstitute,\n  useDashAllPost,\n  useUnblockInstituteByInstitute,\n} from \"../../../Post/Institute/Components/post-api\";\nimport {\n  useInstituteFollow,\n  useInstituteFollowList,\n  useInstituteOwnFollowingList,\n  useInstituteUnfollow,\n} from \"../../../Post/Institute/Components/search-api\";\nimport style from \"./InstituteProfileInfoTop.module.css\";\nimport { useTranslation } from \"react-i18next\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { instituteAs } from \"../../../constant/constant_value\";\nimport { postChangeAction } from \"../../../redux/store/post-slice\";\nimport { useOneInstituteProfile } from \"../../../hooks/dashboard/dashboard-api\";\n\nconst FollowButton = ({ institute }) => {\n  const { t } = useTranslation();\n  const [disabled, setDisabled] = useState(false);\n  const ids = useSelector((state) => state.idChange);\n  const allPosts = useSelector((state) => state.postChange.dashboardPosts);\n  const dispatch = useDispatch();\n  const [instituteFollow] = useInstituteFollow();\n  const [instituteUnfollow] = useInstituteUnfollow();\n  const [blockInstituteByInstitute] = useBlockInstituteByInstitute();\n  const [unblockInstituteByInstitute] = useUnblockInstituteByInstitute();\n  const { allDashPost, allDashPostRefetch } = useDashAllPost({\n    data: { id: ids?.id, viewAs: instituteAs },\n    skip: false,\n  });\n  const { oneInstituteProfileRefetch } = useOneInstituteProfile({\n    data: {\n      id: institute?._id,\n      type: \"ID\",\n    },\n    skip: !institute?._id,\n  });\n  const { instituteOwnFollowingList, instituteOwnFollowingListRefetch } =\n    useInstituteOwnFollowingList({\n      data: {\n        page: 1,\n        id: institute?._id,\n        limit: 100,\n      },\n      skip: !institute?._id,\n    });\n  const { instituteFollowList, instituteFollowListRefetch } =\n    useInstituteFollowList({\n      list: { page: 1, id: institute?._id, limit: 100 },\n      skip: !institute?._id,\n    });\n\n  useEffect(() => {\n    if (institute?._id) {\n      instituteFollowListRefetch();\n      instituteOwnFollowingListRefetch();\n    }\n  }, [institute?._id]);\n  useEffect(() => {\n    if (allDashPost?.post) {\n      dispatch(\n        postChangeAction.followPost({\n          post: allDashPost?.post,\n          profilePost: \"dash\",\n        })\n      );\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [allDashPost?.post]);\n\n  const unfollowDeleteHandler = (authorId) => {\n    const leftPost = [];\n    for (let i = 0; i < allPosts?.length; i++) {\n      if (allPosts[i].author !== authorId) {\n        leftPost.push(allPosts[i]);\n      }\n    }\n    return leftPost;\n  };\n\n  const followHandler = () => {\n    setDisabled(true);\n    instituteFollow({\n      followId: institute?._id,\n    })\n      .then((res) => {\n        if (res.data.message) {\n          instituteFollowListRefetch();\n          allDashPostRefetch();\n          setDisabled(false);\n        }\n      })\n      .catch({});\n  };\n  const unfollowHandler = () => {\n    setDisabled(true);\n\n    const posts = unfollowDeleteHandler(institute?._id);\n    // if(!posts.length){\n\n    // }\n    dispatch(\n      postChangeAction.unfollowPost({\n        posts: posts,\n      })\n    );\n    instituteUnfollow({\n      followId: institute?._id,\n    })\n      .then((res) => {\n        if (res.data.message) {\n          instituteFollowListRefetch();\n          // allDashPostRefetch();\n          setDisabled(false);\n        }\n      })\n      .catch({});\n  };\n\n  const onBlockInstitute = () => {\n    setDisabled(true);\n    blockInstituteByInstitute({\n      blockId: institute?._id,\n    })\n      .then(() => {\n        oneInstituteProfileRefetch();\n        setDisabled(false);\n      })\n      .catch({});\n  };\n\n  const onUnblockInstitute = () => {\n    setDisabled(true);\n    unblockInstituteByInstitute({\n      blockId: institute?._id,\n    })\n      .then(() => {\n        oneInstituteProfileRefetch();\n        setDisabled(false);\n      })\n      .catch({});\n  };\n  return (\n    <>\n      {institute?.blockedBy?.includes(ids?.id) ? (\n        <div className={style.profileedit} title=\"Unblock Institute\">\n          <button onClick={onUnblockInstitute}>{t(\"blocked\")}</button>\n        </div>\n      ) : instituteOwnFollowingList?.following?.some(\n          (val) => val?._id === ids?.id\n        ) ? (\n        <div className={style.profileedit} title=\"Block Institute\">\n          <button onClick={onBlockInstitute}>{t(\"block\")}</button>\n        </div>\n      ) : institute?.follower?.includes(ids?.id) ||\n        instituteFollowList?.iFollowers?.some((val) => val?._id === ids?.id) ? (\n        <div className={style.profileedit} title=\"Unfollow Institute\">\n          <button onClick={unfollowHandler} disabled={disabled}>\n            {t(\"unfollow\")}\n          </button>\n        </div>\n      ) : (\n        <div className={style.profileedit} title=\"Follow Institute\">\n          <button onClick={followHandler} disabled={disabled}>\n            {t(\"follow\")}\n          </button>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default FollowButton;\n"],"names":["_ref","_institute$blockedBy","_instituteOwnFollowin","_institute$follower","_instituteFollowList$","institute","t","useTranslation","disabled","setDisabled","useState","ids","useSelector","state","idChange","allPosts","postChange","dashboardPosts","dispatch","useDispatch","instituteFollow","useInstituteFollow","instituteUnfollow","useInstituteUnfollow","blockInstituteByInstitute","useBlockInstituteByInstitute","unblockInstituteByInstitute","useUnblockInstituteByInstitute","allDashPost","allDashPostRefetch","useDashAllPost","data","id","viewAs","instituteAs","skip","oneInstituteProfileRefetch","useOneInstituteProfile","_id","type","instituteOwnFollowingList","instituteOwnFollowingListRefetch","useInstituteOwnFollowingList","page","limit","instituteFollowList","instituteFollowListRefetch","useInstituteFollowList","list","useEffect","post","postChangeAction","followPost","profilePost","_jsx","_Fragment","children","blockedBy","includes","className","style","profileedit","title","onClick","onUnblockInstitute","blockId","then","catch","following","some","val","onBlockInstitute","follower","iFollowers","unfollowHandler","posts","authorId","leftPost","i","length","author","push","unfollowDeleteHandler","unfollowPost","followId","res","message","followHandler"],"sourceRoot":""}