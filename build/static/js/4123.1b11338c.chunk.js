"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[4123],{33030:function(e,o,n){var t=n(39230),i=n(80476),l=n(80184);o.Z=function(e){var o=e.label,n=e.onAction,a=e.customStyle,s=(0,t.$G)().t;return(0,l.jsx)("div",{className:i.Z.btn_container,onClick:function(){n()},style:a,children:s(o)})}},23984:function(e,o,n){var t=n(80476),i=n(80184);o.Z=function(e){var o=e.customStyle,n=e.children;return(0,i.jsx)("div",{className:t.Z.btn_wrapper,style:o,children:n})}},63687:function(e,o,n){var t=n(59393),i=n(80184);o.Z=function(e){var o=e.customStyle,n=e.children;return(0,i.jsx)("div",{className:t.Z.user_member_container_wrapper,style:o,children:n})}},14123:function(e,o,n){n.r(o),n.d(o,{default:function(){return G}});var t=n(29439),i=n(6758),l=n(98684),a=n(90904),s=n(33030),c=n(63687),r=n(21348),d=n(57588),u=n(91427),_=n(72791),v=n(39230),f=n(23441),h="FinanceModerator_moderator_card__T--+-",S="FinanceModerator_moderator_card_text_container__6jmpJ",m="FinanceModerator_menu_icon__QsTsH",C="FinanceModerator_selected_staff_container__xtfxL",x="FinanceModerator_selected_staff_text__8sr0m",j="FinanceModerator_modal_container__P1hQi",p="FinanceModerator_modal_container_header__FPMSZ",E=n(1095),A=n(89064),g=n(1413),Z=n(48293),N=n(19056),I=n(93638),P=n(80184),T=function(e){var o,n=e.onCloseEdit,t=e.setActivePopup,i=e.selectedStaff,s=e.moderatorState,c=e.onSelectRole,d=e.onUpdateModerator,u=(0,v.$G)().t;return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(Z.Z,{onClose:n,children:(0,P.jsxs)("div",{className:j,children:[(0,P.jsx)(r.Z,{children:(0,P.jsx)("div",{className:p,children:(0,P.jsx)("h6",{children:u("update_role_to_moderator")})})}),(0,P.jsx)(a.Z,{}),(0,P.jsxs)(r.Z,{customStyle:{paddingTop:"0"},children:[(0,P.jsxs)("section",{className:C,onClick:function(){return t("OPEN_STAFF_LIST")},style:{cursor:"pointer"},children:[(0,P.jsx)("img",{src:null!==i&&void 0!==i&&i.staffProfilePhoto?"".concat(E.yI,"/").concat(null===i||void 0===i?void 0:i.staffProfilePhoto):"".concat(l.p3,"/feed-user-avatar.svg"),alt:"staff profile avatar"}),(0,P.jsxs)("div",{className:x,children:[(0,P.jsx)("h6",{children:"".concat(null===i||void 0===i?void 0:i.staffFirstName," ").concat(null!==(o=null===i||void 0===i?void 0:i.staffMiddleName)&&void 0!==o?o:""," ").concat(null===i||void 0===i?void 0:i.staffLastName)}),(0,P.jsxs)("p",{children:[u("index_number")," "," : ",null===i||void 0===i?void 0:i.staffROLLNO]})]})]}),(0,P.jsx)(N.Z,{selectLabel:u("select_role_of_moderator"),selectedValue:u("please_select_role"),options:["Cash Receipt Section","Inventories Section","Fees Master Section","Payroll Section","Deposit Section","Bank Account Section","Data Export Authority","Scholarship Manager"],defalutValue:"CASH_RECEIPT_ACCESS"===(null===s||void 0===s?void 0:s.mod_role)?"Cash Receipt Section":"INVENTORY_ACCESS"===(null===s||void 0===s?void 0:s.mod_role)?"Inventories Section":"FEE_MASTER_ACCESS"===(null===s||void 0===s?void 0:s.mod_role)?"Fees Master Section":"PAYROLL_ACCESS"===(null===s||void 0===s?void 0:s.mod_role)?"Payroll Section":"DEPOSIT_ACCESS"===(null===s||void 0===s?void 0:s.mod_role)?"Deposit Section":"BANK_ACCOUNT_ACCESS"===(null===s||void 0===s?void 0:s.mod_role)?"Bank Account Section":"DATA_EXPORT_ACCESS"===(null===s||void 0===s?void 0:s.mod_role)?"Data Export Authority":"SCHOLARSHIP_ACCESS"===(null===s||void 0===s?void 0:s.mod_role)?"Scholarship Manager":"",onClick:c}),(0,P.jsx)(I.Z,{label:"update",onAction:d})]})]})})})},M=n(55336),R=n(49806),O=function(e){var o,n,t,i=e.staff,s=e.selectedId,c=e.onSelect,r=(0,v.$G)().t;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{className:R.Z.assign_show_list_each,style:s===(null===i||void 0===i?void 0:i._id)?{backgroundColor:"rgba(75, 26, 133, 0.1)"}:null,onClick:function(){c(i)},children:[(0,P.jsx)("img",{src:null!==i&&void 0!==i&&i.staffProfilePhoto?"".concat(E.yI,"/").concat(i.staffProfilePhoto):"".concat(l.p3,"/feed-staff-avatar.svg"),alt:"profile avatar"}),(0,P.jsxs)("div",{className:R.Z.assign_each_paragraph,children:[(0,P.jsx)("h6",{children:"".concat(null!==(o=null===i||void 0===i?void 0:i.staffFirstName)&&void 0!==o?o:""," ").concat(null!==(n=null===i||void 0===i?void 0:i.staffMiddleName)&&void 0!==n?n:""," ").concat(null!==(t=null===i||void 0===i?void 0:i.staffLastName)&&void 0!==t?t:"")}),(0,P.jsxs)("p",{children:[r("index")," "," : ",null===i||void 0===i?void 0:i.staffROLLNO]})]})]}),(0,P.jsx)(a.Z,{customStyleBorder:{margin:"0"}})]})},F=n(1669),y=n(2651),L=function(e){var o,n,s,c,h=e.onClose,S=e.selectedId,m=e.onSelectStaff,C=e.instituteId,x=(0,v.$G)().t,j=(0,_.useState)(""),p=(0,t.Z)(j,2),E=p[0],A=p[1],g=(0,_.useState)(1),N=(0,t.Z)(g,2),I=N[0],T=N[1],L=(0,_.useState)(!0),D=(0,t.Z)(L,2),k=D[0],b=D[1],B=(0,f.YD)({skip:E}),U=(0,t.Z)(B,2),G=U[0],H=U[1],w=(0,i.nb)({data:{id:C,page:I,limit:10,search:E},skip:!C}),V=w.instituteAllStaff,Y=w.instituteAllStaffLoading;(0,_.useEffect)((function(){H&&k&&T((function(e){return e+1}))}),[H,k]),(0,_.useEffect)((function(){var e;if(null!==V&&void 0!==V&&null!==(e=V.list)&&void 0!==e&&e.length){var o,n=(0,u.f)(null===V||void 0===V||null===(o=V.list)||void 0===o?void 0:o.length);b((function(){return n}))}}),[null===V||void 0===V||null===(o=V.list)||void 0===o?void 0:o.length]);var $=(0,_.useCallback)((0,d.J)((function(e){T((function(){return 1})),A(e)}),1500),[]),J=function(e){S===(null===e||void 0===e?void 0:e._id)||m(e)};return(0,P.jsx)(Z.Z,{onClose:h,children:(0,P.jsxs)("div",{className:R.Z.modal_container,children:[(0,P.jsx)(r.Z,{children:(0,P.jsxs)("div",{className:R.Z.modal_container_outer_header,children:[(0,P.jsx)("div",{className:R.Z.modal_container_header,children:(0,P.jsx)("h6",{children:x("staff_list")})}),(0,P.jsx)("img",{src:"".concat(l.J7,"/close.svg"),alt:"close icon",onClick:h})]})}),(0,P.jsx)(a.Z,{}),(0,P.jsxs)(r.Z,{customStyle:{paddingBottom:"1rem"},children:[(0,P.jsxs)("div",{className:R.Z.assign_search_container,style:{marginBottom:"1rem"},children:[(0,P.jsx)("input",{type:"text",placeholder:x("search"),className:R.Z.assign_search_input,onChange:function(e){e.target.value?$(e.target.value):(T((function(){return 1})),A(""))}}),(0,P.jsx)("img",{src:"".concat(l.dB,"/navbar-search.svg"),alt:"search icon"})]}),null===V||void 0===V||null===(n=V.list)||void 0===n?void 0:n.map((function(e,o){var n;return(null===V||void 0===V||null===(n=V.list)||void 0===n?void 0:n.length)===o+1?(0,P.jsx)("div",{ref:G,children:(0,P.jsx)(O,{staff:e,selectedId:S,onSelect:J})},null===e||void 0===e?void 0:e._id):(0,P.jsx)(O,{staff:e,selectedId:S,onSelect:J},null===e||void 0===e?void 0:e._id)})),Y?E?(0,P.jsx)(M.Z,{}):(0,P.jsx)(F.Z,{}):E?!(null!==V&&void 0!==V&&null!==(s=V.list)&&void 0!==s&&s.length)&&(0,P.jsx)(y.Z,{title:"No staff fuond related this search.",customStyleContainer:{marginTop:"1.5rem"}}):!(null!==V&&void 0!==V&&null!==(c=V.list)&&void 0!==c&&c.length)&&(0,P.jsx)(y.Z,{title:"No staff.",customStyleContainer:{marginTop:"1.5rem"}})]})]})})},D=function(e){var o,n,s=e.instituteId,c=e.fid,d=e.onClose,u=e.openModeratorMenu,f=e.openAs,h=e.onEdit,S=(0,v.$G)().t,m=(0,_.useState)("EDIT"===f?"PREVIEW_FORM":"OPEN_STAFF_LIST"),A=(0,t.Z)(m,2),R=A[0],O=A[1],F=(0,_.useState)("EDIT"===f?null===u||void 0===u?void 0:u.access_staff:""),y=(0,t.Z)(F,2),D=y[0],k=y[1],b=(0,_.useState)({mod_role:"EDIT"===f?null===u||void 0===u?void 0:u.access_role:"",sid:"EDIT"===f?null===u||void 0===u||null===(o=u.access_staff)||void 0===o?void 0:o._id:""}),B=(0,t.Z)(b,2),U=B[0],G=B[1],H=(0,i.iM)(),w=(0,t.Z)(H,1)[0];(0,_.useEffect)((function(){var e;"EDIT"===f&&(k(null===u||void 0===u?void 0:u.access_staff),G({mod_role:null===u||void 0===u?void 0:u.access_role,sid:null===u||void 0===u||null===(e=u.access_staff)||void 0===e?void 0:e._id}),O("PREVIEW_FORM"))}),[f]);var V=function(e){G((function(o){return(0,g.Z)((0,g.Z)({},o),{},{mod_role:"Cash Receipt Section"===e?"CASH_RECEIPT_ACCESS":"Inventories Section"===e?"INVENTORY_ACCESS":"Fees Master Section"===e?"FEE_MASTER_ACCESS":"Payroll Section"===e?"PAYROLL_ACCESS":"Deposit Section"===e?"DEPOSIT_ACCESS":"Bank Account Section"===e?"BANK_ACCOUNT_ACCESS":"Data Export Authority"===e?"DATA_EXPORT_ACCESS":"Scholarship Manager"===e?"SCHOLARSHIP_ACCESS":""})}))};return(0,P.jsxs)(P.Fragment,{children:["OPEN_STAFF_LIST"===R&&(0,P.jsx)(L,{onSelectStaff:function(e){k(e),G((function(o){return(0,g.Z)((0,g.Z)({},o),{},{sid:null===e||void 0===e?void 0:e._id})})),O("EDIT"===f?"PREVIEW_FORM":"ASSIGN_ROLE")},onClose:d,instituteId:s}),"ASSIGN_ROLE"===R&&(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(Z.Z,{onClose:d,children:(0,P.jsxs)("div",{className:j,children:[(0,P.jsx)(r.Z,{children:(0,P.jsx)("div",{className:p,children:(0,P.jsx)("h6",{children:S("assign_role_to_moderator")})})}),(0,P.jsx)(a.Z,{}),(0,P.jsxs)(r.Z,{customStyle:{paddingTop:"0"},children:[(0,P.jsxs)("section",{className:C,children:[(0,P.jsx)("img",{src:null!==D&&void 0!==D&&D.staffProfilePhoto?"".concat(E.yI,"/").concat(null===D||void 0===D?void 0:D.staffProfilePhoto):"".concat(l.p3,"/feed-user-avatar.svg"),alt:"staff profile avatar"}),(0,P.jsxs)("div",{className:x,children:[(0,P.jsx)("h6",{children:"".concat(null===D||void 0===D?void 0:D.staffFirstName," ").concat(null!==(n=null===D||void 0===D?void 0:D.staffMiddleName)&&void 0!==n?n:""," ").concat(null===D||void 0===D?void 0:D.staffLastName)}),(0,P.jsxs)("p",{children:[S("index_no"),null===D||void 0===D?void 0:D.staffROLLNO]})]})]}),(0,P.jsx)(N.Z,{selectLabel:S("select_role_of_moderator"),selectedValue:S("please_select_role"),options:["Cash Receipt Section","Inventories Section","Fees Master Section","Payroll Section","Deposit Section","Bank Account Section","Data Export Authority","Scholarship Manager"],defalutValue:"CASH_RECEIPT_ACCESS"===(null===U||void 0===U?void 0:U.mod_role)?"Cash Receipt Section":"INVENTORY_ACCESS"===(null===U||void 0===U?void 0:U.mod_role)?"Inventories Section":"FEE_MASTER_ACCESS"===(null===U||void 0===U?void 0:U.mod_role)?"Fees Master Section":"PAYROLL_ACCESS"===(null===U||void 0===U?void 0:U.mod_role)?"Payroll Section":"DEPOSIT_ACCESS"===(null===U||void 0===U?void 0:U.mod_role)?"Deposit Section":"BANK_ACCOUNT_ACCESS"===(null===U||void 0===U?void 0:U.mod_role)?"Bank Account Section":"DATA_EXPORT_ACCESS"===(null===U||void 0===U?void 0:U.mod_role)?"Data Export Authority":"SCHOLARSHIP_ACCESS"===(null===U||void 0===U?void 0:U.mod_role)?"Scholarship Manager":"",onClick:V}),(0,P.jsx)(I.Z,{label:"assign",onAction:function(){O("LOADING"),w({fid:c,addModerator:U}).then((function(){O(""),d()})).catch({})}})]}),"LOADING"===R&&(0,P.jsx)(M.Z,{})]})})}),"PREVIEW_FORM"===R&&(0,P.jsx)(T,{onCloseEdit:function(){d()},setActivePopup:O,selectedStaff:D,moderatorState:U,onSelectRole:V,onUpdateModerator:function(){h(U)}}),"LOADING"===R&&(0,P.jsx)(M.Z,{})]})},k=function(e){var o=e.onClose,n=e.financeId,l=e.openModeratorMenu,a=e.instituteId,s=(0,v.$G)().t,c=(0,_.useState)(!1),r=(0,t.Z)(c,2),d=r[0],u=r[1],f=(0,_.useState)(!1),h=(0,t.Z)(f,2),S=h[0],m=h[1],C=(0,i.G8)(),x=(0,t.Z)(C,1)[0],j=(0,i.E6)(),p=(0,t.Z)(j,1)[0],E=function(){m((function(e){return!e}))};return(0,P.jsx)(P.Fragment,{children:S?(0,P.jsx)(D,{onClose:E,onEdit:function(e){u((function(e){return!e})),E(),p({modId:null===l||void 0===l?void 0:l._id,updateModerator:{role:null===e||void 0===e?void 0:e.mod_role,staffId:null===e||void 0===e?void 0:e.sid}}).then((function(){u((function(e){return!e})),o()})).catch({})},openModeratorMenu:l,openAs:"EDIT",fid:n,instituteId:a}):(0,P.jsxs)(A.Z,{onClose:o,disabled:d,children:[(0,P.jsx)("h6",{onClick:E,children:s("edit")}),(0,P.jsx)("h6",{onClick:function(){u((function(e){return!e})),x({fid:n,modId:null===l||void 0===l?void 0:l._id}).then((function(){o(),u((function(e){return!e}))})).catch({})},children:s("delete")})]})})},b=function(e){var o,n,i,a,s,c,r,d=e.moderator,u=e.instituteId,f=e.financeId,C=(0,v.$G)().t,x=(0,_.useState)(""),j=(0,t.Z)(x,2),p=j[0],A=j[1];return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{className:h,children:[(0,P.jsx)("img",{src:null!==d&&void 0!==d&&null!==(o=d.access_staff)&&void 0!==o&&o.staffProfilePhoto?"".concat(E.yI,"/").concat(null===d||void 0===d||null===(n=d.access_staff)||void 0===n?void 0:n.staffProfilePhoto):"".concat(l.p3,"/feed-user-avatar.svg"),alt:"moderator avatar"}),(0,P.jsxs)("section",{className:S,children:[(0,P.jsx)("h6",{children:"".concat(null===d||void 0===d||null===(i=d.access_staff)||void 0===i?void 0:i.staffFirstName," ").concat(null!==(a=null===d||void 0===d||null===(s=d.access_staff)||void 0===s?void 0:s.staffMiddleName)&&void 0!==a?a:""," ").concat(null===d||void 0===d||null===(c=d.access_staff)||void 0===c?void 0:c.staffLastName)}),(0,P.jsxs)("p",{children:[C("index_number")," "," : ",null===d||void 0===d||null===(r=d.access_staff)||void 0===r?void 0:r.staffROLLNO]}),(0,P.jsx)("p",{children:"CASH_RECEIPT_ACCESS"===(null===d||void 0===d?void 0:d.access_role)?"Cash Receipt Section":"INVENTORY_ACCESS"===(null===d||void 0===d?void 0:d.access_role)?"Inventories Section":"FEE_MASTER_ACCESS"===(null===d||void 0===d?void 0:d.access_role)?"Fees Master Section":"PAYROLL_ACCESS"===(null===d||void 0===d?void 0:d.access_role)?"Payroll Section":"DEPOSIT_ACCESS"===(null===d||void 0===d?void 0:d.access_role)?"Deposit Section":"BANK_ACCOUNT_ACCESS"===(null===d||void 0===d?void 0:d.access_role)?"Bank Account Section":"DATA_EXPORT_ACCESS"===(null===d||void 0===d?void 0:d.access_role)?"Data Export Authority":"SCHOLARSHIP_ACCESS"===(null===d||void 0===d?void 0:d.access_role)?"Scholarship Manager":""})]}),(0,P.jsx)("img",{src:"".concat(l.J7,"/menu.svg"),alt:"menu icon",onClick:function(){A(d)},className:m,title:"Menu"})]}),p&&(0,P.jsx)(k,{onClose:function(){A("")},financeId:f,openModeratorMenu:p,instituteId:u})]})},B=n(56959),U=n(23984),G=function(e){var o,n,h,S,m=e.fid,C=e.instituteId,x=(0,v.$G)().t,j=(0,_.useState)(""),p=(0,t.Z)(j,2),E=p[0],A=p[1],g=(0,_.useState)(1),Z=(0,t.Z)(g,2),N=Z[0],I=Z[1],T=(0,_.useState)(!0),R=(0,t.Z)(T,2),O=R[0],L=R[1],k=(0,f.YD)({skip:E}),G=(0,t.Z)(k,2),H=G[0],w=G[1],V=(0,_.useState)(!1),Y=(0,t.Z)(V,2),$=Y[0],J=Y[1],W=(0,i.NK)({data:{fid:m,page:N,limit:10,search:E},skip:!m}),K=W.financeModerator,q=W.financeModeratorLoading;(0,_.useEffect)((function(){w&&O&&I((function(e){return e+1}))}),[w,O]),(0,_.useEffect)((function(){var e;if(null!==K&&void 0!==K&&null!==(e=K.list)&&void 0!==e&&e.length){var o,n=(0,u.f)(null===K||void 0===K||null===(o=K.list)||void 0===o?void 0:o.length);L((function(){return n}))}}),[null===K||void 0===K||null===(o=K.list)||void 0===o?void 0:o.length]);var X=(0,_.useCallback)((0,d.J)((function(e){I((function(){return 1})),A(e)}),1500),[]),Q=function(){J((function(e){return!e}))};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(c.Z,{children:[(0,P.jsx)(r.Z,{children:(0,P.jsxs)("div",{className:B.Z.fm_header_container,children:[(0,P.jsx)("h6",{children:x("finance_moderators")}),(0,P.jsx)("div",{className:B.Z.fm_search,children:(0,P.jsx)("section",{className:B.Z.fm_search_container,children:(0,P.jsxs)("div",{className:B.Z.fm_search_container_inner,children:[(0,P.jsx)("img",{className:B.Z.fm_search_icon,alt:"search icon",src:"".concat(l.dB,"/navbar-search.svg")}),(0,P.jsx)("input",{type:"text",placeholder:x("search"),onChange:function(e){e.target.value?X(e.target.value):(I((function(){return 1})),A(""))}})]})})})]})}),(0,P.jsx)(a.Z,{}),(0,P.jsxs)(r.Z,{customStyle:{paddingTop:"0.2rem"},children:[(0,P.jsx)(U.Z,{children:(0,P.jsx)(s.Z,{label:"add_new_moderator",onAction:Q})}),null===K||void 0===K||null===(n=K.list)||void 0===n?void 0:n.map((function(e,o){var n;return(null===K||void 0===K||null===(n=K.list)||void 0===n?void 0:n.length)===o+1?(0,P.jsx)("div",{ref:H,children:(0,P.jsx)(b,{moderator:e,financeId:m,instituteId:C})},null===e||void 0===e?void 0:e._id):(0,P.jsx)(b,{moderator:e,financeId:m,instituteId:C},null===e||void 0===e?void 0:e._id)})),q?E?(0,P.jsx)(M.Z,{}):(0,P.jsx)(F.Z,{}):E?!(null!==K&&void 0!==K&&null!==(h=K.list)&&void 0!==h&&h.length)&&(0,P.jsx)(y.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No moderator fuond related this search."}):!(null!==K&&void 0!==K&&null!==(S=K.list)&&void 0!==S&&S.length)&&(0,P.jsx)(y.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No moderator added."})]})]}),$&&(0,P.jsx)(D,{instituteId:C,fid:m,onClose:Q})]})}},49806:function(e,o){o.Z={modal_container:"PlateformUser_modal_container__tqwpY",modal_container_outer_header:"PlateformUser_modal_container_outer_header__HbF+9",modal_container_header:"PlateformUser_modal_container_header__QzyxM",modal_container_header_btn:"PlateformUser_modal_container_header_btn__dWfwA",assign_search_container:"PlateformUser_assign_search_container__dJdYj",assign_search_input:"PlateformUser_assign_search_input__aFF28",assign_show_list_each:"PlateformUser_assign_show_list_each__co2b1",assign_show_list_each_active:"PlateformUser_assign_show_list_each_active__SWwFS",assign_each_paragraph:"PlateformUser_assign_each_paragraph__bDgq6"}}}]);
//# sourceMappingURL=4123.1b11338c.chunk.js.map