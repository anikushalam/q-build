(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[509],{63687:function(e,n,t){"use strict";var i=t(59393),s=t(80184);n.Z=function(e){var n=e.customStyle,t=e.children;return(0,s.jsx)("div",{className:i.Z.user_member_container_wrapper,style:n,children:t})}},10509:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return E}});var i=t(29439),s=t(63687),l=t(39230),d=t(56959),o=t(90904),r=t(21348),a=t(98684),c=t(72791),u=t(43504),v=t(16871),f=t(98967),_=t(63162),m=t(23441),h=t(57588),p=t(91427),x=t(43317),j=t(55336),g=t(1669),y=t(2651),Z=t(3773),N=t(1095),M=t(80184),b=function(e){var n,t,i,s,d,o,r,c,u,f,_,m,h,p=e.history,x=(0,l.$G)().t,j=(0,v.UO)(),g=(0,v.s0)();return(0,M.jsxs)("div",{className:Z.Z.pending_fees_card,onClick:function(){var e;g("/q/".concat(j.username,"/member/student/admission/profile"),{state:{sid:null===p||void 0===p||null===(e=p.student)||void 0===e?void 0:e._id,viewAs:"ADMISSION_ADMIN",collectAccess:"ADMISSION_ADMIN"}})},title:"Refund student fees",children:[(0,M.jsxs)("div",{className:Z.Z.pending_fees_card_container,children:[(0,M.jsx)("img",{alt:"Student Avatar",src:null!==p&&void 0!==p&&null!==(n=p.student)&&void 0!==n&&n.studentProfilePhoto?"".concat(N.yI,"/").concat(null===p||void 0===p||null===(t=p.student)||void 0===t?void 0:t.studentProfilePhoto):"".concat(a.p3,"/feed-user-avatar.svg"),loading:"lazy"}),(0,M.jsxs)("div",{className:Z.Z.pending_fees_card_inner,children:[(0,M.jsx)("h6",{children:"".concat(null===p||void 0===p||null===(i=p.student)||void 0===i?void 0:i.studentFirstName," ").concat(null!==p&&void 0!==p&&null!==(s=p.student)&&void 0!==s&&s.studentMiddleName?null===p||void 0===p||null===(d=p.student)||void 0===d?void 0:d.studentMiddleName:""," ").concat(null===p||void 0===p||null===(o=p.student)||void 0===o?void 0:o.studentLastName)}),(0,M.jsxs)("p",{children:[x("gr_number")," : ",null!==(r=null===p||void 0===p||null===(c=p.student)||void 0===c?void 0:c.studentGRNO)&&void 0!==r?r:"",null!==p&&void 0!==p&&null!==(u=p.student)&&void 0!==u&&null!==(f=u.department)&&void 0!==f&&f.dName?", ".concat(null===p||void 0===p||null===(_=p.student)||void 0===_||null===(m=_.department)||void 0===m?void 0:m.dName):""]})]})]}),(0,M.jsxs)("div",{className:Z.Z.pending_fees_card_inner,children:[(0,M.jsxs)("h6",{children:[x("rs_only")," ",null!==(h=null===p||void 0===p?void 0:p.refund)&&void 0!==h?h:0]}),(0,M.jsx)("p",{children:x("excess_fees")})]})]})},S=function(e){var n,t,s,o=e.aid,r=e.totalRefund,u=(0,l.$G)().t,v=(0,c.useState)(""),f=(0,i.Z)(v,2),_=f[0],Z=f[1],N=(0,c.useState)(1),S=(0,i.Z)(N,2),w=S[0],L=S[1],Y=(0,c.useState)(!0),R=(0,i.Z)(Y,2),D=R[0],I=R[1],k=(0,m.YD)({skip:_}),T=(0,i.Z)(k,2),A=T[0],E=T[1],F=(0,x.ye)({data:{aid:o,page:w,limit:10,search:_},skip:!o}),O=F.admissionExcessFeeNotRefundedList,C=F.admissionExcessFeeNotRefundedListLoading;(0,c.useEffect)((function(){E&&D&&L((function(e){return e+1}))}),[E,D]),(0,c.useEffect)((function(){var e;if(null!==O&&void 0!==O&&null!==(e=O.list)&&void 0!==e&&e.length){var n,t=(0,p.f)(null===O||void 0===O||null===(n=O.list)||void 0===n?void 0:n.length);I((function(){return t}))}}),[null===O||void 0===O?void 0:O.list]);var H=(0,c.useCallback)((0,h.J)((function(e){L((function(){return 1})),Z(e)}),1500),[]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:d.Z.fm_header_container,children:[(0,M.jsxs)("h6",{children:[u("total_refund_amount")," "," : "," ",u("rs_only")," ",null!==r&&void 0!==r?r:0]}),(0,M.jsx)("div",{className:d.Z.fm_search,children:(0,M.jsx)("section",{className:d.Z.fm_search_container,children:(0,M.jsxs)("div",{className:d.Z.fm_search_container_inner,children:[(0,M.jsx)("img",{className:d.Z.fm_search_icon,alt:"search icon",src:"".concat(a.dB,"/navbar-search.svg")}),(0,M.jsx)("input",{type:"text",placeholder:u("search"),onChange:function(e){e.target.value?H(e.target.value):(L((function(){return 1})),Z(""))}})]})})})]}),null===O||void 0===O||null===(n=O.list)||void 0===n?void 0:n.map((function(e,n){var t;return(null===O||void 0===O||null===(t=O.list)||void 0===t?void 0:t.length)===n+1?(0,M.jsx)("div",{ref:A,children:(0,M.jsx)(b,{history:e})},null===e||void 0===e?void 0:e._id):(0,M.jsx)(b,{history:e},null===e||void 0===e?void 0:e._id)})),C?_?(0,M.jsx)(j.Z,{}):(0,M.jsx)(g.Z,{}):_?0===(null===O||void 0===O||null===(t=O.list)||void 0===t?void 0:t.length)&&(0,M.jsx)(y.Z,{title:"No students found related this search."}):0===(null===O||void 0===O||null===(s=O.list)||void 0===s?void 0:s.length)&&(0,M.jsx)(y.Z,{title:"No students."})]})},w=t(76697),L=t(97892),Y=t.n(L),R=t(82824),D=t(6758),I=t(37782),k=function(e){var n=e.history,s=(0,c.useState)(""),l=(0,i.Z)(s,2),d=l[0],o=l[1],r=(0,c.useState)(!1),u=(0,i.Z)(r,2),v=u[0],f=u[1],_=(0,c.useState)(""),m=(0,i.Z)(_,2),h=m[0],p=m[1],x=(0,D.Nw)({rid:d,skip:!d}),g=x.financeReceipt,y=x.financeReceiptRefetch;(0,c.useEffect)((function(){d&&y()}),[d,y]),(0,c.useEffect)((function(){null!==g&&void 0!==g&&g.receipt&&null!==g&&void 0!==g&&g.all_remain&&p(g)}),[g]),(0,c.useEffect)((function(){if(h){var e=new Worker(new URL(t.p+t.u(4942),t.b)),n=(0,I.Hs)(null===h||void 0===h?void 0:h.all_remain,null===h||void 0===h?void 0:h.receipt),i=n.institute,s=n.studentInfo,l=n.paymentReceiptInfo;e.postMessage({institute:i,studentInfo:s,paymentReceiptInfo:l,printReceiptType:"Refunded"===(null===l||void 0===l?void 0:l.transactonRefund)?"ADMISSION_REFUND":"ADMISSION"}),e.onmessage=function(n){n&&(window.open(n.data,"_blank"),f((function(e){return!e})),p(""),e.terminate())}}}),[h]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("img",{src:"".concat(a.J7,"/receipt.svg"),alt:"receipt icon",title:"Download Fees Receipt",onClick:function(){var e,t,i;null!==n&&void 0!==n&&null!==(e=n.fee_receipt)&&void 0!==e&&e._id&&(f((function(e){return!e})),o(null===n||void 0===n||null===(t=n.fee_receipt)||void 0===t?void 0:t._id),d===(null===n||void 0===n||null===(i=n.fee_receipt)||void 0===i?void 0:i._id)&&p(g))}}),v&&(0,M.jsx)(j.Z,{})]})},T=function(e){var n,t,i,s,d,o,r,a,c,u,v,f,_,m,h,p,x,j,g,y,Z,b,S,L,D,I,T=e.history,A=(0,l.$G)().t;return(0,M.jsxs)("div",{className:w.Z.sidebarheader,style:{gap:"1%"},title:"Income"===(null===T||void 0===T?void 0:T.payment_module_type)?"":"View Receipt",children:[(0,M.jsxs)("div",{className:w.Z.history_image_container,style:{width:"50%"},children:[null!==T&&void 0!==T&&null!==(n=T.student)&&void 0!==n&&n.studentProfilePhoto?(0,M.jsx)("img",{src:"".concat(N.yI,"/").concat(null===T||void 0===T||null===(t=T.student)||void 0===t?void 0:t.studentProfilePhoto),alt:"qr code",style:{width:"60px",height:"60px",borderRadius:"12px"}}):null,(0,M.jsxs)("div",{className:w.Z.text,children:[(0,M.jsx)("p",{className:w.Z.rcv,children:A("paid_to")}),(0,M.jsx)("h6",{children:null!==T&&void 0!==T&&T.student?"".concat(null!==(i=null===T||void 0===T||null===(s=T.student)||void 0===s?void 0:s.studentFirstName)&&void 0!==i?i:""," ").concat(null!==(d=null===T||void 0===T||null===(o=T.student)||void 0===o?void 0:o.studentMiddleName)&&void 0!==d?d:""," ").concat(null!==(r=null===T||void 0===T||null===(a=T.student)||void 0===a?void 0:a.studentLastName)&&void 0!==r?r:""):""}),(0,M.jsxs)("p",{className:w.Z.rcv,children:[A("gr_number")," ",null!==(c=null===T||void 0===T||null===(u=T.student)||void 0===u?void 0:u.studentGRNO)&&void 0!==c?c:""]}),(0,M.jsx)("p",{className:w.Z.rcv,children:null!==(v=null===T||void 0===T||null===(f=T.student)||void 0===f||null===(_=f.fee_structure)||void 0===_?void 0:_.unique_structure_name)&&void 0!==v?v:""})]})]}),(0,M.jsxs)("div",{className:w.Z.text,style:{width:"27%"},children:[(0,M.jsx)("p",{className:w.Z.rcv,style:{width:"100%"},children:A("transaction_id")}),(0,M.jsx)("h6",{style:{width:"100%",wordWrap:"break-word"},children:null!==T&&void 0!==T&&null!==(m=T.fee_receipt)&&void 0!==m&&m.fee_utr_reference?null===T||void 0===T||null===(h=T.fee_receipt)||void 0===h?void 0:h.fee_utr_reference:"N/A"}),(0,M.jsxs)("p",{className:w.Z.rcv,style:{width:"100%"},children:[Y()(null===T||void 0===T||null===(p=T.fee_receipt)||void 0===p?void 0:p.created_at).format("DD MMM YYYY"),", ",(0,R.J)(null===T||void 0===T||null===(x=T.fee_receipt)||void 0===x?void 0:x.created_at,"LT")]})]}),(0,M.jsxs)("div",{className:w.Z.text,style:{width:"20%"},children:[(0,M.jsxs)("p",{className:w.Z.rcv,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[A("invoice_no")," ",null!==(j=null===T||void 0===T||null===(g=T.fee_receipt)||void 0===g?void 0:g.invoice_count)&&void 0!==j?j:"N/A",(0,M.jsx)(k,{history:T})]}),(0,M.jsxs)("h6",{style:{width:"100%"},children:[A("rs_only")," ",null===T||void 0===T||null===(y=T.fee_receipt)||void 0===y?void 0:y.fee_payment_amount]}),(0,M.jsx)("p",{className:w.Z.rcv,style:{width:"100%"},children:"offline"===(null===T||void 0===T||null===(Z=T.payment_mode)||void 0===Z?void 0:Z.toLowerCase())?null!==T&&void 0!==T&&null!==(b=T.fee_receipt)&&void 0!==b&&b.fee_payment_mode?"".concat(null===T||void 0===T||null===(S=T.fee_receipt)||void 0===S?void 0:S.fee_payment_mode):"Offline - No Receipt":"online"===(null===T||void 0===T||null===(L=T.payment_mode)||void 0===L?void 0:L.toLowerCase())?null!==T&&void 0!==T&&null!==(D=T.fee_receipt)&&void 0!==D&&D.fee_payment_mode?"".concat(null===T||void 0===T||null===(I=T.fee_receipt)||void 0===I?void 0:I.fee_payment_mode):"Online - No Receipt":null===T||void 0===T?void 0:T.payment_mode})]})]})},A=function(e){var n,t,s,o=e.aid,r=e.totalRefunded,u=(0,l.$G)().t,v=(0,c.useState)(""),f=(0,i.Z)(v,2),_=f[0],Z=f[1],N=(0,c.useState)(1),b=(0,i.Z)(N,2),S=b[0],w=b[1],L=(0,c.useState)(!0),Y=(0,i.Z)(L,2),R=Y[0],D=Y[1],I=(0,m.YD)({skip:_}),k=(0,i.Z)(I,2),A=k[0],E=k[1],F=(0,x.oL)({data:{aid:o,page:S,limit:10,search:_},skip:!o}),O=F.admissionExcessFeeRefundedList,C=F.admissionExcessFeeRefundedListLoading;(0,c.useEffect)((function(){E&&R&&w((function(e){return e+1}))}),[E,R]),(0,c.useEffect)((function(){var e;if(null!==O&&void 0!==O&&null!==(e=O.list)&&void 0!==e&&e.length){var n,t=(0,p.f)(null===O||void 0===O||null===(n=O.list)||void 0===n?void 0:n.length);D((function(){return t}))}}),[null===O||void 0===O?void 0:O.list]);var H=(0,c.useCallback)((0,h.J)((function(e){w((function(){return 1})),Z(e)}),1500),[]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:d.Z.fm_header_container,children:[(0,M.jsxs)("h6",{children:[u("total_refund")," "," : "," ",u("rs_only")," ",null!==r&&void 0!==r?r:0]}),(0,M.jsx)("div",{className:d.Z.fm_search,children:(0,M.jsx)("section",{className:d.Z.fm_search_container,children:(0,M.jsxs)("div",{className:d.Z.fm_search_container_inner,children:[(0,M.jsx)("img",{className:d.Z.fm_search_icon,alt:"search icon",src:"".concat(a.dB,"/navbar-search.svg")}),(0,M.jsx)("input",{type:"text",placeholder:u("search"),onChange:function(e){e.target.value?H(e.target.value):(w((function(){return 1})),Z(""))}})]})})})]}),null===O||void 0===O||null===(n=O.list)||void 0===n?void 0:n.map((function(e,n){var t;return(null===O||void 0===O||null===(t=O.list)||void 0===t?void 0:t.length)===n+1?(0,M.jsx)("div",{ref:A,children:(0,M.jsx)(T,{history:e})},null===e||void 0===e?void 0:e._id):(0,M.jsx)(T,{history:e},null===e||void 0===e?void 0:e._id)})),C?_?(0,M.jsx)(j.Z,{}):(0,M.jsx)(g.Z,{}):_?0===(null===O||void 0===O||null===(t=O.list)||void 0===t?void 0:t.length)&&(0,M.jsx)(y.Z,{title:"No students found related this search."}):0===(null===O||void 0===O||null===(s=O.list)||void 0===s?void 0:s.length)&&(0,M.jsx)(y.Z,{title:"No students."})]})},E=function(e){var n=e.totalRefund,t=e.aid,m=e.totalRefunded,h=(0,l.$G)().t,p=(0,u.lr)(),g=(0,i.Z)(p,1)[0],y=(0,v.TH)(),Z=(0,v.UO)(),N=(0,v.s0)(),b=(0,c.useState)(!1),w=(0,i.Z)(b,2),L=w[0],Y=w[1],R=(0,x.o5)(),D=(0,i.Z)(R,1)[0],I=(0,x.Lg)(),k=(0,i.Z)(I,1)[0];return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(s.Z,{children:[(0,M.jsx)(r.Z,{children:(0,M.jsxs)("div",{className:d.Z.fm_header_container,children:[(0,M.jsx)("h6",{children:h("excess_fees_refund")}),(0,M.jsx)("div",{className:d.Z.fm_both_filter,children:(0,M.jsx)("div",{onClick:function(){t&&(Y((function(e){return!e})),"refunded"===g.get("n")?k({aid:t}).then((function(){var e;Y((function(e){return!e}));var n="Institute"===(null===(e=y.state)||void 0===e?void 0:e.urlOffSet)?"/q/".concat(Z.username,"/institute/member/finance?type=export"):"/q/".concat(Z.username,"/member/staff/finance?type=export");N(n,{state:y.state})})).catch({}):D({aid:t}).then((function(){var e;Y((function(e){return!e}));var n="Institute"===(null===(e=y.state)||void 0===e?void 0:e.urlOffSet)?"/q/".concat(Z.username,"/institute/member/finance?type=export"):"/q/".concat(Z.username,"/member/staff/finance?type=export");N(n,{state:y.state})})).catch({}))},className:d.Z.fm_both_filter_with_name,children:(0,M.jsx)("img",{src:"".concat(a.J7,"/export.svg"),alt:"filter icon",style:{width:"2rem",height:"2rem"},title:"Export In Excel"})})})]})}),(0,M.jsx)(o.Z,{}),(0,M.jsxs)(r.Z,{customStyle:{paddingTop:"0"},children:[(0,M.jsx)(f.Z,{children:F.map((function(e){var n;return(0,M.jsx)(_.Z,{tab:e,isLink:!0,isActive:"excess_fee"===e.id&&!g.get("n")||g.get("n")===e.id,parentState:y.state,url:"Institute"===(null===(n=y.state)||void 0===n?void 0:n.urlOffSet)?"/q/".concat(Z.username,"/institute/member/finance?type=excess").concat(e.urlKey):"/q/".concat(Z.username,"/member/staff/finance?type=excess").concat(e.urlKey)},null===e||void 0===e?void 0:e.id)}))}),(0,M.jsx)(o.Z,{customStyleBorder:{marginTop:"0"}})]}),(0,M.jsx)(r.Z,{customStyle:{paddingTop:"0"},children:"refunded"===g.get("n")?(0,M.jsx)(A,{aid:t,totalRefunded:m}):(0,M.jsx)(S,{aid:t,totalRefund:n})})]}),L&&(0,M.jsx)(j.Z,{})]})},F=[{label:"excess_fee",id:"excess_fee",urlKey:""},{label:"refunded",id:"refunded",urlKey:"&n=refunded"}]},82824:function(e,n,t){"use strict";t.d(n,{J:function(){return o},Z:function(){return r}});var i=t(99893),s=t.n(i),l=t(97892),d=t.n(l),o=function(e,n){return d().extend(s()),d()(e).format(n)},r=function(e,n,t){var i;return d()()[e]("".concat(null===(i=d()(t))||void 0===i?void 0:i.format("YYYY-MM-DD")),n)}},99893:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(n,t,i){var s=t.prototype,l=s.format;i.en.formats=e,s.format=function(n){void 0===n&&(n="YYYY-MM-DDTHH:mm:ssZ");var t=this.$locale().formats,i=function(n,t){return n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(n,i,s){var l=s&&s.toUpperCase();return i||t[s]||e[s]||t[l].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,n,t){return n||t.slice(1)}))}))}(n,void 0===t?{}:t);return l.call(this,i)}}}()},3773:function(e,n){"use strict";n.Z={pending_fees_card:"PendingFees_pending_fees_card__-fyKu",pending_fees_card_container:"PendingFees_pending_fees_card_container__HBWkK",pending_fees_card_inner:"PendingFees_pending_fees_card_inner__Zi+6O",statistics_balance:"PendingFees_statistics_balance__px4LZ"}},76697:function(e,n){"use strict";n.Z={settle_card:"TransactionHistory_settle_card__WjSwI",settle_card_container:"TransactionHistory_settle_card_container__EIw4W",settle_card_text:"TransactionHistory_settle_card_text__3j20S",settle_paragraph:"TransactionHistory_settle_paragraph__x3Ovt",sidebarheader:"TransactionHistory_sidebarheader__oEDm9",history_image_container:"TransactionHistory_history_image_container__ZBhq9",text:"TransactionHistory_text__yimnr",rcv:"TransactionHistory_rcv__kuGgZ"}}}]);
//# sourceMappingURL=509.ff7973b9.chunk.js.map