"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[47912],{47912:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Y});var i=n(72791),s=n(16871),a=n(87087),l=n(10406),o=n(43504),d=n(39230),r=n(98734),c=n(21640),u=n(33662),_=n(34637),v=n(35351),m=n(6200),h=n(7893),p=n(64393),x=n(80184);const g=function(e){var t,n,i,a,l,o,r,c,u,g,j,f,y,Z;let{tid:N,transport:b,onRefetch:S,carryParentState:D,accessRole:k,accessTpye:I,callApi:T}=e;const{t:w}=(0,d.$G)(),P=(0,s.TH)();return(0,x.jsx)("div",{className:_.Z.MiddleContent,style:"category"===(null===P||void 0===P||null===(t=P.search)||void 0===t?void 0:t.substring(9))||"structure"===(null===P||void 0===P||null===(n=P.search)||void 0===n?void 0:n.substring(9))?{marginTop:"0"}:{color:"inherit"},children:(0,x.jsxs)("div",{className:_.Z.MiddleContentLeft,children:[(0,x.jsx)("div",{className:_.Z.tabs,children:(0,x.jsx)(v.Z,{search:null===P||void 0===P?void 0:P.search,carryParentState:D})}),!(null!==P&&void 0!==P&&P.search)&&(0,x.jsxs)("div",{className:_.Z.item,children:[(0,x.jsx)(m.Z,{carryParentState:D,activeTab:"vehicle",accessRole:k,accessTpye:I,callApi:T,children:(0,x.jsxs)("div",{className:_.Z.itemIcon,children:[(0,x.jsx)("img",{src:"/images/member_tab/transport/transport-vehicle-icon.svg",alt:"moderator icon"}),(0,x.jsx)("p",{children:w("transport_vehicles")})]})}),(0,x.jsx)(m.Z,{carryParentState:D,activeTab:"personal",accessRole:k,accessTpye:I,callApi:T,children:(0,x.jsxs)("div",{className:_.Z.itemIcon,children:[(0,x.jsx)("img",{src:"/images/member_tab/transport/transport-personal-icon.svg",alt:"completed"}),(0,x.jsx)("p",{children:w("transportation_personal")})]})}),(0,x.jsx)(m.Z,{carryParentState:D,activeTab:"passenger",accessRole:k,accessTpye:I,callApi:T,children:(0,x.jsxs)("div",{className:_.Z.itemIcon,children:[(0,x.jsx)("img",{src:"/images/member_tab/transport/transport-passenger-icon.svg",alt:"inquery"}),(0,x.jsx)("p",{children:w("all_passengers_student")})]})}),(0,x.jsx)(m.Z,{carryParentState:D,activeTab:"pending",accessRole:k,accessTpye:I,callApi:T,children:(0,x.jsxs)("div",{className:_.Z.itemIcon,children:[(0,x.jsx)("img",{src:"/images/member_tab/finance/finance-pending-icon.svg",alt:"refund"}),(0,x.jsx)("p",{children:w("pending_fees")})]})}),(0,x.jsx)(m.Z,{activeTab:"deposit",carryParentState:D,accessRole:k,accessTpye:I,callApi:T,children:(0,x.jsxs)("div",{className:_.Z.itemIcon,children:[(0,x.jsx)("img",{src:"/images/member_tab/finance/finance-deposit-icon.svg",alt:"refund"}),(0,x.jsx)("p",{children:w("finance_deposit")})]})}),(0,x.jsx)(m.Z,{carryParentState:D,activeTab:"batch",accessRole:k,accessTpye:I,callApi:T,children:(0,x.jsxs)("div",{className:_.Z.itemIcon,children:[(0,x.jsx)("img",{src:"/images/member_tab/hostel/hostel-batch-icon.svg",alt:"completed"}),(0,x.jsx)("p",{children:w("hostel_tab_batch")})]})}),(0,x.jsx)(m.Z,{carryParentState:D,activeTab:"linked",accessRole:k,accessTpye:I,callApi:T,children:(0,x.jsxs)("div",{className:_.Z.itemIcon,children:[(0,x.jsx)("img",{src:"/images/member_tab/transport/transport-institute-link-icon.svg",alt:"completed"}),(0,x.jsx)("p",{children:w("linked_institute")})]})})]}),"fund"===(null===P||void 0===P||null===(i=P.search)||void 0===i?void 0:i.substring(3))&&(0,x.jsx)("div",{className:_.Z.classList,children:(0,x.jsx)(h.Z,{tid:N,transport:b,onRefetch:S})}),"fee"===(null===P||void 0===P||null===(a=P.search)||void 0===a?void 0:a.substring(3,6))&&(0,x.jsx)(p.Z,{financeId:null===b||void 0===b||null===(l=b.institute)||void 0===l||null===(o=l.financeDepart)||void 0===o||null===(r=o[0])||void 0===r?void 0:r._id,fees_category_count:null===b||void 0===b||null===(c=b.institute)||void 0===c||null===(u=c.financeDepart)||void 0===u||null===(g=u[0])||void 0===g?void 0:g.fees_category_count,fee_master_array_count:null===b||void 0===b||null===(j=b.institute)||void 0===j||null===(f=j.financeDepart)||void 0===f||null===(y=f[0])||void 0===y?void 0:y.fee_master_array_count,fee_structure_count:null===b||void 0===b?void 0:b.fees_structures_count,carryParentState:D,accessRole:k,transportId:null===b||void 0===b?void 0:b._id,instituteId:null===b||void 0===b||null===(Z=b.institute)||void 0===Z?void 0:Z._id,callApi:T})]})})},j=e=>{var t,n,a,l,o,_;let{transport:v,tid:m,carryParentState:h,onRefetch:p}=e;const{t:j}=(0,d.$G)(),f=(0,s.UO)(),[y,Z]=(0,i.useState)(""),[N,b]=(0,i.useState)(""),[S,D]=(0,i.useState)(!1),[k,I]=(0,i.useState)(!1),[T,w]=(0,i.useState)(""),[P]=(0,u.O4)(),[R,C]=(0,i.useState)(!1);(0,i.useEffect)((()=>{if(k){C((e=>!e));let e=new FormData;e.append("file",N),P({uploadFile:e,tid:m}).then((()=>{C((e=>!e))})).catch({})}}),[k,N]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(c.Z,{coverKey:null===v||void 0===v?void 0:v.transport_photo,coverId:null!==v&&void 0!==v&&v.transport_photo?"0":"2",defaultCover:"/images/profileAndCover/transport-cover.svg",textLarge:j("transport_manager"),textSmall:"".concat(null!==(t=null===v||void 0===v||null===(n=v.transport_manager)||void 0===n?void 0:n.staffFirstName)&&void 0!==t?t:""," ").concat(null!==(a=null===v||void 0===v||null===(l=v.transport_manager)||void 0===l?void 0:l.staffMiddleName)&&void 0!==a?a:""," ").concat(null!==(o=null===v||void 0===v||null===(_=v.transport_manager)||void 0===_?void 0:_.staffLastName)&&void 0!==o?o:""),count1:null===v||void 0===v?void 0:v.vehicle_count,count1label:j("vechiles"),count2:null===v||void 0===v?void 0:v.transport_staff_count,count2label:j("transport_personal"),count3:null===v||void 0===v?void 0:v.passenger_count,count3label:j("passengers"),profilePhoto:T,profileChange:e=>{const t=URL.createObjectURL(e.target.files[0]);b(e.target.files[0]),w(t),Z(t),D(!0)},openCrop:S,setOpenCrop:D,setPhotoURL:Z,photoURL:y,setFile:b,setUpload:I,setProfilePhoto:w,coverUpdate:!0,isTransport:"TRANSPORT_MANAGER",redirectUrl:"/q/".concat(f.username,"/member/transport?a=site"),carryParentState:h,coverImageStyle:{height:"auto"}}),(0,x.jsx)(g,{transport:v,onRefetch:p,tid:m,carryParentState:h}),R&&(0,x.jsx)(r.Z,{})]})};var f=n(41312),y=n(27451),Z=n(99433),N=n(90575),b=n(94713),S=n(36600),D=n(69314),k=n(98094),I=n(47167),T=n(23441),w=n(763),P=n(72426),R=n.n(P),C=n(11105);const A=e=>{let{refund_amount:t,refund_student_count:n,transportId:s}=e;const{t:a}=(0,d.$G)(),[l,o]=(0,i.useState)(!0),[r,c]=(0,i.useState)(""),[_,v]=(0,i.useState)(1),[m,h]=(0,T.YD)(),[p,g]=(0,i.useState)([]),[j,f]=(0,i.useState)(!0),[y,Z]=(0,i.useState)(!1),{getAllDepositRefundByTransport:N,getAllDepositRefundByTransportRefetch:b}=(0,u.CF)({data:{tid:s,page:_,limit:10,search:r},skip:!s});(0,i.useEffect)((()=>{h&&l&&v((e=>e+1))}),[h,l]),(0,i.useEffect)((()=>{s&&b()}),[_,s,b]),(0,i.useEffect)((()=>{var e,t;r?(g(null===N||void 0===N?void 0:N.all_receipts),f(!1)):y?(g(null===N||void 0===N?void 0:N.all_receipts),Z(!1),f(!1)):null!==N&&void 0!==N&&N.all_receipts?(g((e=>{var t,n;return null===(t=[...new Set(null===(n=[...e,...null===N||void 0===N?void 0:N.all_receipts])||void 0===n?void 0:n.map(JSON.stringify))])||void 0===t?void 0:t.map(JSON.parse)})),f(!1)):0===(null===N||void 0===N||null===(t=N.all_receipts)||void 0===t?void 0:t.length)&&f(!1);10===(null===N||void 0===N||null===(e=N.all_receipts)||void 0===e?void 0:e.length)?o(!0):o(!1)}),[null===N||void 0===N?void 0:N.all_receipts]);const S=(0,i.useCallback)((0,w.debounce)((e=>c(e)),500),[]);return(0,x.jsxs)("div",{children:[(0,x.jsxs)("section",{className:D.Z.unused_container,children:[(0,x.jsx)("img",{src:"/images/rupee-symobl-icon.svg",alt:"rupee symobl"}),(0,x.jsxs)("div",{className:D.Z.unused_container_text,children:[(0,x.jsxs)("div",{className:D.Z.unused_container_text_inner,children:[(0,x.jsx)("h6",{children:a("total_refunded")}),(0,x.jsxs)("h6",{children:[a("rs")," ",null!==t&&void 0!==t?t:0]})]}),(0,x.jsx)("div",{className:D.Z.unused_container_text_inner,children:(0,x.jsxs)("p",{children:[a("deposit_of")," ",null!==n&&void 0!==n?n:0," ",a("deposit_student")]})})]})]}),(0,x.jsxs)("div",{className:D.Z.with_search,style:{marginBottom:"1rem"},children:[(0,x.jsx)("h6",{children:a("refunded_history")}),(0,x.jsx)("section",{className:D.Z.search_container,children:(0,x.jsxs)("div",{className:D.Z.search_container_input,children:[(0,x.jsx)("img",{className:D.Z.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),(0,x.jsx)("input",{type:"text",placeholder:"Search",onChange:e=>{S(e.target.value)}})]})})]}),(0,x.jsxs)("div",{className:D.Z.refund_list,children:[null===p||void 0===p?void 0:p.map(((e,t)=>{var n,i,s,l,o,d,r,c,u,_,v,h,g,j,f,y,Z,N,b,S;return(null===p||void 0===p?void 0:p.length)===t+1?(0,x.jsxs)("div",{className:D.Z.corpus_card,ref:m,children:[(0,x.jsxs)("h6",{style:{textAlign:"center"},children:[a("invoice_number"),null!==(n=null===e||void 0===e?void 0:e.invoice_count)&&void 0!==n?n:""]}),(0,x.jsx)("p",{className:D.Z.recieve_from,children:a("paid_to")}),(0,x.jsxs)("div",{className:D.Z.unused_container_text_inner,children:[(0,x.jsx)("h6",{children:"".concat(null!==(i=null===e||void 0===e||null===(s=e.student)||void 0===s?void 0:s.studentFirstName)&&void 0!==i?i:""," ").concat(null!==(l=null===e||void 0===e||null===(o=e.student)||void 0===o?void 0:o.studentMiddleName)&&void 0!==l?l:""," ").concat(null!==(d=null===e||void 0===e||null===(r=e.student)||void 0===r?void 0:r.studentLastName)&&void 0!==d?d:"")}),(0,x.jsxs)("h6",{children:[a("rs")," ",null!==(c=null===e||void 0===e?void 0:e.fee_payment_amount)&&void 0!==c?c:0]})]}),(0,x.jsxs)("div",{className:D.Z.unused_container_text_inner,children:[(0,x.jsxs)("p",{style:{color:"rgba(18, 18, 18, 0.8)"},children:[null===(u=R()(null===e||void 0===e?void 0:e.created_at))||void 0===u?void 0:u.format("DD MMM yyyy"),","," ",null===(_=R()(null===e||void 0===e?void 0:e.created_at))||void 0===_?void 0:_.format("LT")]}),(0,x.jsx)("p",{style:{color:"rgba(18, 18, 18, 0.8)"},children:"Online"===(null===e||void 0===e?void 0:e.fee_payment_mode)?"Bank":"Cash"})]})]},t):(0,x.jsxs)("div",{className:D.Z.corpus_card,children:[(0,x.jsxs)("h6",{style:{textAlign:"center"},children:[a("invoice_number"),null!==(v=null===e||void 0===e?void 0:e.invoice_count)&&void 0!==v?v:""]}),(0,x.jsx)("p",{className:D.Z.recieve_from,children:a("paid_to")}),(0,x.jsxs)("div",{className:D.Z.unused_container_text_inner,children:[(0,x.jsx)("h6",{children:"".concat(null!==(h=null===e||void 0===e||null===(g=e.student)||void 0===g?void 0:g.studentFirstName)&&void 0!==h?h:""," ").concat(null!==(j=null===e||void 0===e||null===(f=e.student)||void 0===f?void 0:f.studentMiddleName)&&void 0!==j?j:""," ").concat(null!==(y=null===e||void 0===e||null===(Z=e.student)||void 0===Z?void 0:Z.studentLastName)&&void 0!==y?y:"")}),(0,x.jsxs)("h6",{children:[a("rs")," ",null!==(N=null===e||void 0===e?void 0:e.fee_payment_amount)&&void 0!==N?N:0]})]}),(0,x.jsxs)("div",{className:D.Z.unused_container_text_inner,children:[(0,x.jsxs)("p",{style:{color:"rgba(18, 18, 18, 0.8)"},children:[null===(b=R()(null===e||void 0===e?void 0:e.created_at))||void 0===b?void 0:b.format("DD MMM yyyy"),","," ",null===(S=R()(null===e||void 0===e?void 0:e.created_at))||void 0===S?void 0:S.format("LT")]}),(0,x.jsx)("p",{style:{color:"rgba(18, 18, 18, 0.8)"},children:"Online"===(null===e||void 0===e?void 0:e.fee_payment_mode)?"Bank":"Cash"})]})]},t)})),j&&(0,x.jsx)(C.Z,{})]})]})};var F=n(69721),M=n(97655),B=n(87932),L=n(51561),O=n(36665),G=n(49886);const E=e=>{var t;let{onClose:n,fmid:s,onRefecthParent:a}=e;const{t:l}=(0,d.$G)(),[o,c]=(0,T.YD)(),[u,_]=(0,i.useState)(1),[v,m]=(0,i.useState)(!0),[h,p]=(0,i.useState)(!0),[g,j]=(0,i.useState)([]),[f,y]=(0,i.useState)(""),[Z,N]=(0,i.useState)(""),[b,S]=(0,i.useState)({amount:"",mode:"",fee_payment_mode:"",fee_payment_amount:"",transaction_date:"",fee_bank_name:"",fee_bank_holder:"",fee_utr_reference:""}),[I,P]=(0,i.useState)(""),[R,A]=(0,i.useState)(!1),[E,U]=(0,i.useState)({msg:"",run:!1}),[q,H]=(0,i.useState)(!1),[J]=(0,B.bC)(),{getMasterDepositAllByFinance:V,getMasterDepositAllByFinanceRefetch:$}=(0,B._7)({data:{search:f,page:u,limit:10,fmid:s},skip:!s});(0,i.useEffect)((()=>{s&&(p(!0),$())}),[s,u,f,$]),(0,i.useEffect)((()=>{c&&v&&_((e=>e+1))}),[c,v]),(0,i.useEffect)((()=>{var e,t;f?(j(null===V||void 0===V?void 0:V.all_students),p(!1)):R?(j(null===V||void 0===V?void 0:V.all_students),A(!1),p(!1)):null!==V&&void 0!==V&&V.all_students?(j((e=>{var t,n;return null===(t=[...new Set(null===(n=[...e,...null===V||void 0===V?void 0:V.all_students])||void 0===n?void 0:n.map(JSON.stringify))])||void 0===t?void 0:t.map(JSON.parse)})),p(!1)):0===(null===V||void 0===V||null===(t=V.all_students)||void 0===t?void 0:t.length)&&p(!1);10===(null===V||void 0===V||null===(e=V.all_students)||void 0===e?void 0:e.length)?m(!0):m(!1)}),[null===V||void 0===V?void 0:V.all_students]);const Y=(0,i.useCallback)((0,w.debounce)((e=>y(e)),500),[]),W=()=>{N("")};return(0,x.jsxs)(O.Z,{onClose:n,children:[!Z&&(0,x.jsxs)("div",{className:D.Z.student_container_modal,style:{minWidth:"43rem",maxWidth:"50rem"},children:[(0,x.jsx)("div",{className:D.Z.with_search,style:{marginTop:"1rem",width:"100%",border:"0.4px solid rgba(0, 0, 0, 0.15)",borderRadius:"6px",marginBottom:"0.3rem"},children:(0,x.jsxs)("div",{className:D.Z.search_container_input,style:{width:"100%"},children:[(0,x.jsx)("img",{className:D.Z.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),(0,x.jsx)("input",{type:"text",placeholder:"Search Student...",style:{width:"100%"},onChange:e=>{Y(e.target.value)}})]})}),null===g||void 0===g?void 0:g.map(((e,t)=>{var n,i,s,a,d,r,c,u;return(null===g||void 0===g?void 0:g.length)===t+1?(0,x.jsxs)("section",{className:D.Z.student_container,title:"Refund deposit",ref:o,onClick:()=>N(e),children:[(0,x.jsx)("img",{src:"1"!==e.photoId?"".concat(F.yI,"/").concat(null===e||void 0===e?void 0:e.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"student avatar"}),(0,x.jsxs)("div",{className:D.Z.conainter_main,children:[(0,x.jsxs)("div",{className:D.Z.student_container_name,children:[(0,x.jsx)("h6",{children:"".concat(null===e||void 0===e?void 0:e.studentFirstName," ").concat(null!==e&&void 0!==e&&e.studentMiddleName?null===e||void 0===e?void 0:e.studentMiddleName:""," ").concat(null===e||void 0===e?void 0:e.studentLastName)}),(0,x.jsxs)("h6",{className:D.Z.student_container_gr,children:[l("rs"),". ",null!==(n=null===e||void 0===e?void 0:e.deposit_pending_amount)&&void 0!==n?n:0]})]}),(0,x.jsxs)("div",{className:D.Z.student_container_name,children:[(0,x.jsxs)("h6",{children:[l("gr_number"),null!==(i=null===e||void 0===e?void 0:e.studentGRNO)&&void 0!==i?i:""," ",", ",null!==(s=null===e||void 0===e||null===(a=e.department)||void 0===a?void 0:a.dName)&&void 0!==s?s:""]}),(0,x.jsx)("p",{className:D.Z.student_container_gr,children:l("pending_deposit")})]})]})]},null===e||void 0===e?void 0:e._id):(0,x.jsxs)("section",{className:D.Z.student_container,title:"Refund deposit",onClick:()=>N(e),children:[(0,x.jsx)("img",{src:"1"!==e.photoId?"".concat(F.yI,"/").concat(null===e||void 0===e?void 0:e.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",alt:"student avatar"}),(0,x.jsxs)("div",{className:D.Z.conainter_main,children:[(0,x.jsxs)("div",{className:D.Z.student_container_name,children:[(0,x.jsx)("h6",{children:"".concat(null===e||void 0===e?void 0:e.studentFirstName," ").concat(null!==e&&void 0!==e&&e.studentMiddleName?null===e||void 0===e?void 0:e.studentMiddleName:""," ").concat(null===e||void 0===e?void 0:e.studentLastName)}),(0,x.jsxs)("h6",{className:D.Z.student_container_gr,children:[l("rs"),". ",null!==(d=null===e||void 0===e?void 0:e.deposit_pending_amount)&&void 0!==d?d:0]})]}),(0,x.jsxs)("div",{className:D.Z.student_container_name,children:[(0,x.jsxs)("h6",{children:[l("gr_number"),null!==(r=null===e||void 0===e?void 0:e.studentGRNO)&&void 0!==r?r:""," ",", ",null!==(c=null===e||void 0===e||null===(u=e.department)||void 0===u?void 0:u.dName)&&void 0!==c?c:""]}),(0,x.jsx)("p",{className:D.Z.student_container_gr,children:l("pending_deposit")})]})]})]},null===e||void 0===e?void 0:e._id)})),h&&(0,x.jsx)(C.Z,{})]}),Z&&(0,x.jsxs)("div",{className:D.Z.student_container_modal,children:[(0,x.jsxs)("section",{className:D.Z.moderator_container_title,children:[(0,x.jsx)("img",{src:"/images/arrow-left-fees-icon.svg",onClick:W,alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),(0,x.jsx)("div",{className:D.Z.with_search,children:(0,x.jsx)("h6",{children:l("refund_deposit")})})]}),(0,x.jsx)(k.Z,{customStyle:{width:"100%"}}),(0,x.jsxs)("div",{className:D.Z.unused_container_text_inner,style:{marginTop:"1rem"},children:[(0,x.jsx)("h6",{children:l("pending_deposit")}),(0,x.jsxs)("h6",{children:[l("rs")," ",null!==(t=null===Z||void 0===Z?void 0:Z.deposit_pending_amount)&&void 0!==t?t:0]})]}),(0,x.jsx)(G.Z,{paymentHeading:l("payment_type_mode"),paymentHeadingPlaceholder:l("refund_cash_bank"),onInputChange:e=>{S((t=>({...t,mode:"By Bank"===e?"Online":"Offline",fee_payment_mode:e})))},errorShow:I.fee_payment_mode,openAs:"DEPOSIT_REFUND_LIST"}),(0,x.jsx)(M.Z,{labelText:l("amount"),name:"fee_payment_amount",type:"tel",value:null===b||void 0===b?void 0:b.fee_payment_amount,onChange:e=>{S((t=>({...t,amount:+e.target.value,fee_payment_amount:+e.target.value})))},placeholder:l("please_enter_amount_paid"),errorShow:I.fee_payment_amount}),(0,x.jsx)("button",{className:D.Z.applicable_to_btn,style:{marginTop:"2rem",marginBottom:"1rem",justifyContent:"center"},onClick:()=>{const e=(e=>{const t={};for(let n in e)"fee_bank_name"===n||"fee_bank_holder"===n||"fee_utr_reference"===n||"amount"===n||"transaction_date"===n||"mode"===n||(e[n]?"fee_payment_amount"===n&&e[n]>(null===Z||void 0===Z?void 0:Z.deposit_pending_amount)&&(U({msg:"You can not enter amount greater than Deposit amount",run:!0}),t.fee_payment_amount="".concat(n," is required!")):t[n]="".concat(n," is required!"));return t})(b);let t=!1;for(let n in e){t=!0;break}t?P(e):(H((e=>!e)),J({fmid:s,sid:null===Z||void 0===Z?void 0:Z._id,refundDeposit:b}).then((()=>{_(1),A(!0),$(),a(),W(),H((e=>!e))})).catch({}))},children:l("confirm")}),q&&(0,x.jsx)(r.Z,{})]}),(0,x.jsx)(L.Ch,{msg:E.msg,run:E.run,setRun:()=>U({msg:"",run:!1}),postiton:"bottom",type:"error"})]})},U=e=>{var t,n,a,l,o,r,c;let{transportId:_}=e;const{t:v}=(0,d.$G)(),m=(0,s.s0)(),[h,p]=(0,i.useState)(!1),g=[{name:v("deposit_collection"),id:0},{name:v("deposit_refund"),id:1},{name:v("deposit_data_file"),id:3}],[j,f]=(0,i.useState)(0),{getMasterDepositByTransport:y,getMasterDepositByTransportRefetch:Z}=(0,u.Iw)({tid:_,skip:!_});(0,i.useEffect)((()=>{_&&Z()}),[_,Z]);return(0,x.jsxs)("div",{className:D.Z.moderator_container,style:{marginTop:"0"},children:[(0,x.jsxs)("section",{className:D.Z.moderator_container_title,children:[(0,x.jsx)("img",{src:"/images/arrow-left-fees-icon.svg",onClick:()=>{m(-1)},alt:"go to previous tab",title:"Go Back",style:{cursor:"pointer"}}),(0,x.jsxs)("div",{className:D.Z.with_search,children:[(0,x.jsx)("h6",{children:v("finance_deposit")}),(0,x.jsx)("div",{className:D.Z.search_container_filter,children:(0,x.jsx)("img",{src:"/images/filter-blue-icon.svg",alt:"filter icon"})})]})]}),(0,x.jsx)(k.Z,{customStyle:{width:"100%"}}),(0,x.jsx)(I.Z,{tabList:g,activeIndexTab:j,setActiveIndexTab:f,showAs:!1,customStyleTab:{width:"33.33%"}}),(0,x.jsx)(k.Z,{customStyle:{width:"100%",marginBottom:"0.5rem"}}),0===j&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("button",{className:D.Z.applicable_to_btn,onClick:()=>p(!0),style:{width:"50%",marginTop:"2rem",marginBottom:"1rem"},children:[(0,x.jsxs)("div",{children:[v("deposit_fee_head_linking")," "]}),(0,x.jsx)("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]}),(0,x.jsx)("div",{className:D.Z.refund_list,children:(0,x.jsxs)("section",{className:D.Z.unused_container,children:[(0,x.jsx)("img",{src:"/images/rupee-symobl-icon.svg",alt:"rupee symobl"}),(0,x.jsxs)("div",{className:D.Z.unused_container_text,children:[(0,x.jsxs)("div",{className:D.Z.unused_container_text_inner,children:[(0,x.jsx)("h6",{children:v("total_deposit")}),(0,x.jsxs)("h6",{children:[v("rs")," ",null!==(t=null===y||void 0===y||null===(n=y.master)||void 0===n?void 0:n.deposit_amount)&&void 0!==t?t:0]})]}),(0,x.jsx)("div",{className:D.Z.unused_container_text_inner,children:(0,x.jsxs)("p",{children:[v("deposit_of")," ",null!==(a=null===y||void 0===y||null===(l=y.master)||void 0===l?void 0:l.paid_student_count)&&void 0!==a?a:0," ",v("deposit_student")]})})]})]})})]}),1===j&&(0,x.jsx)(A,{refund_amount:null===y||void 0===y||null===(o=y.master)||void 0===o?void 0:o.refund_amount,refund_student_count:null===y||void 0===y||null===(r=y.master)||void 0===r?void 0:r.refund_student_count,transportId:_}),h&&(0,x.jsx)(E,{onClose:()=>p(!1),fmid:null===y||void 0===y||null===(c=y.master)||void 0===c?void 0:c._id,onRefecthParent:Z})]})};var q=n(93181);const H=e=>{var t,n,s,a;let{institute:o,border:c,transportId:_,onRefetch:v}=e;const{t:m}=(0,d.$G)(),[h]=(0,u.Z1)(),[p,g]=(0,i.useState)(!1);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:l.Z.transpotation_card,style:{justifyContent:"space-between"},children:[(0,x.jsxs)("div",{className:l.Z.transpotation_card_detail,children:[(0,x.jsx)("img",{src:null!==o&&void 0!==o&&o.insProfilePhoto?"".concat(F.yI,"/").concat(o.insProfilePhoto):"/images/user-icon.svg",alt:"avatar"}),(0,x.jsxs)("div",{className:l.Z.transpotation_card_detail_text,children:[(0,x.jsx)("h6",{children:null!==(t=null===o||void 0===o?void 0:o.insName)&&void 0!==t?t:""}),(0,x.jsx)("h6",{style:{fontSize:"12px"},children:null!==(n=null===o||void 0===o?void 0:o.name)&&void 0!==n?n:""})]})]}),(null===o||void 0===o||null===(s=o.transportDepart)||void 0===s?void 0:s.length)>0?_===(null===o||void 0===o||null===(a=o.transportDepart)||void 0===a?void 0:a[0])?(0,x.jsx)("div",{className:l.Z.linked_institute_btn,children:m("linked")}):null:(0,x.jsx)("div",{className:l.Z.linked_institute_btn,onClick:()=>{_&&null!==o&&void 0!==o&&o._id&&(g((e=>!e)),h({tid:_,id:null===o||void 0===o?void 0:o._id}).then((()=>{v(),g((e=>!e))})).catch({}))},children:m("linked_institute")})]}),c&&(0,x.jsx)(k.Z,{customStyle:{width:"100%"}}),p&&(0,x.jsx)(r.Z,{})]})},J=e=>{let{transportId:t}=e;const{t:n}=(0,d.$G)(),[s,a]=(0,i.useState)(""),[o,r]=(0,T.YD)({skip:s}),[c,_]=(0,i.useState)(1),[v,m]=(0,i.useState)(!0),[h,p]=(0,i.useState)(!0),[g,j]=(0,i.useState)([]),[f,y]=(0,i.useState)(!1),{getTransportLinkedList:Z,getTransportLinkedListRefetch:N}=(0,u.FT)({data:{tid:t,page:c,limit:10,search:s},skip:!t});(0,i.useEffect)((()=>{t&&(p(!0),N())}),[t,c,s,N]),(0,i.useEffect)((()=>{r&&v&&_((e=>e+1))}),[r,v]),(0,i.useEffect)((()=>{var e,t;f?(j(null===Z||void 0===Z?void 0:Z.all_ins),p(!1),y(!1)):s?(j(null===Z||void 0===Z?void 0:Z.all_ins),p(!1)):null!==Z&&void 0!==Z&&Z.all_ins?(j((e=>{var t,n;return null===(t=[...new Set(null===(n=[...e,...null===Z||void 0===Z?void 0:Z.all_ins])||void 0===n?void 0:n.map(JSON.stringify))])||void 0===t?void 0:t.map(JSON.parse)})),p(!1)):0===(null===Z||void 0===Z||null===(t=Z.all_ins)||void 0===t?void 0:t.length)&&p(!1);10===(null===Z||void 0===Z||null===(e=Z.all_ins)||void 0===e?void 0:e.length)?m(!0):m(!1)}),[null===Z||void 0===Z?void 0:Z.all_ins]);const b=(0,i.useCallback)((0,w.debounce)((e=>a(e)),500),[]),S=()=>{_(1),y(!0),p(!0),N()};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:l.Z.with_search,children:[(0,x.jsx)("h6",{children:n("linked_institute")}),(0,x.jsx)("section",{className:l.Z.search_container,children:(0,x.jsxs)("div",{className:l.Z.search_container_input,children:[(0,x.jsx)("img",{className:l.Z.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),(0,x.jsx)("input",{type:"text",placeholder:"Search institutes...",onChange:e=>{e.target.value?b(e.target.value):(b(""),_((e=>1)))}})]})})]}),(0,x.jsx)(k.Z,{customStyle:{marginTop:"0.5rem",marginBottom:"0.6rem",width:"100%"}}),(0,x.jsx)("div",{className:l.Z.vehicle_list,children:null===g||void 0===g?void 0:g.map(((e,n)=>(null===g||void 0===g?void 0:g.length)===n+1?(0,x.jsx)("div",{ref:o,style:{width:"100%"},children:(0,x.jsx)(H,{institute:e,transportId:t,onRefetch:S})},null===e||void 0===e?void 0:e._id):(0,x.jsx)(H,{institute:e,border:!0,transportId:t,onRefetch:S},null===e||void 0===e?void 0:e._id)))}),h&&(0,x.jsx)(C.Z,{status:"white"})]})},V=e=>{var t,n,s,a,d,r,c,_,v,m,h,p,g,D,k,I,T;let{onClickValue:w,carryParentState:P}=e;const[R]=(0,o.lr)(),{transportDetail:C,transportDetailRefetch:A}=(0,u.sJ)({tid:null===w||void 0===w?void 0:w._id,skip:!(null!==w&&void 0!==w&&w._id)});return(0,i.useEffect)((()=>{null!==w&&void 0!==w&&w._id&&A()}),[null===w||void 0===w?void 0:w._id,A]),(0,x.jsxs)("div",{style:{marginTop:"1rem"},children:[(null===(t=[null,"fee","fund"])||void 0===t?void 0:t.includes(R.get("a")))&&(0,x.jsx)(j,{tid:null===w||void 0===w?void 0:w._id,transport:null===C||void 0===C?void 0:C.trans_panel,carryParentState:P,onRefetch:A}),"vehicle"===R.get("a")&&(0,x.jsx)("div",{className:l.Z.hostel_container,children:(0,x.jsx)(f.Z,{tid:null===w||void 0===w?void 0:w._id,carryParentState:P,instituteId:null!==(n=null===C||void 0===C||null===(s=C.trans_panel)||void 0===s||null===(a=s.institute)||void 0===a?void 0:a._id)&&void 0!==n?n:""})}),"personal"===R.get("a")&&(0,x.jsx)("div",{className:l.Z.hostel_container,children:(0,x.jsx)(y.Z,{tid:null===w||void 0===w?void 0:w._id,carryParentState:P,instituteId:null!==(d=null===C||void 0===C||null===(r=C.trans_panel)||void 0===r||null===(c=r.institute)||void 0===c?void 0:c._id)&&void 0!==d?d:""})}),"passenger"===R.get("a")&&(0,x.jsx)("div",{className:l.Z.hostel_container,children:(0,x.jsx)(Z.Z,{tid:null===w||void 0===w?void 0:w._id,carryParentState:P,instituteId:null!==(_=null===C||void 0===C||null===(v=C.trans_panel)||void 0===v||null===(m=v.institute)||void 0===m?void 0:m._id)&&void 0!==_?_:""})}),"batch"===R.get("a")&&(0,x.jsx)("div",{className:l.Z.hostel_container,children:(0,x.jsx)(b.Z,{transportId:null===w||void 0===w?void 0:w._id,selectedBacthId:null===C||void 0===C||null===(h=C.trans_panel)||void 0===h?void 0:h.departmentSelectBatch,onMasterApiRefetch:A,carryParentState:P,instituteId:null!==(p=null===C||void 0===C||null===(g=C.trans_panel)||void 0===g||null===(D=g.institute)||void 0===D?void 0:D._id)&&void 0!==p?p:""})}),"standard"===R.get("a")&&(0,x.jsx)("div",{className:l.Z.hostel_container,children:(0,x.jsx)(S.Z,{transportId:null===w||void 0===w?void 0:w._id,carryParentState:P})}),"deposit"===R.get("a")&&(0,x.jsx)("div",{className:l.Z.hostel_container,children:(0,x.jsx)(U,{transportId:null===w||void 0===w?void 0:w._id})}),"pending"===R.get("a")&&(0,x.jsx)("div",{className:l.Z.hostel_container,children:(0,x.jsx)(q.Z,{transportId:null===w||void 0===w?void 0:w._id,instituteId:null!==(k=null===C||void 0===C||null===(I=C.trans_panel)||void 0===I||null===(T=I.institute)||void 0===T?void 0:T._id)&&void 0!==k?k:""})}),"vehicle-detail"===R.get("a")&&(0,x.jsx)(N.Z,{transportId:null===w||void 0===w?void 0:w._id,carryParentState:P}),"linked"===R.get("a")&&(0,x.jsx)("div",{className:l.Z.hostel_container,children:(0,x.jsx)(J,{transportId:null===w||void 0===w?void 0:w._id})})]})};var $=n(98648);const Y=()=>{var e,t,n,i,l,o,d,r,c;const u=(0,s.TH)();return(0,x.jsx)(x.Fragment,{children:"site"===(null===u||void 0===u||null===(e=u.search)||void 0===e?void 0:e.substring(3))?(0,x.jsx)($.Z,{tid:null===u||void 0===u||null===(t=u.state)||void 0===t||null===(n=t.onClickValue)||void 0===n?void 0:n._id}):(0,x.jsx)(a.Z,{index:"30",sid:null!==(i=null===u||void 0===u||null===(l=u.state)||void 0===l?void 0:l.sid)&&void 0!==i?i:"",onClickValue:null!==(o=null===u||void 0===u||null===(d=u.state)||void 0===d?void 0:d.onClickValue)&&void 0!==o?o:"",children:(0,x.jsx)(V,{onClickValue:null!==(r=null===u||void 0===u||null===(c=u.state)||void 0===c?void 0:c.onClickValue)&&void 0!==r?r:"",carryParentState:null===u||void 0===u?void 0:u.state})})})}},69314:(e,t,n)=>{n.d(t,{Z:()=>i});const i={moderator_container:"Deposit_moderator_container__uYc+U",moderator_container_title:"Deposit_moderator_container_title__2drHz",add_new_moderator:"Deposit_add_new_moderator__24P1G",menu_icon:"Deposit_menu_icon__teeam",scholarship_card_container:"Deposit_scholarship_card_container__DhFaA",assign_role_container:"Deposit_assign_role_container__r-1pQ",assign_role_title:"Deposit_assign_role_title__lXinn",applicable_to_btn:"Deposit_applicable_to_btn__mWWfO",category_card:"Deposit_category_card__DFup3",category_card_hover_active:"Deposit_category_card_hover_active__TfGHF",scholar_preview_container:"Deposit_scholar_preview_container__SGhqf",candidate_card_container:"Deposit_candidate_card_container__+UBtq",candidate_card_container_text:"Deposit_candidate_card_container_text__rR493",candidate_card_row:"Deposit_candidate_card_row__HMz9f",student_container:"Deposit_student_container__lsw8R",conainter_main:"Deposit_conainter_main__TrWk+",student_container_name:"Deposit_student_container_name__mZ8HN",search_container:"Deposit_search_container__PtFNP",search_container_text:"Deposit_search_container_text__JnaM6",search_container_input:"Deposit_search_container_input__Iz1uP",searchIcon:"Deposit_searchIcon__-4uou",allot_container:"Deposit_allot_container__+1Brf",unused_container:"Deposit_unused_container__Lh4Xk",unused_container_text:"Deposit_unused_container_text__V764F",unused_container_text_inner:"Deposit_unused_container_text_inner__cyPQR",intake_history:"Deposit_intake_history__k+KcC",corpus_card:"Deposit_corpus_card__Dw2Gw",recieve_from:"Deposit_recieve_from__XY3mV",save_entry:"Deposit_save_entry__-3pcb",row_search:"Deposit_row_search__FrSt8",with_search:"Deposit_with_search__pybCG",search_container_filter:"Deposit_search_container_filter__sx4qD",student_container_modal:"Deposit_student_container_modal__l2laG"}}}]);
//# sourceMappingURL=47912.9ec96362.chunk.js.map