"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[53346],{53346:(e,l,i)=>{i.r(l),i.d(l,{default:()=>Z});var t=i(39230),n=i(56959),d=i(72791),s=i(23441),o=i(6758),a=i(91427),c=i(57588),r=i(1669),u=i(98684),v=i(55336),f=i(2651),p=i(16871),_=i(43504),h=i(1095),m=i(97892),x=i.n(m),j=i(82824),g=i(37782),N=i(76697),y=i(80184);const w=e=>{var l,n,s,a,c,r,f,m,w,Z,k,R,b,I,S,D,L,C,E,M,F,Y,q,A,O,P,U;let{logs:G}=e;const{t:J}=(0,t.$G)(),T=(0,p.UO)(),W=(0,p.TH)(),[z,H]=(0,d.useState)(""),[$,B]=(0,d.useState)(!1),[V,K]=(0,d.useState)(""),{financeReceipt:Q,financeReceiptRefetch:X}=(0,o.Nw)({rid:z,skip:!z});(0,d.useEffect)((()=>{z&&X()}),[z,X]),(0,d.useEffect)((()=>{null!==Q&&void 0!==Q&&Q.receipt&&null!==Q&&void 0!==Q&&Q.all_remain&&K(Q)}),[Q]),(0,d.useEffect)((()=>{if(V){const e=new Worker(new URL(i.p+i.u(24882),i.b)),{institute:l,studentInfo:t,paymentReceiptInfo:n}=(0,g.Hs)(null===V||void 0===V?void 0:V.all_remain,null===V||void 0===V?void 0:V.receipt);e.postMessage({institute:l,studentInfo:t,paymentReceiptInfo:n,printReceiptType:"Refunded"===(null===n||void 0===n?void 0:n.transactonRefund)?"ADMISSION_REFUND":"ADMISSION"}),e.onmessage=l=>{l&&(window.open(l.data,"_blank"),B((e=>!e)),K(""),e.terminate())}}}),[V]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:N.Z.sidebarheader,style:{gap:"1%"},title:"View Receipt",children:[(0,y.jsxs)("div",{className:N.Z.history_image_container,style:{width:"50%"},children:[null!==G&&void 0!==G&&null!==(l=G.fee_receipt)&&void 0!==l&&null!==(n=l.student)&&void 0!==n&&n.studentProfilePhoto?(0,y.jsx)(_.rU,{to:"/q/".concat(T.username,"/student/profile"),state:{...W.state,sid:null===G||void 0===G||null===(s=G.fee_receipt)||void 0===s||null===(a=s.student)||void 0===a?void 0:a._id},children:(0,y.jsx)("img",{src:"".concat(h.yI,"/").concat(null===G||void 0===G||null===(c=G.fee_receipt)||void 0===c||null===(r=c.student)||void 0===r?void 0:r.studentProfilePhoto),alt:"qr code",style:{width:"60px",height:"60px",borderRadius:"12px"}})}):null,(0,y.jsxs)("div",{className:N.Z.text,children:[(0,y.jsx)("h6",{children:"".concat(null!==(f=null===G||void 0===G||null===(m=G.fee_receipt)||void 0===m||null===(w=m.student)||void 0===w?void 0:w.studentFirstName)&&void 0!==f?f:""," ").concat(null!==(Z=null===G||void 0===G||null===(k=G.fee_receipt)||void 0===k||null===(R=k.student)||void 0===R?void 0:R.studentMiddleName)&&void 0!==Z?Z:""," ").concat(null!==(b=null===G||void 0===G||null===(I=G.fee_receipt)||void 0===I||null===(S=I.student)||void 0===S?void 0:S.studentLastName)&&void 0!==b?b:"")}),(0,y.jsxs)("p",{className:N.Z.rcv,children:[J("gr_number")," ",null!==(D=null===G||void 0===G||null===(L=G.fee_receipt)||void 0===L||null===(C=L.student)||void 0===C?void 0:C.studentGRNO)&&void 0!==D?D:""]}),(0,y.jsxs)("p",{className:N.Z.rcv,children:[null===(E=x()(null===G||void 0===G?void 0:G.created_at))||void 0===E?void 0:E.format("DD/MM/YYYY"),", ",(0,j.J)(null===G||void 0===G?void 0:G.created_at,"LT")]})]})]}),(0,y.jsxs)("div",{className:N.Z.text,style:{width:"27%"},children:[(0,y.jsx)("p",{className:N.Z.rcv,style:{width:"100%"},children:J("transaction_id")}),(0,y.jsx)("h6",{style:{width:"100%",wordWrap:"break-word"},children:null!==G&&void 0!==G&&null!==(M=G.fee_receipt)&&void 0!==M&&M.razorpay_payment_id?null===G||void 0===G||null===(F=G.fee_receipt)||void 0===F?void 0:F.razorpay_payment_id:null!==G&&void 0!==G&&null!==(Y=G.fee_receipt)&&void 0!==Y&&Y.fee_utr_reference?null===G||void 0===G||null===(q=G.fee_receipt)||void 0===q?void 0:q.fee_utr_reference:"N/A"})]}),(0,y.jsxs)("div",{className:N.Z.text,style:{width:"20%"},children:[(0,y.jsxs)("p",{className:N.Z.rcv,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[J("invoice_no")," ",null!==(A=null===G||void 0===G||null===(O=G.fee_receipt)||void 0===O?void 0:O.invoice_count)&&void 0!==A?A:"N/A",(0,y.jsx)("img",{src:"".concat(u.J7,"/receipt.svg"),alt:"receipt icon",title:"Download Fees Receipt",onClick:()=>{(()=>{var e,l,i;null!==G&&void 0!==G&&null!==(e=G.fee_receipt)&&void 0!==e&&e._id&&(B((e=>!e)),H(null===G||void 0===G||null===(l=G.fee_receipt)||void 0===l?void 0:l._id),z===(null===G||void 0===G||null===(i=G.fee_receipt)||void 0===i?void 0:i._id)&&K(Q))})()}})]}),(0,y.jsxs)("h6",{style:{width:"100%"},children:[J("rs_only")," ",null===G||void 0===G||null===(P=G.fee_receipt)||void 0===P?void 0:P.fee_payment_amount]}),(0,y.jsx)("p",{className:N.Z.rcv,style:{width:"100%"},children:null===G||void 0===G||null===(U=G.fee_receipt)||void 0===U?void 0:U.fee_payment_mode})]})]}),$&&(0,y.jsx)(v.Z,{})]})},Z=e=>{var l,i,p;let{fid:_}=e;const{t:h}=(0,t.$G)(),[m,x]=(0,d.useState)(""),[j,g]=(0,d.useState)(1),[N,Z]=(0,d.useState)(!0),[k,R]=(0,s.YD)({skip:m}),{financeDeletedLogsList:b,financeDeletedLogsListLoading:I}=(0,o.bW)({data:{fid:_,page:j,limit:10,search:m},skip:!_});(0,d.useEffect)((()=>{R&&N&&g((e=>e+1))}),[R,N]),(0,d.useEffect)((()=>{var e;if(null!==b&&void 0!==b&&null!==(e=b.list)&&void 0!==e&&e.length){var l;let e=(0,a.f)(null===b||void 0===b||null===(l=b.list)||void 0===l?void 0:l.length);Z((()=>e))}}),[null===b||void 0===b?void 0:b.list]);const S=(0,d.useCallback)((0,c.J)((e=>{g((()=>1)),x(e)}),1500),[]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:n.Z.fm_search_full,children:(0,y.jsx)("section",{className:n.Z.fm_search_full_container,children:(0,y.jsxs)("div",{className:n.Z.fm_search_full_container_inner,children:[(0,y.jsx)("img",{className:n.Z.fm_search_full_icon,alt:"search icon",src:"".concat(u.dB,"/navbar-search.svg")}),(0,y.jsx)("input",{type:"text",placeholder:h("search"),onChange:e=>{e.target.value?S(e.target.value):(g((()=>1)),x(""))}})]})})}),null===b||void 0===b||null===(l=b.list)||void 0===l?void 0:l.map(((e,l)=>{var i;return(null===b||void 0===b||null===(i=b.list)||void 0===i?void 0:i.length)===l+1?(0,y.jsx)("div",{ref:k,children:(0,y.jsx)(w,{logs:e})},null===e||void 0===e?void 0:e._id):(0,y.jsx)(w,{logs:e},null===e||void 0===e?void 0:e._id)})),I?m?(0,y.jsx)(v.Z,{}):(0,y.jsx)(r.Z,{}):m?0===(null===b||void 0===b||null===(i=b.list)||void 0===i?void 0:i.length)&&(0,y.jsx)(f.Z,{title:"No logs found related this search."}):0===(null===b||void 0===b||null===(p=b.list)||void 0===p?void 0:p.length)&&(0,y.jsx)(f.Z,{title:"No logs."})]})}}}]);
//# sourceMappingURL=53346.32075104.chunk.js.map