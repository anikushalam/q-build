"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[8926],{17958:function(e,o,n){n.r(o),n.d(o,{default:function(){return G}});var t=n(29439),i=n(84975),l=n(98684),a=n(90904),s=n(33030),d=n(63687),c=n(21348),r=n(57588),u=n(91427),_=n(72791),v=n(39230),f=n(23441),h="FinanceModerator_moderator_card__Ktx0m",S="FinanceModerator_moderator_card_text_container__APCb1",m="FinanceModerator_menu_icon__mkR4i",C="FinanceModerator_selected_staff_container__SvASN",x="FinanceModerator_selected_staff_text__Bb0K6",A="FinanceModerator_modal_container__Sn82A",E="FinanceModerator_modal_container_header__LNXAG",j=n(1095),p=n(89064),g=n(1413),N=n(48293),Z=n(19056),I=n(93638),P=n(80184),T=function(e){var o,n=e.onCloseEdit,t=e.setActivePopup,i=e.selectedStaff,s=e.moderatorState,d=e.onSelectRole,r=e.onUpdateModerator,u=(0,v.$G)().t;return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(N.Z,{onClose:n,children:(0,P.jsxs)("div",{className:A,children:[(0,P.jsx)(c.Z,{children:(0,P.jsx)("div",{className:E,children:(0,P.jsx)("h6",{children:u("update_role_to_moderator")})})}),(0,P.jsx)(a.Z,{}),(0,P.jsxs)(c.Z,{customStyle:{paddingTop:"0"},children:[(0,P.jsxs)("section",{className:C,onClick:function(){return t("OPEN_STAFF_LIST")},style:{cursor:"pointer"},children:[(0,P.jsx)("img",{src:null!==i&&void 0!==i&&i.staffProfilePhoto?"".concat(j.yI,"/").concat(null===i||void 0===i?void 0:i.staffProfilePhoto):"".concat(l.p3,"/feed-user-avatar.svg"),alt:"staff profile avatar"}),(0,P.jsxs)("div",{className:x,children:[(0,P.jsx)("h6",{children:"".concat(null===i||void 0===i?void 0:i.staffFirstName," ").concat(null!==(o=null===i||void 0===i?void 0:i.staffMiddleName)&&void 0!==o?o:""," ").concat(null===i||void 0===i?void 0:i.staffLastName)}),(0,P.jsxs)("p",{children:[u("index_number")," "," : ",null===i||void 0===i?void 0:i.staffROLLNO]})]})]}),(0,P.jsx)(Z.Z,{selectLabel:u("select_role_of_moderator"),selectedValue:u("please_select_role"),options:["Cash Receipt Section","Inventories Section","Fees Master Section","Payroll Section","Deposit Section","Bank Account Section","Data Export Authority","Scholarship Administrator"],defalutValue:"CASH_RECEIPT_ACCESS"===(null===s||void 0===s?void 0:s.mod_role)?"Cash Receipt Section":"INVENTORY_ACCESS"===(null===s||void 0===s?void 0:s.mod_role)?"Inventories Section":"FEE_MASTER_ACCESS"===(null===s||void 0===s?void 0:s.mod_role)?"Fees Master Section":"PAYROLL_ACCESS"===(null===s||void 0===s?void 0:s.mod_role)?"Payroll Section":"DEPOSIT_ACCESS"===(null===s||void 0===s?void 0:s.mod_role)?"Deposit Section":"BANK_ACCOUNT_ACCESS"===(null===s||void 0===s?void 0:s.mod_role)?"Bank Account Section":"DATA_EXPORT_ACCESS"===(null===s||void 0===s?void 0:s.mod_role)?"Data Export Authority":"DATA_EXPORT_ACCESS"===(null===s||void 0===s?void 0:s.mod_role)?"Scholarship Administrator":"",onClick:d}),(0,P.jsx)(I.Z,{label:"update",onAction:r})]})]})})})},R=n(55336),O=n(49806),F=function(e){var o,n,t,i=e.staff,s=e.selectedId,d=e.onSelect,c=(0,v.$G)().t;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{className:O.Z.assign_show_list_each,style:s===(null===i||void 0===i?void 0:i._id)?{backgroundColor:"rgba(75, 26, 133, 0.1)"}:null,onClick:function(){d(i)},children:[(0,P.jsx)("img",{src:null!==i&&void 0!==i&&i.staffProfilePhoto?"".concat(j.yI,"/").concat(i.staffProfilePhoto):"".concat(l.p3,"/feed-staff-avatar.svg"),alt:"profile avatar"}),(0,P.jsxs)("div",{className:O.Z.assign_each_paragraph,children:[(0,P.jsx)("h6",{children:"".concat(null!==(o=null===i||void 0===i?void 0:i.staffFirstName)&&void 0!==o?o:""," ").concat(null!==(n=null===i||void 0===i?void 0:i.staffMiddleName)&&void 0!==n?n:""," ").concat(null!==(t=null===i||void 0===i?void 0:i.staffLastName)&&void 0!==t?t:"")}),(0,P.jsxs)("p",{children:[c("index")," "," : ",null===i||void 0===i?void 0:i.staffROLLNO]})]})]}),(0,P.jsx)(a.Z,{customStyleBorder:{margin:"0"}})]})},M=n(1669),D=n(2651),L=function(e){var o,n,s,d,h=e.onClose,S=e.selectedId,m=e.onSelectStaff,C=e.instituteId,x=(0,v.$G)().t,A=(0,_.useState)(""),E=(0,t.Z)(A,2),j=E[0],p=E[1],g=(0,_.useState)(1),Z=(0,t.Z)(g,2),I=Z[0],T=Z[1],L=(0,_.useState)(!0),y=(0,t.Z)(L,2),k=y[0],b=y[1],B=(0,f.YD)({skip:j}),U=(0,t.Z)(B,2),G=U[0],V=U[1],Y=(0,i.nb)({data:{id:C,page:I,limit:10,search:j},skip:!C}),w=Y.instituteAllStaff,X=Y.instituteAllStaffLoading;(0,_.useEffect)((function(){V&&k&&T((function(e){return e+1}))}),[V,k]),(0,_.useEffect)((function(){var e;if(null!==w&&void 0!==w&&null!==(e=w.list)&&void 0!==e&&e.length){var o,n=(0,u.f)(null===w||void 0===w||null===(o=w.list)||void 0===o?void 0:o.length);b((function(){return n}))}}),[null===w||void 0===w||null===(o=w.list)||void 0===o?void 0:o.length]);var K=(0,_.useCallback)((0,r.J)((function(e){T((function(){return 1})),p(e)}),1500),[]),$=function(e){S===(null===e||void 0===e?void 0:e._id)||m(e)};return(0,P.jsx)(N.Z,{onClose:h,children:(0,P.jsxs)("div",{className:O.Z.modal_container,children:[(0,P.jsx)(c.Z,{children:(0,P.jsxs)("div",{className:O.Z.modal_container_outer_header,children:[(0,P.jsx)("div",{className:O.Z.modal_container_header,children:(0,P.jsx)("h6",{children:x("staff_list")})}),(0,P.jsx)("img",{src:"".concat(l.J7,"/close.svg"),alt:"close icon",onClick:h})]})}),(0,P.jsx)(a.Z,{}),(0,P.jsxs)(c.Z,{customStyle:{paddingBottom:"1rem"},children:[(0,P.jsxs)("div",{className:O.Z.assign_search_container,style:{marginBottom:"1rem"},children:[(0,P.jsx)("input",{type:"text",placeholder:x("search"),className:O.Z.assign_search_input,onChange:function(e){e.target.value?K(e.target.value):(T((function(){return 1})),p(""))}}),(0,P.jsx)("img",{src:"".concat(l.dB,"/navbar-search.svg"),alt:"search icon"})]}),null===w||void 0===w||null===(n=w.list)||void 0===n?void 0:n.map((function(e,o){var n;return(null===w||void 0===w||null===(n=w.list)||void 0===n?void 0:n.length)===o+1?(0,P.jsx)("div",{ref:G,children:(0,P.jsx)(F,{staff:e,selectedId:S,onSelect:$})},null===e||void 0===e?void 0:e._id):(0,P.jsx)(F,{staff:e,selectedId:S,onSelect:$},null===e||void 0===e?void 0:e._id)})),X?j?(0,P.jsx)(R.Z,{}):(0,P.jsx)(M.Z,{}):j?!(null!==w&&void 0!==w&&null!==(s=w.list)&&void 0!==s&&s.length)&&(0,P.jsx)(D.Z,{title:"No staff fuond related this search.",customStyleContainer:{marginTop:"1.5rem"}}):!(null!==w&&void 0!==w&&null!==(d=w.list)&&void 0!==d&&d.length)&&(0,P.jsx)(D.Z,{title:"No staff.",customStyleContainer:{marginTop:"1.5rem"}})]})]})})},y=function(e){var o,n,s=e.instituteId,d=e.fid,r=e.onClose,u=e.openModeratorMenu,f=e.openAs,h=e.onEdit,S=(0,v.$G)().t,m=(0,_.useState)("EDIT"===f?"PREVIEW_FORM":"OPEN_STAFF_LIST"),p=(0,t.Z)(m,2),O=p[0],F=p[1],M=(0,_.useState)("EDIT"===f?null===u||void 0===u?void 0:u.access_staff:""),D=(0,t.Z)(M,2),y=D[0],k=D[1],b=(0,_.useState)({mod_role:"EDIT"===f?null===u||void 0===u?void 0:u.access_role:"",sid:"EDIT"===f?null===u||void 0===u||null===(o=u.access_staff)||void 0===o?void 0:o._id:""}),B=(0,t.Z)(b,2),U=B[0],G=B[1],V=(0,i.iM)(),Y=(0,t.Z)(V,1)[0];(0,_.useEffect)((function(){var e;"EDIT"===f&&(k(null===u||void 0===u?void 0:u.access_staff),G({mod_role:null===u||void 0===u?void 0:u.access_role,sid:null===u||void 0===u||null===(e=u.access_staff)||void 0===e?void 0:e._id}),F("PREVIEW_FORM"))}),[f]);var w=function(e){G((function(o){return(0,g.Z)((0,g.Z)({},o),{},{mod_role:"Cash Receipt Section"===e?"CASH_RECEIPT_ACCESS":"Inventories Section"===e?"INVENTORY_ACCESS":"Fees Master Section"===e?"FEE_MASTER_ACCESS":"Payroll Section"===e?"PAYROLL_ACCESS":"Deposit Section"===e?"DEPOSIT_ACCESS":"Bank Account Section"===e?"BANK_ACCOUNT_ACCESS":"Data Export Authority"===e||"Scholarship Administrator"===e?"DATA_EXPORT_ACCESS":""})}))};return(0,P.jsxs)(P.Fragment,{children:["OPEN_STAFF_LIST"===O&&(0,P.jsx)(L,{onSelectStaff:function(e){k(e),G((function(o){return(0,g.Z)((0,g.Z)({},o),{},{sid:null===e||void 0===e?void 0:e._id})})),F("EDIT"===f?"PREVIEW_FORM":"ASSIGN_ROLE")},onClose:r,instituteId:s}),"ASSIGN_ROLE"===O&&(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(N.Z,{onClose:r,children:(0,P.jsxs)("div",{className:A,children:[(0,P.jsx)(c.Z,{children:(0,P.jsx)("div",{className:E,children:(0,P.jsx)("h6",{children:S("assign_role_to_moderator")})})}),(0,P.jsx)(a.Z,{}),(0,P.jsxs)(c.Z,{customStyle:{paddingTop:"0"},children:[(0,P.jsxs)("section",{className:C,children:[(0,P.jsx)("img",{src:null!==y&&void 0!==y&&y.staffProfilePhoto?"".concat(j.yI,"/").concat(null===y||void 0===y?void 0:y.staffProfilePhoto):"".concat(l.p3,"/feed-user-avatar.svg"),alt:"staff profile avatar"}),(0,P.jsxs)("div",{className:x,children:[(0,P.jsx)("h6",{children:"".concat(null===y||void 0===y?void 0:y.staffFirstName," ").concat(null!==(n=null===y||void 0===y?void 0:y.staffMiddleName)&&void 0!==n?n:""," ").concat(null===y||void 0===y?void 0:y.staffLastName)}),(0,P.jsxs)("p",{children:[S("index_no"),null===y||void 0===y?void 0:y.staffROLLNO]})]})]}),(0,P.jsx)(Z.Z,{selectLabel:S("select_role_of_moderator"),selectedValue:S("please_select_role"),options:["Cash Receipt Section","Inventories Section","Fees Master Section","Payroll Section","Deposit Section","Bank Account Section","Data Export Authority","Scholarship Administrator"],defalutValue:"CASH_RECEIPT_ACCESS"===(null===U||void 0===U?void 0:U.mod_role)?"Cash Receipt Section":"INVENTORY_ACCESS"===(null===U||void 0===U?void 0:U.mod_role)?"Inventories Section":"FEE_MASTER_ACCESS"===(null===U||void 0===U?void 0:U.mod_role)?"Fees Master Section":"PAYROLL_ACCESS"===(null===U||void 0===U?void 0:U.mod_role)?"Payroll Section":"DEPOSIT_ACCESS"===(null===U||void 0===U?void 0:U.mod_role)?"Deposit Section":"BANK_ACCOUNT_ACCESS"===(null===U||void 0===U?void 0:U.mod_role)?"Bank Account Section":"DATA_EXPORT_ACCESS"===(null===U||void 0===U?void 0:U.mod_role)?"Data Export Authority":"DATA_EXPORT_ACCESS"===(null===U||void 0===U?void 0:U.mod_role)?"Scholarship Administrator":"",onClick:w}),(0,P.jsx)(I.Z,{label:"assign",onAction:function(){F("LOADING"),Y({fid:d,addModerator:U}).then((function(){F(""),r()})).catch({})}})]}),"LOADING"===O&&(0,P.jsx)(R.Z,{})]})})}),"PREVIEW_FORM"===O&&(0,P.jsx)(T,{onCloseEdit:function(){r()},setActivePopup:F,selectedStaff:y,moderatorState:U,onSelectRole:w,onUpdateModerator:function(){h(U)}}),"LOADING"===O&&(0,P.jsx)(R.Z,{})]})},k=function(e){var o=e.onClose,n=e.financeId,l=e.openModeratorMenu,a=e.instituteId,s=(0,v.$G)().t,d=(0,_.useState)(!1),c=(0,t.Z)(d,2),r=c[0],u=c[1],f=(0,_.useState)(!1),h=(0,t.Z)(f,2),S=h[0],m=h[1],C=(0,i.G8)(),x=(0,t.Z)(C,1)[0],A=(0,i.E6)(),E=(0,t.Z)(A,1)[0],j=function(){m((function(e){return!e}))};return(0,P.jsx)(P.Fragment,{children:S?(0,P.jsx)(y,{onClose:j,onEdit:function(e){u((function(e){return!e})),j(),E({modId:null===l||void 0===l?void 0:l._id,updateModerator:{role:null===e||void 0===e?void 0:e.mod_role,staffId:null===e||void 0===e?void 0:e.sid}}).then((function(){u((function(e){return!e})),o()})).catch({})},openModeratorMenu:l,openAs:"EDIT",fid:n,instituteId:a}):(0,P.jsxs)(p.Z,{onClose:o,disabled:r,children:[(0,P.jsx)("h6",{onClick:j,children:s("edit")}),(0,P.jsx)("h6",{onClick:function(){u((function(e){return!e})),x({fid:n,modId:null===l||void 0===l?void 0:l._id}).then((function(){o(),u((function(e){return!e}))})).catch({})},children:s("delete")})]})})},b=function(e){var o,n,i,a,s,d,c,r=e.moderator,u=e.instituteId,f=e.financeId,C=(0,v.$G)().t,x=(0,_.useState)(""),A=(0,t.Z)(x,2),E=A[0],p=A[1];return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{className:h,children:[(0,P.jsx)("img",{src:null!==r&&void 0!==r&&null!==(o=r.access_staff)&&void 0!==o&&o.staffProfilePhoto?"".concat(j.yI,"/").concat(null===r||void 0===r||null===(n=r.access_staff)||void 0===n?void 0:n.staffProfilePhoto):"".concat(l.p3,"/feed-user-avatar.svg"),alt:"moderator avatar"}),(0,P.jsxs)("section",{className:S,children:[(0,P.jsx)("h6",{children:"".concat(null===r||void 0===r||null===(i=r.access_staff)||void 0===i?void 0:i.staffFirstName," ").concat(null!==(a=null===r||void 0===r||null===(s=r.access_staff)||void 0===s?void 0:s.staffMiddleName)&&void 0!==a?a:""," ").concat(null===r||void 0===r||null===(d=r.access_staff)||void 0===d?void 0:d.staffLastName)}),(0,P.jsxs)("p",{children:[C("index_number")," "," : ",null===r||void 0===r||null===(c=r.access_staff)||void 0===c?void 0:c.staffROLLNO]}),(0,P.jsx)("p",{children:"CASH_RECEIPT_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Cash Receipt Section":"INVENTORY_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Inventories Section":"FEE_MASTER_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Fees Master Section":"PAYROLL_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Payroll Section":"DEPOSIT_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Deposit Section":"BANK_ACCOUNT_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Bank Account Section":"DATA_EXPORT_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Data Export Authority":"DATA_EXPORT_ACCESS"===(null===r||void 0===r?void 0:r.access_role)?"Scholarship Administrator":""})]}),(0,P.jsx)("img",{src:"".concat(l.J7,"/menu.svg"),alt:"menu icon",onClick:function(){p(r)},className:m,title:"Menu"})]}),E&&(0,P.jsx)(k,{onClose:function(){p("")},financeId:f,openModeratorMenu:E,instituteId:u})]})},B=n(93405),U=n(23984),G=function(e){var o,n,h,S,m=e.fid,C=e.instituteId,x=(0,v.$G)().t,A=(0,_.useState)(""),E=(0,t.Z)(A,2),j=E[0],p=E[1],g=(0,_.useState)(1),N=(0,t.Z)(g,2),Z=N[0],I=N[1],T=(0,_.useState)(!0),O=(0,t.Z)(T,2),F=O[0],L=O[1],k=(0,f.YD)({skip:j}),G=(0,t.Z)(k,2),V=G[0],Y=G[1],w=(0,_.useState)(!1),X=(0,t.Z)(w,2),K=X[0],$=X[1],W=(0,i.NK)({data:{fid:m,page:Z,limit:10,search:j},skip:!m}),H=W.financeModerator,J=W.financeModeratorLoading;(0,_.useEffect)((function(){Y&&F&&I((function(e){return e+1}))}),[Y,F]),(0,_.useEffect)((function(){var e;if(null!==H&&void 0!==H&&null!==(e=H.list)&&void 0!==e&&e.length){var o,n=(0,u.f)(null===H||void 0===H||null===(o=H.list)||void 0===o?void 0:o.length);L((function(){return n}))}}),[null===H||void 0===H||null===(o=H.list)||void 0===o?void 0:o.length]);var q=(0,_.useCallback)((0,r.J)((function(e){I((function(){return 1})),p(e)}),500),[]),z=function(){$((function(e){return!e}))};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(d.Z,{children:[(0,P.jsx)(c.Z,{children:(0,P.jsxs)("div",{className:B.Z.fm_header_container,children:[(0,P.jsx)("h6",{children:x("finance_moderators")}),(0,P.jsx)("div",{className:B.Z.fm_search,children:(0,P.jsx)("section",{className:B.Z.fm_search_container,children:(0,P.jsxs)("div",{className:B.Z.fm_search_container_inner,children:[(0,P.jsx)("img",{className:B.Z.fm_search_icon,alt:"search icon",src:"".concat(l.dB,"/navbar-search.svg")}),(0,P.jsx)("input",{type:"text",placeholder:x("search"),onChange:function(e){e.target.value?q(e.target.value):(I((function(){return 1})),p(""))}})]})})})]})}),(0,P.jsx)(a.Z,{}),(0,P.jsxs)(c.Z,{customStyle:{paddingTop:"0.2rem"},children:[(0,P.jsx)(U.Z,{children:(0,P.jsx)(s.Z,{label:"add_new_moderator",onAction:z})}),null===H||void 0===H||null===(n=H.list)||void 0===n?void 0:n.map((function(e,o){var n;return(null===H||void 0===H||null===(n=H.list)||void 0===n?void 0:n.length)===o+1?(0,P.jsx)("div",{ref:V,children:(0,P.jsx)(b,{moderator:e,financeId:m,instituteId:C})},null===e||void 0===e?void 0:e._id):(0,P.jsx)(b,{moderator:e,financeId:m,instituteId:C},null===e||void 0===e?void 0:e._id)})),J?j?(0,P.jsx)(R.Z,{}):(0,P.jsx)(M.Z,{}):j?!(null!==H&&void 0!==H&&null!==(h=H.list)&&void 0!==h&&h.length)&&(0,P.jsx)(D.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No moderator fuond related this search."}):!(null!==H&&void 0!==H&&null!==(S=H.list)&&void 0!==S&&S.length)&&(0,P.jsx)(D.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No moderator added."})]})]}),K&&(0,P.jsx)(y,{instituteId:C,fid:m,onClose:z})]})}},49806:function(e,o){o.Z={modal_container:"PlateformUser_modal_container__tqwpY",modal_container_outer_header:"PlateformUser_modal_container_outer_header__HbF+9",modal_container_header:"PlateformUser_modal_container_header__QzyxM",modal_container_header_btn:"PlateformUser_modal_container_header_btn__dWfwA",assign_search_container:"PlateformUser_assign_search_container__dJdYj",assign_search_input:"PlateformUser_assign_search_input__aFF28",assign_show_list_each:"PlateformUser_assign_show_list_each__co2b1",assign_show_list_each_active:"PlateformUser_assign_show_list_each_active__SWwFS",assign_each_paragraph:"PlateformUser_assign_each_paragraph__bDgq6"}}}]);
//# sourceMappingURL=8926.af91fa14.chunk.js.map