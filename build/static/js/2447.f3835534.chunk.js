"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[2447],{37570:function(e,t,n){var l=n(74165),o=n(15861),a=n(1413),i=n(37762),s=n(4942),d=n(29439),c=n(72791),u=n(36665),r=n(25313),v=n(98734),m=n(39230),N=n(98472),f=n(98094),h=n(33992),_=n(33710),g=n(72420),p=(n(59965),n(80184));t.Z=function(e){var t=e.onClose,n=e.cid,j=e.className,L=(0,m.$G)().t,Z=(0,c.useState)(!1),b=(0,d.Z)(Z,2),O=b[0],R=b[1],S=(0,c.useState)(!1),C=(0,d.Z)(S,2),x=(C[0],C[1]),y=(0,c.useState)(!1),E=(0,d.Z)(y,2),A=E[0],P=E[1],G=(0,c.useState)([]),M=(0,d.Z)(G,2),T=M[0],k=M[1],w=(0,c.useState)(""),U=(0,d.Z)(w,2),F=U[0],B=U[1],J=(0,c.useState)({startRange:"",endRange:""}),Y=(0,d.Z)(J,2),D=Y[0],I=(Y[1],(0,_.Z)()),H=I.daysInMonth,W=I.selectedDate,q=I.monthNames,z=I.getNextMonth,$=I.getPrevMonth,V=(0,h.R0)(),K=(0,d.Z)(V,1)[0];(0,c.useEffect)((function(){A&&(document.getElementById("attendance_download_file").click(),P(!1),k([]),R((function(e){return!e})))}),[A]);var Q=function(e){if("ALL"===F){var t,n,l,o=(t={GRNO:"","Enrollment / PRN":"",RollNo:"",Name:"",Gender:""},(0,s.Z)(t,e.className,""),(0,s.Z)(t,"Class Overall Percentage",""),t),d=(0,i.Z)(null===e||void 0===e?void 0:e.mapSubject);try{for(d.s();!(l=d.n()).done;){var c=l.value;o[c.subjectName]="",o["".concat(c.subjectName," Overall Percentage")]=""}}catch(b){d.e(b)}finally{d.f()}o["Overall Percentage"]="";var u=null===e||void 0===e||null===(n=e.students)||void 0===n?void 0:n.map((function(e){var t,n,l,s=0,d=(0,a.Z)({},o);d.GRNO=null!==(t=null===e||void 0===e?void 0:e.studentGRNO)&&void 0!==t?t:"N/A",d["Enrollment / PRN"]=null!==(n=null===e||void 0===e?void 0:e.student_prn_enroll_number)&&void 0!==n?n:"N/A",d.RollNo=null===e||void 0===e?void 0:e.studentROLLNO,d.Name="".concat((null===e||void 0===e?void 0:e.studentFirstName)+" "+(null===e||void 0===e?void 0:e.studentMiddleName)+" "+(null===e||void 0===e?void 0:e.studentLastName)),d.Gender=null===e||void 0===e?void 0:e.studentGender,d[e.className]="".concat(e.classWise.presentCount,"/").concat(e.classWise.totalCount),d["Class Overall Percentage"]=e.classWise.totalPercentage;var c,u=(0,i.Z)(null===e||void 0===e?void 0:e.subjects);try{for(u.s();!(c=u.n()).done;){var r=c.value;d[r.subjectName]="".concat(r.presentCount,"/").concat(r.totalCount),d["".concat(r.subjectName," Overall Percentage")]=r.totalPercentage,r.totalPercentage&&(s+=r.totalPercentage)}}catch(b){u.e(b)}finally{u.f()}return d["Overall Percentage"]=(s/(null===e||void 0===e||null===(l=e.subjects)||void 0===l?void 0:l.length)).toFixed(2),d}));return u}if("ALL_SUBJECT_SEMESTER"===F){var r,v,m={GRNO:"","Enrollment / PRN":"",RollNo:"",Name:"",Gender:""},N=(0,i.Z)(null===e||void 0===e?void 0:e.mapSubject);try{for(N.s();!(v=N.n()).done;){var f=v.value;m[f.subjectName]="",m["".concat(f.subjectName," Overall Percentage")]=""}}catch(b){N.e(b)}finally{N.f()}return null===e||void 0===e||null===(r=e.students)||void 0===r?void 0:r.map((function(e){var t,n,l=(0,a.Z)({},m);l.GRNO=null!==(t=null===e||void 0===e?void 0:e.studentGRNO)&&void 0!==t?t:"N/A",l["Enrollment / PRN"]=null!==(n=null===e||void 0===e?void 0:e.student_prn_enroll_number)&&void 0!==n?n:"N/A",l.RollNo=null===e||void 0===e?void 0:e.studentROLLNO,l.Name="".concat((null===e||void 0===e?void 0:e.studentFirstName)+" "+(null===e||void 0===e?void 0:e.studentMiddleName)+" "+(null===e||void 0===e?void 0:e.studentLastName)),l.Gender=null===e||void 0===e?void 0:e.studentGender;var o,s=(0,i.Z)(null===e||void 0===e?void 0:e.subjects);try{for(s.s();!(o=s.n()).done;){var d=o.value;l[d.subjectName]="".concat(d.presentCount,"/").concat(d.totalCount),l["".concat(d.subjectName," Overall Percentage")]=d.totalPercentage}}catch(b){s.e(b)}finally{s.f()}return l}))}if("ALL_SUBJECT_MONTHLY"===F){var h,_,g={GRNO:"","Enrollment / PRN":"",RollNo:"",Name:"",Gender:""},p=(0,i.Z)(null===e||void 0===e?void 0:e.mapSubject);try{for(p.s();!(_=p.n()).done;){var j=_.value;g[j.subjectName]="",g["".concat(j.subjectName," Overall Percentage")]=""}}catch(b){p.e(b)}finally{p.f()}return null===e||void 0===e||null===(h=e.students)||void 0===h?void 0:h.map((function(e){var t,n,l=(0,a.Z)({},g);l.GRNO=null!==(t=null===e||void 0===e?void 0:e.studentGRNO)&&void 0!==t?t:"N/A",l["Enrollment / PRN"]=null!==(n=null===e||void 0===e?void 0:e.student_prn_enroll_number)&&void 0!==n?n:"N/A",l.RollNo=null===e||void 0===e?void 0:e.studentROLLNO,l.Name="".concat((null===e||void 0===e?void 0:e.studentFirstName)+" "+(null===e||void 0===e?void 0:e.studentMiddleName)+" "+(null===e||void 0===e?void 0:e.studentLastName)),l.Gender=null===e||void 0===e?void 0:e.studentGender;var o,s=(0,i.Z)(null===e||void 0===e?void 0:e.subjects);try{for(s.s();!(o=s.n()).done;){var d=o.value;l[d.subjectName]="".concat(d.presentCount,"/").concat(d.totalCount),l["".concat(d.subjectName," Overall Percentage")]=d.totalPercentage}}catch(b){s.e(b)}finally{s.f()}return l}))}var L,Z=new Date("".concat(H," ").concat(q[W.getMonth()]," ").concat(W.getFullYear()));return Z=Z.toISOString(),null===e||void 0===e||null===(L=e.students)||void 0===L?void 0:L.map((function(t){var n,l,o,s,d,c={};if("RANGE"===F)for(var u=1;u<=H;u++)c["".concat(u,"/").concat(Z.substring(5,7),"/").concat(Z.substring(0,4))]="";else for(var r=1;r<=H;r++)if(r<10){var v,m="0".concat(r,"/").concat(Z.substring(5,7),"/").concat(Z.substring(0,4));null!==e&&void 0!==e&&null!==(v=e.attendaceMappingDate)&&void 0!==v&&v.includes(m)&&(c[m]="")}else{var N,f="".concat(r,"/").concat(Z.substring(5,7),"/").concat(Z.substring(0,4));null!==e&&void 0!==e&&null!==(N=e.attendaceMappingDate)&&void 0!==N&&N.includes(f)&&(c[f]="")}var h,_=(0,i.Z)(null===t||void 0===t?void 0:t.availablity);try{for(_.s();!(h=_.n()).done;){var g=h.value;c["".concat(null===g||void 0===g?void 0:g.date)]=null===g||void 0===g?void 0:g.status}}catch(b){_.e(b)}finally{_.f()}return(0,a.Z)((0,a.Z)({GRNO:null!==(n=null===t||void 0===t?void 0:t.studentGRNO)&&void 0!==n?n:"N/A","Enrollment / PRN":null!==(l=null===t||void 0===t?void 0:t.student_prn_enroll_number)&&void 0!==l?l:"N/A",RollNo:null===t||void 0===t?void 0:t.studentROLLNO,Name:(null===t||void 0===t?void 0:t.studentFirstName)+" "+(null===t||void 0===t?void 0:t.studentMiddleName)+" "+(null===t||void 0===t?void 0:t.studentLastName),Gender:null===t||void 0===t?void 0:t.studentGender},c),{},{"Total Count":"".concat(null===t||void 0===t||null===(o=t.classWise)||void 0===o?void 0:o.presentCount,"/").concat(null===t||void 0===t||null===(s=t.classWise)||void 0===s?void 0:s.totalCount),"Overall Percentage":null===t||void 0===t||null===(d=t.classWise)||void 0===d?void 0:d.totalPercentage})}))},X=function(e){B(e)};return(0,p.jsxs)(u.Z,{onClose:t,children:[(0,p.jsxs)("div",{className:r.Z.filter_container,style:{minHeight:"15rem",width:"40rem"},children:[(0,p.jsx)("h6",{className:r.Z.filter_title,children:L("filter_and_export_student_attendance")}),(0,p.jsx)(f.Z,{customStyle:{width:"100%"}}),(0,p.jsxs)("section",{className:g.Z.tile_tile_container,style:{marginTop:"1rem"},children:[(0,p.jsx)("div",{className:""===F?g.Z.tile_tile_active:g.Z.tile_tile,onClick:function(){return X("")},children:L("monthly")}),(0,p.jsx)("div",{className:"ALL_SUBJECT_MONTHLY"===F?g.Z.tile_tile_active:g.Z.tile_tile,onClick:function(){return X("ALL_SUBJECT_MONTHLY")},children:L("all_subject_monthly")}),(0,p.jsx)("div",{className:"ALL"===F?g.Z.tile_tile_active:g.Z.tile_tile,onClick:function(){return X("ALL")},children:L("semester")}),(0,p.jsx)("div",{className:"ALL_SUBJECT_SEMESTER"===F?g.Z.tile_tile_active:g.Z.tile_tile,onClick:function(){return X("ALL_SUBJECT_SEMESTER")},children:L("all_subject_semester")})]}),F&&"ALL_SUBJECT_MONTHLY"!==F?null:(0,p.jsxs)("section",{className:r.Z.fees_head_title,children:[(0,p.jsx)("img",{src:"/images/members/back-icon-white.svg",style:{cursor:"pointer"},onClick:function(){$()}}),(0,p.jsxs)("h6",{className:"".concat(r.Z.yearmonth),children:["".concat(q[W.getMonth()])," ","".concat(W.getFullYear())]}),(0,p.jsx)("img",{src:"/images/members/forward-icon-white.svg",style:{cursor:"pointer"},onClick:function(){z()}})]}),(0,p.jsx)("button",{className:r.Z.next_btn,onClick:function(){var e=!1,t="";if("RANGE"===F){for(var a in t=function(e){var t={};for(var n in e)e[n]||(t[n]="".concat(n," is required!"));return t}(D))if(a){e=!0;break}}else e=!1;if(e)x(t);else{R((function(e){return!e}));var i=new Date("".concat(H," ").concat(q[W.getMonth()]," ").concat(W.getFullYear()));i=i.toISOString(),K({cid:n,is_type:F,month:"".concat(i.substring(5,7)),year:"".concat(i.substring(0,4)),zipData:D}).then(function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t){var n,o;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(null===(n=t.data)||void 0===n?void 0:n.attendance_zip);case 2:o=e.sent,k((function(){return o})),P(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){}))}},style:{marginTop:"3rem"},children:L("export_data")}),(0,p.jsx)(N.CSVLink,{data:T,filename:"".concat(j,"-").concat("ALL"===F?"semester":"ALL_SUBJECT_SEMESTER"===F?"all-subject-semester":"ALL_SUBJECT_MONTHLY"===F?"all-subject-monthly":"monthly","-attendance"),id:"attendance_download_file"})]}),O&&(0,p.jsx)(v.Z,{})]})}},23664:function(e,t,n){var l=n(29439),o=n(72791),a=n(16871),i=n(43504),s=n(24582),d=n(39230),c=n(69721),u=n(34586),r=n(80184);t.Z=function(e){var t,n=e.cid,v=e.openAs,m=e.isDepartment,N=(0,a.UO)(),f=(0,d.$G)().t,h=(0,o.useState)([]),_=(0,l.Z)(h,2),g=_[0],p=_[1],j=(0,s.EY)({data:{cid:n,page:1,limit:30},skip:!n}),L=j.classAllStudent,Z=j.classAllStudentRefetch;(0,o.useEffect)((function(){n&&Z()}),[n,Z]),(0,o.useEffect)((function(){var e,t;null!==L&&void 0!==L&&null!==(e=L.classes)&&void 0!==e&&e.ApproveStudent&&p(null===L||void 0===L||null===(t=L.classes)||void 0===t?void 0:t.ApproveStudent)}),[null===L||void 0===L||null===(t=L.classes)||void 0===t?void 0:t.ApproveStudent]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:u.Z.catalog,style:{border:m?"none":"0.5px solid #cacaca"},children:[(0,r.jsx)("div",{className:u.Z.searchContainerr,children:(0,r.jsxs)("div",{className:u.Z.searchContainer,style:{width:"100%"},children:[(0,r.jsx)("img",{alt:"",src:"/images/search-dept-icon.svg"}),(0,r.jsx)("input",{type:"text",placeholder:f("search-label"),onChange:function(e){if(e.target.value){var t,n,l=null===L||void 0===L||null===(t=L.classes)||void 0===t||null===(n=t.ApproveStudent)||void 0===n?void 0:n.filter((function(t){var n,l,o;return null!==(n="".concat(null===t||void 0===t?void 0:t.studentFirstName," ").concat(null!==t&&void 0!==t&&t.studentMiddleName?(null===t||void 0===t?void 0:t.studentMiddleName)+" ":"").concat(null===t||void 0===t?void 0:t.studentLastName))&&void 0!==n&&null!==(l=n.toLowerCase())&&void 0!==l&&l.includes(null===(o=e.target.value)||void 0===o?void 0:o.toLowerCase())?t:null}));p(l)}else{var o;p(null===L||void 0===L||null===(o=L.classes)||void 0===o?void 0:o.ApproveStudent)}}})]})}),(0,r.jsx)("div",{className:u.Z.itemsContainer,children:null===g||void 0===g?void 0:g.map((function(e){var t;return(0,r.jsx)(i.rU,{to:"/q/".concat(N.username,"/student/profile"),state:{sid:null===e||void 0===e?void 0:e._id,viewAs:v||"INSTITUTE"},children:(0,r.jsxs)("div",{className:u.Z.item,children:[(0,r.jsx)("p",{children:null===e||void 0===e?void 0:e.studentROLLNO}),(0,r.jsx)("img",{alt:"",src:null!==e&&void 0!==e&&e.studentProfilePhoto?"".concat(c.yI,"/").concat(null===e||void 0===e?void 0:e.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[null===e||void 0===e?void 0:e.studentFirstName," ",null!==e&&void 0!==e&&e.studentMiddleName?null===e||void 0===e?void 0:e.studentMiddleName:" "," ",null===e||void 0===e?void 0:e.studentLastName]}),(0,r.jsxs)("p",{style:{marginTop:"0.3rem"},children:[f("gr_number")," ",null!==(t=null===e||void 0===e?void 0:e.studentGRNO)&&void 0!==t?t:""]})]})]})})}))})]})})}}}]);
//# sourceMappingURL=2447.f3835534.chunk.js.map