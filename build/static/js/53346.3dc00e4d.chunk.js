(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[53346,7920],{53346:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>L});var l=i(39230),n=i(56959),s=i(72791),d=i(23441),o=i(6758),r=i(91427),a=i(57588),c=i(63687),u=i(21348),v=i(90904),_=i(1669),h=i(98684),f=i(55336),p=i(2651),m=i(16871),x=i(43504),j=i(1095),g=i(97892),y=i.n(g),M=i(82824),Y=i(37782),Z=i(76697),N=i(80184);const w=e=>{var t,n,d,r,a,c,u,v,_,p,g,w,L,D,k,T,b,R,S,H,I,A,E,C,q,O,U;let{logs:W}=e;const{t:F}=(0,l.$G)(),G=(0,m.UO)(),J=(0,m.TH)(),[P,$]=(0,s.useState)(""),[z,B]=(0,s.useState)(!1),[V,K]=(0,s.useState)(""),{financeReceipt:Q,financeReceiptRefetch:X}=(0,o.Nw)({rid:P,skip:!P});(0,s.useEffect)((()=>{P&&X()}),[P,X]),(0,s.useEffect)((()=>{null!==Q&&void 0!==Q&&Q.receipt&&null!==Q&&void 0!==Q&&Q.all_remain&&K(Q)}),[Q]),(0,s.useEffect)((()=>{if(V){const e=new Worker(new URL(i.p+i.u(24882),i.b)),{institute:t,studentInfo:l,paymentReceiptInfo:n}=(0,Y.Hs)(null===V||void 0===V?void 0:V.all_remain,null===V||void 0===V?void 0:V.receipt);e.postMessage({institute:t,studentInfo:l,paymentReceiptInfo:n,printReceiptType:"Refunded"===(null===n||void 0===n?void 0:n.transactonRefund)?"ADMISSION_REFUND":"ADMISSION"}),e.onmessage=t=>{t&&(window.open(t.data,"_blank"),B((e=>!e)),K(""),e.terminate())}}}),[V]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:Z.Z.sidebarheader,style:{gap:"1%"},title:"View Receipt",children:[(0,N.jsxs)("div",{className:Z.Z.history_image_container,style:{width:"50%"},children:[null!==W&&void 0!==W&&null!==(t=W.fee_receipt)&&void 0!==t&&null!==(n=t.student)&&void 0!==n&&n.studentProfilePhoto?(0,N.jsx)(x.rU,{to:"/q/".concat(G.username,"/student/profile"),state:{...J.state,sid:null===W||void 0===W||null===(d=W.fee_receipt)||void 0===d||null===(r=d.student)||void 0===r?void 0:r._id},children:(0,N.jsx)("img",{src:"".concat(j.yI,"/").concat(null===W||void 0===W||null===(a=W.fee_receipt)||void 0===a||null===(c=a.student)||void 0===c?void 0:c.studentProfilePhoto),alt:"qr code",style:{width:"60px",height:"60px",borderRadius:"12px"}})}):null,(0,N.jsxs)("div",{className:Z.Z.text,children:[(0,N.jsx)("h6",{children:"".concat(null!==(u=null===W||void 0===W||null===(v=W.fee_receipt)||void 0===v||null===(_=v.student)||void 0===_?void 0:_.studentFirstName)&&void 0!==u?u:""," ").concat(null!==(p=null===W||void 0===W||null===(g=W.fee_receipt)||void 0===g||null===(w=g.student)||void 0===w?void 0:w.studentMiddleName)&&void 0!==p?p:""," ").concat(null!==(L=null===W||void 0===W||null===(D=W.fee_receipt)||void 0===D||null===(k=D.student)||void 0===k?void 0:k.studentLastName)&&void 0!==L?L:"")}),(0,N.jsxs)("p",{className:Z.Z.rcv,children:[F("gr_number")," ",null!==(T=null===W||void 0===W||null===(b=W.fee_receipt)||void 0===b||null===(R=b.student)||void 0===R?void 0:R.studentGRNO)&&void 0!==T?T:""]}),(0,N.jsxs)("p",{className:Z.Z.rcv,children:[null===(S=y()(null===W||void 0===W?void 0:W.created_at))||void 0===S?void 0:S.format("DD/MM/YYYY"),", ",(0,M.J)(null===W||void 0===W?void 0:W.created_at,"LT")]})]})]}),(0,N.jsxs)("div",{className:Z.Z.text,style:{width:"27%"},children:[(0,N.jsx)("p",{className:Z.Z.rcv,style:{width:"100%"},children:F("transaction_id")}),(0,N.jsx)("h6",{style:{width:"100%",wordWrap:"break-word"},children:null!==W&&void 0!==W&&null!==(H=W.fee_receipt)&&void 0!==H&&H.razorpay_payment_id?null===W||void 0===W||null===(I=W.fee_receipt)||void 0===I?void 0:I.razorpay_payment_id:null!==W&&void 0!==W&&null!==(A=W.fee_receipt)&&void 0!==A&&A.fee_utr_reference?null===W||void 0===W||null===(E=W.fee_receipt)||void 0===E?void 0:E.fee_utr_reference:"N/A"})]}),(0,N.jsxs)("div",{className:Z.Z.text,style:{width:"20%"},children:[(0,N.jsxs)("p",{className:Z.Z.rcv,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[F("invoice_no")," ",null!==(C=null===W||void 0===W||null===(q=W.fee_receipt)||void 0===q?void 0:q.invoice_count)&&void 0!==C?C:"N/A",(0,N.jsx)("img",{src:"".concat(h.J7,"/receipt.svg"),alt:"receipt icon",title:"Download Fees Receipt",onClick:()=>{(()=>{var e,t,i;null!==W&&void 0!==W&&null!==(e=W.fee_receipt)&&void 0!==e&&e._id&&(B((e=>!e)),$(null===W||void 0===W||null===(t=W.fee_receipt)||void 0===t?void 0:t._id),P===(null===W||void 0===W||null===(i=W.fee_receipt)||void 0===i?void 0:i._id)&&K(Q))})()}})]}),(0,N.jsxs)("h6",{style:{width:"100%"},children:[F("rs_only")," ",null===W||void 0===W||null===(O=W.fee_receipt)||void 0===O?void 0:O.fee_payment_amount]}),(0,N.jsx)("p",{className:Z.Z.rcv,style:{width:"100%"},children:null===W||void 0===W||null===(U=W.fee_receipt)||void 0===U?void 0:U.fee_payment_mode})]})]}),z&&(0,N.jsx)(f.Z,{})]})},L=e=>{var t,i,m;let{fid:x}=e;const{t:j}=(0,l.$G)(),[g,y]=(0,s.useState)(""),[M,Y]=(0,s.useState)(1),[Z,L]=(0,s.useState)(!0),[D,k]=(0,d.YD)({skip:g}),{financeDeletedLogsList:T,financeDeletedLogsListLoading:b}=(0,o.bW)({data:{fid:x,page:M,limit:10,search:g},skip:!x});(0,s.useEffect)((()=>{k&&Z&&Y((e=>e+1))}),[k,Z]),(0,s.useEffect)((()=>{var e;if(null!==T&&void 0!==T&&null!==(e=T.list)&&void 0!==e&&e.length){var t;let e=(0,r.f)(null===T||void 0===T||null===(t=T.list)||void 0===t?void 0:t.length);L((()=>e))}}),[null===T||void 0===T?void 0:T.list]);const R=(0,s.useCallback)((0,a.J)((e=>{Y((()=>1)),y(e)}),1500),[]);return(0,N.jsxs)(c.Z,{children:[(0,N.jsx)(u.Z,{children:(0,N.jsxs)("div",{className:n.Z.fm_header_container,children:[(0,N.jsx)("h6",{children:j("activity_logs")}),(0,N.jsx)("div",{className:n.Z.fm_search,children:(0,N.jsx)("section",{className:n.Z.fm_search_container,children:(0,N.jsxs)("div",{className:n.Z.fm_search_container_inner,children:[(0,N.jsx)("img",{className:n.Z.fm_search_icon,alt:"search icon",src:"".concat(h.dB,"/navbar-search.svg")}),(0,N.jsx)("input",{type:"text",placeholder:j("search"),onChange:e=>{e.target.value?R(e.target.value):(Y((()=>1)),y(""))}})]})})})]})}),(0,N.jsx)(v.Z,{}),(0,N.jsxs)(u.Z,{children:[null===T||void 0===T||null===(t=T.list)||void 0===t?void 0:t.map(((e,t)=>{var i;return(null===T||void 0===T||null===(i=T.list)||void 0===i?void 0:i.length)===t+1?(0,N.jsx)("div",{ref:D,children:(0,N.jsx)(w,{logs:e})},null===e||void 0===e?void 0:e._id):(0,N.jsx)(w,{logs:e},null===e||void 0===e?void 0:e._id)})),b?g?(0,N.jsx)(f.Z,{}):(0,N.jsx)(_.Z,{}):g?0===(null===T||void 0===T||null===(i=T.list)||void 0===i?void 0:i.length)&&(0,N.jsx)(p.Z,{title:"No logs found related this search."}):0===(null===T||void 0===T||null===(m=T.list)||void 0===m?void 0:m.length)&&(0,N.jsx)(p.Z,{title:"No logs."})]})]})}},82824:(e,t,i)=>{"use strict";i.d(t,{J:()=>o,Z:()=>r});var l=i(99893),n=i.n(l),s=i(97892),d=i.n(s);const o=(e,t)=>(d().extend(n()),d()(e).format(t)),r=(e,t,i)=>{var l;return d()()[e]("".concat(null===(l=d()(i))||void 0===l?void 0:l.format("YYYY-MM-DD")),t)}},99893:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(t,i,l){var n=i.prototype,s=n.format;l.en.formats=e,n.format=function(t){void 0===t&&(t="YYYY-MM-DDTHH:mm:ssZ");var i=this.$locale().formats,l=function(t,i){return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,l,n){var s=n&&n.toUpperCase();return l||i[n]||e[n]||i[s].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,i){return t||i.slice(1)}))}))}(t,void 0===i?{}:i);return s.call(this,l)}}}()},76697:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});const l={settle_card:"TransactionHistory_settle_card__WjSwI",settle_card_container:"TransactionHistory_settle_card_container__EIw4W",settle_card_text:"TransactionHistory_settle_card_text__3j20S",settle_paragraph:"TransactionHistory_settle_paragraph__x3Ovt",sidebarheader:"TransactionHistory_sidebarheader__oEDm9",history_image_container:"TransactionHistory_history_image_container__ZBhq9",text:"TransactionHistory_text__yimnr",rcv:"TransactionHistory_rcv__kuGgZ"}}}]);
//# sourceMappingURL=53346.3dc00e4d.chunk.js.map