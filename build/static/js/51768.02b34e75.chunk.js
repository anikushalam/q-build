(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[51768],{51768:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Y});var o=n(6758),i=n(72791),l=n(23441),d=n(56959),a=n(91427),s=n(57588),r=n(39230),c=n(76697),v=n(16871),u=n(43504),_=n(97892),m=n.n(_),p=n(82824),f=n(1095),h=n(98684),x=n(55336),y=n(37782),g=n(73032),F=n(69721),N=n(62732),T=n(80184);const S=e=>{var t,l,d,a,s,_,S,M,w,Y,j,b,D,L,C,z,R,A,Z,k,I,H,E,P,W,O,U,q,G;let{history:J}=e;const{t:B}=(0,r.$G)(),$=(0,v.UO)(),Q=(0,v.TH)(),[V,X]=(0,i.useState)(""),[K,ee]=(0,i.useState)(!1),[te,ne]=(0,i.useState)(""),[oe,ie]=(0,i.useState)(""),[le,de]=(0,i.useState)(""),{financeReceipt:ae,financeReceiptRefetch:se}=(0,o.Nw)({rid:V,skip:!V});(0,i.useEffect)((()=>{V&&se()}),[V,se]),(0,i.useEffect)((()=>{null!==ae&&void 0!==ae&&ae.receipt&&null!==ae&&void 0!==ae&&ae.all_remain&&ne(ae)}),[ae]),(0,i.useEffect)((()=>{if(te){var e;const t=new Worker(new URL(n.p+n.u(26283),n.b));if("Hostel Application"===(null===te||void 0===te||null===(e=te.all_remain)||void 0===e?void 0:e.remaining_flow)){const{institute:e,studentInfo:n,paymentReceiptInfo:o}=(0,y.sp)(null===te||void 0===te?void 0:te.all_remain,null===te||void 0===te?void 0:te.receipt);t.postMessage({institute:e,studentInfo:n,paymentReceiptInfo:o,printReceiptType:"Refunded"===(null===o||void 0===o?void 0:o.transactonRefund)?"HOSTEL_REFUND":"HOSTEL"})}else{const{institute:e,studentInfo:n,paymentReceiptInfo:o}=(0,y.Hs)(null===te||void 0===te?void 0:te.all_remain,null===te||void 0===te?void 0:te.receipt);t.postMessage({institute:e,studentInfo:n,paymentReceiptInfo:o,printReceiptType:"Refunded"===(null===o||void 0===o?void 0:o.transactonRefund)?"ADMISSION_REFUND":"ADMISSION"})}t.onmessage=e=>{e&&(window.open(e.data,"_blank"),ee((e=>!e)),ne(""),t.terminate())}}}),[te]);const{internalFeeReceipt:re,internalFeeReceiptRefetch:ce}=(0,g.H0)({rid:oe,skip:!oe});(0,i.useEffect)((()=>{oe&&ce()}),[oe,ce]),(0,i.useEffect)((()=>{null!==re&&void 0!==re&&re.receipt&&null!==re&&void 0!==re&&re.one_account&&de(re)}),[re]),(0,i.useEffect)((()=>{if(le){var e,t,n,o,i,l,d,a;ee((e=>!e));let s=null===le||void 0===le?void 0:le.one_account,r=null===le||void 0===le?void 0:le.receipt;const c=null!==r&&void 0!==r&&null!==(e=r.finance)&&void 0!==e&&null!==(t=e.institute)&&void 0!==t&&t.insProfilePhoto?"".concat(F.Yz,"/").concat(null===r||void 0===r||null===(n=r.finance)||void 0===n||null===(o=n.institute)||void 0===o?void 0:o.insProfilePhoto):"/images/certificate/logodemo.jpg",v=null!==r&&void 0!==r&&null!==(i=r.finance)&&void 0!==i&&null!==(l=i.institute)&&void 0!==l&&l.affliatedLogo?"".concat(F.Yz,"/").concat(null===r||void 0===r||null===(d=r.finance)||void 0===d||null===(a=d.institute)||void 0===a?void 0:a.affliatedLogo):"/images/certificate/logodemo.jpg";s&&r&&((0,N.Z)(s,r,c,v),ee(!1)),de(""),window.location.reload()}}),[le]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:c.Z.sidebarheader,style:{gap:"1%"},title:"Income"===(null===J||void 0===J?void 0:J.payment_module_type)?"":"View Receipt",children:[(0,T.jsxs)("div",{className:c.Z.history_image_container,style:{width:"50%"},children:[null!==J&&void 0!==J&&null!==(t=J.payment_student)&&void 0!==t&&t.studentProfilePhoto?(0,T.jsx)(u.rU,{to:"/q/".concat($.username,"/student/profile"),state:{...Q.state,sid:null===J||void 0===J||null===(l=J.payment_student)||void 0===l?void 0:l._id},children:(0,T.jsx)("img",{src:"".concat(f.yI,"/").concat(null===J||void 0===J||null===(d=J.payment_student)||void 0===d?void 0:d.studentProfilePhoto),alt:"qr code",style:{width:"60px",height:"60px",borderRadius:"12px"}})}):null,(0,T.jsxs)("div",{className:c.Z.text,children:[(0,T.jsx)("p",{className:c.Z.rcv,children:B("recived_from")}),(0,T.jsx)("h6",{children:null!==J&&void 0!==J&&J.payment_student?"".concat(null!==(a=null===J||void 0===J||null===(s=J.payment_student)||void 0===s?void 0:s.studentFirstName)&&void 0!==a?a:""," ").concat(null!==(_=null===J||void 0===J||null===(S=J.payment_student)||void 0===S?void 0:S.studentMiddleName)&&void 0!==_?_:""," ").concat(null!==(M=null===J||void 0===J||null===(w=J.payment_student)||void 0===w?void 0:w.studentLastName)&&void 0!==M?M:""):null!==(Y=null===J||void 0===J||null===(j=J.payment_by_end_user_id)||void 0===j?void 0:j.userLegalName)&&void 0!==Y?Y:null===J||void 0===J?void 0:J.payment_by_end_user_id_name}),(0,T.jsxs)("p",{className:c.Z.rcv,children:[B("gr_number")," ",null!==(b=null===J||void 0===J||null===(D=J.payment_student)||void 0===D?void 0:D.studentGRNO)&&void 0!==b?b:""]}),(0,T.jsx)("p",{className:c.Z.rcv,children:null!==(L=null===J||void 0===J||null===(C=J.payment_student)||void 0===C||null===(z=C.fee_structure)||void 0===z?void 0:z.unique_structure_name)&&void 0!==L?L:""})]})]}),(0,T.jsxs)("div",{className:c.Z.text,style:{width:"27%"},children:[(0,T.jsx)("p",{className:c.Z.rcv,style:{width:"100%"},children:B("transaction_id")}),(0,T.jsx)("h6",{style:{width:"100%",wordWrap:"break-word"},children:null!==J&&void 0!==J&&J.razorpay_payment_id?null===J||void 0===J?void 0:J.razorpay_payment_id:null!==J&&void 0!==J&&null!==(R=J.fee_receipt)&&void 0!==R&&R.fee_utr_reference?null===J||void 0===J||null===(A=J.fee_receipt)||void 0===A?void 0:A.fee_utr_reference:"N/A"}),(0,T.jsxs)("p",{className:c.Z.rcv,style:{width:"100%"},children:[m()(null===J||void 0===J?void 0:J.created_at).format("DD MMM YYYY"),", ",(0,p.J)(null===J||void 0===J?void 0:J.created_at,"LT")]})]}),(0,T.jsxs)("div",{className:c.Z.text,style:{width:"20%"},children:[(0,T.jsxs)("p",{className:c.Z.rcv,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[B("invoice_no")," ",null!==(Z=null!==(k=null===J||void 0===J||null===(I=J.fee_receipt)||void 0===I?void 0:I.invoice_count)&&void 0!==k?k:null===J||void 0===J?void 0:J.payment_invoice_number)&&void 0!==Z?Z:"N/A",null!==J&&void 0!==J&&null!==(H=J.fee_receipt)&&void 0!==H&&H.receipt_file?(0,T.jsx)("a",{href:"".concat(f.q2,"/").concat(null===J||void 0===J||null===(E=J.fee_receipt)||void 0===E?void 0:E.receipt_file),target:"_blank",rel:"noopener noreferrer",children:(0,T.jsx)("img",{src:"".concat(h.J7,"/receipt.svg"),alt:"receipt icon",title:"Download Fees Receipt"})}):(0,T.jsx)("img",{src:"".concat(h.J7,"/receipt.svg"),alt:"receipt icon",title:"Download Fees Receipt",onClick:()=>{var e,t,n;"Admission"===(null===J||void 0===J?void 0:J.payment_module_type)||"Admission Fees"===(null===J||void 0===J?void 0:J.payment_module_type)||"Hostel"===(null===J||void 0===J?void 0:J.payment_module_type)||"Hostel Fees"===(null===J||void 0===J?void 0:J.payment_module_type)?(()=>{var e,t,n;null!==J&&void 0!==J&&null!==(e=J.fee_receipt)&&void 0!==e&&e._id&&(ee((e=>!e)),X(null===J||void 0===J||null===(t=J.fee_receipt)||void 0===t?void 0:t._id),V===(null===J||void 0===J||null===(n=J.fee_receipt)||void 0===n?void 0:n._id)&&ne(ae))})(null===J||void 0===J||null===(e=J.fee_receipt)||void 0===e||e._id):"Income"===(null===J||void 0===J?void 0:J.payment_module_type)||(n=null===J||void 0===J||null===(t=J.fee_receipt)||void 0===t?void 0:t._id)&&(ee((e=>!e)),ie(n))}})]}),(0,T.jsxs)("h6",{style:{width:"100%"},children:[B("rs_only")," ",null===J||void 0===J?void 0:J.payment_amount]}),(0,T.jsx)("p",{className:c.Z.rcv,style:{width:"100%"},children:"offline"===(null===(P=J.payment_mode)||void 0===P?void 0:P.toLowerCase())?null!==J&&void 0!==J&&null!==(W=J.fee_receipt)&&void 0!==W&&W.fee_payment_mode?"".concat(null===J||void 0===J||null===(O=J.fee_receipt)||void 0===O?void 0:O.fee_payment_mode):"Offline - No Receipt":"online"===(null===(U=J.payment_mode)||void 0===U?void 0:U.toLowerCase())?null!==J&&void 0!==J&&null!==(q=J.fee_receipt)&&void 0!==q&&q.fee_payment_mode?"".concat(null===J||void 0===J||null===(G=J.fee_receipt)||void 0===G?void 0:G.fee_payment_mode):"Online - No Receipt":null===J||void 0===J?void 0:J.payment_mode})]})]}),K&&(0,T.jsx)(x.Z,{})]})};var M=n(1669),w=n(2651);const Y=e=>{var t,n,c;let{instituteId:v}=e;const{t:u}=(0,r.$G)(),[_,m]=(0,i.useState)(""),[p,f]=(0,i.useState)(1),[y,g]=(0,i.useState)(!0),[F,N]=(0,l.YD)({skip:_}),{financeAllTransaction:Y,financeAllTransactionLoading:j}=(0,o.XN)({data:{uid:v,page:p,limit:10,search:_,filter:""},skip:!v});(0,i.useEffect)((()=>{N&&y&&f((e=>e+1))}),[N,y]),(0,i.useEffect)((()=>{var e;if(null!==Y&&void 0!==Y&&null!==(e=Y.list)&&void 0!==e&&e.length){var t;let e=(0,a.f)(null===Y||void 0===Y||null===(t=Y.list)||void 0===t?void 0:t.length);g((()=>e))}}),[null===Y||void 0===Y?void 0:Y.list]);const b=(0,i.useCallback)((0,s.J)((e=>{f((()=>1)),m(e)}),1500),[]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{className:d.Z.fm_search_full,children:(0,T.jsx)("section",{className:d.Z.fm_search_full_container,children:(0,T.jsxs)("div",{className:d.Z.fm_search_full_container_inner,children:[(0,T.jsx)("img",{className:d.Z.fm_search_full_icon,alt:"search icon",src:"".concat(h.dB,"/navbar-search.svg")}),(0,T.jsx)("input",{type:"text",placeholder:u("search"),onChange:e=>{e.target.value?b(e.target.value):(f((()=>1)),m(""))}})]})})}),null===Y||void 0===Y||null===(t=Y.list)||void 0===t?void 0:t.map(((e,t)=>{var n;return(null===Y||void 0===Y||null===(n=Y.list)||void 0===n?void 0:n.length)===t+1?(0,T.jsx)("div",{ref:F,children:(0,T.jsx)(S,{history:e})},null===e||void 0===e?void 0:e._id):(0,T.jsx)(S,{history:e},null===e||void 0===e?void 0:e._id)})),j?_?(0,T.jsx)(x.Z,{}):(0,T.jsx)(M.Z,{}):_?0===(null===Y||void 0===Y||null===(n=Y.list)||void 0===n?void 0:n.length)&&(0,T.jsx)(w.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No receipts found related this search."}):0===(null===Y||void 0===Y||null===(c=Y.list)||void 0===c?void 0:c.length)&&(0,T.jsx)(w.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No receipts added."})]})}},82824:(e,t,n)=>{"use strict";n.d(t,{J:()=>a,Z:()=>s});var o=n(99893),i=n.n(o),l=n(97892),d=n.n(l);const a=(e,t)=>(d().extend(i()),d()(e).format(t)),s=(e,t,n)=>{var o;return d()()[e]("".concat(null===(o=d()(n))||void 0===o?void 0:o.format("YYYY-MM-DD")),t)}},62732:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(35125),i=n(72426),l=n.n(i),d=n(62906),a=n.n(d),s=new o.ZP({format:[270,210]}),r=s.internal.pageSize.getWidth();const c=function(e,t,n,o){var i,d,c,v,u,_,m,p,f,h,x,y,g,F,N,T,S;let M=arguments.length>4&&void 0!==arguments[4]&&arguments[4],w=null===t||void 0===t||null===(i=t.finance)||void 0===i?void 0:i.institute,Y=null===t||void 0===t||null===(d=t.finance)||void 0===d?void 0:d.financeHead,j=null===t||void 0===t?void 0:t.student,b=null===t||void 0===t?void 0:t.internal_fees,D=null===t||void 0===t?void 0:t.order_history;s.addImage(n,"JPEG",9,3,25,25),s.addImage(o,"JPEG",r-34,2.4,25,25),s.setLineWidth(8),s.setDrawColor(255,255,255),s.circle(21.4,15,16),s.setLineWidth(0),s.setLineWidth(8),s.setDrawColor(255,255,255),s.circle(r-21.4,15,16),s.setLineWidth(0);const L=s.splitTextToSize(null===w||void 0===w?void 0:w.insName,146);if(s.setFont(void 0,"normal"),L.length>1){let e=10;s.setFont("700"),s.setTextColor(18,18,18),s.setFontSize(16),s.text(107,e,L,"center"),e=L.length+145}else{let e=10;s.setFont("700"),s.setTextColor(18,18,18),s.setFontSize(18),s.text(107,e,L,"center"),e=L.length+145}s.setFont("Arial","normal","400"),s.setTextColor(18,18,18),s.setFontSize(10),s.text(r/2,L.length>1?23:19,null===w||void 0===w?void 0:w.insAddress,"center"),s.setFont("WorkSans"),s.setTextColor(18,18,18),s.setFontSize(10),s.text(r/2,L.length>1?29:25,"Mob No : ".concat(null===w||void 0===w?void 0:w.insPhoneNumber," , Mail: ").concat(null===w||void 0===w?void 0:w.insEmail),"center"),s.setFont("WorkSans"),s.setTextColor(0,0,0),s.setFontSize(18),s.text(r/2,37,"Fee Receipt","center"),s.setLineWidth(.7),s.setDrawColor(18,18,18),s.line(0,46,r,46),s.setTextColor(0,0,0),s.setFont(void 0,"bold"),s.setFontSize(10),s.text(9,54,"Invoice No :"),s.setFont(void 0,"normal"),s.setTextColor(0,0,0),s.setFontSize(10),s.text(32,54,null===t||void 0===t?void 0:t.invoice_count),s.setTextColor(0,0,0),s.setFont(void 0,"bold"),s.setFontSize(10),s.text(r-32,54,"Dated:",{align:"right"}),s.setFont(void 0,"normal"),s.setTextColor(0,0,0),s.setFontSize(10),s.text(r-12,54,l()(null===t||void 0===t?void 0:t.created_at).format("DD-MMM-YYYY"),{align:"right"}),s.setTextColor(0,0,0),s.setFont(void 0,"bold"),s.setFontSize(10),s.text(9,61,"Purpose:"),s.setFont(void 0,"normal"),s.setTextColor(0,0,0),s.setFontSize(10),s.text(32,61,"".concat(null!==(c=null===b||void 0===b?void 0:b.internal_fee_reason)&&void 0!==c?c:"N/A")),s.setTextColor(0,0,0),s.setFont(void 0,"bold"),s.setFontSize(10),s.text(9,68,"Amount: "),s.setFont(void 0,"normal"),s.setTextColor(0,0,0),s.setFontSize(10),s.text(32,68,"Rs. ".concat(null===t||void 0===t?void 0:t.fee_payment_amount)),s.setTextColor(0,0,0),s.setFont(void 0,"bold"),s.setFontSize(11),s.text(9,97," ".concat(M?"Received Through: ":"Paid Through: ")),s.setFont(void 0,"normal"),s.text(44,97,"".concat(null===e||void 0===e?void 0:e.finance_bank_name,", ").concat(null===e||void 0===e?void 0:e.finance_bank_account_name,", A/c No:  ").concat(null===e||void 0===e?void 0:e.finance_bank_account_number)),s.setTextColor(0,0,0),s.setFont(void 0,"bold"),s.text(9,107," On Account of: ");const C="Being money ".concat(M?"received":"paid"," by ").concat(null===t||void 0===t?void 0:t.fee_payment_mode,", Transaction ID: ").concat(null!==(v=null===D||void 0===D?void 0:D.razorpay_order_id)&&void 0!==v?v:"N/A"," ,  Dated: ").concat(l()(null===t||void 0===t?void 0:t.created_at).format("DD-MMM-YYYY"),"  for Rs. ").concat(null===t||void 0===t?void 0:t.fee_payment_amount,".").concat(M?"From":"To"," ","".concat(null!==(u=null===j||void 0===j?void 0:j.studentFirstName)&&void 0!==u?u:""," ").concat(null!==(_=null===j||void 0===j?void 0:j.studentMiddleName)&&void 0!==_?_:""," ").concat(null!==(m=null===j||void 0===j?void 0:j.studentLastName)&&void 0!==m?m:""," "),", towards ").concat(null!==(p=null===b||void 0===b?void 0:b.internal_fee_reason)&&void 0!==p?p:"N/A","."),z=s.splitTextToSize(C,r-20);if(z.length>1){let e=113,t=10;s.setFont(void 0,"normal"),s.setFontSize(11),s.setTextColor(18,18,18),s.text(t,e,z,"left"),e=z.length+151}else{let e=113,t=10;s.setFontSize(11),s.setFont(void 0,"normal"),s.setTextColor(18,18,18),s.setFontSize(12),s.text(t,e,z,"left"),e=z.length+151}var R,A,Z,k;(s.setTextColor(0,0,0),s.setFont(void 0,"bold"),s.setFontSize(11),s.text(9,131,"Bank Transaction Details: "),s.setFont(void 0,"normal"),s.text(9,138,"Payment Mode:  ".concat(null===t||void 0===t?void 0:t.fee_payment_mode)),null!==D&&void 0!==D&&D.razorpay_order_id)?s.text(9,144,"Transaction ID: ".concat(null!==(R=null===D||void 0===D?void 0:D.razorpay_order_id)&&void 0!==R?R:"N/A")):(s.text(9,144,"Bank Name: ".concat(null!==(A=null===e||void 0===e?void 0:e.fee_bank_name)&&void 0!==A?A:"N/A")),s.text(9,150,"Bank Holder Name: ".concat(null!==(Z=null===e||void 0===e?void 0:e.finance_bank_account_name)&&void 0!==Z?Z:"N/A")),s.text(9,156,"UTR / Ref No.: ".concat(null!==(k=null===e||void 0===e?void 0:e.fee_utr_reference)&&void 0!==k?k:"N/A")),s.text(9,162,"Date: ".concat(l()(null===t||void 0===t?void 0:t.created_at).format("DD-MMM-YYYY"))),s.text(9,168,"Amount: ".concat(null===t||void 0===t?void 0:t.fee_payment_amount)),s.text(9,174,"Amount in Words: ".concat((a().toWords(t.fee_payment_amount.toString()).match(/[a-zA-Z0-9]+/g)||[]).map((e=>"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)))).join(" ")," only.")));s.setFontSize(9),s.text(40,240,"".concat(Y.staffFirstName," ").concat(null!==(f=Y.staffMiddleName)&&void 0!==f?f:""," ").concat(Y.staffLastName),{align:"center"}),s.setFont(void 0,"bold"),s.setFontSize(10),s.text(40,245,"Finance Manager",{align:"center"}),s.setFont(void 0,"normal"),s.setFontSize(9),s.text(153,240,"".concat(null!==(h=null===w||void 0===w||null===(x=w.displayPersonList)||void 0===x||null===(y=x[0])||void 0===y||null===(g=y.displayUser)||void 0===g?void 0:g.userLegalName)&&void 0!==h?h:"N/A"),{align:"center"}),s.setFont(void 0,"bold"),s.setFontSize(10),s.text(153,245,"".concat(null!==(F=null===w||void 0===w||null===(N=w.displayPersonList)||void 0===N||null===(T=N[0])||void 0===T?void 0:T.displayTitle)&&void 0!==F?F:"N/A"),{align:"center"}),s.setTextColor(0,0,255),s.setFontSize(7),s.text(r-20,243,"Online Automated",null,50),s.text(r-18,244,"Generated fee receipt",null,50),s.text(r-14,246,"Through Qviple",null,50),s.setLineWidth(.2),s.setDrawColor(18,18,18),s.line(0,251,r,251),s.setTextColor(18,18,18),s.setFontSize(8),s.setFont(void 0,"normal"),s.text(r/2,259,"Note : No one except one who is making this certificate should interfere with any details of this invoice, othewise students will be expelled and legal action will be taken.","center"),window.open(s.output("bloburl",{filename:"".concat(null===j||void 0===j?void 0:j.studentFirstName," ").concat(null!==(S=null===j||void 0===j?void 0:j.studentMiddleName)&&void 0!==S?S:""," ").concat(null===j||void 0===j?void 0:j.studentLastName," -Internal Fee Receipt.pdf")}),"_blank")}},99893:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(t,n,o){var i=n.prototype,l=i.format;o.en.formats=e,i.format=function(t){void 0===t&&(t="YYYY-MM-DDTHH:mm:ssZ");var n=this.$locale().formats,o=function(t,n){return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,o,i){var l=i&&i.toUpperCase();return o||n[i]||e[i]||n[l].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))}(t,void 0===n?{}:n);return l.call(this,o)}}}()},76697:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o={settle_card:"TransactionHistory_settle_card__WjSwI",settle_card_container:"TransactionHistory_settle_card_container__EIw4W",settle_card_text:"TransactionHistory_settle_card_text__3j20S",settle_paragraph:"TransactionHistory_settle_paragraph__x3Ovt",sidebarheader:"TransactionHistory_sidebarheader__oEDm9",history_image_container:"TransactionHistory_history_image_container__ZBhq9",text:"TransactionHistory_text__yimnr",rcv:"TransactionHistory_rcv__kuGgZ"}}}]);
//# sourceMappingURL=51768.02b34e75.chunk.js.map