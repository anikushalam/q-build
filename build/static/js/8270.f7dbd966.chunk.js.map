{"version":3,"file":"static/js/8270.f7dbd966.chunk.js","mappings":"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","sources":["optimized/InstituteMember/InstituteFeedback/StudentFeedback/StudentFeedbackChart.jsx"],"sourcesContent":["import {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n} from \"chart.js\";\nimport { Bar, getDatasetAtEvent } from \"react-chartjs-2\";\nimport { useFeedbackSubjectTeacherList } from \"../../../Hooks/ApiHooks/InstituteFeedback/institute-feedback-api\";\nimport { useEffect, useRef, useState } from \"react\";\nimport UserMemberContainerWrapper from \"../../../Ui/UserMember/UserMemberContainerWrapper\";\nimport UserMemberContentWrapper from \"../../../Ui/UserMember/UserMemberContentWrapper\";\nimport BorderBottom from \"../../../Ui/Border/BorderBottom\";\nimport { useTranslation } from \"react-i18next\";\nimport style from \"../../../UserStaffMember/FinanceManager/FinanceManager.module.css\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\nconst StudentFeedbackChart = ({ instituteId, ifid }) => {\n  const { t } = useTranslation();\n  const ref = useRef();\n  const params = useParams();\n  const getQuery = useLocation();\n  const navigate = useNavigate();\n  const labels = [];\n  const [state, setState] = useState({\n    labels,\n    datasets: [\n      {\n        label: \"Feedback %\",\n        data: [],\n        barThickness: 50,\n        backgroundColor: [\n          \"rgba(255, 99, 132, 0.2)\",\n          \"rgba(255, 159, 64, 0.2)\",\n          \"rgba(255, 205, 86, 0.2)\",\n          \"rgba(75, 192, 192, 0.2)\",\n          \"rgba(54, 162, 235, 0.2)\",\n          \"rgba(153, 102, 255, 0.2)\",\n          \"rgba(201, 203, 207, 0.2)\",\n        ],\n        borderColor: [\n          \"rgb(255, 99, 132)\",\n          \"rgb(255, 159, 64)\",\n          \"rgb(255, 205, 86)\",\n          \"rgb(75, 192, 192)\",\n          \"rgb(54, 162, 235)\",\n          \"rgb(153, 102, 255)\",\n          \"rgb(201, 203, 207)\",\n        ],\n        borderWidth: 1,\n      },\n    ],\n  });\n  const { feedbackSubjectTeacherList } = useFeedbackSubjectTeacherList({\n    data: {\n      ifid: ifid,\n      page: 1,\n      limit: 1000,\n      search: \"\",\n    },\n    skip: !ifid,\n  });\n\n  useEffect(() => {\n    if (feedbackSubjectTeacherList?.list?.length > 0) {\n      let labels = [];\n      let obj = {\n        label: \"Feedback %\",\n        data: [],\n        backgroundColor: \"rgba(255, 99, 132, 0.5)\",\n      };\n      for (let st of feedbackSubjectTeacherList?.list) {\n        // if (st?.staff_emp_code) {\n        if (st?.staffROLLNO) {\n          let per = getInPercentage(\n            st?.student_feedback?.[0]?.subject_analytic\n          );\n          labels.push(st?.staffROLLNO);\n          // labels.push(st?.staff_emp_code);\n          obj.data?.push(per);\n        }\n      }\n      setState({\n        labels,\n        datasets: [obj],\n      });\n    }\n  }, [feedbackSubjectTeacherList?.list]);\n\n  const onClick = (event) => {\n    let currect = getDatasetAtEvent(ref?.current, event);\n    if (currect?.length > 0) {\n      navigate(\n        `/q/${params.username}/institute/member/feedback?a=feedback-detail`,\n        {\n          state: getQuery.state,\n        }\n      );\n    }\n  };\n  return (\n    <>\n      <UserMemberContainerWrapper>\n        <UserMemberContentWrapper>\n          <div className={style.fm_header_container}>\n            <h6>{t(\"feedback_analytics\")}</h6>\n          </div>\n        </UserMemberContentWrapper>\n        <BorderBottom />\n        <UserMemberContentWrapper>\n          <Bar ref={ref} data={state} options={options} onClick={onClick} />\n        </UserMemberContentWrapper>\n      </UserMemberContainerWrapper>\n    </>\n  );\n};\n\nexport default StudentFeedbackChart;\n\nconst options = {\n  responsive: true,\n  scales: {\n    x: {\n      grid: {\n        offset: true,\n      },\n    },\n  },\n  // plugins: {\n  //   legend: {\n  //     position: \"top\",\n  //   },\n  //   title: {\n  //     display: true,\n  //     text: \"Chart.js Bar Chart\",\n  //   },\n  // },\n};\n\nconst getInPercentage = (list) => {\n  if (list?.length > 0) {\n    let sum = 0;\n    for (let lt of list) {\n      sum += lt?.feedback_percentage;\n    }\n    // for (let lt of list) {\n    //   sum += lt?.feedback_percentage;\n    // }\n    sum = Math.floor(sum / list?.length);\n    return sum;\n  }\n  return 0;\n};\n"],"names":["ChartJS","register","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","_ref","instituteId","ifid","t","useTranslation","ref","useRef","params","useParams","getQuery","useLocation","navigate","useNavigate","_useState","useState","labels","datasets","label","data","barThickness","backgroundColor","borderColor","borderWidth","_useState2","_slicedToArray","state","setState","feedbackSubjectTeacherList","useFeedbackSubjectTeacherList","page","limit","search","skip","useEffect","_feedbackSubjectTeach","list","length","_step","obj","_iterator","_createForOfIteratorHelper","s","n","done","st","value","staffROLLNO","_st$student_feedback","_st$student_feedback$","_obj$data","per","getInPercentage","student_feedback","subject_analytic","push","err","e","f","_jsx","_Fragment","children","_jsxs","UserMemberContainerWrapper","UserMemberContentWrapper","className","style","fm_header_container","BorderBottom","Bar","options","onClick","event","currect","getDatasetAtEvent","current","concat","username","responsive","scales","x","grid","offset","_step2","sum","_iterator2","lt","feedback_percentage","Math","floor"],"sourceRoot":""}