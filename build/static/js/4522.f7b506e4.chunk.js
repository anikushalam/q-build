"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[4522],{91022:function(e,t,n){var o=n(1413),l=n(29439),s=n(72791),i=n(39230),d=n(38733),a=n(80184);t.Z=function(e){var t=e.selectLabel,n=e.value,r=e.onClick,c=e.selectedValue,u=e.options,v=e.errorShow,m=e.customStyleContainer,h=e.customLabelStyle,_=e.customListStyle,f=e.openAs,p=e.viewAs,x=(0,i.$G)().t,j=(0,s.useState)(!1),Z=(0,l.Z)(j,2),g=Z[0],S=Z[1],N=function(){"REFUND"===f||"BACKLOG"===f||"FINANCE_MANAGER"===p||S((function(e){return!e}))},b=function(e){r(e),N()};return(0,a.jsxs)("div",{className:d.Z.join_form_container,style:(0,o.Z)({},m),children:[(0,a.jsxs)("p",{className:d.Z.join_form_select_paragraph,style:(0,o.Z)({},h),children:[t," ",v&&(0,a.jsxs)("span",{style:{color:"red",marginLeft:"15px"},children:["* ",x("form_require_label")]})]}),(0,a.jsxs)("section",{className:d.Z.join_form_select_custom,onClick:N,children:[n?(0,a.jsx)("p",{className:d.Z.join_form_select_custom_paragraph,children:null!==n&&void 0!==n?n:""}):(0,a.jsx)("p",{className:d.Z.join_form_select_custom_paragraph,children:c}),(0,a.jsx)("img",{className:d.Z.join_form_select_custom_icon,src:"/images/down-icon.svg",alt:"categor icon"})]}),g&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("section",{className:d.Z.join_form_select_custom_list,style:_?(0,o.Z)({},_):(null===u||void 0===u?void 0:u.length)>2?{overflowY:"scroll"}:{backgroundColor:"#ffffff"},children:[(0,a.jsx)("p",{className:d.Z.join_form_select_custom_paragraph_option,onClick:N,children:c}),null===u||void 0===u?void 0:u.map((function(e,t){return(0,a.jsx)("p",{onClick:function(){return b(e)},className:d.Z.join_form_select_custom_paragraph_option,children:e},t)}))]})})]})}},74522:function(e,t,n){n.d(t,{Z:function(){return P}});var o=n(29439),l=n(72791),s=n(33148),i=n(39230),d=n(74067),a=n(74289),r=n(11105),c=n(1413),u=n(24582),v=n(41233),m=n(98094),h=n(36665),_=n(37762),f=n(93433),p=n(69721),x=n(80184),j=function(e){var t,n,o,l,d,a,r,c,u=e.onSelectStudent,v=e.stu,m=e.promoteData,h=(0,i.$G)().t;return(0,x.jsx)("div",{className:null!==m&&void 0!==m&&null!==(t=m.students)&&void 0!==t&&t.includes(null===v||void 0===v?void 0:v._id)?" ".concat(s.Z.promote_student_card," ").concat(s.Z.promote_student_cardActive):s.Z.promote_student_card,onClick:function(){return u(null===v||void 0===v?void 0:v._id)},style:{width:"100%"},children:(0,x.jsxs)("div",{className:s.Z.promote_student_card_text,style:{width:"100%"},children:[(0,x.jsx)("img",{alt:"",src:null!==v&&void 0!==v&&v.studentProfilePhoto?"".concat(p.yI,"/").concat(null===v||void 0===v?void 0:v.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg"}),(0,x.jsxs)("div",{className:s.Z.promote_student_check_container,children:[(0,x.jsxs)("div",{className:s.Z.promote_student_name,children:[(0,x.jsxs)("p",{children:[null===v||void 0===v?void 0:v.studentFirstName," ",null!==v&&void 0!==v&&v.studentMiddleName?null===v||void 0===v?void 0:v.studentMiddleName:" "," ",null===v||void 0===v?void 0:v.studentLastName]}),(0,x.jsxs)("p",{children:[h("gr_number"),null===v||void 0===v?void 0:v.studentGRNO]})]}),(0,x.jsxs)("div",{className:s.Z.promote_student_check,children:[(0,x.jsxs)("div",{className:s.Z.promote_student_name,children:[null!==v&&void 0!==v&&null!==(n=v.fee_structure)&&void 0!==n&&n.applicable_fees?(0,x.jsxs)("p",{children:[h("applicable_fees_only")," ",h("rs"),".",null!==(o=null===v||void 0===v||null===(l=v.fee_structure)||void 0===l?void 0:l.applicable_fees)&&void 0!==o?o:0]}):"",(0,x.jsxs)("p",{children:[h("paid_fees")," ",": ",h("rs"),".",null!==(d=null===v||void 0===v||null===(a=v.remainingFeeList)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.paid_fee)&&void 0!==d?d:0]})]}),(0,x.jsx)("div",{className:s.Z.promote_student_name,children:null!==m&&void 0!==m&&null!==(c=m.students)&&void 0!==c&&c.includes(null===v||void 0===v?void 0:v._id)?(0,x.jsx)("img",{className:s.Z.department_checkbox,src:"/images/checkbox-icon.svg",alt:"icon"}):(0,x.jsx)("img",{className:s.Z.department_checkbox,src:"/images/box-icon.svg",alt:"icon"})})]})]})]})})},Z=n(98734),g=n(15961),S=function(e){var t=e.isWrapper,n=e.onClose,o=e.title,l=e.firstMessage,s=e.spanMessage,i=e.outerSpanMessage,d=e.lastMessage,a=e.buttonLabel,r=e.onHandler,c=e.buttonStyle,u=e.messageStyle;return(0,x.jsx)(x.Fragment,{children:t?(0,x.jsx)(h.Z,{onClose:n,children:(0,x.jsxs)("div",{className:g.Z.admission_modal,children:[(0,x.jsx)("h6",{className:g.Z.admission_modal_heading,children:o}),(0,x.jsx)(m.Z,{customStyle:{width:"100%",margin:"0.7rem 0"}}),(0,x.jsxs)("div",{className:g.Z.admission_class_confirm,style:u,children:[l," ",(0,x.jsx)("span",{style:{fontWeight:"600"},children:s})," ",i,(0,x.jsx)("span",{style:{fontWeight:"600"},children:d})]}),(0,x.jsx)("div",{className:g.Z.confirm_btn,onClick:r,style:c,children:a})]})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{className:g.Z.admission_modal_heading,children:o}),(0,x.jsx)(m.Z,{customStyle:{width:"100%",margin:"0.7rem 0"}}),(0,x.jsxs)("div",{className:g.Z.admission_class_confirm,style:u,children:[l," ",(0,x.jsx)("span",{style:{fontWeight:"600"},children:s})," ",i,(0,x.jsx)("span",{style:{fontWeight:"600"},children:d})]}),(0,x.jsx)("div",{className:g.Z.confirm_btn,onClick:r,style:c,children:a})]})})},N=function(e){var t,n,d,v,h,p,g=e.classId,N=e.promoteData,b=e.setPromoteData,C=e.onClose,y=e.onRefetchParent,I=(0,i.$G)().t,w=(0,l.useState)(!0),P=(0,o.Z)(w,2),T=P[0],E=P[1],R=(0,l.useState)([]),k=(0,o.Z)(R,2),L=k[0],A=k[1],M=(0,l.useState)(!1),F=(0,o.Z)(M,2),D=F[0],O=F[1],U=(0,l.useState)(!1),B=(0,o.Z)(U,2),G=B[0],W=B[1],V=(0,l.useState)(!1),$=(0,o.Z)(V,2),Y=$[0],H=$[1],q=(0,u.Ed)(),z=(0,o.Z)(q,1)[0],J=(0,a._3)({data:{cid:g,valid_app_fee:"Yes"===(null===N||void 0===N?void 0:N.applicable_with_fees)?"Yes":"No"},skip:!g}),K=J.getNotPromoteStudentByPromote,Q=J.getNotPromoteStudentByPromoteRefetch;(0,l.useEffect)((function(){g&&(E(!0),Q())}),[g,Q]),(0,l.useEffect)((function(){var e,t;(null!==K&&void 0!==K&&K.notPromoteStudent||0===(null===K||void 0===K||null===(e=K.notPromoteStudent)||void 0===e?void 0:e.length))&&(A(null!==(t=null===K||void 0===K?void 0:K.notPromoteStudent)&&void 0!==t?t:[]),E(!1))}),[null===K||void 0===K?void 0:K.notPromoteStudent]);var X=function(e){var t;null!==N&&void 0!==N&&null!==(t=N.students)&&void 0!==t&&t.includes(e)?b((function(t){var n;return(0,c.Z)((0,c.Z)({},t),{},{students:null===(n=t.students)||void 0===n?void 0:n.filter((function(t){return t!==e}))})})):b((function(t){return(0,c.Z)((0,c.Z)({},t),{},{students:t.students?[].concat((0,f.Z)(t.students),[e]):[e]})}))};return(0,x.jsx)(x.Fragment,{children:G?(0,x.jsx)(S,{onClose:function(){return W(!1)},title:I("promote_select_student"),firstMessage:"".concat(I("promote")," "),spanMessage:null===N||void 0===N||null===(t=N.students)||void 0===t?void 0:t.length,outerSpanMessage:"".concat(I("students")," , ").concat(I("to")," "),lastMessage:"".concat(null===N||void 0===N||null===(n=N.classId)||void 0===n?void 0:n.classTitle,", ").concat(null===N||void 0===N||null===(d=N.batchId)||void 0===d?void 0:d.batchName,", ").concat(null===N||void 0===N||null===(v=N.departmentId)||void 0===v?void 0:v.dName),buttonLabel:I("confirm"),onHandler:function(){var e,t,n;g&&(W(!1),O((function(e){return!e})),z({cid:g,promote:{applicable_with_fees:null===N||void 0===N?void 0:N.applicable_with_fees,departmentId:null===N||void 0===N||null===(e=N.departmentId)||void 0===e?void 0:e._id,batchId:null===N||void 0===N||null===(t=N.batchId)||void 0===t?void 0:t._id,classId:null===N||void 0===N||null===(n=N.classId)||void 0===n?void 0:n._id,students:null===N||void 0===N?void 0:N.students},flow:"Yes"===(null===N||void 0===N?void 0:N.promot_with_fees)?"WITH_STRUCTURE":"WITH_OUT_STRUCTURE",re_ads:"Yes"===(null===N||void 0===N?void 0:N.re_ads)?"WITH_RE_ADMISSION":"No"}).then((function(){y(),Q(),C(),O((function(e){return!e}))})).catch({}))},messageStyle:{marginTop:"3.7rem"},buttonStyle:{marginTop:"5.7rem"}}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:s.Z.select_header,children:[(0,x.jsxs)("h6",{children:[(null===N||void 0===N||null===(h=N.students)||void 0===h?void 0:h.length)>0?"".concat(null===N||void 0===N||null===(p=N.students)||void 0===p?void 0:p.length," "):"",I("select_student")]}),(0,x.jsxs)("div",{children:[Y?(0,x.jsx)("button",{className:s.Z.select_all_btn,title:"Remove All Student",onClick:function(){b((function(e){return(0,c.Z)((0,c.Z)({},e),{},{students:[]})})),H(!1)},style:{marginRight:"0.7rem"},children:I("remove_all")}):(0,x.jsx)("button",{className:s.Z.select_all_btn,title:"Select All Student",onClick:function(){var e,t=[],n=(0,_.Z)(L);try{for(n.s();!(e=n.n()).done;){var o=e.value;t.push(null===o||void 0===o?void 0:o._id)}}catch(l){n.e(l)}finally{n.f()}b((function(e){return(0,c.Z)((0,c.Z)({},e),{},{students:t})})),H(!0)},style:{marginRight:"0.7rem"},children:I("select_all")}),(0,x.jsx)("button",{className:s.Z.promote_all_btn,title:"Promote Selected Student",onClick:function(){var e;return(null===N||void 0===N||null===(e=N.students)||void 0===e?void 0:e.length)>0?W(!0):null},children:I("promote")})]})]}),(0,x.jsx)(m.Z,{customStyle:{width:"100%",marginTop:"0.5rem"}}),(0,x.jsx)("div",{className:s.Z.with_search,style:{marginTop:"1rem",width:"100%",border:"0.4px solid rgba(0, 0, 0, 0.15)",borderRadius:"6px",marginBottom:"0.3rem"},children:(0,x.jsxs)("div",{className:s.Z.search_container_input,style:{width:"100%"},children:[(0,x.jsx)("img",{className:s.Z.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),(0,x.jsx)("input",{type:"text",placeholder:"Search Student...",style:{width:"100%"},onChange:function(e){if(e.target.value){var t,n=null===K||void 0===K||null===(t=K.notPromoteStudent)||void 0===t?void 0:t.filter((function(t){var n,o,l;return null!==(n="".concat(null===t||void 0===t?void 0:t.studentFirstName," ").concat(null!==t&&void 0!==t&&t.studentMiddleName?(null===t||void 0===t?void 0:t.studentMiddleName)+" ":"").concat(null===t||void 0===t?void 0:t.studentLastName))&&void 0!==n&&null!==(o=n.toLowerCase())&&void 0!==o&&o.includes(null===(l=e.target.value)||void 0===l?void 0:l.toLowerCase())?t:null}));A(n)}else A(null===K||void 0===K?void 0:K.notPromoteStudent)}})]})}),null===L||void 0===L?void 0:L.map((function(e,t){return(0,x.jsx)(j,{promoteData:N,stu:e,onSelectStudent:X},t)})),T&&(0,x.jsx)(r.Z,{}),D&&(0,x.jsx)(Z.Z,{})]})})},b=n(91022),C=function(e){var t,n,d,a,r,_,f,p=e.onClose,j=e.classId,Z=e.onRefetchParent,g=(0,i.$G)().t,S=(0,l.useState)("INITIAL_STEP"),C=(0,o.Z)(S,2),y=C[0],I=C[1],w=(0,l.useState)({promot_with_fees:"",applicable_with_fees:"",departmentId:"",batchId:"",classId:"",students:[],re_ads:""}),P=(0,o.Z)(w,2),T=P[0],E=P[1],R=(0,l.useState)(""),k=(0,o.Z)(R,2),L=k[0],A=k[1],M=(0,u.PS)({data:{cid:j,page:1,limit:30},skip:!j}),F=M.classAllDepartmentWithBatch,D=M.classAllDepartmentWithBatchRefetch,O=(0,u.j_)({data:{bid:null===(t=T.batchId)||void 0===t?void 0:t._id,page:1,limit:30},skip:!(null!==(n=T.batchId)&&void 0!==n&&n._id)}),U=O.classAllBatchWithClass,B=O.classAllBatchWithClassRefetch;l.useEffect((function(){j&&D()}),[j,D]),l.useEffect((function(){var e;null!==(e=T.batchId)&&void 0!==e&&e._id&&B()}),[null===(d=T.batchId)||void 0===d?void 0:d._id,B]);return(0,x.jsx)(h.Z,{onClose:"INITIAL_STEP"===y?p:function(){return I("INITIAL_STEP")},children:(0,x.jsxs)("div",{className:s.Z.promote_container,children:["INITIAL_STEP"===y&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{style:{textAlign:"center"},children:g("promote_students")}),(0,x.jsx)(m.Z,{customStyle:{width:"100%"}}),(0,x.jsx)(b.Z,{selectLabel:g("promote_with_fees_structure"),selectedValue:g("select_yes_or_no"),options:["Yes","No"],value:T.promot_with_fees,errorShow:L.promot_with_fees,onClick:function(e){E((function(t){return(0,c.Z)((0,c.Z)({},t),{},{promot_with_fees:e})}))}}),(0,x.jsx)(v.Z,{selectLabel:g("select_department"),selectedValue:g("select_department"),options:null!==(a=null===F||void 0===F?void 0:F.departmets)&&void 0!==a?a:[],onClick:function(e){E((function(t){return(0,c.Z)((0,c.Z)({},t),{},{departmentId:e})}))},openAs:"PROMOTE",errorShow:L.departmentId}),(0,x.jsx)(v.Z,{selectLabel:g("select_batch"),selectedValue:g("select_batch"),options:null!==(r=null===(_=T.departmentId)||void 0===_?void 0:_.batches)&&void 0!==r?r:[],onClick:function(e){E((function(t){return(0,c.Z)((0,c.Z)({},t),{},{batchId:e})}))},openAs:"PROMOTE",errorShow:L.batchId}),(0,x.jsx)(v.Z,{selectLabel:g("select_class"),selectedValue:g("select_class"),options:null!==(f=null===U||void 0===U?void 0:U.classes)&&void 0!==f?f:[],onClick:function(e){E((function(t){return(0,c.Z)((0,c.Z)({},t),{},{classId:e})}))},openAs:"PROMOTE",errorShow:L.classId}),(0,x.jsx)(b.Z,{selectLabel:g("promote_applicable_fee"),selectedValue:g("select_yes_or_no"),options:["Yes","No"],value:T.applicable_with_fees,errorShow:L.applicable_with_fees,onClick:function(e){E((function(t){return(0,c.Z)((0,c.Z)({},t),{},{applicable_with_fees:e})}))}}),(0,x.jsx)(b.Z,{selectLabel:g("promote_with_re_admission"),selectedValue:g("select_yes_or_no"),options:["Yes","No"],value:T.re_ads,onClick:function(e){E((function(t){return(0,c.Z)((0,c.Z)({},t),{},{re_ads:e})}))}}),(0,x.jsxs)("button",{className:s.Z.select_application_btn,onClick:function(){var e=function(e){var t={};for(var n in e)"students"===n||e[n]||(t[n]="".concat(n," is required!"));return t}(T),t=!1;for(var n in e){t=!0;break}t?A(e):I("SELECT_STUDENT")},style:{width:"100%"},title:"Select student",children:[(0,x.jsx)("div",{children:g("select_student")}),(0,x.jsx)("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]})]}),"SELECT_STUDENT"===y&&(0,x.jsx)(N,{classId:j,setPromoteData:E,promoteData:T,onClose:p,onRefetchParent:Z})]})})},y=function(e){var t,n,d,u=e.classId,v=e.promoteData,h=e.setPromoteData,p=e.onClose,g=e.onRefetchParent,N=(0,i.$G)().t,b=(0,l.useState)(!0),C=(0,o.Z)(b,2),y=C[0],I=C[1],w=(0,l.useState)([]),P=(0,o.Z)(w,2),T=P[0],E=P[1],R=(0,l.useState)(!1),k=(0,o.Z)(R,2),L=k[0],A=k[1],M=(0,l.useState)(!1),F=(0,o.Z)(M,2),D=F[0],O=F[1],U=(0,l.useState)(!1),B=(0,o.Z)(U,2),G=B[0],W=B[1],V=(0,a.V_)(),$=(0,o.Z)(V,1)[0],Y=(0,a.Rt)({cid:u,skip:!u}),H=Y.getPromoteStudentByPromote,q=Y.getPromoteStudentByPromoteRefetch;(0,l.useEffect)((function(){u&&(I(!0),q())}),[u,q]),(0,l.useEffect)((function(){var e,t;(null!==H&&void 0!==H&&H.promoteStudent||0===(null===H||void 0===H||null===(e=H.promoteStudent)||void 0===e?void 0:e.length))&&(E(null!==(t=null===H||void 0===H?void 0:H.promoteStudent)&&void 0!==t?t:[]),I(!1))}),[null===H||void 0===H?void 0:H.promoteStudent]);var z=function(e){var t;null!==v&&void 0!==v&&null!==(t=v.arr)&&void 0!==t&&t.includes(e)?h((function(t){var n;return(0,c.Z)((0,c.Z)({},t),{},{arr:null===(n=t.arr)||void 0===n?void 0:n.filter((function(t){return t!==e}))})})):h((function(t){return(0,c.Z)((0,c.Z)({},t),{},{arr:t.arr?[].concat((0,f.Z)(t.arr),[e]):[e]})}))};return(0,x.jsx)(x.Fragment,{children:D?(0,x.jsx)(S,{onClose:function(){return O(!1)},title:N("undo_select_student"),firstMessage:"".concat(N("undo")," "),spanMessage:null===v||void 0===v||null===(t=v.arr)||void 0===t?void 0:t.length,outerSpanMessage:"".concat(N("students")," , ").concat(N("to")," "),lastMessage:"".concat(N("previous_class")),buttonLabel:N("confirm"),onHandler:function(){O(!1),A((function(e){return!e})),$({cid:u,flow:"PARTICULAR_STUDENT",undoPromote:{arr:null===v||void 0===v?void 0:v.arr}}).then((function(){g(),p(),A((function(e){return!e}))})).catch({})},messageStyle:{marginTop:"3.7rem"},buttonStyle:{marginTop:"5.7rem"}}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:s.Z.select_header,children:[(0,x.jsxs)("h6",{children:[(null===v||void 0===v||null===(n=v.arr)||void 0===n?void 0:n.length)>0?"".concat(null===v||void 0===v||null===(d=v.arr)||void 0===d?void 0:d.length," "):"",N("select_student")]}),(0,x.jsxs)("div",{children:[G?(0,x.jsx)("button",{className:s.Z.select_all_btn,title:"Remove All Student",onClick:function(){h((function(e){return(0,c.Z)((0,c.Z)({},e),{},{arr:[]})})),W(!1)},style:{marginRight:"0.7rem"},children:N("remove_all")}):(0,x.jsx)("button",{className:s.Z.select_all_btn,title:"Select All Student",onClick:function(){var e,t=[],n=(0,_.Z)(T);try{for(n.s();!(e=n.n()).done;){var o=e.value;t.push(null===o||void 0===o?void 0:o._id)}}catch(l){n.e(l)}finally{n.f()}h((function(e){return(0,c.Z)((0,c.Z)({},e),{},{arr:t})})),W(!0)},style:{marginRight:"0.7rem"},children:N("select_all")}),(0,x.jsx)("button",{className:s.Z.promote_all_btn,title:"Undo Selected Student",onClick:function(){var e;return(null===v||void 0===v||null===(e=v.arr)||void 0===e?void 0:e.length)>0?O(!0):null},children:N("undo")})]})]}),(0,x.jsx)(m.Z,{customStyle:{width:"100%",marginTop:"0.5rem"}}),(0,x.jsx)("div",{className:s.Z.with_search,style:{marginTop:"1rem",width:"100%",border:"0.4px solid rgba(0, 0, 0, 0.15)",borderRadius:"6px",marginBottom:"0.3rem"},children:(0,x.jsxs)("div",{className:s.Z.search_container_input,style:{width:"100%"},children:[(0,x.jsx)("img",{className:s.Z.searchIcon,alt:"search icon",src:"/images/search-dash-icon.svg"}),(0,x.jsx)("input",{type:"text",placeholder:"Search Student...",style:{width:"100%"},onChange:function(e){if(e.target.value){var t,n=null===H||void 0===H||null===(t=H.promoteStudent)||void 0===t?void 0:t.filter((function(t){var n,o,l;return null!==(n="".concat(null===t||void 0===t?void 0:t.studentFirstName," ").concat(null!==t&&void 0!==t&&t.studentMiddleName?(null===t||void 0===t?void 0:t.studentMiddleName)+" ":"").concat(null===t||void 0===t?void 0:t.studentLastName))&&void 0!==n&&null!==(o=n.toLowerCase())&&void 0!==o&&o.includes(null===(l=e.target.value)||void 0===l?void 0:l.toLowerCase())?t:null}));E(n)}else E(null===H||void 0===H?void 0:H.promoteStudent)}})]})}),null===T||void 0===T?void 0:T.map((function(e,t){return(0,x.jsx)(j,{promoteData:{students:null===v||void 0===v?void 0:v.arr},stu:e,onSelectStudent:z},t)})),y&&(0,x.jsx)(r.Z,{}),L&&(0,x.jsx)(Z.Z,{})]})})},I=function(e){var t=e.onClose,n=e.classId,d=e.onRefetchParent,r=(0,i.$G)().t,u=(0,l.useState)("INITIAL_STEP"),v=(0,o.Z)(u,2),_=v[0],f=v[1],p=(0,l.useState)({flow:"",arr:[]}),j=(0,o.Z)(p,2),g=j[0],S=j[1],N=(0,l.useState)(""),C=(0,o.Z)(N,2),I=C[0],w=C[1],P=(0,l.useState)(!1),T=(0,o.Z)(P,2),E=T[0],R=T[1],k=(0,a.V_)(),L=(0,o.Z)(k,1)[0];return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(h.Z,{onClose:"INITIAL_STEP"===_?t:function(){return f("INITIAL_STEP")},children:(0,x.jsxs)("div",{className:s.Z.promote_container,children:["INITIAL_STEP"===_&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{style:{textAlign:"center"},children:r("promote_students")}),(0,x.jsx)(m.Z,{customStyle:{width:"100%"}}),(0,x.jsx)(b.Z,{selectLabel:r("undo_promote_student"),selectedValue:r("select_full_or_particular"),options:["Full Class","Particular Student"],value:g.flow,errorShow:I.flow,onClick:function(e){S((function(t){return(0,c.Z)((0,c.Z)({},t),{},{flow:e})}))}}),(0,x.jsx)("button",{className:s.Z.select_application_btn,onClick:function(){var e=function(e){var t={};for(var n in e)"students"===n||e[n]||(t[n]="".concat(n," is required!"));return t}(g),o=!1;for(var l in e){o=!0;break}o?w(e):"Full Class"===g.flow?(R((function(e){return!e})),L({cid:n,flow:"FULL_CLASS",undoPromote:{arr:[]}}).then((function(){d(),t(),R((function(e){return!e}))})).catch({})):"Particular Student"===g.flow&&f("SELECT_STUDENT")},style:{width:"100%",justifyContent:"center",marginTop:"4rem"},children:(0,x.jsx)("div",{children:r("Particular Student"===g.flow?"next":"confirm")})})]}),"SELECT_STUDENT"===_&&(0,x.jsx)(y,{classId:n,setPromoteData:S,promoteData:g,onClose:t,onRefetchParent:d}),E&&(0,x.jsx)(Z.Z,{})]})})})},w=function(e){var t=e.cid,n=e.onRefetch,d=(0,i.$G)().t,a=(0,l.useState)(!1),r=(0,o.Z)(a,2),c=r[0],u=r[1];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("button",{className:s.Z.select_application_btn,onClick:function(e){e.stopPropagation(),u((function(e){return!e}))},title:"Undo Promote Studens",style:{width:"25%"},children:[(0,x.jsx)("div",{children:d("undo_student")}),(0,x.jsx)("img",{src:"/images/member_tab/admission/admission-undo-icon.svg",alt:"undo icon",style:{cursor:"pointer",width:"30px"}})]}),c&&(0,x.jsx)(I,{onClose:function(){return u(!1)},classId:t,onRefetchParent:n})]})},P=function(e){var t,n,c,u,v,m,h,_=e.classId,f=(0,i.$G)().t,p=(0,l.useState)(!0),j=(0,o.Z)(p,2),Z=j[0],g=j[1],S=(0,l.useState)(!1),N=(0,o.Z)(S,2),b=N[0],y=N[1],I=(0,a.Rt)({cid:_,skip:!_}),P=I.getPromoteStudentByPromote,T=I.getPromoteStudentByPromoteRefetch;(0,l.useEffect)((function(){_&&(g(!0),T())}),[_,T]),(0,l.useEffect)((function(){var e;(null!==P&&void 0!==P&&P.promoteStudent||0===(null===P||void 0===P||null===(e=P.promoteStudent)||void 0===e?void 0:e.length))&&g(!1)}),[null===P||void 0===P?void 0:P.promoteStudent]);var E=function(){y((function(e){return!e}))};return(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:s.Z.promote_undo_container,children:[(0,x.jsxs)("button",{className:s.Z.select_application_btn,onClick:E,children:[(0,x.jsx)("div",{children:f("promote_student")}),(0,x.jsx)("img",{src:"/images/forward-right-icon.svg",alt:"next step"})]}),(0,x.jsx)(w,{cid:_,onRefetch:T})]}),(0,x.jsxs)("h6",{className:s.Z.total_student_count,children:[f("total_student")," ",null!==(t=null===P||void 0===P||null===(n=P.count)||void 0===n?void 0:n.totalCount)&&void 0!==t?t:0]}),(0,x.jsxs)("div",{className:s.Z.total_other_count_container,children:[(0,x.jsxs)("p",{children:[f("boys_promote"),null!==(c=null===P||void 0===P||null===(u=P.count)||void 0===u?void 0:u.boyCount)&&void 0!==c?c:0]}),(0,x.jsxs)("p",{children:[f("girl_promote"),null!==(v=null===P||void 0===P||null===(m=P.count)||void 0===m?void 0:m.girlCount)&&void 0!==v?v:0]})]}),null===P||void 0===P||null===(h=P.promoteStudent)||void 0===h?void 0:h.map((function(e){return(0,x.jsx)(d.Z,{stu:e,viewAs:"PROMOTE"},null===e||void 0===e?void 0:e._id)})),Z&&(0,x.jsx)(r.Z,{}),b&&(0,x.jsx)(C,{classId:_,onClose:E,onRefetchParent:T})]})}},74067:function(e,t,n){n(72791);var o=n(33148),l=n(39230),s=n(69721),i=n(16871),d=n(43504),a=n(80184);t.Z=function(e){var t,n,r,c,u,v,m,h=e.stu,_=e.viewAs,f=(0,l.$G)().t,p=(0,i.UO)();return(0,a.jsx)(d.rU,{to:"/q/".concat(p.username,"/student/profile"),state:{sid:null===h||void 0===h?void 0:h._id,viewAs:"SUBJECT_TEACHER"},children:(0,a.jsxs)("div",{className:o.Z.student_container,children:[(0,a.jsx)("img",{src:null!==h&&void 0!==h&&h.studentProfilePhoto?"".concat(s.yI,"/").concat(null===h||void 0===h?void 0:h.studentProfilePhoto):"/images/member_tab/class/default_avatar.svg",loading:"lazy",alt:"avatar icon"}),(0,a.jsxs)("div",{className:o.Z.student_info_container,children:[(0,a.jsxs)("div",{className:o.Z.student_info_text,children:[(0,a.jsxs)("h6",{children:[null===h||void 0===h?void 0:h.studentFirstName," ",null!==h&&void 0!==h&&h.studentMiddleName?null===h||void 0===h?void 0:h.studentMiddleName:" "," ",null===h||void 0===h?void 0:h.studentLastName]}),"PROMOTE"===_?"":(0,a.jsxs)("p",{children:[null!==(t=null===h||void 0===h?void 0:h.studentGender)&&void 0!==t?t:""," "]})]}),(0,a.jsx)("div",{className:o.Z.student_info_text,children:"PROMOTE"===_?(0,a.jsxs)("p",{children:[f("classes"),": ","".concat(null!==(n=null===h||void 0===h||null===(r=h.studentClass)||void 0===r?void 0:r.className)&&void 0!==n?n:""," - ").concat(null!==(c=null===h||void 0===h||null===(u=h.studentClass)||void 0===u?void 0:u.classTitle)&&void 0!==c?c:"")]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:[f("roll_number")," ",null!==(v=null===h||void 0===h?void 0:h.studentROLLNO)&&void 0!==v?v:""]}),(0,a.jsxs)("p",{children:[f("gr_number"),null!==(m=null===h||void 0===h?void 0:h.studentGRNO)&&void 0!==m?m:""]})]})})]})]})})}}}]);
//# sourceMappingURL=4522.f7b506e4.chunk.js.map