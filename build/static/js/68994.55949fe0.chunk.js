"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[68994],{68994:(e,t,l)=>{l.d(t,{Z:()=>R});var i=l(6758),n=l(72791),o=l(23441),d=l(56959),s=l(91427),a=l(39230),r=l(76697),c=l(16871),u=l(43504),v=l(97892),_=l.n(v),m=l(82824),h=l(1095),p=l(98684),f=l(89064),y=l(99183),x=l(16925),j=l(38857),g=l(21348),N=l(90904),Z=l(61055),w=l(93638),b=l(80184);const C=e=>{let{onClose:t,frid:l,onRefetch:o,ofid:d}=e;const{t:s}=(0,a.$G)(),[r,c]=(0,n.useState)(!1),[u,v]=(0,n.useState)(""),[_,m]=(0,n.useState)({query:""}),[h,C]=(0,n.useState)(!1),[T]=(0,i.NQ)(),[q]=(0,i.dM)(),S=()=>{"Confirm"===_.query&&l&&d&&(C(!1),c((e=>!e)),q({fid:l,ofid:d}).then((()=>{o(),c((e=>!e)),t()})).catch({}))};return(0,b.jsx)(b.Fragment,{children:h?(0,b.jsx)(j.Z,{onClose:()=>C(!1),children:(0,b.jsxs)("div",{className:x.Z.modal_container,children:[(0,b.jsx)(g.default,{children:(0,b.jsxs)("div",{className:x.Z.modal_container_outer_header,children:[(0,b.jsx)("div",{className:x.Z.modal_container_header,children:(0,b.jsx)("h6",{children:s("are_your_sure_to_delete_fee_receipt")})}),(0,b.jsx)("img",{src:"".concat(p.J7,"/close.svg"),alt:"close icon",onClick:()=>C(!1)})]})}),(0,b.jsx)(N.Z,{}),(0,b.jsxs)(g.default,{customStyle:{paddingTop:"0"},children:[(0,b.jsx)(Z.Z,{label:s("type_confirm_to_continue"),placeholder:s("type_confirm_to_continue"),name:"query",value:_.query,type:"text",onChange:e=>{m((t=>({...t,[e.target.name]:e.target.value})))},errorShow:u.query}),(0,b.jsx)(w.Z,{label:"confirm",onAction:()=>{let e=(0,y.l)(_);(0,y.x)(e)?d?S():"Confirm"===_.query&&l&&(C(!1),c((e=>!e)),T({frid:l}).then((()=>{o(),c((e=>!e)),t()})).catch({})):v(e)}})]})]})}):(0,b.jsx)(f.Z,{onClose:t,disabled:r,customStyle:{width:"18rem"},children:(0,b.jsx)("h6",{onClick:()=>C(!0),children:s("delete")})})})},T=e=>{var t,l,i,o,d,s,v,f,y,x,j,g,N,Z,w,T,q,S,k,R,D,H,I,A,F,L,E,G,J,M,O,P,Y,B,K,U,W,X;let{history:$,onRefetch:Q}=e;const{t:V}=(0,a.$G)(),z=(0,c.UO)(),ee=(0,c.TH)(),[te,le]=(0,n.useState)("");return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:r.Z.sidebarheader,style:{gap:"1%"},title:"Income"===(null===$||void 0===$?void 0:$.payment_module_type)?"":"View Receipt",children:[(0,b.jsxs)("div",{className:r.Z.history_image_container,style:{width:"50%"},children:[null!==$&&void 0!==$&&null!==(t=$.payment_student)&&void 0!==t&&t.studentProfilePhoto?(0,b.jsx)(u.rU,{to:"/q/".concat(z.username,"/student/profile"),state:{...ee.state,sid:null===$||void 0===$||null===(l=$.payment_student)||void 0===l?void 0:l._id},children:(0,b.jsx)("img",{src:"".concat(h.yI,"/").concat(null===$||void 0===$||null===(i=$.payment_student)||void 0===i?void 0:i.studentProfilePhoto),alt:"qr code",style:{width:"60px",height:"60px",borderRadius:"12px"}})}):(0,b.jsx)("img",{src:"".concat(p.p3,"/feed-user-avatar.svg"),alt:"qr code",style:{width:"60px",height:"60px",borderRadius:"12px"}}),null!==$&&void 0!==$&&null!==(o=$.fee_receipt)&&void 0!==o&&o.student_name?(0,b.jsxs)("div",{className:r.Z.text,children:[(0,b.jsx)("p",{className:r.Z.rcv,children:V("recived_from")}),(0,b.jsx)("h6",{children:null!==(d=null===$||void 0===$||null===(s=$.fee_receipt)||void 0===s?void 0:s.student_name)&&void 0!==d?d:""})]}):(0,b.jsxs)("div",{className:r.Z.text,children:[(0,b.jsx)("p",{className:r.Z.rcv,children:V("recived_from")}),(0,b.jsx)("h6",{children:null!==$&&void 0!==$&&$.payment_student?"".concat(null!==(v=null===$||void 0===$||null===(f=$.payment_student)||void 0===f?void 0:f.studentFirstName)&&void 0!==v?v:""," ").concat(null!==(y=null===$||void 0===$||null===(x=$.payment_student)||void 0===x?void 0:x.studentMiddleName)&&void 0!==y?y:""," ").concat(null!==(j=null===$||void 0===$||null===(g=$.payment_student)||void 0===g?void 0:g.studentLastName)&&void 0!==j?j:""):null!==(N=null===$||void 0===$||null===(Z=$.payment_by_end_user_id)||void 0===Z?void 0:Z.userLegalName)&&void 0!==N?N:null===$||void 0===$?void 0:$.payment_by_end_user_id_name}),(0,b.jsxs)("p",{className:r.Z.rcv,children:[V("gr_number")," ",null!==(w=null===$||void 0===$||null===(T=$.payment_student)||void 0===T?void 0:T.studentGRNO)&&void 0!==w?w:""]}),(0,b.jsx)("p",{className:r.Z.rcv,children:null!==(q=null===$||void 0===$||null===(S=$.payment_student)||void 0===S||null===(k=S.fee_structure)||void 0===k?void 0:k.unique_structure_name)&&void 0!==q?q:""})]})]}),(0,b.jsxs)("div",{className:r.Z.text,style:{width:"27%"},children:[(0,b.jsx)("p",{className:r.Z.rcv,style:{width:"100%"},children:V("transaction_id")}),(0,b.jsx)("h6",{style:{width:"100%",wordWrap:"break-word"},children:null!==$&&void 0!==$&&null!==(R=$.paytm_query)&&void 0!==R&&null!==(D=R[0])&&void 0!==D&&D.BANKTXNID?null===$||void 0===$||null===(H=$.paytm_query)||void 0===H||null===(I=H[0])||void 0===I?void 0:I.BANKTXNID:null!==$&&void 0!==$&&null!==(A=$.fee_receipt)&&void 0!==A&&A.fee_utr_reference?null===$||void 0===$||null===(F=$.fee_receipt)||void 0===F?void 0:F.fee_utr_reference:"N/A"}),(0,b.jsxs)("p",{className:r.Z.rcv,style:{width:"100%"},children:[_()(null===$||void 0===$?void 0:$.created_at).format("DD MMM YYYY"),", ",(0,m.J)(null===$||void 0===$?void 0:$.created_at,"LT")]})]}),(0,b.jsxs)("div",{className:r.Z.text,style:{width:"20%"},children:[(0,b.jsxs)("p",{className:r.Z.rcv,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[V("invoice_no")," ",null!==(L=null!==(E=null===$||void 0===$||null===(G=$.fee_receipt)||void 0===G?void 0:G.invoice_count)&&void 0!==E?E:null===$||void 0===$?void 0:$.payment_invoice_number)&&void 0!==L?L:"N/A",null!==$&&void 0!==$&&null!==(J=$.fee_receipt)&&void 0!==J&&J.receipt_file?(0,b.jsx)("a",{href:"".concat(h.q2,"/").concat(null===$||void 0===$||null===(M=$.fee_receipt)||void 0===M?void 0:M.receipt_file),target:"_blank",rel:"noopener noreferrer",children:(0,b.jsx)("img",{src:"".concat(p.J7,"/receipt.svg"),alt:"receipt icon",title:"Download Fees Receipt"})}):(0,b.jsx)("img",{src:"".concat(p.J7,"/receipt.svg"),alt:"receipt icon",title:"Download Fees Receipt"})]}),(0,b.jsxs)("h6",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[V("rs_only")," ",null===$||void 0===$?void 0:$.payment_amount,(0,b.jsx)("img",{src:"".concat(p.J7,"/menu.svg"),alt:"receipt icon",title:"Download Fees Receipt",onClick:e=>{e.stopPropagation(),le(1)}})]}),(0,b.jsx)("p",{className:r.Z.rcv,style:{width:"100%"},children:"offline"===(null===(O=$.payment_mode)||void 0===O?void 0:O.toLowerCase())?null!==$&&void 0!==$&&null!==(P=$.fee_receipt)&&void 0!==P&&P.fee_payment_mode?"".concat(null===$||void 0===$||null===(Y=$.fee_receipt)||void 0===Y?void 0:Y.fee_payment_mode):"Offline - No Receipt":"online"===(null===(B=$.payment_mode)||void 0===B?void 0:B.toLowerCase())?null!==$&&void 0!==$&&null!==(K=$.fee_receipt)&&void 0!==K&&K.fee_payment_mode?"".concat(null===$||void 0===$||null===(U=$.fee_receipt)||void 0===U?void 0:U.fee_payment_mode):"Online - No Receipt":null===$||void 0===$?void 0:$.payment_mode})]})]}),1===te?(0,b.jsx)(C,{onClose:()=>le(""),frid:null===$||void 0===$||null===(W=$.fee_receipt)||void 0===W?void 0:W._id,onRefetch:Q,ofid:null===$||void 0===$||null===(X=$.fee_receipt)||void 0===X?void 0:X.other_fees}):null]})};var q=l(1669),S=l(55336),k=l(2651);const R=e=>{var t,l,r;let{instituteId:c}=e;const{t:u}=(0,a.$G)(),[v,_]=(0,n.useState)(""),[m,h]=(0,n.useState)(""),[f,y]=(0,n.useState)(1),[x,j]=(0,n.useState)(!0),[g,N]=(0,o.YD)({skip:v}),{financeAllTransaction:Z,financeAllTransactionLoading:w,financeAllTransactionRefetch:C}=(0,i.XN)({data:{uid:c,page:f,limit:10,search:v,filter:""},skip:!c});(0,n.useEffect)((()=>{N&&x&&y((e=>e+1))}),[N,x]),(0,n.useEffect)((()=>{var e;if(null!==Z&&void 0!==Z&&null!==(e=Z.list)&&void 0!==e&&e.length){var t;let e=(0,s.f)(null===Z||void 0===Z||null===(t=Z.list)||void 0===t?void 0:t.length);j((()=>e))}}),[null===Z||void 0===Z?void 0:Z.list]);const R=()=>{y((()=>1)),C()};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:d.Z.fm_search_full,children:(0,b.jsx)("section",{className:d.Z.fm_search_full_container,children:(0,b.jsxs)("div",{className:d.Z.fm_search_full_container_inner,children:[(0,b.jsx)("img",{className:d.Z.fm_search_full_icon,alt:"search icon",src:"".concat(p.dB,"/navbar-search.svg")}),(0,b.jsx)("input",{type:"text",placeholder:u("search"),onChange:e=>{var t;!w&&(null===Z||void 0===Z||null===(t=Z.list)||void 0===t?void 0:t.length)>=0&&h(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&(y((()=>1)),_(m))},value:m})]})})}),null===Z||void 0===Z||null===(t=Z.list)||void 0===t?void 0:t.map(((e,t)=>{var l;return(null===Z||void 0===Z||null===(l=Z.list)||void 0===l?void 0:l.length)===t+1?(0,b.jsx)("div",{ref:g,children:(0,b.jsx)(T,{history:e,onRefetch:R})},null===e||void 0===e?void 0:e._id):(0,b.jsx)(T,{history:e,onRefetch:R},null===e||void 0===e?void 0:e._id)})),w?v?(0,b.jsx)(S.default,{}):(0,b.jsx)(b.Fragment,{children:1===f?(0,b.jsx)(S.default,{}):(0,b.jsx)(q.Z,{})}):v?0===(null===Z||void 0===Z||null===(l=Z.list)||void 0===l?void 0:l.length)&&(0,b.jsx)(k.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No receipts found related this search."}):0===(null===Z||void 0===Z||null===(r=Z.list)||void 0===r?void 0:r.length)&&(0,b.jsx)(k.Z,{customStyleContainer:{marginTop:"1.5rem"},title:"No receipts added."})]})}},76697:(e,t,l)=>{l.d(t,{Z:()=>i});const i={settle_card:"TransactionHistory_settle_card__WjSwI",settle_card_container:"TransactionHistory_settle_card_container__EIw4W",settle_card_text:"TransactionHistory_settle_card_text__3j20S",settle_paragraph:"TransactionHistory_settle_paragraph__x3Ovt",sidebarheader:"TransactionHistory_sidebarheader__oEDm9",history_image_container:"TransactionHistory_history_image_container__ZBhq9",text:"TransactionHistory_text__yimnr",rcv:"TransactionHistory_rcv__kuGgZ"}}}]);
//# sourceMappingURL=68994.55949fe0.chunk.js.map