"use strict";(self.webpackChunkmithkal_qviple=self.webpackChunkmithkal_qviple||[]).push([[1580,35202],{93638:(e,t,l)=>{l.d(t,{Z:()=>i});var s=l(39230),a=l(80476),n=l(80184);const i=e=>{let{label:t,count:l,onAction:i,customStyle:c,isTranslate:o}=e;const{t:d}=(0,s.$G)();return o?(0,n.jsxs)("div",{className:a.Z.create_btn_container,onClick:i,style:c,children:[l>0?(0,n.jsxs)("span",{children:[l," "]}):null,t]}):(0,n.jsxs)("div",{className:a.Z.create_btn_container,onClick:i,style:c,children:[l>0?(0,n.jsxs)("span",{children:[l," "]}):null,d(t)]})}},20471:(e,t,l)=>{l.r(t),l.d(t,{default:()=>S});var s=l(72791),a=l(56959),n=l(23441),i=l(91427),c=l(57588),o=l(63687),d=l(21348),r=l(90904),v=l(55336),u=l(1669),h=l(2651),f=l(36132),_=l(39230),m=l(98684),x=l(97892),j=l.n(x),p=l(82824),b=l(1095),g=l(45445),Z=l(55050),N=l(93638),k=l(80184);const y=e=>{var t,l,a,n,i,c,o,d;let{leave:r,onRefetch:u}=e;const{t:h}=(0,_.$G)(),[x]=(0,f.Sr)(),[y,S]=(0,s.useState)(!1),[L,w]=(0,s.useState)(!1),C=e=>{null!==r&&void 0!==r&&r._id&&(S((e=>!e)),x({lid:null===r||void 0===r?void 0:r._id,requestLeave:{status:e}}).then((()=>{u(),S((e=>!e))})).catch({}))},B=()=>{w((e=>!e))};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:Z.Z.lmsr_card,children:[(0,k.jsxs)("div",{className:Z.Z.lmsrc_card,children:[(0,k.jsxs)("div",{className:Z.Z.lmsrc_card_inner,children:[(0,k.jsx)("img",{src:null!==r&&void 0!==r&&null!==(t=r.staff)&&void 0!==t&&t.staffProfilePhoto?"".concat(b.yI,"/").concat(null===r||void 0===r||null===(l=r.staff)||void 0===l?void 0:l.staffProfilePhoto):"".concat(m.p3,"/feed-user-avatar.svg"),alt:"staff icon"}),(0,k.jsxs)("div",{className:Z.Z.lmsrci_text,children:[(0,k.jsx)("h6",{children:"".concat(null!==(a=null===r||void 0===r||null===(n=r.staff)||void 0===n?void 0:n.staffFirstName)&&void 0!==a?a:""," ").concat(null!==r&&void 0!==r&&null!==(i=r.staff)&&void 0!==i&&i.staffMiddleName?null===r||void 0===r||null===(c=r.staff)||void 0===c?void 0:c.staffMiddleName:""," ").concat(null!==(o=null===r||void 0===r||null===(d=r.staff)||void 0===d?void 0:d.staffLastName)&&void 0!==o?o:"")}),(0,k.jsxs)("p",{children:[h("raised_on"),(0,p.J)(null===r||void 0===r?void 0:r.createdAt,"LT"),", ",j()(null===r||void 0===r?void 0:r.createdAt).format("DD MMM YYYY"),", ",(0,k.jsx)("span",{className:Z.Z.lmsrc_date,onClick:B,children:h("for_dates")})]})]})]}),(0,k.jsxs)("div",{className:Z.Z.lmsrc_btn,children:[(0,k.jsx)(N.Z,{label:h("reject"),onAction:()=>C("Rejected"),customStyle:q}),(0,k.jsx)(N.Z,{label:h("approve"),onAction:()=>C("Accepted"),customStyle:R})]})]}),(0,k.jsx)("div",{className:Z.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,k.jsxs)("h6",{style:{fontWeight:"400"},children:[h("leave_type")," "," : ",null===r||void 0===r?void 0:r.leave_type]})}),(0,k.jsx)("div",{className:Z.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,k.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[h("reason")," "," : ",null===r||void 0===r?void 0:r.reason]})}),(null===r||void 0===r?void 0:r.attach)&&(0,k.jsx)("div",{className:Z.Z.lmsrci_text,style:{marginTop:"0.5rem"},children:(0,k.jsxs)("h6",{style:{fontWeight:"400",whiteSpace:"break-spaces"},children:[h("attachment")," "," : ",(0,k.jsx)("a",{href:"".concat(b.q2,"/").concat(null===r||void 0===r?void 0:r.attach),target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,k.jsx)("span",{className:Z.Z.lmsrc_date,children:h("view_attachment")})})]})})]}),L&&(0,k.jsx)(g.Z,{onClose:B,allDate:null===r||void 0===r?void 0:r.date}),y&&(0,k.jsx)(v.default,{})]})},q={"--bg-button":"#e7e7e7","--color-button":"#6f727c","--color-white":"#ffffff",margin:"0",padding:"0.2rem 0.8rem"},R={margin:"0",padding:"0.2rem 0.8rem"},S=e=>{var t,l,x;let{instituteId:j}=e;const{t:p}=(0,_.$G)(),[b,g]=(0,s.useState)(""),[Z,N]=(0,s.useState)(1),[q,R]=(0,s.useState)(!0),[S,L]=(0,n.YD)({skip:b}),{lmsLeaveRequestList:w,lmsLeaveRequestListLoading:C,lmsLeaveRequestListRefetch:B}=(0,f.B)({data:{id:j,page:Z,limit:10,search:b,flow:"Request"},skip:!j});(0,s.useEffect)((()=>{L&&q&&N((e=>e+1))}),[L,q]),(0,s.useEffect)((()=>{var e;if(null!==w&&void 0!==w&&null!==(e=w.list)&&void 0!==e&&e.length){var t;let e=(0,i.f)(null===w||void 0===w||null===(t=w.list)||void 0===t?void 0:t.length);R((()=>e))}}),[null===w||void 0===w?void 0:w.list]);const T=(0,s.useCallback)((0,c.J)((e=>{N((()=>1)),g(e)}),1500),[]),A=(0,s.useCallback)((()=>{N((()=>1)),g(""),B()}),[B]);return(0,k.jsxs)(o.default,{children:[(0,k.jsx)(d.default,{children:(0,k.jsxs)("div",{className:a.Z.fm_header_container,children:[(0,k.jsx)("h6",{children:p("leave_request")}),(0,k.jsx)("div",{className:a.Z.fm_search,children:(0,k.jsx)("section",{className:a.Z.fm_search_container,children:(0,k.jsxs)("div",{className:a.Z.fm_search_container_inner,children:[(0,k.jsx)("img",{className:a.Z.fm_search_icon,alt:"search icon",src:"".concat(m.dB,"/navbar-search.svg")}),(0,k.jsx)("input",{type:"text",placeholder:p("search"),onChange:e=>{e.target.value?T(e.target.value):(N((()=>1)),g(""))}})]})})})]})}),(0,k.jsx)(r.Z,{}),(0,k.jsxs)(d.default,{children:[null===w||void 0===w||null===(t=w.list)||void 0===t?void 0:t.map(((e,t)=>{var l;return(null===w||void 0===w||null===(l=w.list)||void 0===l?void 0:l.length)===t+1?(0,k.jsx)("div",{ref:S,children:(0,k.jsx)(y,{leave:e,onRefetch:A})},null===e||void 0===e?void 0:e._id):(0,k.jsx)(y,{leave:e,onRefetch:A},null===e||void 0===e?void 0:e._id)})),C?b?(0,k.jsx)(v.default,{}):(0,k.jsx)(u.Z,{}):b?0===(null===w||void 0===w||null===(l=w.list)||void 0===l?void 0:l.length)&&(0,k.jsx)(h.Z,{title:"No staff leave request found related this search."}):0===(null===w||void 0===w||null===(x=w.list)||void 0===x?void 0:x.length)&&(0,k.jsx)(h.Z,{title:"No staff leave request."})]})]})}},80476:(e,t,l)=>{l.d(t,{Z:()=>s});const s={btn_wrapper:"Button_btn_wrapper__ihT7O",btn_container:"Button_btn_container__OaH2t",create_btn_container:"Button_create_btn_container__JuZrx",upload_excel_file:"Button_upload_excel_file__a7d0K",set_btn_container:"Button_set_btn_container__RvfRG",ccb_button:"Button_ccb_button__Mjv4T"}}}]);
//# sourceMappingURL=1580.9d03a469.chunk.js.map